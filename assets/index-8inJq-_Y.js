var PC=Object.defineProperty;var MC=(n,t,e)=>t in n?PC(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Xt=(n,t,e)=>MC(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();function Ty(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var t_={exports:{}},sh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT;function OC(){if(FT)return sh;FT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:l}}return sh.Fragment=t,sh.jsx=e,sh.jsxs=e,sh}var qT;function DC(){return qT||(qT=1,t_.exports=OC()),t_.exports}var Z=DC(),e_={exports:{}},Kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function kC(){if(GT)return Kt;GT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,k={};function O(j,ct,Tt){this.props=j,this.context=ct,this.refs=k,this.updater=Tt||I}O.prototype.isReactComponent={},O.prototype.setState=function(j,ct){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ct,"setState")},O.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function B(){}B.prototype=O.prototype;function F(j,ct,Tt){this.props=j,this.context=ct,this.refs=k,this.updater=Tt||I}var $=F.prototype=new B;$.constructor=F,P($,O.prototype),$.isPureReactComponent=!0;var nt=Array.isArray,J={H:null,A:null,T:null,S:null,V:null},ht=Object.prototype.hasOwnProperty;function V(j,ct,Tt,yt,St,At){return Tt=At.ref,{$$typeof:n,type:j,key:ct,ref:Tt!==void 0?Tt:null,props:At}}function D(j,ct){return V(j.type,ct,void 0,void 0,void 0,j.props)}function z(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function U(j){var ct={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Tt){return ct[Tt]})}var H=/\/+/g;function G(j,ct){return typeof j=="object"&&j!==null&&j.key!=null?U(""+j.key):ct.toString(36)}function q(){}function Yt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(q,q):(j.status="pending",j.then(function(ct){j.status==="pending"&&(j.status="fulfilled",j.value=ct)},function(ct){j.status==="pending"&&(j.status="rejected",j.reason=ct)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function kt(j,ct,Tt,yt,St){var At=typeof j;(At==="undefined"||At==="boolean")&&(j=null);var Et=!1;if(j===null)Et=!0;else switch(At){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(j.$$typeof){case n:case t:Et=!0;break;case v:return Et=j._init,kt(Et(j._payload),ct,Tt,yt,St)}}if(Et)return St=St(j),Et=yt===""?"."+G(j,0):yt,nt(St)?(Tt="",Et!=null&&(Tt=Et.replace(H,"$&/")+"/"),kt(St,ct,Tt,"",function(Ri){return Ri})):St!=null&&(z(St)&&(St=D(St,Tt+(St.key==null||j&&j.key===St.key?"":(""+St.key).replace(H,"$&/")+"/")+Et)),ct.push(St)),1;Et=0;var Ae=yt===""?".":yt+":";if(nt(j))for(var le=0;le<j.length;le++)yt=j[le],At=Ae+G(yt,le),Et+=kt(yt,ct,Tt,At,St);else if(le=S(j),typeof le=="function")for(j=le.call(j),le=0;!(yt=j.next()).done;)yt=yt.value,At=Ae+G(yt,le++),Et+=kt(yt,ct,Tt,At,St);else if(At==="object"){if(typeof j.then=="function")return kt(Yt(j),ct,Tt,yt,St);throw ct=String(j),Error("Objects are not valid as a React child (found: "+(ct==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ct)+"). If you meant to render a collection of children, use an array instead.")}return Et}function it(j,ct,Tt){if(j==null)return j;var yt=[],St=0;return kt(j,yt,"","",function(At){return ct.call(Tt,At,St++)}),yt}function vt(j){if(j._status===-1){var ct=j._result;ct=ct(),ct.then(function(Tt){(j._status===0||j._status===-1)&&(j._status=1,j._result=Tt)},function(Tt){(j._status===0||j._status===-1)&&(j._status=2,j._result=Tt)}),j._status===-1&&(j._status=0,j._result=ct)}if(j._status===1)return j._result.default;throw j._result}var mt=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ct=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ct))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function Vt(){}return Kt.Children={map:it,forEach:function(j,ct,Tt){it(j,function(){ct.apply(this,arguments)},Tt)},count:function(j){var ct=0;return it(j,function(){ct++}),ct},toArray:function(j){return it(j,function(ct){return ct})||[]},only:function(j){if(!z(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Kt.Component=O,Kt.Fragment=e,Kt.Profiler=r,Kt.PureComponent=F,Kt.StrictMode=i,Kt.Suspense=m,Kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,Kt.__COMPILER_RUNTIME={__proto__:null,c:function(j){return J.H.useMemoCache(j)}},Kt.cache=function(j){return function(){return j.apply(null,arguments)}},Kt.cloneElement=function(j,ct,Tt){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var yt=P({},j.props),St=j.key,At=void 0;if(ct!=null)for(Et in ct.ref!==void 0&&(At=void 0),ct.key!==void 0&&(St=""+ct.key),ct)!ht.call(ct,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&ct.ref===void 0||(yt[Et]=ct[Et]);var Et=arguments.length-2;if(Et===1)yt.children=Tt;else if(1<Et){for(var Ae=Array(Et),le=0;le<Et;le++)Ae[le]=arguments[le+2];yt.children=Ae}return V(j.type,St,void 0,void 0,At,yt)},Kt.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},Kt.createElement=function(j,ct,Tt){var yt,St={},At=null;if(ct!=null)for(yt in ct.key!==void 0&&(At=""+ct.key),ct)ht.call(ct,yt)&&yt!=="key"&&yt!=="__self"&&yt!=="__source"&&(St[yt]=ct[yt]);var Et=arguments.length-2;if(Et===1)St.children=Tt;else if(1<Et){for(var Ae=Array(Et),le=0;le<Et;le++)Ae[le]=arguments[le+2];St.children=Ae}if(j&&j.defaultProps)for(yt in Et=j.defaultProps,Et)St[yt]===void 0&&(St[yt]=Et[yt]);return V(j,At,void 0,void 0,null,St)},Kt.createRef=function(){return{current:null}},Kt.forwardRef=function(j){return{$$typeof:f,render:j}},Kt.isValidElement=z,Kt.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:vt}},Kt.memo=function(j,ct){return{$$typeof:p,type:j,compare:ct===void 0?null:ct}},Kt.startTransition=function(j){var ct=J.T,Tt={};J.T=Tt;try{var yt=j(),St=J.S;St!==null&&St(Tt,yt),typeof yt=="object"&&yt!==null&&typeof yt.then=="function"&&yt.then(Vt,mt)}catch(At){mt(At)}finally{J.T=ct}},Kt.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},Kt.use=function(j){return J.H.use(j)},Kt.useActionState=function(j,ct,Tt){return J.H.useActionState(j,ct,Tt)},Kt.useCallback=function(j,ct){return J.H.useCallback(j,ct)},Kt.useContext=function(j){return J.H.useContext(j)},Kt.useDebugValue=function(){},Kt.useDeferredValue=function(j,ct){return J.H.useDeferredValue(j,ct)},Kt.useEffect=function(j,ct,Tt){var yt=J.H;if(typeof Tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return yt.useEffect(j,ct)},Kt.useId=function(){return J.H.useId()},Kt.useImperativeHandle=function(j,ct,Tt){return J.H.useImperativeHandle(j,ct,Tt)},Kt.useInsertionEffect=function(j,ct){return J.H.useInsertionEffect(j,ct)},Kt.useLayoutEffect=function(j,ct){return J.H.useLayoutEffect(j,ct)},Kt.useMemo=function(j,ct){return J.H.useMemo(j,ct)},Kt.useOptimistic=function(j,ct){return J.H.useOptimistic(j,ct)},Kt.useReducer=function(j,ct,Tt){return J.H.useReducer(j,ct,Tt)},Kt.useRef=function(j){return J.H.useRef(j)},Kt.useState=function(j){return J.H.useState(j)},Kt.useSyncExternalStore=function(j,ct,Tt){return J.H.useSyncExternalStore(j,ct,Tt)},Kt.useTransition=function(){return J.H.useTransition()},Kt.version="19.1.0",Kt}var ZT;function Ey(){return ZT||(ZT=1,e_.exports=kC()),e_.exports}var K=Ey();const ge=Ty(K);var n_={exports:{}},rh={},i_={exports:{}},s_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT;function LC(){return WT||(WT=1,function(n){function t(it,vt){var mt=it.length;it.push(vt);t:for(;0<mt;){var Vt=mt-1>>>1,j=it[Vt];if(0<r(j,vt))it[Vt]=vt,it[mt]=j,mt=Vt;else break t}}function e(it){return it.length===0?null:it[0]}function i(it){if(it.length===0)return null;var vt=it[0],mt=it.pop();if(mt!==vt){it[0]=mt;t:for(var Vt=0,j=it.length,ct=j>>>1;Vt<ct;){var Tt=2*(Vt+1)-1,yt=it[Tt],St=Tt+1,At=it[St];if(0>r(yt,mt))St<j&&0>r(At,yt)?(it[Vt]=At,it[St]=mt,Vt=St):(it[Vt]=yt,it[Tt]=mt,Vt=Tt);else if(St<j&&0>r(At,mt))it[Vt]=At,it[St]=mt,Vt=St;else break t}}return vt}function r(it,vt){var mt=it.sortIndex-vt.sortIndex;return mt!==0?mt:it.id-vt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],p=[],v=1,E=null,S=3,I=!1,P=!1,k=!1,O=!1,B=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function nt(it){for(var vt=e(p);vt!==null;){if(vt.callback===null)i(p);else if(vt.startTime<=it)i(p),vt.sortIndex=vt.expirationTime,t(m,vt);else break;vt=e(p)}}function J(it){if(k=!1,nt(it),!P)if(e(m)!==null)P=!0,ht||(ht=!0,G());else{var vt=e(p);vt!==null&&kt(J,vt.startTime-it)}}var ht=!1,V=-1,D=5,z=-1;function U(){return O?!0:!(n.unstable_now()-z<D)}function H(){if(O=!1,ht){var it=n.unstable_now();z=it;var vt=!0;try{t:{P=!1,k&&(k=!1,F(V),V=-1),I=!0;var mt=S;try{e:{for(nt(it),E=e(m);E!==null&&!(E.expirationTime>it&&U());){var Vt=E.callback;if(typeof Vt=="function"){E.callback=null,S=E.priorityLevel;var j=Vt(E.expirationTime<=it);if(it=n.unstable_now(),typeof j=="function"){E.callback=j,nt(it),vt=!0;break e}E===e(m)&&i(m),nt(it)}else i(m);E=e(m)}if(E!==null)vt=!0;else{var ct=e(p);ct!==null&&kt(J,ct.startTime-it),vt=!1}}break t}finally{E=null,S=mt,I=!1}vt=void 0}}finally{vt?G():ht=!1}}}var G;if(typeof $=="function")G=function(){$(H)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Yt=q.port2;q.port1.onmessage=H,G=function(){Yt.postMessage(null)}}else G=function(){B(H,0)};function kt(it,vt){V=B(function(){it(n.unstable_now())},vt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(it){it.callback=null},n.unstable_forceFrameRate=function(it){0>it||125<it?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<it?Math.floor(1e3/it):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(it){switch(S){case 1:case 2:case 3:var vt=3;break;default:vt=S}var mt=S;S=vt;try{return it()}finally{S=mt}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(it,vt){switch(it){case 1:case 2:case 3:case 4:case 5:break;default:it=3}var mt=S;S=it;try{return vt()}finally{S=mt}},n.unstable_scheduleCallback=function(it,vt,mt){var Vt=n.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?Vt+mt:Vt):mt=Vt,it){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=mt+j,it={id:v++,callback:vt,priorityLevel:it,startTime:mt,expirationTime:j,sortIndex:-1},mt>Vt?(it.sortIndex=mt,t(p,it),e(m)===null&&it===e(p)&&(k?(F(V),V=-1):k=!0,kt(J,mt-Vt))):(it.sortIndex=j,t(m,it),P||I||(P=!0,ht||(ht=!0,G()))),it},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(it){var vt=S;return function(){var mt=S;S=vt;try{return it.apply(this,arguments)}finally{S=mt}}}}(s_)),s_}var YT;function NC(){return YT||(YT=1,i_.exports=LC()),i_.exports}var r_={exports:{}},Kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $T;function VC(){if($T)return Kn;$T=1;var n=Ey();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(m,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:m,containerInfo:p,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Kn.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(m,p,null,v)},Kn.flushSync=function(m){var p=c.T,v=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=v,i.d.f()}},Kn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},Kn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Kn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,E=f(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:I}):v==="script"&&i.d.X(m,{crossOrigin:E,integrity:S,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Kn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=f(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},Kn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=f(v,p.crossOrigin);i.d.L(m,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Kn.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=f(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},Kn.requestFormReset=function(m){i.d.r(m)},Kn.unstable_batchedUpdates=function(m,p){return m(p)},Kn.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},Kn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Kn.version="19.1.0",Kn}var KT;function r1(){if(KT)return r_.exports;KT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),r_.exports=VC(),r_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function zC(){if(XT)return rh;XT=1;var n=NC(),t=Ey(),e=r1();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(l(s)!==s)throw Error(i(188))}function m(s){var a=s.alternate;if(!a){if(a=l(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,d=a;;){var y=u.return;if(y===null)break;var b=y.alternate;if(b===null){if(d=y.return,d!==null){u=d;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===u)return f(y),s;if(b===d)return f(y),a;b=b.sibling}throw Error(i(188))}if(u.return!==d.return)u=y,d=b;else{for(var R=!1,M=y.child;M;){if(M===u){R=!0,u=y,d=b;break}if(M===d){R=!0,d=y,u=b;break}M=M.sibling}if(!R){for(M=b.child;M;){if(M===u){R=!0,u=b,d=y;break}if(M===d){R=!0,d=b,u=y;break}M=M.sibling}if(!R)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),$=Symbol.for("react.context"),nt=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),ht=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var q=Symbol.for("react.client.reference");function Yt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===q?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case O:return"Profiler";case k:return"StrictMode";case J:return"Suspense";case ht:return"SuspenseList";case z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case I:return"Portal";case $:return(s.displayName||"Context")+".Provider";case F:return(s._context.displayName||"Context")+".Consumer";case nt:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return a=s.displayName||null,a!==null?a:Yt(s.type)||"Memo";case D:a=s._payload,s=s._init;try{return Yt(s(a))}catch{}}return null}var kt=Array.isArray,it=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt={pending:!1,data:null,method:null,action:null},Vt=[],j=-1;function ct(s){return{current:s}}function Tt(s){0>j||(s.current=Vt[j],Vt[j]=null,j--)}function yt(s,a){j++,Vt[j]=s.current,s.current=a}var St=ct(null),At=ct(null),Et=ct(null),Ae=ct(null);function le(s,a){switch(yt(Et,a),yt(At,s),yt(St,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?_T(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=_T(a),s=yT(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Tt(St),yt(St,s)}function Ri(){Tt(St),Tt(At),Tt(Et)}function Ji(s){s.memoizedState!==null&&yt(Ae,s);var a=St.current,u=yT(a,s.type);a!==u&&(yt(At,s),yt(St,u))}function Ii(s){At.current===s&&(Tt(St),Tt(At)),Ae.current===s&&(Tt(Ae),Jc._currentValue=mt)}var Ci=Object.prototype.hasOwnProperty,Ss=n.unstable_scheduleCallback,Mr=n.unstable_cancelCallback,wa=n.unstable_shouldYield,Yo=n.unstable_requestPaint,Hn=n.unstable_now,Sa=n.unstable_getCurrentPriorityLevel,$o=n.unstable_ImmediatePriority,Or=n.unstable_UserBlockingPriority,xs=n.unstable_NormalPriority,Jl=n.unstable_LowPriority,Dr=n.unstable_IdlePriority,Ko=n.log,tu=n.unstable_setDisableYieldValue,De=null,fe=null;function Fn(s){if(typeof Ko=="function"&&tu(s),fe&&typeof fe.setStrictMode=="function")try{fe.setStrictMode(De,s)}catch{}}var Tn=Math.clz32?Math.clz32:kr,Xo=Math.log,eu=Math.LN2;function kr(s){return s>>>=0,s===0?32:31-(Xo(s)/eu|0)|0}var Js=256,As=4194304;function fi(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function xa(s,a,u){var d=s.pendingLanes;if(d===0)return 0;var y=0,b=s.suspendedLanes,R=s.pingedLanes;s=s.warmLanes;var M=d&134217727;return M!==0?(d=M&~b,d!==0?y=fi(d):(R&=M,R!==0?y=fi(R):u||(u=M&~s,u!==0&&(y=fi(u))))):(M=d&~b,M!==0?y=fi(M):R!==0?y=fi(R):u||(u=d&~s,u!==0&&(y=fi(u)))),y===0?0:a!==0&&a!==y&&(a&b)===0&&(b=y&-y,u=a&-a,b>=u||b===32&&(u&4194048)!==0)?a:y}function Pi(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Qo(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jo(){var s=Js;return Js<<=1,(Js&4194048)===0&&(Js=256),s}function Aa(){var s=As;return As<<=1,(As&62914560)===0&&(As=4194304),s}function ts(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function es(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function tl(s,a,u,d,y,b){var R=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var M=s.entanglements,Y=s.expirationTimes,rt=s.hiddenUpdates;for(u=R&~u;0<u;){var ft=31-Tn(u),pt=1<<ft;M[ft]=0,Y[ft]=-1;var at=rt[ft];if(at!==null)for(rt[ft]=null,ft=0;ft<at.length;ft++){var ot=at[ft];ot!==null&&(ot.lane&=-536870913)}u&=~pt}d!==0&&ns(s,d,0),b!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=b&~(R&~a))}function ns(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var d=31-Tn(a);s.entangledLanes|=a,s.entanglements[d]=s.entanglements[d]|1073741824|u&4194090}function el(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var d=31-Tn(u),y=1<<d;y&a|s[d]&a&&(s[d]|=a),u&=~y}}function tr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ra(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function er(){var s=vt.p;return s!==0?s:(s=window.event,s===void 0?32:VT(s.type))}function Ia(s,a){var u=vt.p;try{return vt.p=s,a()}finally{vt.p=u}}var ke=Math.random().toString(36).slice(2),tn="__reactFiber$"+ke,Xe="__reactProps$"+ke,di="__reactContainer$"+ke,qn="__reactEvents$"+ke,Ot="__reactListeners$"+ke,Rs="__reactHandles$"+ke,nl="__reactResources$"+ke,nr="__reactMarker$"+ke;function Is(s){delete s[tn],delete s[Xe],delete s[qn],delete s[Ot],delete s[Rs]}function Mi(s){var a=s[tn];if(a)return a;for(var u=s.parentNode;u;){if(a=u[di]||u[tn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=ET(s);s!==null;){if(u=s[tn])return u;s=ET(s)}return a}s=u,u=s.parentNode}return null}function Oi(s){if(s=s[tn]||s[di]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function On(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function En(s){var a=s[nl];return a||(a=s[nl]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ze(s){s[nr]=!0}var il=new Set,Ca={};function Di(s,a){is(s,a),is(s+"Capture",a)}function is(s,a){for(Ca[s]=a,s=0;s<a.length;s++)il.add(a[s])}var nu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lr={},Nr={};function iu(s){return Ci.call(Nr,s)?!0:Ci.call(Lr,s)?!1:nu.test(s)?Nr[s]=!0:(Lr[s]=!0,!1)}function ir(s,a,u){if(iu(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function ss(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function pn(s,a,u,d){if(d===null)s.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+d)}}var Cs,sr;function rs(s){if(Cs===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Cs=a&&a[1]||"",sr=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cs+s+sr}var Vr=!1;function as(s,a){if(!s||Vr)return"";Vr=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(ot){var at=ot}Reflect.construct(s,[],pt)}else{try{pt.call()}catch(ot){at=ot}s.call(pt.prototype)}}else{try{throw Error()}catch(ot){at=ot}(pt=s())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(ot){if(ot&&at&&typeof ot.stack=="string")return[ot.stack,at.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),R=b[0],M=b[1];if(R&&M){var Y=R.split(`
`),rt=M.split(`
`);for(y=d=0;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;for(;y<rt.length&&!rt[y].includes("DetermineComponentFrameRoot");)y++;if(d===Y.length||y===rt.length)for(d=Y.length-1,y=rt.length-1;1<=d&&0<=y&&Y[d]!==rt[y];)y--;for(;1<=d&&0<=y;d--,y--)if(Y[d]!==rt[y]){if(d!==1||y!==1)do if(d--,y--,0>y||Y[d]!==rt[y]){var ft=`
`+Y[d].replace(" at new "," at ");return s.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",s.displayName)),ft}while(1<=d&&0<=y);break}}}finally{Vr=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?rs(u):""}function te(s){switch(s.tag){case 26:case 27:case 5:return rs(s.type);case 16:return rs("Lazy");case 13:return rs("Suspense");case 19:return rs("SuspenseList");case 0:case 15:return as(s.type,!1);case 11:return as(s.type.render,!1);case 1:return as(s.type,!0);case 31:return rs("Activity");default:return""}}function _e(s){try{var a="";do a+=te(s),s=s.return;while(s);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function ln(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function os(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function rr(s){var a=os(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),d=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,b=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return y.call(this)},set:function(R){d=""+R,b.call(this,R)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(R){d=""+R},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function ar(s){s._valueTracker||(s._valueTracker=rr(s))}function Gt(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),d="";return s&&(d=os(s)?s.checked?"true":"false":s.value),s=d,s!==u?(a.setValue(s),!0):!1}function be(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var sl=/[\n"\\]/g;function Be(s){return s.replace(sl,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Le(s,a,u,d,y,b,R,M){s.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.type=R:s.removeAttribute("type"),a!=null?R==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+ln(a)):s.value!==""+ln(a)&&(s.value=""+ln(a)):R!=="submit"&&R!=="reset"||s.removeAttribute("value"),a!=null?ki(s,R,ln(a)):u!=null?ki(s,R,ln(u)):d!=null&&s.removeAttribute("value"),y==null&&b!=null&&(s.defaultChecked=!!b),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+ln(M):s.removeAttribute("name")}function zr(s,a,u,d,y,b,R,M){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),a!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||a!=null))return;u=u!=null?""+ln(u):"",a=a!=null?""+ln(a):u,M||a===s.value||(s.value=a),s.defaultValue=a}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=M?s.checked:!!d,s.defaultChecked=!!d,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(s.name=R)}function ki(s,a,u){a==="number"&&be(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function Dn(s,a,u,d){if(s=s.options,a){a={};for(var y=0;y<u.length;y++)a["$"+u[y]]=!0;for(u=0;u<s.length;u++)y=a.hasOwnProperty("$"+s[u].value),s[u].selected!==y&&(s[u].selected=y),y&&d&&(s[u].defaultSelected=!0)}else{for(u=""+ln(u),a=null,y=0;y<s.length;y++){if(s[y].value===u){s[y].selected=!0,d&&(s[y].defaultSelected=!0);return}a!==null||s[y].disabled||(a=s[y])}a!==null&&(a.selected=!0)}}function jt(s,a,u){if(a!=null&&(a=""+ln(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+ln(u):""}function si(s,a,u,d){if(a==null){if(d!=null){if(u!=null)throw Error(i(92));if(kt(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),a=u}u=ln(a),s.defaultValue=u,d=s.textContent,d===u&&d!==""&&d!==null&&(s.value=d)}function wn(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Li=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pa(s,a,u){var d=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":d?s.setProperty(a,u):typeof u!="number"||u===0||Li.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function Ps(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var y in a)d=a[y],a.hasOwnProperty(y)&&u[y]!==d&&Pa(s,y,d)}else for(var b in a)a.hasOwnProperty(b)&&Pa(s,b,a[b])}function Br(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ma=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function or(s){return Ma.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Ni=null;function kn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ls=null,Vi=null;function al(s){var a=Oi(s);if(a&&(s=a.stateNode)){var u=s[Xe]||null;t:switch(s=a.stateNode,a.type){case"input":if(Le(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Be(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var d=u[a];if(d!==s&&d.form===s.form){var y=d[Xe]||null;if(!y)throw Error(i(90));Le(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<u.length;a++)d=u[a],d.form===s.form&&Gt(d)}break t;case"textarea":jt(s,u.value,u.defaultValue);break t;case"select":a=u.value,a!=null&&Dn(s,!!u.multiple,a,!1)}}}var Nt=!1;function ri(s,a,u){if(Nt)return s(a,u);Nt=!0;try{var d=s(a);return d}finally{if(Nt=!1,(ls!==null||Vi!==null)&&(nd(),ls&&(a=ls,s=Vi,Vi=ls=null,al(a),s)))for(a=0;a<s.length;a++)al(s[a])}}function ue(s,a){var u=s.stateNode;if(u===null)return null;var d=u[Xe]||null;if(d===null)return null;u=d[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break t;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(mi)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{Gn=!1}var pi=null,Zn=null,zi=null;function Os(){if(zi)return zi;var s,a=Zn,u=a.length,d,y="value"in pi?pi.value:pi.textContent,b=y.length;for(s=0;s<u&&a[s]===y[s];s++);var R=u-s;for(d=1;d<=R&&a[u-d]===y[b-d];d++);return zi=y.slice(s,1<d?1-d:void 0)}function Re(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Sn(){return!0}function Oa(){return!1}function en(s){function a(u,d,y,b,R){this._reactName=u,this._targetInst=y,this.type=d,this.nativeEvent=b,this.target=R,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(b):b[M]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Sn:Oa,this.isPropagationStopped=Oa,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Sn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Sn)},persist:function(){},isPersistent:Sn}),a}var de={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ur=en(de),Ds=v({},de,{view:0,detail:0}),su=en(Ds),jr,$t,us,gn=v({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ur,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==us&&(us&&s.type==="mousemove"?(jr=s.screenX-us.screenX,$t=s.screenY-us.screenY):$t=jr=0,us=s),jr)},movementY:function(s){return"movementY"in s?s.movementY:$t}}),xn=en(gn),ol=v({},gn,{dataTransfer:0}),gc=en(ol),ks=v({},Ds,{relatedTarget:0}),Da=en(ks),ka=v({},de,{animationName:0,elapsedTime:0,pseudoElement:0}),La=en(ka),ru=v({},de,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),lr=en(ru),_c=v({},de,{data:0}),Wn=en(_c),Hr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ll={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Na(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Bi[s])?!!a[s]:!1}function ur(){return Na}var Va=v({},Ds,{key:function(s){if(s.key){var a=Hr[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Re(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ll[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ur,charCode:function(s){return s.type==="keypress"?Re(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Re(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),za=en(Va),ul=v({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ba=en(ul),Ls=v({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ur}),au=en(Ls),Ua=v({},de,{propertyName:0,elapsedTime:0,pseudoElement:0}),ou=en(Ua),cl=v({},gn,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Fr=en(cl),un=v({},de,{newState:0,oldState:0}),cs=en(un),lu=[9,13,27,32],Yn=mi&&"CompositionEvent"in window,g=null;mi&&"documentMode"in document&&(g=document.documentMode);var w=mi&&"TextEvent"in window&&!g,A=mi&&(!Yn||g&&8<g&&11>=g),N=" ",tt=!1;function ut(s,a){switch(s){case"keyup":return lu.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var se=!1;function Qe(s,a){switch(s){case"compositionend":return wt(a);case"keypress":return a.which!==32?null:(tt=!0,N);case"textInput":return s=a.data,s===N&&tt?null:s;default:return null}}function re(s,a){if(se)return s==="compositionend"||!Yn&&ut(s,a)?(s=Os(),zi=Zn=pi=null,se=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return A&&a.locale!=="ko"?null:a.data;default:return null}}var ye={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ne(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!ye[s.type]:a==="textarea"}function Ns(s,a,u,d){ls?Vi?Vi.push(d):Vi=[d]:ls=d,a=ld(a,"onChange"),0<a.length&&(u=new Ur("onChange","change",null,u,d),s.push({event:u,listeners:a}))}var Me=null,hs=null;function fs(s){fT(s,0)}function uu(s){var a=On(s);if(Gt(a))return s}function ja(s,a){if(s==="change")return a}var yc=!1;if(mi){var Ha;if(mi){var vc="oninput"in document;if(!vc){var Vs=document.createElement("div");Vs.setAttribute("oninput","return;"),vc=typeof Vs.oninput=="function"}Ha=vc}else Ha=!1;yc=Ha&&(!document.documentMode||9<document.documentMode)}function hl(){Me&&(Me.detachEvent("onpropertychange",Tf),hs=Me=null)}function Tf(s){if(s.propertyName==="value"&&uu(hs)){var a=[];Ns(a,hs,s,kn(s)),ri(fs,a)}}function bc(s,a,u){s==="focusin"?(hl(),Me=a,hs=u,Me.attachEvent("onpropertychange",Tf)):s==="focusout"&&hl()}function Sp(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return uu(hs)}function zs(s,a){if(s==="click")return uu(a)}function xp(s,a){if(s==="input"||s==="change")return uu(a)}function Fa(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var ai=typeof Object.is=="function"?Object.is:Fa;function oi(s,a){if(ai(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),d=Object.keys(a);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var y=u[d];if(!Ci.call(a,y)||!ai(s[y],a[y]))return!1}return!0}function fl(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Tc(s,a){var u=fl(s);s=0;for(var d;u;){if(u.nodeType===3){if(d=s+u.textContent.length,s<=a&&d>=a)return{node:u,offset:a-s};s=d}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=fl(u)}}function cu(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?cu(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function dl(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=be(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=be(s.document)}return a}function ml(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var hu=mi&&"documentMode"in document&&11>=document.documentMode,Ui=null,qa=null,qr=null,fu=!1;function Ef(s,a,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;fu||Ui==null||Ui!==be(d)||(d=Ui,"selectionStart"in d&&ml(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),qr&&oi(qr,d)||(qr=d,d=ld(qa,"onSelect"),0<d.length&&(a=new Ur("onSelect","select",null,a,u),s.push({event:a,listeners:d}),a.target=Ui)))}function ds(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var Ga={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionrun:ds("Transition","TransitionRun"),transitionstart:ds("Transition","TransitionStart"),transitioncancel:ds("Transition","TransitionCancel"),transitionend:ds("Transition","TransitionEnd")},du={},wf={};mi&&(wf=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function cr(s){if(du[s])return du[s];if(!Ga[s])return s;var a=Ga[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in wf)return du[s]=a[u];return s}var Sf=cr("animationend"),ji=cr("animationiteration"),pl=cr("animationstart"),Ap=cr("transitionrun"),mu=cr("transitionstart"),Rp=cr("transitioncancel"),Ec=cr("transitionend"),xf=new Map,Gr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gr.push("scrollEnd");function Hi(s,a){xf.set(s,a),Di(a,[s])}var Zr=new WeakMap;function li(s,a){if(typeof s=="object"&&s!==null){var u=Zr.get(s);return u!==void 0?u:(a={value:s,source:a,stack:_e(a)},Zr.set(s,a),a)}return{value:s,source:a,stack:_e(a)}}var ui=[],Za=0,Fi=0;function gl(){for(var s=Za,a=Fi=Za=0;a<s;){var u=ui[a];ui[a++]=null;var d=ui[a];ui[a++]=null;var y=ui[a];ui[a++]=null;var b=ui[a];if(ui[a++]=null,d!==null&&y!==null){var R=d.pending;R===null?y.next=y:(y.next=R.next,R.next=y),d.pending=y}b!==0&&yl(u,y,b)}}function _l(s,a,u,d){ui[Za++]=s,ui[Za++]=a,ui[Za++]=u,ui[Za++]=d,Fi|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Wr(s,a,u,d){return _l(s,a,u,d),hr(s)}function Wa(s,a){return _l(s,null,null,a),hr(s)}function yl(s,a,u){s.lanes|=u;var d=s.alternate;d!==null&&(d.lanes|=u);for(var y=!1,b=s.return;b!==null;)b.childLanes|=u,d=b.alternate,d!==null&&(d.childLanes|=u),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(y=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,y&&a!==null&&(y=31-Tn(u),s=b.hiddenUpdates,d=s[y],d===null?s[y]=[a]:d.push(a),a.lane=u|536870912),b):null}function hr(s){if(50<Gc)throw Gc=0,Sg=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Yr={};function Af(s,a,u,d){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(s,a,u,d){return new Af(s,a,u,d)}function pu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ms(s,a){var u=s.alternate;return u===null?(u=ci(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function wc(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function vl(s,a,u,d,y,b){var R=0;if(d=s,typeof s=="function")pu(s)&&(R=1);else if(typeof s=="string")R=_C(s,u,St.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case z:return s=ci(31,u,a,y),s.elementType=z,s.lanes=b,s;case P:return fr(u.children,y,b,a);case k:R=8,y|=24;break;case O:return s=ci(12,u,a,y|2),s.elementType=O,s.lanes=b,s;case J:return s=ci(13,u,a,y),s.elementType=J,s.lanes=b,s;case ht:return s=ci(19,u,a,y),s.elementType=ht,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case B:case $:R=10;break t;case F:R=9;break t;case nt:R=11;break t;case V:R=14;break t;case D:R=16,d=null;break t}R=29,u=Error(i(130,s===null?"null":typeof s,"")),d=null}return a=ci(R,u,a,y),a.elementType=s,a.type=d,a.lanes=b,a}function fr(s,a,u,d){return s=ci(7,s,d,a),s.lanes=u,s}function Sc(s,a,u){return s=ci(6,s,null,a),s.lanes=u,s}function gu(s,a,u){return a=ci(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var $r=[],Ya=0,o=null,h=0,_=[],T=0,x=null,C=1,W="";function et(s,a){$r[Ya++]=h,$r[Ya++]=o,o=s,h=a}function lt(s,a,u){_[T++]=C,_[T++]=W,_[T++]=x,x=s;var d=C;s=W;var y=32-Tn(d)-1;d&=~(1<<y),u+=1;var b=32-Tn(a)+y;if(30<b){var R=y-y%5;b=(d&(1<<R)-1).toString(32),d>>=R,y-=R,C=1<<32-Tn(a)+y|u<<y|d,W=b+s}else C=1<<b|u<<y|d,W=s}function bt(s){s.return!==null&&(et(s,1),lt(s,1,0))}function xt(s){for(;s===o;)o=$r[--Ya],$r[Ya]=null,h=$r[--Ya],$r[Ya]=null;for(;s===x;)x=_[--T],_[T]=null,W=_[--T],_[T]=null,C=_[--T],_[T]=null}var Ct=null,Mt=null,qt=!1,Ve=null,We=!1,An=Error(i(519));function gi(s){var a=Error(i(418,""));throw Ka(li(a,s)),An}function Rf(s){var a=s.stateNode,u=s.type,d=s.memoizedProps;switch(a[tn]=s,a[Xe]=d,u){case"dialog":ie("cancel",a),ie("close",a);break;case"iframe":case"object":case"embed":ie("load",a);break;case"video":case"audio":for(u=0;u<Wc.length;u++)ie(Wc[u],a);break;case"source":ie("error",a);break;case"img":case"image":case"link":ie("error",a),ie("load",a);break;case"details":ie("toggle",a);break;case"input":ie("invalid",a),zr(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),ar(a);break;case"select":ie("invalid",a);break;case"textarea":ie("invalid",a),si(a,d.value,d.defaultValue,d.children),ar(a)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||d.suppressHydrationWarning===!0||gT(a.textContent,u)?(d.popover!=null&&(ie("beforetoggle",a),ie("toggle",a)),d.onScroll!=null&&ie("scroll",a),d.onScrollEnd!=null&&ie("scrollend",a),d.onClick!=null&&(a.onclick=ud),a=!0):a=!1,a||gi(s)}function If(s){for(Ct=s.return;Ct;)switch(Ct.tag){case 5:case 13:We=!1;return;case 27:case 3:We=!0;return;default:Ct=Ct.return}}function bl(s){if(s!==Ct)return!1;if(!qt)return If(s),qt=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Ug(s.type,s.memoizedProps)),u=!u),u&&Mt&&gi(s),If(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(a===0){Mt=Hs(s.nextSibling);break t}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;s=s.nextSibling}Mt=null}}else a===27?(a=Mt,ho(s.type)?(s=qg,qg=null,Mt=s):Mt=a):Mt=Ct?Hs(s.stateNode.nextSibling):null;return!0}function $a(){Mt=Ct=null,qt=!1}function Cf(){var s=Ve;return s!==null&&(vi===null?vi=s:vi.push.apply(vi,s),Ve=null),s}function Ka(s){Ve===null?Ve=[s]:Ve.push(s)}var Fe=ct(null),ps=null,Bs=null;function dr(s,a,u){yt(Fe,a._currentValue),a._currentValue=u}function Us(s){s._currentValue=Fe.current,Tt(Fe)}function Tl(s,a,u){for(;s!==null;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===u)break;s=s.return}}function _u(s,a,u,d){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var b=y.dependencies;if(b!==null){var R=y.child;b=b.firstContext;t:for(;b!==null;){var M=b;b=y;for(var Y=0;Y<a.length;Y++)if(M.context===a[Y]){b.lanes|=u,M=b.alternate,M!==null&&(M.lanes|=u),Tl(b.return,u,s),d||(R=null);break t}b=M.next}}else if(y.tag===18){if(R=y.return,R===null)throw Error(i(341));R.lanes|=u,b=R.alternate,b!==null&&(b.lanes|=u),Tl(R,u,s),R=null}else R=y.child;if(R!==null)R.return=y;else for(R=y;R!==null;){if(R===s){R=null;break}if(y=R.sibling,y!==null){y.return=R.return,R=y;break}R=R.return}y=R}}function El(s,a,u,d){s=null;for(var y=a,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var R=y.alternate;if(R===null)throw Error(i(387));if(R=R.memoizedProps,R!==null){var M=y.type;ai(y.pendingProps.value,R.value)||(s!==null?s.push(M):s=[M])}}else if(y===Ae.current){if(R=y.alternate,R===null)throw Error(i(387));R.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Jc):s=[Jc])}y=y.return}s!==null&&_u(a,s,u,d),a.flags|=262144}function Pf(s){for(s=s.firstContext;s!==null;){if(!ai(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function wl(s){ps=s,Bs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function $n(s){return n0(ps,s)}function Mf(s,a){return ps===null&&wl(s),n0(s,a)}function n0(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Bs===null){if(s===null)throw Error(i(308));Bs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Bs=Bs.next=a;return u}var gI=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,d){s.push(d)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},_I=n.unstable_scheduleCallback,yI=n.unstable_NormalPriority,_n={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ip(){return{controller:new gI,data:new Map,refCount:0}}function xc(s){s.refCount--,s.refCount===0&&_I(yI,function(){s.controller.abort()})}var Ac=null,Cp=0,yu=0,vu=null;function vI(s,a){if(Ac===null){var u=Ac=[];Cp=0,yu=Mg(),vu={status:"pending",value:void 0,then:function(d){u.push(d)}}}return Cp++,a.then(i0,i0),a}function i0(){if(--Cp===0&&Ac!==null){vu!==null&&(vu.status="fulfilled");var s=Ac;Ac=null,yu=0,vu=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function bI(s,a){var u=[],d={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return s.then(function(){d.status="fulfilled",d.value=a;for(var y=0;y<u.length;y++)(0,u[y])(a)},function(y){for(d.status="rejected",d.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),d}var s0=it.S;it.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&vI(s,a),s0!==null&&s0(s,a)};var Sl=ct(null);function Pp(){var s=Sl.current;return s!==null?s:ze.pooledCache}function Of(s,a){a===null?yt(Sl,Sl.current):yt(Sl,a.pool)}function r0(){var s=Pp();return s===null?null:{parent:_n._currentValue,pool:s}}var Rc=Error(i(460)),a0=Error(i(474)),Df=Error(i(542)),Mp={then:function(){}};function o0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function kf(){}function l0(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(kf,kf),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,c0(s),s;default:if(typeof a.status=="string")a.then(kf,kf);else{if(s=ze,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(d){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=d}},function(d){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,c0(s),s}throw Ic=a,Rc}}var Ic=null;function u0(){if(Ic===null)throw Error(i(459));var s=Ic;return Ic=null,s}function c0(s){if(s===Rc||s===Df)throw Error(i(483))}var Xa=!1;function Op(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dp(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Qa(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ja(s,a,u){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Te&2)!==0){var y=d.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),d.pending=a,a=hr(s),yl(s,null,u),a}return _l(s,d,a,u),hr(s)}function Cc(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var d=a.lanes;d&=s.pendingLanes,u|=d,a.lanes=u,el(s,u)}}function kp(s,a){var u=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var y=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var R={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?y=b=R:b=b.next=R,u=u.next}while(u!==null);b===null?y=b=a:b=b.next=a}else y=b=a;u={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var Lp=!1;function Pc(){if(Lp){var s=vu;if(s!==null)throw s}}function Mc(s,a,u,d){Lp=!1;var y=s.updateQueue;Xa=!1;var b=y.firstBaseUpdate,R=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var Y=M,rt=Y.next;Y.next=null,R===null?b=rt:R.next=rt,R=Y;var ft=s.alternate;ft!==null&&(ft=ft.updateQueue,M=ft.lastBaseUpdate,M!==R&&(M===null?ft.firstBaseUpdate=rt:M.next=rt,ft.lastBaseUpdate=Y))}if(b!==null){var pt=y.baseState;R=0,ft=rt=Y=null,M=b;do{var at=M.lane&-536870913,ot=at!==M.lane;if(ot?(ce&at)===at:(d&at)===at){at!==0&&at===yu&&(Lp=!0),ft!==null&&(ft=ft.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var Ft=s,zt=M;at=a;var Pe=u;switch(zt.tag){case 1:if(Ft=zt.payload,typeof Ft=="function"){pt=Ft.call(Pe,pt,at);break t}pt=Ft;break t;case 3:Ft.flags=Ft.flags&-65537|128;case 0:if(Ft=zt.payload,at=typeof Ft=="function"?Ft.call(Pe,pt,at):Ft,at==null)break t;pt=v({},pt,at);break t;case 2:Xa=!0}}at=M.callback,at!==null&&(s.flags|=64,ot&&(s.flags|=8192),ot=y.callbacks,ot===null?y.callbacks=[at]:ot.push(at))}else ot={lane:at,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ft===null?(rt=ft=ot,Y=pt):ft=ft.next=ot,R|=at;if(M=M.next,M===null){if(M=y.shared.pending,M===null)break;ot=M,M=ot.next,ot.next=null,y.lastBaseUpdate=ot,y.shared.pending=null}}while(!0);ft===null&&(Y=pt),y.baseState=Y,y.firstBaseUpdate=rt,y.lastBaseUpdate=ft,b===null&&(y.shared.lanes=0),oo|=R,s.lanes=R,s.memoizedState=pt}}function h0(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function f0(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)h0(u[s],a)}var bu=ct(null),Lf=ct(0);function d0(s,a){s=na,yt(Lf,s),yt(bu,a),na=s|a.baseLanes}function Np(){yt(Lf,na),yt(bu,bu.current)}function Vp(){na=Lf.current,Tt(bu),Tt(Lf)}var to=0,Qt=null,Ie=null,cn=null,Nf=!1,Tu=!1,xl=!1,Vf=0,Oc=0,Eu=null,TI=0;function nn(){throw Error(i(321))}function zp(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!ai(s[u],a[u]))return!1;return!0}function Bp(s,a,u,d,y,b){return to=b,Qt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,it.H=s===null||s.memoizedState===null?K0:X0,xl=!1,b=u(d,y),xl=!1,Tu&&(b=p0(a,u,d,y)),m0(s),b}function m0(s){it.H=Ff;var a=Ie!==null&&Ie.next!==null;if(to=0,cn=Ie=Qt=null,Nf=!1,Oc=0,Eu=null,a)throw Error(i(300));s===null||Rn||(s=s.dependencies,s!==null&&Pf(s)&&(Rn=!0))}function p0(s,a,u,d){Qt=s;var y=0;do{if(Tu&&(Eu=null),Oc=0,Tu=!1,25<=y)throw Error(i(301));if(y+=1,cn=Ie=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}it.H=II,b=a(u,d)}while(Tu);return b}function EI(){var s=it.H,a=s.useState()[0];return a=typeof a.then=="function"?Dc(a):a,s=s.useState()[0],(Ie!==null?Ie.memoizedState:null)!==s&&(Qt.flags|=1024),a}function Up(){var s=Vf!==0;return Vf=0,s}function jp(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function Hp(s){if(Nf){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Nf=!1}to=0,cn=Ie=Qt=null,Tu=!1,Oc=Vf=0,Eu=null}function _i(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Qt.memoizedState=cn=s:cn=cn.next=s,cn}function hn(){if(Ie===null){var s=Qt.alternate;s=s!==null?s.memoizedState:null}else s=Ie.next;var a=cn===null?Qt.memoizedState:cn.next;if(a!==null)cn=a,Ie=s;else{if(s===null)throw Qt.alternate===null?Error(i(467)):Error(i(310));Ie=s,s={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},cn===null?Qt.memoizedState=cn=s:cn=cn.next=s}return cn}function Fp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dc(s){var a=Oc;return Oc+=1,Eu===null&&(Eu=[]),s=l0(Eu,s,a),a=Qt,(cn===null?a.memoizedState:cn.next)===null&&(a=a.alternate,it.H=a===null||a.memoizedState===null?K0:X0),s}function zf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Dc(s);if(s.$$typeof===$)return $n(s)}throw Error(i(438,String(s)))}function qp(s){var a=null,u=Qt.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var d=Qt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Fp(),Qt.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),d=0;d<s;d++)u[d]=U;return a.index++,u}function Kr(s,a){return typeof a=="function"?a(s):a}function Bf(s){var a=hn();return Gp(a,Ie,s)}function Gp(s,a,u){var d=s.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var y=s.baseQueue,b=d.pending;if(b!==null){if(y!==null){var R=y.next;y.next=b.next,b.next=R}a.baseQueue=y=b,d.pending=null}if(b=s.baseState,y===null)s.memoizedState=b;else{a=y.next;var M=R=null,Y=null,rt=a,ft=!1;do{var pt=rt.lane&-536870913;if(pt!==rt.lane?(ce&pt)===pt:(to&pt)===pt){var at=rt.revertLane;if(at===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),pt===yu&&(ft=!0);else if((to&at)===at){rt=rt.next,at===yu&&(ft=!0);continue}else pt={lane:0,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Y===null?(M=Y=pt,R=b):Y=Y.next=pt,Qt.lanes|=at,oo|=at;pt=rt.action,xl&&u(b,pt),b=rt.hasEagerState?rt.eagerState:u(b,pt)}else at={lane:pt,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Y===null?(M=Y=at,R=b):Y=Y.next=at,Qt.lanes|=pt,oo|=pt;rt=rt.next}while(rt!==null&&rt!==a);if(Y===null?R=b:Y.next=M,!ai(b,s.memoizedState)&&(Rn=!0,ft&&(u=vu,u!==null)))throw u;s.memoizedState=b,s.baseState=R,s.baseQueue=Y,d.lastRenderedState=b}return y===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function Zp(s){var a=hn(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var d=u.dispatch,y=u.pending,b=a.memoizedState;if(y!==null){u.pending=null;var R=y=y.next;do b=s(b,R.action),R=R.next;while(R!==y);ai(b,a.memoizedState)||(Rn=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),u.lastRenderedState=b}return[b,d]}function g0(s,a,u){var d=Qt,y=hn(),b=qt;if(b){if(u===void 0)throw Error(i(407));u=u()}else u=a();var R=!ai((Ie||y).memoizedState,u);R&&(y.memoizedState=u,Rn=!0),y=y.queue;var M=v0.bind(null,d,y,s);if(kc(2048,8,M,[s]),y.getSnapshot!==a||R||cn!==null&&cn.memoizedState.tag&1){if(d.flags|=2048,wu(9,Uf(),y0.bind(null,d,y,u,a),null),ze===null)throw Error(i(349));b||(to&124)!==0||_0(d,a,u)}return u}function _0(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Qt.updateQueue,a===null?(a=Fp(),Qt.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function y0(s,a,u,d){a.value=u,a.getSnapshot=d,b0(a)&&T0(s)}function v0(s,a,u){return u(function(){b0(a)&&T0(s)})}function b0(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!ai(s,u)}catch{return!0}}function T0(s){var a=Wa(s,2);a!==null&&Yi(a,s,2)}function Wp(s){var a=_i();if(typeof s=="function"){var u=s;if(s=u(),xl){Fn(!0);try{u()}finally{Fn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kr,lastRenderedState:s},a}function E0(s,a,u,d){return s.baseState=u,Gp(s,Ie,typeof d=="function"?d:Kr)}function wI(s,a,u,d,y){if(Hf(s))throw Error(i(485));if(s=a.action,s!==null){var b={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){b.listeners.push(R)}};it.T!==null?u(!0):b.isTransition=!1,d(b),u=a.pending,u===null?(b.next=a.pending=b,w0(a,b)):(b.next=u.next,a.pending=u.next=b)}}function w0(s,a){var u=a.action,d=a.payload,y=s.state;if(a.isTransition){var b=it.T,R={};it.T=R;try{var M=u(y,d),Y=it.S;Y!==null&&Y(R,M),S0(s,a,M)}catch(rt){Yp(s,a,rt)}finally{it.T=b}}else try{b=u(y,d),S0(s,a,b)}catch(rt){Yp(s,a,rt)}}function S0(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){x0(s,a,d)},function(d){return Yp(s,a,d)}):x0(s,a,u)}function x0(s,a,u){a.status="fulfilled",a.value=u,A0(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,w0(s,u)))}function Yp(s,a,u){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=u,A0(a),a=a.next;while(a!==d)}s.action=null}function A0(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function R0(s,a){return a}function I0(s,a){if(qt){var u=ze.formState;if(u!==null){t:{var d=Qt;if(qt){if(Mt){e:{for(var y=Mt,b=We;y.nodeType!==8;){if(!b){y=null;break e}if(y=Hs(y.nextSibling),y===null){y=null;break e}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){Mt=Hs(y.nextSibling),d=y.data==="F!";break t}}gi(d)}d=!1}d&&(a=u[0])}}return u=_i(),u.memoizedState=u.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:R0,lastRenderedState:a},u.queue=d,u=W0.bind(null,Qt,d),d.dispatch=u,d=Wp(!1),b=Jp.bind(null,Qt,!1,d.queue),d=_i(),y={state:a,dispatch:null,action:s,pending:null},d.queue=y,u=wI.bind(null,Qt,y,b,u),y.dispatch=u,d.memoizedState=s,[a,u,!1]}function C0(s){var a=hn();return P0(a,Ie,s)}function P0(s,a,u){if(a=Gp(s,a,R0)[0],s=Bf(Kr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=Dc(a)}catch(R){throw R===Rc?Df:R}else d=a;a=hn();var y=a.queue,b=y.dispatch;return u!==a.memoizedState&&(Qt.flags|=2048,wu(9,Uf(),SI.bind(null,y,u),null)),[d,b,s]}function SI(s,a){s.action=a}function M0(s){var a=hn(),u=Ie;if(u!==null)return P0(a,u,s);hn(),a=a.memoizedState,u=hn();var d=u.queue.dispatch;return u.memoizedState=s,[a,d,!1]}function wu(s,a,u,d){return s={tag:s,create:u,deps:d,inst:a,next:null},a=Qt.updateQueue,a===null&&(a=Fp(),Qt.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(d=u.next,u.next=s,s.next=d,a.lastEffect=s),s}function Uf(){return{destroy:void 0,resource:void 0}}function O0(){return hn().memoizedState}function jf(s,a,u,d){var y=_i();d=d===void 0?null:d,Qt.flags|=s,y.memoizedState=wu(1|a,Uf(),u,d)}function kc(s,a,u,d){var y=hn();d=d===void 0?null:d;var b=y.memoizedState.inst;Ie!==null&&d!==null&&zp(d,Ie.memoizedState.deps)?y.memoizedState=wu(a,b,u,d):(Qt.flags|=s,y.memoizedState=wu(1|a,b,u,d))}function D0(s,a){jf(8390656,8,s,a)}function k0(s,a){kc(2048,8,s,a)}function L0(s,a){return kc(4,2,s,a)}function N0(s,a){return kc(4,4,s,a)}function V0(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function z0(s,a,u){u=u!=null?u.concat([s]):null,kc(4,4,V0.bind(null,a,s),u)}function $p(){}function B0(s,a){var u=hn();a=a===void 0?null:a;var d=u.memoizedState;return a!==null&&zp(a,d[1])?d[0]:(u.memoizedState=[s,a],s)}function U0(s,a){var u=hn();a=a===void 0?null:a;var d=u.memoizedState;if(a!==null&&zp(a,d[1]))return d[0];if(d=s(),xl){Fn(!0);try{s()}finally{Fn(!1)}}return u.memoizedState=[d,a],d}function Kp(s,a,u){return u===void 0||(to&1073741824)!==0?s.memoizedState=a:(s.memoizedState=u,s=Fb(),Qt.lanes|=s,oo|=s,u)}function j0(s,a,u,d){return ai(u,a)?u:bu.current!==null?(s=Kp(s,u,d),ai(s,a)||(Rn=!0),s):(to&42)===0?(Rn=!0,s.memoizedState=u):(s=Fb(),Qt.lanes|=s,oo|=s,a)}function H0(s,a,u,d,y){var b=vt.p;vt.p=b!==0&&8>b?b:8;var R=it.T,M={};it.T=M,Jp(s,!1,a,u);try{var Y=y(),rt=it.S;if(rt!==null&&rt(M,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ft=bI(Y,d);Lc(s,a,ft,Wi(s))}else Lc(s,a,d,Wi(s))}catch(pt){Lc(s,a,{then:function(){},status:"rejected",reason:pt},Wi())}finally{vt.p=b,it.T=R}}function xI(){}function Xp(s,a,u,d){if(s.tag!==5)throw Error(i(476));var y=F0(s).queue;H0(s,y,a,mt,u===null?xI:function(){return q0(s),u(d)})}function F0(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:mt,baseState:mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kr,lastRenderedState:mt},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kr,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function q0(s){var a=F0(s).next.queue;Lc(s,a,{},Wi())}function Qp(){return $n(Jc)}function G0(){return hn().memoizedState}function Z0(){return hn().memoizedState}function AI(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Wi();s=Qa(u);var d=Ja(a,s,u);d!==null&&(Yi(d,a,u),Cc(d,a,u)),a={cache:Ip()},s.payload=a;return}a=a.return}}function RI(s,a,u){var d=Wi();u={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Hf(s)?Y0(a,u):(u=Wr(s,a,u,d),u!==null&&(Yi(u,s,d),$0(u,a,d)))}function W0(s,a,u){var d=Wi();Lc(s,a,u,d)}function Lc(s,a,u,d){var y={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Hf(s))Y0(a,y);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var R=a.lastRenderedState,M=b(R,u);if(y.hasEagerState=!0,y.eagerState=M,ai(M,R))return _l(s,a,y,0),ze===null&&gl(),!1}catch{}finally{}if(u=Wr(s,a,y,d),u!==null)return Yi(u,s,d),$0(u,a,d),!0}return!1}function Jp(s,a,u,d){if(d={lane:2,revertLane:Mg(),action:d,hasEagerState:!1,eagerState:null,next:null},Hf(s)){if(a)throw Error(i(479))}else a=Wr(s,u,d,2),a!==null&&Yi(a,s,2)}function Hf(s){var a=s.alternate;return s===Qt||a!==null&&a===Qt}function Y0(s,a){Tu=Nf=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function $0(s,a,u){if((u&4194048)!==0){var d=a.lanes;d&=s.pendingLanes,u|=d,a.lanes=u,el(s,u)}}var Ff={readContext:$n,use:zf,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn},K0={readContext:$n,use:zf,useCallback:function(s,a){return _i().memoizedState=[s,a===void 0?null:a],s},useContext:$n,useEffect:D0,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,jf(4194308,4,V0.bind(null,a,s),u)},useLayoutEffect:function(s,a){return jf(4194308,4,s,a)},useInsertionEffect:function(s,a){jf(4,2,s,a)},useMemo:function(s,a){var u=_i();a=a===void 0?null:a;var d=s();if(xl){Fn(!0);try{s()}finally{Fn(!1)}}return u.memoizedState=[d,a],d},useReducer:function(s,a,u){var d=_i();if(u!==void 0){var y=u(a);if(xl){Fn(!0);try{u(a)}finally{Fn(!1)}}}else y=a;return d.memoizedState=d.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},d.queue=s,s=s.dispatch=RI.bind(null,Qt,s),[d.memoizedState,s]},useRef:function(s){var a=_i();return s={current:s},a.memoizedState=s},useState:function(s){s=Wp(s);var a=s.queue,u=W0.bind(null,Qt,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:$p,useDeferredValue:function(s,a){var u=_i();return Kp(u,s,a)},useTransition:function(){var s=Wp(!1);return s=H0.bind(null,Qt,s.queue,!0,!1),_i().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var d=Qt,y=_i();if(qt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),ze===null)throw Error(i(349));(ce&124)!==0||_0(d,a,u)}y.memoizedState=u;var b={value:u,getSnapshot:a};return y.queue=b,D0(v0.bind(null,d,b,s),[s]),d.flags|=2048,wu(9,Uf(),y0.bind(null,d,b,u,a),null),u},useId:function(){var s=_i(),a=ze.identifierPrefix;if(qt){var u=W,d=C;u=(d&~(1<<32-Tn(d)-1)).toString(32)+u,a="«"+a+"R"+u,u=Vf++,0<u&&(a+="H"+u.toString(32)),a+="»"}else u=TI++,a="«"+a+"r"+u.toString(32)+"»";return s.memoizedState=a},useHostTransitionStatus:Qp,useFormState:I0,useActionState:I0,useOptimistic:function(s){var a=_i();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Jp.bind(null,Qt,!0,u),u.dispatch=a,[s,a]},useMemoCache:qp,useCacheRefresh:function(){return _i().memoizedState=AI.bind(null,Qt)}},X0={readContext:$n,use:zf,useCallback:B0,useContext:$n,useEffect:k0,useImperativeHandle:z0,useInsertionEffect:L0,useLayoutEffect:N0,useMemo:U0,useReducer:Bf,useRef:O0,useState:function(){return Bf(Kr)},useDebugValue:$p,useDeferredValue:function(s,a){var u=hn();return j0(u,Ie.memoizedState,s,a)},useTransition:function(){var s=Bf(Kr)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:Dc(s),a]},useSyncExternalStore:g0,useId:G0,useHostTransitionStatus:Qp,useFormState:C0,useActionState:C0,useOptimistic:function(s,a){var u=hn();return E0(u,Ie,s,a)},useMemoCache:qp,useCacheRefresh:Z0},II={readContext:$n,use:zf,useCallback:B0,useContext:$n,useEffect:k0,useImperativeHandle:z0,useInsertionEffect:L0,useLayoutEffect:N0,useMemo:U0,useReducer:Zp,useRef:O0,useState:function(){return Zp(Kr)},useDebugValue:$p,useDeferredValue:function(s,a){var u=hn();return Ie===null?Kp(u,s,a):j0(u,Ie.memoizedState,s,a)},useTransition:function(){var s=Zp(Kr)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:Dc(s),a]},useSyncExternalStore:g0,useId:G0,useHostTransitionStatus:Qp,useFormState:M0,useActionState:M0,useOptimistic:function(s,a){var u=hn();return Ie!==null?E0(u,Ie,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:qp,useCacheRefresh:Z0},Su=null,Nc=0;function qf(s){var a=Nc;return Nc+=1,Su===null&&(Su=[]),l0(Su,s,a)}function Vc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Gf(s,a){throw a.$$typeof===E?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Q0(s){var a=s._init;return a(s._payload)}function J0(s){function a(Q,X){if(s){var st=Q.deletions;st===null?(Q.deletions=[X],Q.flags|=16):st.push(X)}}function u(Q,X){if(!s)return null;for(;X!==null;)a(Q,X),X=X.sibling;return null}function d(Q){for(var X=new Map;Q!==null;)Q.key!==null?X.set(Q.key,Q):X.set(Q.index,Q),Q=Q.sibling;return X}function y(Q,X){return Q=ms(Q,X),Q.index=0,Q.sibling=null,Q}function b(Q,X,st){return Q.index=st,s?(st=Q.alternate,st!==null?(st=st.index,st<X?(Q.flags|=67108866,X):st):(Q.flags|=67108866,X)):(Q.flags|=1048576,X)}function R(Q){return s&&Q.alternate===null&&(Q.flags|=67108866),Q}function M(Q,X,st,dt){return X===null||X.tag!==6?(X=Sc(st,Q.mode,dt),X.return=Q,X):(X=y(X,st),X.return=Q,X)}function Y(Q,X,st,dt){var Pt=st.type;return Pt===P?ft(Q,X,st.props.children,dt,st.key):X!==null&&(X.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===D&&Q0(Pt)===X.type)?(X=y(X,st.props),Vc(X,st),X.return=Q,X):(X=vl(st.type,st.key,st.props,null,Q.mode,dt),Vc(X,st),X.return=Q,X)}function rt(Q,X,st,dt){return X===null||X.tag!==4||X.stateNode.containerInfo!==st.containerInfo||X.stateNode.implementation!==st.implementation?(X=gu(st,Q.mode,dt),X.return=Q,X):(X=y(X,st.children||[]),X.return=Q,X)}function ft(Q,X,st,dt,Pt){return X===null||X.tag!==7?(X=fr(st,Q.mode,dt,Pt),X.return=Q,X):(X=y(X,st),X.return=Q,X)}function pt(Q,X,st){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Sc(""+X,Q.mode,st),X.return=Q,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case S:return st=vl(X.type,X.key,X.props,null,Q.mode,st),Vc(st,X),st.return=Q,st;case I:return X=gu(X,Q.mode,st),X.return=Q,X;case D:var dt=X._init;return X=dt(X._payload),pt(Q,X,st)}if(kt(X)||G(X))return X=fr(X,Q.mode,st,null),X.return=Q,X;if(typeof X.then=="function")return pt(Q,qf(X),st);if(X.$$typeof===$)return pt(Q,Mf(Q,X),st);Gf(Q,X)}return null}function at(Q,X,st,dt){var Pt=X!==null?X.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return Pt!==null?null:M(Q,X,""+st,dt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case S:return st.key===Pt?Y(Q,X,st,dt):null;case I:return st.key===Pt?rt(Q,X,st,dt):null;case D:return Pt=st._init,st=Pt(st._payload),at(Q,X,st,dt)}if(kt(st)||G(st))return Pt!==null?null:ft(Q,X,st,dt,null);if(typeof st.then=="function")return at(Q,X,qf(st),dt);if(st.$$typeof===$)return at(Q,X,Mf(Q,st),dt);Gf(Q,st)}return null}function ot(Q,X,st,dt,Pt){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return Q=Q.get(st)||null,M(X,Q,""+dt,Pt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case S:return Q=Q.get(dt.key===null?st:dt.key)||null,Y(X,Q,dt,Pt);case I:return Q=Q.get(dt.key===null?st:dt.key)||null,rt(X,Q,dt,Pt);case D:var ee=dt._init;return dt=ee(dt._payload),ot(Q,X,st,dt,Pt)}if(kt(dt)||G(dt))return Q=Q.get(st)||null,ft(X,Q,dt,Pt,null);if(typeof dt.then=="function")return ot(Q,X,st,qf(dt),Pt);if(dt.$$typeof===$)return ot(Q,X,st,Mf(X,dt),Pt);Gf(X,dt)}return null}function Ft(Q,X,st,dt){for(var Pt=null,ee=null,Dt=X,Bt=X=0,Cn=null;Dt!==null&&Bt<st.length;Bt++){Dt.index>Bt?(Cn=Dt,Dt=null):Cn=Dt.sibling;var me=at(Q,Dt,st[Bt],dt);if(me===null){Dt===null&&(Dt=Cn);break}s&&Dt&&me.alternate===null&&a(Q,Dt),X=b(me,X,Bt),ee===null?Pt=me:ee.sibling=me,ee=me,Dt=Cn}if(Bt===st.length)return u(Q,Dt),qt&&et(Q,Bt),Pt;if(Dt===null){for(;Bt<st.length;Bt++)Dt=pt(Q,st[Bt],dt),Dt!==null&&(X=b(Dt,X,Bt),ee===null?Pt=Dt:ee.sibling=Dt,ee=Dt);return qt&&et(Q,Bt),Pt}for(Dt=d(Dt);Bt<st.length;Bt++)Cn=ot(Dt,Q,Bt,st[Bt],dt),Cn!==null&&(s&&Cn.alternate!==null&&Dt.delete(Cn.key===null?Bt:Cn.key),X=b(Cn,X,Bt),ee===null?Pt=Cn:ee.sibling=Cn,ee=Cn);return s&&Dt.forEach(function(_o){return a(Q,_o)}),qt&&et(Q,Bt),Pt}function zt(Q,X,st,dt){if(st==null)throw Error(i(151));for(var Pt=null,ee=null,Dt=X,Bt=X=0,Cn=null,me=st.next();Dt!==null&&!me.done;Bt++,me=st.next()){Dt.index>Bt?(Cn=Dt,Dt=null):Cn=Dt.sibling;var _o=at(Q,Dt,me.value,dt);if(_o===null){Dt===null&&(Dt=Cn);break}s&&Dt&&_o.alternate===null&&a(Q,Dt),X=b(_o,X,Bt),ee===null?Pt=_o:ee.sibling=_o,ee=_o,Dt=Cn}if(me.done)return u(Q,Dt),qt&&et(Q,Bt),Pt;if(Dt===null){for(;!me.done;Bt++,me=st.next())me=pt(Q,me.value,dt),me!==null&&(X=b(me,X,Bt),ee===null?Pt=me:ee.sibling=me,ee=me);return qt&&et(Q,Bt),Pt}for(Dt=d(Dt);!me.done;Bt++,me=st.next())me=ot(Dt,Q,Bt,me.value,dt),me!==null&&(s&&me.alternate!==null&&Dt.delete(me.key===null?Bt:me.key),X=b(me,X,Bt),ee===null?Pt=me:ee.sibling=me,ee=me);return s&&Dt.forEach(function(CC){return a(Q,CC)}),qt&&et(Q,Bt),Pt}function Pe(Q,X,st,dt){if(typeof st=="object"&&st!==null&&st.type===P&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case S:t:{for(var Pt=st.key;X!==null;){if(X.key===Pt){if(Pt=st.type,Pt===P){if(X.tag===7){u(Q,X.sibling),dt=y(X,st.props.children),dt.return=Q,Q=dt;break t}}else if(X.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===D&&Q0(Pt)===X.type){u(Q,X.sibling),dt=y(X,st.props),Vc(dt,st),dt.return=Q,Q=dt;break t}u(Q,X);break}else a(Q,X);X=X.sibling}st.type===P?(dt=fr(st.props.children,Q.mode,dt,st.key),dt.return=Q,Q=dt):(dt=vl(st.type,st.key,st.props,null,Q.mode,dt),Vc(dt,st),dt.return=Q,Q=dt)}return R(Q);case I:t:{for(Pt=st.key;X!==null;){if(X.key===Pt)if(X.tag===4&&X.stateNode.containerInfo===st.containerInfo&&X.stateNode.implementation===st.implementation){u(Q,X.sibling),dt=y(X,st.children||[]),dt.return=Q,Q=dt;break t}else{u(Q,X);break}else a(Q,X);X=X.sibling}dt=gu(st,Q.mode,dt),dt.return=Q,Q=dt}return R(Q);case D:return Pt=st._init,st=Pt(st._payload),Pe(Q,X,st,dt)}if(kt(st))return Ft(Q,X,st,dt);if(G(st)){if(Pt=G(st),typeof Pt!="function")throw Error(i(150));return st=Pt.call(st),zt(Q,X,st,dt)}if(typeof st.then=="function")return Pe(Q,X,qf(st),dt);if(st.$$typeof===$)return Pe(Q,X,Mf(Q,st),dt);Gf(Q,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,X!==null&&X.tag===6?(u(Q,X.sibling),dt=y(X,st),dt.return=Q,Q=dt):(u(Q,X),dt=Sc(st,Q.mode,dt),dt.return=Q,Q=dt),R(Q)):u(Q,X)}return function(Q,X,st,dt){try{Nc=0;var Pt=Pe(Q,X,st,dt);return Su=null,Pt}catch(Dt){if(Dt===Rc||Dt===Df)throw Dt;var ee=ci(29,Dt,null,Q.mode);return ee.lanes=dt,ee.return=Q,ee}finally{}}}var xu=J0(!0),tb=J0(!1),gs=ct(null),mr=null;function eo(s){var a=s.alternate;yt(yn,yn.current&1),yt(gs,s),mr===null&&(a===null||bu.current!==null||a.memoizedState!==null)&&(mr=s)}function eb(s){if(s.tag===22){if(yt(yn,yn.current),yt(gs,s),mr===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(mr=s)}}else no()}function no(){yt(yn,yn.current),yt(gs,gs.current)}function Xr(s){Tt(gs),mr===s&&(mr=null),Tt(yn)}var yn=ct(0);function Zf(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Fg(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function tg(s,a,u,d){a=s.memoizedState,u=u(d,a),u=u==null?a:v({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var eg={enqueueSetState:function(s,a,u){s=s._reactInternals;var d=Wi(),y=Qa(d);y.payload=a,u!=null&&(y.callback=u),a=Ja(s,y,d),a!==null&&(Yi(a,s,d),Cc(a,s,d))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var d=Wi(),y=Qa(d);y.tag=1,y.payload=a,u!=null&&(y.callback=u),a=Ja(s,y,d),a!==null&&(Yi(a,s,d),Cc(a,s,d))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Wi(),d=Qa(u);d.tag=2,a!=null&&(d.callback=a),a=Ja(s,d,u),a!==null&&(Yi(a,s,u),Cc(a,s,u))}};function nb(s,a,u,d,y,b,R){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,b,R):a.prototype&&a.prototype.isPureReactComponent?!oi(u,d)||!oi(y,b):!0}function ib(s,a,u,d){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,d),a.state!==s&&eg.enqueueReplaceState(a,a.state,null)}function Al(s,a){var u=a;if("ref"in a){u={};for(var d in a)d!=="ref"&&(u[d]=a[d])}if(s=s.defaultProps){u===a&&(u=v({},u));for(var y in s)u[y]===void 0&&(u[y]=s[y])}return u}var Wf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function sb(s){Wf(s)}function rb(s){console.error(s)}function ab(s){Wf(s)}function Yf(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function ob(s,a,u){try{var d=s.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function ng(s,a,u){return u=Qa(u),u.tag=3,u.payload={element:null},u.callback=function(){Yf(s,a)},u}function lb(s){return s=Qa(s),s.tag=3,s}function ub(s,a,u,d){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var b=d.value;s.payload=function(){return y(b)},s.callback=function(){ob(a,u,d)}}var R=u.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(s.callback=function(){ob(a,u,d),typeof y!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var M=d.stack;this.componentDidCatch(d.value,{componentStack:M!==null?M:""})})}function CI(s,a,u,d,y){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=u.alternate,a!==null&&El(a,u,y,!0),u=gs.current,u!==null){switch(u.tag){case 13:return mr===null?Ag():u.alternate===null&&Je===0&&(Je=3),u.flags&=-257,u.flags|=65536,u.lanes=y,d===Mp?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([d]):a.add(d),Ig(s,d,y)),!1;case 22:return u.flags|=65536,d===Mp?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([d]):u.add(d)),Ig(s,d,y)),!1}throw Error(i(435,u.tag))}return Ig(s,d,y),Ag(),!1}if(qt)return a=gs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,d!==An&&(s=Error(i(422),{cause:d}),Ka(li(s,u)))):(d!==An&&(a=Error(i(423),{cause:d}),Ka(li(a,u))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,d=li(d,u),y=ng(s.stateNode,d,y),kp(s,y),Je!==4&&(Je=2)),!1;var b=Error(i(520),{cause:d});if(b=li(b,u),qc===null?qc=[b]:qc.push(b),Je!==4&&(Je=2),a===null)return!0;d=li(d,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=y&-y,u.lanes|=s,s=ng(u.stateNode,d,s),kp(u,s),!1;case 1:if(a=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(lo===null||!lo.has(b))))return u.flags|=65536,y&=-y,u.lanes|=y,y=lb(y),ub(y,s,u,d),kp(u,y),!1}u=u.return}while(u!==null);return!1}var cb=Error(i(461)),Rn=!1;function Ln(s,a,u,d){a.child=s===null?tb(a,null,u,d):xu(a,s.child,u,d)}function hb(s,a,u,d,y){u=u.render;var b=a.ref;if("ref"in d){var R={};for(var M in d)M!=="ref"&&(R[M]=d[M])}else R=d;return wl(a),d=Bp(s,a,u,R,b,y),M=Up(),s!==null&&!Rn?(jp(s,a,y),Qr(s,a,y)):(qt&&M&&bt(a),a.flags|=1,Ln(s,a,d,y),a.child)}function fb(s,a,u,d,y){if(s===null){var b=u.type;return typeof b=="function"&&!pu(b)&&b.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=b,db(s,a,b,d,y)):(s=vl(u.type,null,d,a,a.mode,y),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,!cg(s,y)){var R=b.memoizedProps;if(u=u.compare,u=u!==null?u:oi,u(R,d)&&s.ref===a.ref)return Qr(s,a,y)}return a.flags|=1,s=ms(b,d),s.ref=a.ref,s.return=a,a.child=s}function db(s,a,u,d,y){if(s!==null){var b=s.memoizedProps;if(oi(b,d)&&s.ref===a.ref)if(Rn=!1,a.pendingProps=d=b,cg(s,y))(s.flags&131072)!==0&&(Rn=!0);else return a.lanes=s.lanes,Qr(s,a,y)}return ig(s,a,u,d,y)}function mb(s,a,u){var d=a.pendingProps,y=d.children,b=s!==null?s.memoizedState:null;if(d.mode==="hidden"){if((a.flags&128)!==0){if(d=b!==null?b.baseLanes|u:u,s!==null){for(y=a.child=s.child,b=0;y!==null;)b=b|y.lanes|y.childLanes,y=y.sibling;a.childLanes=b&~d}else a.childLanes=0,a.child=null;return pb(s,a,d,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Of(a,b!==null?b.cachePool:null),b!==null?d0(a,b):Np(),eb(a);else return a.lanes=a.childLanes=536870912,pb(s,a,b!==null?b.baseLanes|u:u,u)}else b!==null?(Of(a,b.cachePool),d0(a,b),no(),a.memoizedState=null):(s!==null&&Of(a,null),Np(),no());return Ln(s,a,y,u),a.child}function pb(s,a,u,d){var y=Pp();return y=y===null?null:{parent:_n._currentValue,pool:y},a.memoizedState={baseLanes:u,cachePool:y},s!==null&&Of(a,null),Np(),eb(a),s!==null&&El(s,a,d,!0),null}function $f(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function ig(s,a,u,d,y){return wl(a),u=Bp(s,a,u,d,void 0,y),d=Up(),s!==null&&!Rn?(jp(s,a,y),Qr(s,a,y)):(qt&&d&&bt(a),a.flags|=1,Ln(s,a,u,y),a.child)}function gb(s,a,u,d,y,b){return wl(a),a.updateQueue=null,u=p0(a,d,u,y),m0(s),d=Up(),s!==null&&!Rn?(jp(s,a,b),Qr(s,a,b)):(qt&&d&&bt(a),a.flags|=1,Ln(s,a,u,b),a.child)}function _b(s,a,u,d,y){if(wl(a),a.stateNode===null){var b=Yr,R=u.contextType;typeof R=="object"&&R!==null&&(b=$n(R)),b=new u(d,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=eg,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=d,b.state=a.memoizedState,b.refs={},Op(a),R=u.contextType,b.context=typeof R=="object"&&R!==null?$n(R):Yr,b.state=a.memoizedState,R=u.getDerivedStateFromProps,typeof R=="function"&&(tg(a,u,R,d),b.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(R=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),R!==b.state&&eg.enqueueReplaceState(b,b.state,null),Mc(a,d,b,y),Pc(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(s===null){b=a.stateNode;var M=a.memoizedProps,Y=Al(u,M);b.props=Y;var rt=b.context,ft=u.contextType;R=Yr,typeof ft=="object"&&ft!==null&&(R=$n(ft));var pt=u.getDerivedStateFromProps;ft=typeof pt=="function"||typeof b.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,ft||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M||rt!==R)&&ib(a,b,d,R),Xa=!1;var at=a.memoizedState;b.state=at,Mc(a,d,b,y),Pc(),rt=a.memoizedState,M||at!==rt||Xa?(typeof pt=="function"&&(tg(a,u,pt,d),rt=a.memoizedState),(Y=Xa||nb(a,u,Y,d,at,rt,R))?(ft||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=rt),b.props=d,b.state=rt,b.context=R,d=Y):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{b=a.stateNode,Dp(s,a),R=a.memoizedProps,ft=Al(u,R),b.props=ft,pt=a.pendingProps,at=b.context,rt=u.contextType,Y=Yr,typeof rt=="object"&&rt!==null&&(Y=$n(rt)),M=u.getDerivedStateFromProps,(rt=typeof M=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(R!==pt||at!==Y)&&ib(a,b,d,Y),Xa=!1,at=a.memoizedState,b.state=at,Mc(a,d,b,y),Pc();var ot=a.memoizedState;R!==pt||at!==ot||Xa||s!==null&&s.dependencies!==null&&Pf(s.dependencies)?(typeof M=="function"&&(tg(a,u,M,d),ot=a.memoizedState),(ft=Xa||nb(a,u,ft,d,at,ot,Y)||s!==null&&s.dependencies!==null&&Pf(s.dependencies))?(rt||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ot,Y),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ot,Y)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||R===s.memoizedProps&&at===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&at===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=ot),b.props=d,b.state=ot,b.context=Y,d=ft):(typeof b.componentDidUpdate!="function"||R===s.memoizedProps&&at===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&at===s.memoizedState||(a.flags|=1024),d=!1)}return b=d,$f(s,a),d=(a.flags&128)!==0,b||d?(b=a.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,s!==null&&d?(a.child=xu(a,s.child,null,y),a.child=xu(a,null,u,y)):Ln(s,a,u,y),a.memoizedState=b.state,s=a.child):s=Qr(s,a,y),s}function yb(s,a,u,d){return $a(),a.flags|=256,Ln(s,a,u,d),a.child}var sg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rg(s){return{baseLanes:s,cachePool:r0()}}function ag(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=_s),s}function vb(s,a,u){var d=a.pendingProps,y=!1,b=(a.flags&128)!==0,R;if((R=b)||(R=s!==null&&s.memoizedState===null?!1:(yn.current&2)!==0),R&&(y=!0,a.flags&=-129),R=(a.flags&32)!==0,a.flags&=-33,s===null){if(qt){if(y?eo(a):no(),qt){var M=Mt,Y;if(Y=M){t:{for(Y=M,M=We;Y.nodeType!==8;){if(!M){M=null;break t}if(Y=Hs(Y.nextSibling),Y===null){M=null;break t}}M=Y}M!==null?(a.memoizedState={dehydrated:M,treeContext:x!==null?{id:C,overflow:W}:null,retryLane:536870912,hydrationErrors:null},Y=ci(18,null,null,0),Y.stateNode=M,Y.return=a,a.child=Y,Ct=a,Mt=null,Y=!0):Y=!1}Y||gi(a)}if(M=a.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return Fg(M)?a.lanes=32:a.lanes=536870912,null;Xr(a)}return M=d.children,d=d.fallback,y?(no(),y=a.mode,M=Kf({mode:"hidden",children:M},y),d=fr(d,y,u,null),M.return=a,d.return=a,M.sibling=d,a.child=M,y=a.child,y.memoizedState=rg(u),y.childLanes=ag(s,R,u),a.memoizedState=sg,d):(eo(a),og(a,M))}if(Y=s.memoizedState,Y!==null&&(M=Y.dehydrated,M!==null)){if(b)a.flags&256?(eo(a),a.flags&=-257,a=lg(s,a,u)):a.memoizedState!==null?(no(),a.child=s.child,a.flags|=128,a=null):(no(),y=d.fallback,M=a.mode,d=Kf({mode:"visible",children:d.children},M),y=fr(y,M,u,null),y.flags|=2,d.return=a,y.return=a,d.sibling=y,a.child=d,xu(a,s.child,null,u),d=a.child,d.memoizedState=rg(u),d.childLanes=ag(s,R,u),a.memoizedState=sg,a=y);else if(eo(a),Fg(M)){if(R=M.nextSibling&&M.nextSibling.dataset,R)var rt=R.dgst;R=rt,d=Error(i(419)),d.stack="",d.digest=R,Ka({value:d,source:null,stack:null}),a=lg(s,a,u)}else if(Rn||El(s,a,u,!1),R=(u&s.childLanes)!==0,Rn||R){if(R=ze,R!==null&&(d=u&-u,d=(d&42)!==0?1:tr(d),d=(d&(R.suspendedLanes|u))!==0?0:d,d!==0&&d!==Y.retryLane))throw Y.retryLane=d,Wa(s,d),Yi(R,s,d),cb;M.data==="$?"||Ag(),a=lg(s,a,u)}else M.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=Y.treeContext,Mt=Hs(M.nextSibling),Ct=a,qt=!0,Ve=null,We=!1,s!==null&&(_[T++]=C,_[T++]=W,_[T++]=x,C=s.id,W=s.overflow,x=a),a=og(a,d.children),a.flags|=4096);return a}return y?(no(),y=d.fallback,M=a.mode,Y=s.child,rt=Y.sibling,d=ms(Y,{mode:"hidden",children:d.children}),d.subtreeFlags=Y.subtreeFlags&65011712,rt!==null?y=ms(rt,y):(y=fr(y,M,u,null),y.flags|=2),y.return=a,d.return=a,d.sibling=y,a.child=d,d=y,y=a.child,M=s.child.memoizedState,M===null?M=rg(u):(Y=M.cachePool,Y!==null?(rt=_n._currentValue,Y=Y.parent!==rt?{parent:rt,pool:rt}:Y):Y=r0(),M={baseLanes:M.baseLanes|u,cachePool:Y}),y.memoizedState=M,y.childLanes=ag(s,R,u),a.memoizedState=sg,d):(eo(a),u=s.child,s=u.sibling,u=ms(u,{mode:"visible",children:d.children}),u.return=a,u.sibling=null,s!==null&&(R=a.deletions,R===null?(a.deletions=[s],a.flags|=16):R.push(s)),a.child=u,a.memoizedState=null,u)}function og(s,a){return a=Kf({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Kf(s,a){return s=ci(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function lg(s,a,u){return xu(a,s.child,null,u),s=og(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function bb(s,a,u){s.lanes|=a;var d=s.alternate;d!==null&&(d.lanes|=a),Tl(s.return,a,u)}function ug(s,a,u,d,y){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:y}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=u,b.tailMode=y)}function Tb(s,a,u){var d=a.pendingProps,y=d.revealOrder,b=d.tail;if(Ln(s,a,d.children,u),d=yn.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&bb(s,u,a);else if(s.tag===19)bb(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}switch(yt(yn,d),y){case"forwards":for(u=a.child,y=null;u!==null;)s=u.alternate,s!==null&&Zf(s)===null&&(y=u),u=u.sibling;u=y,u===null?(y=a.child,a.child=null):(y=u.sibling,u.sibling=null),ug(a,!1,y,u,b);break;case"backwards":for(u=null,y=a.child,a.child=null;y!==null;){if(s=y.alternate,s!==null&&Zf(s)===null){a.child=y;break}s=y.sibling,y.sibling=u,u=y,y=s}ug(a,!0,u,null,b);break;case"together":ug(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Qr(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),oo|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(El(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=ms(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ms(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function cg(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Pf(s)))}function PI(s,a,u){switch(a.tag){case 3:le(a,a.stateNode.containerInfo),dr(a,_n,s.memoizedState.cache),$a();break;case 27:case 5:Ji(a);break;case 4:le(a,a.stateNode.containerInfo);break;case 10:dr(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(eo(a),a.flags|=128,null):(u&a.child.childLanes)!==0?vb(s,a,u):(eo(a),s=Qr(s,a,u),s!==null?s.sibling:null);eo(a);break;case 19:var y=(s.flags&128)!==0;if(d=(u&a.childLanes)!==0,d||(El(s,a,u,!1),d=(u&a.childLanes)!==0),y){if(d)return Tb(s,a,u);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),yt(yn,yn.current),d)break;return null;case 22:case 23:return a.lanes=0,mb(s,a,u);case 24:dr(a,_n,s.memoizedState.cache)}return Qr(s,a,u)}function Eb(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)Rn=!0;else{if(!cg(s,u)&&(a.flags&128)===0)return Rn=!1,PI(s,a,u);Rn=(s.flags&131072)!==0}else Rn=!1,qt&&(a.flags&1048576)!==0&&lt(a,h,a.index);switch(a.lanes=0,a.tag){case 16:t:{s=a.pendingProps;var d=a.elementType,y=d._init;if(d=y(d._payload),a.type=d,typeof d=="function")pu(d)?(s=Al(d,s),a.tag=1,a=_b(null,a,d,s,u)):(a.tag=0,a=ig(null,a,d,s,u));else{if(d!=null){if(y=d.$$typeof,y===nt){a.tag=11,a=hb(null,a,d,s,u);break t}else if(y===V){a.tag=14,a=fb(null,a,d,s,u);break t}}throw a=Yt(d)||d,Error(i(306,a,""))}}return a;case 0:return ig(s,a,a.type,a.pendingProps,u);case 1:return d=a.type,y=Al(d,a.pendingProps),_b(s,a,d,y,u);case 3:t:{if(le(a,a.stateNode.containerInfo),s===null)throw Error(i(387));d=a.pendingProps;var b=a.memoizedState;y=b.element,Dp(s,a),Mc(a,d,null,u);var R=a.memoizedState;if(d=R.cache,dr(a,_n,d),d!==b.cache&&_u(a,[_n],u,!0),Pc(),d=R.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:R.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=yb(s,a,d,u);break t}else if(d!==y){y=li(Error(i(424)),a),Ka(y),a=yb(s,a,d,u);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Mt=Hs(s.firstChild),Ct=a,qt=!0,Ve=null,We=!0,u=tb(a,null,d,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if($a(),d===y){a=Qr(s,a,u);break t}Ln(s,a,d,u)}a=a.child}return a;case 26:return $f(s,a),s===null?(u=AT(a.type,null,a.pendingProps,null))?a.memoizedState=u:qt||(u=a.type,s=a.pendingProps,d=cd(Et.current).createElement(u),d[tn]=a,d[Xe]=s,Vn(d,u,s),Ze(d),a.stateNode=d):a.memoizedState=AT(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Ji(a),s===null&&qt&&(d=a.stateNode=wT(a.type,a.pendingProps,Et.current),Ct=a,We=!0,y=Mt,ho(a.type)?(qg=y,Mt=Hs(d.firstChild)):Mt=y),Ln(s,a,a.pendingProps.children,u),$f(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&qt&&((y=d=Mt)&&(d=sC(d,a.type,a.pendingProps,We),d!==null?(a.stateNode=d,Ct=a,Mt=Hs(d.firstChild),We=!1,y=!0):y=!1),y||gi(a)),Ji(a),y=a.type,b=a.pendingProps,R=s!==null?s.memoizedProps:null,d=b.children,Ug(y,b)?d=null:R!==null&&Ug(y,R)&&(a.flags|=32),a.memoizedState!==null&&(y=Bp(s,a,EI,null,null,u),Jc._currentValue=y),$f(s,a),Ln(s,a,d,u),a.child;case 6:return s===null&&qt&&((s=u=Mt)&&(u=rC(u,a.pendingProps,We),u!==null?(a.stateNode=u,Ct=a,Mt=null,s=!0):s=!1),s||gi(a)),null;case 13:return vb(s,a,u);case 4:return le(a,a.stateNode.containerInfo),d=a.pendingProps,s===null?a.child=xu(a,null,d,u):Ln(s,a,d,u),a.child;case 11:return hb(s,a,a.type,a.pendingProps,u);case 7:return Ln(s,a,a.pendingProps,u),a.child;case 8:return Ln(s,a,a.pendingProps.children,u),a.child;case 12:return Ln(s,a,a.pendingProps.children,u),a.child;case 10:return d=a.pendingProps,dr(a,a.type,d.value),Ln(s,a,d.children,u),a.child;case 9:return y=a.type._context,d=a.pendingProps.children,wl(a),y=$n(y),d=d(y),a.flags|=1,Ln(s,a,d,u),a.child;case 14:return fb(s,a,a.type,a.pendingProps,u);case 15:return db(s,a,a.type,a.pendingProps,u);case 19:return Tb(s,a,u);case 31:return d=a.pendingProps,u=a.mode,d={mode:d.mode,children:d.children},s===null?(u=Kf(d,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=ms(s.child,d),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return mb(s,a,u);case 24:return wl(a),d=$n(_n),s===null?(y=Pp(),y===null&&(y=ze,b=Ip(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=u),y=b),a.memoizedState={parent:d,cache:y},Op(a),dr(a,_n,y)):((s.lanes&u)!==0&&(Dp(s,a),Mc(a,null,null,u),Pc()),y=s.memoizedState,b=a.memoizedState,y.parent!==d?(y={parent:d,cache:d},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),dr(a,_n,d)):(d=b.cache,dr(a,_n,d),d!==y.cache&&_u(a,[_n],u,!0))),Ln(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Jr(s){s.flags|=4}function wb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!MT(a)){if(a=gs.current,a!==null&&((ce&4194048)===ce?mr!==null:(ce&62914560)!==ce&&(ce&536870912)===0||a!==mr))throw Ic=Mp,a0;s.flags|=8192}}function Xf(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Aa():536870912,s.lanes|=a,Cu|=a)}function zc(s,a){if(!qt)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Ye(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,d=0;if(a)for(var y=s.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=d,s.childLanes=u,a}function MI(s,a,u){var d=a.pendingProps;switch(xt(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(a),null;case 1:return Ye(a),null;case 3:return u=a.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Us(_n),Ri(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(bl(a)?Jr(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Cf())),Ye(a),null;case 26:return u=a.memoizedState,s===null?(Jr(a),u!==null?(Ye(a),wb(a,u)):(Ye(a),a.flags&=-16777217)):u?u!==s.memoizedState?(Jr(a),Ye(a),wb(a,u)):(Ye(a),a.flags&=-16777217):(s.memoizedProps!==d&&Jr(a),Ye(a),a.flags&=-16777217),null;case 27:Ii(a),u=Et.current;var y=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==d&&Jr(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return Ye(a),null}s=St.current,bl(a)?Rf(a):(s=wT(y,d,u),a.stateNode=s,Jr(a))}return Ye(a),null;case 5:if(Ii(a),u=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&Jr(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return Ye(a),null}if(s=St.current,bl(a))Rf(a);else{switch(y=cd(Et.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?s.multiple=!0:d.size&&(s.size=d.size);break;default:s=typeof d.is=="string"?y.createElement(u,{is:d.is}):y.createElement(u)}}s[tn]=a,s[Xe]=d;t:for(y=a.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===a)break t;for(;y.sibling===null;){if(y.return===null||y.return===a)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}a.stateNode=s;t:switch(Vn(s,u,d),u){case"button":case"input":case"select":case"textarea":s=!!d.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&Jr(a)}}return Ye(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==d&&Jr(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(i(166));if(s=Et.current,bl(a)){if(s=a.stateNode,u=a.memoizedProps,d=null,y=Ct,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}s[tn]=a,s=!!(s.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||gT(s.nodeValue,u)),s||gi(a)}else s=cd(s).createTextNode(d),s[tn]=a,a.stateNode=s}return Ye(a),null;case 13:if(d=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=bl(a),d!==null&&d.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[tn]=a}else $a(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ye(a),y=!1}else y=Cf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(Xr(a),a):(Xr(a),null)}if(Xr(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=d!==null,s=s!==null&&s.memoizedState!==null,u){d=a.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var b=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048)}return u!==s&&u&&(a.child.flags|=8192),Xf(a,a.updateQueue),Ye(a),null;case 4:return Ri(),s===null&&Lg(a.stateNode.containerInfo),Ye(a),null;case 10:return Us(a.type),Ye(a),null;case 19:if(Tt(yn),y=a.memoizedState,y===null)return Ye(a),null;if(d=(a.flags&128)!==0,b=y.rendering,b===null)if(d)zc(y,!1);else{if(Je!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(b=Zf(s),b!==null){for(a.flags|=128,zc(y,!1),s=b.updateQueue,a.updateQueue=s,Xf(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)wc(u,s),u=u.sibling;return yt(yn,yn.current&1|2),a.child}s=s.sibling}y.tail!==null&&Hn()>td&&(a.flags|=128,d=!0,zc(y,!1),a.lanes=4194304)}else{if(!d)if(s=Zf(b),s!==null){if(a.flags|=128,d=!0,s=s.updateQueue,a.updateQueue=s,Xf(a,s),zc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!b.alternate&&!qt)return Ye(a),null}else 2*Hn()-y.renderingStartTime>td&&u!==536870912&&(a.flags|=128,d=!0,zc(y,!1),a.lanes=4194304);y.isBackwards?(b.sibling=a.child,a.child=b):(s=y.last,s!==null?s.sibling=b:a.child=b,y.last=b)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=Hn(),a.sibling=null,s=yn.current,yt(yn,d?s&1|2:s&1),a):(Ye(a),null);case 22:case 23:return Xr(a),Vp(),d=a.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(u&536870912)!==0&&(a.flags&128)===0&&(Ye(a),a.subtreeFlags&6&&(a.flags|=8192)):Ye(a),u=a.updateQueue,u!==null&&Xf(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==u&&(a.flags|=2048),s!==null&&Tt(Sl),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Us(_n),Ye(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function OI(s,a){switch(xt(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Us(_n),Ri(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Ii(a),null;case 13:if(Xr(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));$a()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Tt(yn),null;case 4:return Ri(),null;case 10:return Us(a.type),null;case 22:case 23:return Xr(a),Vp(),s!==null&&Tt(Sl),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Us(_n),null;case 25:return null;default:return null}}function Sb(s,a){switch(xt(a),a.tag){case 3:Us(_n),Ri();break;case 26:case 27:case 5:Ii(a);break;case 4:Ri();break;case 13:Xr(a);break;case 19:Tt(yn);break;case 10:Us(a.type);break;case 22:case 23:Xr(a),Vp(),s!==null&&Tt(Sl);break;case 24:Us(_n)}}function Bc(s,a){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var y=d.next;u=y;do{if((u.tag&s)===s){d=void 0;var b=u.create,R=u.inst;d=b(),R.destroy=d}u=u.next}while(u!==y)}}catch(M){Oe(a,a.return,M)}}function io(s,a,u){try{var d=a.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var b=y.next;d=b;do{if((d.tag&s)===s){var R=d.inst,M=R.destroy;if(M!==void 0){R.destroy=void 0,y=a;var Y=u,rt=M;try{rt()}catch(ft){Oe(y,Y,ft)}}}d=d.next}while(d!==b)}}catch(ft){Oe(a,a.return,ft)}}function xb(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{f0(a,u)}catch(d){Oe(s,s.return,d)}}}function Ab(s,a,u){u.props=Al(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(d){Oe(s,a,d)}}function Uc(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof u=="function"?s.refCleanup=u(d):u.current=d}}catch(y){Oe(s,a,y)}}function pr(s,a){var u=s.ref,d=s.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(y){Oe(s,a,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){Oe(s,a,y)}else u.current=null}function Rb(s){var a=s.type,u=s.memoizedProps,d=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break t;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(y){Oe(s,s.return,y)}}function hg(s,a,u){try{var d=s.stateNode;JI(d,s.type,u,a),d[Xe]=a}catch(y){Oe(s,s.return,y)}}function Ib(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ho(s.type)||s.tag===4}function fg(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Ib(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ho(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function dg(s,a,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=ud));else if(d!==4&&(d===27&&ho(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(dg(s,a,u),s=s.sibling;s!==null;)dg(s,a,u),s=s.sibling}function Qf(s,a,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(d!==4&&(d===27&&ho(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Qf(s,a,u),s=s.sibling;s!==null;)Qf(s,a,u),s=s.sibling}function Cb(s){var a=s.stateNode,u=s.memoizedProps;try{for(var d=s.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);Vn(a,d,u),a[tn]=s,a[Xe]=u}catch(b){Oe(s,s.return,b)}}var ta=!1,sn=!1,mg=!1,Pb=typeof WeakSet=="function"?WeakSet:Set,In=null;function DI(s,a){if(s=s.containerInfo,zg=gd,s=dl(s),ml(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{u=(u=s.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var y=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break t}var R=0,M=-1,Y=-1,rt=0,ft=0,pt=s,at=null;e:for(;;){for(var ot;pt!==u||y!==0&&pt.nodeType!==3||(M=R+y),pt!==b||d!==0&&pt.nodeType!==3||(Y=R+d),pt.nodeType===3&&(R+=pt.nodeValue.length),(ot=pt.firstChild)!==null;)at=pt,pt=ot;for(;;){if(pt===s)break e;if(at===u&&++rt===y&&(M=R),at===b&&++ft===d&&(Y=R),(ot=pt.nextSibling)!==null)break;pt=at,at=pt.parentNode}pt=ot}u=M===-1||Y===-1?null:{start:M,end:Y}}else u=null}u=u||{start:0,end:0}}else u=null;for(Bg={focusedElem:s,selectionRange:u},gd=!1,In=a;In!==null;)if(a=In,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,In=s;else for(;In!==null;){switch(a=In,b=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,u=a,y=b.memoizedProps,b=b.memoizedState,d=u.stateNode;try{var Ft=Al(u.type,y,u.elementType===u.type);s=d.getSnapshotBeforeUpdate(Ft,b),d.__reactInternalSnapshotBeforeUpdate=s}catch(zt){Oe(u,u.return,zt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)Hg(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Hg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,In=s;break}In=a.return}}function Mb(s,a,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:so(s,u),d&4&&Bc(5,u);break;case 1:if(so(s,u),d&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(R){Oe(u,u.return,R)}else{var y=Al(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(y,a,s.__reactInternalSnapshotBeforeUpdate)}catch(R){Oe(u,u.return,R)}}d&64&&xb(u),d&512&&Uc(u,u.return);break;case 3:if(so(s,u),d&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{f0(s,a)}catch(R){Oe(u,u.return,R)}}break;case 27:a===null&&d&4&&Cb(u);case 26:case 5:so(s,u),a===null&&d&4&&Rb(u),d&512&&Uc(u,u.return);break;case 12:so(s,u);break;case 13:so(s,u),d&4&&kb(s,u),d&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=HI.bind(null,u),aC(s,u))));break;case 22:if(d=u.memoizedState!==null||ta,!d){a=a!==null&&a.memoizedState!==null||sn,y=ta;var b=sn;ta=d,(sn=a)&&!b?ro(s,u,(u.subtreeFlags&8772)!==0):so(s,u),ta=y,sn=b}break;case 30:break;default:so(s,u)}}function Ob(s){var a=s.alternate;a!==null&&(s.alternate=null,Ob(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Is(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var qe=null,yi=!1;function ea(s,a,u){for(u=u.child;u!==null;)Db(s,a,u),u=u.sibling}function Db(s,a,u){if(fe&&typeof fe.onCommitFiberUnmount=="function")try{fe.onCommitFiberUnmount(De,u)}catch{}switch(u.tag){case 26:sn||pr(u,a),ea(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:sn||pr(u,a);var d=qe,y=yi;ho(u.type)&&(qe=u.stateNode,yi=!1),ea(s,a,u),$c(u.stateNode),qe=d,yi=y;break;case 5:sn||pr(u,a);case 6:if(d=qe,y=yi,qe=null,ea(s,a,u),qe=d,yi=y,qe!==null)if(yi)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(u.stateNode)}catch(b){Oe(u,a,b)}else try{qe.removeChild(u.stateNode)}catch(b){Oe(u,a,b)}break;case 18:qe!==null&&(yi?(s=qe,TT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),ih(s)):TT(qe,u.stateNode));break;case 4:d=qe,y=yi,qe=u.stateNode.containerInfo,yi=!0,ea(s,a,u),qe=d,yi=y;break;case 0:case 11:case 14:case 15:sn||io(2,u,a),sn||io(4,u,a),ea(s,a,u);break;case 1:sn||(pr(u,a),d=u.stateNode,typeof d.componentWillUnmount=="function"&&Ab(u,a,d)),ea(s,a,u);break;case 21:ea(s,a,u);break;case 22:sn=(d=sn)||u.memoizedState!==null,ea(s,a,u),sn=d;break;default:ea(s,a,u)}}function kb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ih(s)}catch(u){Oe(a,a.return,u)}}function kI(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Pb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Pb),a;default:throw Error(i(435,s.tag))}}function pg(s,a){var u=kI(s);a.forEach(function(d){var y=FI.bind(null,s,d);u.has(d)||(u.add(d),d.then(y,y))})}function qi(s,a){var u=a.deletions;if(u!==null)for(var d=0;d<u.length;d++){var y=u[d],b=s,R=a,M=R;t:for(;M!==null;){switch(M.tag){case 27:if(ho(M.type)){qe=M.stateNode,yi=!1;break t}break;case 5:qe=M.stateNode,yi=!1;break t;case 3:case 4:qe=M.stateNode.containerInfo,yi=!0;break t}M=M.return}if(qe===null)throw Error(i(160));Db(b,R,y),qe=null,yi=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Lb(a,s),a=a.sibling}var js=null;function Lb(s,a){var u=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:qi(a,s),Gi(s),d&4&&(io(3,s,s.return),Bc(3,s),io(5,s,s.return));break;case 1:qi(a,s),Gi(s),d&512&&(sn||u===null||pr(u,u.return)),d&64&&ta&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var y=js;if(qi(a,s),Gi(s),d&512&&(sn||u===null||pr(u,u.return)),d&4){var b=u!==null?u.memoizedState:null;if(d=s.memoizedState,u===null)if(d===null)if(s.stateNode===null){t:{d=s.type,u=s.memoizedProps,y=y.ownerDocument||y;e:switch(d){case"title":b=y.getElementsByTagName("title")[0],(!b||b[nr]||b[tn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(d),y.head.insertBefore(b,y.querySelector("head > title"))),Vn(b,d,u),b[tn]=s,Ze(b),d=b;break t;case"link":var R=CT("link","href",y).get(d+(u.href||""));if(R){for(var M=0;M<R.length;M++)if(b=R[M],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){R.splice(M,1);break e}}b=y.createElement(d),Vn(b,d,u),y.head.appendChild(b);break;case"meta":if(R=CT("meta","content",y).get(d+(u.content||""))){for(M=0;M<R.length;M++)if(b=R[M],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){R.splice(M,1);break e}}b=y.createElement(d),Vn(b,d,u),y.head.appendChild(b);break;default:throw Error(i(468,d))}b[tn]=s,Ze(b),d=b}s.stateNode=d}else PT(y,s.type,s.stateNode);else s.stateNode=IT(y,d,s.memoizedProps);else b!==d?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,d===null?PT(y,s.type,s.stateNode):IT(y,d,s.memoizedProps)):d===null&&s.stateNode!==null&&hg(s,s.memoizedProps,u.memoizedProps)}break;case 27:qi(a,s),Gi(s),d&512&&(sn||u===null||pr(u,u.return)),u!==null&&d&4&&hg(s,s.memoizedProps,u.memoizedProps);break;case 5:if(qi(a,s),Gi(s),d&512&&(sn||u===null||pr(u,u.return)),s.flags&32){y=s.stateNode;try{wn(y,"")}catch(ot){Oe(s,s.return,ot)}}d&4&&s.stateNode!=null&&(y=s.memoizedProps,hg(s,y,u!==null?u.memoizedProps:y)),d&1024&&(mg=!0);break;case 6:if(qi(a,s),Gi(s),d&4){if(s.stateNode===null)throw Error(i(162));d=s.memoizedProps,u=s.stateNode;try{u.nodeValue=d}catch(ot){Oe(s,s.return,ot)}}break;case 3:if(dd=null,y=js,js=hd(a.containerInfo),qi(a,s),js=y,Gi(s),d&4&&u!==null&&u.memoizedState.isDehydrated)try{ih(a.containerInfo)}catch(ot){Oe(s,s.return,ot)}mg&&(mg=!1,Nb(s));break;case 4:d=js,js=hd(s.stateNode.containerInfo),qi(a,s),Gi(s),js=d;break;case 12:qi(a,s),Gi(s);break;case 13:qi(a,s),Gi(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Tg=Hn()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,pg(s,d)));break;case 22:y=s.memoizedState!==null;var Y=u!==null&&u.memoizedState!==null,rt=ta,ft=sn;if(ta=rt||y,sn=ft||Y,qi(a,s),sn=ft,ta=rt,Gi(s),d&8192)t:for(a=s.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(u===null||Y||ta||sn||Rl(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){Y=u=a;try{if(b=Y.stateNode,y)R=b.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{M=Y.stateNode;var pt=Y.memoizedProps.style,at=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;M.style.display=at==null||typeof at=="boolean"?"":(""+at).trim()}}catch(ot){Oe(Y,Y.return,ot)}}}else if(a.tag===6){if(u===null){Y=a;try{Y.stateNode.nodeValue=y?"":Y.memoizedProps}catch(ot){Oe(Y,Y.return,ot)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=s.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,pg(s,u))));break;case 19:qi(a,s),Gi(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,pg(s,d)));break;case 30:break;case 21:break;default:qi(a,s),Gi(s)}}function Gi(s){var a=s.flags;if(a&2){try{for(var u,d=s.return;d!==null;){if(Ib(d)){u=d;break}d=d.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var y=u.stateNode,b=fg(s);Qf(s,b,y);break;case 5:var R=u.stateNode;u.flags&32&&(wn(R,""),u.flags&=-33);var M=fg(s);Qf(s,M,R);break;case 3:case 4:var Y=u.stateNode.containerInfo,rt=fg(s);dg(s,rt,Y);break;default:throw Error(i(161))}}catch(ft){Oe(s,s.return,ft)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Nb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Nb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function so(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Mb(s,a.alternate,a),a=a.sibling}function Rl(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:io(4,a,a.return),Rl(a);break;case 1:pr(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&Ab(a,a.return,u),Rl(a);break;case 27:$c(a.stateNode);case 26:case 5:pr(a,a.return),Rl(a);break;case 22:a.memoizedState===null&&Rl(a);break;case 30:Rl(a);break;default:Rl(a)}s=s.sibling}}function ro(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,y=s,b=a,R=b.flags;switch(b.tag){case 0:case 11:case 15:ro(y,b,u),Bc(4,b);break;case 1:if(ro(y,b,u),d=b,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(rt){Oe(d,d.return,rt)}if(d=b,y=d.updateQueue,y!==null){var M=d.stateNode;try{var Y=y.shared.hiddenCallbacks;if(Y!==null)for(y.shared.hiddenCallbacks=null,y=0;y<Y.length;y++)h0(Y[y],M)}catch(rt){Oe(d,d.return,rt)}}u&&R&64&&xb(b),Uc(b,b.return);break;case 27:Cb(b);case 26:case 5:ro(y,b,u),u&&d===null&&R&4&&Rb(b),Uc(b,b.return);break;case 12:ro(y,b,u);break;case 13:ro(y,b,u),u&&R&4&&kb(y,b);break;case 22:b.memoizedState===null&&ro(y,b,u),Uc(b,b.return);break;case 30:break;default:ro(y,b,u)}a=a.sibling}}function gg(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&xc(u))}function _g(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&xc(s))}function gr(s,a,u,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Vb(s,a,u,d),a=a.sibling}function Vb(s,a,u,d){var y=a.flags;switch(a.tag){case 0:case 11:case 15:gr(s,a,u,d),y&2048&&Bc(9,a);break;case 1:gr(s,a,u,d);break;case 3:gr(s,a,u,d),y&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&xc(s)));break;case 12:if(y&2048){gr(s,a,u,d),s=a.stateNode;try{var b=a.memoizedProps,R=b.id,M=b.onPostCommit;typeof M=="function"&&M(R,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Y){Oe(a,a.return,Y)}}else gr(s,a,u,d);break;case 13:gr(s,a,u,d);break;case 23:break;case 22:b=a.stateNode,R=a.alternate,a.memoizedState!==null?b._visibility&2?gr(s,a,u,d):jc(s,a):b._visibility&2?gr(s,a,u,d):(b._visibility|=2,Au(s,a,u,d,(a.subtreeFlags&10256)!==0)),y&2048&&gg(R,a);break;case 24:gr(s,a,u,d),y&2048&&_g(a.alternate,a);break;default:gr(s,a,u,d)}}function Au(s,a,u,d,y){for(y=y&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var b=s,R=a,M=u,Y=d,rt=R.flags;switch(R.tag){case 0:case 11:case 15:Au(b,R,M,Y,y),Bc(8,R);break;case 23:break;case 22:var ft=R.stateNode;R.memoizedState!==null?ft._visibility&2?Au(b,R,M,Y,y):jc(b,R):(ft._visibility|=2,Au(b,R,M,Y,y)),y&&rt&2048&&gg(R.alternate,R);break;case 24:Au(b,R,M,Y,y),y&&rt&2048&&_g(R.alternate,R);break;default:Au(b,R,M,Y,y)}a=a.sibling}}function jc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,d=a,y=d.flags;switch(d.tag){case 22:jc(u,d),y&2048&&gg(d.alternate,d);break;case 24:jc(u,d),y&2048&&_g(d.alternate,d);break;default:jc(u,d)}a=a.sibling}}var Hc=8192;function Ru(s){if(s.subtreeFlags&Hc)for(s=s.child;s!==null;)zb(s),s=s.sibling}function zb(s){switch(s.tag){case 26:Ru(s),s.flags&Hc&&s.memoizedState!==null&&vC(js,s.memoizedState,s.memoizedProps);break;case 5:Ru(s);break;case 3:case 4:var a=js;js=hd(s.stateNode.containerInfo),Ru(s),js=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=Hc,Hc=16777216,Ru(s),Hc=a):Ru(s));break;default:Ru(s)}}function Bb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Fc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];In=d,jb(d,s)}Bb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ub(s),s=s.sibling}function Ub(s){switch(s.tag){case 0:case 11:case 15:Fc(s),s.flags&2048&&io(9,s,s.return);break;case 3:Fc(s);break;case 12:Fc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Jf(s)):Fc(s);break;default:Fc(s)}}function Jf(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];In=d,jb(d,s)}Bb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:io(8,a,a.return),Jf(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Jf(a));break;default:Jf(a)}s=s.sibling}}function jb(s,a){for(;In!==null;){var u=In;switch(u.tag){case 0:case 11:case 15:io(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:xc(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,In=d;else t:for(u=s;In!==null;){d=In;var y=d.sibling,b=d.return;if(Ob(d),d===u){In=null;break t}if(y!==null){y.return=b,In=y;break t}In=b}}}var LI={getCacheForType:function(s){var a=$n(_n),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u}},NI=typeof WeakMap=="function"?WeakMap:Map,Te=0,ze=null,ne=null,ce=0,Ee=0,Zi=null,ao=!1,Iu=!1,yg=!1,na=0,Je=0,oo=0,Il=0,vg=0,_s=0,Cu=0,qc=null,vi=null,bg=!1,Tg=0,td=1/0,ed=null,lo=null,Nn=0,uo=null,Pu=null,Mu=0,Eg=0,wg=null,Hb=null,Gc=0,Sg=null;function Wi(){if((Te&2)!==0&&ce!==0)return ce&-ce;if(it.T!==null){var s=yu;return s!==0?s:Mg()}return er()}function Fb(){_s===0&&(_s=(ce&536870912)===0||qt?Jo():536870912);var s=gs.current;return s!==null&&(s.flags|=32),_s}function Yi(s,a,u){(s===ze&&(Ee===2||Ee===9)||s.cancelPendingCommit!==null)&&(Ou(s,0),co(s,ce,_s,!1)),es(s,u),((Te&2)===0||s!==ze)&&(s===ze&&((Te&2)===0&&(Il|=u),Je===4&&co(s,ce,_s,!1)),_r(s))}function qb(s,a,u){if((Te&6)!==0)throw Error(i(327));var d=!u&&(a&124)===0&&(a&s.expiredLanes)===0||Pi(s,a),y=d?BI(s,a):Rg(s,a,!0),b=d;do{if(y===0){Iu&&!d&&co(s,a,0,!1);break}else{if(u=s.current.alternate,b&&!VI(u)){y=Rg(s,a,!1),b=!1;continue}if(y===2){if(b=a,s.errorRecoveryDisabledLanes&b)var R=0;else R=s.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){a=R;t:{var M=s;y=qc;var Y=M.current.memoizedState.isDehydrated;if(Y&&(Ou(M,R).flags|=256),R=Rg(M,R,!1),R!==2){if(yg&&!Y){M.errorRecoveryDisabledLanes|=b,Il|=b,y=4;break t}b=vi,vi=y,b!==null&&(vi===null?vi=b:vi.push.apply(vi,b))}y=R}if(b=!1,y!==2)continue}}if(y===1){Ou(s,0),co(s,a,0,!0);break}t:{switch(d=s,b=y,b){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:co(d,a,_s,!ao);break t;case 2:vi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(y=Tg+300-Hn(),10<y)){if(co(d,a,_s,!ao),xa(d,0,!0)!==0)break t;d.timeoutHandle=vT(Gb.bind(null,d,u,vi,ed,bg,a,_s,Il,Cu,ao,b,2,-0,0),y);break t}Gb(d,u,vi,ed,bg,a,_s,Il,Cu,ao,b,0,-0,0)}}break}while(!0);_r(s)}function Gb(s,a,u,d,y,b,R,M,Y,rt,ft,pt,at,ot){if(s.timeoutHandle=-1,pt=a.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(Qc={stylesheets:null,count:0,unsuspend:yC},zb(a),pt=bC(),pt!==null)){s.cancelPendingCommit=pt(Qb.bind(null,s,a,b,u,d,y,R,M,Y,ft,1,at,ot)),co(s,b,R,!rt);return}Qb(s,a,b,u,d,y,R,M,Y)}function VI(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var y=u[d],b=y.getSnapshot;y=y.value;try{if(!ai(b(),y))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function co(s,a,u,d){a&=~vg,a&=~Il,s.suspendedLanes|=a,s.pingedLanes&=~a,d&&(s.warmLanes|=a),d=s.expirationTimes;for(var y=a;0<y;){var b=31-Tn(y),R=1<<b;d[b]=-1,y&=~R}u!==0&&ns(s,u,a)}function nd(){return(Te&6)===0?(Zc(0),!1):!0}function xg(){if(ne!==null){if(Ee===0)var s=ne.return;else s=ne,Bs=ps=null,Hp(s),Su=null,Nc=0,s=ne;for(;s!==null;)Sb(s.alternate,s),s=s.return;ne=null}}function Ou(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,eC(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),xg(),ze=s,ne=u=ms(s.current,null),ce=a,Ee=0,Zi=null,ao=!1,Iu=Pi(s,a),yg=!1,Cu=_s=vg=Il=oo=Je=0,vi=qc=null,bg=!1,(a&8)!==0&&(a|=a&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=a;0<d;){var y=31-Tn(d),b=1<<y;a|=s[y],d&=~b}return na=a,gl(),u}function Zb(s,a){Qt=null,it.H=Ff,a===Rc||a===Df?(a=u0(),Ee=3):a===a0?(a=u0(),Ee=4):Ee=a===cb?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Zi=a,ne===null&&(Je=1,Yf(s,li(a,s.current)))}function Wb(){var s=it.H;return it.H=Ff,s===null?Ff:s}function Yb(){var s=it.A;return it.A=LI,s}function Ag(){Je=4,ao||(ce&4194048)!==ce&&gs.current!==null||(Iu=!0),(oo&134217727)===0&&(Il&134217727)===0||ze===null||co(ze,ce,_s,!1)}function Rg(s,a,u){var d=Te;Te|=2;var y=Wb(),b=Yb();(ze!==s||ce!==a)&&(ed=null,Ou(s,a)),a=!1;var R=Je;t:do try{if(Ee!==0&&ne!==null){var M=ne,Y=Zi;switch(Ee){case 8:xg(),R=6;break t;case 3:case 2:case 9:case 6:gs.current===null&&(a=!0);var rt=Ee;if(Ee=0,Zi=null,Du(s,M,Y,rt),u&&Iu){R=0;break t}break;default:rt=Ee,Ee=0,Zi=null,Du(s,M,Y,rt)}}zI(),R=Je;break}catch(ft){Zb(s,ft)}while(!0);return a&&s.shellSuspendCounter++,Bs=ps=null,Te=d,it.H=y,it.A=b,ne===null&&(ze=null,ce=0,gl()),R}function zI(){for(;ne!==null;)$b(ne)}function BI(s,a){var u=Te;Te|=2;var d=Wb(),y=Yb();ze!==s||ce!==a?(ed=null,td=Hn()+500,Ou(s,a)):Iu=Pi(s,a);t:do try{if(Ee!==0&&ne!==null){a=ne;var b=Zi;e:switch(Ee){case 1:Ee=0,Zi=null,Du(s,a,b,1);break;case 2:case 9:if(o0(b)){Ee=0,Zi=null,Kb(a);break}a=function(){Ee!==2&&Ee!==9||ze!==s||(Ee=7),_r(s)},b.then(a,a);break t;case 3:Ee=7;break t;case 4:Ee=5;break t;case 7:o0(b)?(Ee=0,Zi=null,Kb(a)):(Ee=0,Zi=null,Du(s,a,b,7));break;case 5:var R=null;switch(ne.tag){case 26:R=ne.memoizedState;case 5:case 27:var M=ne;if(!R||MT(R)){Ee=0,Zi=null;var Y=M.sibling;if(Y!==null)ne=Y;else{var rt=M.return;rt!==null?(ne=rt,id(rt)):ne=null}break e}}Ee=0,Zi=null,Du(s,a,b,5);break;case 6:Ee=0,Zi=null,Du(s,a,b,6);break;case 8:xg(),Je=6;break t;default:throw Error(i(462))}}UI();break}catch(ft){Zb(s,ft)}while(!0);return Bs=ps=null,it.H=d,it.A=y,Te=u,ne!==null?0:(ze=null,ce=0,gl(),Je)}function UI(){for(;ne!==null&&!wa();)$b(ne)}function $b(s){var a=Eb(s.alternate,s,na);s.memoizedProps=s.pendingProps,a===null?id(s):ne=a}function Kb(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=gb(u,a,a.pendingProps,a.type,void 0,ce);break;case 11:a=gb(u,a,a.pendingProps,a.type.render,a.ref,ce);break;case 5:Hp(a);default:Sb(u,a),a=ne=wc(a,na),a=Eb(u,a,na)}s.memoizedProps=s.pendingProps,a===null?id(s):ne=a}function Du(s,a,u,d){Bs=ps=null,Hp(a),Su=null,Nc=0;var y=a.return;try{if(CI(s,y,a,u,ce)){Je=1,Yf(s,li(u,s.current)),ne=null;return}}catch(b){if(y!==null)throw ne=y,b;Je=1,Yf(s,li(u,s.current)),ne=null;return}a.flags&32768?(qt||d===1?s=!0:Iu||(ce&536870912)!==0?s=!1:(ao=s=!0,(d===2||d===9||d===3||d===6)&&(d=gs.current,d!==null&&d.tag===13&&(d.flags|=16384))),Xb(a,s)):id(a)}function id(s){var a=s;do{if((a.flags&32768)!==0){Xb(a,ao);return}s=a.return;var u=MI(a.alternate,a,na);if(u!==null){ne=u;return}if(a=a.sibling,a!==null){ne=a;return}ne=a=s}while(a!==null);Je===0&&(Je=5)}function Xb(s,a){do{var u=OI(s.alternate,s);if(u!==null){u.flags&=32767,ne=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){ne=s;return}ne=s=u}while(s!==null);Je=6,ne=null}function Qb(s,a,u,d,y,b,R,M,Y){s.cancelPendingCommit=null;do sd();while(Nn!==0);if((Te&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(b=a.lanes|a.childLanes,b|=Fi,tl(s,u,b,R,M,Y),s===ze&&(ne=ze=null,ce=0),Pu=a,uo=s,Mu=u,Eg=b,wg=y,Hb=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,qI(xs,function(){return iT(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=it.T,it.T=null,y=vt.p,vt.p=2,R=Te,Te|=4;try{DI(s,a,u)}finally{Te=R,vt.p=y,it.T=d}}Nn=1,Jb(),tT(),eT()}}function Jb(){if(Nn===1){Nn=0;var s=uo,a=Pu,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=it.T,it.T=null;var d=vt.p;vt.p=2;var y=Te;Te|=4;try{Lb(a,s);var b=Bg,R=dl(s.containerInfo),M=b.focusedElem,Y=b.selectionRange;if(R!==M&&M&&M.ownerDocument&&cu(M.ownerDocument.documentElement,M)){if(Y!==null&&ml(M)){var rt=Y.start,ft=Y.end;if(ft===void 0&&(ft=rt),"selectionStart"in M)M.selectionStart=rt,M.selectionEnd=Math.min(ft,M.value.length);else{var pt=M.ownerDocument||document,at=pt&&pt.defaultView||window;if(at.getSelection){var ot=at.getSelection(),Ft=M.textContent.length,zt=Math.min(Y.start,Ft),Pe=Y.end===void 0?zt:Math.min(Y.end,Ft);!ot.extend&&zt>Pe&&(R=Pe,Pe=zt,zt=R);var Q=Tc(M,zt),X=Tc(M,Pe);if(Q&&X&&(ot.rangeCount!==1||ot.anchorNode!==Q.node||ot.anchorOffset!==Q.offset||ot.focusNode!==X.node||ot.focusOffset!==X.offset)){var st=pt.createRange();st.setStart(Q.node,Q.offset),ot.removeAllRanges(),zt>Pe?(ot.addRange(st),ot.extend(X.node,X.offset)):(st.setEnd(X.node,X.offset),ot.addRange(st))}}}}for(pt=[],ot=M;ot=ot.parentNode;)ot.nodeType===1&&pt.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<pt.length;M++){var dt=pt[M];dt.element.scrollLeft=dt.left,dt.element.scrollTop=dt.top}}gd=!!zg,Bg=zg=null}finally{Te=y,vt.p=d,it.T=u}}s.current=a,Nn=2}}function tT(){if(Nn===2){Nn=0;var s=uo,a=Pu,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=it.T,it.T=null;var d=vt.p;vt.p=2;var y=Te;Te|=4;try{Mb(s,a.alternate,a)}finally{Te=y,vt.p=d,it.T=u}}Nn=3}}function eT(){if(Nn===4||Nn===3){Nn=0,Yo();var s=uo,a=Pu,u=Mu,d=Hb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Nn=5:(Nn=0,Pu=uo=null,nT(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(lo=null),Ra(u),a=a.stateNode,fe&&typeof fe.onCommitFiberRoot=="function")try{fe.onCommitFiberRoot(De,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=it.T,y=vt.p,vt.p=2,it.T=null;try{for(var b=s.onRecoverableError,R=0;R<d.length;R++){var M=d[R];b(M.value,{componentStack:M.stack})}}finally{it.T=a,vt.p=y}}(Mu&3)!==0&&sd(),_r(s),y=s.pendingLanes,(u&4194090)!==0&&(y&42)!==0?s===Sg?Gc++:(Gc=0,Sg=s):Gc=0,Zc(0)}}function nT(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,xc(a)))}function sd(s){return Jb(),tT(),eT(),iT()}function iT(){if(Nn!==5)return!1;var s=uo,a=Eg;Eg=0;var u=Ra(Mu),d=it.T,y=vt.p;try{vt.p=32>u?32:u,it.T=null,u=wg,wg=null;var b=uo,R=Mu;if(Nn=0,Pu=uo=null,Mu=0,(Te&6)!==0)throw Error(i(331));var M=Te;if(Te|=4,Ub(b.current),Vb(b,b.current,R,u),Te=M,Zc(0,!1),fe&&typeof fe.onPostCommitFiberRoot=="function")try{fe.onPostCommitFiberRoot(De,b)}catch{}return!0}finally{vt.p=y,it.T=d,nT(s,a)}}function sT(s,a,u){a=li(u,a),a=ng(s.stateNode,a,2),s=Ja(s,a,2),s!==null&&(es(s,2),_r(s))}function Oe(s,a,u){if(s.tag===3)sT(s,s,u);else for(;a!==null;){if(a.tag===3){sT(a,s,u);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(lo===null||!lo.has(d))){s=li(u,s),u=lb(2),d=Ja(a,u,2),d!==null&&(ub(u,d,a,s),es(d,2),_r(d));break}}a=a.return}}function Ig(s,a,u){var d=s.pingCache;if(d===null){d=s.pingCache=new NI;var y=new Set;d.set(a,y)}else y=d.get(a),y===void 0&&(y=new Set,d.set(a,y));y.has(u)||(yg=!0,y.add(u),s=jI.bind(null,s,a,u),a.then(s,s))}function jI(s,a,u){var d=s.pingCache;d!==null&&d.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,ze===s&&(ce&u)===u&&(Je===4||Je===3&&(ce&62914560)===ce&&300>Hn()-Tg?(Te&2)===0&&Ou(s,0):vg|=u,Cu===ce&&(Cu=0)),_r(s)}function rT(s,a){a===0&&(a=Aa()),s=Wa(s,a),s!==null&&(es(s,a),_r(s))}function HI(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),rT(s,u)}function FI(s,a){var u=0;switch(s.tag){case 13:var d=s.stateNode,y=s.memoizedState;y!==null&&(u=y.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(a),rT(s,u)}function qI(s,a){return Ss(s,a)}var rd=null,ku=null,Cg=!1,ad=!1,Pg=!1,Cl=0;function _r(s){s!==ku&&s.next===null&&(ku===null?rd=ku=s:ku=ku.next=s),ad=!0,Cg||(Cg=!0,ZI())}function Zc(s,a){if(!Pg&&ad){Pg=!0;do for(var u=!1,d=rd;d!==null;){if(s!==0){var y=d.pendingLanes;if(y===0)var b=0;else{var R=d.suspendedLanes,M=d.pingedLanes;b=(1<<31-Tn(42|s)+1)-1,b&=y&~(R&~M),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,uT(d,b))}else b=ce,b=xa(d,d===ze?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Pi(d,b)||(u=!0,uT(d,b));d=d.next}while(u);Pg=!1}}function GI(){aT()}function aT(){ad=Cg=!1;var s=0;Cl!==0&&(tC()&&(s=Cl),Cl=0);for(var a=Hn(),u=null,d=rd;d!==null;){var y=d.next,b=oT(d,a);b===0?(d.next=null,u===null?rd=y:u.next=y,y===null&&(ku=u)):(u=d,(s!==0||(b&3)!==0)&&(ad=!0)),d=y}Zc(s)}function oT(s,a){for(var u=s.suspendedLanes,d=s.pingedLanes,y=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var R=31-Tn(b),M=1<<R,Y=y[R];Y===-1?((M&u)===0||(M&d)!==0)&&(y[R]=Qo(M,a)):Y<=a&&(s.expiredLanes|=M),b&=~M}if(a=ze,u=ce,u=xa(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,u===0||s===a&&(Ee===2||Ee===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&Mr(d),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||Pi(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(d!==null&&Mr(d),Ra(u)){case 2:case 8:u=Or;break;case 32:u=xs;break;case 268435456:u=Dr;break;default:u=xs}return d=lT.bind(null,s),u=Ss(u,d),s.callbackPriority=a,s.callbackNode=u,a}return d!==null&&d!==null&&Mr(d),s.callbackPriority=2,s.callbackNode=null,2}function lT(s,a){if(Nn!==0&&Nn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(sd()&&s.callbackNode!==u)return null;var d=ce;return d=xa(s,s===ze?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(qb(s,d,a),oT(s,Hn()),s.callbackNode!=null&&s.callbackNode===u?lT.bind(null,s):null)}function uT(s,a){if(sd())return null;qb(s,a,!0)}function ZI(){nC(function(){(Te&6)!==0?Ss($o,GI):aT()})}function Mg(){return Cl===0&&(Cl=Jo()),Cl}function cT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:or(""+s)}function hT(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function WI(s,a,u,d,y){if(a==="submit"&&u&&u.stateNode===y){var b=cT((y[Xe]||null).action),R=d.submitter;R&&(a=(a=R[Xe]||null)?cT(a.formAction):R.getAttribute("formAction"),a!==null&&(b=a,R=null));var M=new Ur("action","action",null,d,y);s.push({event:M,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Cl!==0){var Y=R?hT(y,R):new FormData(y);Xp(u,{pending:!0,data:Y,method:y.method,action:b},null,Y)}}else typeof b=="function"&&(M.preventDefault(),Y=R?hT(y,R):new FormData(y),Xp(u,{pending:!0,data:Y,method:y.method,action:b},b,Y))},currentTarget:y}]})}}for(var Og=0;Og<Gr.length;Og++){var Dg=Gr[Og],YI=Dg.toLowerCase(),$I=Dg[0].toUpperCase()+Dg.slice(1);Hi(YI,"on"+$I)}Hi(Sf,"onAnimationEnd"),Hi(ji,"onAnimationIteration"),Hi(pl,"onAnimationStart"),Hi("dblclick","onDoubleClick"),Hi("focusin","onFocus"),Hi("focusout","onBlur"),Hi(Ap,"onTransitionRun"),Hi(mu,"onTransitionStart"),Hi(Rp,"onTransitionCancel"),Hi(Ec,"onTransitionEnd"),is("onMouseEnter",["mouseout","mouseover"]),is("onMouseLeave",["mouseout","mouseover"]),is("onPointerEnter",["pointerout","pointerover"]),is("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wc));function fT(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var d=s[u],y=d.event;d=d.listeners;t:{var b=void 0;if(a)for(var R=d.length-1;0<=R;R--){var M=d[R],Y=M.instance,rt=M.currentTarget;if(M=M.listener,Y!==b&&y.isPropagationStopped())break t;b=M,y.currentTarget=rt;try{b(y)}catch(ft){Wf(ft)}y.currentTarget=null,b=Y}else for(R=0;R<d.length;R++){if(M=d[R],Y=M.instance,rt=M.currentTarget,M=M.listener,Y!==b&&y.isPropagationStopped())break t;b=M,y.currentTarget=rt;try{b(y)}catch(ft){Wf(ft)}y.currentTarget=null,b=Y}}}}function ie(s,a){var u=a[qn];u===void 0&&(u=a[qn]=new Set);var d=s+"__bubble";u.has(d)||(dT(a,s,2,!1),u.add(d))}function kg(s,a,u){var d=0;a&&(d|=4),dT(u,s,d,a)}var od="_reactListening"+Math.random().toString(36).slice(2);function Lg(s){if(!s[od]){s[od]=!0,il.forEach(function(u){u!=="selectionchange"&&(KI.has(u)||kg(u,!1,s),kg(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[od]||(a[od]=!0,kg("selectionchange",!1,a))}}function dT(s,a,u,d){switch(VT(a)){case 2:var y=wC;break;case 8:y=SC;break;default:y=$g}u=y.bind(null,a,u,s),y=void 0,!Gn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),d?y!==void 0?s.addEventListener(a,u,{capture:!0,passive:y}):s.addEventListener(a,u,!0):y!==void 0?s.addEventListener(a,u,{passive:y}):s.addEventListener(a,u,!1)}function Ng(s,a,u,d,y){var b=d;if((a&1)===0&&(a&2)===0&&d!==null)t:for(;;){if(d===null)return;var R=d.tag;if(R===3||R===4){var M=d.stateNode.containerInfo;if(M===y)break;if(R===4)for(R=d.return;R!==null;){var Y=R.tag;if((Y===3||Y===4)&&R.stateNode.containerInfo===y)return;R=R.return}for(;M!==null;){if(R=Mi(M),R===null)return;if(Y=R.tag,Y===5||Y===6||Y===26||Y===27){d=b=R;continue t}M=M.parentNode}}d=d.return}ri(function(){var rt=b,ft=kn(u),pt=[];t:{var at=xf.get(s);if(at!==void 0){var ot=Ur,Ft=s;switch(s){case"keypress":if(Re(u)===0)break t;case"keydown":case"keyup":ot=za;break;case"focusin":Ft="focus",ot=Da;break;case"focusout":Ft="blur",ot=Da;break;case"beforeblur":case"afterblur":ot=Da;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=xn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=au;break;case Sf:case ji:case pl:ot=La;break;case Ec:ot=ou;break;case"scroll":case"scrollend":ot=su;break;case"wheel":ot=Fr;break;case"copy":case"cut":case"paste":ot=lr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Ba;break;case"toggle":case"beforetoggle":ot=cs}var zt=(a&4)!==0,Pe=!zt&&(s==="scroll"||s==="scrollend"),Q=zt?at!==null?at+"Capture":null:at;zt=[];for(var X=rt,st;X!==null;){var dt=X;if(st=dt.stateNode,dt=dt.tag,dt!==5&&dt!==26&&dt!==27||st===null||Q===null||(dt=ue(X,Q),dt!=null&&zt.push(Yc(X,dt,st))),Pe)break;X=X.return}0<zt.length&&(at=new ot(at,Ft,null,u,ft),pt.push({event:at,listeners:zt}))}}if((a&7)===0){t:{if(at=s==="mouseover"||s==="pointerover",ot=s==="mouseout"||s==="pointerout",at&&u!==Ni&&(Ft=u.relatedTarget||u.fromElement)&&(Mi(Ft)||Ft[di]))break t;if((ot||at)&&(at=ft.window===ft?ft:(at=ft.ownerDocument)?at.defaultView||at.parentWindow:window,ot?(Ft=u.relatedTarget||u.toElement,ot=rt,Ft=Ft?Mi(Ft):null,Ft!==null&&(Pe=l(Ft),zt=Ft.tag,Ft!==Pe||zt!==5&&zt!==27&&zt!==6)&&(Ft=null)):(ot=null,Ft=rt),ot!==Ft)){if(zt=xn,dt="onMouseLeave",Q="onMouseEnter",X="mouse",(s==="pointerout"||s==="pointerover")&&(zt=Ba,dt="onPointerLeave",Q="onPointerEnter",X="pointer"),Pe=ot==null?at:On(ot),st=Ft==null?at:On(Ft),at=new zt(dt,X+"leave",ot,u,ft),at.target=Pe,at.relatedTarget=st,dt=null,Mi(ft)===rt&&(zt=new zt(Q,X+"enter",Ft,u,ft),zt.target=st,zt.relatedTarget=Pe,dt=zt),Pe=dt,ot&&Ft)e:{for(zt=ot,Q=Ft,X=0,st=zt;st;st=Lu(st))X++;for(st=0,dt=Q;dt;dt=Lu(dt))st++;for(;0<X-st;)zt=Lu(zt),X--;for(;0<st-X;)Q=Lu(Q),st--;for(;X--;){if(zt===Q||Q!==null&&zt===Q.alternate)break e;zt=Lu(zt),Q=Lu(Q)}zt=null}else zt=null;ot!==null&&mT(pt,at,ot,zt,!1),Ft!==null&&Pe!==null&&mT(pt,Pe,Ft,zt,!0)}}t:{if(at=rt?On(rt):window,ot=at.nodeName&&at.nodeName.toLowerCase(),ot==="select"||ot==="input"&&at.type==="file")var Pt=ja;else if(Ne(at))if(yc)Pt=xp;else{Pt=Sp;var ee=bc}else ot=at.nodeName,!ot||ot.toLowerCase()!=="input"||at.type!=="checkbox"&&at.type!=="radio"?rt&&Br(rt.elementType)&&(Pt=ja):Pt=zs;if(Pt&&(Pt=Pt(s,rt))){Ns(pt,Pt,u,ft);break t}ee&&ee(s,at,rt),s==="focusout"&&rt&&at.type==="number"&&rt.memoizedProps.value!=null&&ki(at,"number",at.value)}switch(ee=rt?On(rt):window,s){case"focusin":(Ne(ee)||ee.contentEditable==="true")&&(Ui=ee,qa=rt,qr=null);break;case"focusout":qr=qa=Ui=null;break;case"mousedown":fu=!0;break;case"contextmenu":case"mouseup":case"dragend":fu=!1,Ef(pt,u,ft);break;case"selectionchange":if(hu)break;case"keydown":case"keyup":Ef(pt,u,ft)}var Dt;if(Yn)t:{switch(s){case"compositionstart":var Bt="onCompositionStart";break t;case"compositionend":Bt="onCompositionEnd";break t;case"compositionupdate":Bt="onCompositionUpdate";break t}Bt=void 0}else se?ut(s,u)&&(Bt="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Bt="onCompositionStart");Bt&&(A&&u.locale!=="ko"&&(se||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&se&&(Dt=Os()):(pi=ft,Zn="value"in pi?pi.value:pi.textContent,se=!0)),ee=ld(rt,Bt),0<ee.length&&(Bt=new Wn(Bt,s,null,u,ft),pt.push({event:Bt,listeners:ee}),Dt?Bt.data=Dt:(Dt=wt(u),Dt!==null&&(Bt.data=Dt)))),(Dt=w?Qe(s,u):re(s,u))&&(Bt=ld(rt,"onBeforeInput"),0<Bt.length&&(ee=new Wn("onBeforeInput","beforeinput",null,u,ft),pt.push({event:ee,listeners:Bt}),ee.data=Dt)),WI(pt,s,rt,u,ft)}fT(pt,a)})}function Yc(s,a,u){return{instance:s,listener:a,currentTarget:u}}function ld(s,a){for(var u=a+"Capture",d=[];s!==null;){var y=s,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=ue(s,u),y!=null&&d.unshift(Yc(s,y,b)),y=ue(s,a),y!=null&&d.push(Yc(s,y,b))),s.tag===3)return d;s=s.return}return[]}function Lu(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function mT(s,a,u,d,y){for(var b=a._reactName,R=[];u!==null&&u!==d;){var M=u,Y=M.alternate,rt=M.stateNode;if(M=M.tag,Y!==null&&Y===d)break;M!==5&&M!==26&&M!==27||rt===null||(Y=rt,y?(rt=ue(u,b),rt!=null&&R.unshift(Yc(u,rt,Y))):y||(rt=ue(u,b),rt!=null&&R.push(Yc(u,rt,Y)))),u=u.return}R.length!==0&&s.push({event:a,listeners:R})}var XI=/\r\n?/g,QI=/\u0000|\uFFFD/g;function pT(s){return(typeof s=="string"?s:""+s).replace(XI,`
`).replace(QI,"")}function gT(s,a){return a=pT(a),pT(s)===a}function ud(){}function Ce(s,a,u,d,y,b){switch(u){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||wn(s,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&wn(s,""+d);break;case"className":ss(s,"class",d);break;case"tabIndex":ss(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ss(s,u,d);break;case"style":Ps(s,d,b);break;case"data":if(a!=="object"){ss(s,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=or(""+d),s.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(a!=="input"&&Ce(s,a,"name",y.name,y,null),Ce(s,a,"formEncType",y.formEncType,y,null),Ce(s,a,"formMethod",y.formMethod,y,null),Ce(s,a,"formTarget",y.formTarget,y,null)):(Ce(s,a,"encType",y.encType,y,null),Ce(s,a,"method",y.method,y,null),Ce(s,a,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=or(""+d),s.setAttribute(u,d);break;case"onClick":d!=null&&(s.onclick=ud);break;case"onScroll":d!=null&&ie("scroll",s);break;case"onScrollEnd":d!=null&&ie("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}u=or(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""+d):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":d===!0?s.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,d):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(u,d):s.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(u):s.setAttribute(u,d);break;case"popover":ie("beforetoggle",s),ie("toggle",s),ir(s,"popover",d);break;case"xlinkActuate":pn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":pn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":pn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":pn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":pn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":pn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":pn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":pn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":pn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ir(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=rl.get(u)||u,ir(s,u,d))}}function Vg(s,a,u,d,y,b){switch(u){case"style":Ps(s,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof d=="string"?wn(s,d):(typeof d=="number"||typeof d=="bigint")&&wn(s,""+d);break;case"onScroll":d!=null&&ie("scroll",s);break;case"onScrollEnd":d!=null&&ie("scrollend",s);break;case"onClick":d!=null&&(s.onclick=ud);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ca.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),a=u.slice(2,y?u.length-7:void 0),b=s[Xe]||null,b=b!=null?b[u]:null,typeof b=="function"&&s.removeEventListener(a,b,y),typeof d=="function")){typeof b!="function"&&b!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,d,y);break t}u in s?s[u]=d:d===!0?s.setAttribute(u,""):ir(s,u,d)}}}function Vn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ie("error",s),ie("load",s);var d=!1,y=!1,b;for(b in u)if(u.hasOwnProperty(b)){var R=u[b];if(R!=null)switch(b){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Ce(s,a,b,R,u,null)}}y&&Ce(s,a,"srcSet",u.srcSet,u,null),d&&Ce(s,a,"src",u.src,u,null);return;case"input":ie("invalid",s);var M=b=R=y=null,Y=null,rt=null;for(d in u)if(u.hasOwnProperty(d)){var ft=u[d];if(ft!=null)switch(d){case"name":y=ft;break;case"type":R=ft;break;case"checked":Y=ft;break;case"defaultChecked":rt=ft;break;case"value":b=ft;break;case"defaultValue":M=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(i(137,a));break;default:Ce(s,a,d,ft,u,null)}}zr(s,b,M,Y,rt,R,y,!1),ar(s);return;case"select":ie("invalid",s),d=R=b=null;for(y in u)if(u.hasOwnProperty(y)&&(M=u[y],M!=null))switch(y){case"value":b=M;break;case"defaultValue":R=M;break;case"multiple":d=M;default:Ce(s,a,y,M,u,null)}a=b,u=R,s.multiple=!!d,a!=null?Dn(s,!!d,a,!1):u!=null&&Dn(s,!!d,u,!0);return;case"textarea":ie("invalid",s),b=y=d=null;for(R in u)if(u.hasOwnProperty(R)&&(M=u[R],M!=null))switch(R){case"value":d=M;break;case"defaultValue":y=M;break;case"children":b=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:Ce(s,a,R,M,u,null)}si(s,d,y,b),ar(s);return;case"option":for(Y in u)if(u.hasOwnProperty(Y)&&(d=u[Y],d!=null))switch(Y){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ce(s,a,Y,d,u,null)}return;case"dialog":ie("beforetoggle",s),ie("toggle",s),ie("cancel",s),ie("close",s);break;case"iframe":case"object":ie("load",s);break;case"video":case"audio":for(d=0;d<Wc.length;d++)ie(Wc[d],s);break;case"image":ie("error",s),ie("load",s);break;case"details":ie("toggle",s);break;case"embed":case"source":case"link":ie("error",s),ie("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in u)if(u.hasOwnProperty(rt)&&(d=u[rt],d!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Ce(s,a,rt,d,u,null)}return;default:if(Br(a)){for(ft in u)u.hasOwnProperty(ft)&&(d=u[ft],d!==void 0&&Vg(s,a,ft,d,u,void 0));return}}for(M in u)u.hasOwnProperty(M)&&(d=u[M],d!=null&&Ce(s,a,M,d,u,null))}function JI(s,a,u,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,R=null,M=null,Y=null,rt=null,ft=null;for(ot in u){var pt=u[ot];if(u.hasOwnProperty(ot)&&pt!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":Y=pt;default:d.hasOwnProperty(ot)||Ce(s,a,ot,null,d,pt)}}for(var at in d){var ot=d[at];if(pt=u[at],d.hasOwnProperty(at)&&(ot!=null||pt!=null))switch(at){case"type":b=ot;break;case"name":y=ot;break;case"checked":rt=ot;break;case"defaultChecked":ft=ot;break;case"value":R=ot;break;case"defaultValue":M=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(i(137,a));break;default:ot!==pt&&Ce(s,a,at,ot,d,pt)}}Le(s,R,M,Y,rt,ft,b,y);return;case"select":ot=R=M=at=null;for(b in u)if(Y=u[b],u.hasOwnProperty(b)&&Y!=null)switch(b){case"value":break;case"multiple":ot=Y;default:d.hasOwnProperty(b)||Ce(s,a,b,null,d,Y)}for(y in d)if(b=d[y],Y=u[y],d.hasOwnProperty(y)&&(b!=null||Y!=null))switch(y){case"value":at=b;break;case"defaultValue":M=b;break;case"multiple":R=b;default:b!==Y&&Ce(s,a,y,b,d,Y)}a=M,u=R,d=ot,at!=null?Dn(s,!!u,at,!1):!!d!=!!u&&(a!=null?Dn(s,!!u,a,!0):Dn(s,!!u,u?[]:"",!1));return;case"textarea":ot=at=null;for(M in u)if(y=u[M],u.hasOwnProperty(M)&&y!=null&&!d.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Ce(s,a,M,null,d,y)}for(R in d)if(y=d[R],b=u[R],d.hasOwnProperty(R)&&(y!=null||b!=null))switch(R){case"value":at=y;break;case"defaultValue":ot=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==b&&Ce(s,a,R,y,d,b)}jt(s,at,ot);return;case"option":for(var Ft in u)if(at=u[Ft],u.hasOwnProperty(Ft)&&at!=null&&!d.hasOwnProperty(Ft))switch(Ft){case"selected":s.selected=!1;break;default:Ce(s,a,Ft,null,d,at)}for(Y in d)if(at=d[Y],ot=u[Y],d.hasOwnProperty(Y)&&at!==ot&&(at!=null||ot!=null))switch(Y){case"selected":s.selected=at&&typeof at!="function"&&typeof at!="symbol";break;default:Ce(s,a,Y,at,d,ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var zt in u)at=u[zt],u.hasOwnProperty(zt)&&at!=null&&!d.hasOwnProperty(zt)&&Ce(s,a,zt,null,d,at);for(rt in d)if(at=d[rt],ot=u[rt],d.hasOwnProperty(rt)&&at!==ot&&(at!=null||ot!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(i(137,a));break;default:Ce(s,a,rt,at,d,ot)}return;default:if(Br(a)){for(var Pe in u)at=u[Pe],u.hasOwnProperty(Pe)&&at!==void 0&&!d.hasOwnProperty(Pe)&&Vg(s,a,Pe,void 0,d,at);for(ft in d)at=d[ft],ot=u[ft],!d.hasOwnProperty(ft)||at===ot||at===void 0&&ot===void 0||Vg(s,a,ft,at,d,ot);return}}for(var Q in u)at=u[Q],u.hasOwnProperty(Q)&&at!=null&&!d.hasOwnProperty(Q)&&Ce(s,a,Q,null,d,at);for(pt in d)at=d[pt],ot=u[pt],!d.hasOwnProperty(pt)||at===ot||at==null&&ot==null||Ce(s,a,pt,at,d,ot)}var zg=null,Bg=null;function cd(s){return s.nodeType===9?s:s.ownerDocument}function _T(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yT(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Ug(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var jg=null;function tC(){var s=window.event;return s&&s.type==="popstate"?s===jg?!1:(jg=s,!0):(jg=null,!1)}var vT=typeof setTimeout=="function"?setTimeout:void 0,eC=typeof clearTimeout=="function"?clearTimeout:void 0,bT=typeof Promise=="function"?Promise:void 0,nC=typeof queueMicrotask=="function"?queueMicrotask:typeof bT<"u"?function(s){return bT.resolve(null).then(s).catch(iC)}:vT;function iC(s){setTimeout(function(){throw s})}function ho(s){return s==="head"}function TT(s,a){var u=a,d=0,y=0;do{var b=u.nextSibling;if(s.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"){if(0<d&&8>d){u=d;var R=s.ownerDocument;if(u&1&&$c(R.documentElement),u&2&&$c(R.body),u&4)for(u=R.head,$c(u),R=u.firstChild;R;){var M=R.nextSibling,Y=R.nodeName;R[nr]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&R.rel.toLowerCase()==="stylesheet"||u.removeChild(R),R=M}}if(y===0){s.removeChild(b),ih(a);return}y--}else u==="$"||u==="$?"||u==="$!"?y++:d=u.charCodeAt(0)-48;else d=0;u=b}while(u);ih(a)}function Hg(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Hg(u),Is(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function sC(s,a,u,d){for(;s.nodeType===1;){var y=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[nr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=Hs(s.nextSibling),s===null)break}return null}function rC(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=Hs(s.nextSibling),s===null))return null;return s}function Fg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function aC(s,a){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")a();else{var d=function(){a(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function Hs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var qg=null;function ET(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}function wT(s,a,u){switch(a=cd(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function $c(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Is(s)}var ys=new Map,ST=new Set;function hd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ia=vt.d;vt.d={f:oC,r:lC,D:uC,C:cC,L:hC,m:fC,X:mC,S:dC,M:pC};function oC(){var s=ia.f(),a=nd();return s||a}function lC(s){var a=Oi(s);a!==null&&a.tag===5&&a.type==="form"?q0(a):ia.r(s)}var Nu=typeof document>"u"?null:document;function xT(s,a,u){var d=Nu;if(d&&typeof a=="string"&&a){var y=Be(a);y='link[rel="'+s+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),ST.has(y)||(ST.add(y),s={rel:s,crossOrigin:u,href:a},d.querySelector(y)===null&&(a=d.createElement("link"),Vn(a,"link",s),Ze(a),d.head.appendChild(a)))}}function uC(s){ia.D(s),xT("dns-prefetch",s,null)}function cC(s,a){ia.C(s,a),xT("preconnect",s,a)}function hC(s,a,u){ia.L(s,a,u);var d=Nu;if(d&&s&&a){var y='link[rel="preload"][as="'+Be(a)+'"]';a==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+Be(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+Be(u.imageSizes)+'"]')):y+='[href="'+Be(s)+'"]';var b=y;switch(a){case"style":b=Vu(s);break;case"script":b=zu(s)}ys.has(b)||(s=v({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),ys.set(b,s),d.querySelector(y)!==null||a==="style"&&d.querySelector(Kc(b))||a==="script"&&d.querySelector(Xc(b))||(a=d.createElement("link"),Vn(a,"link",s),Ze(a),d.head.appendChild(a)))}}function fC(s,a){ia.m(s,a);var u=Nu;if(u&&s){var d=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+Be(d)+'"][href="'+Be(s)+'"]',b=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=zu(s)}if(!ys.has(b)&&(s=v({rel:"modulepreload",href:s},a),ys.set(b,s),u.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Xc(b)))return}d=u.createElement("link"),Vn(d,"link",s),Ze(d),u.head.appendChild(d)}}}function dC(s,a,u){ia.S(s,a,u);var d=Nu;if(d&&s){var y=En(d).hoistableStyles,b=Vu(s);a=a||"default";var R=y.get(b);if(!R){var M={loading:0,preload:null};if(R=d.querySelector(Kc(b)))M.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":a},u),(u=ys.get(b))&&Gg(s,u);var Y=R=d.createElement("link");Ze(Y),Vn(Y,"link",s),Y._p=new Promise(function(rt,ft){Y.onload=rt,Y.onerror=ft}),Y.addEventListener("load",function(){M.loading|=1}),Y.addEventListener("error",function(){M.loading|=2}),M.loading|=4,fd(R,a,d)}R={type:"stylesheet",instance:R,count:1,state:M},y.set(b,R)}}}function mC(s,a){ia.X(s,a);var u=Nu;if(u&&s){var d=En(u).hoistableScripts,y=zu(s),b=d.get(y);b||(b=u.querySelector(Xc(y)),b||(s=v({src:s,async:!0},a),(a=ys.get(y))&&Zg(s,a),b=u.createElement("script"),Ze(b),Vn(b,"link",s),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function pC(s,a){ia.M(s,a);var u=Nu;if(u&&s){var d=En(u).hoistableScripts,y=zu(s),b=d.get(y);b||(b=u.querySelector(Xc(y)),b||(s=v({src:s,async:!0,type:"module"},a),(a=ys.get(y))&&Zg(s,a),b=u.createElement("script"),Ze(b),Vn(b,"link",s),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function AT(s,a,u,d){var y=(y=Et.current)?hd(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Vu(u.href),u=En(y).hoistableStyles,d=u.get(a),d||(d={type:"style",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Vu(u.href);var b=En(y).hoistableStyles,R=b.get(s);if(R||(y=y.ownerDocument||y,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,R),(b=y.querySelector(Kc(s)))&&!b._p&&(R.instance=b,R.state.loading=5),ys.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ys.set(s,u),b||gC(y,s,u,R.state))),a&&d===null)throw Error(i(528,""));return R}if(a&&d!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=zu(u),u=En(y).hoistableScripts,d=u.get(a),d||(d={type:"script",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Vu(s){return'href="'+Be(s)+'"'}function Kc(s){return'link[rel="stylesheet"]['+s+"]"}function RT(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function gC(s,a,u,d){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=s.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Vn(a,"link",u),Ze(a),s.head.appendChild(a))}function zu(s){return'[src="'+Be(s)+'"]'}function Xc(s){return"script[async]"+s}function IT(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var d=s.querySelector('style[data-href~="'+Be(u.href)+'"]');if(d)return a.instance=d,Ze(d),d;var y=v({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),Ze(d),Vn(d,"style",y),fd(d,u.precedence,s),a.instance=d;case"stylesheet":y=Vu(u.href);var b=s.querySelector(Kc(y));if(b)return a.state.loading|=4,a.instance=b,Ze(b),b;d=RT(u),(y=ys.get(y))&&Gg(d,y),b=(s.ownerDocument||s).createElement("link"),Ze(b);var R=b;return R._p=new Promise(function(M,Y){R.onload=M,R.onerror=Y}),Vn(b,"link",d),a.state.loading|=4,fd(b,u.precedence,s),a.instance=b;case"script":return b=zu(u.src),(y=s.querySelector(Xc(b)))?(a.instance=y,Ze(y),y):(d=u,(y=ys.get(b))&&(d=v({},u),Zg(d,y)),s=s.ownerDocument||s,y=s.createElement("script"),Ze(y),Vn(y,"link",d),s.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,fd(d,u.precedence,s));return a.instance}function fd(s,a,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,b=y,R=0;R<d.length;R++){var M=d[R];if(M.dataset.precedence===a)b=M;else if(b!==y)break}b?b.parentNode.insertBefore(s,b.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function Gg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Zg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var dd=null;function CT(s,a,u){if(dd===null){var d=new Map,y=dd=new Map;y.set(u,d)}else y=dd,d=y.get(u),d||(d=new Map,y.set(u,d));if(d.has(s))return d;for(d.set(s,null),u=u.getElementsByTagName(s),y=0;y<u.length;y++){var b=u[y];if(!(b[nr]||b[tn]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var R=b.getAttribute(a)||"";R=s+R;var M=d.get(R);M?M.push(b):d.set(R,[b])}}return d}function PT(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function _C(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function MT(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Qc=null;function yC(){}function vC(s,a,u){if(Qc===null)throw Error(i(475));var d=Qc;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Vu(u.href),b=s.querySelector(Kc(y));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(d.count++,d=md.bind(d),s.then(d,d)),a.state.loading|=4,a.instance=b,Ze(b);return}b=s.ownerDocument||s,u=RT(u),(y=ys.get(y))&&Gg(u,y),b=b.createElement("link"),Ze(b);var R=b;R._p=new Promise(function(M,Y){R.onload=M,R.onerror=Y}),Vn(b,"link",u),a.instance=b}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=md.bind(d),s.addEventListener("load",a),s.addEventListener("error",a))}}function bC(){if(Qc===null)throw Error(i(475));var s=Qc;return s.stylesheets&&s.count===0&&Wg(s,s.stylesheets),0<s.count?function(a){var u=setTimeout(function(){if(s.stylesheets&&Wg(s,s.stylesheets),s.unsuspend){var d=s.unsuspend;s.unsuspend=null,d()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(u)}}:null}function md(){if(this.count--,this.count===0){if(this.stylesheets)Wg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var pd=null;function Wg(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,pd=new Map,a.forEach(TC,s),pd=null,md.call(s))}function TC(s,a){if(!(a.state.loading&4)){var u=pd.get(s);if(u)var d=u.get(null);else{u=new Map,pd.set(s,u);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var R=y[b];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(u.set(R.dataset.precedence,R),d=R)}d&&u.set(null,d)}y=a.instance,R=y.getAttribute("data-precedence"),b=u.get(R)||d,b===d&&u.set(null,y),u.set(R,y),this.count++,d=md.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),b?b.parentNode.insertBefore(y,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),a.state.loading|=4}}var Jc={$$typeof:$,Provider:null,Consumer:null,_currentValue:mt,_currentValue2:mt,_threadCount:0};function EC(s,a,u,d,y,b,R,M){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ts(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ts(0),this.hiddenUpdates=ts(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function OT(s,a,u,d,y,b,R,M,Y,rt,ft,pt){return s=new EC(s,a,u,R,M,Y,rt,pt),a=1,b===!0&&(a|=24),b=ci(3,null,null,a),s.current=b,b.stateNode=s,a=Ip(),a.refCount++,s.pooledCache=a,a.refCount++,b.memoizedState={element:d,isDehydrated:u,cache:a},Op(b),s}function DT(s){return s?(s=Yr,s):Yr}function kT(s,a,u,d,y,b){y=DT(y),d.context===null?d.context=y:d.pendingContext=y,d=Qa(a),d.payload={element:u},b=b===void 0?null:b,b!==null&&(d.callback=b),u=Ja(s,d,a),u!==null&&(Yi(u,s,a),Cc(u,s,a))}function LT(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Yg(s,a){LT(s,a),(s=s.alternate)&&LT(s,a)}function NT(s){if(s.tag===13){var a=Wa(s,67108864);a!==null&&Yi(a,s,67108864),Yg(s,67108864)}}var gd=!0;function wC(s,a,u,d){var y=it.T;it.T=null;var b=vt.p;try{vt.p=2,$g(s,a,u,d)}finally{vt.p=b,it.T=y}}function SC(s,a,u,d){var y=it.T;it.T=null;var b=vt.p;try{vt.p=8,$g(s,a,u,d)}finally{vt.p=b,it.T=y}}function $g(s,a,u,d){if(gd){var y=Kg(d);if(y===null)Ng(s,a,d,_d,u),zT(s,d);else if(AC(y,s,a,u,d))d.stopPropagation();else if(zT(s,d),a&4&&-1<xC.indexOf(s)){for(;y!==null;){var b=Oi(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var R=fi(b.pendingLanes);if(R!==0){var M=b;for(M.pendingLanes|=2,M.entangledLanes|=2;R;){var Y=1<<31-Tn(R);M.entanglements[1]|=Y,R&=~Y}_r(b),(Te&6)===0&&(td=Hn()+500,Zc(0))}}break;case 13:M=Wa(b,2),M!==null&&Yi(M,b,2),nd(),Yg(b,2)}if(b=Kg(d),b===null&&Ng(s,a,d,_d,u),b===y)break;y=b}y!==null&&d.stopPropagation()}else Ng(s,a,d,null,u)}}function Kg(s){return s=kn(s),Xg(s)}var _d=null;function Xg(s){if(_d=null,s=Mi(s),s!==null){var a=l(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return _d=s,null}function VT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sa()){case $o:return 2;case Or:return 8;case xs:case Jl:return 32;case Dr:return 268435456;default:return 32}default:return 32}}var Qg=!1,fo=null,mo=null,po=null,th=new Map,eh=new Map,go=[],xC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zT(s,a){switch(s){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":mo=null;break;case"mouseover":case"mouseout":po=null;break;case"pointerover":case"pointerout":th.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":eh.delete(a.pointerId)}}function nh(s,a,u,d,y,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:u,eventSystemFlags:d,nativeEvent:b,targetContainers:[y]},a!==null&&(a=Oi(a),a!==null&&NT(a)),s):(s.eventSystemFlags|=d,a=s.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),s)}function AC(s,a,u,d,y){switch(a){case"focusin":return fo=nh(fo,s,a,u,d,y),!0;case"dragenter":return mo=nh(mo,s,a,u,d,y),!0;case"mouseover":return po=nh(po,s,a,u,d,y),!0;case"pointerover":var b=y.pointerId;return th.set(b,nh(th.get(b)||null,s,a,u,d,y)),!0;case"gotpointercapture":return b=y.pointerId,eh.set(b,nh(eh.get(b)||null,s,a,u,d,y)),!0}return!1}function BT(s){var a=Mi(s.target);if(a!==null){var u=l(a);if(u!==null){if(a=u.tag,a===13){if(a=c(u),a!==null){s.blockedOn=a,Ia(s.priority,function(){if(u.tag===13){var d=Wi();d=tr(d);var y=Wa(u,d);y!==null&&Yi(y,u,d),Yg(u,d)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function yd(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=Kg(s.nativeEvent);if(u===null){u=s.nativeEvent;var d=new u.constructor(u.type,u);Ni=d,u.target.dispatchEvent(d),Ni=null}else return a=Oi(u),a!==null&&NT(a),s.blockedOn=u,!1;a.shift()}return!0}function UT(s,a,u){yd(s)&&u.delete(a)}function RC(){Qg=!1,fo!==null&&yd(fo)&&(fo=null),mo!==null&&yd(mo)&&(mo=null),po!==null&&yd(po)&&(po=null),th.forEach(UT),eh.forEach(UT)}function vd(s,a){s.blockedOn===a&&(s.blockedOn=null,Qg||(Qg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,RC)))}var bd=null;function jT(s){bd!==s&&(bd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){bd===s&&(bd=null);for(var a=0;a<s.length;a+=3){var u=s[a],d=s[a+1],y=s[a+2];if(typeof d!="function"){if(Xg(d||u)===null)continue;break}var b=Oi(u);b!==null&&(s.splice(a,3),a-=3,Xp(b,{pending:!0,data:y,method:u.method,action:d},d,y))}}))}function ih(s){function a(Y){return vd(Y,s)}fo!==null&&vd(fo,s),mo!==null&&vd(mo,s),po!==null&&vd(po,s),th.forEach(a),eh.forEach(a);for(var u=0;u<go.length;u++){var d=go[u];d.blockedOn===s&&(d.blockedOn=null)}for(;0<go.length&&(u=go[0],u.blockedOn===null);)BT(u),u.blockedOn===null&&go.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var y=u[d],b=u[d+1],R=y[Xe]||null;if(typeof b=="function")R||jT(u);else if(R){var M=null;if(b&&b.hasAttribute("formAction")){if(y=b,R=b[Xe]||null)M=R.formAction;else if(Xg(y)!==null)continue}else M=R.action;typeof M=="function"?u[d+1]=M:(u.splice(d,3),d-=3),jT(u)}}}function Jg(s){this._internalRoot=s}Td.prototype.render=Jg.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,d=Wi();kT(u,d,s,a,null,null)},Td.prototype.unmount=Jg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;kT(s.current,2,null,s,null,null),nd(),a[di]=null}};function Td(s){this._internalRoot=s}Td.prototype.unstable_scheduleHydration=function(s){if(s){var a=er();s={blockedOn:null,target:s,priority:a};for(var u=0;u<go.length&&a!==0&&a<go[u].priority;u++);go.splice(u,0,s),u===0&&BT(s)}};var HT=t.version;if(HT!=="19.1.0")throw Error(i(527,HT,"19.1.0"));vt.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=m(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var IC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:it,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ed.isDisabled&&Ed.supportsFiber)try{De=Ed.inject(IC),fe=Ed}catch{}}return rh.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,d="",y=sb,b=rb,R=ab,M=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks)),a=OT(s,1,!1,null,null,u,d,y,b,R,M,null),s[di]=a.current,Lg(s),new Jg(a)},rh.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var d=!1,y="",b=sb,R=rb,M=ab,Y=null,rt=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(Y=u.unstable_transitionCallbacks),u.formState!==void 0&&(rt=u.formState)),a=OT(s,1,!0,a,u??null,d,y,b,R,M,Y,rt),a.context=DT(null),u=a.current,d=Wi(),d=tr(d),y=Qa(d),y.callback=null,Ja(u,y,d),u=d,a.current.lanes=u,es(a,u),_r(a),s[di]=a.current,Lg(s),new Td(a)},rh.version="19.1.0",rh}var QT;function BC(){if(QT)return n_.exports;QT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),n_.exports=zC(),n_.exports}var UC=BC();const jC=Ty(UC);var ah={},JT;function HC(){if(JT)return ah;JT=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.parse=c,ah.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,l=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function c(S,I){const P=new l,k=S.length;if(k<2)return P;const O=(I==null?void 0:I.decode)||v;let B=0;do{const F=S.indexOf("=",B);if(F===-1)break;const $=S.indexOf(";",B),nt=$===-1?k:$;if(F>nt){B=S.lastIndexOf(";",F-1)+1;continue}const J=f(S,B,F),ht=m(S,F,J),V=S.slice(J,ht);if(P[V]===void 0){let D=f(S,F+1,nt),z=m(S,nt,D);const U=O(S.slice(D,z));P[V]=U}B=nt+1}while(B<k);return P}function f(S,I,P){do{const k=S.charCodeAt(I);if(k!==32&&k!==9)return I}while(++I<P);return P}function m(S,I,P){for(;I>P;){const k=S.charCodeAt(--I);if(k!==32&&k!==9)return I+1}return P}function p(S,I,P){const k=(P==null?void 0:P.encode)||encodeURIComponent;if(!n.test(S))throw new TypeError(`argument name is invalid: ${S}`);const O=k(I);if(!t.test(O))throw new TypeError(`argument val is invalid: ${I}`);let B=S+"="+O;if(!P)return B;if(P.maxAge!==void 0){if(!Number.isInteger(P.maxAge))throw new TypeError(`option maxAge is invalid: ${P.maxAge}`);B+="; Max-Age="+P.maxAge}if(P.domain){if(!e.test(P.domain))throw new TypeError(`option domain is invalid: ${P.domain}`);B+="; Domain="+P.domain}if(P.path){if(!i.test(P.path))throw new TypeError(`option path is invalid: ${P.path}`);B+="; Path="+P.path}if(P.expires){if(!E(P.expires)||!Number.isFinite(P.expires.valueOf()))throw new TypeError(`option expires is invalid: ${P.expires}`);B+="; Expires="+P.expires.toUTCString()}if(P.httpOnly&&(B+="; HttpOnly"),P.secure&&(B+="; Secure"),P.partitioned&&(B+="; Partitioned"),P.priority)switch(typeof P.priority=="string"?P.priority.toLowerCase():void 0){case"low":B+="; Priority=Low";break;case"medium":B+="; Priority=Medium";break;case"high":B+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${P.priority}`)}if(P.sameSite)switch(typeof P.sameSite=="string"?P.sameSite.toLowerCase():P.sameSite){case!0:case"strict":B+="; SameSite=Strict";break;case"lax":B+="; SameSite=Lax";break;case"none":B+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${P.sameSite}`)}return B}function v(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function E(S){return r.call(S)==="[object Date]"}return ah}HC();var tE="popstate";function FC(n={}){function t(r,l){let{pathname:c="/",search:f="",hash:m=""}=Wl(r.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),M_("",{pathname:c,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function e(r,l){let c=r.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let m=r.location.href,p=m.indexOf("#");f=p===-1?m:m.slice(0,p)}return f+"#"+(typeof l=="string"?l:Bh(l))}function i(r,l){Es(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return GC(t,e,i,n)}function Ge(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Es(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function qC(){return Math.random().toString(36).substring(2,10)}function eE(n,t){return{usr:n.state,key:n.key,idx:t}}function M_(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?Wl(t):t,state:e,key:t&&t.key||i||qC()}}function Bh({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function Wl(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function GC(n,t,e,i={}){let{window:r=document.defaultView,v5Compat:l=!1}=i,c=r.history,f="POP",m=null,p=v();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function v(){return(c.state||{idx:null}).idx}function E(){f="POP";let O=v(),B=O==null?null:O-p;p=O,m&&m({action:f,location:k.location,delta:B})}function S(O,B){f="PUSH";let F=M_(k.location,O,B);e&&e(F,O),p=v()+1;let $=eE(F,p),nt=k.createHref(F);try{c.pushState($,"",nt)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;r.location.assign(nt)}l&&m&&m({action:f,location:k.location,delta:1})}function I(O,B){f="REPLACE";let F=M_(k.location,O,B);e&&e(F,O),p=v();let $=eE(F,p),nt=k.createHref(F);c.replaceState($,"",nt),l&&m&&m({action:f,location:k.location,delta:0})}function P(O){return ZC(O)}let k={get action(){return f},get location(){return n(r,c)},listen(O){if(m)throw new Error("A history only accepts one active listener");return r.addEventListener(tE,E),m=O,()=>{r.removeEventListener(tE,E),m=null}},createHref(O){return t(r,O)},createURL:P,encodeLocation(O){let B=P(O);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:S,replace:I,go(O){return c.go(O)}};return k}function ZC(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Ge(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Bh(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function a1(n,t,e="/"){return WC(n,t,e,!1)}function WC(n,t,e,i){let r=typeof t=="string"?Wl(t):t,l=ma(r.pathname||"/",e);if(l==null)return null;let c=o1(n);YC(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let p=rP(l);f=iP(c[m],p,i)}return f}function o1(n,t=[],e=[],i=""){let r=(l,c,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(Ge(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let p=fa([i,m.relativePath]),v=e.concat(m);l.children&&l.children.length>0&&(Ge(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),o1(l.children,t,v,p)),!(l.path==null&&!l.index)&&t.push({path:p,score:eP(p,l.index),routesMeta:v})};return n.forEach((l,c)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))r(l,c);else for(let m of l1(l.path))r(l,c,m)}),t}function l1(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,r=e.endsWith("?"),l=e.replace(/\?$/,"");if(i.length===0)return r?[l,""]:[l];let c=l1(i.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),r&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function YC(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:nP(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var $C=/^:[\w-]+$/,KC=3,XC=2,QC=1,JC=10,tP=-2,nE=n=>n==="*";function eP(n,t){let e=n.split("/"),i=e.length;return e.some(nE)&&(i+=tP),t&&(i+=XC),e.filter(r=>!nE(r)).reduce((r,l)=>r+($C.test(l)?KC:l===""?QC:JC),i)}function nP(n,t){return n.length===t.length&&n.slice(0,-1).every((i,r)=>i===t[r])?n[n.length-1]-t[t.length-1]:0}function iP(n,t,e=!1){let{routesMeta:i}=n,r={},l="/",c=[];for(let f=0;f<i.length;++f){let m=i[f],p=f===i.length-1,v=l==="/"?t:t.slice(l.length)||"/",E=sm({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},v),S=m.route;if(!E&&p&&e&&!i[i.length-1].route.index&&(E=sm({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!E)return null;Object.assign(r,E.params),c.push({params:r,pathname:fa([l,E.pathname]),pathnameBase:uP(fa([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=fa([l,E.pathnameBase]))}return c}function sm(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=sP(n.path,n.caseSensitive,n.end),r=t.match(e);if(!r)return null;let l=r[0],c=l.replace(/(.)\/+$/,"$1"),f=r.slice(1);return{params:i.reduce((p,{paramName:v,isOptional:E},S)=>{if(v==="*"){let P=f[S]||"";c=l.slice(0,l.length-P.length).replace(/(.)\/+$/,"$1")}const I=f[S];return E&&!I?p[v]=void 0:p[v]=(I||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:n}}function sP(n,t=!1,e=!0){Es(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function rP(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Es(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function ma(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function aP(n,t="/"){let{pathname:e,search:i="",hash:r=""}=typeof n=="string"?Wl(n):n;return{pathname:e?e.startsWith("/")?e:oP(e,t):t,search:cP(i),hash:hP(r)}}function oP(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function a_(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lP(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function wy(n){let t=lP(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function Sy(n,t,e,i=!1){let r;typeof n=="string"?r=Wl(n):(r={...n},Ge(!r.pathname||!r.pathname.includes("?"),a_("?","pathname","search",r)),Ge(!r.pathname||!r.pathname.includes("#"),a_("#","pathname","hash",r)),Ge(!r.search||!r.search.includes("#"),a_("#","search","hash",r)));let l=n===""||r.pathname==="",c=l?"/":r.pathname,f;if(c==null)f=e;else{let E=t.length-1;if(!i&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;r.pathname=S.join("/")}f=E>=0?t[E]:"/"}let m=aP(r,f),p=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&e.endsWith("/");return!m.pathname.endsWith("/")&&(p||v)&&(m.pathname+="/"),m}var fa=n=>n.join("/").replace(/\/\/+/g,"/"),uP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),cP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,hP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function fP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var u1=["POST","PUT","PATCH","DELETE"];new Set(u1);var dP=["GET",...u1];new Set(dP);var rc=K.createContext(null);rc.displayName="DataRouter";var Vm=K.createContext(null);Vm.displayName="DataRouterState";var c1=K.createContext({isTransitioning:!1});c1.displayName="ViewTransition";var mP=K.createContext(new Map);mP.displayName="Fetchers";var pP=K.createContext(null);pP.displayName="Await";var Ks=K.createContext(null);Ks.displayName="Navigation";var sf=K.createContext(null);sf.displayName="Location";var Xs=K.createContext({outlet:null,matches:[],isDataRoute:!1});Xs.displayName="Route";var xy=K.createContext(null);xy.displayName="RouteError";function gP(n,{relative:t}={}){Ge(ac(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=K.useContext(Ks),{hash:r,pathname:l,search:c}=rf(n,{relative:t}),f=l;return e!=="/"&&(f=l==="/"?e:fa([e,l])),i.createHref({pathname:f,search:c,hash:r})}function ac(){return K.useContext(sf)!=null}function Pr(){return Ge(ac(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(sf).location}var h1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function f1(n){K.useContext(Ks).static||K.useLayoutEffect(n)}function Ho(){let{isDataRoute:n}=K.useContext(Xs);return n?PP():_P()}function _P(){Ge(ac(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(rc),{basename:t,navigator:e}=K.useContext(Ks),{matches:i}=K.useContext(Xs),{pathname:r}=Pr(),l=JSON.stringify(wy(i)),c=K.useRef(!1);return f1(()=>{c.current=!0}),K.useCallback((m,p={})=>{if(Es(c.current,h1),!c.current)return;if(typeof m=="number"){e.go(m);return}let v=Sy(m,JSON.parse(l),r,p.relative==="path");n==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:fa([t,v.pathname])),(p.replace?e.replace:e.push)(v,p.state,p)},[t,e,l,r,n])}K.createContext(null);function yP(){let{matches:n}=K.useContext(Xs),t=n[n.length-1];return t?t.params:{}}function rf(n,{relative:t}={}){let{matches:e}=K.useContext(Xs),{pathname:i}=Pr(),r=JSON.stringify(wy(e));return K.useMemo(()=>Sy(n,JSON.parse(r),i,t==="path"),[n,r,i,t])}function vP(n,t){return d1(n,t)}function d1(n,t,e,i){var B;Ge(ac(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=K.useContext(Ks),{matches:l}=K.useContext(Xs),c=l[l.length-1],f=c?c.params:{},m=c?c.pathname:"/",p=c?c.pathnameBase:"/",v=c&&c.route;{let F=v&&v.path||"";m1(m,!v||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let E=Pr(),S;if(t){let F=typeof t=="string"?Wl(t):t;Ge(p==="/"||((B=F.pathname)==null?void 0:B.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${F.pathname}" was given in the \`location\` prop.`),S=F}else S=E;let I=S.pathname||"/",P=I;if(p!=="/"){let F=p.replace(/^\//,"").split("/");P="/"+I.replace(/^\//,"").split("/").slice(F.length).join("/")}let k=a1(n,{pathname:P});Es(v||k!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Es(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=SP(k&&k.map(F=>Object.assign({},F,{params:Object.assign({},f,F.params),pathname:fa([p,r.encodeLocation?r.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?p:fa([p,r.encodeLocation?r.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),l,e,i);return t&&O?K.createElement(sf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},O):O}function bP(){let n=CP(),t=fP(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=K.createElement(K.Fragment,null,K.createElement("p",null,"💿 Hey developer 👋"),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:l},"ErrorBoundary")," or"," ",K.createElement("code",{style:l},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},t),e?K.createElement("pre",{style:r},e):null,c)}var TP=K.createElement(bP,null),EP=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?K.createElement(Xs.Provider,{value:this.props.routeContext},K.createElement(xy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wP({routeContext:n,match:t,children:e}){let i=K.useContext(rc);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),K.createElement(Xs.Provider,{value:n},e)}function SP(n,t=[],e=null,i=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let r=n,l=e==null?void 0:e.errors;if(l!=null){let m=r.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);Ge(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),r=r.slice(0,Math.min(r.length,m+1))}let c=!1,f=-1;if(e)for(let m=0;m<r.length;m++){let p=r[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=m),p.route.id){let{loaderData:v,errors:E}=e,S=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!E||E[p.route.id]===void 0);if(p.route.lazy||S){c=!0,f>=0?r=r.slice(0,f+1):r=[r[0]];break}}}return r.reduceRight((m,p,v)=>{let E,S=!1,I=null,P=null;e&&(E=l&&p.route.id?l[p.route.id]:void 0,I=p.route.errorElement||TP,c&&(f<0&&v===0?(m1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,P=null):f===v&&(S=!0,P=p.route.hydrateFallbackElement||null)));let k=t.concat(r.slice(0,v+1)),O=()=>{let B;return E?B=I:S?B=P:p.route.Component?B=K.createElement(p.route.Component,null):p.route.element?B=p.route.element:B=m,K.createElement(wP,{match:p,routeContext:{outlet:m,matches:k,isDataRoute:e!=null},children:B})};return e&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?K.createElement(EP,{location:e.location,revalidation:e.revalidation,component:I,error:E,children:O(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):O()},null)}function Ay(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xP(n){let t=K.useContext(rc);return Ge(t,Ay(n)),t}function AP(n){let t=K.useContext(Vm);return Ge(t,Ay(n)),t}function RP(n){let t=K.useContext(Xs);return Ge(t,Ay(n)),t}function Ry(n){let t=RP(n),e=t.matches[t.matches.length-1];return Ge(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function IP(){return Ry("useRouteId")}function CP(){var i;let n=K.useContext(xy),t=AP("useRouteError"),e=Ry("useRouteError");return n!==void 0?n:(i=t.errors)==null?void 0:i[e]}function PP(){let{router:n}=xP("useNavigate"),t=Ry("useNavigate"),e=K.useRef(!1);return f1(()=>{e.current=!0}),K.useCallback(async(r,l={})=>{Es(e.current,h1),e.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:t,...l}))},[n,t])}var iE={};function m1(n,t,e){!t&&!iE[n]&&(iE[n]=!0,Es(!1,e))}K.memo(MP);function MP({routes:n,future:t,state:e}){return d1(n,void 0,e,t)}function OP({to:n,replace:t,state:e,relative:i}){Ge(ac(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=K.useContext(Ks);Es(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=K.useContext(Xs),{pathname:c}=Pr(),f=Ho(),m=Sy(n,wy(l),c,i==="path"),p=JSON.stringify(m);return K.useEffect(()=>{f(JSON.parse(p),{replace:t,state:e,relative:i})},[f,p,i,t,e]),null}function ra(n){Ge(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function DP({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:r,static:l=!1}){Ge(!ac(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=K.useMemo(()=>({basename:c,navigator:r,static:l,future:{}}),[c,r,l]);typeof e=="string"&&(e=Wl(e));let{pathname:m="/",search:p="",hash:v="",state:E=null,key:S="default"}=e,I=K.useMemo(()=>{let P=ma(m,c);return P==null?null:{location:{pathname:P,search:p,hash:v,state:E,key:S},navigationType:i}},[c,m,p,v,E,S,i]);return Es(I!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:K.createElement(Ks.Provider,{value:f},K.createElement(sf.Provider,{children:t,value:I}))}function kP({children:n,location:t}){return vP(O_(n),t)}function O_(n,t=[]){let e=[];return K.Children.forEach(n,(i,r)=>{if(!K.isValidElement(i))return;let l=[...t,r];if(i.type===K.Fragment){e.push.apply(e,O_(i.props.children,l));return}Ge(i.type===ra,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ge(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=O_(i.props.children,l)),e.push(c)}),e}var qd="get",Gd="application/x-www-form-urlencoded";function zm(n){return n!=null&&typeof n.tagName=="string"}function LP(n){return zm(n)&&n.tagName.toLowerCase()==="button"}function NP(n){return zm(n)&&n.tagName.toLowerCase()==="form"}function VP(n){return zm(n)&&n.tagName.toLowerCase()==="input"}function zP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function BP(n,t){return n.button===0&&(!t||t==="_self")&&!zP(n)}var wd=null;function UP(){if(wd===null)try{new FormData(document.createElement("form"),0),wd=!1}catch{wd=!0}return wd}var jP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function o_(n){return n!=null&&!jP.has(n)?(Es(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gd}"`),null):n}function HP(n,t){let e,i,r,l,c;if(NP(n)){let f=n.getAttribute("action");i=f?ma(f,t):null,e=n.getAttribute("method")||qd,r=o_(n.getAttribute("enctype"))||Gd,l=new FormData(n)}else if(LP(n)||VP(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?ma(m,t):null,e=n.getAttribute("formmethod")||f.getAttribute("method")||qd,r=o_(n.getAttribute("formenctype"))||o_(f.getAttribute("enctype"))||Gd,l=new FormData(f,n),!UP()){let{name:p,type:v,value:E}=n;if(v==="image"){let S=p?`${p}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else p&&l.append(p,E)}}else{if(zm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=qd,i=null,r=Gd,c=n}return l&&r==="text/plain"&&(c=l,l=void 0),{action:i,method:e.toLowerCase(),encType:r,formData:l,body:c}}function Iy(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}async function FP(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qP(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function GP(n,t,e){let i=await Promise.all(n.map(async r=>{let l=t.routes[r.route.id];if(l){let c=await FP(l,e);return c.links?c.links():[]}return[]}));return $P(i.flat(1).filter(qP).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function sE(n,t,e,i,r,l){let c=(m,p)=>e[p]?m.route.id!==e[p].route.id:!0,f=(m,p)=>{var v;return e[p].pathname!==m.pathname||((v=e[p].route.path)==null?void 0:v.endsWith("*"))&&e[p].params["*"]!==m.params["*"]};return l==="assets"?t.filter((m,p)=>c(m,p)||f(m,p)):l==="data"?t.filter((m,p)=>{var E;let v=i.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(c(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((E=e[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function ZP(n,t,{includeHydrateFallback:e}={}){return WP(n.map(i=>{let r=t.routes[i.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),e&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function WP(n){return[...new Set(n)]}function YP(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function $P(n,t){let e=new Set;return new Set(t),n.reduce((i,r)=>{let l=JSON.stringify(YP(r));return e.has(l)||(e.add(l),i.push({key:l,link:r})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var KP=new Set([100,101,204,205]);function XP(n,t){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":t&&ma(e.pathname,t)==="/"?e.pathname=`${t.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function p1(){let n=K.useContext(rc);return Iy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function QP(){let n=K.useContext(Vm);return Iy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Cy=K.createContext(void 0);Cy.displayName="FrameworkContext";function g1(){let n=K.useContext(Cy);return Iy(n,"You must render this element inside a <HydratedRouter> element"),n}function JP(n,t){let e=K.useContext(Cy),[i,r]=K.useState(!1),[l,c]=K.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:v,onTouchStart:E}=t,S=K.useRef(null);K.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let k=B=>{B.forEach(F=>{c(F.isIntersecting)})},O=new IntersectionObserver(k,{threshold:.5});return S.current&&O.observe(S.current),()=>{O.disconnect()}}},[n]),K.useEffect(()=>{if(i){let k=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(k)}}},[i]);let I=()=>{r(!0)},P=()=>{r(!1),c(!1)};return e?n!=="intent"?[l,S,{}]:[l,S,{onFocus:oh(f,I),onBlur:oh(m,P),onMouseEnter:oh(p,I),onMouseLeave:oh(v,P),onTouchStart:oh(E,I)}]:[!1,S,{}]}function oh(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function t2({page:n,...t}){let{router:e}=p1(),i=K.useMemo(()=>a1(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?K.createElement(n2,{page:n,matches:i,...t}):null}function e2(n){let{manifest:t,routeModules:e}=g1(),[i,r]=K.useState([]);return K.useEffect(()=>{let l=!1;return GP(n,t,e).then(c=>{l||r(c)}),()=>{l=!0}},[n,t,e]),i}function n2({page:n,matches:t,...e}){let i=Pr(),{manifest:r,routeModules:l}=g1(),{basename:c}=p1(),{loaderData:f,matches:m}=QP(),p=K.useMemo(()=>sE(n,t,m,r,i,"data"),[n,t,m,r,i]),v=K.useMemo(()=>sE(n,t,m,r,i,"assets"),[n,t,m,r,i]),E=K.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let P=new Set,k=!1;if(t.forEach(B=>{var $;let F=r.routes[B.route.id];!F||!F.hasLoader||(!p.some(nt=>nt.route.id===B.route.id)&&B.route.id in f&&(($=l[B.route.id])!=null&&$.shouldRevalidate)||F.hasClientLoader?k=!0:P.add(B.route.id))}),P.size===0)return[];let O=XP(n,c);return k&&P.size>0&&O.searchParams.set("_routes",t.filter(B=>P.has(B.route.id)).map(B=>B.route.id).join(",")),[O.pathname+O.search]},[c,f,i,r,p,t,n,l]),S=K.useMemo(()=>ZP(v,r),[v,r]),I=e2(v);return K.createElement(K.Fragment,null,E.map(P=>K.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...e})),S.map(P=>K.createElement("link",{key:P,rel:"modulepreload",href:P,...e})),I.map(({key:P,link:k})=>K.createElement("link",{key:P,...k})))}function i2(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var _1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_1&&(window.__reactRouterVersion="7.6.2")}catch{}function s2({basename:n,children:t,window:e}){let i=K.useRef();i.current==null&&(i.current=FC({window:e,v5Compat:!0}));let r=i.current,[l,c]=K.useState({action:r.action,location:r.location}),f=K.useCallback(m=>{K.startTransition(()=>c(m))},[c]);return K.useLayoutEffect(()=>r.listen(f),[r,f]),K.createElement(DP,{basename:n,children:t,location:l.location,navigationType:l.action,navigator:r})}var y1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ua=K.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:r,reloadDocument:l,replace:c,state:f,target:m,to:p,preventScrollReset:v,viewTransition:E,...S},I){let{basename:P}=K.useContext(Ks),k=typeof p=="string"&&y1.test(p),O,B=!1;if(typeof p=="string"&&k&&(O=p,_1))try{let z=new URL(window.location.href),U=p.startsWith("//")?new URL(z.protocol+p):new URL(p),H=ma(U.pathname,P);U.origin===z.origin&&H!=null?p=H+U.search+U.hash:B=!0}catch{Es(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=gP(p,{relative:r}),[$,nt,J]=JP(i,S),ht=l2(p,{replace:c,state:f,target:m,preventScrollReset:v,relative:r,viewTransition:E});function V(z){t&&t(z),z.defaultPrevented||ht(z)}let D=K.createElement("a",{...S,...J,href:O||F,onClick:B||l?t:V,ref:i2(I,nt),target:m,"data-discover":!k&&e==="render"?"true":void 0});return $&&!k?K.createElement(K.Fragment,null,D,K.createElement(t2,{page:F})):D});ua.displayName="Link";var r2=K.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:r=!1,style:l,to:c,viewTransition:f,children:m,...p},v){let E=rf(c,{relative:p.relative}),S=Pr(),I=K.useContext(Vm),{navigator:P,basename:k}=K.useContext(Ks),O=I!=null&&d2(E)&&f===!0,B=P.encodeLocation?P.encodeLocation(E).pathname:E.pathname,F=S.pathname,$=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;e||(F=F.toLowerCase(),$=$?$.toLowerCase():null,B=B.toLowerCase()),$&&k&&($=ma($,k)||$);const nt=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let J=F===B||!r&&F.startsWith(B)&&F.charAt(nt)==="/",ht=$!=null&&($===B||!r&&$.startsWith(B)&&$.charAt(B.length)==="/"),V={isActive:J,isPending:ht,isTransitioning:O},D=J?t:void 0,z;typeof i=="function"?z=i(V):z=[i,J?"active":null,ht?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(V):l;return K.createElement(ua,{...p,"aria-current":D,className:z,ref:v,style:U,to:c,viewTransition:f},typeof m=="function"?m(V):m)});r2.displayName="NavLink";var a2=K.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:r,state:l,method:c=qd,action:f,onSubmit:m,relative:p,preventScrollReset:v,viewTransition:E,...S},I)=>{let P=h2(),k=f2(f,{relative:p}),O=c.toLowerCase()==="get"?"get":"post",B=typeof f=="string"&&y1.test(f),F=$=>{if(m&&m($),$.defaultPrevented)return;$.preventDefault();let nt=$.nativeEvent.submitter,J=(nt==null?void 0:nt.getAttribute("formmethod"))||c;P(nt||$.currentTarget,{fetcherKey:t,method:J,navigate:e,replace:r,state:l,relative:p,preventScrollReset:v,viewTransition:E})};return K.createElement("form",{ref:I,method:O,action:k,onSubmit:i?m:F,...S,"data-discover":!B&&n==="render"?"true":void 0})});a2.displayName="Form";function o2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function v1(n){let t=K.useContext(rc);return Ge(t,o2(n)),t}function l2(n,{target:t,replace:e,state:i,preventScrollReset:r,relative:l,viewTransition:c}={}){let f=Ho(),m=Pr(),p=rf(n,{relative:l});return K.useCallback(v=>{if(BP(v,t)){v.preventDefault();let E=e!==void 0?e:Bh(m)===Bh(p);f(n,{replace:E,state:i,preventScrollReset:r,relative:l,viewTransition:c})}},[m,f,p,e,i,t,n,r,l,c])}var u2=0,c2=()=>`__${String(++u2)}__`;function h2(){let{router:n}=v1("useSubmit"),{basename:t}=K.useContext(Ks),e=IP();return K.useCallback(async(i,r={})=>{let{action:l,method:c,encType:f,formData:m,body:p}=HP(i,t);if(r.navigate===!1){let v=r.fetcherKey||c2();await n.fetch(v,e,r.action||l,{preventScrollReset:r.preventScrollReset,formData:m,body:p,formMethod:r.method||c,formEncType:r.encType||f,flushSync:r.flushSync})}else await n.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:m,body:p,formMethod:r.method||c,formEncType:r.encType||f,replace:r.replace,state:r.state,fromRouteId:e,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,t,e])}function f2(n,{relative:t}={}){let{basename:e}=K.useContext(Ks),i=K.useContext(Xs);Ge(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),l={...rf(n||".",{relative:t})},c=Pr();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(v=>v==="")){f.delete("index"),m.filter(E=>E).forEach(E=>f.append("index",E));let v=f.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:fa([e,l.pathname])),Bh(l)}function d2(n,t={}){let e=K.useContext(c1);Ge(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=v1("useViewTransitionState"),r=rf(n,{relative:t.relative});if(!e.isTransitioning)return!1;let l=ma(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=ma(e.nextLocation.pathname,i)||e.nextLocation.pathname;return sm(r.pathname,c)!=null||sm(r.pathname,l)!=null}[...KP];var m2=r1();const p2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAclBMVEX///8AAAAgICDq6urCwsJZWVny8vL6+vrV1dX39/eNjY2srKwODg6BgYF0dHRGRkbj4+O1tbWlpaW7u7s9PT3MzMzb29tUVFRnZ2dgYGAmJiY4ODiIiIivr68yMjLKyspOTk4YGBgjIyN2dnaZmZkrKyvJgXKrAAALw0lEQVR4nOVd6WKySgy1giCKirjXpdLq+7/i/dRa5SQzLCaDes9PW4HjMNknabW0EUbzST/tDTvT3Wc7jj/i7LgeLVbDTTqeeVGofn9NBMlks5x+WJGNlj0/CZp+1BqYj4ejzE7uDp+LwaTb9CNXwDztxKXJ3RCvtl7Tj14CwWRQg9wfvjf+U7+x3nb1CL1frMZPSjIcdwTonREv/abZUHR/pOj94mfWNKV7BGmBTqiF9TZqmtgvvI0CvTPavWcQrslQi98Zy3nD/LoSwtOOfZOmQFdMelrR2Dp6uu/nPYZN7Mew54zfCQPnVkC//MPFu9FqkPpfs+488YIwCrwk6X7528Nyv87KX6bvlF+3pP77Xm78xLP4gF7i95brchfbO9yOpRTg6OAH5fzbMPAPozKX3CjzuqJb7BodB35l533W2xVz/NIgBIgKvaPFNql57WRbqH6G6pbc19H+BKP0McHu9Rf2GxyVDYCD9e7xoe7q3cMr0EOpwD1MCKy/734idiPf+rYu1HRjN7Pcdij79sxtBlOsJHBSyz0V3JzEJtIO4rf7h6X5fgMdARdZNuRQ/G6B2fD40TOLA/M6joR/1cSoJJYS4tOMuVHmHEVvbDRj2vrxIrMGFry3b7pHT+4eFhhF3FjqDlvDDTq6L+gNiUkPC1E0/YRiv2AJmNxREafRQHDkNrDg7dUoGn49FZVrhcEkfthK5QlmTYTcZ7xAf5DimL3oqpnkUMC/qdtHrskTdKMjOPBm3AOJqhl7QbdBrzwm7BPVdmsS9nLNZr263CPFNRVzxJlL7aazQQknb471BAMX4BsJP28NRFysdl3nSpyTvXiGAp+Qy3ctq1+HU7CdZyD4DxzFymrxiyOo8bS1wDmNFQVqwOznlc7T1gJDMasmbRh35ZkItkLmARdVLsD4E1ORPTjr9/oiCjVkJH0Fb4BRq7FE4Me/vPuxSD1Qmz5k6TAqp+ol3PmbVSlh2Xr0IY9ll4HRhBIB7XtHTMK2ZazmQblvMopCIiMR5a4o8dIzvmu5laDfE3GX8tJLJIFEnam4zNdoCnsv8TSgwmSsB2rclEiEz+nvIuPR58XXUeSaQVbjPaWRAiGHMC/d2zIXpdJmWvQVunulomoqDBkHoUBMB+QLe6FHUWLIeLF244tms8R8eiWGVPFbJT/9d7mwkxJDJh5oWxRizVSy1+3QYkg9KUt+mGoKweySGkMaEjRrDJKqlyxdUWNITRujOUGcJhm1/As9htSRMi0iUfaiZSuKDIneN8QjyC6UjTwpMqTbi5cf5N9kK1Y1GRJhw4pTogtLupNlocmwRc4kcTqRSCThJKEqQ7I8jBcVoUCSzhKqMqTmJl0fUlIiXaumyzDCx6eqHOvWhHehNkOyyYifSFSKeDWQMkOyE1HrozCSr25UZki8hh/4O/4C8qc3tBkSmzPvCWNtnkIiTZshMTrzVWlozyicNFZniHUauVUi6UL5++szbCGJe7sGIwEaNUH6DDHudl8shbFjjZISfYZof9/5UBhDFIzO3KDPkEQWb5YbSlKVui4HDDF1fUuZYTJGpe7JAUO0a26W53f+DzpVJQ4YkgKL6+dI/aGCTSNcMEQHaW74XKcE3wVDlKZXFwp0xU7l5k4YQpLyb7+BLaBUAuyEIbj6v0lvNMqVSmSdMES9d9mIaLHq3NsNwxC4XPwLWFmtIlknDNGsuTjyoES0zoq4YQjW93m5gs/8h1pNqNwwhI14LslEHaJ1WsQNQ3QiTrodWK+1Kp3dMAzBAj0Z3xBorFESXg5uGGI8ZkM/Ujvy44gh+EmnBQP5qtbtzhFD2HTTfy9ulv9I7eSrI4YoOENMaWRqp34cMfTAyo7QOax1vKYUHDEMoY/PHFMye607u2KIcmWCoVI1ZeGMIXi7fYxP6Z1gdsUQHIkU9YdOjOYEVwxhyXqYdtNr/po3p77V7gMKcYivbYkyqCjtHNuVAfbix3f1Sxw7aYniAjhM0UHvsLgQvEI/QQUUh+NBOUxRuBaaNG4bQlIU2s0QdtphDUYRQ2MjF2cokhRQnveJEcYio61Os3VZFB2LAcO03cryHxR4+HwPArcoiHaCGRrjohQIq2bFzAXVDlTEWGZSEMNoWs6cUCBrMGSKa1jwlr7AGoI7SN7SAknzAvsQ3tIMq8CLtMXzy1KQNMcWxIOLqr2eXx+Ctli3wCUutNqaljWFNg0wHLWgU0hxau3Z7VKw2hZ4aujtfIvV/8A/hH2l16TXlY8PdRcbdPrFy7v/4IohZBBTFBx6HUxcMYQ8zBiz+HqNoFwxhFLhGTqMO7VGSa4YgkvvEUP15fMWWZ5QRJyNN8s9Zf/eSTBq3ix/eJIrTFpYBY4YMkl7Ji2sgmby+CdDHdTF94vXYoAoPW2696+nwR4vb1UT9XleL4jrv1Vd2+VcBfhPb1WbeHEk8EiQkqhxwxC4XE5cYKcBpY3ohCFGO3/DThAhVHIRnTAEfX+NPEKoRrTfxw1OGELk8Gq+4HGh9zlvca27wI34Pmdm/lxB+FzlcJ4ThrDfbgE9bLnwLmfXbn4SnrhQCSk6YIjh+JveQ3NVxaxxwBAP5905EXgOWEOa6jPEl/Q+MooySMP61meIabH7lgPIvlSj04rQZ4gkcp4u9q2TG/T3B3WGmLzNx2PQv9jLP4A6Q1ylvAeBUVOR5s95aDMkzdjg7+/fn4Z0dxG3a5QZkpZtJF+Pkz/ETwcpM0TLkx6rIMMCXrzXF3WQSAdhaVdflyFq+zazQKRTufBOVGVI1ofbZKQdGAqjB6HKkLTcY5eHNBGWtb81GRJdyOeXiLyVTUNpMiTNkg3leaQPv2h3BUWGZF7F3vCPROsrNvsVvTSZqWK0OcliS6p9PYZElZu3F52g85r9vC1FskScCjZUUmNIRj/ZvAbaV19uJK4WQ1rvajVVaAXw681GsJubxBOWiywqMaQzVSofqHizGSXUT3y1OTP7wu9QjVFx7J4JKrOC6PGPEs1z6bwnmapajXlPdBOWKlqjv8vrzOwq18aLmQ0o0QxTfu4aM/645LwKOjBIRNpIz85jVqJsDJSbfyih+GXnHzITp0vPP+TmA4pId8kZlhFziq5CoJ4ZBjx6sjmkzGTnStKLG9X6JOOOL2CGHlcrsGDG7j3RwGOWYNUhhtyU9uehyM10rjzYiBkJ/CxDj0OOYA0HgYwOOlF8hr3IzXOulw3EqSUnTKXzNTXATHOu6cUGjOL/iNXO1JSEx8xyrqDq80jYo+ny+e8q4BsC1P7ZOYGqUqdRGvwx6wdsCP70vVrzyELwR+UfigeSKVBn7LVOndgRMHr+UYK8Wvwnb5Q6Ylsxy9hnedgR4ykqdq4zgfEGRAgaeyjs1Q6bsvA4LfghFA0xtYlQmfNhAB2JK0jQfPmFK+2fcIboCWI19yaKih0Y7mFspyJ4usfYWugoOoyVvzdnpp0Qi1pXCWejntGRn9CWuzHn4lx+XOE9Ehlk2T/86Ol/j8wX/cNa/q4kP3xDT8enipjA7RUqB7INKveMgbxY9Wz9mpRE3Jet0ddQdj92La/MR6bmwQVc/OAPHTnhPaFJpTssNA1/g5V6RU/ClEsO9qZwyiZx16g2fn/f/mMkvdQstM/Q18CRbYOc0dnWFTvJ1roNThi4CIUxeRvErlfZgQz9QcHr8SFtxlhAE+EMRgc/KBdeDQP/UPBuXqDWd4VibpV1N6yXPT+xbMzQS/zNEpvVGTB1G+Wr0FswW++Xh63/1U0SL4jCwEvm3dmXnw5Wo12FVpou3dEzAotJpYBeE/kEr1CqimHoNmRyw9zo2oii02SYvVtS5DyAVbNpBPV1HDadCTrB65niDA9j09T+Q0RbLtf4KKZpM8kDA2bmeEM9/DS9/Rj4S7FW2J3xM6TTGQRjPjtUDavts+w+FoG/KWlm8hhMnmrzGeBtV3Xe17iT6sZeZdGdDBafxax+kY2G41did0WQ+L3lKLOTmy43k+QV3kwzwsibjdPNcLUYrY9Z/BHH7c/dtDPspf3JPNKXmf8B8ByKAxrnKJYAAAAASUVORK5CYII=",g2="/TapasMadrid/assets/settings-Bbu9V-Hx.png",oc=()=>Z.jsx(Z.Fragment,{children:Z.jsxs("div",{className:"app-header",children:[Z.jsx("h1",{children:"🍻 Tapas Radar"}),Z.jsx("nav",{children:Z.jsxs("ul",{children:[Z.jsx("li",{children:Z.jsx(ua,{to:"/",children:"Inicio"})}),Z.jsx("li",{children:Z.jsx(ua,{to:"/mapa",children:"Mapa"})}),Z.jsx("li",{children:Z.jsx(ua,{to:"/settings",children:"Ajustes"})}),Z.jsx("li",{children:Z.jsx(ua,{to:"/about",children:"Sobre nosotros"})}),Z.jsx("li",{children:Z.jsx(ua,{to:"/abonnement",children:"Abonnement"})})]})})]})}),_2=()=>{const n=Ho(),t=()=>{n("/mapa")},e=()=>{n("/añadir")},i=()=>{n("/settings")};return Z.jsxs("div",{className:"home",children:[Z.jsx(oc,{}),Z.jsx("p",{className:"description",children:"Descubre los bares con más ambiente de Madrid en tiempo real. Tapas, cerveza y buena vibra — todo en un vistazo."}),Z.jsx("button",{className:"start-button",onClick:t,children:"Empezar"}),Z.jsx("br",{}),Z.jsx("button",{className:"start-button",onClick:e,children:Z.jsx("img",{src:p2,alt:"icon +"})}),Z.jsx("button",{className:"goSetting",onClick:i,children:Z.jsx("img",{src:g2,alt:"settings"})})]})};function b1(n,t){const e=K.useRef(t);K.useEffect(function(){t!==e.current&&n.attributionControl!=null&&(e.current!=null&&n.attributionControl.removeAttribution(e.current),t!=null&&n.attributionControl.addAttribution(t)),e.current=t},[n,t])}const y2=1;function v2(n){return Object.freeze({__version:y2,map:n})}function b2(n,t){return Object.freeze({...n,...t})}const Py=K.createContext(null);function T1(){const n=K.use(Py);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function T2(n){function t(e,i){const{instance:r,context:l}=n(e).current;K.useImperativeHandle(i,()=>r);const{children:c}=e;return c==null?null:ge.createElement(Py,{value:l},c)}return K.forwardRef(t)}function E2(n){function t(e,i){const[r,l]=K.useState(!1),{instance:c}=n(e,l).current;K.useImperativeHandle(i,()=>c),K.useEffect(function(){r&&c.update()},[c,r,e.children]);const f=c._contentNode;return f?m2.createPortal(e.children,f):null}return K.forwardRef(t)}function w2(n){function t(e,i){const{instance:r}=n(e).current;return K.useImperativeHandle(i,()=>r),null}return K.forwardRef(t)}function E1(n,t){const e=K.useRef(void 0);K.useEffect(function(){return t!=null&&n.instance.on(t),e.current=t,function(){e.current!=null&&n.instance.off(e.current),e.current=null}},[n,t])}function My(n,t){const e=n.pane??t.pane;return e?{...n,pane:e}:n}function S2(n,t){return function(i,r){const l=T1(),c=n(My(i,l),l);return b1(l.map,i.attribution),E1(c.current,i.eventHandlers),t(c.current,l,i,r),c}}var dh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var x2=dh.exports,rE;function A2(){return rE||(rE=1,function(n,t){(function(e,i){i(t)})(x2,function(e){var i="1.9.4";function r(o){var h,_,T,x;for(_=1,T=arguments.length;_<T;_++){x=arguments[_];for(h in x)o[h]=x[h]}return o}var l=Object.create||function(){function o(){}return function(h){return o.prototype=h,new o}}();function c(o,h){var _=Array.prototype.slice;if(o.bind)return o.bind.apply(o,_.call(arguments,1));var T=_.call(arguments,2);return function(){return o.apply(h,T.length?T.concat(_.call(arguments)):arguments)}}var f=0;function m(o){return"_leaflet_id"in o||(o._leaflet_id=++f),o._leaflet_id}function p(o,h,_){var T,x,C,W;return W=function(){T=!1,x&&(C.apply(_,x),x=!1)},C=function(){T?x=arguments:(o.apply(_,arguments),setTimeout(W,h),T=!0)},C}function v(o,h,_){var T=h[1],x=h[0],C=T-x;return o===T&&_?o:((o-x)%C+C)%C+x}function E(){return!1}function S(o,h){if(h===!1)return o;var _=Math.pow(10,h===void 0?6:h);return Math.round(o*_)/_}function I(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function P(o){return I(o).split(/\s+/)}function k(o,h){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?l(o.options):{});for(var _ in h)o.options[_]=h[_];return o.options}function O(o,h,_){var T=[];for(var x in o)T.push(encodeURIComponent(_?x.toUpperCase():x)+"="+encodeURIComponent(o[x]));return(!h||h.indexOf("?")===-1?"?":"&")+T.join("&")}var B=/\{ *([\w_ -]+) *\}/g;function F(o,h){return o.replace(B,function(_,T){var x=h[T];if(x===void 0)throw new Error("No value provided for variable "+_);return typeof x=="function"&&(x=x(h)),x})}var $=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function nt(o,h){for(var _=0;_<o.length;_++)if(o[_]===h)return _;return-1}var J="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ht(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var V=0;function D(o){var h=+new Date,_=Math.max(0,16-(h-V));return V=h+_,window.setTimeout(o,_)}var z=window.requestAnimationFrame||ht("RequestAnimationFrame")||D,U=window.cancelAnimationFrame||ht("CancelAnimationFrame")||ht("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function H(o,h,_){if(_&&z===D)o.call(h);else return z.call(window,c(o,h))}function G(o){o&&U.call(window,o)}var q={__proto__:null,extend:r,create:l,bind:c,get lastId(){return f},stamp:m,throttle:p,wrapNum:v,falseFn:E,formatNum:S,trim:I,splitWords:P,setOptions:k,getParamString:O,template:F,isArray:$,indexOf:nt,emptyImageUrl:J,requestFn:z,cancelFn:U,requestAnimFrame:H,cancelAnimFrame:G};function Yt(){}Yt.extend=function(o){var h=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=h.__super__=this.prototype,T=l(_);T.constructor=h,h.prototype=T;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(h[x]=this[x]);return o.statics&&r(h,o.statics),o.includes&&(kt(o.includes),r.apply(null,[T].concat(o.includes))),r(T,o),delete T.statics,delete T.includes,T.options&&(T.options=_.options?l(_.options):{},r(T.options,o.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,W=T._initHooks.length;C<W;C++)T._initHooks[C].call(this)}},h},Yt.include=function(o){var h=this.prototype.options;return r(this.prototype,o),o.options&&(this.prototype.options=h,this.mergeOptions(o.options)),this},Yt.mergeOptions=function(o){return r(this.prototype.options,o),this},Yt.addInitHook=function(o){var h=Array.prototype.slice.call(arguments,1),_=typeof o=="function"?o:function(){this[o].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function kt(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=$(o)?o:[o];for(var h=0;h<o.length;h++)o[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var it={on:function(o,h,_){if(typeof o=="object")for(var T in o)this._on(T,o[T],h);else{o=P(o);for(var x=0,C=o.length;x<C;x++)this._on(o[x],h,_)}return this},off:function(o,h,_){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var T in o)this._off(T,o[T],h);else{o=P(o);for(var x=arguments.length===1,C=0,W=o.length;C<W;C++)x?this._off(o[C]):this._off(o[C],h,_)}return this},_on:function(o,h,_,T){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(o,h,_)===!1){_===this&&(_=void 0);var x={fn:h,ctx:_};T&&(x.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(x)}},_off:function(o,h,_){var T,x,C;if(this._events&&(T=this._events[o],!!T)){if(arguments.length===1){if(this._firingCount)for(x=0,C=T.length;x<C;x++)T[x].fn=E;delete this._events[o];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var W=this._listens(o,h,_);if(W!==!1){var et=T[W];this._firingCount&&(et.fn=E,this._events[o]=T=T.slice()),T.splice(W,1)}}},fire:function(o,h,_){if(!this.listens(o,_))return this;var T=r({},h,{type:o,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var x=this._events[o];if(x){this._firingCount=this._firingCount+1||1;for(var C=0,W=x.length;C<W;C++){var et=x[C],lt=et.fn;et.once&&this.off(o,lt,et.ctx),lt.call(et.ctx||this,T)}this._firingCount--}}return _&&this._propagateEvent(T),this},listens:function(o,h,_,T){typeof o!="string"&&console.warn('"string" type argument expected');var x=h;typeof h!="function"&&(T=!!h,x=void 0,_=void 0);var C=this._events&&this._events[o];if(C&&C.length&&this._listens(o,x,_)!==!1)return!0;if(T){for(var W in this._eventParents)if(this._eventParents[W].listens(o,h,_,T))return!0}return!1},_listens:function(o,h,_){if(!this._events)return!1;var T=this._events[o]||[];if(!h)return!!T.length;_===this&&(_=void 0);for(var x=0,C=T.length;x<C;x++)if(T[x].fn===h&&T[x].ctx===_)return x;return!1},once:function(o,h,_){if(typeof o=="object")for(var T in o)this._on(T,o[T],h,!0);else{o=P(o);for(var x=0,C=o.length;x<C;x++)this._on(o[x],h,_,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[m(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[m(o)],this},_propagateEvent:function(o){for(var h in this._eventParents)this._eventParents[h].fire(o.type,r({layer:o.target,propagatedFrom:o.target},o),!0)}};it.addEventListener=it.on,it.removeEventListener=it.clearAllEventListeners=it.off,it.addOneTimeEventListener=it.once,it.fireEvent=it.fire,it.hasEventListeners=it.listens;var vt=Yt.extend(it);function mt(o,h,_){this.x=_?Math.round(o):o,this.y=_?Math.round(h):h}var Vt=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};mt.prototype={clone:function(){return new mt(this.x,this.y)},add:function(o){return this.clone()._add(j(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(j(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new mt(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new mt(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Vt(this.x),this.y=Vt(this.y),this},distanceTo:function(o){o=j(o);var h=o.x-this.x,_=o.y-this.y;return Math.sqrt(h*h+_*_)},equals:function(o){return o=j(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=j(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function j(o,h,_){return o instanceof mt?o:$(o)?new mt(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new mt(o.x,o.y):new mt(o,h,_)}function ct(o,h){if(o)for(var _=h?[o,h]:o,T=0,x=_.length;T<x;T++)this.extend(_[T])}ct.prototype={extend:function(o){var h,_;if(!o)return this;if(o instanceof mt||typeof o[0]=="number"||"x"in o)h=_=j(o);else if(o=Tt(o),h=o.min,_=o.max,!h||!_)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=_.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(o){return j((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return j(this.min.x,this.max.y)},getTopRight:function(){return j(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var h,_;return typeof o[0]=="number"||o instanceof mt?o=j(o):o=Tt(o),o instanceof ct?(h=o.min,_=o.max):h=_=o,h.x>=this.min.x&&_.x<=this.max.x&&h.y>=this.min.y&&_.y<=this.max.y},intersects:function(o){o=Tt(o);var h=this.min,_=this.max,T=o.min,x=o.max,C=x.x>=h.x&&T.x<=_.x,W=x.y>=h.y&&T.y<=_.y;return C&&W},overlaps:function(o){o=Tt(o);var h=this.min,_=this.max,T=o.min,x=o.max,C=x.x>h.x&&T.x<_.x,W=x.y>h.y&&T.y<_.y;return C&&W},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var h=this.min,_=this.max,T=Math.abs(h.x-_.x)*o,x=Math.abs(h.y-_.y)*o;return Tt(j(h.x-T,h.y-x),j(_.x+T,_.y+x))},equals:function(o){return o?(o=Tt(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function Tt(o,h){return!o||o instanceof ct?o:new ct(o,h)}function yt(o,h){if(o)for(var _=h?[o,h]:o,T=0,x=_.length;T<x;T++)this.extend(_[T])}yt.prototype={extend:function(o){var h=this._southWest,_=this._northEast,T,x;if(o instanceof At)T=o,x=o;else if(o instanceof yt){if(T=o._southWest,x=o._northEast,!T||!x)return this}else return o?this.extend(Et(o)||St(o)):this;return!h&&!_?(this._southWest=new At(T.lat,T.lng),this._northEast=new At(x.lat,x.lng)):(h.lat=Math.min(T.lat,h.lat),h.lng=Math.min(T.lng,h.lng),_.lat=Math.max(x.lat,_.lat),_.lng=Math.max(x.lng,_.lng)),this},pad:function(o){var h=this._southWest,_=this._northEast,T=Math.abs(h.lat-_.lat)*o,x=Math.abs(h.lng-_.lng)*o;return new yt(new At(h.lat-T,h.lng-x),new At(_.lat+T,_.lng+x))},getCenter:function(){return new At((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new At(this.getNorth(),this.getWest())},getSouthEast:function(){return new At(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof At||"lat"in o?o=Et(o):o=St(o);var h=this._southWest,_=this._northEast,T,x;return o instanceof yt?(T=o.getSouthWest(),x=o.getNorthEast()):T=x=o,T.lat>=h.lat&&x.lat<=_.lat&&T.lng>=h.lng&&x.lng<=_.lng},intersects:function(o){o=St(o);var h=this._southWest,_=this._northEast,T=o.getSouthWest(),x=o.getNorthEast(),C=x.lat>=h.lat&&T.lat<=_.lat,W=x.lng>=h.lng&&T.lng<=_.lng;return C&&W},overlaps:function(o){o=St(o);var h=this._southWest,_=this._northEast,T=o.getSouthWest(),x=o.getNorthEast(),C=x.lat>h.lat&&T.lat<_.lat,W=x.lng>h.lng&&T.lng<_.lng;return C&&W},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,h){return o?(o=St(o),this._southWest.equals(o.getSouthWest(),h)&&this._northEast.equals(o.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function St(o,h){return o instanceof yt?o:new yt(o,h)}function At(o,h,_){if(isNaN(o)||isNaN(h))throw new Error("Invalid LatLng object: ("+o+", "+h+")");this.lat=+o,this.lng=+h,_!==void 0&&(this.alt=+_)}At.prototype={equals:function(o,h){if(!o)return!1;o=Et(o);var _=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return _<=(h===void 0?1e-9:h)},toString:function(o){return"LatLng("+S(this.lat,o)+", "+S(this.lng,o)+")"},distanceTo:function(o){return le.distance(this,Et(o))},wrap:function(){return le.wrapLatLng(this)},toBounds:function(o){var h=180*o/40075017,_=h/Math.cos(Math.PI/180*this.lat);return St([this.lat-h,this.lng-_],[this.lat+h,this.lng+_])},clone:function(){return new At(this.lat,this.lng,this.alt)}};function Et(o,h,_){return o instanceof At?o:$(o)&&typeof o[0]!="object"?o.length===3?new At(o[0],o[1],o[2]):o.length===2?new At(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new At(o.lat,"lng"in o?o.lng:o.lon,o.alt):h===void 0?null:new At(o,h,_)}var Ae={latLngToPoint:function(o,h){var _=this.projection.project(o),T=this.scale(h);return this.transformation._transform(_,T)},pointToLatLng:function(o,h){var _=this.scale(h),T=this.transformation.untransform(o,_);return this.projection.unproject(T)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var h=this.projection.bounds,_=this.scale(o),T=this.transformation.transform(h.min,_),x=this.transformation.transform(h.max,_);return new ct(T,x)},infinite:!1,wrapLatLng:function(o){var h=this.wrapLng?v(o.lng,this.wrapLng,!0):o.lng,_=this.wrapLat?v(o.lat,this.wrapLat,!0):o.lat,T=o.alt;return new At(_,h,T)},wrapLatLngBounds:function(o){var h=o.getCenter(),_=this.wrapLatLng(h),T=h.lat-_.lat,x=h.lng-_.lng;if(T===0&&x===0)return o;var C=o.getSouthWest(),W=o.getNorthEast(),et=new At(C.lat-T,C.lng-x),lt=new At(W.lat-T,W.lng-x);return new yt(et,lt)}},le=r({},Ae,{wrapLng:[-180,180],R:6371e3,distance:function(o,h){var _=Math.PI/180,T=o.lat*_,x=h.lat*_,C=Math.sin((h.lat-o.lat)*_/2),W=Math.sin((h.lng-o.lng)*_/2),et=C*C+Math.cos(T)*Math.cos(x)*W*W,lt=2*Math.atan2(Math.sqrt(et),Math.sqrt(1-et));return this.R*lt}}),Ri=6378137,Ji={R:Ri,MAX_LATITUDE:85.0511287798,project:function(o){var h=Math.PI/180,_=this.MAX_LATITUDE,T=Math.max(Math.min(_,o.lat),-_),x=Math.sin(T*h);return new mt(this.R*o.lng*h,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(o){var h=180/Math.PI;return new At((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*h,o.x*h/this.R)},bounds:function(){var o=Ri*Math.PI;return new ct([-o,-o],[o,o])}()};function Ii(o,h,_,T){if($(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=h,this._c=_,this._d=T}Ii.prototype={transform:function(o,h){return this._transform(o.clone(),h)},_transform:function(o,h){return h=h||1,o.x=h*(this._a*o.x+this._b),o.y=h*(this._c*o.y+this._d),o},untransform:function(o,h){return h=h||1,new mt((o.x/h-this._b)/this._a,(o.y/h-this._d)/this._c)}};function Ci(o,h,_,T){return new Ii(o,h,_,T)}var Ss=r({},le,{code:"EPSG:3857",projection:Ji,transformation:function(){var o=.5/(Math.PI*Ji.R);return Ci(o,.5,-o,.5)}()}),Mr=r({},Ss,{code:"EPSG:900913"});function wa(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Yo(o,h){var _="",T,x,C,W,et,lt;for(T=0,C=o.length;T<C;T++){for(et=o[T],x=0,W=et.length;x<W;x++)lt=et[x],_+=(x?"L":"M")+lt.x+" "+lt.y;_+=h?Ot.svg?"z":"x":""}return _||"M0 0"}var Hn=document.documentElement.style,Sa="ActiveXObject"in window,$o=Sa&&!document.addEventListener,Or="msLaunchUri"in navigator&&!("documentMode"in document),xs=qn("webkit"),Jl=qn("android"),Dr=qn("android 2")||qn("android 3"),Ko=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),tu=Jl&&qn("Google")&&Ko<537&&!("AudioNode"in window),De=!!window.opera,fe=!Or&&qn("chrome"),Fn=qn("gecko")&&!xs&&!De&&!Sa,Tn=!fe&&qn("safari"),Xo=qn("phantom"),eu="OTransition"in Hn,kr=navigator.platform.indexOf("Win")===0,Js=Sa&&"transition"in Hn,As="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Dr,fi="MozPerspective"in Hn,xa=!window.L_DISABLE_3D&&(Js||As||fi)&&!eu&&!Xo,Pi=typeof orientation<"u"||qn("mobile"),Qo=Pi&&xs,Jo=Pi&&As,Aa=!window.PointerEvent&&window.MSPointerEvent,ts=!!(window.PointerEvent||Aa),es="ontouchstart"in window||!!window.TouchEvent,tl=!window.L_NO_TOUCH&&(es||ts),ns=Pi&&De,el=Pi&&Fn,tr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ra=function(){var o=!1;try{var h=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",E,h),window.removeEventListener("testPassiveEventSupport",E,h)}catch{}return o}(),er=function(){return!!document.createElement("canvas").getContext}(),Ia=!!(document.createElementNS&&wa("svg").createSVGRect),ke=!!Ia&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),tn=!Ia&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var h=o.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),Xe=navigator.platform.indexOf("Mac")===0,di=navigator.platform.indexOf("Linux")===0;function qn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ot={ie:Sa,ielt9:$o,edge:Or,webkit:xs,android:Jl,android23:Dr,androidStock:tu,opera:De,chrome:fe,gecko:Fn,safari:Tn,phantom:Xo,opera12:eu,win:kr,ie3d:Js,webkit3d:As,gecko3d:fi,any3d:xa,mobile:Pi,mobileWebkit:Qo,mobileWebkit3d:Jo,msPointer:Aa,pointer:ts,touch:tl,touchNative:es,mobileOpera:ns,mobileGecko:el,retina:tr,passiveEvents:Ra,canvas:er,svg:Ia,vml:tn,inlineSvg:ke,mac:Xe,linux:di},Rs=Ot.msPointer?"MSPointerDown":"pointerdown",nl=Ot.msPointer?"MSPointerMove":"pointermove",nr=Ot.msPointer?"MSPointerUp":"pointerup",Is=Ot.msPointer?"MSPointerCancel":"pointercancel",Mi={touchstart:Rs,touchmove:nl,touchend:nr,touchcancel:Is},Oi={touchstart:Nr,touchmove:Lr,touchend:Lr,touchcancel:Lr},On={},En=!1;function Ze(o,h,_){return h==="touchstart"&&nu(),Oi[h]?(_=Oi[h].bind(this,_),o.addEventListener(Mi[h],_,!1),_):(console.warn("wrong event specified:",h),E)}function il(o,h,_){if(!Mi[h]){console.warn("wrong event specified:",h);return}o.removeEventListener(Mi[h],_,!1)}function Ca(o){On[o.pointerId]=o}function Di(o){On[o.pointerId]&&(On[o.pointerId]=o)}function is(o){delete On[o.pointerId]}function nu(){En||(document.addEventListener(Rs,Ca,!0),document.addEventListener(nl,Di,!0),document.addEventListener(nr,is,!0),document.addEventListener(Is,is,!0),En=!0)}function Lr(o,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var _ in On)h.touches.push(On[_]);h.changedTouches=[h],o(h)}}function Nr(o,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Re(h),Lr(o,h)}function iu(o){var h={},_,T;for(T in o)_=o[T],h[T]=_&&_.bind?_.bind(o):_;return o=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var ir=200;function ss(o,h){o.addEventListener("dblclick",h);var _=0,T;function x(C){if(C.detail!==1){T=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var W=Oa(C);if(!(W.some(function(lt){return lt instanceof HTMLLabelElement&&lt.attributes.for})&&!W.some(function(lt){return lt instanceof HTMLInputElement||lt instanceof HTMLSelectElement}))){var et=Date.now();et-_<=ir?(T++,T===2&&h(iu(C))):T=1,_=et}}}return o.addEventListener("click",x),{dblclick:h,simDblclick:x}}function pn(o,h){o.removeEventListener("dblclick",h.dblclick),o.removeEventListener("click",h.simDblclick)}var Cs=ki(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),sr=ki(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),rs=sr==="webkitTransition"||sr==="OTransition"?sr+"End":"transitionend";function Vr(o){return typeof o=="string"?document.getElementById(o):o}function as(o,h){var _=o.style[h]||o.currentStyle&&o.currentStyle[h];if((!_||_==="auto")&&document.defaultView){var T=document.defaultView.getComputedStyle(o,null);_=T?T[h]:null}return _==="auto"?null:_}function te(o,h,_){var T=document.createElement(o);return T.className=h||"",_&&_.appendChild(T),T}function _e(o){var h=o.parentNode;h&&h.removeChild(o)}function ln(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function os(o){var h=o.parentNode;h&&h.lastChild!==o&&h.appendChild(o)}function rr(o){var h=o.parentNode;h&&h.firstChild!==o&&h.insertBefore(o,h.firstChild)}function ar(o,h){if(o.classList!==void 0)return o.classList.contains(h);var _=Be(o);return _.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(_)}function Gt(o,h){if(o.classList!==void 0)for(var _=P(h),T=0,x=_.length;T<x;T++)o.classList.add(_[T]);else if(!ar(o,h)){var C=Be(o);sl(o,(C?C+" ":"")+h)}}function be(o,h){o.classList!==void 0?o.classList.remove(h):sl(o,I((" "+Be(o)+" ").replace(" "+h+" "," ")))}function sl(o,h){o.className.baseVal===void 0?o.className=h:o.className.baseVal=h}function Be(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Le(o,h){"opacity"in o.style?o.style.opacity=h:"filter"in o.style&&zr(o,h)}function zr(o,h){var _=!1,T="DXImageTransform.Microsoft.Alpha";try{_=o.filters.item(T)}catch{if(h===1)return}h=Math.round(h*100),_?(_.Enabled=h!==100,_.Opacity=h):o.style.filter+=" progid:"+T+"(opacity="+h+")"}function ki(o){for(var h=document.documentElement.style,_=0;_<o.length;_++)if(o[_]in h)return o[_];return!1}function Dn(o,h,_){var T=h||new mt(0,0);o.style[Cs]=(Ot.ie3d?"translate("+T.x+"px,"+T.y+"px)":"translate3d("+T.x+"px,"+T.y+"px,0)")+(_?" scale("+_+")":"")}function jt(o,h){o._leaflet_pos=h,Ot.any3d?Dn(o,h):(o.style.left=h.x+"px",o.style.top=h.y+"px")}function si(o){return o._leaflet_pos||new mt(0,0)}var wn,Li,Pa;if("onselectstart"in document)wn=function(){Nt(window,"selectstart",Re)},Li=function(){ue(window,"selectstart",Re)};else{var Ps=ki(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);wn=function(){if(Ps){var o=document.documentElement.style;Pa=o[Ps],o[Ps]="none"}},Li=function(){Ps&&(document.documentElement.style[Ps]=Pa,Pa=void 0)}}function Br(){Nt(window,"dragstart",Re)}function rl(){ue(window,"dragstart",Re)}var Ma,or;function Ni(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(kn(),Ma=o,or=o.style.outlineStyle,o.style.outlineStyle="none",Nt(window,"keydown",kn))}function kn(){Ma&&(Ma.style.outlineStyle=or,Ma=void 0,or=void 0,ue(window,"keydown",kn))}function ls(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Vi(o){var h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}var al={__proto__:null,TRANSFORM:Cs,TRANSITION:sr,TRANSITION_END:rs,get:Vr,getStyle:as,create:te,remove:_e,empty:ln,toFront:os,toBack:rr,hasClass:ar,addClass:Gt,removeClass:be,setClass:sl,getClass:Be,setOpacity:Le,testProp:ki,setTransform:Dn,setPosition:jt,getPosition:si,get disableTextSelection(){return wn},get enableTextSelection(){return Li},disableImageDrag:Br,enableImageDrag:rl,preventOutline:Ni,restoreOutline:kn,getSizedParentNode:ls,getScale:Vi};function Nt(o,h,_,T){if(h&&typeof h=="object")for(var x in h)Ms(o,x,h[x],_);else{h=P(h);for(var C=0,W=h.length;C<W;C++)Ms(o,h[C],_,T)}return this}var ri="_leaflet_events";function ue(o,h,_,T){if(arguments.length===1)mi(o),delete o[ri];else if(h&&typeof h=="object")for(var x in h)pi(o,x,h[x],_);else if(h=P(h),arguments.length===2)mi(o,function(et){return nt(h,et)!==-1});else for(var C=0,W=h.length;C<W;C++)pi(o,h[C],_,T);return this}function mi(o,h){for(var _ in o[ri]){var T=_.split(/\d/)[0];(!h||h(T))&&pi(o,T,null,null,_)}}var Gn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ms(o,h,_,T){var x=h+m(_)+(T?"_"+m(T):"");if(o[ri]&&o[ri][x])return this;var C=function(et){return _.call(T||o,et||window.event)},W=C;!Ot.touchNative&&Ot.pointer&&h.indexOf("touch")===0?C=Ze(o,h,C):Ot.touch&&h==="dblclick"?C=ss(o,C):"addEventListener"in o?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?o.addEventListener(Gn[h]||h,C,Ot.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(C=function(et){et=et||window.event,Ds(o,et)&&W(et)},o.addEventListener(Gn[h],C,!1)):o.addEventListener(h,W,!1):o.attachEvent("on"+h,C),o[ri]=o[ri]||{},o[ri][x]=C}function pi(o,h,_,T,x){x=x||h+m(_)+(T?"_"+m(T):"");var C=o[ri]&&o[ri][x];if(!C)return this;!Ot.touchNative&&Ot.pointer&&h.indexOf("touch")===0?il(o,h,C):Ot.touch&&h==="dblclick"?pn(o,C):"removeEventListener"in o?o.removeEventListener(Gn[h]||h,C,!1):o.detachEvent("on"+h,C),o[ri][x]=null}function Zn(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function zi(o){return Ms(o,"wheel",Zn),this}function Os(o){return Nt(o,"mousedown touchstart dblclick contextmenu",Zn),o._leaflet_disable_click=!0,this}function Re(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Sn(o){return Re(o),Zn(o),this}function Oa(o){if(o.composedPath)return o.composedPath();for(var h=[],_=o.target;_;)h.push(_),_=_.parentNode;return h}function en(o,h){if(!h)return new mt(o.clientX,o.clientY);var _=Vi(h),T=_.boundingClientRect;return new mt((o.clientX-T.left)/_.x-h.clientLeft,(o.clientY-T.top)/_.y-h.clientTop)}var de=Ot.linux&&Ot.chrome?window.devicePixelRatio:Ot.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ur(o){return Ot.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/de:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Ds(o,h){var _=h.relatedTarget;if(!_)return!0;try{for(;_&&_!==o;)_=_.parentNode}catch{return!1}return _!==o}var su={__proto__:null,on:Nt,off:ue,stopPropagation:Zn,disableScrollPropagation:zi,disableClickPropagation:Os,preventDefault:Re,stop:Sn,getPropagationPath:Oa,getMousePosition:en,getWheelDelta:Ur,isExternalTarget:Ds,addListener:Nt,removeListener:ue},jr=vt.extend({run:function(o,h,_,T){this.stop(),this._el=o,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(T||.5,.2),this._startPos=si(o),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=H(this._animate,this),this._step()},_step:function(o){var h=+new Date-this._startTime,_=this._duration*1e3;h<_?this._runFrame(this._easeOut(h/_),o):(this._runFrame(1),this._complete())},_runFrame:function(o,h){var _=this._startPos.add(this._offset.multiplyBy(o));h&&_._round(),jt(this._el,_),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),$t=vt.extend({options:{crs:Ss,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,h){h=k(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(Et(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=sr&&Ot.any3d&&!Ot.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Nt(this._proxy,rs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,h,_){if(h=h===void 0?this._zoom:this._limitZoom(h),o=this._limitCenter(Et(o),h,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=r({animate:_.animate},_.zoom),_.pan=r({animate:_.animate,duration:_.duration},_.pan));var T=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,h,_.zoom):this._tryAnimatedPan(o,_.pan);if(T)return clearTimeout(this._sizeTimer),this}return this._resetView(o,h,_.pan&&_.pan.noMoveStart),this},setZoom:function(o,h){return this._loaded?this.setView(this.getCenter(),o,{zoom:h}):(this._zoom=o,this)},zoomIn:function(o,h){return o=o||(Ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,h)},zoomOut:function(o,h){return o=o||(Ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,h)},setZoomAround:function(o,h,_){var T=this.getZoomScale(h),x=this.getSize().divideBy(2),C=o instanceof mt?o:this.latLngToContainerPoint(o),W=C.subtract(x).multiplyBy(1-1/T),et=this.containerPointToLatLng(x.add(W));return this.setView(et,h,{zoom:_})},_getBoundsCenterZoom:function(o,h){h=h||{},o=o.getBounds?o.getBounds():St(o);var _=j(h.paddingTopLeft||h.padding||[0,0]),T=j(h.paddingBottomRight||h.padding||[0,0]),x=this.getBoundsZoom(o,!1,_.add(T));if(x=typeof h.maxZoom=="number"?Math.min(h.maxZoom,x):x,x===1/0)return{center:o.getCenter(),zoom:x};var C=T.subtract(_).divideBy(2),W=this.project(o.getSouthWest(),x),et=this.project(o.getNorthEast(),x),lt=this.unproject(W.add(et).divideBy(2).add(C),x);return{center:lt,zoom:x}},fitBounds:function(o,h){if(o=St(o),!o.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(o,h);return this.setView(_.center,_.zoom,h)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,h){return this.setView(o,this._zoom,{pan:h})},panBy:function(o,h){if(o=j(o).round(),h=h||{},!o.x&&!o.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new jr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Gt(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,_,h.duration||.25,h.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,h,_){if(_=_||{},_.animate===!1||!Ot.any3d)return this.setView(o,h,_);this._stop();var T=this.project(this.getCenter()),x=this.project(o),C=this.getSize(),W=this._zoom;o=Et(o),h=h===void 0?W:h;var et=Math.max(C.x,C.y),lt=et*this.getZoomScale(W,h),bt=x.distanceTo(T)||1,xt=1.42,Ct=xt*xt;function Mt(Fe){var ps=Fe?-1:1,Bs=Fe?lt:et,dr=lt*lt-et*et+ps*Ct*Ct*bt*bt,Us=2*Bs*Ct*bt,Tl=dr/Us,_u=Math.sqrt(Tl*Tl+1)-Tl,El=_u<1e-9?-18:Math.log(_u);return El}function qt(Fe){return(Math.exp(Fe)-Math.exp(-Fe))/2}function Ve(Fe){return(Math.exp(Fe)+Math.exp(-Fe))/2}function We(Fe){return qt(Fe)/Ve(Fe)}var An=Mt(0);function gi(Fe){return et*(Ve(An)/Ve(An+xt*Fe))}function Rf(Fe){return et*(Ve(An)*We(An+xt*Fe)-qt(An))/Ct}function If(Fe){return 1-Math.pow(1-Fe,1.5)}var bl=Date.now(),$a=(Mt(1)-An)/xt,Cf=_.duration?1e3*_.duration:1e3*$a*.8;function Ka(){var Fe=(Date.now()-bl)/Cf,ps=If(Fe)*$a;Fe<=1?(this._flyToFrame=H(Ka,this),this._move(this.unproject(T.add(x.subtract(T).multiplyBy(Rf(ps)/bt)),W),this.getScaleZoom(et/gi(ps),W),{flyTo:!0})):this._move(o,h)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),Ka.call(this),this},flyToBounds:function(o,h){var _=this._getBoundsCenterZoom(o,h);return this.flyTo(_.center,_.zoom,h)},setMaxBounds:function(o){return o=St(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var h=this.options.minZoom;return this.options.minZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var h=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,h){this._enforcingBounds=!0;var _=this.getCenter(),T=this._limitCenter(_,this._zoom,St(o));return _.equals(T)||this.panTo(T,h),this._enforcingBounds=!1,this},panInside:function(o,h){h=h||{};var _=j(h.paddingTopLeft||h.padding||[0,0]),T=j(h.paddingBottomRight||h.padding||[0,0]),x=this.project(this.getCenter()),C=this.project(o),W=this.getPixelBounds(),et=Tt([W.min.add(_),W.max.subtract(T)]),lt=et.getSize();if(!et.contains(C)){this._enforcingBounds=!0;var bt=C.subtract(et.getCenter()),xt=et.extend(C).getSize().subtract(lt);x.x+=bt.x<0?-xt.x:xt.x,x.y+=bt.y<0?-xt.y:xt.y,this.panTo(this.unproject(x),h),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=r({animate:!1,pan:!0},o===!0?{animate:!0}:o);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),T=h.divideBy(2).round(),x=_.divideBy(2).round(),C=T.subtract(x);return!C.x&&!C.y?this:(o.animate&&o.pan?this.panBy(C):(o.pan&&this._rawPanBy(C),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=r({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=c(this._handleGeolocationResponse,this),_=c(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,_,o):navigator.geolocation.getCurrentPosition(h,_,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var h=o.code,_=o.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var h=o.coords.latitude,_=o.coords.longitude,T=new At(h,_),x=T.toBounds(o.coords.accuracy*2),C=this._locateOptions;if(C.setView){var W=this.getBoundsZoom(x);this.setView(T,C.maxZoom?Math.min(W,C.maxZoom):W)}var et={latlng:T,bounds:x,timestamp:o.timestamp};for(var lt in o.coords)typeof o.coords[lt]=="number"&&(et[lt]=o.coords[lt]);this.fire("locationfound",et)}},addHandler:function(o,h){if(!h)return this;var _=this[o]=new h(this);return this._handlers.push(_),this.options[o]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),_e(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)_e(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,h){var _="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),T=te("div",_,h||this._mapPane);return o&&(this._panes[o]=T),T},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),h=this.unproject(o.getBottomLeft()),_=this.unproject(o.getTopRight());return new yt(h,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,h,_){o=St(o),_=j(_||[0,0]);var T=this.getZoom()||0,x=this.getMinZoom(),C=this.getMaxZoom(),W=o.getNorthWest(),et=o.getSouthEast(),lt=this.getSize().subtract(_),bt=Tt(this.project(et,T),this.project(W,T)).getSize(),xt=Ot.any3d?this.options.zoomSnap:1,Ct=lt.x/bt.x,Mt=lt.y/bt.y,qt=h?Math.max(Ct,Mt):Math.min(Ct,Mt);return T=this.getScaleZoom(qt,T),xt&&(T=Math.round(T/(xt/100))*(xt/100),T=h?Math.ceil(T/xt)*xt:Math.floor(T/xt)*xt),Math.max(x,Math.min(C,T))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new mt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,h){var _=this._getTopLeftPoint(o,h);return new ct(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,h){var _=this.options.crs;return h=h===void 0?this._zoom:h,_.scale(o)/_.scale(h)},getScaleZoom:function(o,h){var _=this.options.crs;h=h===void 0?this._zoom:h;var T=_.zoom(o*_.scale(h));return isNaN(T)?1/0:T},project:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(Et(o),h)},unproject:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(j(o),h)},layerPointToLatLng:function(o){var h=j(o).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(o){var h=this.project(Et(o))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(Et(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(St(o))},distance:function(o,h){return this.options.crs.distance(Et(o),Et(h))},containerPointToLayerPoint:function(o){return j(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return j(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var h=this.containerPointToLayerPoint(j(o));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Et(o)))},mouseEventToContainerPoint:function(o){return en(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var h=this._container=Vr(o);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Nt(h,"scroll",this._onScroll,this),this._containerId=m(h)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ot.any3d,Gt(o,"leaflet-container"+(Ot.touch?" leaflet-touch":"")+(Ot.retina?" leaflet-retina":"")+(Ot.ielt9?" leaflet-oldie":"")+(Ot.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=as(o,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),jt(this._mapPane,new mt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Gt(o.markerPane,"leaflet-zoom-hide"),Gt(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,h,_){jt(this._mapPane,new mt(0,0));var T=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var x=this._zoom!==h;this._moveStart(x,_)._move(o,h)._moveEnd(x),this.fire("viewreset"),T&&this.fire("load")},_moveStart:function(o,h){return o&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(o,h,_,T){h===void 0&&(h=this._zoom);var x=this._zoom!==h;return this._zoom=h,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),T?_&&_.pinch&&this.fire("zoom",_):((x||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){jt(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[m(this._container)]=this;var h=o?ue:Nt;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Ot.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=H(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,h){for(var _=[],T,x=h==="mouseout"||h==="mouseover",C=o.target||o.srcElement,W=!1;C;){if(T=this._targets[m(C)],T&&(h==="click"||h==="preclick")&&this._draggableMoved(T)){W=!0;break}if(T&&T.listens(h,!0)&&(x&&!Ds(C,o)||(_.push(T),x))||C===this._container)break;C=C.parentNode}return!_.length&&!W&&!x&&this.listens(h,!0)&&(_=[this]),_},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var h=o.target||o.srcElement;if(!(!this._loaded||h._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(h))){var _=o.type;_==="mousedown"&&Ni(h),this._fireDOMEvent(o,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,h,_){if(o.type==="click"){var T=r({},o);T.type="preclick",this._fireDOMEvent(T,T.type,_)}var x=this._findEventTargets(o,h);if(_){for(var C=[],W=0;W<_.length;W++)_[W].listens(h,!0)&&C.push(_[W]);x=C.concat(x)}if(x.length){h==="contextmenu"&&Re(o);var et=x[0],lt={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var bt=et.getLatLng&&(!et._radius||et._radius<=10);lt.containerPoint=bt?this.latLngToContainerPoint(et.getLatLng()):this.mouseEventToContainerPoint(o),lt.layerPoint=this.containerPointToLayerPoint(lt.containerPoint),lt.latlng=bt?et.getLatLng():this.layerPointToLatLng(lt.layerPoint)}for(W=0;W<x.length;W++)if(x[W].fire(h,lt,!0),lt.originalEvent._stopped||x[W].options.bubblingMouseEvents===!1&&nt(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,h=this._handlers.length;o<h;o++)this._handlers[o].disable()},whenReady:function(o,h){return this._loaded?o.call(h||this,{target:this}):this.on("load",o,h),this},_getMapPanePos:function(){return si(this._mapPane)||new mt(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,h){var _=o&&h!==void 0?this._getNewPixelOrigin(o,h):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,h){var _=this.getSize()._divideBy(2);return this.project(o,h)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,h,_){var T=this._getNewPixelOrigin(_,h);return this.project(o,h)._subtract(T)},_latLngBoundsToNewLayerBounds:function(o,h,_){var T=this._getNewPixelOrigin(_,h);return Tt([this.project(o.getSouthWest(),h)._subtract(T),this.project(o.getNorthWest(),h)._subtract(T),this.project(o.getSouthEast(),h)._subtract(T),this.project(o.getNorthEast(),h)._subtract(T)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,h,_){if(!_)return o;var T=this.project(o,h),x=this.getSize().divideBy(2),C=new ct(T.subtract(x),T.add(x)),W=this._getBoundsOffset(C,_,h);return Math.abs(W.x)<=1&&Math.abs(W.y)<=1?o:this.unproject(T.add(W),h)},_limitOffset:function(o,h){if(!h)return o;var _=this.getPixelBounds(),T=new ct(_.min.add(o),_.max.add(o));return o.add(this._getBoundsOffset(T,h))},_getBoundsOffset:function(o,h,_){var T=Tt(this.project(h.getNorthEast(),_),this.project(h.getSouthWest(),_)),x=T.min.subtract(o.min),C=T.max.subtract(o.max),W=this._rebound(x.x,-C.x),et=this._rebound(x.y,-C.y);return new mt(W,et)},_rebound:function(o,h){return o+h>0?Math.round(o-h)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(h))},_limitZoom:function(o){var h=this.getMinZoom(),_=this.getMaxZoom(),T=Ot.any3d?this.options.zoomSnap:1;return T&&(o=Math.round(o/T)*T),Math.max(h,Math.min(_,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,h){var _=this._getCenterOffset(o)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,h),!0)},_createAnimProxy:function(){var o=this._proxy=te("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(h){var _=Cs,T=this._proxy.style[_];Dn(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),T===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){_e(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),h=this.getZoom();Dn(this._proxy,this.project(o,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,h,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var T=this.getZoomScale(h),x=this._getCenterOffset(o)._divideBy(1-1/T);return _.animate!==!0&&!this.getSize().contains(x)?!1:(H(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(o,h,!0)},this),!0)},_animateZoom:function(o,h,_,T){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=h,Gt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:h,noUpdate:T}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function us(o,h){return new $t(o,h)}var gn=Yt.extend({options:{position:"topright"},initialize:function(o){k(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var h=this._map;return h&&h.removeControl(this),this.options.position=o,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var h=this._container=this.onAdd(o),_=this.getPosition(),T=o._controlCorners[_];return Gt(h,"leaflet-control"),_.indexOf("bottom")!==-1?T.insertBefore(h,T.firstChild):T.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(_e(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),xn=function(o){return new gn(o)};$t.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},h="leaflet-",_=this._controlContainer=te("div",h+"control-container",this._container);function T(x,C){var W=h+x+" "+h+C;o[x+C]=te("div",W,_)}T("top","left"),T("top","right"),T("bottom","left"),T("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)_e(this._controlCorners[o]);_e(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ol=gn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,h,_,T){return _<T?-1:T<_?1:0}},initialize:function(o,h,_){k(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var T in o)this._addLayer(o[T],T);for(T in h)this._addLayer(h[T],T,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return gn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,h){return this._addLayer(o,h),this._map?this._update():this},addOverlay:function(o,h){return this._addLayer(o,h,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var h=this._getLayer(m(o));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Gt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(Gt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",h=this._container=te("div",o),_=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Os(h),zi(h);var T=this._section=te("section",o+"-list");_&&(this._map.on("click",this.collapse,this),Nt(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=te("a",o+"-toggle",h);x.href="#",x.title="Layers",x.setAttribute("role","button"),Nt(x,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){Re(C),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=te("div",o+"-base",T),this._separator=te("div",o+"-separator",T),this._overlaysList=te("div",o+"-overlays",T),h.appendChild(T)},_getLayer:function(o){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&m(this._layers[h].layer)===o)return this._layers[h]},_addLayer:function(o,h,_){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:h,overlay:_}),this.options.sortLayers&&this._layers.sort(c(function(T,x){return this.options.sortFunction(T.layer,x.layer,T.name,x.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ln(this._baseLayersList),ln(this._overlaysList),this._layerControlInputs=[];var o,h,_,T,x=0;for(_=0;_<this._layers.length;_++)T=this._layers[_],this._addItem(T),h=h||T.overlay,o=o||!T.overlay,x+=T.overlay?0:1;return this.options.hideSingleBase&&(o=o&&x>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=h&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var h=this._getLayer(m(o.target)),_=h.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;_&&this._map.fire(_,h)},_createRadioElement:function(o,h){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(h?' checked="checked"':"")+"/>",T=document.createElement("div");return T.innerHTML=_,T.firstChild},_addItem:function(o){var h=document.createElement("label"),_=this._map.hasLayer(o.layer),T;o.overlay?(T=document.createElement("input"),T.type="checkbox",T.className="leaflet-control-layers-selector",T.defaultChecked=_):T=this._createRadioElement("leaflet-base-layers_"+m(this),_),this._layerControlInputs.push(T),T.layerId=m(o.layer),Nt(T,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+o.name;var C=document.createElement("span");h.appendChild(C),C.appendChild(T),C.appendChild(x);var W=o.overlay?this._overlaysList:this._baseLayersList;return W.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,h,_,T=[],x=[];this._handlingClick=!0;for(var C=o.length-1;C>=0;C--)h=o[C],_=this._getLayer(h.layerId).layer,h.checked?T.push(_):h.checked||x.push(_);for(C=0;C<x.length;C++)this._map.hasLayer(x[C])&&this._map.removeLayer(x[C]);for(C=0;C<T.length;C++)this._map.hasLayer(T[C])||this._map.addLayer(T[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h,_,T=this._map.getZoom(),x=o.length-1;x>=0;x--)h=o[x],_=this._getLayer(h.layerId).layer,h.disabled=_.options.minZoom!==void 0&&T<_.options.minZoom||_.options.maxZoom!==void 0&&T>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,Nt(o,"click",Re),this.expand();var h=this;setTimeout(function(){ue(o,"click",Re),h._preventClick=!1})}}),gc=function(o,h,_){return new ol(o,h,_)},ks=gn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var h="leaflet-control-zoom",_=te("div",h+" leaflet-bar"),T=this.options;return this._zoomInButton=this._createButton(T.zoomInText,T.zoomInTitle,h+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(T.zoomOutText,T.zoomOutTitle,h+"-out",_,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,h,_,T,x){var C=te("a",_,T);return C.innerHTML=o,C.href="#",C.title=h,C.setAttribute("role","button"),C.setAttribute("aria-label",h),Os(C),Nt(C,"click",Sn),Nt(C,"click",x,this),Nt(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var o=this._map,h="leaflet-disabled";be(this._zoomInButton,h),be(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(Gt(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(Gt(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});$t.mergeOptions({zoomControl:!0}),$t.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ks,this.addControl(this.zoomControl))});var Da=function(o){return new ks(o)},ka=gn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var h="leaflet-control-scale",_=te("div",h),T=this.options;return this._addScales(T,h+"-line",_),o.on(T.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),_},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,h,_){o.metric&&(this._mScale=te("div",h,_)),o.imperial&&(this._iScale=te("div",h,_))},_update:function(){var o=this._map,h=o.getSize().y/2,_=o.distance(o.containerPointToLatLng([0,h]),o.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(_)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var h=this._getRoundNum(o),_=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,_,h/o)},_updateImperial:function(o){var h=o*3.2808399,_,T,x;h>5280?(_=h/5280,T=this._getRoundNum(_),this._updateScale(this._iScale,T+" mi",T/_)):(x=this._getRoundNum(h),this._updateScale(this._iScale,x+" ft",x/h))},_updateScale:function(o,h,_){o.style.width=Math.round(this.options.maxWidth*_)+"px",o.innerHTML=h},_getRoundNum:function(o){var h=Math.pow(10,(Math.floor(o)+"").length-1),_=o/h;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,h*_}}),La=function(o){return new ka(o)},ru='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',lr=gn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ot.inlineSvg?ru+" ":"")+"Leaflet</a>"},initialize:function(o){k(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=te("div","leaflet-control-attribution"),Os(this._container);for(var h in o._layers)o._layers[h].getAttribution&&this.addAttribution(o._layers[h].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var h in this._attributions)this._attributions[h]&&o.push(h);var _=[];this.options.prefix&&_.push(this.options.prefix),o.length&&_.push(o.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});$t.mergeOptions({attributionControl:!0}),$t.addInitHook(function(){this.options.attributionControl&&new lr().addTo(this)});var _c=function(o){return new lr(o)};gn.Layers=ol,gn.Zoom=ks,gn.Scale=ka,gn.Attribution=lr,xn.layers=gc,xn.zoom=Da,xn.scale=La,xn.attribution=_c;var Wn=Yt.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Wn.addTo=function(o,h){return o.addHandler(h,this),this};var Hr={Events:it},ll=Ot.touch?"touchstart mousedown":"mousedown",Bi=vt.extend({options:{clickTolerance:3},initialize:function(o,h,_,T){k(this,T),this._element=o,this._dragStartTarget=h||o,this._preventOutline=_},enable:function(){this._enabled||(Nt(this._dragStartTarget,ll,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Bi._dragging===this&&this.finishDrag(!0),ue(this._dragStartTarget,ll,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!ar(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Bi._dragging===this&&this.finishDrag();return}if(!(Bi._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Bi._dragging=this,this._preventOutline&&Ni(this._element),Br(),wn(),!this._moving)){this.fire("down");var h=o.touches?o.touches[0]:o,_=ls(this._element);this._startPoint=new mt(h.clientX,h.clientY),this._startPos=si(this._element),this._parentScale=Vi(_);var T=o.type==="mousedown";Nt(document,T?"mousemove":"touchmove",this._onMove,this),Nt(document,T?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var h=o.touches&&o.touches.length===1?o.touches[0]:o,_=new mt(h.clientX,h.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,Re(o),this._moved||(this.fire("dragstart"),this._moved=!0,Gt(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Gt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),jt(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){be(document.body,"leaflet-dragging"),this._lastTarget&&(be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ue(document,"mousemove touchmove",this._onMove,this),ue(document,"mouseup touchend touchcancel",this._onUp,this),rl(),Li();var h=this._moved&&this._moving;this._moving=!1,Bi._dragging=!1,h&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Na(o,h,_){var T,x=[1,4,2,8],C,W,et,lt,bt,xt,Ct,Mt;for(C=0,xt=o.length;C<xt;C++)o[C]._code=cs(o[C],h);for(et=0;et<4;et++){for(Ct=x[et],T=[],C=0,xt=o.length,W=xt-1;C<xt;W=C++)lt=o[C],bt=o[W],lt._code&Ct?bt._code&Ct||(Mt=un(bt,lt,Ct,h,_),Mt._code=cs(Mt,h),T.push(Mt)):(bt._code&Ct&&(Mt=un(bt,lt,Ct,h,_),Mt._code=cs(Mt,h),T.push(Mt)),T.push(lt));o=T}return o}function ur(o,h){var _,T,x,C,W,et,lt,bt,xt;if(!o||o.length===0)throw new Error("latlngs not passed");g(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Ct=Et([0,0]),Mt=St(o),qt=Mt.getNorthWest().distanceTo(Mt.getSouthWest())*Mt.getNorthEast().distanceTo(Mt.getNorthWest());qt<1700&&(Ct=Va(o));var Ve=o.length,We=[];for(_=0;_<Ve;_++){var An=Et(o[_]);We.push(h.project(Et([An.lat-Ct.lat,An.lng-Ct.lng])))}for(et=lt=bt=0,_=0,T=Ve-1;_<Ve;T=_++)x=We[_],C=We[T],W=x.y*C.x-C.y*x.x,lt+=(x.x+C.x)*W,bt+=(x.y+C.y)*W,et+=W*3;et===0?xt=We[0]:xt=[lt/et,bt/et];var gi=h.unproject(j(xt));return Et([gi.lat+Ct.lat,gi.lng+Ct.lng])}function Va(o){for(var h=0,_=0,T=0,x=0;x<o.length;x++){var C=Et(o[x]);h+=C.lat,_+=C.lng,T++}return Et([h/T,_/T])}var za={__proto__:null,clipPolygon:Na,polygonCenter:ur,centroid:Va};function ul(o,h){if(!h||!o.length)return o.slice();var _=h*h;return o=ou(o,_),o=au(o,_),o}function Ba(o,h,_){return Math.sqrt(Yn(o,h,_,!0))}function Ls(o,h,_){return Yn(o,h,_)}function au(o,h){var _=o.length,T=typeof Uint8Array<"u"?Uint8Array:Array,x=new T(_);x[0]=x[_-1]=1,Ua(o,x,h,0,_-1);var C,W=[];for(C=0;C<_;C++)x[C]&&W.push(o[C]);return W}function Ua(o,h,_,T,x){var C=0,W,et,lt;for(et=T+1;et<=x-1;et++)lt=Yn(o[et],o[T],o[x],!0),lt>C&&(W=et,C=lt);C>_&&(h[W]=1,Ua(o,h,_,T,W),Ua(o,h,_,W,x))}function ou(o,h){for(var _=[o[0]],T=1,x=0,C=o.length;T<C;T++)lu(o[T],o[x])>h&&(_.push(o[T]),x=T);return x<C-1&&_.push(o[C-1]),_}var cl;function Fr(o,h,_,T,x){var C=T?cl:cs(o,_),W=cs(h,_),et,lt,bt;for(cl=W;;){if(!(C|W))return[o,h];if(C&W)return!1;et=C||W,lt=un(o,h,et,_,x),bt=cs(lt,_),et===C?(o=lt,C=bt):(h=lt,W=bt)}}function un(o,h,_,T,x){var C=h.x-o.x,W=h.y-o.y,et=T.min,lt=T.max,bt,xt;return _&8?(bt=o.x+C*(lt.y-o.y)/W,xt=lt.y):_&4?(bt=o.x+C*(et.y-o.y)/W,xt=et.y):_&2?(bt=lt.x,xt=o.y+W*(lt.x-o.x)/C):_&1&&(bt=et.x,xt=o.y+W*(et.x-o.x)/C),new mt(bt,xt,x)}function cs(o,h){var _=0;return o.x<h.min.x?_|=1:o.x>h.max.x&&(_|=2),o.y<h.min.y?_|=4:o.y>h.max.y&&(_|=8),_}function lu(o,h){var _=h.x-o.x,T=h.y-o.y;return _*_+T*T}function Yn(o,h,_,T){var x=h.x,C=h.y,W=_.x-x,et=_.y-C,lt=W*W+et*et,bt;return lt>0&&(bt=((o.x-x)*W+(o.y-C)*et)/lt,bt>1?(x=_.x,C=_.y):bt>0&&(x+=W*bt,C+=et*bt)),W=o.x-x,et=o.y-C,T?W*W+et*et:new mt(x,C)}function g(o){return!$(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function w(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),g(o)}function A(o,h){var _,T,x,C,W,et,lt,bt;if(!o||o.length===0)throw new Error("latlngs not passed");g(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var xt=Et([0,0]),Ct=St(o),Mt=Ct.getNorthWest().distanceTo(Ct.getSouthWest())*Ct.getNorthEast().distanceTo(Ct.getNorthWest());Mt<1700&&(xt=Va(o));var qt=o.length,Ve=[];for(_=0;_<qt;_++){var We=Et(o[_]);Ve.push(h.project(Et([We.lat-xt.lat,We.lng-xt.lng])))}for(_=0,T=0;_<qt-1;_++)T+=Ve[_].distanceTo(Ve[_+1])/2;if(T===0)bt=Ve[0];else for(_=0,C=0;_<qt-1;_++)if(W=Ve[_],et=Ve[_+1],x=W.distanceTo(et),C+=x,C>T){lt=(C-T)/x,bt=[et.x-lt*(et.x-W.x),et.y-lt*(et.y-W.y)];break}var An=h.unproject(j(bt));return Et([An.lat+xt.lat,An.lng+xt.lng])}var N={__proto__:null,simplify:ul,pointToSegmentDistance:Ba,closestPointOnSegment:Ls,clipSegment:Fr,_getEdgeIntersection:un,_getBitCode:cs,_sqClosestPointOnSegment:Yn,isFlat:g,_flat:w,polylineCenter:A},tt={project:function(o){return new mt(o.lng,o.lat)},unproject:function(o){return new At(o.y,o.x)},bounds:new ct([-180,-90],[180,90])},ut={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ct([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var h=Math.PI/180,_=this.R,T=o.lat*h,x=this.R_MINOR/_,C=Math.sqrt(1-x*x),W=C*Math.sin(T),et=Math.tan(Math.PI/4-T/2)/Math.pow((1-W)/(1+W),C/2);return T=-_*Math.log(Math.max(et,1e-10)),new mt(o.lng*h*_,T)},unproject:function(o){for(var h=180/Math.PI,_=this.R,T=this.R_MINOR/_,x=Math.sqrt(1-T*T),C=Math.exp(-o.y/_),W=Math.PI/2-2*Math.atan(C),et=0,lt=.1,bt;et<15&&Math.abs(lt)>1e-7;et++)bt=x*Math.sin(W),bt=Math.pow((1-bt)/(1+bt),x/2),lt=Math.PI/2-2*Math.atan(C*bt)-W,W+=lt;return new At(W*h,o.x*h/_)}},wt={__proto__:null,LonLat:tt,Mercator:ut,SphericalMercator:Ji},se=r({},le,{code:"EPSG:3395",projection:ut,transformation:function(){var o=.5/(Math.PI*ut.R);return Ci(o,.5,-o,.5)}()}),Qe=r({},le,{code:"EPSG:4326",projection:tt,transformation:Ci(1/180,1,-1/180,.5)}),re=r({},Ae,{projection:tt,transformation:Ci(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,h){var _=h.lng-o.lng,T=h.lat-o.lat;return Math.sqrt(_*_+T*T)},infinite:!0});Ae.Earth=le,Ae.EPSG3395=se,Ae.EPSG3857=Ss,Ae.EPSG900913=Mr,Ae.EPSG4326=Qe,Ae.Simple=re;var ye=vt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[m(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[m(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var h=o.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var _=this.getEvents();h.on(_,this),this.once("remove",function(){h.off(_,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});$t.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var h=m(o);return this._layers[h]?this:(this._layers[h]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var h=m(o);return this._layers[h]?(this._loaded&&o.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return m(o)in this._layers},eachLayer:function(o,h){for(var _ in this._layers)o.call(h,this._layers[_]);return this},_addLayers:function(o){o=o?$(o)?o:[o]:[];for(var h=0,_=o.length;h<_;h++)this.addLayer(o[h])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[m(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var h=m(o);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,h=-1/0,_=this._getZoomSpan();for(var T in this._zoomBoundLayers){var x=this._zoomBoundLayers[T].options;o=x.minZoom===void 0?o:Math.min(o,x.minZoom),h=x.maxZoom===void 0?h:Math.max(h,x.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=o===1/0?void 0:o,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ne=ye.extend({initialize:function(o,h){k(this,h),this._layers={};var _,T;if(o)for(_=0,T=o.length;_<T;_++)this.addLayer(o[_])},addLayer:function(o){var h=this.getLayerId(o);return this._layers[h]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var h=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(o){var h=typeof o=="number"?o:this.getLayerId(o);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var h=Array.prototype.slice.call(arguments,1),_,T;for(_ in this._layers)T=this._layers[_],T[o]&&T[o].apply(T,h);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,h){for(var _ in this._layers)o.call(h,this._layers[_]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return m(o)}}),Ns=function(o,h){return new Ne(o,h)},Me=Ne.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Ne.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Ne.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new yt;for(var h in this._layers){var _=this._layers[h];o.extend(_.getBounds?_.getBounds():_.getLatLng())}return o}}),hs=function(o,h){return new Me(o,h)},fs=Yt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){k(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,h){var _=this._getIconUrl(o);if(!_){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var T=this._createImg(_,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(T,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),T},_setIconStyles:function(o,h){var _=this.options,T=_[h+"Size"];typeof T=="number"&&(T=[T,T]);var x=j(T),C=j(h==="shadow"&&_.shadowAnchor||_.iconAnchor||x&&x.divideBy(2,!0));o.className="leaflet-marker-"+h+" "+(_.className||""),C&&(o.style.marginLeft=-C.x+"px",o.style.marginTop=-C.y+"px"),x&&(o.style.width=x.x+"px",o.style.height=x.y+"px")},_createImg:function(o,h){return h=h||document.createElement("img"),h.src=o,h},_getIconUrl:function(o){return Ot.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function uu(o){return new fs(o)}var ja=fs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof ja.imagePath!="string"&&(ja.imagePath=this._detectIconPath()),(this.options.imagePath||ja.imagePath)+fs.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var h=function(_,T,x){var C=T.exec(_);return C&&C[x]};return o=h(o,/^url\((['"])?(.+)\1\)$/,2),o&&h(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=te("div","leaflet-default-icon-path",document.body),h=as(o,"background-image")||as(o,"backgroundImage");if(document.body.removeChild(o),h=this._stripUrl(h),h)return h;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),yc=Wn.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Bi(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Gt(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var h=this._marker,_=h._map,T=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,C=si(h._icon),W=_.getPixelBounds(),et=_.getPixelOrigin(),lt=Tt(W.min._subtract(et).add(x),W.max._subtract(et).subtract(x));if(!lt.contains(C)){var bt=j((Math.max(lt.max.x,C.x)-lt.max.x)/(W.max.x-lt.max.x)-(Math.min(lt.min.x,C.x)-lt.min.x)/(W.min.x-lt.min.x),(Math.max(lt.max.y,C.y)-lt.max.y)/(W.max.y-lt.max.y)-(Math.min(lt.min.y,C.y)-lt.min.y)/(W.min.y-lt.min.y)).multiplyBy(T);_.panBy(bt,{animate:!1}),this._draggable._newPos._add(bt),this._draggable._startPos._add(bt),jt(h._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=H(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=H(this._adjustPan.bind(this,o)))},_onDrag:function(o){var h=this._marker,_=h._shadow,T=si(h._icon),x=h._map.layerPointToLatLng(T);_&&jt(_,T),h._latlng=x,o.latlng=x,o.oldLatLng=this._oldLatLng,h.fire("move",o).fire("drag",o)},_onDragEnd:function(o){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Ha=ye.extend({options:{icon:new ja,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,h){k(this,h),this._latlng=Et(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var h=this._latlng;return this._latlng=Et(o),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=o.icon.createIcon(this._icon),T=!1;_!==this._icon&&(this._icon&&this._removeIcon(),T=!0,o.title&&(_.title=o.title),_.tagName==="IMG"&&(_.alt=o.alt||"")),Gt(_,h),o.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nt(_,"focus",this._panOnFocus,this);var x=o.icon.createShadow(this._shadow),C=!1;x!==this._shadow&&(this._removeShadow(),C=!0),x&&(Gt(x,h),x.alt=""),this._shadow=x,o.opacity<1&&this._updateOpacity(),T&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&C&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ue(this._icon,"focus",this._panOnFocus,this),_e(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&_e(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&jt(this._icon,o),this._shadow&&jt(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Gt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),yc)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new yc(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Le(this._icon,o),this._shadow&&Le(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var h=this.options.icon.options,_=h.iconSize?j(h.iconSize):j(0,0),T=h.iconAnchor?j(h.iconAnchor):j(0,0);o.panInside(this._latlng,{paddingTopLeft:T,paddingBottomRight:_.subtract(T)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function vc(o,h){return new Ha(o,h)}var Vs=ye.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return k(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),hl=Vs.extend({options:{fill:!0,radius:10},initialize:function(o,h){k(this,h),this._latlng=Et(o),this._radius=this.options.radius},setLatLng:function(o){var h=this._latlng;return this._latlng=Et(o),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var h=o&&o.radius||this._radius;return Vs.prototype.setStyle.call(this,o),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,h=this._radiusY||o,_=this._clickTolerance(),T=[o+_,h+_];this._pxBounds=new ct(this._point.subtract(T),this._point.add(T))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Tf(o,h){return new hl(o,h)}var bc=hl.extend({initialize:function(o,h,_){if(typeof h=="number"&&(h=r({},_,{radius:h})),k(this,h),this._latlng=Et(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new yt(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Vs.prototype.setStyle,_project:function(){var o=this._latlng.lng,h=this._latlng.lat,_=this._map,T=_.options.crs;if(T.distance===le.distance){var x=Math.PI/180,C=this._mRadius/le.R/x,W=_.project([h+C,o]),et=_.project([h-C,o]),lt=W.add(et).divideBy(2),bt=_.unproject(lt).lat,xt=Math.acos((Math.cos(C*x)-Math.sin(h*x)*Math.sin(bt*x))/(Math.cos(h*x)*Math.cos(bt*x)))/x;(isNaN(xt)||xt===0)&&(xt=C/Math.cos(Math.PI/180*h)),this._point=lt.subtract(_.getPixelOrigin()),this._radius=isNaN(xt)?0:lt.x-_.project([bt,o-xt]).x,this._radiusY=lt.y-W.y}else{var Ct=T.unproject(T.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(Ct).x}this._updateBounds()}});function Sp(o,h,_){return new bc(o,h,_)}var zs=Vs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,h){k(this,h),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var h=1/0,_=null,T=Yn,x,C,W=0,et=this._parts.length;W<et;W++)for(var lt=this._parts[W],bt=1,xt=lt.length;bt<xt;bt++){x=lt[bt-1],C=lt[bt];var Ct=T(o,x,C,!0);Ct<h&&(h=Ct,_=T(o,x,C))}return _&&(_.distance=Math.sqrt(h)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return A(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,h){return h=h||this._defaultShape(),o=Et(o),h.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new yt,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return g(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var h=[],_=g(o),T=0,x=o.length;T<x;T++)_?(h[T]=Et(o[T]),this._bounds.extend(h[T])):h[T]=this._convertLatLngs(o[T]);return h},_project:function(){var o=new ct;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),h=new mt(o,o);this._rawPxBounds&&(this._pxBounds=new ct([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(o,h,_){var T=o[0]instanceof At,x=o.length,C,W;if(T){for(W=[],C=0;C<x;C++)W[C]=this._map.latLngToLayerPoint(o[C]),_.extend(W[C]);h.push(W)}else for(C=0;C<x;C++)this._projectLatlngs(o[C],h,_)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,_,T,x,C,W,et,lt;for(_=0,x=0,C=this._rings.length;_<C;_++)for(lt=this._rings[_],T=0,W=lt.length;T<W-1;T++)et=Fr(lt[T],lt[T+1],o,T,!0),et&&(h[x]=h[x]||[],h[x].push(et[0]),(et[1]!==lt[T+1]||T===W-2)&&(h[x].push(et[1]),x++))}},_simplifyPoints:function(){for(var o=this._parts,h=this.options.smoothFactor,_=0,T=o.length;_<T;_++)o[_]=ul(o[_],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,h){var _,T,x,C,W,et,lt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(_=0,C=this._parts.length;_<C;_++)for(et=this._parts[_],T=0,W=et.length,x=W-1;T<W;x=T++)if(!(!h&&T===0)&&Ba(o,et[x],et[T])<=lt)return!0;return!1}});function xp(o,h){return new zs(o,h)}zs._flat=w;var Fa=zs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ur(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var h=zs.prototype._convertLatLngs.call(this,o),_=h.length;return _>=2&&h[0]instanceof At&&h[0].equals(h[_-1])&&h.pop(),h},_setLatLngs:function(o){zs.prototype._setLatLngs.call(this,o),g(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return g(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,h=this.options.weight,_=new mt(h,h);if(o=new ct(o.min.subtract(_),o.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var T=0,x=this._rings.length,C;T<x;T++)C=Na(this._rings[T],o,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var h=!1,_,T,x,C,W,et,lt,bt;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(C=0,lt=this._parts.length;C<lt;C++)for(_=this._parts[C],W=0,bt=_.length,et=bt-1;W<bt;et=W++)T=_[W],x=_[et],T.y>o.y!=x.y>o.y&&o.x<(x.x-T.x)*(o.y-T.y)/(x.y-T.y)+T.x&&(h=!h);return h||zs.prototype._containsPoint.call(this,o,!0)}});function ai(o,h){return new Fa(o,h)}var oi=Me.extend({initialize:function(o,h){k(this,h),this._layers={},o&&this.addData(o)},addData:function(o){var h=$(o)?o:o.features,_,T,x;if(h){for(_=0,T=h.length;_<T;_++)x=h[_],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var C=this.options;if(C.filter&&!C.filter(o))return this;var W=fl(o,C);return W?(W.feature=qa(o),W.defaultOptions=W.options,this.resetStyle(W),C.onEachFeature&&C.onEachFeature(o,W),this.addLayer(W)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=r({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(h){this._setLayerStyle(h,o)},this)},_setLayerStyle:function(o,h){o.setStyle&&(typeof h=="function"&&(h=h(o.feature)),o.setStyle(h))}});function fl(o,h){var _=o.type==="Feature"?o.geometry:o,T=_?_.coordinates:null,x=[],C=h&&h.pointToLayer,W=h&&h.coordsToLatLng||cu,et,lt,bt,xt;if(!T&&!_)return null;switch(_.type){case"Point":return et=W(T),Tc(C,o,et,h);case"MultiPoint":for(bt=0,xt=T.length;bt<xt;bt++)et=W(T[bt]),x.push(Tc(C,o,et,h));return new Me(x);case"LineString":case"MultiLineString":return lt=dl(T,_.type==="LineString"?0:1,W),new zs(lt,h);case"Polygon":case"MultiPolygon":return lt=dl(T,_.type==="Polygon"?1:2,W),new Fa(lt,h);case"GeometryCollection":for(bt=0,xt=_.geometries.length;bt<xt;bt++){var Ct=fl({geometry:_.geometries[bt],type:"Feature",properties:o.properties},h);Ct&&x.push(Ct)}return new Me(x);case"FeatureCollection":for(bt=0,xt=_.features.length;bt<xt;bt++){var Mt=fl(_.features[bt],h);Mt&&x.push(Mt)}return new Me(x);default:throw new Error("Invalid GeoJSON object.")}}function Tc(o,h,_,T){return o?o(h,_):new Ha(_,T&&T.markersInheritOptions&&T)}function cu(o){return new At(o[1],o[0],o[2])}function dl(o,h,_){for(var T=[],x=0,C=o.length,W;x<C;x++)W=h?dl(o[x],h-1,_):(_||cu)(o[x]),T.push(W);return T}function ml(o,h){return o=Et(o),o.alt!==void 0?[S(o.lng,h),S(o.lat,h),S(o.alt,h)]:[S(o.lng,h),S(o.lat,h)]}function hu(o,h,_,T){for(var x=[],C=0,W=o.length;C<W;C++)x.push(h?hu(o[C],g(o[C])?0:h-1,_,T):ml(o[C],T));return!h&&_&&x.length>0&&x.push(x[0].slice()),x}function Ui(o,h){return o.feature?r({},o.feature,{geometry:h}):qa(h)}function qa(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var qr={toGeoJSON:function(o){return Ui(this,{type:"Point",coordinates:ml(this.getLatLng(),o)})}};Ha.include(qr),bc.include(qr),hl.include(qr),zs.include({toGeoJSON:function(o){var h=!g(this._latlngs),_=hu(this._latlngs,h?1:0,!1,o);return Ui(this,{type:(h?"Multi":"")+"LineString",coordinates:_})}}),Fa.include({toGeoJSON:function(o){var h=!g(this._latlngs),_=h&&!g(this._latlngs[0]),T=hu(this._latlngs,_?2:h?1:0,!0,o);return h||(T=[T]),Ui(this,{type:(_?"Multi":"")+"Polygon",coordinates:T})}}),Ne.include({toMultiPoint:function(o){var h=[];return this.eachLayer(function(_){h.push(_.toGeoJSON(o).geometry.coordinates)}),Ui(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(o){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(o);var _=h==="GeometryCollection",T=[];return this.eachLayer(function(x){if(x.toGeoJSON){var C=x.toGeoJSON(o);if(_)T.push(C.geometry);else{var W=qa(C);W.type==="FeatureCollection"?T.push.apply(T,W.features):T.push(W)}}}),_?Ui(this,{geometries:T,type:"GeometryCollection"}):{type:"FeatureCollection",features:T}}});function fu(o,h){return new oi(o,h)}var Ef=fu,ds=ye.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,h,_){this._url=o,this._bounds=St(h),k(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Gt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){_e(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&os(this._image),this},bringToBack:function(){return this._map&&rr(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=St(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",h=this._image=o?this._url:te("img");if(Gt(h,"leaflet-image-layer"),this._zoomAnimated&&Gt(h,"leaflet-zoom-animated"),this.options.className&&Gt(h,this.options.className),h.onselectstart=E,h.onmousemove=E,h.onload=c(this.fire,this,"load"),h.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(o){var h=this._map.getZoomScale(o.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Dn(this._image,_,h)},_reset:function(){var o=this._image,h=new ct(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=h.getSize();jt(o,h.min),o.style.width=_.x+"px",o.style.height=_.y+"px"},_updateOpacity:function(){Le(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Ga=function(o,h,_){return new ds(o,h,_)},du=ds.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",h=this._image=o?this._url:te("video");if(Gt(h,"leaflet-image-layer"),this._zoomAnimated&&Gt(h,"leaflet-zoom-animated"),this.options.className&&Gt(h,this.options.className),h.onselectstart=E,h.onmousemove=E,h.onloadeddata=c(this.fire,this,"load"),o){for(var _=h.getElementsByTagName("source"),T=[],x=0;x<_.length;x++)T.push(_[x].src);this._url=_.length>0?T:[h.src];return}$(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var W=te("source");W.src=this._url[C],h.appendChild(W)}}});function wf(o,h,_){return new du(o,h,_)}var cr=ds.extend({_initImage:function(){var o=this._image=this._url;Gt(o,"leaflet-image-layer"),this._zoomAnimated&&Gt(o,"leaflet-zoom-animated"),this.options.className&&Gt(o,this.options.className),o.onselectstart=E,o.onmousemove=E}});function Sf(o,h,_){return new cr(o,h,_)}var ji=ye.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,h){o&&(o instanceof At||$(o))?(this._latlng=Et(o),k(this,h)):(k(this,o),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Le(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Le(this._container,1),this.bringToFront(),this.options.interactive&&(Gt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Le(this._container,0),this._removeTimeout=setTimeout(c(_e,void 0,this._container),200)):_e(this._container),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=Et(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&os(this._container),this},bringToBack:function(){return this._map&&rr(this._container),this},_prepareOpen:function(o){var h=this._source;if(!h._map)return!1;if(h instanceof Me){h=null;var _=this._source._layers;for(var T in _)if(_[T]._map){h=_[T];break}if(!h)return!1;this._source=h}if(!o)if(h.getCenter)o=h.getCenter();else if(h.getLatLng)o=h.getLatLng();else if(h.getBounds)o=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")o.innerHTML=h;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),h=j(this.options.offset),_=this._getAnchor();this._zoomAnimated?jt(this._container,o.add(_)):h=h.add(o).add(_);var T=this._containerBottom=-h.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=T+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});$t.include({_initOverlay:function(o,h,_,T){var x=h;return x instanceof o||(x=new o(T).setContent(h)),_&&x.setLatLng(_),x}}),ye.include({_initOverlay:function(o,h,_,T){var x=_;return x instanceof o?(k(x,T),x._source=this):(x=h&&!T?h:new o(T,this),x.setContent(_)),x}});var pl=ji.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,ji.prototype.openOn.call(this,o)},onAdd:function(o){ji.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Vs||this._source.on("preclick",Zn))},onRemove:function(o){ji.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Vs||this._source.off("preclick",Zn))},getEvents:function(){var o=ji.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",h=this._container=te("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=te("div",o+"-content-wrapper",h);if(this._contentNode=te("div",o+"-content",_),Os(h),zi(this._contentNode),Nt(h,"contextmenu",Zn),this._tipContainer=te("div",o+"-tip-container",h),this._tip=te("div",o+"-tip",this._tipContainer),this.options.closeButton){var T=this._closeButton=te("a",o+"-close-button",h);T.setAttribute("role","button"),T.setAttribute("aria-label","Close popup"),T.href="#close",T.innerHTML='<span aria-hidden="true">&#215;</span>',Nt(T,"click",function(x){Re(x),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,h=o.style;h.width="",h.whiteSpace="nowrap";var _=o.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),h.width=_+1+"px",h.whiteSpace="",h.height="";var T=o.offsetHeight,x=this.options.maxHeight,C="leaflet-popup-scrolled";x&&T>x?(h.height=x+"px",Gt(o,C)):be(o,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),_=this._getAnchor();jt(this._container,h.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,h=parseInt(as(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+h,T=this._containerWidth,x=new mt(this._containerLeft,-_-this._containerBottom);x._add(si(this._container));var C=o.layerPointToContainerPoint(x),W=j(this.options.autoPanPadding),et=j(this.options.autoPanPaddingTopLeft||W),lt=j(this.options.autoPanPaddingBottomRight||W),bt=o.getSize(),xt=0,Ct=0;C.x+T+lt.x>bt.x&&(xt=C.x+T-bt.x+lt.x),C.x-xt-et.x<0&&(xt=C.x-et.x),C.y+_+lt.y>bt.y&&(Ct=C.y+_-bt.y+lt.y),C.y-Ct-et.y<0&&(Ct=C.y-et.y),(xt||Ct)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([xt,Ct]))}},_getAnchor:function(){return j(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ap=function(o,h){return new pl(o,h)};$t.mergeOptions({closePopupOnClick:!0}),$t.include({openPopup:function(o,h,_){return this._initOverlay(pl,o,h,_).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),ye.include({bindPopup:function(o,h){return this._popup=this._initOverlay(pl,this._popup,o,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Me||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Sn(o);var h=o.layer||o.target;if(this._popup._source===h&&!(h instanceof Vs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=h,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var mu=ji.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){ji.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){ji.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=ji.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",h=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=te("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var h,_,T=this._map,x=this._container,C=T.latLngToContainerPoint(T.getCenter()),W=T.layerPointToContainerPoint(o),et=this.options.direction,lt=x.offsetWidth,bt=x.offsetHeight,xt=j(this.options.offset),Ct=this._getAnchor();et==="top"?(h=lt/2,_=bt):et==="bottom"?(h=lt/2,_=0):et==="center"?(h=lt/2,_=bt/2):et==="right"?(h=0,_=bt/2):et==="left"?(h=lt,_=bt/2):W.x<C.x?(et="right",h=0,_=bt/2):(et="left",h=lt+(xt.x+Ct.x)*2,_=bt/2),o=o.subtract(j(h,_,!0)).add(xt).add(Ct),be(x,"leaflet-tooltip-right"),be(x,"leaflet-tooltip-left"),be(x,"leaflet-tooltip-top"),be(x,"leaflet-tooltip-bottom"),Gt(x,"leaflet-tooltip-"+et),jt(x,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Le(this._container,o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(h)},_getAnchor:function(){return j(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Rp=function(o,h){return new mu(o,h)};$t.include({openTooltip:function(o,h,_){return this._initOverlay(mu,o,h,_).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),ye.include({bindTooltip:function(o,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(mu,this._tooltip,o,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var h=o?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[h](_),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Me||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&(Nt(h,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),Nt(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var h=o.latlng,_,T;this._tooltip.options.sticky&&o.originalEvent&&(_=this._map.mouseEventToContainerPoint(o.originalEvent),T=this._map.containerPointToLayerPoint(_),h=this._map.layerPointToLatLng(T)),this._tooltip.setLatLng(h)}});var Ec=fs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var h=o&&o.tagName==="DIV"?o:document.createElement("div"),_=this.options;if(_.html instanceof Element?(ln(h),h.appendChild(_.html)):h.innerHTML=_.html!==!1?_.html:"",_.bgPos){var T=j(_.bgPos);h.style.backgroundPosition=-T.x+"px "+-T.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function xf(o){return new Ec(o)}fs.Default=ja;var Gr=ye.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ot.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){k(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),_e(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(os(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(rr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof mt?o:new mt(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var h=this.getPane().children,_=-o(-1/0,1/0),T=0,x=h.length,C;T<x;T++)C=h[T].style.zIndex,h[T]!==this._container&&C&&(_=o(_,+C));isFinite(_)&&(this.options.zIndex=_+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ot.ielt9){Le(this._container,this.options.opacity);var o=+new Date,h=!1,_=!1;for(var T in this._tiles){var x=this._tiles[T];if(!(!x.current||!x.loaded)){var C=Math.min(1,(o-x.loaded)/200);Le(x.el,C),C<1?h=!0:(x.active?_=!0:this._onOpaqueTile(x),x.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),h&&(G(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=te("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,h=this.options.maxZoom;if(o!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===o?(this._levels[_].el.style.zIndex=h-Math.abs(o-_),this._onUpdateLevel(_)):(_e(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var T=this._levels[o],x=this._map;return T||(T=this._levels[o]={},T.el=te("div","leaflet-tile-container leaflet-zoom-animated",this._container),T.el.style.zIndex=h,T.origin=x.project(x.unproject(x.getPixelOrigin()),o).round(),T.zoom=o,this._setZoomTransform(T,x.getCenter(),x.getZoom()),E(T.el.offsetWidth),this._onCreateLevel(T)),this._level=T,T}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var o,h,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)h=this._tiles[o],h.retain=h.current;for(o in this._tiles)if(h=this._tiles[o],h.current&&!h.active){var T=h.coords;this._retainParent(T.x,T.y,T.z,T.z-5)||this._retainChildren(T.x,T.y,T.z,T.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var h in this._tiles)this._tiles[h].coords.z===o&&this._removeTile(h)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)_e(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,h,_,T){var x=Math.floor(o/2),C=Math.floor(h/2),W=_-1,et=new mt(+x,+C);et.z=+W;var lt=this._tileCoordsToKey(et),bt=this._tiles[lt];return bt&&bt.active?(bt.retain=!0,!0):(bt&&bt.loaded&&(bt.retain=!0),W>T?this._retainParent(x,C,W,T):!1)},_retainChildren:function(o,h,_,T){for(var x=2*o;x<2*o+2;x++)for(var C=2*h;C<2*h+2;C++){var W=new mt(x,C);W.z=_+1;var et=this._tileCoordsToKey(W),lt=this._tiles[et];if(lt&&lt.active){lt.retain=!0;continue}else lt&&lt.loaded&&(lt.retain=!0);_+1<T&&this._retainChildren(x,C,_+1,T)}},_resetView:function(o){var h=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var h=this.options;return h.minNativeZoom!==void 0&&o<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<o?h.maxNativeZoom:o},_setView:function(o,h,_,T){var x=Math.round(h);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var C=this.options.updateWhenZooming&&x!==this._tileZoom;(!T||C)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(o),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(o,h)},_setZoomTransforms:function(o,h){for(var _ in this._levels)this._setZoomTransform(this._levels[_],o,h)},_setZoomTransform:function(o,h,_){var T=this._map.getZoomScale(_,o.zoom),x=o.origin.multiplyBy(T).subtract(this._map._getNewPixelOrigin(h,_)).round();Ot.any3d?Dn(o.el,x,T):jt(o.el,x)},_resetGrid:function(){var o=this._map,h=o.options.crs,_=this._tileSize=this.getTileSize(),T=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,h.wrapLng[0]],T).x/_.x),Math.ceil(o.project([0,h.wrapLng[1]],T).x/_.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([h.wrapLat[0],0],T).y/_.x),Math.ceil(o.project([h.wrapLat[1],0],T).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var h=this._map,_=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),T=h.getZoomScale(_,this._tileZoom),x=h.project(o,this._tileZoom).floor(),C=h.getSize().divideBy(T*2);return new ct(x.subtract(C),x.add(C))},_update:function(o){var h=this._map;if(h){var _=this._clampZoom(h.getZoom());if(o===void 0&&(o=h.getCenter()),this._tileZoom!==void 0){var T=this._getTiledPixelBounds(o),x=this._pxBoundsToTileRange(T),C=x.getCenter(),W=[],et=this.options.keepBuffer,lt=new ct(x.getBottomLeft().subtract([et,-et]),x.getTopRight().add([et,-et]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var bt in this._tiles){var xt=this._tiles[bt].coords;(xt.z!==this._tileZoom||!lt.contains(new mt(xt.x,xt.y)))&&(this._tiles[bt].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(o,_);return}for(var Ct=x.min.y;Ct<=x.max.y;Ct++)for(var Mt=x.min.x;Mt<=x.max.x;Mt++){var qt=new mt(Mt,Ct);if(qt.z=this._tileZoom,!!this._isValidTile(qt)){var Ve=this._tiles[this._tileCoordsToKey(qt)];Ve?Ve.current=!0:W.push(qt)}}if(W.sort(function(An,gi){return An.distanceTo(C)-gi.distanceTo(C)}),W.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var We=document.createDocumentFragment();for(Mt=0;Mt<W.length;Mt++)this._addTile(W[Mt],We);this._level.el.appendChild(We)}}}},_isValidTile:function(o){var h=this._map.options.crs;if(!h.infinite){var _=this._globalTileRange;if(!h.wrapLng&&(o.x<_.min.x||o.x>_.max.x)||!h.wrapLat&&(o.y<_.min.y||o.y>_.max.y))return!1}if(!this.options.bounds)return!0;var T=this._tileCoordsToBounds(o);return St(this.options.bounds).overlaps(T)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var h=this._map,_=this.getTileSize(),T=o.scaleBy(_),x=T.add(_),C=h.unproject(T,o.z),W=h.unproject(x,o.z);return[C,W]},_tileCoordsToBounds:function(o){var h=this._tileCoordsToNwSe(o),_=new yt(h[0],h[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var h=o.split(":"),_=new mt(+h[0],+h[1]);return _.z=+h[2],_},_removeTile:function(o){var h=this._tiles[o];h&&(_e(h.el),delete this._tiles[o],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){Gt(o,"leaflet-tile");var h=this.getTileSize();o.style.width=h.x+"px",o.style.height=h.y+"px",o.onselectstart=E,o.onmousemove=E,Ot.ielt9&&this.options.opacity<1&&Le(o,this.options.opacity)},_addTile:function(o,h){var _=this._getTilePos(o),T=this._tileCoordsToKey(o),x=this.createTile(this._wrapCoords(o),c(this._tileReady,this,o));this._initTile(x),this.createTile.length<2&&H(c(this._tileReady,this,o,null,x)),jt(x,_),this._tiles[T]={el:x,coords:o,current:!0},h.appendChild(x),this.fire("tileloadstart",{tile:x,coords:o})},_tileReady:function(o,h,_){h&&this.fire("tileerror",{error:h,tile:_,coords:o});var T=this._tileCoordsToKey(o);_=this._tiles[T],_&&(_.loaded=+new Date,this._map._fadeAnimated?(Le(_.el,0),G(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),h||(Gt(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ot.ielt9||!this._map._fadeAnimated?H(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var h=new mt(this._wrapX?v(o.x,this._wrapX):o.x,this._wrapY?v(o.y,this._wrapY):o.y);return h.z=o.z,h},_pxBoundsToTileRange:function(o){var h=this.getTileSize();return new ct(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function Hi(o){return new Gr(o)}var Zr=Gr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,h){this._url=o,h=k(this,h),h.detectRetina&&Ot.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,h){return this._url===o&&h===void 0&&(h=!0),this._url=o,h||this.redraw(),this},createTile:function(o,h){var _=document.createElement("img");return Nt(_,"load",c(this._tileOnLoad,this,h,_)),Nt(_,"error",c(this._tileOnError,this,h,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(o),_},getTileUrl:function(o){var h={r:Ot.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-o.y;this.options.tms&&(h.y=_),h["-y"]=_}return F(this._url,r(h,this.options))},_tileOnLoad:function(o,h){Ot.ielt9?setTimeout(c(o,this,null,h),0):o(null,h)},_tileOnError:function(o,h,_){var T=this.options.errorTileUrl;T&&h.getAttribute("src")!==T&&(h.src=T),o(_,h)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,h=this.options.maxZoom,_=this.options.zoomReverse,T=this.options.zoomOffset;return _&&(o=h-o),o+T},_getSubdomain:function(o){var h=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var o,h;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(h=this._tiles[o].el,h.onload=E,h.onerror=E,!h.complete)){h.src=J;var _=this._tiles[o].coords;_e(h),delete this._tiles[o],this.fire("tileabort",{tile:h,coords:_})}},_removeTile:function(o){var h=this._tiles[o];if(h)return h.el.setAttribute("src",J),Gr.prototype._removeTile.call(this,o)},_tileReady:function(o,h,_){if(!(!this._map||_&&_.getAttribute("src")===J))return Gr.prototype._tileReady.call(this,o,h,_)}});function li(o,h){return new Zr(o,h)}var ui=Zr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,h){this._url=o;var _=r({},this.defaultWmsParams);for(var T in h)T in this.options||(_[T]=h[T]);h=k(this,h);var x=h.detectRetina&&Ot.retina?2:1,C=this.getTileSize();_.width=C.x*x,_.height=C.y*x,this.wmsParams=_},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Zr.prototype.onAdd.call(this,o)},getTileUrl:function(o){var h=this._tileCoordsToNwSe(o),_=this._crs,T=Tt(_.project(h[0]),_.project(h[1])),x=T.min,C=T.max,W=(this._wmsVersion>=1.3&&this._crs===Qe?[x.y,x.x,C.y,C.x]:[x.x,x.y,C.x,C.y]).join(","),et=Zr.prototype.getTileUrl.call(this,o);return et+O(this.wmsParams,et,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+W},setParams:function(o,h){return r(this.wmsParams,o),h||this.redraw(),this}});function Za(o,h){return new ui(o,h)}Zr.WMS=ui,li.wms=Za;var Fi=ye.extend({options:{padding:.1},initialize:function(o){k(this,o),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Gt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,h){var _=this._map.getZoomScale(h,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,h),C=T.multiplyBy(-_).add(x).subtract(this._map._getNewPixelOrigin(o,h));Ot.any3d?Dn(this._container,C,_):jt(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,h=this._map.getSize(),_=this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();this._bounds=new ct(_,_.add(h.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),gl=Fi.extend({options:{tolerance:0},getEvents:function(){var o=Fi.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Fi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");Nt(o,"mousemove",this._onMouseMove,this),Nt(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Nt(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,_e(this._container),ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var h in this._layers)o=this._layers[h],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fi.prototype._update.call(this);var o=this._bounds,h=this._container,_=o.getSize(),T=Ot.retina?2:1;jt(h,o.min),h.width=T*_.x,h.height=T*_.y,h.style.width=_.x+"px",h.style.height=_.y+"px",Ot.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Fi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[m(o)]=o;var h=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var h=o._order,_=h.next,T=h.prev;_?_.prev=T:this._drawLast=T,T?T.next=_:this._drawFirst=_,delete o._order,delete this._layers[m(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var h=o.options.dashArray.split(/[, ]+/),_=[],T,x;for(x=0;x<h.length;x++){if(T=Number(h[x]),isNaN(T))return;_.push(T)}o.options._dashArray=_}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||H(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var h=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ct,this._redrawBounds.extend(o._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(o._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var h=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,h=this._redrawBounds;if(this._ctx.save(),h){var _=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var T=this._drawFirst;T;T=T.next)o=T.layer,(!h||o._pxBounds&&o._pxBounds.intersects(h))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,h){if(this._drawing){var _,T,x,C,W=o._parts,et=W.length,lt=this._ctx;if(et){for(lt.beginPath(),_=0;_<et;_++){for(T=0,x=W[_].length;T<x;T++)C=W[_][T],lt[T?"lineTo":"moveTo"](C.x,C.y);h&&lt.closePath()}this._fillStroke(lt,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var h=o._point,_=this._ctx,T=Math.max(Math.round(o._radius),1),x=(Math.max(Math.round(o._radiusY),1)||T)/T;x!==1&&(_.save(),_.scale(1,x)),_.beginPath(),_.arc(h.x,h.y/x,T,0,Math.PI*2,!1),x!==1&&_.restore(),this._fillStroke(_,o)}},_fillStroke:function(o,h){var _=h.options;_.fill&&(o.globalAlpha=_.fillOpacity,o.fillStyle=_.fillColor||_.color,o.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(o.setLineDash&&o.setLineDash(h.options&&h.options._dashArray||[]),o.globalAlpha=_.opacity,o.lineWidth=_.weight,o.strokeStyle=_.color,o.lineCap=_.lineCap,o.lineJoin=_.lineJoin,o.stroke())},_onClick:function(o){for(var h=this._map.mouseEventToLayerPoint(o),_,T,x=this._drawFirst;x;x=x.next)_=x.layer,_.options.interactive&&_._containsPoint(h)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(_))&&(T=_);this._fireEvent(T?[T]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,h)}},_handleMouseOut:function(o){var h=this._hoveredLayer;h&&(be(this._container,"leaflet-interactive"),this._fireEvent([h],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,h){if(!this._mouseHoverThrottled){for(var _,T,x=this._drawFirst;x;x=x.next)_=x.layer,_.options.interactive&&_._containsPoint(h)&&(T=_);T!==this._hoveredLayer&&(this._handleMouseOut(o),T&&(Gt(this._container,"leaflet-interactive"),this._fireEvent([T],o,"mouseover"),this._hoveredLayer=T)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,h,_){this._map._fireDOMEvent(h,_||h.type,o)},_bringToFront:function(o){var h=o._order;if(h){var _=h.next,T=h.prev;if(_)_.prev=T;else return;T?T.next=_:_&&(this._drawFirst=_),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(o)}},_bringToBack:function(o){var h=o._order;if(h){var _=h.next,T=h.prev;if(T)T.next=_;else return;_?_.prev=T:T&&(this._drawLast=T),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(o)}}});function _l(o){return Ot.canvas?new gl(o):null}var Wr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Wa={_initContainer:function(){this._container=te("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Fi.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var h=o._container=Wr("shape");Gt(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",o._path=Wr("path"),h.appendChild(o._path),this._updateStyle(o),this._layers[m(o)]=o},_addPath:function(o){var h=o._container;this._container.appendChild(h),o.options.interactive&&o.addInteractiveTarget(h)},_removePath:function(o){var h=o._container;_e(h),o.removeInteractiveTarget(h),delete this._layers[m(o)]},_updateStyle:function(o){var h=o._stroke,_=o._fill,T=o.options,x=o._container;x.stroked=!!T.stroke,x.filled=!!T.fill,T.stroke?(h||(h=o._stroke=Wr("stroke")),x.appendChild(h),h.weight=T.weight+"px",h.color=T.color,h.opacity=T.opacity,T.dashArray?h.dashStyle=$(T.dashArray)?T.dashArray.join(" "):T.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=T.lineCap.replace("butt","flat"),h.joinstyle=T.lineJoin):h&&(x.removeChild(h),o._stroke=null),T.fill?(_||(_=o._fill=Wr("fill")),x.appendChild(_),_.color=T.fillColor||T.color,_.opacity=T.fillOpacity):_&&(x.removeChild(_),o._fill=null)},_updateCircle:function(o){var h=o._point.round(),_=Math.round(o._radius),T=Math.round(o._radiusY||_);this._setPath(o,o._empty()?"M0 0":"AL "+h.x+","+h.y+" "+_+","+T+" 0,"+65535*360)},_setPath:function(o,h){o._path.v=h},_bringToFront:function(o){os(o._container)},_bringToBack:function(o){rr(o._container)}},yl=Ot.vml?Wr:wa,hr=Fi.extend({_initContainer:function(){this._container=yl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=yl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){_e(this._container),ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fi.prototype._update.call(this);var o=this._bounds,h=o.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,_.setAttribute("width",h.x),_.setAttribute("height",h.y)),jt(_,o.min),_.setAttribute("viewBox",[o.min.x,o.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(o){var h=o._path=yl("path");o.options.className&&Gt(h,o.options.className),o.options.interactive&&Gt(h,"leaflet-interactive"),this._updateStyle(o),this._layers[m(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){_e(o._path),o.removeInteractiveTarget(o._path),delete this._layers[m(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var h=o._path,_=o.options;h&&(_.stroke?(h.setAttribute("stroke",_.color),h.setAttribute("stroke-opacity",_.opacity),h.setAttribute("stroke-width",_.weight),h.setAttribute("stroke-linecap",_.lineCap),h.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?h.setAttribute("stroke-dasharray",_.dashArray):h.removeAttribute("stroke-dasharray"),_.dashOffset?h.setAttribute("stroke-dashoffset",_.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),_.fill?(h.setAttribute("fill",_.fillColor||_.color),h.setAttribute("fill-opacity",_.fillOpacity),h.setAttribute("fill-rule",_.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(o,h){this._setPath(o,Yo(o._parts,h))},_updateCircle:function(o){var h=o._point,_=Math.max(Math.round(o._radius),1),T=Math.max(Math.round(o._radiusY),1)||_,x="a"+_+","+T+" 0 1,0 ",C=o._empty()?"M0 0":"M"+(h.x-_)+","+h.y+x+_*2+",0 "+x+-_*2+",0 ";this._setPath(o,C)},_setPath:function(o,h){o._path.setAttribute("d",h)},_bringToFront:function(o){os(o._path)},_bringToBack:function(o){rr(o._path)}});Ot.vml&&hr.include(Wa);function Yr(o){return Ot.svg||Ot.vml?new hr(o):null}$t.include({getRenderer:function(o){var h=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var h=this._paneRenderers[o];return h===void 0&&(h=this._createRenderer({pane:o}),this._paneRenderers[o]=h),h},_createRenderer:function(o){return this.options.preferCanvas&&_l(o)||Yr(o)}});var Af=Fa.extend({initialize:function(o,h){Fa.prototype.initialize.call(this,this._boundsToLatLngs(o),h)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=St(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function ci(o,h){return new Af(o,h)}hr.create=yl,hr.pointsToPath=Yo,oi.geometryToLayer=fl,oi.coordsToLatLng=cu,oi.coordsToLatLngs=dl,oi.latLngToCoords=ml,oi.latLngsToCoords=hu,oi.getFeature=Ui,oi.asFeature=qa,$t.mergeOptions({boxZoom:!0});var pu=Wn.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){Nt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){_e(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),wn(),Br(),this._startPoint=this._map.mouseEventToContainerPoint(o),Nt(document,{contextmenu:Sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=te("div","leaflet-zoom-box",this._container),Gt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var h=new ct(this._point,this._startPoint),_=h.getSize();jt(this._box,h.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(_e(this._box),be(this._container,"leaflet-crosshair")),Li(),rl(),ue(document,{contextmenu:Sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var h=new yt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});$t.addInitHook("addHandler","boxZoom",pu),$t.mergeOptions({doubleClickZoom:!0});var ms=Wn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var h=this._map,_=h.getZoom(),T=h.options.zoomDelta,x=o.originalEvent.shiftKey?_-T:_+T;h.options.doubleClickZoom==="center"?h.setZoom(x):h.setZoomAround(o.containerPoint,x)}});$t.addInitHook("addHandler","doubleClickZoom",ms),$t.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var wc=Wn.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Bi(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}Gt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){be(this._map._container,"leaflet-grab"),be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=St(this._map.options.maxBounds);this._offsetLimit=Tt(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var h=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(h),this._prunePositions(h)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,h){return o-(o-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;o.x<h.min.x&&(o.x=this._viscousLimit(o.x,h.min.x)),o.y<h.min.y&&(o.y=this._viscousLimit(o.y,h.min.y)),o.x>h.max.x&&(o.x=this._viscousLimit(o.x,h.max.x)),o.y>h.max.y&&(o.y=this._viscousLimit(o.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,h=Math.round(o/2),_=this._initialWorldOffset,T=this._draggable._newPos.x,x=(T-h+_)%o+h-_,C=(T+h+_)%o-h-_,W=Math.abs(x+_)<Math.abs(C+_)?x:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=W},_onDragEnd:function(o){var h=this._map,_=h.options,T=!_.inertia||o.noInertia||this._times.length<2;if(h.fire("dragend",o),T)h.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,W=_.easeLinearity,et=x.multiplyBy(W/C),lt=et.distanceTo([0,0]),bt=Math.min(_.inertiaMaxSpeed,lt),xt=et.multiplyBy(bt/lt),Ct=bt/(_.inertiaDeceleration*W),Mt=xt.multiplyBy(-Ct/2).round();!Mt.x&&!Mt.y?h.fire("moveend"):(Mt=h._limitOffset(Mt,h.options.maxBounds),H(function(){h.panBy(Mt,{duration:Ct,easeLinearity:W,noMoveStart:!0,animate:!0})}))}}});$t.addInitHook("addHandler","dragging",wc),$t.mergeOptions({keyboard:!0,keyboardPanDelta:80});var vl=Wn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),Nt(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,h=document.documentElement,_=o.scrollTop||h.scrollTop,T=o.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(T,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var h=this._panKeys={},_=this.keyCodes,T,x;for(T=0,x=_.left.length;T<x;T++)h[_.left[T]]=[-1*o,0];for(T=0,x=_.right.length;T<x;T++)h[_.right[T]]=[o,0];for(T=0,x=_.down.length;T<x;T++)h[_.down[T]]=[0,o];for(T=0,x=_.up.length;T<x;T++)h[_.up[T]]=[0,-1*o]},_setZoomDelta:function(o){var h=this._zoomKeys={},_=this.keyCodes,T,x;for(T=0,x=_.zoomIn.length;T<x;T++)h[_.zoomIn[T]]=o;for(T=0,x=_.zoomOut.length;T<x;T++)h[_.zoomOut[T]]=-o},_addHooks:function(){Nt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var h=o.keyCode,_=this._map,T;if(h in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(T=this._panKeys[h],o.shiftKey&&(T=j(T).multiplyBy(3)),_.options.maxBounds&&(T=_._limitOffset(j(T),_.options.maxBounds)),_.options.worldCopyJump){var x=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(T)));_.panTo(x)}else _.panBy(T)}else if(h in this._zoomKeys)_.setZoom(_.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;Sn(o)}}});$t.addInitHook("addHandler","keyboard",vl),$t.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var fr=Wn.extend({addHooks:function(){Nt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var h=Ur(o),_=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var T=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),T),Sn(o)},_performZoom:function(){var o=this._map,h=o.getZoom(),_=this._map.options.zoomSnap||0;o._stop();var T=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(T))))/Math.LN2,C=_?Math.ceil(x/_)*_:x,W=o._limitZoom(h+(this._delta>0?C:-C))-h;this._delta=0,this._startTime=null,W&&(o.options.scrollWheelZoom==="center"?o.setZoom(h+W):o.setZoomAround(this._lastMousePos,h+W))}});$t.addInitHook("addHandler","scrollWheelZoom",fr);var Sc=600;$t.mergeOptions({tapHold:Ot.touchNative&&Ot.safari&&Ot.mobile,tapTolerance:15});var gu=Wn.extend({addHooks:function(){Nt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var h=o.touches[0];this._startPos=this._newPos=new mt(h.clientX,h.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(Nt(document,"touchend",Re),Nt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),Sc),Nt(document,"touchend touchcancel contextmenu",this._cancel,this),Nt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){ue(document,"touchend",Re),ue(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),ue(document,"touchend touchcancel contextmenu",this._cancel,this),ue(document,"touchmove",this._onMove,this)},_onMove:function(o){var h=o.touches[0];this._newPos=new mt(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,h){var _=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});_._simulated=!0,h.target.dispatchEvent(_)}});$t.addInitHook("addHandler","tapHold",gu),$t.mergeOptions({touchZoom:Ot.touch,bounceAtZoomLimits:!0});var $r=Wn.extend({addHooks:function(){Gt(this._map._container,"leaflet-touch-zoom"),Nt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){be(this._map._container,"leaflet-touch-zoom"),ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var h=this._map;if(!(!o.touches||o.touches.length!==2||h._animatingZoom||this._zooming)){var _=h.mouseEventToContainerPoint(o.touches[0]),T=h.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(_.add(T)._divideBy(2))),this._startDist=_.distanceTo(T),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),Nt(document,"touchmove",this._onTouchMove,this),Nt(document,"touchend touchcancel",this._onTouchEnd,this),Re(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var h=this._map,_=h.mouseEventToContainerPoint(o.touches[0]),T=h.mouseEventToContainerPoint(o.touches[1]),x=_.distanceTo(T)/this._startDist;if(this._zoom=h.getScaleZoom(x,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&x<1||this._zoom>h.getMaxZoom()&&x>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var C=_._add(T)._divideBy(2)._subtract(this._centerPoint);if(x===1&&C.x===0&&C.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var W=c(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=H(W,this,!0),Re(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),ue(document,"touchmove",this._onTouchMove,this),ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});$t.addInitHook("addHandler","touchZoom",$r),$t.BoxZoom=pu,$t.DoubleClickZoom=ms,$t.Drag=wc,$t.Keyboard=vl,$t.ScrollWheelZoom=fr,$t.TapHold=gu,$t.TouchZoom=$r,e.Bounds=ct,e.Browser=Ot,e.CRS=Ae,e.Canvas=gl,e.Circle=bc,e.CircleMarker=hl,e.Class=Yt,e.Control=gn,e.DivIcon=Ec,e.DivOverlay=ji,e.DomEvent=su,e.DomUtil=al,e.Draggable=Bi,e.Evented=vt,e.FeatureGroup=Me,e.GeoJSON=oi,e.GridLayer=Gr,e.Handler=Wn,e.Icon=fs,e.ImageOverlay=ds,e.LatLng=At,e.LatLngBounds=yt,e.Layer=ye,e.LayerGroup=Ne,e.LineUtil=N,e.Map=$t,e.Marker=Ha,e.Mixin=Hr,e.Path=Vs,e.Point=mt,e.PolyUtil=za,e.Polygon=Fa,e.Polyline=zs,e.Popup=pl,e.PosAnimation=jr,e.Projection=wt,e.Rectangle=Af,e.Renderer=Fi,e.SVG=hr,e.SVGOverlay=cr,e.TileLayer=Zr,e.Tooltip=mu,e.Transformation=Ii,e.Util=q,e.VideoOverlay=du,e.bind=c,e.bounds=Tt,e.canvas=_l,e.circle=Sp,e.circleMarker=Tf,e.control=xn,e.divIcon=xf,e.extend=r,e.featureGroup=hs,e.geoJSON=fu,e.geoJson=Ef,e.gridLayer=Hi,e.icon=uu,e.imageOverlay=Ga,e.latLng=Et,e.latLngBounds=St,e.layerGroup=Ns,e.map=us,e.marker=vc,e.point=j,e.polygon=ai,e.polyline=xp,e.popup=Ap,e.rectangle=ci,e.setOptions=k,e.stamp=m,e.svg=Yr,e.svgOverlay=Sf,e.tileLayer=li,e.tooltip=Rp,e.transformation=Ci,e.version=i,e.videoOverlay=wf;var Ya=window.L;e.noConflict=function(){return window.L=Ya,this},window.L=e})}(dh,dh.exports)),dh.exports}var af=A2();const w1=Ty(af);function Oy(n,t,e){return Object.freeze({instance:n,context:t,container:e})}function Dy(n,t){return t==null?function(i,r){const l=K.useRef(void 0);return l.current||(l.current=n(i,r)),l}:function(i,r){const l=K.useRef(void 0);l.current||(l.current=n(i,r));const c=K.useRef(i),{instance:f}=l.current;return K.useEffect(function(){c.current!==i&&(t(f,i,c.current),c.current=i)},[f,i,t]),l}}function R2(n,t){K.useEffect(function(){return(t.layerContainer??t.map).addLayer(n.instance),function(){var l;(l=t.layerContainer)==null||l.removeLayer(n.instance),t.map.removeLayer(n.instance)}},[t,n])}function S1(n){return function(e){const i=T1(),r=n(My(e,i),i);return b1(i.map,e.attribution),E1(r.current,e.eventHandlers),R2(r.current,i),r}}function I2(n,t){const e=Dy(n,t),i=S1(e);return T2(i)}function C2(n,t){const e=Dy(n),i=S2(e,t);return E2(i)}function P2(n,t){const e=Dy(n,t),i=S1(e);return w2(i)}function M2(n,t,e){const{opacity:i,zIndex:r}=t;i!=null&&i!==e.opacity&&n.setOpacity(i),r!=null&&r!==e.zIndex&&n.setZIndex(r)}function O2({bounds:n,boundsOptions:t,center:e,children:i,className:r,id:l,placeholder:c,style:f,whenReady:m,zoom:p,...v},E){const[S]=K.useState({className:r,id:l,style:f}),[I,P]=K.useState(null),k=K.useRef(void 0);K.useImperativeHandle(E,()=>(I==null?void 0:I.map)??null,[I]);const O=K.useCallback(F=>{if(F!==null&&!k.current){const $=new af.Map(F,v);k.current=$,e!=null&&p!=null?$.setView(e,p):n!=null&&$.fitBounds(n,t),m!=null&&$.whenReady(m),P(v2($))}},[]);K.useEffect(()=>()=>{I==null||I.map.remove()},[I]);const B=I?ge.createElement(Py,{value:I},i):c??null;return ge.createElement("div",{...S,ref:O},B)}const D2=K.forwardRef(O2),k2=I2(function({position:t,...e},i){const r=new af.Marker(t,e);return Oy(r,b2(i,{overlayContainer:r}))},function(t,e,i){e.position!==i.position&&t.setLatLng(e.position),e.icon!=null&&e.icon!==i.icon&&t.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==i.opacity&&t.setOpacity(e.opacity),t.dragging!=null&&e.draggable!==i.draggable&&(e.draggable===!0?t.dragging.enable():t.dragging.disable())}),L2=C2(function(t,e){const i=new af.Popup(t,e.overlayContainer);return Oy(i,e)},function(t,e,{position:i},r){K.useEffect(function(){const{instance:c}=t;function f(p){p.popup===c&&(c.update(),r(!0))}function m(p){p.popup===c&&r(!1)}return e.map.on({popupopen:f,popupclose:m}),e.overlayContainer==null?(i!=null&&c.setLatLng(i),c.openOn(e.map)):e.overlayContainer.bindPopup(c),function(){var v;e.map.off({popupopen:f,popupclose:m}),(v=e.overlayContainer)==null||v.unbindPopup(),e.map.removeLayer(c)}},[t,e,r,i])}),N2=P2(function({url:t,...e},i){const r=new af.TileLayer(t,My(e,i));return Oy(r,i)},function(t,e,i){M2(t,e,i);const{url:r}=e;r!=null&&r!==i.url&&t.setUrl(r)}),V2=()=>{};var aE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},z2=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[e++];t[i++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[e++],c=n[e++],f=n[e++],m=((r&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[e++],c=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return t.join("")},A1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,f=c?n[r+1]:0,m=r+2<n.length,p=m?n[r+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let S=(f&15)<<2|p>>6,I=p&63;m||(I=64,c||(S=64)),i.push(e[v],e[E],e[S],e[I])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(x1(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):z2(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const l=e[n.charAt(r++)],f=r<n.length?e[n.charAt(r)]:0;++r;const p=r<n.length?e[n.charAt(r)]:64;++r;const E=r<n.length?e[n.charAt(r)]:64;if(++r,l==null||f==null||p==null||E==null)throw new B2;const S=l<<2|f>>4;if(i.push(S),p!==64){const I=f<<4&240|p>>2;if(i.push(I),E!==64){const P=p<<6&192|E;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class B2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U2=function(n){const t=x1(n);return A1.encodeByteArray(t,!0)},rm=function(n){return U2(n).replace(/\./g,"")},R1=function(n){try{return A1.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=()=>j2().__FIREBASE_DEFAULTS__,F2=()=>{if(typeof process>"u"||typeof aE>"u")return;const n=aE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},q2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&R1(n[1]);return t&&JSON.parse(t)},Bm=()=>{try{return V2()||H2()||F2()||q2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},I1=n=>{var t,e;return(e=(t=Bm())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},G2=n=>{const t=I1(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},C1=()=>{var n;return(n=Bm())===null||n===void 0?void 0:n.config},P1=n=>{var t;return(t=Bm())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(n){return n.endsWith(".cloudworkstations.dev")}async function M1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[rm(JSON.stringify(e)),rm(JSON.stringify(c)),""].join(".")}const Rh={};function Y2(){const n={prod:[],emulator:[]};for(const t of Object.keys(Rh))Rh[t]?n.emulator.push(t):n.prod.push(t);return n}function $2(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let oE=!1;function O1(n,t){if(typeof window>"u"||typeof document>"u"||!lc(window.location.host)||Rh[n]===t||Rh[n]||oE)return;Rh[n]=t;function e(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=Y2().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{oE=!0,c()},S}function v(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=$2(i),I=e("text"),P=document.getElementById(I)||document.createElement("span"),k=e("learnmore"),O=document.getElementById(k)||document.createElement("a"),B=e("preprendIcon"),F=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const $=S.element;f($),v(O,k);const nt=p();m(F,B),$.append(F,P,O,nt),document.body.appendChild($)}l?(P.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function K2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ii())}function X2(){var n;const t=(n=Bm())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Q2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ky(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function J2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tM(){const n=ii();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function eM(){return!X2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ly(){try{return typeof indexedDB=="object"}catch{return!1}}function Ny(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var l;t(((l=r.error)===null||l===void 0?void 0:l.message)||"")}}catch(e){t(e)}})}function D1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="FirebaseError";class Qs extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=nM,Object.setPrototypeOf(this,Qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yl.prototype.create)}}class Yl{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,l=this.errors[t],c=l?iM(l,i):"Error",f=`${this.serviceName}: ${c} (${r}).`;return new Qs(r,f,i)}}function iM(n,t){return n.replace(sM,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const sM=/\{\$([^}]+)}/g;function rM(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Do(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const l=n[r],c=t[r];if(lE(l)&&lE(c)){if(!Do(l,c))return!1}else if(l!==c)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function lE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function mh(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,l]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(l)}}),t}function ph(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function aM(n,t){const e=new oM(n,t);return e.subscribe.bind(e)}class oM{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");lM(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=l_),r.error===void 0&&(r.error=l_),r.complete===void 0&&(r.complete=l_);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lM(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function l_(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=1e3,cM=2,hM=4*60*60*1e3,fM=.5;function uE(n,t=uM,e=cM){const i=t*Math.pow(e,n),r=Math.round(fM*i*(Math.random()-.5)*2);return Math.min(hM,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(n){return n&&n._delegate?n._delegate:n}class Ws{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Z2;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(pM(t))try{this.getOrInitializeService({instanceIdentifier:Dl})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:r});i.resolve(l)}catch{}}}}clearInstance(t=Dl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Dl){return this.instances.has(t)}getOptions(t=Dl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(r)}return r}onInit(t,e){var i;const r=this.normalizeInstanceIdentifier(e),l=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;l.add(t),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&t(c,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mM(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Dl){return this.component?this.component.multipleInstances?t:Dl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mM(n){return n===Dl?void 0:n}function pM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new dM(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ae||(ae={}));const _M={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},yM=ae.INFO,vM={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},bM=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=vM[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Um{constructor(t){this.name=t,this._logLevel=yM,this._logHandler=bM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ae))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?_M[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...t),this._logHandler(this,ae.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...t),this._logHandler(this,ae.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...t),this._logHandler(this,ae.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...t),this._logHandler(this,ae.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...t),this._logHandler(this,ae.ERROR,...t)}}const TM=(n,t)=>t.some(e=>n instanceof e);let cE,hE;function EM(){return cE||(cE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wM(){return hE||(hE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k1=new WeakMap,D_=new WeakMap,L1=new WeakMap,u_=new WeakMap,Vy=new WeakMap;function SM(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{e(Ro(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&k1.set(e,n)}).catch(()=>{}),Vy.set(t,n),t}function xM(n){if(D_.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{e(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});D_.set(n,t)}let k_={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return D_.get(n);if(t==="objectStoreNames")return n.objectStoreNames||L1.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ro(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function AM(n){k_=n(k_)}function RM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(c_(this),t,...e);return L1.set(i,t.sort?t.sort():[t]),Ro(i)}:wM().includes(n)?function(...t){return n.apply(c_(this),t),Ro(k1.get(this))}:function(...t){return Ro(n.apply(c_(this),t))}}function IM(n){return typeof n=="function"?RM(n):(n instanceof IDBTransaction&&xM(n),TM(n,EM())?new Proxy(n,k_):n)}function Ro(n){if(n instanceof IDBRequest)return SM(n);if(u_.has(n))return u_.get(n);const t=IM(n);return t!==n&&(u_.set(n,t),Vy.set(t,n)),t}const c_=n=>Vy.get(n);function N1(n,t,{blocked:e,upgrade:i,blocking:r,terminated:l}={}){const c=indexedDB.open(n,t),f=Ro(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Ro(c.result),m.oldVersion,m.newVersion,Ro(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),r&&m.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const CM=["get","getKey","getAll","getAllKeys","count"],PM=["put","add","delete","clear"],h_=new Map;function fE(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(h_.get(t))return h_.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=PM.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||CM.includes(e)))return;const l=async function(c,...f){const m=this.transaction(c,r?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(f.shift())),(await Promise.all([p[e](...f),r&&m.done]))[0]};return h_.set(t,l),l}AM(n=>({...n,get:(t,e,i)=>fE(t,e)||n.get(t,e,i),has:(t,e)=>!!fE(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(OM(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function OM(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const L_="@firebase/app",dE="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Um("@firebase/app"),DM="@firebase/app-compat",kM="@firebase/analytics-compat",LM="@firebase/analytics",NM="@firebase/app-check-compat",VM="@firebase/app-check",zM="@firebase/auth",BM="@firebase/auth-compat",UM="@firebase/database",jM="@firebase/data-connect",HM="@firebase/database-compat",FM="@firebase/functions",qM="@firebase/functions-compat",GM="@firebase/installations",ZM="@firebase/installations-compat",WM="@firebase/messaging",YM="@firebase/messaging-compat",$M="@firebase/performance",KM="@firebase/performance-compat",XM="@firebase/remote-config",QM="@firebase/remote-config-compat",JM="@firebase/storage",tO="@firebase/storage-compat",eO="@firebase/firestore",nO="@firebase/ai",iO="@firebase/firestore-compat",sO="firebase",rO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="[DEFAULT]",aO={[L_]:"fire-core",[DM]:"fire-core-compat",[LM]:"fire-analytics",[kM]:"fire-analytics-compat",[VM]:"fire-app-check",[NM]:"fire-app-check-compat",[zM]:"fire-auth",[BM]:"fire-auth-compat",[UM]:"fire-rtdb",[jM]:"fire-data-connect",[HM]:"fire-rtdb-compat",[FM]:"fire-fn",[qM]:"fire-fn-compat",[GM]:"fire-iid",[ZM]:"fire-iid-compat",[WM]:"fire-fcm",[YM]:"fire-fcm-compat",[$M]:"fire-perf",[KM]:"fire-perf-compat",[XM]:"fire-rc",[QM]:"fire-rc-compat",[JM]:"fire-gcs",[tO]:"fire-gcs-compat",[eO]:"fire-fst",[iO]:"fire-fst-compat",[nO]:"fire-vertex","fire-js":"fire-js",[sO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=new Map,oO=new Map,V_=new Map;function mE(n,t){try{n.container.addComponent(t)}catch(e){pa.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Ir(n){const t=n.name;if(V_.has(t))return pa.debug(`There were multiple attempts to register component ${t}.`),!1;V_.set(t,n);for(const e of am.values())mE(e,n);for(const e of oO.values())mE(e,n);return!0}function $l(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Ei(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Io=new Yl("app","Firebase",lO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Io.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=rO;function V1(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:N_,automaticDataCollectionEnabled:!0},t),r=i.name;if(typeof r!="string"||!r)throw Io.create("bad-app-name",{appName:String(r)});if(e||(e=C1()),!e)throw Io.create("no-options");const l=am.get(r);if(l){if(Do(e,l.options)&&Do(i,l.config))return l;throw Io.create("duplicate-app",{appName:r})}const c=new gM(r);for(const m of V_.values())c.addComponent(m);const f=new uO(e,i,c);return am.set(r,f),f}function zy(n=N_){const t=am.get(n);if(!t&&n===N_&&C1())return V1();if(!t)throw Io.create("no-app",{appName:n});return t}function Ts(n,t,e){var i;let r=(i=aO[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);const l=r.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const f=[`Unable to register library "${r}" with version "${t}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),pa.warn(f.join(" "));return}Ir(new Ws(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO="firebase-heartbeat-database",hO=1,Uh="firebase-heartbeat-store";let f_=null;function z1(){return f_||(f_=N1(cO,hO,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Uh)}catch(e){console.warn(e)}}}}).catch(n=>{throw Io.create("idb-open",{originalErrorMessage:n.message})})),f_}async function fO(n){try{const e=(await z1()).transaction(Uh),i=await e.objectStore(Uh).get(B1(n));return await e.done,i}catch(t){if(t instanceof Qs)pa.warn(t.message);else{const e=Io.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});pa.warn(e.message)}}}async function pE(n,t){try{const i=(await z1()).transaction(Uh,"readwrite");await i.objectStore(Uh).put(t,B1(n)),await i.done}catch(e){if(e instanceof Qs)pa.warn(e.message);else{const i=Io.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});pa.warn(i.message)}}}function B1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=1024,mO=30;class pO{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new _O(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=gE();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>mO){const c=yO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){pa.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=gE(),{heartbeatsToSend:i,unsentEntries:r}=gO(this._heartbeatsCache.heartbeats),l=rm(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return pa.warn(e),""}}}function gE(){return new Date().toISOString().substring(0,10)}function gO(n,t=dO){const e=[];let i=n.slice();for(const r of n){const l=e.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),_E(e)>t){l.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),_E(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class _O{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ly()?Ny().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await fO(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return pE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return pE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function _E(n){return rm(JSON.stringify({version:2,heartbeats:n})).length}function yO(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(n){Ir(new Ws("platform-logger",t=>new MM(t),"PRIVATE")),Ir(new Ws("heartbeat",t=>new pO(t),"PRIVATE")),Ts(L_,dE,n),Ts(L_,dE,"esm2017"),Ts("fire-js","")}vO("");var yE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Co,U1;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,D){function z(){}z.prototype=D.prototype,V.D=D.prototype,V.prototype=new z,V.prototype.constructor=V,V.C=function(U,H,G){for(var q=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)q[Yt-2]=arguments[Yt];return D.prototype[H].apply(U,q)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(V,D,z){z||(z=0);var U=Array(16);if(typeof D=="string")for(var H=0;16>H;++H)U[H]=D.charCodeAt(z++)|D.charCodeAt(z++)<<8|D.charCodeAt(z++)<<16|D.charCodeAt(z++)<<24;else for(H=0;16>H;++H)U[H]=D[z++]|D[z++]<<8|D[z++]<<16|D[z++]<<24;D=V.g[0],z=V.g[1],H=V.g[2];var G=V.g[3],q=D+(G^z&(H^G))+U[0]+3614090360&4294967295;D=z+(q<<7&4294967295|q>>>25),q=G+(H^D&(z^H))+U[1]+3905402710&4294967295,G=D+(q<<12&4294967295|q>>>20),q=H+(z^G&(D^z))+U[2]+606105819&4294967295,H=G+(q<<17&4294967295|q>>>15),q=z+(D^H&(G^D))+U[3]+3250441966&4294967295,z=H+(q<<22&4294967295|q>>>10),q=D+(G^z&(H^G))+U[4]+4118548399&4294967295,D=z+(q<<7&4294967295|q>>>25),q=G+(H^D&(z^H))+U[5]+1200080426&4294967295,G=D+(q<<12&4294967295|q>>>20),q=H+(z^G&(D^z))+U[6]+2821735955&4294967295,H=G+(q<<17&4294967295|q>>>15),q=z+(D^H&(G^D))+U[7]+4249261313&4294967295,z=H+(q<<22&4294967295|q>>>10),q=D+(G^z&(H^G))+U[8]+1770035416&4294967295,D=z+(q<<7&4294967295|q>>>25),q=G+(H^D&(z^H))+U[9]+2336552879&4294967295,G=D+(q<<12&4294967295|q>>>20),q=H+(z^G&(D^z))+U[10]+4294925233&4294967295,H=G+(q<<17&4294967295|q>>>15),q=z+(D^H&(G^D))+U[11]+2304563134&4294967295,z=H+(q<<22&4294967295|q>>>10),q=D+(G^z&(H^G))+U[12]+1804603682&4294967295,D=z+(q<<7&4294967295|q>>>25),q=G+(H^D&(z^H))+U[13]+4254626195&4294967295,G=D+(q<<12&4294967295|q>>>20),q=H+(z^G&(D^z))+U[14]+2792965006&4294967295,H=G+(q<<17&4294967295|q>>>15),q=z+(D^H&(G^D))+U[15]+1236535329&4294967295,z=H+(q<<22&4294967295|q>>>10),q=D+(H^G&(z^H))+U[1]+4129170786&4294967295,D=z+(q<<5&4294967295|q>>>27),q=G+(z^H&(D^z))+U[6]+3225465664&4294967295,G=D+(q<<9&4294967295|q>>>23),q=H+(D^z&(G^D))+U[11]+643717713&4294967295,H=G+(q<<14&4294967295|q>>>18),q=z+(G^D&(H^G))+U[0]+3921069994&4294967295,z=H+(q<<20&4294967295|q>>>12),q=D+(H^G&(z^H))+U[5]+3593408605&4294967295,D=z+(q<<5&4294967295|q>>>27),q=G+(z^H&(D^z))+U[10]+38016083&4294967295,G=D+(q<<9&4294967295|q>>>23),q=H+(D^z&(G^D))+U[15]+3634488961&4294967295,H=G+(q<<14&4294967295|q>>>18),q=z+(G^D&(H^G))+U[4]+3889429448&4294967295,z=H+(q<<20&4294967295|q>>>12),q=D+(H^G&(z^H))+U[9]+568446438&4294967295,D=z+(q<<5&4294967295|q>>>27),q=G+(z^H&(D^z))+U[14]+3275163606&4294967295,G=D+(q<<9&4294967295|q>>>23),q=H+(D^z&(G^D))+U[3]+4107603335&4294967295,H=G+(q<<14&4294967295|q>>>18),q=z+(G^D&(H^G))+U[8]+1163531501&4294967295,z=H+(q<<20&4294967295|q>>>12),q=D+(H^G&(z^H))+U[13]+2850285829&4294967295,D=z+(q<<5&4294967295|q>>>27),q=G+(z^H&(D^z))+U[2]+4243563512&4294967295,G=D+(q<<9&4294967295|q>>>23),q=H+(D^z&(G^D))+U[7]+1735328473&4294967295,H=G+(q<<14&4294967295|q>>>18),q=z+(G^D&(H^G))+U[12]+2368359562&4294967295,z=H+(q<<20&4294967295|q>>>12),q=D+(z^H^G)+U[5]+4294588738&4294967295,D=z+(q<<4&4294967295|q>>>28),q=G+(D^z^H)+U[8]+2272392833&4294967295,G=D+(q<<11&4294967295|q>>>21),q=H+(G^D^z)+U[11]+1839030562&4294967295,H=G+(q<<16&4294967295|q>>>16),q=z+(H^G^D)+U[14]+4259657740&4294967295,z=H+(q<<23&4294967295|q>>>9),q=D+(z^H^G)+U[1]+2763975236&4294967295,D=z+(q<<4&4294967295|q>>>28),q=G+(D^z^H)+U[4]+1272893353&4294967295,G=D+(q<<11&4294967295|q>>>21),q=H+(G^D^z)+U[7]+4139469664&4294967295,H=G+(q<<16&4294967295|q>>>16),q=z+(H^G^D)+U[10]+3200236656&4294967295,z=H+(q<<23&4294967295|q>>>9),q=D+(z^H^G)+U[13]+681279174&4294967295,D=z+(q<<4&4294967295|q>>>28),q=G+(D^z^H)+U[0]+3936430074&4294967295,G=D+(q<<11&4294967295|q>>>21),q=H+(G^D^z)+U[3]+3572445317&4294967295,H=G+(q<<16&4294967295|q>>>16),q=z+(H^G^D)+U[6]+76029189&4294967295,z=H+(q<<23&4294967295|q>>>9),q=D+(z^H^G)+U[9]+3654602809&4294967295,D=z+(q<<4&4294967295|q>>>28),q=G+(D^z^H)+U[12]+3873151461&4294967295,G=D+(q<<11&4294967295|q>>>21),q=H+(G^D^z)+U[15]+530742520&4294967295,H=G+(q<<16&4294967295|q>>>16),q=z+(H^G^D)+U[2]+3299628645&4294967295,z=H+(q<<23&4294967295|q>>>9),q=D+(H^(z|~G))+U[0]+4096336452&4294967295,D=z+(q<<6&4294967295|q>>>26),q=G+(z^(D|~H))+U[7]+1126891415&4294967295,G=D+(q<<10&4294967295|q>>>22),q=H+(D^(G|~z))+U[14]+2878612391&4294967295,H=G+(q<<15&4294967295|q>>>17),q=z+(G^(H|~D))+U[5]+4237533241&4294967295,z=H+(q<<21&4294967295|q>>>11),q=D+(H^(z|~G))+U[12]+1700485571&4294967295,D=z+(q<<6&4294967295|q>>>26),q=G+(z^(D|~H))+U[3]+2399980690&4294967295,G=D+(q<<10&4294967295|q>>>22),q=H+(D^(G|~z))+U[10]+4293915773&4294967295,H=G+(q<<15&4294967295|q>>>17),q=z+(G^(H|~D))+U[1]+2240044497&4294967295,z=H+(q<<21&4294967295|q>>>11),q=D+(H^(z|~G))+U[8]+1873313359&4294967295,D=z+(q<<6&4294967295|q>>>26),q=G+(z^(D|~H))+U[15]+4264355552&4294967295,G=D+(q<<10&4294967295|q>>>22),q=H+(D^(G|~z))+U[6]+2734768916&4294967295,H=G+(q<<15&4294967295|q>>>17),q=z+(G^(H|~D))+U[13]+1309151649&4294967295,z=H+(q<<21&4294967295|q>>>11),q=D+(H^(z|~G))+U[4]+4149444226&4294967295,D=z+(q<<6&4294967295|q>>>26),q=G+(z^(D|~H))+U[11]+3174756917&4294967295,G=D+(q<<10&4294967295|q>>>22),q=H+(D^(G|~z))+U[2]+718787259&4294967295,H=G+(q<<15&4294967295|q>>>17),q=z+(G^(H|~D))+U[9]+3951481745&4294967295,V.g[0]=V.g[0]+D&4294967295,V.g[1]=V.g[1]+(H+(q<<21&4294967295|q>>>11))&4294967295,V.g[2]=V.g[2]+H&4294967295,V.g[3]=V.g[3]+G&4294967295}i.prototype.u=function(V,D){D===void 0&&(D=V.length);for(var z=D-this.blockSize,U=this.B,H=this.h,G=0;G<D;){if(H==0)for(;G<=z;)r(this,V,G),G+=this.blockSize;if(typeof V=="string"){for(;G<D;)if(U[H++]=V.charCodeAt(G++),H==this.blockSize){r(this,U),H=0;break}}else for(;G<D;)if(U[H++]=V[G++],H==this.blockSize){r(this,U),H=0;break}}this.h=H,this.o+=D},i.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var D=1;D<V.length-8;++D)V[D]=0;var z=8*this.o;for(D=V.length-8;D<V.length;++D)V[D]=z&255,z/=256;for(this.u(V),V=Array(16),D=z=0;4>D;++D)for(var U=0;32>U;U+=8)V[z++]=this.g[D]>>>U&255;return V};function l(V,D){var z=f;return Object.prototype.hasOwnProperty.call(z,V)?z[V]:z[V]=D(V)}function c(V,D){this.h=D;for(var z=[],U=!0,H=V.length-1;0<=H;H--){var G=V[H]|0;U&&G==D||(z[H]=G,U=!1)}this.g=z}var f={};function m(V){return-128<=V&&128>V?l(V,function(D){return new c([D|0],0>D?-1:0)}):new c([V|0],0>V?-1:0)}function p(V){if(isNaN(V)||!isFinite(V))return E;if(0>V)return O(p(-V));for(var D=[],z=1,U=0;V>=z;U++)D[U]=V/z|0,z*=4294967296;return new c(D,0)}function v(V,D){if(V.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(V.charAt(0)=="-")return O(v(V.substring(1),D));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var z=p(Math.pow(D,8)),U=E,H=0;H<V.length;H+=8){var G=Math.min(8,V.length-H),q=parseInt(V.substring(H,H+G),D);8>G?(G=p(Math.pow(D,G)),U=U.j(G).add(p(q))):(U=U.j(z),U=U.add(p(q)))}return U}var E=m(0),S=m(1),I=m(16777216);n=c.prototype,n.m=function(){if(k(this))return-O(this).m();for(var V=0,D=1,z=0;z<this.g.length;z++){var U=this.i(z);V+=(0<=U?U:4294967296+U)*D,D*=4294967296}return V},n.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(P(this))return"0";if(k(this))return"-"+O(this).toString(V);for(var D=p(Math.pow(V,6)),z=this,U="";;){var H=nt(z,D).g;z=B(z,H.j(D));var G=((0<z.g.length?z.g[0]:z.h)>>>0).toString(V);if(z=H,P(z))return G+U;for(;6>G.length;)G="0"+G;U=G+U}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function P(V){if(V.h!=0)return!1;for(var D=0;D<V.g.length;D++)if(V.g[D]!=0)return!1;return!0}function k(V){return V.h==-1}n.l=function(V){return V=B(this,V),k(V)?-1:P(V)?0:1};function O(V){for(var D=V.g.length,z=[],U=0;U<D;U++)z[U]=~V.g[U];return new c(z,~V.h).add(S)}n.abs=function(){return k(this)?O(this):this},n.add=function(V){for(var D=Math.max(this.g.length,V.g.length),z=[],U=0,H=0;H<=D;H++){var G=U+(this.i(H)&65535)+(V.i(H)&65535),q=(G>>>16)+(this.i(H)>>>16)+(V.i(H)>>>16);U=q>>>16,G&=65535,q&=65535,z[H]=q<<16|G}return new c(z,z[z.length-1]&-2147483648?-1:0)};function B(V,D){return V.add(O(D))}n.j=function(V){if(P(this)||P(V))return E;if(k(this))return k(V)?O(this).j(O(V)):O(O(this).j(V));if(k(V))return O(this.j(O(V)));if(0>this.l(I)&&0>V.l(I))return p(this.m()*V.m());for(var D=this.g.length+V.g.length,z=[],U=0;U<2*D;U++)z[U]=0;for(U=0;U<this.g.length;U++)for(var H=0;H<V.g.length;H++){var G=this.i(U)>>>16,q=this.i(U)&65535,Yt=V.i(H)>>>16,kt=V.i(H)&65535;z[2*U+2*H]+=q*kt,F(z,2*U+2*H),z[2*U+2*H+1]+=G*kt,F(z,2*U+2*H+1),z[2*U+2*H+1]+=q*Yt,F(z,2*U+2*H+1),z[2*U+2*H+2]+=G*Yt,F(z,2*U+2*H+2)}for(U=0;U<D;U++)z[U]=z[2*U+1]<<16|z[2*U];for(U=D;U<2*D;U++)z[U]=0;return new c(z,0)};function F(V,D){for(;(V[D]&65535)!=V[D];)V[D+1]+=V[D]>>>16,V[D]&=65535,D++}function $(V,D){this.g=V,this.h=D}function nt(V,D){if(P(D))throw Error("division by zero");if(P(V))return new $(E,E);if(k(V))return D=nt(O(V),D),new $(O(D.g),O(D.h));if(k(D))return D=nt(V,O(D)),new $(O(D.g),D.h);if(30<V.g.length){if(k(V)||k(D))throw Error("slowDivide_ only works with positive integers.");for(var z=S,U=D;0>=U.l(V);)z=J(z),U=J(U);var H=ht(z,1),G=ht(U,1);for(U=ht(U,2),z=ht(z,2);!P(U);){var q=G.add(U);0>=q.l(V)&&(H=H.add(z),G=q),U=ht(U,1),z=ht(z,1)}return D=B(V,H.j(D)),new $(H,D)}for(H=E;0<=V.l(D);){for(z=Math.max(1,Math.floor(V.m()/D.m())),U=Math.ceil(Math.log(z)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),G=p(z),q=G.j(D);k(q)||0<q.l(V);)z-=U,G=p(z),q=G.j(D);P(G)&&(G=S),H=H.add(G),V=B(V,q)}return new $(H,V)}n.A=function(V){return nt(this,V).h},n.and=function(V){for(var D=Math.max(this.g.length,V.g.length),z=[],U=0;U<D;U++)z[U]=this.i(U)&V.i(U);return new c(z,this.h&V.h)},n.or=function(V){for(var D=Math.max(this.g.length,V.g.length),z=[],U=0;U<D;U++)z[U]=this.i(U)|V.i(U);return new c(z,this.h|V.h)},n.xor=function(V){for(var D=Math.max(this.g.length,V.g.length),z=[],U=0;U<D;U++)z[U]=this.i(U)^V.i(U);return new c(z,this.h^V.h)};function J(V){for(var D=V.g.length+1,z=[],U=0;U<D;U++)z[U]=V.i(U)<<1|V.i(U-1)>>>31;return new c(z,V.h)}function ht(V,D){var z=D>>5;D%=32;for(var U=V.g.length-z,H=[],G=0;G<U;G++)H[G]=0<D?V.i(G+z)>>>D|V.i(G+z+1)<<32-D:V.i(G+z);return new c(H,V.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,U1=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,Co=c}).apply(typeof yE<"u"?yE:typeof self<"u"?self:typeof window<"u"?window:{});var Sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j1,gh,H1,Zd,z_,F1,q1,G1;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,w,A){return g==Array.prototype||g==Object.prototype||(g[w]=A.value),g};function e(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sd=="object"&&Sd];for(var w=0;w<g.length;++w){var A=g[w];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=e(this);function r(g,w){if(w)t:{var A=i;g=g.split(".");for(var N=0;N<g.length-1;N++){var tt=g[N];if(!(tt in A))break t;A=A[tt]}g=g[g.length-1],N=A[g],w=w(N),w!=N&&w!=null&&t(A,g,{configurable:!0,writable:!0,value:w})}}function l(g,w){g instanceof String&&(g+="");var A=0,N=!1,tt={next:function(){if(!N&&A<g.length){var ut=A++;return{value:w(ut,g[ut]),done:!1}}return N=!0,{done:!0,value:void 0}}};return tt[Symbol.iterator]=function(){return tt},tt}r("Array.prototype.values",function(g){return g||function(){return l(this,function(w,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function m(g){var w=typeof g;return w=w!="object"?w:g?Array.isArray(g)?"array":w:"null",w=="array"||w=="object"&&typeof g.length=="number"}function p(g){var w=typeof g;return w=="object"&&g!=null||w=="function"}function v(g,w,A){return g.call.apply(g.bind,arguments)}function E(g,w,A){if(!g)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var tt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(tt,N),g.apply(w,tt)}}return function(){return g.apply(w,arguments)}}function S(g,w,A){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function I(g,w){var A=Array.prototype.slice.call(arguments,1);return function(){var N=A.slice();return N.push.apply(N,arguments),g.apply(this,N)}}function P(g,w){function A(){}A.prototype=w.prototype,g.aa=w.prototype,g.prototype=new A,g.prototype.constructor=g,g.Qb=function(N,tt,ut){for(var wt=Array(arguments.length-2),se=2;se<arguments.length;se++)wt[se-2]=arguments[se];return w.prototype[tt].apply(N,wt)}}function k(g){const w=g.length;if(0<w){const A=Array(w);for(let N=0;N<w;N++)A[N]=g[N];return A}return[]}function O(g,w){for(let A=1;A<arguments.length;A++){const N=arguments[A];if(m(N)){const tt=g.length||0,ut=N.length||0;g.length=tt+ut;for(let wt=0;wt<ut;wt++)g[tt+wt]=N[wt]}else g.push(N)}}class B{constructor(w,A){this.i=w,this.j=A,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function F(g){return/^[\s\xa0]*$/.test(g)}function $(){var g=f.navigator;return g&&(g=g.userAgent)?g:""}function nt(g){return nt[" "](g),g}nt[" "]=function(){};var J=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function ht(g,w,A){for(const N in g)w.call(A,g[N],N,g)}function V(g,w){for(const A in g)w.call(void 0,g[A],A,g)}function D(g){const w={};for(const A in g)w[A]=g[A];return w}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(g,w){let A,N;for(let tt=1;tt<arguments.length;tt++){N=arguments[tt];for(A in N)g[A]=N[A];for(let ut=0;ut<z.length;ut++)A=z[ut],Object.prototype.hasOwnProperty.call(N,A)&&(g[A]=N[A])}}function H(g){var w=1;g=g.split(":");const A=[];for(;0<w&&g.length;)A.push(g.shift()),w--;return g.length&&A.push(g.join(":")),A}function G(g){f.setTimeout(()=>{throw g},0)}function q(){var g=Vt;let w=null;return g.g&&(w=g.g,g.g=g.g.next,g.g||(g.h=null),w.next=null),w}class Yt{constructor(){this.h=this.g=null}add(w,A){const N=kt.get();N.set(w,A),this.h?this.h.next=N:this.g=N,this.h=N}}var kt=new B(()=>new it,g=>g.reset());class it{constructor(){this.next=this.g=this.h=null}set(w,A){this.h=w,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let vt,mt=!1,Vt=new Yt,j=()=>{const g=f.Promise.resolve(void 0);vt=()=>{g.then(ct)}};var ct=()=>{for(var g;g=q();){try{g.h.call(g.g)}catch(A){G(A)}var w=kt;w.j(g),100>w.h&&(w.h++,g.next=w.g,w.g=g)}mt=!1};function Tt(){this.s=this.s,this.C=this.C}Tt.prototype.s=!1,Tt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Tt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function yt(g,w){this.type=g,this.g=this.target=w,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var St=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var g=!1,w=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};f.addEventListener("test",A,w),f.removeEventListener("test",A,w)}catch{}return g}();function At(g,w){if(yt.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var A=this.type=g.type,N=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=w,w=g.relatedTarget){if(J){t:{try{nt(w.nodeName);var tt=!0;break t}catch{}tt=!1}tt||(w=null)}}else A=="mouseover"?w=g.fromElement:A=="mouseout"&&(w=g.toElement);this.relatedTarget=w,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Et[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&At.aa.h.call(this)}}P(At,yt);var Et={2:"touch",3:"pen",4:"mouse"};At.prototype.h=function(){At.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),le=0;function Ri(g,w,A,N,tt){this.listener=g,this.proxy=null,this.src=w,this.type=A,this.capture=!!N,this.ha=tt,this.key=++le,this.da=this.fa=!1}function Ji(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ii(g){this.src=g,this.g={},this.h=0}Ii.prototype.add=function(g,w,A,N,tt){var ut=g.toString();g=this.g[ut],g||(g=this.g[ut]=[],this.h++);var wt=Ss(g,w,N,tt);return-1<wt?(w=g[wt],A||(w.fa=!1)):(w=new Ri(w,this.src,ut,!!N,tt),w.fa=A,g.push(w)),w};function Ci(g,w){var A=w.type;if(A in g.g){var N=g.g[A],tt=Array.prototype.indexOf.call(N,w,void 0),ut;(ut=0<=tt)&&Array.prototype.splice.call(N,tt,1),ut&&(Ji(w),g.g[A].length==0&&(delete g.g[A],g.h--))}}function Ss(g,w,A,N){for(var tt=0;tt<g.length;++tt){var ut=g[tt];if(!ut.da&&ut.listener==w&&ut.capture==!!A&&ut.ha==N)return tt}return-1}var Mr="closure_lm_"+(1e6*Math.random()|0),wa={};function Yo(g,w,A,N,tt){if(Array.isArray(w)){for(var ut=0;ut<w.length;ut++)Yo(g,w[ut],A,N,tt);return null}return A=tu(A),g&&g[Ae]?g.K(w,A,p(N)?!!N.capture:!1,tt):Hn(g,w,A,!1,N,tt)}function Hn(g,w,A,N,tt,ut){if(!w)throw Error("Invalid event type");var wt=p(tt)?!!tt.capture:!!tt,se=Dr(g);if(se||(g[Mr]=se=new Ii(g)),A=se.add(w,A,N,wt,ut),A.proxy)return A;if(N=Sa(),A.proxy=N,N.src=g,N.listener=A,g.addEventListener)St||(tt=wt),tt===void 0&&(tt=!1),g.addEventListener(w.toString(),N,tt);else if(g.attachEvent)g.attachEvent(xs(w.toString()),N);else if(g.addListener&&g.removeListener)g.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Sa(){function g(A){return w.call(g.src,g.listener,A)}const w=Jl;return g}function $o(g,w,A,N,tt){if(Array.isArray(w))for(var ut=0;ut<w.length;ut++)$o(g,w[ut],A,N,tt);else N=p(N)?!!N.capture:!!N,A=tu(A),g&&g[Ae]?(g=g.i,w=String(w).toString(),w in g.g&&(ut=g.g[w],A=Ss(ut,A,N,tt),-1<A&&(Ji(ut[A]),Array.prototype.splice.call(ut,A,1),ut.length==0&&(delete g.g[w],g.h--)))):g&&(g=Dr(g))&&(w=g.g[w.toString()],g=-1,w&&(g=Ss(w,A,N,tt)),(A=-1<g?w[g]:null)&&Or(A))}function Or(g){if(typeof g!="number"&&g&&!g.da){var w=g.src;if(w&&w[Ae])Ci(w.i,g);else{var A=g.type,N=g.proxy;w.removeEventListener?w.removeEventListener(A,N,g.capture):w.detachEvent?w.detachEvent(xs(A),N):w.addListener&&w.removeListener&&w.removeListener(N),(A=Dr(w))?(Ci(A,g),A.h==0&&(A.src=null,w[Mr]=null)):Ji(g)}}}function xs(g){return g in wa?wa[g]:wa[g]="on"+g}function Jl(g,w){if(g.da)g=!0;else{w=new At(w,this);var A=g.listener,N=g.ha||g.src;g.fa&&Or(g),g=A.call(N,w)}return g}function Dr(g){return g=g[Mr],g instanceof Ii?g:null}var Ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function tu(g){return typeof g=="function"?g:(g[Ko]||(g[Ko]=function(w){return g.handleEvent(w)}),g[Ko])}function De(){Tt.call(this),this.i=new Ii(this),this.M=this,this.F=null}P(De,Tt),De.prototype[Ae]=!0,De.prototype.removeEventListener=function(g,w,A,N){$o(this,g,w,A,N)};function fe(g,w){var A,N=g.F;if(N)for(A=[];N;N=N.F)A.push(N);if(g=g.M,N=w.type||w,typeof w=="string")w=new yt(w,g);else if(w instanceof yt)w.target=w.target||g;else{var tt=w;w=new yt(N,g),U(w,tt)}if(tt=!0,A)for(var ut=A.length-1;0<=ut;ut--){var wt=w.g=A[ut];tt=Fn(wt,N,!0,w)&&tt}if(wt=w.g=g,tt=Fn(wt,N,!0,w)&&tt,tt=Fn(wt,N,!1,w)&&tt,A)for(ut=0;ut<A.length;ut++)wt=w.g=A[ut],tt=Fn(wt,N,!1,w)&&tt}De.prototype.N=function(){if(De.aa.N.call(this),this.i){var g=this.i,w;for(w in g.g){for(var A=g.g[w],N=0;N<A.length;N++)Ji(A[N]);delete g.g[w],g.h--}}this.F=null},De.prototype.K=function(g,w,A,N){return this.i.add(String(g),w,!1,A,N)},De.prototype.L=function(g,w,A,N){return this.i.add(String(g),w,!0,A,N)};function Fn(g,w,A,N){if(w=g.i.g[String(w)],!w)return!0;w=w.concat();for(var tt=!0,ut=0;ut<w.length;++ut){var wt=w[ut];if(wt&&!wt.da&&wt.capture==A){var se=wt.listener,Qe=wt.ha||wt.src;wt.fa&&Ci(g.i,wt),tt=se.call(Qe,N)!==!1&&tt}}return tt&&!N.defaultPrevented}function Tn(g,w,A){if(typeof g=="function")A&&(g=S(g,A));else if(g&&typeof g.handleEvent=="function")g=S(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:f.setTimeout(g,w||0)}function Xo(g){g.g=Tn(()=>{g.g=null,g.i&&(g.i=!1,Xo(g))},g.l);const w=g.h;g.h=null,g.m.apply(null,w)}class eu extends Tt{constructor(w,A){super(),this.m=w,this.l=A,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Xo(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(g){Tt.call(this),this.h=g,this.g={}}P(kr,Tt);var Js=[];function As(g){ht(g.g,function(w,A){this.g.hasOwnProperty(A)&&Or(w)},g),g.g={}}kr.prototype.N=function(){kr.aa.N.call(this),As(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fi=f.JSON.stringify,xa=f.JSON.parse,Pi=class{stringify(g){return f.JSON.stringify(g,void 0)}parse(g){return f.JSON.parse(g,void 0)}};function Qo(){}Qo.prototype.h=null;function Jo(g){return g.h||(g.h=g.i())}function Aa(){}var ts={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function es(){yt.call(this,"d")}P(es,yt);function tl(){yt.call(this,"c")}P(tl,yt);var ns={},el=null;function tr(){return el=el||new De}ns.La="serverreachability";function Ra(g){yt.call(this,ns.La,g)}P(Ra,yt);function er(g){const w=tr();fe(w,new Ra(w))}ns.STAT_EVENT="statevent";function Ia(g,w){yt.call(this,ns.STAT_EVENT,g),this.stat=w}P(Ia,yt);function ke(g){const w=tr();fe(w,new Ia(w,g))}ns.Ma="timingevent";function tn(g,w){yt.call(this,ns.Ma,g),this.size=w}P(tn,yt);function Xe(g,w){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){g()},w)}function di(){this.g=!0}di.prototype.xa=function(){this.g=!1};function qn(g,w,A,N,tt,ut){g.info(function(){if(g.g)if(ut)for(var wt="",se=ut.split("&"),Qe=0;Qe<se.length;Qe++){var re=se[Qe].split("=");if(1<re.length){var ye=re[0];re=re[1];var Ne=ye.split("_");wt=2<=Ne.length&&Ne[1]=="type"?wt+(ye+"="+re+"&"):wt+(ye+"=redacted&")}}else wt=null;else wt=ut;return"XMLHTTP REQ ("+N+") [attempt "+tt+"]: "+w+`
`+A+`
`+wt})}function Ot(g,w,A,N,tt,ut,wt){g.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+tt+"]: "+w+`
`+A+`
`+ut+" "+wt})}function Rs(g,w,A,N){g.info(function(){return"XMLHTTP TEXT ("+w+"): "+nr(g,A)+(N?" "+N:"")})}function nl(g,w){g.info(function(){return"TIMEOUT: "+w})}di.prototype.info=function(){};function nr(g,w){if(!g.g)return w;if(!w)return null;try{var A=JSON.parse(w);if(A){for(g=0;g<A.length;g++)if(Array.isArray(A[g])){var N=A[g];if(!(2>N.length)){var tt=N[1];if(Array.isArray(tt)&&!(1>tt.length)){var ut=tt[0];if(ut!="noop"&&ut!="stop"&&ut!="close")for(var wt=1;wt<tt.length;wt++)tt[wt]=""}}}}return fi(A)}catch{return w}}var Is={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Oi;function On(){}P(On,Qo),On.prototype.g=function(){return new XMLHttpRequest},On.prototype.i=function(){return{}},Oi=new On;function En(g,w,A,N){this.j=g,this.i=w,this.l=A,this.R=N||1,this.U=new kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ze}function Ze(){this.i=null,this.g="",this.h=!1}var il={},Ca={};function Di(g,w,A){g.L=1,g.v=si(Le(w)),g.m=A,g.P=!0,is(g,null)}function is(g,w){g.F=Date.now(),Nr(g),g.A=Le(g.v);var A=g.A,N=g.R;Array.isArray(N)||(N=[String(N)]),al(A.i,"t",N),g.C=0,A=g.j.J,g.h=new Ze,g.g=ou(g.j,A?w:null,!g.m),0<g.O&&(g.M=new eu(S(g.Y,g,g.g),g.O)),w=g.U,A=g.g,N=g.ca;var tt="readystatechange";Array.isArray(tt)||(tt&&(Js[0]=tt.toString()),tt=Js);for(var ut=0;ut<tt.length;ut++){var wt=Yo(A,tt[ut],N||w.handleEvent,!1,w.h||w);if(!wt)break;w.g[wt.key]=wt}w=g.H?D(g.H):{},g.m?(g.u||(g.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,w)):(g.u="GET",g.g.ea(g.A,g.u,null,w)),er(),qn(g.i,g.u,g.A,g.l,g.R,g.m)}En.prototype.ca=function(g){g=g.target;const w=this.M;w&&xn(g)==3?w.j():this.Y(g)},En.prototype.Y=function(g){try{if(g==this.g)t:{const Ne=xn(this.g);var w=this.g.Ba();const Ns=this.g.Z();if(!(3>Ne)&&(Ne!=3||this.g&&(this.h.h||this.g.oa()||ol(this.g)))){this.J||Ne!=4||w==7||(w==8||0>=Ns?er(3):er(2)),ir(this);var A=this.g.Z();this.X=A;e:if(nu(this)){var N=ol(this.g);g="";var tt=N.length,ut=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pn(this),ss(this);var wt="";break e}this.h.i=new f.TextDecoder}for(w=0;w<tt;w++)this.h.h=!0,g+=this.h.i.decode(N[w],{stream:!(ut&&w==tt-1)});N.length=0,this.h.g+=g,this.C=0,wt=this.h.g}else wt=this.g.oa();if(this.o=A==200,Ot(this.i,this.u,this.A,this.l,this.R,Ne,A),this.o){if(this.T&&!this.K){e:{if(this.g){var se,Qe=this.g;if((se=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(se)){var re=se;break e}}re=null}if(A=re)Rs(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cs(this,A);else{this.o=!1,this.s=3,ke(12),pn(this),ss(this);break t}}if(this.P){A=!0;let Me;for(;!this.J&&this.C<wt.length;)if(Me=Lr(this,wt),Me==Ca){Ne==4&&(this.s=4,ke(14),A=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(Me==il){this.s=4,ke(15),Rs(this.i,this.l,wt,"[Invalid Chunk]"),A=!1;break}else Rs(this.i,this.l,Me,null),Cs(this,Me);if(nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||wt.length!=0||this.h.h||(this.s=1,ke(16),A=!1),this.o=this.o&&A,!A)Rs(this.i,this.l,wt,"[Invalid Chunked Response]"),pn(this),ss(this);else if(0<wt.length&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.ba&&!ye.M&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+wt.length),ur(ye),ye.M=!0,ke(11))}}else Rs(this.i,this.l,wt,null),Cs(this,wt);Ne==4&&pn(this),this.o&&!this.J&&(Ne==4?ul(this.j,this):(this.o=!1,Nr(this)))}else gc(this.g),A==400&&0<wt.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),pn(this),ss(this)}}}catch{}finally{}};function nu(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Lr(g,w){var A=g.C,N=w.indexOf(`
`,A);return N==-1?Ca:(A=Number(w.substring(A,N)),isNaN(A)?il:(N+=1,N+A>w.length?Ca:(w=w.slice(N,N+A),g.C=N+A,w)))}En.prototype.cancel=function(){this.J=!0,pn(this)};function Nr(g){g.S=Date.now()+g.I,iu(g,g.I)}function iu(g,w){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Xe(S(g.ba,g),w)}function ir(g){g.B&&(f.clearTimeout(g.B),g.B=null)}En.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(nl(this.i,this.A),this.L!=2&&(er(),ke(17)),pn(this),this.s=2,ss(this)):iu(this,this.S-g)};function ss(g){g.j.G==0||g.J||ul(g.j,g)}function pn(g){ir(g);var w=g.M;w&&typeof w.ma=="function"&&w.ma(),g.M=null,As(g.U),g.g&&(w=g.g,g.g=null,w.abort(),w.ma())}function Cs(g,w){try{var A=g.j;if(A.G!=0&&(A.g==g||te(A.h,g))){if(!g.K&&te(A.h,g)&&A.G==3){try{var N=A.Da.g.parse(w)}catch{N=null}if(Array.isArray(N)&&N.length==3){var tt=N;if(tt[0]==0){t:if(!A.u){if(A.g)if(A.g.F+3e3<g.F)za(A),La(A);else break t;Na(A),ke(18)}}else A.za=tt[1],0<A.za-A.T&&37500>tt[2]&&A.F&&A.v==0&&!A.C&&(A.C=Xe(S(A.Za,A),6e3));if(1>=as(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Ls(A,11)}else if((g.K||A.g==g)&&za(A),!F(w))for(tt=A.Da.g.parse(w),w=0;w<tt.length;w++){let re=tt[w];if(A.T=re[0],re=re[1],A.G==2)if(re[0]=="c"){A.K=re[1],A.ia=re[2];const ye=re[3];ye!=null&&(A.la=ye,A.j.info("VER="+A.la));const Ne=re[4];Ne!=null&&(A.Aa=Ne,A.j.info("SVER="+A.Aa));const Ns=re[5];Ns!=null&&typeof Ns=="number"&&0<Ns&&(N=1.5*Ns,A.L=N,A.j.info("backChannelRequestTimeoutMs_="+N)),N=A;const Me=g.g;if(Me){const hs=Me.g?Me.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hs){var ut=N.h;ut.g||hs.indexOf("spdy")==-1&&hs.indexOf("quic")==-1&&hs.indexOf("h2")==-1||(ut.j=ut.l,ut.g=new Set,ut.h&&(_e(ut,ut.h),ut.h=null))}if(N.D){const fs=Me.g?Me.g.getResponseHeader("X-HTTP-Session-Id"):null;fs&&(N.ya=fs,jt(N.I,N.D,fs))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-g.F,A.j.info("Handshake RTT: "+A.R+"ms")),N=A;var wt=g;if(N.qa=Ua(N,N.J?N.ia:null,N.W),wt.K){ln(N.h,wt);var se=wt,Qe=N.L;Qe&&(se.I=Qe),se.B&&(ir(se),Nr(se)),N.g=wt}else Bi(N);0<A.i.length&&lr(A)}else re[0]!="stop"&&re[0]!="close"||Ls(A,7);else A.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?Ls(A,7):ka(A):re[0]!="noop"&&A.l&&A.l.ta(re),A.v=0)}}er(4)}catch{}}var sr=class{constructor(g,w){this.g=g,this.map=w}};function rs(g){this.l=g||10,f.PerformanceNavigationTiming?(g=f.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vr(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function as(g){return g.h?1:g.g?g.g.size:0}function te(g,w){return g.h?g.h==w:g.g?g.g.has(w):!1}function _e(g,w){g.g?g.g.add(w):g.h=w}function ln(g,w){g.h&&g.h==w?g.h=null:g.g&&g.g.has(w)&&g.g.delete(w)}rs.prototype.cancel=function(){if(this.i=os(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function os(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let w=g.i;for(const A of g.g.values())w=w.concat(A.D);return w}return k(g.i)}function rr(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(m(g)){for(var w=[],A=g.length,N=0;N<A;N++)w.push(g[N]);return w}w=[],A=0;for(N in g)w[A++]=g[N];return w}function ar(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(m(g)||typeof g=="string"){var w=[];g=g.length;for(var A=0;A<g;A++)w.push(A);return w}w=[],A=0;for(const N in g)w[A++]=N;return w}}}function Gt(g,w){if(g.forEach&&typeof g.forEach=="function")g.forEach(w,void 0);else if(m(g)||typeof g=="string")Array.prototype.forEach.call(g,w,void 0);else for(var A=ar(g),N=rr(g),tt=N.length,ut=0;ut<tt;ut++)w.call(void 0,N[ut],A&&A[ut],g)}var be=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sl(g,w){if(g){g=g.split("&");for(var A=0;A<g.length;A++){var N=g[A].indexOf("="),tt=null;if(0<=N){var ut=g[A].substring(0,N);tt=g[A].substring(N+1)}else ut=g[A];w(ut,tt?decodeURIComponent(tt.replace(/\+/g," ")):"")}}}function Be(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Be){this.h=g.h,zr(this,g.j),this.o=g.o,this.g=g.g,ki(this,g.s),this.l=g.l;var w=g.i,A=new Ni;A.i=w.i,w.g&&(A.g=new Map(w.g),A.h=w.h),Dn(this,A),this.m=g.m}else g&&(w=String(g).match(be))?(this.h=!1,zr(this,w[1]||"",!0),this.o=wn(w[2]||""),this.g=wn(w[3]||"",!0),ki(this,w[4]),this.l=wn(w[5]||"",!0),Dn(this,w[6]||"",!0),this.m=wn(w[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}Be.prototype.toString=function(){var g=[],w=this.j;w&&g.push(Li(w,Ps,!0),":");var A=this.g;return(A||w=="file")&&(g.push("//"),(w=this.o)&&g.push(Li(w,Ps,!0),"@"),g.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&g.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(Li(A,A.charAt(0)=="/"?rl:Br,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",Li(A,or)),g.join("")};function Le(g){return new Be(g)}function zr(g,w,A){g.j=A?wn(w,!0):w,g.j&&(g.j=g.j.replace(/:$/,""))}function ki(g,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);g.s=w}else g.s=null}function Dn(g,w,A){w instanceof Ni?(g.i=w,ri(g.i,g.h)):(A||(w=Li(w,Ma)),g.i=new Ni(w,g.h))}function jt(g,w,A){g.i.set(w,A)}function si(g){return jt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function wn(g,w){return g?w?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Li(g,w,A){return typeof g=="string"?(g=encodeURI(g).replace(w,Pa),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Pa(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ps=/[#\/\?@]/g,Br=/[#\?:]/g,rl=/[#\?]/g,Ma=/[#\?@]/g,or=/#/g;function Ni(g,w){this.h=this.g=null,this.i=g||null,this.j=!!w}function kn(g){g.g||(g.g=new Map,g.h=0,g.i&&sl(g.i,function(w,A){g.add(decodeURIComponent(w.replace(/\+/g," ")),A)}))}n=Ni.prototype,n.add=function(g,w){kn(this),this.i=null,g=Nt(this,g);var A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(w),this.h+=1,this};function ls(g,w){kn(g),w=Nt(g,w),g.g.has(w)&&(g.i=null,g.h-=g.g.get(w).length,g.g.delete(w))}function Vi(g,w){return kn(g),w=Nt(g,w),g.g.has(w)}n.forEach=function(g,w){kn(this),this.g.forEach(function(A,N){A.forEach(function(tt){g.call(w,tt,N,this)},this)},this)},n.na=function(){kn(this);const g=Array.from(this.g.values()),w=Array.from(this.g.keys()),A=[];for(let N=0;N<w.length;N++){const tt=g[N];for(let ut=0;ut<tt.length;ut++)A.push(w[N])}return A},n.V=function(g){kn(this);let w=[];if(typeof g=="string")Vi(this,g)&&(w=w.concat(this.g.get(Nt(this,g))));else{g=Array.from(this.g.values());for(let A=0;A<g.length;A++)w=w.concat(g[A])}return w},n.set=function(g,w){return kn(this),this.i=null,g=Nt(this,g),Vi(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[w]),this.h+=1,this},n.get=function(g,w){return g?(g=this.V(g),0<g.length?String(g[0]):w):w};function al(g,w,A){ls(g,w),0<A.length&&(g.i=null,g.g.set(Nt(g,w),k(A)),g.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],w=Array.from(this.g.keys());for(var A=0;A<w.length;A++){var N=w[A];const ut=encodeURIComponent(String(N)),wt=this.V(N);for(N=0;N<wt.length;N++){var tt=ut;wt[N]!==""&&(tt+="="+encodeURIComponent(String(wt[N]))),g.push(tt)}}return this.i=g.join("&")};function Nt(g,w){return w=String(w),g.j&&(w=w.toLowerCase()),w}function ri(g,w){w&&!g.j&&(kn(g),g.i=null,g.g.forEach(function(A,N){var tt=N.toLowerCase();N!=tt&&(ls(this,N),al(this,tt,A))},g)),g.j=w}function ue(g,w){const A=new di;if(f.Image){const N=new Image;N.onload=I(Gn,A,"TestLoadImage: loaded",!0,w,N),N.onerror=I(Gn,A,"TestLoadImage: error",!1,w,N),N.onabort=I(Gn,A,"TestLoadImage: abort",!1,w,N),N.ontimeout=I(Gn,A,"TestLoadImage: timeout",!1,w,N),f.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=g}else w(!1)}function mi(g,w){const A=new di,N=new AbortController,tt=setTimeout(()=>{N.abort(),Gn(A,"TestPingServer: timeout",!1,w)},1e4);fetch(g,{signal:N.signal}).then(ut=>{clearTimeout(tt),ut.ok?Gn(A,"TestPingServer: ok",!0,w):Gn(A,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(tt),Gn(A,"TestPingServer: error",!1,w)})}function Gn(g,w,A,N,tt){try{tt&&(tt.onload=null,tt.onerror=null,tt.onabort=null,tt.ontimeout=null),N(A)}catch{}}function Ms(){this.g=new Pi}function pi(g,w,A){const N=A||"";try{Gt(g,function(tt,ut){let wt=tt;p(tt)&&(wt=fi(tt)),w.push(N+ut+"="+encodeURIComponent(wt))})}catch(tt){throw w.push(N+"type="+encodeURIComponent("_badmap")),tt}}function Zn(g){this.l=g.Ub||null,this.j=g.eb||!1}P(Zn,Qo),Zn.prototype.g=function(){return new zi(this.l,this.j)},Zn.prototype.i=function(g){return function(){return g}}({});function zi(g,w){De.call(this),this.D=g,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(zi,De),n=zi.prototype,n.open=function(g,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=w,this.readyState=1,Sn(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(w.body=g),(this.D||f).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Re(this)),this.readyState=0},n.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Sn(this)),this.g&&(this.readyState=3,Sn(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Os(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Os(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}n.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var w=g.value?g.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!g.done}))&&(this.response=this.responseText+=w)}g.done?Re(this):Sn(this),this.readyState==3&&Os(this)}},n.Ra=function(g){this.g&&(this.response=this.responseText=g,Re(this))},n.Qa=function(g){this.g&&(this.response=g,Re(this))},n.ga=function(){this.g&&Re(this)};function Re(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Sn(g)}n.setRequestHeader=function(g,w){this.u.append(g,w)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],w=this.h.entries();for(var A=w.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=w.next();return g.join(`\r
`)};function Sn(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Oa(g){let w="";return ht(g,function(A,N){w+=N,w+=":",w+=A,w+=`\r
`}),w}function en(g,w,A){t:{for(N in A){var N=!1;break t}N=!0}N||(A=Oa(A),typeof g=="string"?A!=null&&encodeURIComponent(String(A)):jt(g,w,A))}function de(g){De.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(de,De);var Ur=/^https?$/i,Ds=["POST","PUT"];n=de.prototype,n.Ha=function(g){this.J=g},n.ea=function(g,w,A,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);w=w?w.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oi.g(),this.v=this.o?Jo(this.o):Jo(Oi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(w,String(g),!0),this.B=!1}catch(ut){su(this,ut);return}if(g=A||"",A=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var tt in N)A.set(tt,N[tt]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ut of N.keys())A.set(ut,N.get(ut));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(A.keys()).find(ut=>ut.toLowerCase()=="content-type"),tt=f.FormData&&g instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Ds,w,void 0))||N||tt||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ut,wt]of A)this.g.setRequestHeader(ut,wt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gn(this),this.u=!0,this.g.send(g),this.u=!1}catch(ut){su(this,ut)}};function su(g,w){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=w,g.m=5,jr(g),us(g)}function jr(g){g.A||(g.A=!0,fe(g,"complete"),fe(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,fe(this,"complete"),fe(this,"abort"),us(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),us(this,!0)),de.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?$t(this):this.bb())},n.bb=function(){$t(this)};function $t(g){if(g.h&&typeof c<"u"&&(!g.v[1]||xn(g)!=4||g.Z()!=2)){if(g.u&&xn(g)==4)Tn(g.Ea,0,g);else if(fe(g,"readystatechange"),xn(g)==4){g.h=!1;try{const wt=g.Z();t:switch(wt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break t;default:w=!1}var A;if(!(A=w)){var N;if(N=wt===0){var tt=String(g.D).match(be)[1]||null;!tt&&f.self&&f.self.location&&(tt=f.self.location.protocol.slice(0,-1)),N=!Ur.test(tt?tt.toLowerCase():"")}A=N}if(A)fe(g,"complete"),fe(g,"success");else{g.m=6;try{var ut=2<xn(g)?g.g.statusText:""}catch{ut=""}g.l=ut+" ["+g.Z()+"]",jr(g)}}finally{us(g)}}}}function us(g,w){if(g.g){gn(g);const A=g.g,N=g.v[0]?()=>{}:null;g.g=null,g.v=null,w||fe(g,"ready");try{A.onreadystatechange=N}catch{}}}function gn(g){g.I&&(f.clearTimeout(g.I),g.I=null)}n.isActive=function(){return!!this.g};function xn(g){return g.g?g.g.readyState:0}n.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(g){if(this.g){var w=this.g.responseText;return g&&w.indexOf(g)==0&&(w=w.substring(g.length)),xa(w)}};function ol(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function gc(g){const w={};g=(g.g&&2<=xn(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<g.length;N++){if(F(g[N]))continue;var A=H(g[N]);const tt=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ut=w[tt]||[];w[tt]=ut,ut.push(A)}V(w,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ks(g,w,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||w}function Da(g){this.Aa=0,this.i=[],this.j=new di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ks("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ks("baseRetryDelayMs",5e3,g),this.cb=ks("retryDelaySeedMs",1e4,g),this.Wa=ks("forwardChannelMaxRetries",2,g),this.wa=ks("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new rs(g&&g.concurrentRequestLimit),this.Da=new Ms,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Da.prototype,n.la=8,n.G=1,n.connect=function(g,w,A,N){ke(0),this.W=g,this.H=w||{},A&&N!==void 0&&(this.H.OSID=A,this.H.OAID=N),this.F=this.X,this.I=Ua(this,null,this.W),lr(this)};function ka(g){if(ru(g),g.G==3){var w=g.U++,A=Le(g.I);if(jt(A,"SID",g.K),jt(A,"RID",w),jt(A,"TYPE","terminate"),Hr(g,A),w=new En(g,g.j,w),w.L=2,w.v=si(Le(A)),A=!1,f.navigator&&f.navigator.sendBeacon)try{A=f.navigator.sendBeacon(w.v.toString(),"")}catch{}!A&&f.Image&&(new Image().src=w.v,A=!0),A||(w.g=ou(w.j,null),w.g.ea(w.v)),w.F=Date.now(),Nr(w)}au(g)}function La(g){g.g&&(ur(g),g.g.cancel(),g.g=null)}function ru(g){La(g),g.u&&(f.clearTimeout(g.u),g.u=null),za(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&f.clearTimeout(g.s),g.s=null)}function lr(g){if(!Vr(g.h)&&!g.s){g.s=!0;var w=g.Ga;vt||j(),mt||(vt(),mt=!0),Vt.add(w,g),g.B=0}}function _c(g,w){return as(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=w.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Xe(S(g.Ga,g,w),Ba(g,g.B)),g.B++,!0)}n.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const tt=new En(this,this.j,g);let ut=this.o;if(this.S&&(ut?(ut=D(ut),U(ut,this.S)):ut=this.S),this.m!==null||this.O||(tt.H=ut,ut=null),this.P)t:{for(var w=0,A=0;A<this.i.length;A++){e:{var N=this.i[A];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break e}N=void 0}if(N===void 0)break;if(w+=N,4096<w){w=A;break t}if(w===4096||A===this.i.length-1){w=A+1;break t}}w=1e3}else w=1e3;w=ll(this,tt,w),A=Le(this.I),jt(A,"RID",g),jt(A,"CVER",22),this.D&&jt(A,"X-HTTP-Session-Id",this.D),Hr(this,A),ut&&(this.O?w="headers="+encodeURIComponent(String(Oa(ut)))+"&"+w:this.m&&en(A,this.m,ut)),_e(this.h,tt),this.Ua&&jt(A,"TYPE","init"),this.P?(jt(A,"$req",w),jt(A,"SID","null"),tt.T=!0,Di(tt,A,null)):Di(tt,A,w),this.G=2}}else this.G==3&&(g?Wn(this,g):this.i.length==0||Vr(this.h)||Wn(this))};function Wn(g,w){var A;w?A=w.l:A=g.U++;const N=Le(g.I);jt(N,"SID",g.K),jt(N,"RID",A),jt(N,"AID",g.T),Hr(g,N),g.m&&g.o&&en(N,g.m,g.o),A=new En(g,g.j,A,g.B+1),g.m===null&&(A.H=g.o),w&&(g.i=w.D.concat(g.i)),w=ll(g,A,1e3),A.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),_e(g.h,A),Di(A,N,w)}function Hr(g,w){g.H&&ht(g.H,function(A,N){jt(w,N,A)}),g.l&&Gt({},function(A,N){jt(w,N,A)})}function ll(g,w,A){A=Math.min(g.i.length,A);var N=g.l?S(g.l.Na,g.l,g):null;t:{var tt=g.i;let ut=-1;for(;;){const wt=["count="+A];ut==-1?0<A?(ut=tt[0].g,wt.push("ofs="+ut)):ut=0:wt.push("ofs="+ut);let se=!0;for(let Qe=0;Qe<A;Qe++){let re=tt[Qe].g;const ye=tt[Qe].map;if(re-=ut,0>re)ut=Math.max(0,tt[Qe].g-100),se=!1;else try{pi(ye,wt,"req"+re+"_")}catch{N&&N(ye)}}if(se){N=wt.join("&");break t}}}return g=g.i.splice(0,A),w.D=g,N}function Bi(g){if(!g.g&&!g.u){g.Y=1;var w=g.Fa;vt||j(),mt||(vt(),mt=!0),Vt.add(w,g),g.v=0}}function Na(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Xe(S(g.Fa,g),Ba(g,g.v)),g.v++,!0)}n.Fa=function(){if(this.u=null,Va(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Xe(S(this.ab,this),g)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),La(this),Va(this))};function ur(g){g.A!=null&&(f.clearTimeout(g.A),g.A=null)}function Va(g){g.g=new En(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var w=Le(g.qa);jt(w,"RID","rpc"),jt(w,"SID",g.K),jt(w,"AID",g.T),jt(w,"CI",g.F?"0":"1"),!g.F&&g.ja&&jt(w,"TO",g.ja),jt(w,"TYPE","xmlhttp"),Hr(g,w),g.m&&g.o&&en(w,g.m,g.o),g.L&&(g.g.I=g.L);var A=g.g;g=g.ia,A.L=1,A.v=si(Le(w)),A.m=null,A.P=!0,is(A,g)}n.Za=function(){this.C!=null&&(this.C=null,La(this),Na(this),ke(19))};function za(g){g.C!=null&&(f.clearTimeout(g.C),g.C=null)}function ul(g,w){var A=null;if(g.g==w){za(g),ur(g),g.g=null;var N=2}else if(te(g.h,w))A=w.D,ln(g.h,w),N=1;else return;if(g.G!=0){if(w.o)if(N==1){A=w.m?w.m.length:0,w=Date.now()-w.F;var tt=g.B;N=tr(),fe(N,new tn(N,A)),lr(g)}else Bi(g);else if(tt=w.s,tt==3||tt==0&&0<w.X||!(N==1&&_c(g,w)||N==2&&Na(g)))switch(A&&0<A.length&&(w=g.h,w.i=w.i.concat(A)),tt){case 1:Ls(g,5);break;case 4:Ls(g,10);break;case 3:Ls(g,6);break;default:Ls(g,2)}}}function Ba(g,w){let A=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(A*=2),A*w}function Ls(g,w){if(g.j.info("Error code "+w),w==2){var A=S(g.fb,g),N=g.Xa;const tt=!N;N=new Be(N||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||zr(N,"https"),si(N),tt?ue(N.toString(),A):mi(N.toString(),A)}else ke(2);g.G=0,g.l&&g.l.sa(w),au(g),ru(g)}n.fb=function(g){g?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))};function au(g){if(g.G=0,g.ka=[],g.l){const w=os(g.h);(w.length!=0||g.i.length!=0)&&(O(g.ka,w),O(g.ka,g.i),g.h.i.length=0,k(g.i),g.i.length=0),g.l.ra()}}function Ua(g,w,A){var N=A instanceof Be?Le(A):new Be(A);if(N.g!="")w&&(N.g=w+"."+N.g),ki(N,N.s);else{var tt=f.location;N=tt.protocol,w=w?w+"."+tt.hostname:tt.hostname,tt=+tt.port;var ut=new Be(null);N&&zr(ut,N),w&&(ut.g=w),tt&&ki(ut,tt),A&&(ut.l=A),N=ut}return A=g.D,w=g.ya,A&&w&&jt(N,A,w),jt(N,"VER",g.la),Hr(g,N),N}function ou(g,w,A){if(w&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=g.Ca&&!g.pa?new de(new Zn({eb:A})):new de(g.pa),w.Ha(g.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function cl(){}n=cl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Fr(){}Fr.prototype.g=function(g,w){return new un(g,w)};function un(g,w){De.call(this),this.g=new Da(w),this.l=g,this.h=w&&w.messageUrlParams||null,g=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(g?g["X-WebChannel-Content-Type"]=w.messageContentType:g={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(g?g["X-WebChannel-Client-Profile"]=w.va:g={"X-WebChannel-Client-Profile":w.va}),this.g.S=g,(g=w&&w.Sb)&&!F(g)&&(this.g.m=g),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!F(w)&&(this.g.D=w,g=this.h,g!==null&&w in g&&(g=this.h,w in g&&delete g[w])),this.j=new Yn(this)}P(un,De),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){ka(this.g)},un.prototype.o=function(g){var w=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.u&&(A={},A.__data__=fi(g),g=A);w.i.push(new sr(w.Ya++,g)),w.G==3&&lr(w)},un.prototype.N=function(){this.g.l=null,delete this.j,ka(this.g),delete this.g,un.aa.N.call(this)};function cs(g){es.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var w=g.__sm__;if(w){t:{for(const A in w){g=A;break t}g=void 0}(this.i=g)&&(g=this.i,w=w!==null&&g in w?w[g]:void 0),this.data=w}else this.data=g}P(cs,es);function lu(){tl.call(this),this.status=1}P(lu,tl);function Yn(g){this.g=g}P(Yn,cl),Yn.prototype.ua=function(){fe(this.g,"a")},Yn.prototype.ta=function(g){fe(this.g,new cs(g))},Yn.prototype.sa=function(g){fe(this.g,new lu)},Yn.prototype.ra=function(){fe(this.g,"b")},Fr.prototype.createWebChannel=Fr.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,G1=function(){return new Fr},q1=function(){return tr()},F1=ns,z_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Is.NO_ERROR=0,Is.TIMEOUT=8,Is.HTTP_ERROR=6,Zd=Is,Mi.COMPLETE="complete",H1=Mi,Aa.EventType=ts,ts.OPEN="a",ts.CLOSE="b",ts.ERROR="c",ts.MESSAGE="d",De.prototype.listen=De.prototype.K,gh=Aa,de.prototype.listenOnce=de.prototype.L,de.prototype.getLastError=de.prototype.Ka,de.prototype.getLastErrorCode=de.prototype.Ba,de.prototype.getStatus=de.prototype.Z,de.prototype.getResponseJson=de.prototype.Oa,de.prototype.getResponseText=de.prototype.oa,de.prototype.send=de.prototype.ea,de.prototype.setWithCredentials=de.prototype.Ha,j1=de}).apply(typeof Sd<"u"?Sd:typeof self<"u"?self:typeof window<"u"?window:{});const vE="@firebase/firestore",bE="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=new Um("@firebase/firestore");function ju(){return Ul.logLevel}function Rt(n,...t){if(Ul.logLevel<=ae.DEBUG){const e=t.map(By);Ul.debug(`Firestore (${cc}): ${n}`,...e)}}function ga(n,...t){if(Ul.logLevel<=ae.ERROR){const e=t.map(By);Ul.error(`Firestore (${cc}): ${n}`,...e)}}function Ku(n,...t){if(Ul.logLevel<=ae.WARN){const e=t.map(By);Ul.warn(`Firestore (${cc}): ${n}`,...e)}}function By(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,Z1(n,i,e)}function Z1(n,t,e){let i=`FIRESTORE (${cc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw ga(i),new Error(i)}function ve(n,t,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,n||Z1(t,r,i)}function Wt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class It extends Qs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class bO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Jn.UNAUTHENTICATED))}shutdown(){}}class TO{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class EO{constructor(t){this.t=t,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ve(this.o===void 0,42304);let i=this.i;const r=m=>this.i!==i?(i=this.i,e(m)):Promise.resolve();let l=new da;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new da,t.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const m=l;t.enqueueRetryable(async()=>{await m.promise,await r(this.currentUser)})},f=m=>{Rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new da)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ve(typeof i.accessToken=="string",31837,{l:i}),new W1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ve(t===null||typeof t=="string",2055,{h:t}),new Jn(t)}}class wO{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class SO{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new wO(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xO{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ei(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){ve(this.o===void 0,3512);const i=l=>{l.error!=null&&Rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Rt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>i(l))};const r=l=>{Rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>r(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):Rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new TE(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ve(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new TE(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=AO(40);for(let l=0;l<r.length;++l)i.length<20&&r[l]<e&&(i+=t.charAt(r[l]%62))}return i}}function Jt(n,t){return n<t?-1:n>t?1:0}function B_(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),r=t.codePointAt(e);if(i!==r){if(i<128&&r<128)return Jt(i,r);{const l=Y1(),c=RO(l.encode(EE(n,e)),l.encode(EE(t,e)));return c!==0?c:Jt(i,r)}}e+=i>65535?2:1}return Jt(n.length,t.length)}function EE(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function RO(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Jt(n[e],t[e]);return Jt(n.length,t.length)}function Xu(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=-62135596800,SE=1e6;class on{static now(){return on.fromMillis(Date.now())}static fromDate(t){return on.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*SE);return new on(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new It(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new It(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<wE)throw new It(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new It(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/SE}_compareTo(t){return this.seconds===t.seconds?Jt(this.nanoseconds,t.nanoseconds):Jt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-wE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{static fromTimestamp(t){return new Zt(t)}static min(){return new Zt(new on(0,0))}static max(){return new Zt(new on(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="__name__";class Tr{constructor(t,e,i){e===void 0?e=0:e>t.length&&Ht(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&Ht(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Tr.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Tr?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const l=Tr.compareSegments(t.get(r),e.get(r));if(l!==0)return l}return Jt(t.length,e.length)}static compareSegments(t,e){const i=Tr.isNumericId(t),r=Tr.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?Tr.extractNumericId(t).compare(Tr.extractNumericId(e)):B_(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Co.fromString(t.substring(4,t.length-2))}}class je extends Tr{construct(t,e,i){return new je(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new It(gt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new je(e)}static emptyPath(){return new je([])}}const IO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends Tr{construct(t,e,i){return new Bn(t,e,i)}static isValidIdentifier(t){return IO.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xE}static keyField(){return new Bn([xE])}static fromServerFormat(t){const e=[];let i="",r=0;const l=()=>{if(i.length===0)throw new It(gt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const f=t[r];if(f==="\\"){if(r+1===t.length)throw new It(gt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[r+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new It(gt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,r+=2}else f==="`"?(c=!c,r++):f!=="."||c?(i+=f,r++):(l(),r++)}if(l(),c)throw new It(gt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Bn(e)}static emptyPath(){return new Bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t){this.path=t}static fromPath(t){return new Lt(je.fromString(t))}static fromName(t){return new Lt(je.fromString(t).popFirst(5))}static empty(){return new Lt(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&je.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return je.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Lt(new je(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=-1;function CO(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Zt.fromTimestamp(i===1e9?new on(e+1,0):new on(e,i));return new ko(r,Lt.empty(),t)}function PO(n){return new ko(n.readTime,n.key,jh)}class ko{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new ko(Zt.min(),Lt.empty(),jh)}static max(){return new ko(Zt.max(),Lt.empty(),jh)}}function MO(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Lt.comparator(n.documentKey,t.documentKey),e!==0?e:Jt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(n){if(n.code!==gt.FAILED_PRECONDITION||n.message!==OO)throw n;Rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ht(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new _t((i,r)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(i,r)},this.catchCallback=l=>{this.wrapFailure(e,l).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof _t?e:_t.resolve(e)}catch(e){return _t.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):_t.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):_t.reject(e)}static resolve(t){return new _t((e,i)=>{e(t)})}static reject(t){return new _t((e,i)=>{i(t)})}static waitFor(t){return new _t((e,i)=>{let r=0,l=0,c=!1;t.forEach(f=>{++r,f.next(()=>{++l,c&&l===r&&e()},m=>i(m))}),c=!0,l===r&&e()})}static or(t){let e=_t.resolve(!1);for(const i of t)e=e.next(r=>r?_t.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,l)=>{i.push(e.call(this,r,l))}),this.waitFor(i)}static mapArray(t,e){return new _t((i,r)=>{const l=t.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const p=m;e(t[p]).next(v=>{c[p]=v,++f,f===l&&i(c)},v=>r(v))}})}static doWhile(t,e){return new _t((i,r)=>{const l=()=>{t()===!0?e().next(()=>{l()},r):i()};l()})}}function kO(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function fc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>e.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}jm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=-1;function Hm(n){return n==null}function om(n){return n===0&&1/n==-1/0}function LO(n){return typeof n=="number"&&Number.isInteger(n)&&!om(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="";function NO(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=AE(t)),t=VO(n.get(e),t);return AE(t)}function VO(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const l=n.charAt(r);switch(l){case"\0":e+="";break;case K1:e+="";break;default:e+=l}}return e}function AE(n){return n+K1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Fo(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function X1(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t,e){this.comparator=t,this.root=e||zn.EMPTY}insert(t,e){return new Ke(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(t){return new Ke(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new xd(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new xd(this.root,t,this.comparator,!1)}getReverseIterator(){return new xd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new xd(this.root,t,this.comparator,!0)}}class xd{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,e&&r&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class zn{constructor(t,e,i,r,l){this.key=t,this.value=e,this.color=i??zn.RED,this.left=r??zn.EMPTY,this.right=l??zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,l){return new zn(t??this.key,e??this.value,i??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const l=i(t,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(t,e,i),null):l===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return zn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ht(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ht(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ht(27949);return t+(this.isRed()?0:1)}}zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1;zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ht(57766)}get value(){throw Ht(16141)}get color(){throw Ht(16727)}get left(){throw Ht(29726)}get right(){throw Ht(36894)}copy(t,e,i,r,l){return this}insert(t,e,i){return new zn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(t){this.comparator=t,this.data=new Ke(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new IE(this.data.getIterator())}getIteratorFrom(t){return new IE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof bn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,l=i.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new bn(this.comparator);return e.data=t,e}}class IE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t){this.fields=t,t.sort(Bn.comparator)}static empty(){return new Ki([])}unionWith(t){let e=new bn(Bn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Ki(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Xu(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Q1("Invalid base64 string: "+l):l}}(t);return new jn(e)}static fromUint8Array(t){const e=function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l}(t);return new jn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Jt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}jn.EMPTY_BYTE_STRING=new jn("");const zO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lo(n){if(ve(!!n,39018),typeof n=="string"){let t=0;const e=zO.exec(n);if(ve(!!e,46558,{timestamp:n}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:rn(n.seconds),nanos:rn(n.nanos)}}function rn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function No(n){return typeof n=="string"?jn.fromBase64String(n):jn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="server_timestamp",tx="__type__",ex="__previous_value__",nx="__local_write_time__";function jy(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[tx])===null||e===void 0?void 0:e.stringValue)===J1}function Fm(n){const t=n.mapValue.fields[ex];return jy(t)?Fm(t):t}function Hh(n){const t=Lo(n.mapValue.fields[nx].timestampValue);return new on(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(t,e,i,r,l,c,f,m,p,v){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=v}}const lm="(default)";class Fh{constructor(t,e){this.projectId=t,this.database=e||lm}static empty(){return new Fh("","")}get isDefaultDatabase(){return this.database===lm}isEqual(t){return t instanceof Fh&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="__type__",UO="__max__",Ad={mapValue:{}},sx="__vector__",um="value";function Vo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jy(n)?4:HO(n)?9007199254740991:jO(n)?10:11:Ht(28295,{value:n})}function Cr(n,t){if(n===t)return!0;const e=Vo(n);if(e!==Vo(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Hh(n).isEqual(Hh(t));case 3:return function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=Lo(r.timestampValue),f=Lo(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,l){return No(r.bytesValue).isEqual(No(l.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,l){return rn(r.geoPointValue.latitude)===rn(l.geoPointValue.latitude)&&rn(r.geoPointValue.longitude)===rn(l.geoPointValue.longitude)}(n,t);case 2:return function(r,l){if("integerValue"in r&&"integerValue"in l)return rn(r.integerValue)===rn(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=rn(r.doubleValue),f=rn(l.doubleValue);return c===f?om(c)===om(f):isNaN(c)&&isNaN(f)}return!1}(n,t);case 9:return Xu(n.arrayValue.values||[],t.arrayValue.values||[],Cr);case 10:case 11:return function(r,l){const c=r.mapValue.fields||{},f=l.mapValue.fields||{};if(RE(c)!==RE(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Cr(c[m],f[m])))return!1;return!0}(n,t);default:return Ht(52216,{left:n})}}function qh(n,t){return(n.values||[]).find(e=>Cr(e,t))!==void 0}function Qu(n,t){if(n===t)return 0;const e=Vo(n),i=Vo(t);if(e!==i)return Jt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Jt(n.booleanValue,t.booleanValue);case 2:return function(l,c){const f=rn(l.integerValue||l.doubleValue),m=rn(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(n,t);case 3:return CE(n.timestampValue,t.timestampValue);case 4:return CE(Hh(n),Hh(t));case 5:return B_(n.stringValue,t.stringValue);case 6:return function(l,c){const f=No(l),m=No(c);return f.compareTo(m)}(n.bytesValue,t.bytesValue);case 7:return function(l,c){const f=l.split("/"),m=c.split("/");for(let p=0;p<f.length&&p<m.length;p++){const v=Jt(f[p],m[p]);if(v!==0)return v}return Jt(f.length,m.length)}(n.referenceValue,t.referenceValue);case 8:return function(l,c){const f=Jt(rn(l.latitude),rn(c.latitude));return f!==0?f:Jt(rn(l.longitude),rn(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return PE(n.arrayValue,t.arrayValue);case 10:return function(l,c){var f,m,p,v;const E=l.fields||{},S=c.fields||{},I=(f=E[um])===null||f===void 0?void 0:f.arrayValue,P=(m=S[um])===null||m===void 0?void 0:m.arrayValue,k=Jt(((p=I==null?void 0:I.values)===null||p===void 0?void 0:p.length)||0,((v=P==null?void 0:P.values)===null||v===void 0?void 0:v.length)||0);return k!==0?k:PE(I,P)}(n.mapValue,t.mapValue);case 11:return function(l,c){if(l===Ad.mapValue&&c===Ad.mapValue)return 0;if(l===Ad.mapValue)return 1;if(c===Ad.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),p=c.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const S=B_(m[E],v[E]);if(S!==0)return S;const I=Qu(f[m[E]],p[v[E]]);if(I!==0)return I}return Jt(m.length,v.length)}(n.mapValue,t.mapValue);default:throw Ht(23264,{Pe:e})}}function CE(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Jt(n,t);const e=Lo(n),i=Lo(t),r=Jt(e.seconds,i.seconds);return r!==0?r:Jt(e.nanos,i.nanos)}function PE(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const l=Qu(e[r],i[r]);if(l)return l}return Jt(e.length,i.length)}function Ju(n){return U_(n)}function U_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=Lo(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return No(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Lt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const l of e.values||[])r?r=!1:i+=",",i+=U_(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",l=!0;for(const c of i)l?l=!1:r+=",",r+=`${c}:${U_(e.fields[c])}`;return r+"}"}(n.mapValue):Ht(61005,{value:n})}function Wd(n){switch(Vo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Fm(n);return t?16+Wd(t):16;case 5:return 2*n.stringValue.length;case 6:return No(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,l)=>r+Wd(l),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return Fo(i.fields,(l,c)=>{r+=l.length+Wd(c)}),r}(n.mapValue);default:throw Ht(13486,{value:n})}}function ME(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function j_(n){return!!n&&"integerValue"in n}function Hy(n){return!!n&&"arrayValue"in n}function OE(n){return!!n&&"nullValue"in n}function DE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yd(n){return!!n&&"mapValue"in n}function jO(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[ix])===null||e===void 0?void 0:e.stringValue)===sx}function Ih(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Fo(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Ih(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ih(n.arrayValue.values[e]);return t}return Object.assign({},n)}function HO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===UO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(t){this.value=t}static empty(){return new wi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Yd(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ih(e)}setAll(t){let e=Bn.emptyPath(),i={},r=[];t.forEach((c,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,i,r),i={},r=[],e=f.popLast()}c?i[f.lastSegment()]=Ih(c):r.push(f.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,i,r)}delete(t){const e=this.field(t.popLast());Yd(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Cr(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Yd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Fo(e,(r,l)=>t[r]=l);for(const r of i)delete t[r]}clone(){return new wi(Ih(this.value))}}function rx(n){const t=[];return Fo(n.fields,(e,i)=>{const r=new Bn([e]);if(Yd(i)){const l=rx(i.mapValue).fields;if(l.length===0)t.push(r);else for(const c of l)t.push(r.child(c))}else t.push(r)}),new Ki(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t,e,i,r,l,c,f){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(t){return new ti(t,0,Zt.min(),Zt.min(),Zt.min(),wi.empty(),0)}static newFoundDocument(t,e,i,r){return new ti(t,1,e,Zt.min(),i,r,0)}static newNoDocument(t,e){return new ti(t,2,e,Zt.min(),Zt.min(),wi.empty(),0)}static newUnknownDocument(t,e){return new ti(t,3,e,Zt.min(),Zt.min(),wi.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=wi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ti&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ti(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(t,e){this.position=t,this.inclusive=e}}function kE(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const l=t[r],c=n.position[r];if(l.field.isKeyField()?i=Lt.comparator(Lt.fromName(c.referenceValue),e.key):i=Qu(c,e.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function LE(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Cr(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(t,e="asc"){this.field=t,this.dir=e}}function FO(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{}class dn extends ax{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new GO(t,e,i):e==="array-contains"?new YO(t,i):e==="in"?new $O(t,i):e==="not-in"?new KO(t,i):e==="array-contains-any"?new XO(t,i):new dn(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new ZO(t,i):new WO(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Qu(e,this.value)):e!==null&&Vo(this.value)===Vo(e)&&this.matchesComparison(Qu(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ht(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ys extends ax{constructor(t,e){super(),this.filters=t,this.op=e,this.Te=null}static create(t,e){return new Ys(t,e)}matches(t){return ox(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ox(n){return n.op==="and"}function lx(n){return qO(n)&&ox(n)}function qO(n){for(const t of n.filters)if(t instanceof Ys)return!1;return!0}function H_(n){if(n instanceof dn)return n.field.canonicalString()+n.op.toString()+Ju(n.value);if(lx(n))return n.filters.map(t=>H_(t)).join(",");{const t=n.filters.map(e=>H_(e)).join(",");return`${n.op}(${t})`}}function ux(n,t){return n instanceof dn?function(i,r){return r instanceof dn&&i.op===r.op&&i.field.isEqual(r.field)&&Cr(i.value,r.value)}(n,t):n instanceof Ys?function(i,r){return r instanceof Ys&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((l,c,f)=>l&&ux(c,r.filters[f]),!0):!1}(n,t):void Ht(19439)}function cx(n){return n instanceof dn?function(e){return`${e.field.canonicalString()} ${e.op} ${Ju(e.value)}`}(n):n instanceof Ys?function(e){return e.op.toString()+" {"+e.getFilters().map(cx).join(" ,")+"}"}(n):"Filter"}class GO extends dn{constructor(t,e,i){super(t,e,i),this.key=Lt.fromName(i.referenceValue)}matches(t){const e=Lt.comparator(t.key,this.key);return this.matchesComparison(e)}}class ZO extends dn{constructor(t,e){super(t,"in",e),this.keys=hx("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class WO extends dn{constructor(t,e){super(t,"not-in",e),this.keys=hx("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function hx(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>Lt.fromName(i.referenceValue))}class YO extends dn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Hy(e)&&qh(e.arrayValue,this.value)}}class $O extends dn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&qh(this.value.arrayValue,e)}}class KO extends dn{constructor(t,e){super(t,"not-in",e)}matches(t){if(qh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!qh(this.value.arrayValue,e)}}class XO extends dn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Hy(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>qh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(t,e=null,i=[],r=[],l=null,c=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=l,this.startAt=c,this.endAt=f,this.Ie=null}}function NE(n,t=null,e=[],i=[],r=null,l=null,c=null){return new QO(n,t,e,i,r,l,c)}function Fy(n){const t=Wt(n);if(t.Ie===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>H_(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Hm(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Ju(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Ju(i)).join(",")),t.Ie=e}return t.Ie}function qy(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!FO(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!ux(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!LE(n.startAt,t.startAt)&&LE(n.endAt,t.endAt)}function F_(n){return Lt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(t,e=null,i=[],r=[],l=null,c="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function JO(n,t,e,i,r,l,c,f){return new dc(n,t,e,i,r,l,c,f)}function qm(n){return new dc(n)}function VE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fx(n){return n.collectionGroup!==null}function Ch(n){const t=Wt(n);if(t.Ee===null){t.Ee=[];const e=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),e.add(l.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new bn(Bn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(f=f.add(p.field))})}),f})(t).forEach(l=>{e.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new Gh(l,i))}),e.has(Bn.keyField().canonicalString())||t.Ee.push(new Gh(Bn.keyField(),i))}return t.Ee}function Sr(n){const t=Wt(n);return t.de||(t.de=tD(t,Ch(n))),t.de}function tD(n,t){if(n.limitType==="F")return NE(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const l=r.dir==="desc"?"asc":"desc";return new Gh(r.field,l)});const e=n.endAt?new cm(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new cm(n.startAt.position,n.startAt.inclusive):null;return NE(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function q_(n,t){const e=n.filters.concat([t]);return new dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function G_(n,t,e){return new dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Gm(n,t){return qy(Sr(n),Sr(t))&&n.limitType===t.limitType}function dx(n){return`${Fy(Sr(n))}|lt:${n.limitType}`}function Hu(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>cx(r)).join(", ")}]`),Hm(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Ju(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Ju(r)).join(",")),`Target(${i})`}(Sr(n))}; limitType=${n.limitType})`}function Zm(n,t){return t.isFoundDocument()&&function(i,r){const l=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Lt.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,t)&&function(i,r){for(const l of Ch(i))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0}(n,t)&&function(i,r){for(const l of i.filters)if(!l.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(c,f,m){const p=kE(c,f,m);return c.inclusive?p<=0:p<0}(i.startAt,Ch(i),r)||i.endAt&&!function(c,f,m){const p=kE(c,f,m);return c.inclusive?p>=0:p>0}(i.endAt,Ch(i),r))}(n,t)}function eD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mx(n){return(t,e)=>{let i=!1;for(const r of Ch(n)){const l=nD(r,t,e);if(l!==0)return l;i=i||r.field.isKeyField()}return 0}}function nD(n,t,e){const i=n.field.isKeyField()?Lt.comparator(t.key,e.key):function(l,c,f){const m=c.data.field(l),p=f.data.field(l);return m!==null&&p!==null?Qu(m,p):Ht(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ht(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,l]of i)if(this.equalsFn(r,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return void(r[l]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Fo(this.inner,(e,i)=>{for(const[r,l]of i)t(r,l)})}isEmpty(){return X1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=new Ke(Lt.comparator);function _a(){return iD}const px=new Ke(Lt.comparator);function _h(...n){let t=px;for(const e of n)t=t.insert(e.key,e);return t}function gx(n){let t=px;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Ll(){return Ph()}function _x(){return Ph()}function Ph(){return new Kl(n=>n.toString(),(n,t)=>n.isEqual(t))}const sD=new Ke(Lt.comparator),rD=new bn(Lt.comparator);function oe(...n){let t=rD;for(const e of n)t=t.add(e);return t}const aD=new bn(Jt);function oD(){return aD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:om(t)?"-0":t}}function yx(n){return{integerValue:""+n}}function lD(n,t){return LO(t)?yx(t):Gy(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this._=void 0}}function uD(n,t,e){return n instanceof Zh?function(r,l){const c={fields:{[tx]:{stringValue:J1},[nx]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&jy(l)&&(l=Fm(l)),l&&(c.fields[ex]=l),{mapValue:c}}(e,t):n instanceof Wh?bx(n,t):n instanceof Yh?Tx(n,t):function(r,l){const c=vx(r,l),f=zE(c)+zE(r.Re);return j_(c)&&j_(r.Re)?yx(f):Gy(r.serializer,f)}(n,t)}function cD(n,t,e){return n instanceof Wh?bx(n,t):n instanceof Yh?Tx(n,t):e}function vx(n,t){return n instanceof hm?function(i){return j_(i)||function(l){return!!l&&"doubleValue"in l}(i)}(t)?t:{integerValue:0}:null}class Zh extends Wm{}class Wh extends Wm{constructor(t){super(),this.elements=t}}function bx(n,t){const e=Ex(t);for(const i of n.elements)e.some(r=>Cr(r,i))||e.push(i);return{arrayValue:{values:e}}}class Yh extends Wm{constructor(t){super(),this.elements=t}}function Tx(n,t){let e=Ex(t);for(const i of n.elements)e=e.filter(r=>!Cr(r,i));return{arrayValue:{values:e}}}class hm extends Wm{constructor(t,e){super(),this.serializer=t,this.Re=e}}function zE(n){return rn(n.integerValue||n.doubleValue)}function Ex(n){return Hy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(t,e){this.field=t,this.transform=e}}function fD(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Wh&&r instanceof Wh||i instanceof Yh&&r instanceof Yh?Xu(i.elements,r.elements,Cr):i instanceof hm&&r instanceof hm?Cr(i.Re,r.Re):i instanceof Zh&&r instanceof Zh}(n.transform,t.transform)}class dD{constructor(t,e){this.version=t,this.transformResults=e}}class Gs{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Gs}static exists(t){return new Gs(void 0,t)}static updateTime(t){return new Gs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function $d(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Ym{}function wx(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new xx(n.key,Gs.none()):new lf(n.key,n.data,Gs.none());{const e=n.data,i=wi.empty();let r=new bn(Bn.comparator);for(let l of t.fields)if(!r.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?i.delete(l):i.set(l,c),r=r.add(l)}return new qo(n.key,i,new Ki(r.toArray()),Gs.none())}}function mD(n,t,e){n instanceof lf?function(r,l,c){const f=r.value.clone(),m=UE(r.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,t,e):n instanceof qo?function(r,l,c){if(!$d(r.precondition,l))return void l.convertToUnknownDocument(c.version);const f=UE(r.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Sx(r)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,t,e):function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function Mh(n,t,e,i){return n instanceof lf?function(l,c,f,m){if(!$d(l.precondition,c))return f;const p=l.value.clone(),v=jE(l.fieldTransforms,m,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof qo?function(l,c,f,m){if(!$d(l.precondition,c))return f;const p=jE(l.fieldTransforms,m,c),v=c.data;return v.setAll(Sx(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(n,t,e,i):function(l,c,f){return $d(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(n,t,e)}function pD(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),l=vx(i.transform,r||null);l!=null&&(e===null&&(e=wi.empty()),e.set(i.field,l))}return e||null}function BE(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Xu(i,r,(l,c)=>fD(l,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class lf extends Ym{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class qo extends Ym{constructor(t,e,i,r,l=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Sx(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function UE(n,t,e){const i=new Map;ve(n.length===e.length,32656,{Ve:e.length,me:n.length});for(let r=0;r<e.length;r++){const l=n[r],c=l.transform,f=t.data.field(l.field);i.set(l.field,cD(c,f,e[r]))}return i}function jE(n,t,e){const i=new Map;for(const r of n){const l=r.transform,c=e.data.field(r.field);i.set(r.field,uD(l,c,t))}return i}class xx extends Ym{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gD extends Ym{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(t.key)&&mD(l,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Mh(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Mh(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=_x();return this.mutations.forEach(r=>{const l=t.get(r.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=e.has(r.key)?null:f;const m=wx(c,f);m!==null&&i.set(r.key,m),c.isValidDocument()||c.convertToNoDocument(Zt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),oe())}isEqual(t){return this.batchId===t.batchId&&Xu(this.mutations,t.mutations,(e,i)=>BE(e,i))&&Xu(this.baseMutations,t.baseMutations,(e,i)=>BE(e,i))}}class Zy{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){ve(t.mutations.length===i.length,58842,{fe:t.mutations.length,ge:i.length});let r=function(){return sD}();const l=t.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,i[c].version);return new Zy(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fn,he;function bD(n){switch(n){case gt.OK:return Ht(64938);case gt.CANCELLED:case gt.UNKNOWN:case gt.DEADLINE_EXCEEDED:case gt.RESOURCE_EXHAUSTED:case gt.INTERNAL:case gt.UNAVAILABLE:case gt.UNAUTHENTICATED:return!1;case gt.INVALID_ARGUMENT:case gt.NOT_FOUND:case gt.ALREADY_EXISTS:case gt.PERMISSION_DENIED:case gt.FAILED_PRECONDITION:case gt.ABORTED:case gt.OUT_OF_RANGE:case gt.UNIMPLEMENTED:case gt.DATA_LOSS:return!0;default:return Ht(15467,{code:n})}}function Ax(n){if(n===void 0)return ga("GRPC error has no .code"),gt.UNKNOWN;switch(n){case fn.OK:return gt.OK;case fn.CANCELLED:return gt.CANCELLED;case fn.UNKNOWN:return gt.UNKNOWN;case fn.DEADLINE_EXCEEDED:return gt.DEADLINE_EXCEEDED;case fn.RESOURCE_EXHAUSTED:return gt.RESOURCE_EXHAUSTED;case fn.INTERNAL:return gt.INTERNAL;case fn.UNAVAILABLE:return gt.UNAVAILABLE;case fn.UNAUTHENTICATED:return gt.UNAUTHENTICATED;case fn.INVALID_ARGUMENT:return gt.INVALID_ARGUMENT;case fn.NOT_FOUND:return gt.NOT_FOUND;case fn.ALREADY_EXISTS:return gt.ALREADY_EXISTS;case fn.PERMISSION_DENIED:return gt.PERMISSION_DENIED;case fn.FAILED_PRECONDITION:return gt.FAILED_PRECONDITION;case fn.ABORTED:return gt.ABORTED;case fn.OUT_OF_RANGE:return gt.OUT_OF_RANGE;case fn.UNIMPLEMENTED:return gt.UNIMPLEMENTED;case fn.DATA_LOSS:return gt.DATA_LOSS;default:return Ht(39323,{code:n})}}(he=fn||(fn={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=new Co([4294967295,4294967295],0);function HE(n){const t=Y1().encode(n),e=new U1;return e.update(t),new Uint8Array(e.digest())}function FE(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Co([e,i],0),new Co([r,l],0)]}class Wy{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new yh(`Invalid padding: ${e}`);if(i<0)throw new yh(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new yh(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new yh(`Invalid padding when bitmap length is 0: ${e}`);this.pe=8*t.length-e,this.ye=Co.fromNumber(this.pe)}we(t,e,i){let r=t.add(e.multiply(Co.fromNumber(i)));return r.compare(TD)===1&&(r=new Co([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const e=HE(t),[i,r]=FE(e);for(let l=0;l<this.hashCount;l++){const c=this.we(i,r,l);if(!this.be(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new Wy(l,r,e);return i.forEach(f=>c.insert(f)),c}insert(t){if(this.pe===0)return;const e=HE(t),[i,r]=FE(e);for(let l=0;l<this.hashCount;l++){const c=this.we(i,r,l);this.Se(c)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class yh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(t,e,i,r,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,uf.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new $m(Zt.min(),r,new Ke(Jt),_a(),oe())}}class uf{constructor(t,e,i,r,l){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new uf(i,e,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(t,e,i,r){this.De=t,this.removedTargetIds=e,this.key=i,this.ve=r}}class Rx{constructor(t,e){this.targetId=t,this.Ce=e}}class Ix{constructor(t,e,i=jn.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class qE{constructor(){this.Fe=0,this.Me=GE(),this.xe=jn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=oe(),e=oe(),i=oe();return this.Me.forEach((r,l)=>{switch(l){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Ht(38017,{changeType:l})}}),new uf(this.xe,this.Oe,t,e,i)}Qe(){this.Ne=!1,this.Me=GE()}$e(t,e){this.Ne=!0,this.Me=this.Me.insert(t,e)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,ve(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class ED{constructor(t){this.ze=t,this.je=new Map,this.He=_a(),this.Je=Rd(),this.Ye=Rd(),this.Ze=new Ke(Jt)}Xe(t){for(const e of t.De)t.ve&&t.ve.isFoundDocument()?this.et(e,t.ve):this.tt(e,t.key,t.ve);for(const e of t.removedTargetIds)this.tt(e,t.key,t.ve)}nt(t){this.forEachTarget(t,e=>{const i=this.rt(e);switch(t.state){case 0:this.it(e)&&i.ke(t.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(t.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(e);break;case 3:this.it(e)&&(i.Ge(),i.ke(t.resumeToken));break;case 4:this.it(e)&&(this.st(e),i.ke(t.resumeToken));break;default:Ht(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.je.forEach((i,r)=>{this.it(r)&&e(r)})}ot(t){const e=t.targetId,i=t.Ce.count,r=this._t(e);if(r){const l=r.target;if(F_(l))if(i===0){const c=new Lt(l.path);this.tt(e,c,ti.newNoDocument(c,Zt.min()))}else ve(i===1,20013,{expectedCount:i});else{const c=this.ut(e);if(c!==i){const f=this.ct(t),m=f?this.lt(f,t,c):1;if(m!==0){this.st(e);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,p)}}}}}ct(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:l=0}=e;let c,f;try{c=No(i).toUint8Array()}catch(m){if(m instanceof Q1)return Ku("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Wy(c,r,l)}catch(m){return Ku(m instanceof yh?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.pe===0?null:f}lt(t,e,i){return e.Ce.count===i-this.Tt(t,e.targetId)?0:2}Tt(t,e){const i=this.ze.getRemoteKeysForTarget(e);let r=0;return i.forEach(l=>{const c=this.ze.Pt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(f)||(this.tt(e,l,null),r++)}),r}It(t){const e=new Map;this.je.forEach((l,c)=>{const f=this._t(c);if(f){if(l.current&&F_(f.target)){const m=new Lt(f.target.path);this.Et(m).has(c)||this.dt(c,m)||this.tt(c,m,ti.newNoDocument(m,t))}l.Le&&(e.set(c,l.qe()),l.Qe())}});let i=oe();this.Ye.forEach((l,c)=>{let f=!0;c.forEachWhile(m=>{const p=this._t(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.He.forEach((l,c)=>c.setReadTime(t));const r=new $m(t,e,this.Ze,this.He,i);return this.He=_a(),this.Je=Rd(),this.Ye=Rd(),this.Ze=new Ke(Jt),r}et(t,e){if(!this.it(t))return;const i=this.dt(t,e.key)?2:0;this.rt(t).$e(e.key,i),this.He=this.He.insert(e.key,e),this.Je=this.Je.insert(e.key,this.Et(e.key).add(t)),this.Ye=this.Ye.insert(e.key,this.At(e.key).add(t))}tt(t,e,i){if(!this.it(t))return;const r=this.rt(t);this.dt(t,e)?r.$e(e,1):r.Ue(e),this.Ye=this.Ye.insert(e,this.At(e).delete(t)),this.Ye=this.Ye.insert(e,this.At(e).add(t)),i&&(this.He=this.He.insert(e,i))}removeTarget(t){this.je.delete(t)}ut(t){const e=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let e=this.je.get(t);return e||(e=new qE,this.je.set(t,e)),e}At(t){let e=this.Ye.get(t);return e||(e=new bn(Jt),this.Ye=this.Ye.insert(t,e)),e}Et(t){let e=this.Je.get(t);return e||(e=new bn(Jt),this.Je=this.Je.insert(t,e)),e}it(t){const e=this._t(t)!==null;return e||Rt("WatchChangeAggregator","Detected inactive target",t),e}_t(t){const e=this.je.get(t);return e&&e.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new qE),this.ze.getRemoteKeysForTarget(t).forEach(e=>{this.tt(t,e,null)})}dt(t,e){return this.ze.getRemoteKeysForTarget(t).has(e)}}function Rd(){return new Ke(Lt.comparator)}function GE(){return new Ke(Lt.comparator)}const wD={asc:"ASCENDING",desc:"DESCENDING"},SD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xD={and:"AND",or:"OR"};class AD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Z_(n,t){return n.useProto3Json||Hm(t)?t:{value:t}}function fm(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Cx(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function RD(n,t){return fm(n,t.toTimestamp())}function xr(n){return ve(!!n,49232),Zt.fromTimestamp(function(e){const i=Lo(e);return new on(i.seconds,i.nanos)}(n))}function Yy(n,t){return W_(n,t).canonicalString()}function W_(n,t){const e=function(r){return new je(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function Px(n){const t=je.fromString(n);return ve(Lx(t),10190,{key:t.toString()}),t}function Y_(n,t){return Yy(n.databaseId,t.path)}function d_(n,t){const e=Px(t);if(e.get(1)!==n.databaseId.projectId)throw new It(gt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new It(gt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Lt(Ox(e))}function Mx(n,t){return Yy(n.databaseId,t)}function ID(n){const t=Px(n);return t.length===4?je.emptyPath():Ox(t)}function $_(n){return new je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ox(n){return ve(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ZE(n,t,e){return{name:Y_(n,t),fields:e.value.mapValue.fields}}function CD(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ht(39313,{state:p})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],l=function(p,v){return p.useProto3Json?(ve(v===void 0||typeof v=="string",58123),jn.fromBase64String(v||"")):(ve(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),jn.fromUint8Array(v||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,f=c&&function(p){const v=p.code===void 0?gt.UNKNOWN:Ax(p.code);return new It(v,p.message||"")}(c);e=new Ix(i,r,l,f||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=d_(n,i.document.name),l=xr(i.document.updateTime),c=i.document.createTime?xr(i.document.createTime):Zt.min(),f=new wi({mapValue:{fields:i.document.fields}}),m=ti.newFoundDocument(r,l,c,f),p=i.targetIds||[],v=i.removedTargetIds||[];e=new Kd(p,v,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=d_(n,i.document),l=i.readTime?xr(i.readTime):Zt.min(),c=ti.newNoDocument(r,l),f=i.removedTargetIds||[];e=new Kd([],f,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=d_(n,i.document),l=i.removedTargetIds||[];e=new Kd([],l,r,null)}else{if(!("filter"in t))return Ht(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:l}=i,c=new vD(r,l),f=i.targetId;e=new Rx(f,c)}}return e}function PD(n,t){let e;if(t instanceof lf)e={update:ZE(n,t.key,t.value)};else if(t instanceof xx)e={delete:Y_(n,t.key)};else if(t instanceof qo)e={update:ZE(n,t.key,t.data),updateMask:BD(t.fieldMask)};else{if(!(t instanceof gD))return Ht(16599,{ft:t.type});e={verify:Y_(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(l,c){const f=c.transform;if(f instanceof Zh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Wh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Yh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof hm)return{fieldPath:c.field.canonicalString(),increment:f.Re};throw Ht(20930,{transform:c.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,l){return l.updateTime!==void 0?{updateTime:RD(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ht(27497)}(n,t.precondition)),e}function MD(n,t){return n&&n.length>0?(ve(t!==void 0,14353),n.map(e=>function(r,l){let c=r.updateTime?xr(r.updateTime):xr(l);return c.isEqual(Zt.min())&&(c=xr(l)),new dD(c,r.transformResults||[])}(e,t))):[]}function OD(n,t){return{documents:[Mx(n,t.path)]}}function DD(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=Mx(n,r);const l=function(p){if(p.length!==0)return kx(Ys.create(p,"and"))}(t.filters);l&&(e.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(v=>function(S){return{field:Fu(S.field),direction:ND(S.dir)}}(v))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const f=Z_(n,t.limit);return f!==null&&(e.structuredQuery.limit=f),t.startAt&&(e.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{gt:e,parent:r}}function kD(n){let t=ID(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){ve(i===1,65062);const v=e.from[0];v.allDescendants?r=v.collectionId:t=t.child(v.collectionId)}let l=[];e.where&&(l=function(E){const S=Dx(E);return S instanceof Ys&&lx(S)?S.getFilters():[S]}(e.where));let c=[];e.orderBy&&(c=function(E){return E.map(S=>function(P){return new Gh(qu(P.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(S))}(e.orderBy));let f=null;e.limit&&(f=function(E){let S;return S=typeof E=="object"?E.value:E,Hm(S)?null:S}(e.limit));let m=null;e.startAt&&(m=function(E){const S=!!E.before,I=E.values||[];return new cm(I,S)}(e.startAt));let p=null;return e.endAt&&(p=function(E){const S=!E.before,I=E.values||[];return new cm(I,S)}(e.endAt)),JO(t,r,c,l,f,"F",m,p)}function LD(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ht(28987,{purpose:r})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Dx(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=qu(e.unaryFilter.field);return dn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=qu(e.unaryFilter.field);return dn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qu(e.unaryFilter.field);return dn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=qu(e.unaryFilter.field);return dn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ht(61313);default:return Ht(60726)}}(n):n.fieldFilter!==void 0?function(e){return dn.create(qu(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ht(58110);default:return Ht(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Ys.create(e.compositeFilter.filters.map(i=>Dx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ht(1026)}}(e.compositeFilter.op))}(n):Ht(30097,{filter:n})}function ND(n){return wD[n]}function VD(n){return SD[n]}function zD(n){return xD[n]}function Fu(n){return{fieldPath:n.canonicalString()}}function qu(n){return Bn.fromServerFormat(n.fieldPath)}function kx(n){return n instanceof dn?function(e){if(e.op==="=="){if(DE(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NAN"}};if(OE(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(DE(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NOT_NAN"}};if(OE(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fu(e.field),op:VD(e.op),value:e.value}}}(n):n instanceof Ys?function(e){const i=e.getFilters().map(r=>kx(r));return i.length===1?i[0]:{compositeFilter:{op:zD(e.op),filters:i}}}(n):Ht(54877,{filter:n})}function BD(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Lx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(t,e,i,r,l=Zt.min(),c=Zt.min(),f=jn.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(t){return new wo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(t){this.wt=t}}function jD(n){const t=kD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?G_(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this.Cn=new FD}addToCollectionParentIndex(t,e){return this.Cn.add(e),_t.resolve()}getCollectionParents(t,e){return _t.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return _t.resolve()}deleteFieldIndex(t,e){return _t.resolve()}deleteAllFieldIndexes(t){return _t.resolve()}createTargetIndexes(t,e){return _t.resolve()}getDocumentsMatchingTarget(t,e){return _t.resolve(null)}getIndexType(t,e){return _t.resolve(0)}getFieldIndexes(t,e){return _t.resolve([])}getNextCollectionGroupToUpdate(t){return _t.resolve(null)}getMinOffset(t,e){return _t.resolve(ko.min())}getMinOffsetFromCollectionGroup(t,e){return _t.resolve(ko.min())}updateCollectionGroup(t,e,i){return _t.resolve()}updateIndexEntries(t,e){return _t.resolve()}}class FD{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new bn(je.comparator),l=!r.has(i);return this.index[e]=r.add(i),l}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new bn(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nx=41943040;class Ti{static withCacheSize(t){return new Ti(t,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti.DEFAULT_COLLECTION_PERCENTILE=10,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ti.DEFAULT=new Ti(Nx,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ti.DISABLED=new Ti(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new tc(0)}static lr(){return new tc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="LruGarbageCollector",qD=1048576;function $E([n,t],[e,i]){const r=Jt(n,e);return r===0?Jt(t,i):r}class GD{constructor(t){this.Er=t,this.buffer=new bn($E),this.dr=0}Ar(){return++this.dr}Rr(t){const e=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();$E(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class ZD{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){Rt(YE,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){fc(e)?Rt(YE,"Ignoring IndexedDB error during garbage collection: ",e):await hc(e)}await this.mr(3e5)})}}class WD{constructor(t,e){this.gr=t,this.params=e}calculateTargetCount(t,e){return this.gr.pr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return _t.resolve(jm.le);const i=new GD(e);return this.gr.forEachTarget(t,r=>i.Rr(r.sequenceNumber)).next(()=>this.gr.yr(t,r=>i.Rr(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.gr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.gr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Rt("LruGarbageCollector","Garbage collection skipped; disabled"),_t.resolve(WE)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WE):this.wr(t,e))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,e){let i,r,l,c,f,m,p;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,c=Date.now(),this.nthSequenceNumber(t,r))).next(E=>(i=E,f=Date.now(),this.removeTargets(t,i,e))).next(E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(t,i))).next(E=>(p=Date.now(),ju()<=ae.DEBUG&&Rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${r} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(p-m)+`ms
Total Duration: ${p-v}ms`),_t.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:E})))}}function YD(n,t){return new WD(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.changes=new Kl(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ti.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?_t.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&Mh(i.mutation,r,Ki.empty(),on.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,oe()).next(()=>i))}getLocalViewOfDocuments(t,e,i=oe()){const r=Ll();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(l=>{let c=_h();return l.forEach((f,m)=>{c=c.insert(f,m.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=Ll();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,oe()))}populateOverlays(t,e,i){const r=[];return i.forEach(l=>{e.has(l)||r.push(l)}),this.documentOverlayCache.getOverlays(t,r).next(l=>{l.forEach((c,f)=>{e.set(c,f)})})}computeViews(t,e,i,r){let l=_a();const c=Ph(),f=function(){return Ph()}();return e.forEach((m,p)=>{const v=i.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof qo)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Mh(v.mutation,p,v.mutation.getFieldMask(),on.now())):c.set(p.key,Ki.empty())}),this.recalculateAndSaveOverlays(t,l).next(m=>(m.forEach((p,v)=>c.set(p,v)),e.forEach((p,v)=>{var E;return f.set(p,new KD(v,(E=c.get(p))!==null&&E!==void 0?E:null))}),f))}recalculateAndSaveOverlays(t,e){const i=Ph();let r=new Ke((c,f)=>c-f),l=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const f of c)f.keys().forEach(m=>{const p=e.get(m);if(p===null)return;let v=i.get(m)||Ki.empty();v=f.applyToLocalView(p,v),i.set(m,v);const E=(r.get(f.batchId)||oe()).add(m);r=r.insert(f.batchId,E)})}).next(()=>{const c=[],f=r.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,v=m.value,E=_x();v.forEach(S=>{if(!l.has(S)){const I=wx(e.get(S),i.get(S));I!==null&&E.set(S,I),l=l.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(t,p,E))}return _t.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(c){return Lt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):fx(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-l.size):_t.resolve(Ll());let f=jh,m=l;return c.next(p=>_t.forEach(p,(v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?_t.resolve():this.remoteDocumentCache.getEntry(t,v).next(S=>{m=m.insert(v,S)}))).next(()=>this.populateOverlays(t,p,l)).next(()=>this.computeViews(t,m,p,oe())).next(v=>({batchId:f,changes:gx(v)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Lt(e)).next(i=>{let r=_h();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const l=e.collectionGroup;let c=_h();return this.indexManager.getCollectionParents(t,l).next(f=>_t.forEach(f,m=>{const p=function(E,S){return new dc(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(e,m.child(l));return this.getDocumentsMatchingCollectionQuery(t,p,i,r).next(v=>{v.forEach((E,S)=>{c=c.insert(E,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,r){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,l,r))).next(c=>{l.forEach((m,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,ti.newInvalidDocument(v)))});let f=_h();return c.forEach((m,p)=>{const v=l.get(m);v!==void 0&&Mh(v.mutation,p,Ki.empty(),on.now()),Zm(e,p)&&(f=f.insert(m,p))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,e){return _t.resolve(this.kr.get(e))}saveBundleMetadata(t,e){return this.kr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:xr(r.createTime)}}(e)),_t.resolve()}getNamedQuery(t,e){return _t.resolve(this.qr.get(e))}saveNamedQuery(t,e){return this.qr.set(e.name,function(r){return{name:r.name,query:jD(r.bundledQuery),readTime:xr(r.readTime)}}(e)),_t.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.overlays=new Ke(Lt.comparator),this.Qr=new Map}getOverlay(t,e){return _t.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Ll();return _t.forEach(e,r=>this.getOverlay(t,r).next(l=>{l!==null&&i.set(r,l)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,l)=>{this.St(t,e,l)}),_t.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Qr.get(i);return r!==void 0&&(r.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(i)),_t.resolve()}getOverlaysForCollection(t,e,i){const r=Ll(),l=e.length+1,c=new Lt(e.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&r.set(m.getKey(),m)}return _t.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let l=new Ke((p,v)=>p-v);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>i){let v=l.get(p.largestBatchId);v===null&&(v=Ll(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const f=Ll(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,v)=>f.set(p,v)),!(f.size()>=r)););return _t.resolve(f)}St(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.Qr.get(r.largestBatchId).delete(i.key);this.Qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new yD(e,i));let l=this.Qr.get(e);l===void 0&&(l=oe(),this.Qr.set(e,l)),this.Qr.set(e,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.sessionToken=jn.EMPTY_BYTE_STRING}getSessionToken(t){return _t.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,_t.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(){this.$r=new bn(Pn.Ur),this.Kr=new bn(Pn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,e){const i=new Pn(t,e);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.zr(new Pn(t,e))}jr(t,e){t.forEach(i=>this.removeReference(i,e))}Hr(t){const e=new Lt(new je([])),i=new Pn(e,t),r=new Pn(e,t+1),l=[];return this.Kr.forEachInRange([i,r],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const e=new Lt(new je([])),i=new Pn(e,t),r=new Pn(e,t+1);let l=oe();return this.Kr.forEachInRange([i,r],c=>{l=l.add(c.key)}),l}containsKey(t){const e=new Pn(t,0),i=this.$r.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Pn{constructor(t,e){this.key=t,this.Zr=e}static Ur(t,e){return Lt.comparator(t.key,e.key)||Jt(t.Zr,e.Zr)}static Wr(t,e){return Jt(t.Zr,e.Zr)||Lt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nr=1,this.Xr=new bn(Pn.Ur)}checkEmpty(t){return _t.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new _D(l,e,i,r);this.mutationQueue.push(c);for(const f of r)this.Xr=this.Xr.add(new Pn(f.key,l)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return _t.resolve(c)}lookupMutationBatch(t,e){return _t.resolve(this.ei(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.ti(i),l=r<0?0:r;return _t.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return _t.resolve(this.mutationQueue.length===0?Uy:this.nr-1)}getAllMutationBatches(t){return _t.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Pn(e,0),r=new Pn(e,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([i,r],c=>{const f=this.ei(c.Zr);l.push(f)}),_t.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new bn(Jt);return e.forEach(r=>{const l=new Pn(r,0),c=new Pn(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],f=>{i=i.add(f.Zr)})}),_t.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let l=i;Lt.isDocumentKey(l)||(l=l.child(""));const c=new Pn(new Lt(l),0);let f=new bn(Jt);return this.Xr.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(f=f.add(m.Zr)),!0)},c),_t.resolve(this.ni(f))}ni(t){const e=[];return t.forEach(i=>{const r=this.ei(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){ve(this.ri(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return _t.forEach(e.mutations,r=>{const l=new Pn(r.key,e.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Xr=i})}sr(t){}containsKey(t,e){const i=new Pn(e,0),r=this.Xr.firstAfterOrEqual(i);return _t.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,_t.resolve()}ri(t,e){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const e=this.ti(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(t){this.ii=t,this.docs=function(){return new Ke(Lt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),l=r?r.size:0,c=this.ii(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return _t.resolve(i?i.document.mutableCopy():ti.newInvalidDocument(e))}getEntries(t,e){let i=_a();return e.forEach(r=>{const l=this.docs.get(r);i=i.insert(r,l?l.document.mutableCopy():ti.newInvalidDocument(r))}),_t.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let l=_a();const c=e.path,f=new Lt(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||MO(PO(v),i)<=0||(r.has(v.key)||Zm(e,v))&&(l=l.insert(v.key,v.mutableCopy()))}return _t.resolve(l)}getAllFromCollectionGroup(t,e,i,r){Ht(9500)}si(t,e){return _t.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new ik(this)}getSize(t){return _t.resolve(this.size)}}class ik extends $D{constructor(t){super(),this.Br=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Br.addEntry(t,r)):this.Br.removeEntry(i)}),_t.waitFor(e)}getFromCache(t,e){return this.Br.getEntry(t,e)}getAllFromCache(t,e){return this.Br.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(t){this.persistence=t,this.oi=new Kl(e=>Fy(e),qy),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this._i=0,this.ai=new $y,this.targetCount=0,this.ui=tc.cr()}forEachTarget(t,e){return this.oi.forEach((i,r)=>e(r)),_t.resolve()}getLastRemoteSnapshotVersion(t){return _t.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return _t.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),_t.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this._i&&(this._i=e),_t.resolve()}Tr(t){this.oi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ui=new tc(e),this.highestTargetId=e),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,e){return this.Tr(e),this.targetCount+=1,_t.resolve()}updateTargetData(t,e){return this.Tr(e),_t.resolve()}removeTargetData(t,e){return this.oi.delete(e.target),this.ai.Hr(e.targetId),this.targetCount-=1,_t.resolve()}removeTargets(t,e,i){let r=0;const l=[];return this.oi.forEach((c,f)=>{f.sequenceNumber<=e&&i.get(f.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(t,f.targetId)),r++)}),_t.waitFor(l).next(()=>r)}getTargetCount(t){return _t.resolve(this.targetCount)}getTargetData(t,e){const i=this.oi.get(e)||null;return _t.resolve(i)}addMatchingKeys(t,e,i){return this.ai.Gr(e,i),_t.resolve()}removeMatchingKeys(t,e,i){this.ai.jr(e,i);const r=this.persistence.referenceDelegate,l=[];return r&&e.forEach(c=>{l.push(r.markPotentiallyOrphaned(t,c))}),_t.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.ai.Hr(e),_t.resolve()}getMatchingKeysForTargetId(t,e){const i=this.ai.Yr(e);return _t.resolve(i)}containsKey(t,e){return _t.resolve(this.ai.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(t,e){this.ci={},this.overlays={},this.li=new jm(0),this.hi=!1,this.hi=!0,this.Pi=new tk,this.referenceDelegate=t(this),this.Ti=new sk(this),this.indexManager=new HD,this.remoteDocumentCache=function(r){return new nk(r)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new UD(e),this.Ei=new QD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new JD,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ci[t.toKey()];return i||(i=new ek(e,this.referenceDelegate),this.ci[t.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,e,i){Rt("MemoryPersistence","Starting transaction:",t);const r=new rk(this.li.next());return this.referenceDelegate.di(),i(r).next(l=>this.referenceDelegate.Ai(r).next(()=>l)).toPromise().then(l=>(r.raiseOnCommittedEvent(),l))}Ri(t,e){return _t.or(Object.values(this.ci).map(i=>()=>i.containsKey(t,e)))}}class rk extends DO{constructor(t){super(),this.currentSequenceNumber=t}}class Ky{constructor(t){this.persistence=t,this.Vi=new $y,this.mi=null}static fi(t){return new Ky(t)}get gi(){if(this.mi)return this.mi;throw Ht(60996)}addReference(t,e,i){return this.Vi.addReference(i,e),this.gi.delete(i.toString()),_t.resolve()}removeReference(t,e,i){return this.Vi.removeReference(i,e),this.gi.add(i.toString()),_t.resolve()}markPotentiallyOrphaned(t,e){return this.gi.add(e.toString()),_t.resolve()}removeTarget(t,e){this.Vi.Hr(e.targetId).forEach(r=>this.gi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(l=>this.gi.add(l.toString()))}).next(()=>i.removeTargetData(t,e))}di(){this.mi=new Set}Ai(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _t.forEach(this.gi,i=>{const r=Lt.fromPath(i);return this.pi(t,r).next(l=>{l||e.removeEntry(r,Zt.min())})}).next(()=>(this.mi=null,e.apply(t)))}updateLimboDocument(t,e){return this.pi(t,e).next(i=>{i?this.gi.delete(e.toString()):this.gi.add(e.toString())})}Ii(t){return 0}pi(t,e){return _t.or([()=>_t.resolve(this.Vi.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ri(t,e)])}}class dm{constructor(t,e){this.persistence=t,this.yi=new Kl(i=>NO(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=YD(this,e)}static fi(t,e){return new dm(t,e)}di(){}Ai(t){return _t.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}pr(t){const e=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}br(t){let e=0;return this.yr(t,i=>{e++}).next(()=>e)}yr(t,e){return _t.forEach(this.yi,(i,r)=>this.Dr(t,i,r).next(l=>l?_t.resolve():e(r)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.si(t,c=>this.Dr(t,c,e).next(f=>{f||(i++,l.removeEntry(c,Zt.min()))})).next(()=>l.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.yi.set(e,t.currentSequenceNumber),_t.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.yi.set(i,t.currentSequenceNumber),_t.resolve()}removeReference(t,e,i){return this.yi.set(i,t.currentSequenceNumber),_t.resolve()}updateLimboDocument(t,e){return this.yi.set(e,t.currentSequenceNumber),_t.resolve()}Ii(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Wd(t.data.value)),e}Dr(t,e,i){return _t.or([()=>this.persistence.Ri(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.yi.get(e);return _t.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.ds=i,this.As=r}static Rs(t,e){let i=oe(),r=oe();for(const l of e.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Xy(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return eM()?8:kO(ii())>0?6:4}()}initialize(t,e){this.ys=t,this.indexManager=e,this.Vs=!0}getDocumentsMatchingQuery(t,e,i,r){const l={result:null};return this.ws(t,e).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(t,e,r,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new ak;return this.Ss(t,e,c).next(f=>{if(l.result=f,this.fs)return this.Ds(t,e,c,f.size)})}).next(()=>l.result)}Ds(t,e,i,r){return i.documentReadCount<this.gs?(ju()<=ae.DEBUG&&Rt("QueryEngine","SDK will not create cache indexes for query:",Hu(e),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),_t.resolve()):(ju()<=ae.DEBUG&&Rt("QueryEngine","Query:",Hu(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ps*r?(ju()<=ae.DEBUG&&Rt("QueryEngine","The SDK decides to create cache indexes for query:",Hu(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Sr(e))):_t.resolve())}ws(t,e){if(VE(e))return _t.resolve(null);let i=Sr(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=G_(e,null,"F"),i=Sr(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(l=>{const c=oe(...l);return this.ys.getDocuments(t,c).next(f=>this.indexManager.getMinOffset(t,i).next(m=>{const p=this.vs(e,f);return this.Cs(e,p,c,m.readTime)?this.ws(t,G_(e,null,"F")):this.Fs(t,p,e,m)}))})))}bs(t,e,i,r){return VE(e)||r.isEqual(Zt.min())?_t.resolve(null):this.ys.getDocuments(t,i).next(l=>{const c=this.vs(e,l);return this.Cs(e,c,i,r)?_t.resolve(null):(ju()<=ae.DEBUG&&Rt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hu(e)),this.Fs(t,c,e,CO(r,jh)).next(f=>f))})}vs(t,e){let i=new bn(mx(t));return e.forEach((r,l)=>{Zm(t,l)&&(i=i.add(l))}),i}Cs(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(t,e,i){return ju()<=ae.DEBUG&&Rt("QueryEngine","Using full collection scan to execute query:",Hu(e)),this.ys.getDocumentsMatchingQuery(t,e,ko.min(),i)}Fs(t,e,i,r){return this.ys.getDocumentsMatchingQuery(t,i,r).next(l=>(e.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="LocalStore",lk=3e8;class uk{constructor(t,e,i,r){this.persistence=t,this.Ms=e,this.serializer=r,this.xs=new Ke(Jt),this.Os=new Kl(l=>Fy(l),qy),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(i)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new XD(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.xs))}}function ck(n,t,e,i){return new uk(n,t,e,i)}async function zx(n,t){const e=Wt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(l=>(r=l,e.Ls(t),e.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],f=[];let m=oe();for(const p of r){c.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of l){f.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return e.localDocuments.getDocuments(i,m).next(p=>({ks:p,removedBatchIds:c,addedBatchIds:f}))})})}function hk(n,t){const e=Wt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),l=e.Bs.newChangeBuffer({trackRemovals:!0});return function(f,m,p,v){const E=p.batch,S=E.keys();let I=_t.resolve();return S.forEach(P=>{I=I.next(()=>v.getEntry(m,P)).next(k=>{const O=p.docVersions.get(P);ve(O!==null,48541),k.version.compareTo(O)<0&&(E.applyToRemoteDocument(k,p),k.isValidDocument()&&(k.setReadTime(p.commitVersion),v.addEntry(k)))})}),I.next(()=>f.mutationQueue.removeMutationBatch(m,E))}(e,i,t,l).next(()=>l.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let m=oe();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function Bx(n){const t=Wt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ti.getLastRemoteSnapshotVersion(e))}function fk(n,t){const e=Wt(n),i=t.snapshotVersion;let r=e.xs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=e.Bs.newChangeBuffer({trackRemovals:!0});r=e.xs;const f=[];t.targetChanges.forEach((v,E)=>{const S=r.get(E);if(!S)return;f.push(e.Ti.removeMatchingKeys(l,v.removedDocuments,E).next(()=>e.Ti.addMatchingKeys(l,v.addedDocuments,E)));let I=S.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(E)!==null?I=I.withResumeToken(jn.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,i)),r=r.insert(E,I),function(k,O,B){return k.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=lk?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(S,I,v)&&f.push(e.Ti.updateTargetData(l,I))});let m=_a(),p=oe();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(l,v))}),f.push(dk(l,c,t.documentUpdates).next(v=>{m=v.qs,p=v.Qs})),!i.isEqual(Zt.min())){const v=e.Ti.getLastRemoteSnapshotVersion(l).next(E=>e.Ti.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(v)}return _t.waitFor(f).next(()=>c.apply(l)).next(()=>e.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(e.xs=r,l))}function dk(n,t,e){let i=oe(),r=oe();return e.forEach(l=>i=i.add(l)),t.getEntries(n,i).next(l=>{let c=_a();return e.forEach((f,m)=>{const p=l.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(f)),m.isNoDocument()&&m.version.isEqual(Zt.min())?(t.removeEntry(f,m.readTime),c=c.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(m),c=c.insert(f,m)):Rt(Qy,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)}),{qs:c,Qs:r}})}function mk(n,t){const e=Wt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Uy),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function pk(n,t){const e=Wt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Ti.getTargetData(i,t).next(l=>l?(r=l,_t.resolve(r)):e.Ti.allocateTargetId(i).next(c=>(r=new wo(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Ti.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.xs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.xs=e.xs.insert(i.targetId,i),e.Os.set(t,i.targetId)),i})}async function K_(n,t,e){const i=Wt(n),r=i.xs.get(t),l=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!fc(c))throw c;Rt(Qy,`Failed to update sequence numbers for target ${t}: ${c}`)}i.xs=i.xs.remove(t),i.Os.delete(r.target)}function KE(n,t,e){const i=Wt(n);let r=Zt.min(),l=oe();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,v){const E=Wt(m),S=E.Os.get(v);return S!==void 0?_t.resolve(E.xs.get(S)):E.Ti.getTargetData(p,v)}(i,c,Sr(t)).next(f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(c,f.targetId).next(m=>{l=m})}).next(()=>i.Ms.getDocumentsMatchingQuery(c,t,e?r:Zt.min(),e?l:oe())).next(f=>(gk(i,eD(t),f),{documents:f,$s:l})))}function gk(n,t,e){let i=n.Ns.get(t)||Zt.min();e.forEach((r,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.Ns.set(t,i)}class XE{constructor(){this.activeTargetIds=oD()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _k{constructor(){this.xo=new XE,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,e,i){this.Oo[t]=e}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new XE,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="ConnectivityMonitor";class JE{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Rt(QE,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){Rt(QE,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Id=null;function X_(){return Id===null?Id=function(){return 268435456+Math.round(2147483648*Math.random())}():Id++,"0x"+Id.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="RestConnection",vk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bk{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=e+"://"+t.host,this.Wo=`projects/${i}/databases/${r}`,this.Go=this.databaseId.database===lm?`project_id=${i}`:`project_id=${i}&database_id=${r}`}zo(t,e,i,r,l){const c=X_(),f=this.jo(t,e.toUriEncodedString());Rt(m_,`Sending RPC '${t}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(m,r,l);const{host:p}=new URL(f),v=lc(p);return this.Jo(t,f,m,i,v).then(E=>(Rt(m_,`Received RPC '${t}' ${c}: `,E),E),E=>{throw Ku(m_,`RPC '${t}' ${c} failed with error: `,E,"url: ",f,"request:",i),E})}Yo(t,e,i,r,l,c){return this.zo(t,e,i,r,l)}Ho(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,l)=>t[l]=r),i&&i.headers.forEach((r,l)=>t[l]=r)}jo(t,e){const i=vk[t];return`${this.Ko}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="WebChannelConnection";class Ek extends bk{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,r,l){const c=X_();return new Promise((f,m)=>{const p=new j1;p.setWithCredentials(!0),p.listenOnce(H1.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Zd.NO_ERROR:const E=p.getResponseJson();Rt(Xn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(E)),f(E);break;case Zd.TIMEOUT:Rt(Xn,`RPC '${t}' ${c} timed out`),m(new It(gt.DEADLINE_EXCEEDED,"Request time out"));break;case Zd.HTTP_ERROR:const S=p.getStatus();if(Rt(Xn,`RPC '${t}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I==null?void 0:I.error;if(P&&P.status&&P.message){const k=function(B){const F=B.toLowerCase().replace(/_/g,"-");return Object.values(gt).indexOf(F)>=0?F:gt.UNKNOWN}(P.status);m(new It(k,P.message))}else m(new It(gt.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new It(gt.UNAVAILABLE,"Connection failed."));break;default:Ht(9055,{h_:t,streamId:c,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{Rt(Xn,`RPC '${t}' ${c} completed.`)}});const v=JSON.stringify(r);Rt(Xn,`RPC '${t}' ${c} sending request:`,r),p.send(e,"POST",v,i,15)})}I_(t,e,i){const r=X_(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=G1(),f=q1(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Ho(m.initMessageHeaders,e,i),m.encodeInitMessageHeaders=!0;const v=l.join("");Rt(Xn,`Creating RPC '${t}' stream ${r}: ${v}`,m);const E=c.createWebChannel(v,m);this.E_(E);let S=!1,I=!1;const P=new Tk({Zo:O=>{I?Rt(Xn,`Not sending because RPC '${t}' stream ${r} is closed:`,O):(S||(Rt(Xn,`Opening RPC '${t}' stream ${r} transport.`),E.open(),S=!0),Rt(Xn,`RPC '${t}' stream ${r} sending:`,O),E.send(O))},Xo:()=>E.close()}),k=(O,B,F)=>{O.listen(B,$=>{try{F($)}catch(nt){setTimeout(()=>{throw nt},0)}})};return k(E,gh.EventType.OPEN,()=>{I||(Rt(Xn,`RPC '${t}' stream ${r} transport opened.`),P.__())}),k(E,gh.EventType.CLOSE,()=>{I||(I=!0,Rt(Xn,`RPC '${t}' stream ${r} transport closed`),P.u_(),this.d_(E))}),k(E,gh.EventType.ERROR,O=>{I||(I=!0,Ku(Xn,`RPC '${t}' stream ${r} transport errored. Name:`,O.name,"Message:",O.message),P.u_(new It(gt.UNAVAILABLE,"The operation could not be completed")))}),k(E,gh.EventType.MESSAGE,O=>{var B;if(!I){const F=O.data[0];ve(!!F,16349);const $=F,nt=($==null?void 0:$.error)||((B=$[0])===null||B===void 0?void 0:B.error);if(nt){Rt(Xn,`RPC '${t}' stream ${r} received error:`,nt);const J=nt.status;let ht=function(z){const U=fn[z];if(U!==void 0)return Ax(U)}(J),V=nt.message;ht===void 0&&(ht=gt.INTERNAL,V="Unknown error status: "+J+" with message "+nt.message),I=!0,P.u_(new It(ht,V)),E.close()}else Rt(Xn,`RPC '${t}' stream ${r} received:`,F),P.c_(F)}}),k(f,F1.STAT_EVENT,O=>{O.stat===z_.PROXY?Rt(Xn,`RPC '${t}' stream ${r} detected buffering proxy`):O.stat===z_.NOPROXY&&Rt(Xn,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{P.a_()},0),P}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(e=>e===t)}}function p_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(n){return new AD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(t,e,i=1e3,r=1.5,l=6e4){this.xi=t,this.timerId=e,this.A_=i,this.R_=r,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const e=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),r=Math.max(0,e-i);r>0&&Rt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="PersistentStream";class jx{constructor(t,e,i,r,l,c,f,m){this.xi=t,this.S_=i,this.D_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Ux(t,e)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,e){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():e&&e.code===gt.RESOURCE_EXHAUSTED?(ga(e.toString()),ga("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):e&&e.code===gt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(e)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),e=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.v_===e&&this.z_(i,r)},i=>{t(()=>{const r=new It(gt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(r)})})}z_(t,e){const i=this.G_(this.v_);this.stream=this.H_(t,e),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{i(()=>this.j_(r))}),this.stream.onMessage(r=>{i(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return Rt(tw,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return e=>{this.xi.enqueueAndForget(()=>this.v_===t?e():(Rt(tw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wk extends jx{constructor(t,e,i,r,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=l}H_(t,e){return this.connection.I_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const e=CD(this.serializer,t),i=function(l){if(!("targetChange"in l))return Zt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Zt.min():c.readTime?xr(c.readTime):Zt.min()}(t);return this.listener.Y_(e,i)}Z_(t){const e={};e.database=$_(this.serializer),e.addTarget=function(l,c){let f;const m=c.target;if(f=F_(m)?{documents:OD(l,m)}:{query:DD(l,m).gt},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Cx(l,c.resumeToken);const p=Z_(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(Zt.min())>0){f.readTime=fm(l,c.snapshotVersion.toTimestamp());const p=Z_(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f}(this.serializer,t);const i=LD(this.serializer,t);i&&(e.labels=i),this.Q_(e)}X_(t){const e={};e.database=$_(this.serializer),e.removeTarget=t,this.Q_(e)}}class Sk extends jx{constructor(t,e,i,r,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,e){return this.connection.I_("Write",t,e)}J_(t){return ve(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ve(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){ve(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const e=MD(t.writeResults,t.commitTime),i=xr(t.commitTime);return this.listener.ra(i,e)}ia(){const t={};t.database=$_(this.serializer),this.Q_(t)}ta(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>PD(this.serializer,i))};this.Q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{}class Ak extends xk{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new It(gt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,e,i,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(t,W_(e,i),r,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new It(gt.UNKNOWN,l.toString())})}Yo(t,e,i,r,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Yo(t,W_(e,i),r,c,f,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new It(gt.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Rk{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ga(e),this.ua=!1):Rt("OnlineStateTracker",e)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl="RemoteStore";class Ik{constructor(t,e,i,r,l){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{i.enqueueAndForget(async()=>{Xl(this)&&(Rt(jl,"Restarting streams for network reachability change."),await async function(m){const p=Wt(m);p.da.add(4),await cf(p),p.Va.set("Unknown"),p.da.delete(4),await Xm(p)}(this))})}),this.Va=new Rk(i,r)}}async function Xm(n){if(Xl(n))for(const t of n.Aa)await t(!0)}async function cf(n){for(const t of n.Aa)await t(!1)}function Hx(n,t){const e=Wt(n);e.Ea.has(t.targetId)||(e.Ea.set(t.targetId,t),nv(e)?ev(e):mc(e).N_()&&tv(e,t))}function Jy(n,t){const e=Wt(n),i=mc(e);e.Ea.delete(t),i.N_()&&Fx(e,t),e.Ea.size===0&&(i.N_()?i.k_():Xl(e)&&e.Va.set("Unknown"))}function tv(n,t){if(n.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}mc(n).Z_(t)}function Fx(n,t){n.ma.Ke(t),mc(n).X_(t)}function ev(n){n.ma=new ED({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>n.Ea.get(t)||null,Pt:()=>n.datastore.serializer.databaseId}),mc(n).start(),n.Va.ca()}function nv(n){return Xl(n)&&!mc(n).O_()&&n.Ea.size>0}function Xl(n){return Wt(n).da.size===0}function qx(n){n.ma=void 0}async function Ck(n){n.Va.set("Online")}async function Pk(n){n.Ea.forEach((t,e)=>{tv(n,t)})}async function Mk(n,t){qx(n),nv(n)?(n.Va.Pa(t),ev(n)):n.Va.set("Unknown")}async function Ok(n,t,e){if(n.Va.set("Online"),t instanceof Ix&&t.state===2&&t.cause)try{await async function(r,l){const c=l.cause;for(const f of l.targetIds)r.Ea.has(f)&&(await r.remoteSyncer.rejectListen(f,c),r.Ea.delete(f),r.ma.removeTarget(f))}(n,t)}catch(i){Rt(jl,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await mm(n,i)}else if(t instanceof Kd?n.ma.Xe(t):t instanceof Rx?n.ma.ot(t):n.ma.nt(t),!e.isEqual(Zt.min()))try{const i=await Bx(n.localStore);e.compareTo(i)>=0&&await function(l,c){const f=l.ma.It(c);return f.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ea.get(p);v&&l.Ea.set(p,v.withResumeToken(m.resumeToken,c))}}),f.targetMismatches.forEach((m,p)=>{const v=l.Ea.get(m);if(!v)return;l.Ea.set(m,v.withResumeToken(jn.EMPTY_BYTE_STRING,v.snapshotVersion)),Fx(l,m);const E=new wo(v.target,m,p,v.sequenceNumber);tv(l,E)}),l.remoteSyncer.applyRemoteEvent(f)}(n,e)}catch(i){Rt(jl,"Failed to raise snapshot:",i),await mm(n,i)}}async function mm(n,t,e){if(!fc(t))throw t;n.da.add(1),await cf(n),n.Va.set("Offline"),e||(e=()=>Bx(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Rt(jl,"Retrying IndexedDB access"),await e(),n.da.delete(1),await Xm(n)})}function Gx(n,t){return t().catch(e=>mm(n,e,t))}async function Qm(n){const t=Wt(n),e=zo(t);let i=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:Uy;for(;Dk(t);)try{const r=await mk(t.localStore,i);if(r===null){t.Ia.length===0&&e.k_();break}i=r.batchId,kk(t,r)}catch(r){await mm(t,r)}Zx(t)&&Wx(t)}function Dk(n){return Xl(n)&&n.Ia.length<10}function kk(n,t){n.Ia.push(t);const e=zo(n);e.N_()&&e.ea&&e.ta(t.mutations)}function Zx(n){return Xl(n)&&!zo(n).O_()&&n.Ia.length>0}function Wx(n){zo(n).start()}async function Lk(n){zo(n).ia()}async function Nk(n){const t=zo(n);for(const e of n.Ia)t.ta(e.mutations)}async function Vk(n,t,e){const i=n.Ia.shift(),r=Zy.from(i,t,e);await Gx(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await Qm(n)}async function zk(n,t){t&&zo(n).ea&&await async function(i,r){if(function(c){return bD(c)&&c!==gt.ABORTED}(r.code)){const l=i.Ia.shift();zo(i).L_(),await Gx(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),await Qm(i)}}(n,t),Zx(n)&&Wx(n)}async function ew(n,t){const e=Wt(n);e.asyncQueue.verifyOperationInProgress(),Rt(jl,"RemoteStore received new credentials");const i=Xl(e);e.da.add(3),await cf(e),i&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.da.delete(3),await Xm(e)}async function Bk(n,t){const e=Wt(n);t?(e.da.delete(2),await Xm(e)):t||(e.da.add(2),await cf(e),e.Va.set("Unknown"))}function mc(n){return n.fa||(n.fa=function(e,i,r){const l=Wt(e);return l.oa(),new wk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)}(n.datastore,n.asyncQueue,{e_:Ck.bind(null,n),n_:Pk.bind(null,n),i_:Mk.bind(null,n),Y_:Ok.bind(null,n)}),n.Aa.push(async t=>{t?(n.fa.L_(),nv(n)?ev(n):n.Va.set("Unknown")):(await n.fa.stop(),qx(n))})),n.fa}function zo(n){return n.ga||(n.ga=function(e,i,r){const l=Wt(e);return l.oa(),new Sk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:Lk.bind(null,n),i_:zk.bind(null,n),na:Nk.bind(null,n),ra:Vk.bind(null,n)}),n.Aa.push(async t=>{t?(n.ga.L_(),await Qm(n)):(await n.ga.stop(),n.Ia.length>0&&(Rt(jl,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t,e,i,r,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=l,this.deferred=new da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,l){const c=Date.now()+i,f=new iv(t,e,c,r,l);return f.start(i),f}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new It(gt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sv(n,t){if(ga("AsyncQueue",`${t}: ${n}`),fc(n))return new It(gt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{static emptySet(t){return new Gu(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||Lt.comparator(e.key,i.key):(e,i)=>Lt.comparator(e.key,i.key),this.keyedMap=_h(),this.sortedSet=new Ke(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Gu)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,l=i.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Gu;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this.pa=new Ke(Lt.comparator)}track(t){const e=t.doc.key,i=this.pa.get(e);i?t.type!==0&&i.type===3?this.pa=this.pa.insert(e,t):t.type===3&&i.type!==1?this.pa=this.pa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.pa=this.pa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.pa=this.pa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.pa=this.pa.remove(e):t.type===1&&i.type===2?this.pa=this.pa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.pa=this.pa.insert(e,{type:2,doc:t.doc}):Ht(63341,{Vt:t,ya:i}):this.pa=this.pa.insert(e,t)}wa(){const t=[];return this.pa.inorderTraversal((e,i)=>{t.push(i)}),t}}class ec{constructor(t,e,i,r,l,c,f,m,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(t,e,i,r,l){const c=[];return e.forEach(f=>{c.push({type:0,doc:f})}),new ec(t,e,Gu.emptySet(e),c,i,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Gm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class jk{constructor(){this.queries=iw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const r=Wt(e),l=r.queries;r.queries=iw(),l.forEach((c,f)=>{for(const m of f.Sa)m.onError(i)})})(this,new It(gt.ABORTED,"Firestore shutting down"))}}function iw(){return new Kl(n=>dx(n),Gm)}async function rv(n,t){const e=Wt(n);let i=3;const r=t.query;let l=e.queries.get(r);l?!l.Da()&&t.va()&&(i=2):(l=new Uk,i=t.va()?0:1);try{switch(i){case 0:l.ba=await e.onListen(r,!0);break;case 1:l.ba=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const f=sv(c,`Initialization of query '${Hu(t.query)}' failed`);return void t.onError(f)}e.queries.set(r,l),l.Sa.push(t),t.Fa(e.onlineState),l.ba&&t.Ma(l.ba)&&ov(e)}async function av(n,t){const e=Wt(n),i=t.query;let r=3;const l=e.queries.get(i);if(l){const c=l.Sa.indexOf(t);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?r=t.va()?0:1:!l.Da()&&t.va()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function Hk(n,t){const e=Wt(n);let i=!1;for(const r of t){const l=r.query,c=e.queries.get(l);if(c){for(const f of c.Sa)f.Ma(r)&&(i=!0);c.ba=r}}i&&ov(e)}function Fk(n,t,e){const i=Wt(n),r=i.queries.get(t);if(r)for(const l of r.Sa)l.onError(e);i.queries.delete(t)}function ov(n){n.Ca.forEach(t=>{t.next()})}var Q_,sw;(sw=Q_||(Q_={})).xa="default",sw.Cache="cache";class lv{constructor(t,e,i){this.query=t,this.Oa=e,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new ec(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Na?this.La(t)&&(this.Oa.next(t),e=!0):this.ka(t,this.onlineState)&&(this.qa(t),e=!0),this.Ba=t,e}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let e=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),e=!0),e}ka(t,e){if(!t.fromCache||!this.va())return!0;const i=e!=="Offline";return(!this.options.Qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}La(t){if(t.docChanges.length>0)return!0;const e=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}qa(t){t=ec.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==Q_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(t){this.key=t}}class $x{constructor(t){this.key=t}}class qk{constructor(t,e){this.query=t,this.Ha=e,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=oe(),this.mutatedKeys=oe(),this.Za=mx(t),this.Xa=new Gu(this.Za)}get eu(){return this.Ha}tu(t,e){const i=e?e.nu:new nw,r=e?e.Xa:this.Xa;let l=e?e.mutatedKeys:this.mutatedKeys,c=r,f=!1;const m=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((v,E)=>{const S=r.get(v),I=Zm(this.query,E)?E:null,P=!!S&&this.mutatedKeys.has(S.key),k=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let O=!1;S&&I?S.data.isEqual(I.data)?P!==k&&(i.track({type:3,doc:I}),O=!0):this.ru(S,I)||(i.track({type:2,doc:I}),O=!0,(m&&this.Za(I,m)>0||p&&this.Za(I,p)<0)&&(f=!0)):!S&&I?(i.track({type:0,doc:I}),O=!0):S&&!I&&(i.track({type:1,doc:S}),O=!0,(m||p)&&(f=!0)),O&&(I?(c=c.add(I),l=k?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{Xa:c,nu:i,Cs:f,mutatedKeys:l}}ru(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const c=t.nu.wa();c.sort((v,E)=>function(I,P){const k=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ht(20277,{Vt:O})}};return k(I)-k(P)}(v.type,E.type)||this.Za(v.doc,E.doc)),this.iu(i),r=r!=null&&r;const f=e&&!r?this.su():[],m=this.Ya.size===0&&this.current&&!r?1:0,p=m!==this.Ja;return this.Ja=m,c.length!==0||p?{snapshot:new ec(this.query,t.Xa,l,c,t.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:f}:{ou:f}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new nw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=oe(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const e=[];return t.forEach(i=>{this.Ya.has(i)||e.push(new $x(i))}),this.Ya.forEach(i=>{t.has(i)||e.push(new Yx(i))}),e}au(t){this.Ha=t.$s,this.Ya=oe();const e=this.tu(t.documents);return this.applyChanges(e,!0)}uu(){return ec.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const uv="SyncEngine";class Gk{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class Zk{constructor(t){this.key=t,this.cu=!1}}class Wk{constructor(t,e,i,r,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Kl(f=>dx(f),Gm),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ke(Lt.comparator),this.Eu=new Map,this.du=new $y,this.Au={},this.Ru=new Map,this.Vu=tc.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Yk(n,t,e=!0){const i=eA(n);let r;const l=i.hu.get(t);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.uu()):r=await Kx(i,t,e,!0),r}async function $k(n,t){const e=eA(n);await Kx(e,t,!0,!1)}async function Kx(n,t,e,i){const r=await pk(n.localStore,Sr(t)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,e);let f;return i&&(f=await Kk(n,t,l,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&Hx(n.remoteStore,r),f}async function Kk(n,t,e,i,r){n.fu=(E,S,I)=>async function(k,O,B,F){let $=O.view.tu(B);$.Cs&&($=await KE(k.localStore,O.query,!1).then(({documents:V})=>O.view.tu(V,$)));const nt=F&&F.targetChanges.get(O.targetId),J=F&&F.targetMismatches.get(O.targetId)!=null,ht=O.view.applyChanges($,k.isPrimaryClient,nt,J);return aw(k,O.targetId,ht.ou),ht.snapshot}(n,E,S,I);const l=await KE(n.localStore,t,!0),c=new qk(t,l.$s),f=c.tu(l.documents),m=uf.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),p=c.applyChanges(f,n.isPrimaryClient,m);aw(n,e,p.ou);const v=new Gk(t,e,c);return n.hu.set(t,v),n.Pu.has(e)?n.Pu.get(e).push(t):n.Pu.set(e,[t]),p.snapshot}async function Xk(n,t,e){const i=Wt(n),r=i.hu.get(t),l=i.Pu.get(r.targetId);if(l.length>1)return i.Pu.set(r.targetId,l.filter(c=>!Gm(c,t))),void i.hu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await K_(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Jy(i.remoteStore,r.targetId),J_(i,r.targetId)}).catch(hc)):(J_(i,r.targetId),await K_(i.localStore,r.targetId,!0))}async function Qk(n,t){const e=Wt(n),i=e.hu.get(t),r=e.Pu.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Jy(e.remoteStore,i.targetId))}async function Jk(n,t,e){const i=aL(n);try{const r=await function(c,f){const m=Wt(c),p=on.now(),v=f.reduce((I,P)=>I.add(P.key),oe());let E,S;return m.persistence.runTransaction("Locally write mutations","readwrite",I=>{let P=_a(),k=oe();return m.Bs.getEntries(I,v).next(O=>{P=O,P.forEach((B,F)=>{F.isValidDocument()||(k=k.add(B))})}).next(()=>m.localDocuments.getOverlayedDocuments(I,P)).next(O=>{E=O;const B=[];for(const F of f){const $=pD(F,E.get(F.key).overlayedDocument);$!=null&&B.push(new qo(F.key,$,rx($.value.mapValue),Gs.exists(!0)))}return m.mutationQueue.addMutationBatch(I,p,B,f)}).next(O=>{S=O;const B=O.applyToLocalDocumentSet(E,k);return m.documentOverlayCache.saveOverlays(I,O.batchId,B)})}).then(()=>({batchId:S.batchId,changes:gx(E)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(c,f,m){let p=c.Au[c.currentUser.toKey()];p||(p=new Ke(Jt)),p=p.insert(f,m),c.Au[c.currentUser.toKey()]=p}(i,r.batchId,e),await hf(i,r.changes),await Qm(i.remoteStore)}catch(r){const l=sv(r,"Failed to persist write");e.reject(l)}}async function Xx(n,t){const e=Wt(n);try{const i=await fk(e.localStore,t);t.targetChanges.forEach((r,l)=>{const c=e.Eu.get(l);c&&(ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.cu=!0:r.modifiedDocuments.size>0?ve(c.cu,14607):r.removedDocuments.size>0&&(ve(c.cu,42227),c.cu=!1))}),await hf(e,i,t)}catch(i){await hc(i)}}function rw(n,t,e){const i=Wt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.hu.forEach((l,c)=>{const f=c.view.Fa(t);f.snapshot&&r.push(f.snapshot)}),function(c,f){const m=Wt(c);m.onlineState=f;let p=!1;m.queries.forEach((v,E)=>{for(const S of E.Sa)S.Fa(f)&&(p=!0)}),p&&ov(m)}(i.eventManager,t),r.length&&i.lu.Y_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function tL(n,t,e){const i=Wt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Eu.get(t),l=r&&r.key;if(l){let c=new Ke(Lt.comparator);c=c.insert(l,ti.newNoDocument(l,Zt.min()));const f=oe().add(l),m=new $m(Zt.min(),new Map,new Ke(Jt),c,f);await Xx(i,m),i.Iu=i.Iu.remove(l),i.Eu.delete(t),cv(i)}else await K_(i.localStore,t,!1).then(()=>J_(i,t,e)).catch(hc)}async function eL(n,t){const e=Wt(n),i=t.batch.batchId;try{const r=await hk(e.localStore,t);Jx(e,i,null),Qx(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await hf(e,r)}catch(r){await hc(r)}}async function nL(n,t,e){const i=Wt(n);try{const r=await function(c,f){const m=Wt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return m.mutationQueue.lookupMutationBatch(p,f).next(E=>(ve(E!==null,37113),v=E.keys(),m.mutationQueue.removeMutationBatch(p,E))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>m.localDocuments.getDocuments(p,v))})}(i.localStore,t);Jx(i,t,e),Qx(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await hf(i,r)}catch(r){await hc(r)}}function Qx(n,t){(n.Ru.get(t)||[]).forEach(e=>{e.resolve()}),n.Ru.delete(t)}function Jx(n,t,e){const i=Wt(n);let r=i.Au[i.currentUser.toKey()];if(r){const l=r.get(t);l&&(e?l.reject(e):l.resolve(),r=r.remove(t)),i.Au[i.currentUser.toKey()]=r}}function J_(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Pu.get(t))n.hu.delete(i),e&&n.lu.gu(i,e);n.Pu.delete(t),n.isPrimaryClient&&n.du.Hr(t).forEach(i=>{n.du.containsKey(i)||tA(n,i)})}function tA(n,t){n.Tu.delete(t.path.canonicalString());const e=n.Iu.get(t);e!==null&&(Jy(n.remoteStore,e),n.Iu=n.Iu.remove(t),n.Eu.delete(e),cv(n))}function aw(n,t,e){for(const i of e)i instanceof Yx?(n.du.addReference(i.key,t),iL(n,i)):i instanceof $x?(Rt(uv,"Document no longer in limbo: "+i.key),n.du.removeReference(i.key,t),n.du.containsKey(i.key)||tA(n,i.key)):Ht(19791,{pu:i})}function iL(n,t){const e=t.key,i=e.path.canonicalString();n.Iu.get(e)||n.Tu.has(i)||(Rt(uv,"New document in limbo: "+e),n.Tu.add(i),cv(n))}function cv(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const t=n.Tu.values().next().value;n.Tu.delete(t);const e=new Lt(je.fromString(t)),i=n.Vu.next();n.Eu.set(i,new Zk(e)),n.Iu=n.Iu.insert(e,i),Hx(n.remoteStore,new wo(Sr(qm(e.path)),i,"TargetPurposeLimboResolution",jm.le))}}async function hf(n,t,e){const i=Wt(n),r=[],l=[],c=[];i.hu.isEmpty()||(i.hu.forEach((f,m)=>{c.push(i.fu(m,t,e).then(p=>{var v;if((p||e)&&i.isPrimaryClient){const E=p?!p.fromCache:(v=e==null?void 0:e.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(p){r.push(p);const E=Xy.Rs(m.targetId,p);l.push(E)}}))}),await Promise.all(c),i.lu.Y_(r),await async function(m,p){const v=Wt(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>_t.forEach(p,S=>_t.forEach(S.ds,I=>v.persistence.referenceDelegate.addReference(E,S.targetId,I)).next(()=>_t.forEach(S.As,I=>v.persistence.referenceDelegate.removeReference(E,S.targetId,I)))))}catch(E){if(!fc(E))throw E;Rt(Qy,"Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const I=v.xs.get(S),P=I.snapshotVersion,k=I.withLastLimboFreeSnapshotVersion(P);v.xs=v.xs.insert(S,k)}}}(i.localStore,l))}async function sL(n,t){const e=Wt(n);if(!e.currentUser.isEqual(t)){Rt(uv,"User change. New user:",t.toKey());const i=await zx(e.localStore,t);e.currentUser=t,function(l,c){l.Ru.forEach(f=>{f.forEach(m=>{m.reject(new It(gt.CANCELLED,c))})}),l.Ru.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await hf(e,i.ks)}}function rL(n,t){const e=Wt(n),i=e.Eu.get(t);if(i&&i.cu)return oe().add(i.key);{let r=oe();const l=e.Pu.get(t);if(!l)return r;for(const c of l){const f=e.hu.get(c);r=r.unionWith(f.view.eu)}return r}}function eA(n){const t=Wt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Xx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rL.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tL.bind(null,t),t.lu.Y_=Hk.bind(null,t.eventManager),t.lu.gu=Fk.bind(null,t.eventManager),t}function aL(n){const t=Wt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=eL.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nL.bind(null,t),t}class pm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Km(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,e){return null}Cu(t,e){return null}Du(t){return ck(this.persistence,new ok,t.initialUser,this.serializer)}Su(t){return new Vx(Ky.fi,this.serializer)}bu(t){return new _k}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pm.provider={build:()=>new pm};class oL extends pm{constructor(t){super(),this.cacheSizeBytes=t}vu(t,e){ve(this.persistence.referenceDelegate instanceof dm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ZD(i,t.asyncQueue,e)}Su(t){const e=this.cacheSizeBytes!==void 0?Ti.withCacheSize(this.cacheSizeBytes):Ti.DEFAULT;return new Vx(i=>dm.fi(i,e),this.serializer)}}class ty{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=sL.bind(null,this.syncEngine),await Bk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new jk}()}createDatastore(t){const e=Km(t.databaseInfo.databaseId),i=function(l){return new Ek(l)}(t.databaseInfo);return function(l,c,f,m){return new Ak(l,c,f,m)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,l,c,f){return new Ik(i,r,l,c,f)}(this.localStore,this.datastore,t.asyncQueue,e=>rw(this.syncEngine,e,0),function(){return JE.C()?new JE:new yk}())}createSyncEngine(t,e){return function(r,l,c,f,m,p,v){const E=new Wk(r,l,c,f,m,p);return v&&(E.mu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const l=Wt(r);Rt(jl,"RemoteStore shutting down."),l.da.add(5),await cf(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}ty.provider={build:()=>new ty};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):ga("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="FirestoreClient";class lL{constructor(t,e,i,r,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Jn.UNAUTHENTICATED,this.clientId=$1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{Rt(Bo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(Rt(Bo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=sv(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function g_(n,t){n.asyncQueue.verifyOperationInProgress(),Rt(Bo,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await zx(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function ow(n,t){n.asyncQueue.verifyOperationInProgress();const e=await uL(n);Rt(Bo,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>ew(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>ew(t.remoteStore,r)),n._onlineComponents=t}async function uL(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Rt(Bo,"Using user provided OfflineComponentProvider");try{await g_(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===gt.FAILED_PRECONDITION||r.code===gt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;Ku("Error using user provided cache. Falling back to memory cache: "+e),await g_(n,new pm)}}else Rt(Bo,"Using default OfflineComponentProvider"),await g_(n,new oL(void 0));return n._offlineComponents}async function nA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Rt(Bo,"Using user provided OnlineComponentProvider"),await ow(n,n._uninitializedComponentsProvider._online)):(Rt(Bo,"Using default OnlineComponentProvider"),await ow(n,new ty))),n._onlineComponents}function cL(n){return nA(n).then(t=>t.syncEngine)}async function gm(n){const t=await nA(n),e=t.eventManager;return e.onListen=Yk.bind(null,t.syncEngine),e.onUnlisten=Xk.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=$k.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Qk.bind(null,t.syncEngine),e}function hL(n,t,e={}){const i=new da;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,p){const v=new hv({next:S=>{v.xu(),c.enqueueAndForget(()=>av(l,E));const I=S.docs.has(f);!I&&S.fromCache?p.reject(new It(gt.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&m&&m.source==="server"?p.reject(new It(gt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new lv(qm(f.path),v,{includeMetadataChanges:!0,Qa:!0});return rv(l,E)}(await gm(n),n.asyncQueue,t,e,i)),i.promise}function fL(n,t,e={}){const i=new da;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,p){const v=new hv({next:S=>{v.xu(),c.enqueueAndForget(()=>av(l,E)),S.fromCache&&m.source==="server"?p.reject(new It(gt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new lv(f,v,{includeMetadataChanges:!0,Qa:!0});return rv(l,E)}(await gm(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(n,t,e){if(!e)throw new It(gt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function dL(n,t,e,i){if(t===!0&&i===!0)throw new It(gt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function uw(n){if(!Lt.isDocumentKey(n))throw new It(gt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cw(n){if(Lt.isDocumentKey(n))throw new It(gt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Ht(12329,{type:typeof n})}function Xi(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new It(gt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Jm(n);throw new It(gt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="firestore.googleapis.com",hw=!0;class fw{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new It(gt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rA,this.ssl=hw}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:hw;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Nx;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<qD)throw new It(gt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}dL("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iA((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new It(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new It(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new It(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class tp{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new It(gt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new It(gt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fw(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new bO;switch(i.type){case"firstParty":return new SO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new It(gt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=lw.get(e);i&&(Rt("ComponentProvider","Removing Datastore"),lw.delete(e),i.terminate())}(this),Promise.resolve()}}function mL(n,t,e,i={}){var r;n=Xi(n,tp);const l=lc(t),c=n._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),m=`${t}:${e}`;l&&(M1(`https://${m}`),O1("Firestore",!0)),c.host!==rA&&c.host!==m&&Ku("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:i});if(!Do(p,f)&&(n._setSettings(p),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=Jn.MOCK_USER;else{v=W2(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new It(gt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Jn(S)}n._authCredentials=new TO(new W1(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Go(this.firestore,t,this._query)}}class ei{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Po(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ei(this.firestore,t,this._key)}}class Po extends Go{constructor(t,e,i){super(t,e,qm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ei(this.firestore,null,new Lt(t))}withConverter(t){return new Po(this.firestore,t,this._path)}}function Mo(n,t,...e){if(n=$e(n),sA("collection","path",t),n instanceof tp){const i=je.fromString(t,...e);return cw(i),new Po(n,null,i)}{if(!(n instanceof ei||n instanceof Po))throw new It(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(je.fromString(t,...e));return cw(i),new Po(n.firestore,null,i)}}function Fs(n,t,...e){if(n=$e(n),arguments.length===1&&(t=$1.newId()),sA("doc","path",t),n instanceof tp){const i=je.fromString(t,...e);return uw(i),new ei(n,null,new Lt(i))}{if(!(n instanceof ei||n instanceof Po))throw new It(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(je.fromString(t,...e));return uw(i),new ei(n.firestore,n instanceof Po?n.converter:null,new Lt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="AsyncQueue";class mw{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Ux(this,"async_queue_retry"),this.rc=()=>{const i=p_();i&&Rt(dw,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=t;const e=p_();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const e=p_();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const e=new da;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!fc(t))throw t;Rt(dw,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const e=this.sc.then(()=>(this.ec=!0,t().catch(i=>{throw this.Xu=i,this.ec=!1,ga("INTERNAL UNHANDLED ERROR: ",pw(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=e,e}enqueueAfterDelay(t,e,i){this.oc(),this.nc.indexOf(t)>-1&&(e=0);const r=iv.createAndSchedule(this,t,e,i,l=>this.uc(l));return this.Zu.push(r),r}oc(){this.Xu&&Ht(47125,{cc:pw(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const e of this.Zu)if(e.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Zu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const e=this.Zu.indexOf(t);this.Zu.splice(e,1)}}function pw(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const r=e;for(const l of i)if(l in r&&typeof r[l]=="function")return!0;return!1}(n,["next","error","complete"])}class Uo extends tp{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new mw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new mw(t),this._firestoreClient=void 0,await t}}}function pL(n,t){const e=typeof n=="object"?n:zy(),i=typeof n=="string"?n:lm,r=$l(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const l=G2("firestore");l&&mL(r,...l)}return r}function ep(n){if(n._terminated)throw new It(gt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gL(n),n._firestoreClient}function gL(n){var t,e,i;const r=n._freezeSettings(),l=function(f,m,p,v){return new BO(f,m,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,iA(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new lL(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new nc(jn.fromBase64String(t))}catch(e){throw new It(gt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new nc(jn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new It(gt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new It(gt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new It(gt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Jt(this._lat,t._lat)||Jt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==r[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=/^__.*__$/;class yL{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new qo(t,this.data,this.fieldMask,e,this.fieldTransforms):new lf(t,this.data,e,this.fieldTransforms)}}class aA{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new qo(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function oA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ht(40011,{Ic:n})}}class mv{constructor(t,e,i,r,l,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new mv(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.dc({path:i,Rc:!1});return r.Vc(t),r}mc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.dc({path:i,Rc:!1});return r.Ec(),r}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return _m(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(oA(this.Ic)&&_L.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class vL{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Km(t)}bc(t,e,i,r=!1){return new mv({Ic:t,methodName:e,wc:i,path:Bn.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sp(n){const t=n._freezeSettings(),e=Km(n._databaseId);return new vL(n._databaseId,!!t.ignoreUndefinedProperties,e)}function lA(n,t,e,i,r,l={}){const c=n.bc(l.merge||l.mergeFields?2:0,t,e,r);gv("Data must be an object, but it was:",c,i);const f=uA(i,c);let m,p;if(l.merge)m=new Ki(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=ey(t,E,e);if(!c.contains(S))throw new It(gt.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);hA(v,S)||v.push(S)}m=new Ki(v),p=c.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,p=c.fieldTransforms;return new yL(new wi(f),m,p)}class rp extends ip{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof rp}}class pv extends ip{_toFieldTransform(t){return new hD(t.path,new Zh)}isEqual(t){return t instanceof pv}}function bL(n,t,e,i){const r=n.bc(1,t,e);gv("Data must be an object, but it was:",r,i);const l=[],c=wi.empty();Fo(i,(m,p)=>{const v=_v(t,m,e);p=$e(p);const E=r.mc(v);if(p instanceof rp)l.push(v);else{const S=ff(p,E);S!=null&&(l.push(v),c.set(v,S))}});const f=new Ki(l);return new aA(c,f,r.fieldTransforms)}function TL(n,t,e,i,r,l){const c=n.bc(1,t,e),f=[ey(t,i,e)],m=[r];if(l.length%2!=0)throw new It(gt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(ey(t,l[S])),m.push(l[S+1]);const p=[],v=wi.empty();for(let S=f.length-1;S>=0;--S)if(!hA(p,f[S])){const I=f[S];let P=m[S];P=$e(P);const k=c.mc(I);if(P instanceof rp)p.push(I);else{const O=ff(P,k);O!=null&&(p.push(I),v.set(I,O))}}const E=new Ki(p);return new aA(v,E,c.fieldTransforms)}function EL(n,t,e,i=!1){return ff(e,n.bc(i?4:3,t))}function ff(n,t){if(cA(n=$e(n)))return gv("Unsupported field value:",t,n),uA(n,t);if(n instanceof ip)return function(i,r){if(!oA(r.Ic))throw r.gc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(r);l&&r.fieldTransforms.push(l)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(i,r){const l=[];let c=0;for(const f of i){let m=ff(f,r.fc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(n,t)}return function(i,r){if((i=$e(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return lD(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=on.fromDate(i);return{timestampValue:fm(r.serializer,l)}}if(i instanceof on){const l=new on(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:fm(r.serializer,l)}}if(i instanceof fv)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof nc)return{bytesValue:Cx(r.serializer,i._byteString)};if(i instanceof ei){const l=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw r.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Yy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof dv)return function(c,f){return{mapValue:{fields:{[ix]:{stringValue:sx},[um]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw f.gc("VectorValues must only contain numeric values.");return Gy(f.serializer,p)})}}}}}}(i,r);throw r.gc(`Unsupported field value: ${Jm(i)}`)}(n,t)}function uA(n,t){const e={};return X1(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fo(n,(i,r)=>{const l=ff(r,t.Ac(i));l!=null&&(e[i]=l)}),{mapValue:{fields:e}}}function cA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof on||n instanceof fv||n instanceof nc||n instanceof ei||n instanceof ip||n instanceof dv)}function gv(n,t,e){if(!cA(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const i=Jm(e);throw i==="an object"?t.gc(n+" a custom object"):t.gc(n+" "+i)}}function ey(n,t,e){if((t=$e(t))instanceof np)return t._internalPath;if(typeof t=="string")return _v(n,t);throw _m("Field path arguments must be of type string or ",n,!1,void 0,e)}const wL=new RegExp("[~\\*/\\[\\]]");function _v(n,t,e){if(t.search(wL)>=0)throw _m(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new np(...t.split("."))._internalPath}catch{throw _m(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function _m(n,t,e,i,r){const l=i&&!i.isEmpty(),c=r!==void 0;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${r}`),m+=")"),new It(gt.INVALID_ARGUMENT,f+n+m)}function hA(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(t,e,i,r,l){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ei(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new SL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(ap("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class SL extends fA{data(){return super.data()}}function ap(n,t){return typeof t=="string"?_v(n,t):t instanceof np?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new It(gt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yv{}class mA extends yv{}function ym(n,t,...e){let i=[];t instanceof yv&&i.push(t),i=i.concat(e),function(l){const c=l.filter(m=>m instanceof vv).length,f=l.filter(m=>m instanceof op).length;if(c>1||c>0&&f>0)throw new It(gt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class op extends mA{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new op(t,e,i)}_apply(t){const e=this._parse(t);return pA(t._query,e),new Go(t.firestore,t.converter,q_(t._query,e))}_parse(t){const e=sp(t.firestore);return function(l,c,f,m,p,v,E){let S;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new It(gt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){vw(E,v);const P=[];for(const k of E)P.push(yw(m,l,k));S={arrayValue:{values:P}}}else S=yw(m,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||vw(E,v),S=EL(f,c,E,v==="in"||v==="not-in");return dn.create(p,v,S)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function _w(n,t,e){const i=t,r=ap("where",n);return op._create(r,i,e)}class vv extends yv{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new vv(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:Ys.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(r,l){let c=r;const f=l.getFlattenedFilters();for(const m of f)pA(c,m),c=q_(c,m)}(t._query,e),new Go(t.firestore,t.converter,q_(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bv extends mA{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new bv(t,e)}_apply(t){const e=function(r,l,c){if(r.startAt!==null)throw new It(gt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new It(gt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gh(l,c)}(t._query,this._field,this._direction);return new Go(t.firestore,t.converter,function(r,l){const c=r.explicitOrderBy.concat([l]);return new dc(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}function xL(n,t="asc"){const e=t,i=ap("orderBy",n);return bv._create(i,e)}function yw(n,t,e){if(typeof(e=$e(e))=="string"){if(e==="")throw new It(gt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fx(t)&&e.indexOf("/")!==-1)throw new It(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(je.fromString(e));if(!Lt.isDocumentKey(i))throw new It(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ME(n,new Lt(i))}if(e instanceof ei)return ME(n,e._key);throw new It(gt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jm(e)}.`)}function vw(n,t){if(!Array.isArray(n)||n.length===0)throw new It(gt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function pA(n,t){const e=function(r,l){for(const c of r)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new It(gt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new It(gt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class AL{convertValue(t,e="none"){switch(Vo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return rn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(No(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Ht(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Fo(t,(r,l)=>{i[r]=this.convertValue(l,e)}),i}convertVectorValue(t){var e,i,r;const l=(r=(i=(e=t.fields)===null||e===void 0?void 0:e[um].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(c=>rn(c.doubleValue));return new dv(l)}convertGeoPoint(t){return new fv(rn(t.latitude),rn(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Fm(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Hh(t));default:return null}}convertTimestamp(t){const e=Lo(t);return new on(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=je.fromString(t);ve(Lx(i),9688,{name:t});const r=new Fh(i.get(1),i.get(3)),l=new Lt(i.popFirst(5));return r.isEqual(e)||ga(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(n,t,e){let i;return i=n?n.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _A extends fA{constructor(t,e,i,r,l,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(ap("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Xd extends _A{data(t={}){return super.data(t)}}class yA{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new vh(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Xd(this._firestore,this._userDataWriter,i.key,i,new vh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new It(gt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(f=>{const m=new Xd(r._firestore,r._userDataWriter,f.doc.key,f.doc,new vh(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const m=new Xd(r._firestore,r._userDataWriter,f.doc.key,f.doc,new vh(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:RL(f.type),doc:m,oldIndex:p,newIndex:v}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function RL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ht(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(n){n=Xi(n,ei);const t=Xi(n.firestore,Uo);return hL(ep(t),n._key).then(e=>vA(t,n,e))}class Tv extends AL{constructor(t){super(),this.firestore=t}convertBytes(t){return new nc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ei(this.firestore,null,e)}}function ny(n){n=Xi(n,Go);const t=Xi(n.firestore,Uo),e=ep(t),i=new Tv(t);return dA(n._query),fL(e,n._query).then(r=>new yA(t,i,n,r))}function IL(n,t,e){n=Xi(n,ei);const i=Xi(n.firestore,Uo),r=gA(n.converter,t);return wv(i,[lA(sp(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,Gs.none())])}function bh(n,t,e,...i){n=Xi(n,ei);const r=Xi(n.firestore,Uo),l=sp(r);let c;return c=typeof(t=$e(t))=="string"||t instanceof np?TL(l,"updateDoc",n._key,t,e,i):bL(l,"updateDoc",n._key,t),wv(r,[c.toMutation(n._key,Gs.exists(!0))])}function Ev(n,t){const e=Xi(n.firestore,Uo),i=Fs(n),r=gA(n.converter,t);return wv(e,[lA(sp(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Gs.exists(!1))]).then(()=>i)}function iy(n,...t){var e,i,r;n=$e(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof t[c]!="object"||gw(t[c])||(l=t[c],c++);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(gw(t[c])){const E=t[c];t[c]=(e=E.next)===null||e===void 0?void 0:e.bind(E),t[c+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),t[c+2]=(r=E.complete)===null||r===void 0?void 0:r.bind(E)}let m,p,v;if(n instanceof ei)p=Xi(n.firestore,Uo),v=qm(n._key.path),m={next:E=>{t[c]&&t[c](vA(p,n,E))},error:t[c+1],complete:t[c+2]};else{const E=Xi(n,Go);p=Xi(E.firestore,Uo),v=E._query;const S=new Tv(p);m={next:I=>{t[c]&&t[c](new yA(p,S,E,I))},error:t[c+1],complete:t[c+2]},dA(n._query)}return function(S,I,P,k){const O=new hv(k),B=new lv(I,O,P);return S.asyncQueue.enqueueAndForget(async()=>rv(await gm(S),B)),()=>{O.xu(),S.asyncQueue.enqueueAndForget(async()=>av(await gm(S),B))}}(ep(p),v,f,m)}function wv(n,t){return function(i,r){const l=new da;return i.asyncQueue.enqueueAndForget(async()=>Jk(await cL(i),r,l)),l.promise}(ep(n),t)}function vA(n,t,e){const i=e.docs.get(t._key),r=new Tv(n);return new _A(n,r,t._key,i,new vh(e.hasPendingWrites,e.fromCache),t.converter)}function CL(){return new pv("serverTimestamp")}(function(t,e=!0){(function(r){cc=r})(uc),Ir(new Ws("firestore",(i,{instanceIdentifier:r,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new Uo(new EO(i.getProvider("auth-internal")),new xO(c,i.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new It(gt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fh(p.options.projectId,v)}(c,r),c);return l=Object.assign({useFetchStreams:e},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),Ts(vE,bE,t),Ts(vE,bE,"esm2017")})();var PL="firebase",ML="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ts(PL,ML,"app");const bA="@firebase/installations",Sv="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=1e4,EA=`w:${Sv}`,wA="FIS_v2",OL="https://firebaseinstallations.googleapis.com/v1",DL=60*60*1e3,kL="installations",LL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Hl=new Yl(kL,LL,NL);function SA(n){return n instanceof Qs&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA({projectId:n}){return`${OL}/projects/${n}/installations`}function AA(n){return{token:n.token,requestStatus:2,expiresIn:zL(n.expiresIn),creationTime:Date.now()}}async function RA(n,t){const i=(await t.json()).error;return Hl.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function IA({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function VL(n,{refreshToken:t}){const e=IA(n);return e.append("Authorization",BL(t)),e}async function CA(n){const t=await n();return t.status>=500&&t.status<600?n():t}function zL(n){return Number(n.replace("s","000"))}function BL(n){return`${wA} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UL({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const i=xA(n),r=IA(n),l=t.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const c={fid:e,authVersion:wA,appId:n.appId,sdkVersion:EA},f={method:"POST",headers:r,body:JSON.stringify(c)},m=await CA(()=>fetch(i,f));if(m.ok){const p=await m.json();return{fid:p.fid||e,registrationStatus:2,refreshToken:p.refreshToken,authToken:AA(p.authToken)}}else throw await RA("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=/^[cdef][\w-]{21}$/,sy="";function FL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=qL(n);return HL.test(e)?e:sy}catch{return sy}}function qL(n){return jL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=new Map;function OA(n,t){const e=lp(n);DA(e,t),GL(e,t)}function DA(n,t){const e=MA.get(n);if(e)for(const i of e)i(t)}function GL(n,t){const e=ZL();e&&e.postMessage({key:n,fid:t}),WL()}let Nl=null;function ZL(){return!Nl&&"BroadcastChannel"in self&&(Nl=new BroadcastChannel("[Firebase] FID Change"),Nl.onmessage=n=>{DA(n.data.key,n.data.fid)}),Nl}function WL(){MA.size===0&&Nl&&(Nl.close(),Nl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="firebase-installations-database",$L=1,Fl="firebase-installations-store";let __=null;function xv(){return __||(__=N1(YL,$L,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(Fl)}}})),__}async function vm(n,t){const e=lp(n),r=(await xv()).transaction(Fl,"readwrite"),l=r.objectStore(Fl),c=await l.get(e);return await l.put(t,e),await r.done,(!c||c.fid!==t.fid)&&OA(n,t.fid),t}async function kA(n){const t=lp(n),i=(await xv()).transaction(Fl,"readwrite");await i.objectStore(Fl).delete(t),await i.done}async function up(n,t){const e=lp(n),r=(await xv()).transaction(Fl,"readwrite"),l=r.objectStore(Fl),c=await l.get(e),f=t(c);return f===void 0?await l.delete(e):await l.put(f,e),await r.done,f&&(!c||c.fid!==f.fid)&&OA(n,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Av(n){let t;const e=await up(n.appConfig,i=>{const r=KL(i),l=XL(n,r);return t=l.registrationPromise,l.installationEntry});return e.fid===sy?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function KL(n){const t=n||{fid:FL(),registrationStatus:0};return LA(t)}function XL(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Hl.create("app-offline"));return{installationEntry:t,registrationPromise:r}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=QL(n,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:JL(n)}:{installationEntry:t}}async function QL(n,t){try{const e=await UL(n,t);return vm(n.appConfig,e)}catch(e){throw SA(e)&&e.customData.serverCode===409?await kA(n.appConfig):await vm(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function JL(n){let t=await bw(n.appConfig);for(;t.registrationStatus===1;)await PA(100),t=await bw(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:i}=await Av(n);return i||e}return t}function bw(n){return up(n,t=>{if(!t)throw Hl.create("installation-not-found");return LA(t)})}function LA(n){return tN(n)?{fid:n.fid,registrationStatus:0}:n}function tN(n){return n.registrationStatus===1&&n.registrationTime+TA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN({appConfig:n,heartbeatServiceProvider:t},e){const i=nN(n,e),r=VL(n,e),l=t.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const c={installation:{sdkVersion:EA,appId:n.appId}},f={method:"POST",headers:r,body:JSON.stringify(c)},m=await CA(()=>fetch(i,f));if(m.ok){const p=await m.json();return AA(p)}else throw await RA("Generate Auth Token",m)}function nN(n,{fid:t}){return`${xA(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rv(n,t=!1){let e;const i=await up(n.appConfig,l=>{if(!NA(l))throw Hl.create("not-registered");const c=l.authToken;if(!t&&rN(c))return l;if(c.requestStatus===1)return e=iN(n,t),l;{if(!navigator.onLine)throw Hl.create("app-offline");const f=oN(l);return e=sN(n,f),f}});return e?await e:i.authToken}async function iN(n,t){let e=await Tw(n.appConfig);for(;e.authToken.requestStatus===1;)await PA(100),e=await Tw(n.appConfig);const i=e.authToken;return i.requestStatus===0?Rv(n,t):i}function Tw(n){return up(n,t=>{if(!NA(t))throw Hl.create("not-registered");const e=t.authToken;return lN(e)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function sN(n,t){try{const e=await eN(n,t),i=Object.assign(Object.assign({},t),{authToken:e});return await vm(n.appConfig,i),e}catch(e){if(SA(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await kA(n.appConfig);else{const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await vm(n.appConfig,i)}throw e}}function NA(n){return n!==void 0&&n.registrationStatus===2}function rN(n){return n.requestStatus===2&&!aN(n)}function aN(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+DL}function oN(n){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:t})}function lN(n){return n.requestStatus===1&&n.requestTime+TA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(n){const t=n,{installationEntry:e,registrationPromise:i}=await Av(t);return i?i.catch(console.error):Rv(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(n,t=!1){const e=n;return await hN(e),(await Rv(e,t)).token}async function hN(n){const{registrationPromise:t}=await Av(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(n){if(!n||!n.options)throw y_("App Configuration");if(!n.name)throw y_("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw y_(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function y_(n){return Hl.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="installations",dN="installations-internal",mN=n=>{const t=n.getProvider("app").getImmediate(),e=fN(t),i=$l(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},pN=n=>{const t=n.getProvider("app").getImmediate(),e=$l(t,VA).getImmediate();return{getId:()=>uN(e),getToken:r=>cN(e,r)}};function gN(){Ir(new Ws(VA,mN,"PUBLIC")),Ir(new Ws(dN,pN,"PRIVATE"))}gN();Ts(bA,Sv);Ts(bA,Sv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="analytics",_N="firebase_id",yN="origin",vN=60*1e3,bN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Iv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new Um("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qi=new Yl("analytics","Analytics",TN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(n){if(!n.startsWith(Iv)){const t=Qi.create("invalid-gtag-resource",{gtagURL:n});return Ai.warn(t.message),""}return n}function zA(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function wN(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function SN(n,t){const e=wN("firebase-js-sdk-policy",{createScriptURL:EN}),i=document.createElement("script"),r=`${Iv}?l=${n}&id=${t}`;i.src=e?e==null?void 0:e.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function xN(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function AN(n,t,e,i,r,l){const c=i[r];try{if(c)await t[c];else{const m=(await zA(e)).find(p=>p.measurementId===r);m&&await t[m.appId]}}catch(f){Ai.error(f)}n("config",r,l)}async function RN(n,t,e,i,r){try{let l=[];if(r&&r.send_to){let c=r.send_to;Array.isArray(c)||(c=[c]);const f=await zA(e);for(const m of c){const p=f.find(E=>E.measurementId===m),v=p&&t[p.appId];if(v)l.push(v);else{l=[];break}}}l.length===0&&(l=Object.values(t)),await Promise.all(l),n("event",i,r||{})}catch(l){Ai.error(l)}}function IN(n,t,e,i){async function r(l,...c){try{if(l==="event"){const[f,m]=c;await RN(n,t,e,f,m)}else if(l==="config"){const[f,m]=c;await AN(n,t,e,i,f,m)}else if(l==="consent"){const[f,m]=c;n("consent",f,m)}else if(l==="get"){const[f,m,p]=c;n("get",f,m,p)}else if(l==="set"){const[f]=c;n("set",f)}else n(l,...c)}catch(f){Ai.error(f)}}return r}function CN(n,t,e,i,r){let l=function(...c){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(l=window[r]),window[r]=IN(l,n,t,e),{gtagCore:l,wrappedGtag:window[r]}}function PN(n){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(Iv)&&e.src.includes(n))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=30,ON=1e3;class DN{constructor(t={},e=ON){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const BA=new DN;function kN(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function LN(n){var t;const{appId:e,apiKey:i}=n,r={method:"GET",headers:kN(i)},l=bN.replace("{app-id}",e),c=await fetch(l,r);if(c.status!==200&&c.status!==304){let f="";try{const m=await c.json();!((t=m.error)===null||t===void 0)&&t.message&&(f=m.error.message)}catch{}throw Qi.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function NN(n,t=BA,e){const{appId:i,apiKey:r,measurementId:l}=n.options;if(!i)throw Qi.create("no-app-id");if(!r){if(l)return{measurementId:l,appId:i};throw Qi.create("no-api-key")}const c=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new BN;return setTimeout(async()=>{f.abort()},vN),UA({appId:i,apiKey:r,measurementId:l},c,f,t)}async function UA(n,{throttleEndTimeMillis:t,backoffCount:e},i,r=BA){var l;const{appId:c,measurementId:f}=n;try{await VN(i,t)}catch(m){if(f)return Ai.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:c,measurementId:f};throw m}try{const m=await LN(n);return r.deleteThrottleMetadata(c),m}catch(m){const p=m;if(!zN(p)){if(r.deleteThrottleMetadata(c),f)return Ai.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:c,measurementId:f};throw m}const v=Number((l=p==null?void 0:p.customData)===null||l===void 0?void 0:l.httpStatus)===503?uE(e,r.intervalMillis,MN):uE(e,r.intervalMillis),E={throttleEndTimeMillis:Date.now()+v,backoffCount:e+1};return r.setThrottleMetadata(c,E),Ai.debug(`Calling attemptFetch again in ${v} millis`),UA(n,E,i,r)}}function VN(n,t){return new Promise((e,i)=>{const r=Math.max(t-Date.now(),0),l=setTimeout(e,r);n.addEventListener(()=>{clearTimeout(l),i(Qi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function zN(n){if(!(n instanceof Qs)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class BN{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function UN(n,t,e,i,r){if(r&&r.global){n("event",e,i);return}else{const l=await t,c=Object.assign(Object.assign({},i),{send_to:l});n("event",e,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(){if(Ly())try{await Ny()}catch(n){return Ai.warn(Qi.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Ai.warn(Qi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function HN(n,t,e,i,r,l,c){var f;const m=NN(n);m.then(I=>{e[I.measurementId]=I.appId,n.options.measurementId&&I.measurementId!==n.options.measurementId&&Ai.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${I.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(I=>Ai.error(I)),t.push(m);const p=jN().then(I=>{if(I)return i.getId()}),[v,E]=await Promise.all([m,p]);PN(l)||SN(l,v.measurementId),r("js",new Date);const S=(f=c==null?void 0:c.config)!==null&&f!==void 0?f:{};return S[yN]="firebase",S.update=!0,E!=null&&(S[_N]=E),r("config",v.measurementId,S),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(t){this.app=t}_delete(){return delete Oh[this.app.options.appId],Promise.resolve()}}let Oh={},Ew=[];const ww={};let v_="dataLayer",qN="gtag",Sw,jA,xw=!1;function GN(){const n=[];if(ky()&&n.push("This is a browser extension environment."),D1()||n.push("Cookies are not available."),n.length>0){const t=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),e=Qi.create("invalid-analytics-context",{errorInfo:t});Ai.warn(e.message)}}function ZN(n,t,e){GN();const i=n.options.appId;if(!i)throw Qi.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ai.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qi.create("no-api-key");if(Oh[i]!=null)throw Qi.create("already-exists",{id:i});if(!xw){xN(v_);const{wrappedGtag:l,gtagCore:c}=CN(Oh,Ew,ww,v_,qN);jA=l,Sw=c,xw=!0}return Oh[i]=HN(n,Ew,ww,t,Sw,v_,e),new FN(n)}function WN(n=zy()){n=$e(n);const t=$l(n,bm);return t.isInitialized()?t.getImmediate():YN(n)}function YN(n,t={}){const e=$l(n,bm);if(e.isInitialized()){const r=e.getImmediate();if(Do(t,e.getOptions()))return r;throw Qi.create("already-initialized")}return e.initialize({options:t})}async function $N(){if(ky()||!D1()||!Ly())return!1;try{return await Ny()}catch{return!1}}function KN(n,t,e,i){n=$e(n),UN(jA,Oh[n.app.options.appId],t,e,i).catch(r=>Ai.error(r))}const Aw="@firebase/analytics",Rw="0.10.16";function XN(){Ir(new Ws(bm,(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return ZN(i,r,e)},"PUBLIC")),Ir(new Ws("analytics-internal",n,"PRIVATE")),Ts(Aw,Rw),Ts(Aw,Rw,"esm2017");function n(t){try{const e=t.getProvider(bm).getImmediate();return{logEvent:(i,r,l)=>KN(e,i,r,l)}}catch(e){throw Qi.create("interop-component-reg-failed",{reason:e})}}}XN();function Cv(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e}function HA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QN=HA,FA=new Yl("auth","Firebase",HA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=new Um("@firebase/auth");function JN(n,...t){Tm.logLevel<=ae.WARN&&Tm.warn(`Auth (${uc}): ${n}`,...t)}function Qd(n,...t){Tm.logLevel<=ae.ERROR&&Tm.error(`Auth (${uc}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(n,...t){throw Mv(n,...t)}function Zs(n,...t){return Mv(n,...t)}function Pv(n,t,e){const i=Object.assign(Object.assign({},QN()),{[t]:e});return new Yl("auth","Firebase",i).create(t,{appName:n.name})}function Ar(n){return Pv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qA(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&ws(n,"argument-error"),Pv(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mv(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return FA.create(n,...t)}function Ut(n,t,...e){if(!n)throw Mv(t,...e)}function ca(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Qd(t),new Error(t)}function ya(n,t){n||ca(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function tV(){return Iw()==="http:"||Iw()==="https:"}function Iw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tV()||ky()||"connection"in navigator)?navigator.onLine:!0}function nV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(t,e){this.shortDelay=t,this.longDelay=e,ya(e>t,"Short delay should be less than long delay!"),this.isMobile=K2()||J2()}get(){return eV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(n,t){ya(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ca("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ca("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ca("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rV=new df(3e4,6e4);function Zo(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function Wo(n,t,e,i,r={}){return ZA(n,r,async()=>{let l={},c={};i&&(t==="GET"?c=i:l={body:JSON.stringify(i)});const f=of(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:t,headers:m},l);return Q2()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&lc(n.emulatorConfig.host)&&(p.credentials="include"),GA.fetch()(await WA(n,n.config.apiHost,e,f),p)})}async function ZA(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},iV),t);try{const r=new oV(n),l=await Promise.race([e(),r.promise]);r.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Cd(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cd(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Cd(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Cd(n,"user-disabled",c);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Pv(n,v,p);ws(n,v)}}catch(r){if(r instanceof Qs)throw r;ws(n,"network-request-failed",{message:String(r)})}}async function mf(n,t,e,i,r={}){const l=await Wo(n,t,e,i,r);return"mfaPendingCredential"in l&&ws(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function WA(n,t,e,i){const r=`${t}${e}?${i}`,l=n,c=l.config.emulator?Ov(n.config,r):`${n.config.apiScheme}://${r}`;return sV.includes(e)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function aV(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Zs(this.auth,"network-request-failed")),rV.get())})}}function Cd(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=Zs(n,t,i);return r.customData._tokenResponse=e,r}function Cw(n){return n!==void 0&&n.enterprise!==void 0}class lV{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return aV(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uV(n,t){return Wo(n,"GET","/v2/recaptchaConfig",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cV(n,t){return Wo(n,"POST","/v1/accounts:delete",t)}async function Em(n,t){return Wo(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function hV(n,t=!1){const e=$e(n),i=await e.getIdToken(t),r=Dv(i);Ut(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const l=typeof r.firebase=="object"?r.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:r,token:i,authTime:Dh(b_(r.auth_time)),issuedAtTime:Dh(b_(r.iat)),expirationTime:Dh(b_(r.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function b_(n){return Number(n)*1e3}function Dv(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Qd("JWT malformed, contained fewer than 3 sections"),null;try{const r=R1(e);return r?JSON.parse(r):(Qd("Failed to decode base64 JWT payload"),null)}catch(r){return Qd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Pw(n){const t=Dv(n);return Ut(t,"internal-error"),Ut(typeof t.exp<"u","internal-error"),Ut(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $h(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Qs&&fV(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function fV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dh(this.lastLoginAt),this.creationTime=Dh(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kh(n){var t;const e=n.auth,i=await n.getIdToken(),r=await $h(n,Em(e,{idToken:i}));Ut(r==null?void 0:r.users.length,e,"internal-error");const l=r.users[0];n._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?YA(l.providerUserInfo):[],f=pV(n.providerData,c),m=n.isAnonymous,p=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),v=m?p:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new ay(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function mV(n){const t=$e(n);await Kh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function pV(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function YA(n){return n.map(t=>{var{providerId:e}=t,i=Cv(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(n,t){const e=await ZA(n,{},async()=>{const i=of({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:l}=n.config,c=await WA(n,r,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&lc(n.emulatorConfig.host)&&(m.credentials="include"),GA.fetch()(c,m)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function _V(n,t){return Wo(n,"POST","/v2/accounts:revokeToken",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ut(t.idToken,"internal-error"),Ut(typeof t.idToken<"u","internal-error"),Ut(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Pw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Ut(t.length!==0,"internal-error");const e=Pw(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Ut(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:l}=await gV(t,e);this.updateTokensAndExpiration(i,r,Number(l))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:l}=e,c=new Zu;return i&&(Ut(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),r&&(Ut(typeof r=="string","internal-error",{appName:t}),c.accessToken=r),l&&(Ut(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Zu,this.toJSON())}_performRefresh(){return ca("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(n,t){Ut(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class qs{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,l=Cv(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new ay(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const e=await $h(this,this.stsTokenManager.getToken(this.auth,t));return Ut(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return hV(this,t)}reload(){return mV(this)}_assign(t){this!==t&&(Ut(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new qs(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Kh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ei(this.auth.app))return Promise.reject(Ar(this.auth));const t=await this.getIdToken();return await $h(this,cV(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,l,c,f,m,p,v;const E=(i=e.displayName)!==null&&i!==void 0?i:void 0,S=(r=e.email)!==null&&r!==void 0?r:void 0,I=(l=e.phoneNumber)!==null&&l!==void 0?l:void 0,P=(c=e.photoURL)!==null&&c!==void 0?c:void 0,k=(f=e.tenantId)!==null&&f!==void 0?f:void 0,O=(m=e._redirectEventId)!==null&&m!==void 0?m:void 0,B=(p=e.createdAt)!==null&&p!==void 0?p:void 0,F=(v=e.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:$,emailVerified:nt,isAnonymous:J,providerData:ht,stsTokenManager:V}=e;Ut($&&V,t,"internal-error");const D=Zu.fromJSON(this.name,V);Ut(typeof $=="string",t,"internal-error"),yo(E,t.name),yo(S,t.name),Ut(typeof nt=="boolean",t,"internal-error"),Ut(typeof J=="boolean",t,"internal-error"),yo(I,t.name),yo(P,t.name),yo(k,t.name),yo(O,t.name),yo(B,t.name),yo(F,t.name);const z=new qs({uid:$,auth:t,email:S,emailVerified:nt,displayName:E,isAnonymous:J,photoURL:P,phoneNumber:I,tenantId:k,stsTokenManager:D,createdAt:B,lastLoginAt:F});return ht&&Array.isArray(ht)&&(z.providerData=ht.map(U=>Object.assign({},U))),O&&(z._redirectEventId=O),z}static async _fromIdTokenResponse(t,e,i=!1){const r=new Zu;r.updateFromServerResponse(e);const l=new qs({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Kh(l),l}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];Ut(r.localId!==void 0,"internal-error");const l=r.providerUserInfo!==void 0?YA(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!(l!=null&&l.length),f=new Zu;f.updateFromIdToken(i);const m=new qs({uid:r.localId,auth:t,stsTokenManager:f,isAnonymous:c}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new ay(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=new Map;function ha(n){ya(n instanceof Function,"Expected a class definition");let t=Mw.get(n);return t?(ya(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,Mw.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}$A.type="NONE";const Ow=$A;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(n,t,e){return`firebase:${n}:${t}:${e}`}class Wu{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:l}=this.auth;this.fullUserKey=Jd(this.userKey,r.apiKey,l),this.fullPersistenceKey=Jd("persistence",r.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Em(this.auth,{idToken:t}).catch(()=>{});return e?qs._fromGetAccountInfoResponse(this.auth,e,t):null}return qs._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Wu(ha(Ow),t,i);const r=(await Promise.all(e.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=r[0]||ha(Ow);const c=Jd(i,t.config.apiKey,t.name);let f=null;for(const p of e)try{const v=await p._get(c);if(v){let E;if(typeof v=="string"){const S=await Em(t,{idToken:v}).catch(()=>{});if(!S)break;E=await qs._fromGetAccountInfoResponse(t,S,v)}else E=qs._fromJSON(t,v);p!==l&&(f=E),l=p;break}}catch{}const m=r.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Wu(l,t,i):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(e.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Wu(l,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(JA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(KA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(eR(t))return"Blackberry";if(nR(t))return"Webos";if(XA(t))return"Safari";if((t.includes("chrome/")||QA(t))&&!t.includes("edge/"))return"Chrome";if(tR(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function KA(n=ii()){return/firefox\//i.test(n)}function XA(n=ii()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function QA(n=ii()){return/crios\//i.test(n)}function JA(n=ii()){return/iemobile/i.test(n)}function tR(n=ii()){return/android/i.test(n)}function eR(n=ii()){return/blackberry/i.test(n)}function nR(n=ii()){return/webos/i.test(n)}function kv(n=ii()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yV(n=ii()){var t;return kv(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function vV(){return tM()&&document.documentMode===10}function iR(n=ii()){return kv(n)||tR(n)||nR(n)||eR(n)||/windows phone/i.test(n)||JA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(n,t=[]){let e;switch(n){case"Browser":e=Dw(ii());break;case"Worker":e=`${Dw(ii())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${uc}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=l=>new Promise((c,f)=>{try{const m=t(l);c(m)}catch(m){f(m)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TV(n,t={}){return Wo(n,"GET","/v2/passwordPolicy",Zo(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=6;class wV{constructor(t){var e,i,r,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=c.minPasswordLength)!==null&&e!==void 0?e:EV,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,l,c,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(e=m.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(r=m.containsLowercaseLetter)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kw(this),this.idTokenSubscription=new kw(this),this.beforeStateQueue=new bV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ha(e)),this._initializationPromise=this.queue(async()=>{var i,r,l;if(!this._deleted&&(this.persistenceManager=await Wu.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Em(this,{idToken:t}),i=await qs._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(Ei(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,f=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(t);(!c||c===f)&&(m!=null&&m.user)&&(r=m.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Kh(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=nV()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ei(this.app))return Promise.reject(Ar(this));const e=t?$e(t):null;return e&&Ut(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Ut(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ei(this.app)?Promise.reject(Ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ei(this.app)?Promise.reject(Ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ha(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await TV(this),e=new wV(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Yl("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await _V(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ha(t)||this._popupRedirectResolver;Ut(e,this,"argument-error"),this.redirectPersistenceManager=await Wu.create(this,[ha(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ut(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof e=="function"){const m=t.addObserver(e,i,r);return()=>{c=!0,m()}}else{const m=t.addObserver(e);return()=>{c=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=sR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&JN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ea(n){return $e(n)}class kw{constructor(t){this.auth=t,this.observer=null,this.addObserver=aM(e=>this.observer=e)}get next(){return Ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xV(n){cp=n}function rR(n){return cp.loadJS(n)}function AV(){return cp.recaptchaEnterpriseScript}function RV(){return cp.gapiScript}function IV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class CV{constructor(){this.enterprise=new PV}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class PV{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const MV="recaptcha-enterprise",aR="NO_RECAPTCHA";class OV{constructor(t){this.type=MV,this.auth=Ea(t)}async verify(t="verify",e=!1){async function i(l){if(!e){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{uV(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new lV(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(m=>{f(m)})})}function r(l,c,f){const m=window.grecaptcha;Cw(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:t}).then(p=>{c(p)}).catch(()=>{c(aR)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CV().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(f=>{if(!e&&Cw(window.grecaptcha))r(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=AV();m.length!==0&&(m+=f),rR(m).then(()=>{r(f,l,c)}).catch(p=>{c(p)})}}).catch(f=>{c(f)})})}}async function Lw(n,t,e,i=!1,r=!1){const l=new OV(n);let c;if(r)c=aR;else try{c=await l.verify(e)}catch{c=await l.verify(e,!0)}const f=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function oy(n,t,e,i,r){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Lw(n,t,e,e==="getOobCode");return i(n,c)}else return i(n,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Lw(n,t,e,e==="getOobCode");return i(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(n,t){const e=$l(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),l=e.getOptions();if(Do(l,t??{}))return r;ws(r,"already-initialized")}return e.initialize({options:t})}function kV(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(ha);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function LV(n,t,e){const i=Ea(n);Ut(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,l=oR(t),{host:c,port:f}=NV(t),m=f===null?"":`:${f}`,p={url:`${l}//${c}${m}/`},v=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Ut(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ut(Do(p,i.config.emulator)&&Do(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,lc(c)?(M1(`${l}//${c}${m}`),O1("Auth",!0)):VV()}function oR(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function NV(n){const t=oR(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const l=r[1];return{host:l,port:Nw(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Nw(c)}}}function Nw(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function VV(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return ca("not implemented")}_getIdTokenResponse(t){return ca("not implemented")}_linkToIdToken(t,e){return ca("not implemented")}_getReauthenticationResolver(t){return ca("not implemented")}}async function zV(n,t){return Wo(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BV(n,t){return mf(n,"POST","/v1/accounts:signInWithPassword",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UV(n,t){return mf(n,"POST","/v1/accounts:signInWithEmailLink",Zo(n,t))}async function jV(n,t){return mf(n,"POST","/v1/accounts:signInWithEmailLink",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends Lv{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new Xh(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Xh(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return oy(t,e,"signInWithPassword",BV);case"emailLink":return UV(t,{email:this._email,oobCode:this._password});default:ws(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return oy(t,i,"signUpPassword",zV);case"emailLink":return jV(t,{idToken:e,email:this._email,oobCode:this._password});default:ws(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yu(n,t){return mf(n,"POST","/v1/accounts:signInWithIdp",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV="http://localhost";class ql extends Lv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ql(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ws("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r}=e,l=Cv(e,["providerId","signInMethod"]);if(!i||!r)return null;const c=new ql(i,r);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Yu(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Yu(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Yu(t,e)}buildRequest(){const t={requestUri:HV,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=of(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qV(n){const t=mh(ph(n)).link,e=t?mh(ph(t)).deep_link_id:null,i=mh(ph(n)).deep_link_id;return(i?mh(ph(i)).link:null)||i||e||t||n}class Nv{constructor(t){var e,i,r,l,c,f;const m=mh(ph(t)),p=(e=m.apiKey)!==null&&e!==void 0?e:null,v=(i=m.oobCode)!==null&&i!==void 0?i:null,E=FV((r=m.mode)!==null&&r!==void 0?r:null);Ut(p&&v&&E,"argument-error"),this.apiKey=p,this.operation=E,this.code=v,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(t){const e=qV(t);try{return new Nv(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(){this.providerId=Ql.PROVIDER_ID}static credential(t,e){return Xh._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=Nv.parseLink(e);return Ut(i,"argument-error"),Xh._fromEmailAndCode(t,i.code,i.tenantId)}}Ql.PROVIDER_ID="password";Ql.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ql.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends hp{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends pf{constructor(){super("facebook.com")}static credential(t){return ql._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bo.credentialFromTaggedObject(t)}static credentialFromError(t){return bo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bo.credential(t.oauthAccessToken)}catch{return null}}}bo.FACEBOOK_SIGN_IN_METHOD="facebook.com";bo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends pf{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ql._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return wr.credentialFromTaggedObject(t)}static credentialFromError(t){return wr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return wr.credential(e,i)}catch{return null}}}wr.GOOGLE_SIGN_IN_METHOD="google.com";wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends pf{constructor(){super("github.com")}static credential(t){return ql._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return To.credentialFromTaggedObject(t)}static credentialFromError(t){return To.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return To.credential(t.oauthAccessToken)}catch{return null}}}To.GITHUB_SIGN_IN_METHOD="github.com";To.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends pf{constructor(){super("twitter.com")}static credential(t,e){return ql._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Eo.credentialFromTaggedObject(t)}static credentialFromError(t){return Eo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Eo.credential(e,i)}catch{return null}}}Eo.TWITTER_SIGN_IN_METHOD="twitter.com";Eo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(n,t){return mf(n,"POST","/v1/accounts:signUp",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const l=await qs._fromIdTokenResponse(t,i,r),c=Vw(i);return new va({user:l,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=Vw(i);return new va({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function Vw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(n){var t;if(Ei(n.app))return Promise.reject(Ar(n));const e=Ea(n);if(await e._initializationPromise,!((t=e.currentUser)===null||t===void 0)&&t.isAnonymous)return new va({user:e.currentUser,providerId:null,operationType:"signIn"});const i=await lR(e,{returnSecureToken:!0}),r=await va._fromIdTokenResponse(e,"signIn",i,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm extends Qs{constructor(t,e,i,r){var l;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,wm.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new wm(t,e,i,r)}}function cR(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?wm._fromErrorAndOperation(n,l,t,i):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(n){return new Set(n.map(({providerId:t})=>t).filter(t=>!!t))}async function hR(n,t,e=!1){const i=await $h(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return va._forOperation(n,"link",i)}async function ZV(n,t,e){await Kh(t);const i=GV(t.providerData);Ut(i.has(e)===n,t.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WV(n,t,e=!1){const{auth:i}=n;if(Ei(i.app))return Promise.reject(Ar(i));const r="reauthenticate";try{const l=await $h(n,cR(i,r,t,n),e);Ut(l.idToken,i,"internal-error");const c=Dv(l.idToken);Ut(c,i,"internal-error");const{sub:f}=c;return Ut(n.uid===f,i,"user-mismatch"),va._forOperation(n,r,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ws(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(n,t,e=!1){if(Ei(n.app))return Promise.reject(Ar(n));const i="signIn",r=await cR(n,i,t),l=await va._fromIdTokenResponse(n,i,r);return e||await n._updateCurrentUser(l.user),l}async function YV(n,t){return fR(Ea(n),t)}async function $V(n,t){const e=$e(n);return await ZV(!1,e,t.providerId),hR(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(n){const t=Ea(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function KV(n,t,e){if(Ei(n.app))return Promise.reject(Ar(n));const i=Ea(n),c=await oy(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lR).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&dR(n),m}),f=await va._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(f.user),f}function zw(n,t,e){return Ei(n.app)?Promise.reject(Ar(n)):YV($e(n),Ql.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dR(n),i})}function XV(n,t,e,i){return $e(n).onIdTokenChanged(t,e,i)}function QV(n,t,e){return $e(n).beforeAuthStateChanged(t,e)}function Vv(n,t,e,i){return $e(n).onAuthStateChanged(t,e,i)}function mR(n){return $e(n).signOut()}const Sm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Sm,"1"),this.storage.removeItem(Sm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=1e3,t4=10;class gR extends pR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);vV()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,t4):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},JV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}gR.type="LOCAL";const e4=gR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R extends pR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}_R.type="SESSION";const yR=_R;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new fp(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:l}=e.data,c=this.handlersMap[r];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const f=Array.from(c).map(async p=>p(e.origin,l)),m=await n4(f);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:m})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const p=zv("",20);r.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:e},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}function s4(n){Rr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function r4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function o4(){return vR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="firebaseLocalStorageDb",l4=1,xm="firebaseLocalStorage",TR="fbase_key";class gf{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function dp(n,t){return n.transaction([xm],t?"readwrite":"readonly").objectStore(xm)}function u4(){const n=indexedDB.deleteDatabase(bR);return new gf(n).toPromise()}function ly(){const n=indexedDB.open(bR,l4);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(xm,{keyPath:TR})}catch(r){e(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(xm)?t(i):(i.close(),await u4(),t(await ly()))})})}async function Bw(n,t,e){const i=dp(n,!0).put({[TR]:t,value:e});return new gf(i).toPromise()}async function c4(n,t){const e=dp(n,!1).get(t),i=await new gf(e).toPromise();return i===void 0?null:i.value}function Uw(n,t){const e=dp(n,!0).delete(t);return new gf(e).toPromise()}const h4=800,f4=3;class ER{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ly(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>f4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fp._getInstance(o4()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await r4(),!this.activeServiceWorker)return;this.sender=new i4(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||a4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ly();return await Bw(t,Sm,"1"),await Uw(t,Sm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>Bw(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>c4(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Uw(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const l=dp(r,!1).getAll();return new gf(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:l}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(l)&&(this.notifyListeners(r,l),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ER.type="LOCAL";const d4=ER;new df(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(n,t){return t?ha(t):(Ut(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv extends Lv{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Yu(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Yu(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Yu(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function m4(n){return fR(n.auth,new Uv(n),n.bypassAuthState)}function p4(n){const{auth:t,user:e}=n;return Ut(e,t,"internal-error"),WV(e,new Uv(n),n.bypassAuthState)}async function g4(n){const{auth:t,user:e}=n;return Ut(e,t,"internal-error"),hR(e,new Uv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(t,e,i,r,l=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:l,error:c,type:f}=t;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:e,sessionId:i,tenantId:l||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return m4;case"linkViaPopup":case"linkViaRedirect":return g4;case"reauthViaPopup":case"reauthViaRedirect":return p4;default:ws(this.auth,"internal-error")}}resolve(t){ya(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ya(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=new df(2e3,1e4);async function jw(n,t,e){if(Ei(n.app))return Promise.reject(Zs(n,"operation-not-supported-in-this-environment"));const i=Ea(n);qA(n,t,hp);const r=Bv(i,e);return new So(i,"signInViaPopup",t,r).executeNotNull()}async function y4(n,t,e){const i=$e(n);qA(i.auth,t,hp);const r=Bv(i.auth,e);return new So(i.auth,"linkViaPopup",t,r,i).executeNotNull()}class So extends wR{constructor(t,e,i,r,l){super(t,e,r,l),this.provider=i,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ut(t,this.auth,"internal-error"),t}async onExecution(){ya(this.filter.length===1,"Popup operations only handle one event");const t=zv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Zs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Zs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,_4.get())};t()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="pendingRedirect",tm=new Map;class b4 extends wR{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=tm.get(this.auth._key());if(!t){try{const i=await T4(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}tm.set(this.auth._key(),t)}return this.bypassAuthState||tm.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T4(n,t){const e=S4(t),i=w4(n);if(!await i._isAvailable())return!1;const r=await i._get(e)==="true";return await i._remove(e),r}function E4(n,t){tm.set(n._key(),t)}function w4(n){return ha(n._redirectPersistence)}function S4(n){return Jd(v4,n.config.apiKey,n.name)}async function x4(n,t,e=!1){if(Ei(n.app))return Promise.reject(Ar(n));const i=Ea(n),r=Bv(i,t),c=await new b4(i,r,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=10*60*1e3;class R4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!I4(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!SR(t)){const r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(Zs(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=A4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hw(t))}saveEventToCache(t){this.cachedEventUids.add(Hw(t)),this.lastProcessedEventTime=Date.now()}}function Hw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function SR({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function I4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(n,t={}){return Wo(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,M4=/^https?/;async function O4(n){if(n.config.emulator)return;const{authorizedDomains:t}=await C4(n);for(const e of t)try{if(D4(e))return}catch{}ws(n,"unauthorized-domain")}function D4(n){const t=ry(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!M4.test(e))return!1;if(P4.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=new df(3e4,6e4);function Fw(){const n=Rr().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function L4(n){return new Promise((t,e)=>{var i,r,l;function c(){Fw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Fw(),e(Zs(n,"network-request-failed"))},timeout:k4.get()})}if(!((r=(i=Rr().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((l=Rr().gapi)===null||l===void 0)&&l.load)c();else{const f=IV("iframefcb");return Rr()[f]=()=>{gapi.load?c():e(Zs(n,"network-request-failed"))},rR(`${RV()}?onload=${f}`).catch(m=>e(m))}}).catch(t=>{throw em=null,t})}let em=null;function N4(n){return em=em||L4(n),em}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=new df(5e3,15e3),z4="__/auth/iframe",B4="emulator/auth/iframe",U4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function H4(n){const t=n.config;Ut(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Ov(t,B4):`https://${n.config.authDomain}/${z4}`,i={apiKey:t.apiKey,appName:n.name,v:uc},r=j4.get(n.config.apiHost);r&&(i.eid=r);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${e}?${of(i).slice(1)}`}async function F4(n){const t=await N4(n),e=Rr().gapi;return Ut(e,n,"internal-error"),t.open({where:document.body,url:H4(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U4,dontclear:!0},i=>new Promise(async(r,l)=>{await i.restyle({setHideOnLeave:!1});const c=Zs(n,"network-request-failed"),f=Rr().setTimeout(()=>{l(c)},V4.get());function m(){Rr().clearTimeout(f),r(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G4=500,Z4=600,W4="_blank",Y4="http://localhost";class qw{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $4(n,t,e,i=G4,r=Z4){const l=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m=Object.assign(Object.assign({},q4),{width:i.toString(),height:r.toString(),top:l,left:c}),p=ii().toLowerCase();e&&(f=QA(p)?W4:e),KA(p)&&(t=t||Y4,m.scrollbars="yes");const v=Object.entries(m).reduce((S,[I,P])=>`${S}${I}=${P},`,"");if(yV(p)&&f!=="_self")return K4(t||"",f),new qw(null);const E=window.open(t||"",f,v);Ut(E,n,"popup-blocked");try{E.focus()}catch{}return new qw(E)}function K4(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="__/auth/handler",Q4="emulator/auth/handler",J4=encodeURIComponent("fac");async function Gw(n,t,e,i,r,l){Ut(n.config.authDomain,n,"auth-domain-config-required"),Ut(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:uc,eventId:r};if(t instanceof hp){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",rM(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(t instanceof pf){const v=t.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const m=await n._getAppCheckToken(),p=m?`#${J4}=${encodeURIComponent(m)}`:"";return`${t3(n)}?${of(f).slice(1)}${p}`}function t3({config:n}){return n.emulator?Ov(n,Q4):`https://${n.authDomain}/${X4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="webStorageSupport";class e3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yR,this._completeRedirectFn=x4,this._overrideRedirectResult=E4}async _openPopup(t,e,i,r){var l;ya((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Gw(t,e,i,ry(),r);return $4(t,c,zv())}async _openRedirect(t,e,i,r){await this._originValidation(t);const l=await Gw(t,e,i,ry(),r);return s4(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:l}=this.eventManagers[e];return r?Promise.resolve(r):(ya(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await F4(t),i=new R4(t);return e.register("authEvent",r=>(Ut(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(T_,{type:T_},r=>{var l;const c=(l=r==null?void 0:r[0])===null||l===void 0?void 0:l[T_];c!==void 0&&e(!!c),ws(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=O4(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return iR()||XA()||kv()}}const n3=e3;var Zw="@firebase/auth",Ww="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function r3(n){Ir(new Ws("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Ut(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sR(n)},p=new SV(i,r,l,m);return kV(p,e),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Ir(new Ws("auth-internal",t=>{const e=Ea(t.getProvider("auth").getImmediate());return(i=>new i3(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ts(Zw,Ww,s3(n)),Ts(Zw,Ww,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=5*60,o3=P1("authIdTokenMaxAge")||a3;let Yw=null;const l3=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>o3)return;const r=e==null?void 0:e.token;Yw!==r&&(Yw=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function mp(n=zy()){const t=$l(n,"auth");if(t.isInitialized())return t.getImmediate();const e=DV(n,{popupRedirectResolver:n3,persistence:[d4,e4,yR]}),i=P1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=l3(l.toString());QV(e,c,()=>c(e.currentUser)),XV(e,f=>c(f))}}const r=I1("auth");return r&&LV(e,`http://${r}`),e}function u3(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}xV({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const l=Zs("internal-error");l.customData=r,e(l)},i.type="text/javascript",i.charset="UTF-8",u3().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});r3("Browser");const c3={apiKey:"AIzaSyB34vwxqdgDvGctHQfEfrBJSk04a1rzQgg",authDomain:"tapasradar.firebaseapp.com",projectId:"tapasradar",storageBucket:"tapasradar.appspot.com",messagingSenderId:"164963298374",appId:"1:164963298374:web:5e29f30e084ede3ecdae47",measurementId:"G-0GS8PM4XGB"},jv=V1(c3);$N().then(n=>{n&&WN(jv)});const $w=mp(jv),Mn=pL(jv);delete w1.Icon.Default.prototype._getIconUrl;w1.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png"});const h3=()=>{const[n,t]=K.useState([]),e=[40.4168,-3.7038];return K.useEffect(()=>{(async()=>{const r=await ny(Mo(Mn,"bars")),l=[];for(const c of r.docs){const f=c.data(),p=(await ny(Mo(Mn,`bars/${c.id}/comments`))).docs.map(E=>E.data()),v=p.length>0?p.reduce((E,S)=>E+S.rating,0)/p.length:null;l.push({id:c.id,nom:f.nom,lat:f.lat,lng:f.lng,note:v??null})}t(l)})()},[]),Z.jsxs("div",{className:"container",children:[Z.jsx(oc,{}),Z.jsx("h2",{className:"title",children:"Mapa de bares en Madrid"}),Z.jsx("div",{className:"map",children:Z.jsxs(D2,{center:e,zoom:13,style:{height:"100%",width:"100%"},children:[Z.jsx(N2,{attribution:'© <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map(i=>Z.jsx(k2,{position:[i.lat,i.lng],children:Z.jsxs(L2,{children:[Z.jsx("strong",{children:i.nom}),Z.jsx("br",{}),i.note!==null?`⭐ ${i.note.toFixed(1)} / 5`:"Sin valoraciones",Z.jsx("br",{}),Z.jsx(ua,{to:`/bar/${i.id}`,children:"Ver ficha"})]})},i.id))]})}),Z.jsx(ua,{to:"/",className:"back-link",children:"Volver al inicio"})]})},f3=()=>{const[n,t]=K.useState([]),[e,i]=K.useState(!0);return K.useEffect(()=>{const l=ym(Mo(Mn,"bars")),c=iy(l,f=>{const m=f.docs.map(p=>({id:p.id,...p.data()}));console.log("Bars récupérés :",m),t(m),i(!1)});return()=>c()},[]),{bars:n,ajouterBar:async l=>{await Ev(Mo(Mn,"bars"),l)},loading:e}};function xR(n){var t,e,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(t=0;t<r;t++)n[t]&&(e=xR(n[t]))&&(i&&(i+=" "),i+=e)}else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function zl(){for(var n,t,e=0,i="",r=arguments.length;e<r;e++)(n=arguments[e])&&(t=xR(n))&&(i&&(i+=" "),i+=t);return i}function d3(n){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e),e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}d3(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var _f=n=>typeof n=="number"&&!isNaN(n),Gl=n=>typeof n=="string",ba=n=>typeof n=="function",m3=n=>Gl(n)||_f(n),uy=n=>Gl(n)||ba(n)?n:null,p3=(n,t)=>n===!1||_f(n)&&n>0?n:t,cy=n=>K.isValidElement(n)||Gl(n)||ba(n)||_f(n);function g3(n,t,e=300){let{scrollHeight:i,style:r}=n;requestAnimationFrame(()=>{r.minHeight="initial",r.height=i+"px",r.transition=`all ${e}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,e)})})}function _3({enter:n,exit:t,appendPosition:e=!1,collapse:i=!0,collapseDuration:r=300}){return function({children:l,position:c,preventExitTransition:f,done:m,nodeRef:p,isIn:v,playToast:E}){let S=e?`${n}--${c}`:n,I=e?`${t}--${c}`:t,P=K.useRef(0);return K.useLayoutEffect(()=>{let k=p.current,O=S.split(" "),B=F=>{F.target===p.current&&(E(),k.removeEventListener("animationend",B),k.removeEventListener("animationcancel",B),P.current===0&&F.type!=="animationcancel"&&k.classList.remove(...O))};k.classList.add(...O),k.addEventListener("animationend",B),k.addEventListener("animationcancel",B)},[]),K.useEffect(()=>{let k=p.current,O=()=>{k.removeEventListener("animationend",O),i?g3(k,m,r):m()};v||(f?O():(P.current=1,k.className+=` ${I}`,k.addEventListener("animationend",O)))},[v]),ge.createElement(ge.Fragment,null,l)}}function Kw(n,t){return{content:AR(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:t}}function AR(n,t,e=!1){return K.isValidElement(n)&&!Gl(n.type)?K.cloneElement(n,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:e}):ba(n)?n({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:e}):n}function y3({closeToast:n,theme:t,ariaLabel:e="close"}){return ge.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:i=>{i.stopPropagation(),n(!0)},"aria-label":e},ge.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ge.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function v3({delay:n,isRunning:t,closeToast:e,type:i="default",hide:r,className:l,controlledProgress:c,progress:f,rtl:m,isIn:p,theme:v}){let E=r||c&&f===0,S={animationDuration:`${n}ms`,animationPlayState:t?"running":"paused"};c&&(S.transform=`scaleX(${f})`);let I=zl("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${v}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":m}),P=ba(l)?l({rtl:m,type:i,defaultClassName:I}):zl(I,l),k={[c&&f>=1?"onTransitionEnd":"onAnimationEnd"]:c&&f<1?null:()=>{p&&e()}};return ge.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":E},ge.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${v} Toastify__progress-bar--${i}`}),ge.createElement("div",{role:"progressbar","aria-hidden":E?"true":"false","aria-label":"notification timer",className:P,style:S,...k}))}var b3=1,RR=()=>`${b3++}`;function T3(n,t,e){let i=1,r=0,l=[],c=[],f=t,m=new Map,p=new Set,v=F=>(p.add(F),()=>p.delete(F)),E=()=>{c=Array.from(m.values()),p.forEach(F=>F())},S=({containerId:F,toastId:$,updateId:nt})=>{let J=F?F!==n:n!==1,ht=m.has($)&&nt==null;return J||ht},I=(F,$)=>{m.forEach(nt=>{var J;($==null||$===nt.props.toastId)&&((J=nt.toggle)==null||J.call(nt,F))})},P=F=>{var $,nt;(nt=($=F.props)==null?void 0:$.onClose)==null||nt.call($,F.removalReason),F.isActive=!1},k=F=>{if(F==null)m.forEach(P);else{let $=m.get(F);$&&P($)}E()},O=()=>{r-=l.length,l=[]},B=F=>{var $,nt;let{toastId:J,updateId:ht}=F.props,V=ht==null;F.staleId&&m.delete(F.staleId),F.isActive=!0,m.set(J,F),E(),e(Kw(F,V?"added":"updated")),V&&((nt=($=F.props).onOpen)==null||nt.call($))};return{id:n,props:f,observe:v,toggle:I,removeToast:k,toasts:m,clearQueue:O,buildToast:(F,$)=>{if(S($))return;let{toastId:nt,updateId:J,data:ht,staleId:V,delay:D}=$,z=J==null;z&&r++;let U={...f,style:f.toastStyle,key:i++,...Object.fromEntries(Object.entries($).filter(([G,q])=>q!=null)),toastId:nt,updateId:J,data:ht,isIn:!1,className:uy($.className||f.toastClassName),progressClassName:uy($.progressClassName||f.progressClassName),autoClose:$.isLoading?!1:p3($.autoClose,f.autoClose),closeToast(G){m.get(nt).removalReason=G,k(nt)},deleteToast(){let G=m.get(nt);if(G!=null){if(e(Kw(G,"removed")),m.delete(nt),r--,r<0&&(r=0),l.length>0){B(l.shift());return}E()}}};U.closeButton=f.closeButton,$.closeButton===!1||cy($.closeButton)?U.closeButton=$.closeButton:$.closeButton===!0&&(U.closeButton=cy(f.closeButton)?f.closeButton:!0);let H={content:F,props:U,staleId:V};f.limit&&f.limit>0&&r>f.limit&&z?l.push(H):_f(D)?setTimeout(()=>{B(H)},D):B(H)},setProps(F){f=F},setToggle:(F,$)=>{let nt=m.get(F);nt&&(nt.toggle=$)},isToastActive:F=>{var $;return($=m.get(F))==null?void 0:$.isActive},getSnapshot:()=>c}}var hi=new Map,Qh=[],hy=new Set,E3=n=>hy.forEach(t=>t(n)),IR=()=>hi.size>0;function w3(){Qh.forEach(n=>PR(n.content,n.options)),Qh=[]}var S3=(n,{containerId:t})=>{var e;return(e=hi.get(t||1))==null?void 0:e.toasts.get(n)};function CR(n,t){var e;if(t)return!!((e=hi.get(t))!=null&&e.isToastActive(n));let i=!1;return hi.forEach(r=>{r.isToastActive(n)&&(i=!0)}),i}function x3(n){if(!IR()){Qh=Qh.filter(t=>n!=null&&t.options.toastId!==n);return}if(n==null||m3(n))hi.forEach(t=>{t.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let t=hi.get(n.containerId);t?t.removeToast(n.id):hi.forEach(e=>{e.removeToast(n.id)})}}var A3=(n={})=>{hi.forEach(t=>{t.props.limit&&(!n.containerId||t.id===n.containerId)&&t.clearQueue()})};function PR(n,t){cy(n)&&(IR()||Qh.push({content:n,options:t}),hi.forEach(e=>{e.buildToast(n,t)}))}function R3(n){var t;(t=hi.get(n.containerId||1))==null||t.setToggle(n.id,n.fn)}function MR(n,t){hi.forEach(e=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===e.id)&&e.toggle(n,t==null?void 0:t.id)})}function I3(n){let t=n.containerId||1;return{subscribe(e){let i=T3(t,n,E3);hi.set(t,i);let r=i.observe(e);return w3(),()=>{r(),hi.delete(t)}},setProps(e){var i;(i=hi.get(t))==null||i.setProps(e)},getSnapshot(){var e;return(e=hi.get(t))==null?void 0:e.getSnapshot()}}}function C3(n){return hy.add(n),()=>{hy.delete(n)}}function P3(n){return n&&(Gl(n.toastId)||_f(n.toastId))?n.toastId:RR()}function yf(n,t){return PR(n,t),t.toastId}function pp(n,t){return{...t,type:t&&t.type||n,toastId:P3(t)}}function gp(n){return(t,e)=>yf(t,pp(n,e))}function xe(n,t){return yf(n,pp("default",t))}xe.loading=(n,t)=>yf(n,pp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function M3(n,{pending:t,error:e,success:i},r){let l;t&&(l=Gl(t)?xe.loading(t,r):xe.loading(t.render,{...r,...t}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},f=(p,v,E)=>{if(v==null){xe.dismiss(l);return}let S={type:p,...c,...r,data:E},I=Gl(v)?{render:v}:v;return l?xe.update(l,{...S,...I}):xe(I.render,{...S,...I}),E},m=ba(n)?n():n;return m.then(p=>f("success",i,p)).catch(p=>f("error",e,p)),m}xe.promise=M3;xe.success=gp("success");xe.info=gp("info");xe.error=gp("error");xe.warning=gp("warning");xe.warn=xe.warning;xe.dark=(n,t)=>yf(n,pp("default",{theme:"dark",...t}));function O3(n){x3(n)}xe.dismiss=O3;xe.clearWaitingQueue=A3;xe.isActive=CR;xe.update=(n,t={})=>{let e=S3(n,t);if(e){let{props:i,content:r}=e,l={delay:100,...i,...t,toastId:t.toastId||n,updateId:RR()};l.toastId!==n&&(l.staleId=n);let c=l.render||r;delete l.render,yf(c,l)}};xe.done=n=>{xe.update(n,{progress:1})};xe.onChange=C3;xe.play=n=>MR(!0,n);xe.pause=n=>MR(!1,n);function D3(n){var t;let{subscribe:e,getSnapshot:i,setProps:r}=K.useRef(I3(n)).current;r(n);let l=(t=K.useSyncExternalStore(e,i,i))==null?void 0:t.slice();function c(f){if(!l)return[];let m=new Map;return n.newestOnTop&&l.reverse(),l.forEach(p=>{let{position:v}=p.props;m.has(v)||m.set(v,[]),m.get(v).push(p)}),Array.from(m,p=>f(p[0],p[1]))}return{getToastToRender:c,isToastActive:CR,count:l==null?void 0:l.length}}function k3(n){let[t,e]=K.useState(!1),[i,r]=K.useState(!1),l=K.useRef(null),c=K.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:f,pauseOnHover:m,closeToast:p,onClick:v,closeOnClick:E}=n;R3({id:n.toastId,containerId:n.containerId,fn:e}),K.useEffect(()=>{if(n.pauseOnFocusLoss)return S(),()=>{I()}},[n.pauseOnFocusLoss]);function S(){document.hasFocus()||B(),window.addEventListener("focus",O),window.addEventListener("blur",B)}function I(){window.removeEventListener("focus",O),window.removeEventListener("blur",B)}function P(V){if(n.draggable===!0||n.draggable===V.pointerType){F();let D=l.current;c.canCloseOnClick=!0,c.canDrag=!0,D.style.transition="none",n.draggableDirection==="x"?(c.start=V.clientX,c.removalDistance=D.offsetWidth*(n.draggablePercent/100)):(c.start=V.clientY,c.removalDistance=D.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function k(V){let{top:D,bottom:z,left:U,right:H}=l.current.getBoundingClientRect();V.nativeEvent.type!=="touchend"&&n.pauseOnHover&&V.clientX>=U&&V.clientX<=H&&V.clientY>=D&&V.clientY<=z?B():O()}function O(){e(!0)}function B(){e(!1)}function F(){c.didMove=!1,document.addEventListener("pointermove",nt),document.addEventListener("pointerup",J)}function $(){document.removeEventListener("pointermove",nt),document.removeEventListener("pointerup",J)}function nt(V){let D=l.current;if(c.canDrag&&D){c.didMove=!0,t&&B(),n.draggableDirection==="x"?c.delta=V.clientX-c.start:c.delta=V.clientY-c.start,c.start!==V.clientX&&(c.canCloseOnClick=!1);let z=n.draggableDirection==="x"?`${c.delta}px, var(--y)`:`0, calc(${c.delta}px + var(--y))`;D.style.transform=`translate3d(${z},0)`,D.style.opacity=`${1-Math.abs(c.delta/c.removalDistance)}`}}function J(){$();let V=l.current;if(c.canDrag&&c.didMove&&V){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance){r(!0),n.closeToast(!0),n.collapseAll();return}V.style.transition="transform 0.2s, opacity 0.2s",V.style.removeProperty("transform"),V.style.removeProperty("opacity")}}let ht={onPointerDown:P,onPointerUp:k};return f&&m&&(ht.onMouseEnter=B,n.stacked||(ht.onMouseLeave=O)),E&&(ht.onClick=V=>{v&&v(V),c.canCloseOnClick&&p(!0)}),{playToast:O,pauseToast:B,isRunning:t,preventExitTransition:i,toastRef:l,eventHandlers:ht}}var L3=typeof window<"u"?K.useLayoutEffect:K.useEffect,_p=({theme:n,type:t,isLoading:e,...i})=>ge.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...i});function N3(n){return ge.createElement(_p,{...n},ge.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function V3(n){return ge.createElement(_p,{...n},ge.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function z3(n){return ge.createElement(_p,{...n},ge.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function B3(n){return ge.createElement(_p,{...n},ge.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function U3(){return ge.createElement("div",{className:"Toastify__spinner"})}var fy={info:V3,warning:N3,success:z3,error:B3,spinner:U3},j3=n=>n in fy;function H3({theme:n,type:t,isLoading:e,icon:i}){let r=null,l={theme:n,type:t};return i===!1||(ba(i)?r=i({...l,isLoading:e}):K.isValidElement(i)?r=K.cloneElement(i,l):e?r=fy.spinner():j3(t)&&(r=fy[t](l))),r}var F3=n=>{let{isRunning:t,preventExitTransition:e,toastRef:i,eventHandlers:r,playToast:l}=k3(n),{closeButton:c,children:f,autoClose:m,onClick:p,type:v,hideProgressBar:E,closeToast:S,transition:I,position:P,className:k,style:O,progressClassName:B,updateId:F,role:$,progress:nt,rtl:J,toastId:ht,deleteToast:V,isIn:D,isLoading:z,closeOnClick:U,theme:H,ariaLabel:G}=n,q=zl("Toastify__toast",`Toastify__toast-theme--${H}`,`Toastify__toast--${v}`,{"Toastify__toast--rtl":J},{"Toastify__toast--close-on-click":U}),Yt=ba(k)?k({rtl:J,position:P,type:v,defaultClassName:q}):zl(q,k),kt=H3(n),it=!!nt||!m,vt={closeToast:S,type:v,theme:H},mt=null;return c===!1||(ba(c)?mt=c(vt):K.isValidElement(c)?mt=K.cloneElement(c,vt):mt=y3(vt)),ge.createElement(I,{isIn:D,done:V,position:P,preventExitTransition:e,nodeRef:i,playToast:l},ge.createElement("div",{id:ht,tabIndex:0,onClick:p,"data-in":D,className:Yt,...r,style:O,ref:i,...D&&{role:$,"aria-label":G}},kt!=null&&ge.createElement("div",{className:zl("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!z})},kt),AR(f,n,!t),mt,!n.customProgressBar&&ge.createElement(v3,{...F&&!it?{key:`p-${F}`}:{},rtl:J,theme:H,delay:m,isRunning:t,isIn:D,closeToast:S,hide:E,type:v,className:B,controlledProgress:it,progress:nt||0})))},q3=(n,t=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:t}),G3=_3(q3("bounce",!0)),Z3={position:"top-right",transition:G3,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function W3(n){let t={...Z3,...n},e=n.stacked,[i,r]=K.useState(!0),l=K.useRef(null),{getToastToRender:c,isToastActive:f,count:m}=D3(t),{className:p,style:v,rtl:E,containerId:S,hotKeys:I}=t;function P(O){let B=zl("Toastify__toast-container",`Toastify__toast-container--${O}`,{"Toastify__toast-container--rtl":E});return ba(p)?p({position:O,rtl:E,defaultClassName:B}):zl(B,uy(p))}function k(){e&&(r(!0),xe.play())}return L3(()=>{var O;if(e){let B=l.current.querySelectorAll('[data-in="true"]'),F=12,$=(O=t.position)==null?void 0:O.includes("top"),nt=0,J=0;Array.from(B).reverse().forEach((ht,V)=>{let D=ht;D.classList.add("Toastify__toast--stacked"),V>0&&(D.dataset.collapsed=`${i}`),D.dataset.pos||(D.dataset.pos=$?"top":"bot");let z=nt*(i?.2:1)+(i?0:F*V);D.style.setProperty("--y",`${$?z:z*-1}px`),D.style.setProperty("--g",`${F}`),D.style.setProperty("--s",`${1-(i?J:0)}`),nt+=D.offsetHeight,J+=.025})}},[i,m,e]),K.useEffect(()=>{function O(B){var F;let $=l.current;I(B)&&((F=$.querySelector('[tabIndex="0"]'))==null||F.focus(),r(!1),xe.pause()),B.key==="Escape"&&(document.activeElement===$||$!=null&&$.contains(document.activeElement))&&(r(!0),xe.play())}return document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)}},[I]),ge.createElement("section",{ref:l,className:"Toastify",id:S,onMouseEnter:()=>{e&&(r(!1),xe.pause())},onMouseLeave:k,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},c((O,B)=>{let F=B.length?{...v}:{...v,pointerEvents:"none"};return ge.createElement("div",{tabIndex:-1,className:P(O),"data-stacked":e,style:F,key:`c-${O}`},B.map(({content:$,props:nt})=>ge.createElement(F3,{...nt,stacked:e,collapseAll:k,isIn:f(nt.toastId,nt.containerId),key:`t-${nt.key}`},$)))}))}const Y3=()=>{const[n,t]=K.useState(""),[e,i]=K.useState(""),[r,l]=K.useState(""),[c,f]=K.useState(!1),{ajouterBar:m}=f3(),p=Ho(),v=()=>{p("/")},E=async I=>{if(I.preventDefault(),!n||!e||!r)return alert("Por favor, completa todos los campos.");try{await m({nom:n,lat:parseFloat(e),lng:parseFloat(r)}),p("/mapa"),xe.success("Formulario enviado correctamente ✅")}catch(P){console.error("Error al añadir bar:",P),alert("Hubo un error al guardar el bar.")}},S=()=>{window.confirm("¿Estás seguro de que quieres borrar el formulario?")&&(f(!0),setTimeout(()=>{t(""),i(""),l(""),f(!1),xe.info("Formulario limpiado correctamente ✅")},300))};return Z.jsx("div",{className:"form-container",children:Z.jsxs("form",{onSubmit:E,children:[Z.jsx("input",{type:"text",placeholder:"Nombre del bar",value:n,onChange:I=>t(I.target.value),className:c?"resetting":""}),Z.jsx("input",{type:"number",placeholder:"Latitud",value:e,onChange:I=>i(I.target.value),className:c?"resetting":""}),Z.jsx("input",{type:"number",placeholder:"Longitud",value:r,onChange:I=>l(I.target.value),className:c?"resetting":""}),Z.jsx("button",{type:"submit",children:"Guardar"}),Z.jsx("button",{type:"button",onClick:S,children:"Resetear"}),Z.jsx("button",{type:"button",onClick:v,children:"Ir a inicio"})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function vf(n){return n+.5|0}const xo=(n,t,e)=>Math.max(Math.min(n,e),t);function Th(n){return xo(vf(n*2.55),0,255)}function Oo(n){return xo(vf(n*255),0,255)}function la(n){return xo(vf(n/2.55)/100,0,1)}function Xw(n){return xo(vf(n*100),0,100)}const vs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},dy=[..."0123456789ABCDEF"],$3=n=>dy[n&15],K3=n=>dy[(n&240)>>4]+dy[n&15],Pd=n=>(n&240)>>4===(n&15),X3=n=>Pd(n.r)&&Pd(n.g)&&Pd(n.b)&&Pd(n.a);function Q3(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&vs[n[1]]*17,g:255&vs[n[2]]*17,b:255&vs[n[3]]*17,a:t===5?vs[n[4]]*17:255}:(t===7||t===9)&&(e={r:vs[n[1]]<<4|vs[n[2]],g:vs[n[3]]<<4|vs[n[4]],b:vs[n[5]]<<4|vs[n[6]],a:t===9?vs[n[7]]<<4|vs[n[8]]:255})),e}const J3=(n,t)=>n<255?t(n):"";function tz(n){var t=X3(n)?$3:K3;return n?"#"+t(n.r)+t(n.g)+t(n.b)+J3(n.a,t):void 0}const ez=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function OR(n,t,e){const i=t*Math.min(e,1-e),r=(l,c=(l+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[r(0),r(8),r(4)]}function nz(n,t,e){const i=(r,l=(r+n/60)%6)=>e-e*t*Math.max(Math.min(l,4-l,1),0);return[i(5),i(3),i(1)]}function iz(n,t,e){const i=OR(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function sz(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function Hv(n){const e=n.r/255,i=n.g/255,r=n.b/255,l=Math.max(e,i,r),c=Math.min(e,i,r),f=(l+c)/2;let m,p,v;return l!==c&&(v=l-c,p=f>.5?v/(2-l-c):v/(l+c),m=sz(e,i,r,v,l),m=m*60+.5),[m|0,p||0,f]}function Fv(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Oo)}function qv(n,t,e){return Fv(OR,n,t,e)}function rz(n,t,e){return Fv(iz,n,t,e)}function az(n,t,e){return Fv(nz,n,t,e)}function DR(n){return(n%360+360)%360}function oz(n){const t=ez.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Th(+t[5]):Oo(+t[5]));const r=DR(+t[2]),l=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=rz(r,l,c):t[1]==="hsv"?i=az(r,l,c):i=qv(r,l,c),{r:i[0],g:i[1],b:i[2],a:e}}function lz(n,t){var e=Hv(n);e[0]=DR(e[0]+t),e=qv(e),n.r=e[0],n.g=e[1],n.b=e[2]}function uz(n){if(!n)return;const t=Hv(n),e=t[0],i=Xw(t[1]),r=Xw(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${la(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const Qw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Jw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function cz(){const n={},t=Object.keys(Jw),e=Object.keys(Qw);let i,r,l,c,f;for(i=0;i<t.length;i++){for(c=f=t[i],r=0;r<e.length;r++)l=e[r],f=f.replace(l,Qw[l]);l=parseInt(Jw[c],16),n[f]=[l>>16&255,l>>8&255,l&255]}return n}let Md;function hz(n){Md||(Md=cz(),Md.transparent=[0,0,0,0]);const t=Md[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const fz=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function dz(n){const t=fz.exec(n);let e=255,i,r,l;if(t){if(t[7]!==i){const c=+t[7];e=t[8]?Th(c):xo(c*255,0,255)}return i=+t[1],r=+t[3],l=+t[5],i=255&(t[2]?Th(i):xo(i,0,255)),r=255&(t[4]?Th(r):xo(r,0,255)),l=255&(t[6]?Th(l):xo(l,0,255)),{r:i,g:r,b:l,a:e}}}function mz(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${la(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const E_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Bu=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function pz(n,t,e){const i=Bu(la(n.r)),r=Bu(la(n.g)),l=Bu(la(n.b));return{r:Oo(E_(i+e*(Bu(la(t.r))-i))),g:Oo(E_(r+e*(Bu(la(t.g))-r))),b:Oo(E_(l+e*(Bu(la(t.b))-l))),a:n.a+e*(t.a-n.a)}}function Od(n,t,e){if(n){let i=Hv(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=qv(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function kR(n,t){return n&&Object.assign(t||{},n)}function tS(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Oo(n[3]))):(t=kR(n,{r:0,g:0,b:0,a:1}),t.a=Oo(t.a)),t}function gz(n){return n.charAt(0)==="r"?dz(n):oz(n)}class Jh{constructor(t){if(t instanceof Jh)return t;const e=typeof t;let i;e==="object"?i=tS(t):e==="string"&&(i=Q3(t)||hz(t)||gz(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=kR(this._rgb);return t&&(t.a=la(t.a)),t}set rgb(t){this._rgb=tS(t)}rgbString(){return this._valid?mz(this._rgb):void 0}hexString(){return this._valid?tz(this._rgb):void 0}hslString(){return this._valid?uz(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let l;const c=e===l?.5:e,f=2*c-1,m=i.a-r.a,p=((f*m===-1?f:(f+m)/(1+f*m))+1)/2;l=1-p,i.r=255&p*i.r+l*r.r+.5,i.g=255&p*i.g+l*r.g+.5,i.b=255&p*i.b+l*r.b+.5,i.a=c*i.a+(1-c)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=pz(this._rgb,t._rgb,e)),this}clone(){return new Jh(this.rgb)}alpha(t){return this._rgb.a=Oo(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=vf(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Od(this._rgb,2,t),this}darken(t){return Od(this._rgb,2,-t),this}saturate(t){return Od(this._rgb,1,t),this}desaturate(t){return Od(this._rgb,1,-t),this}rotate(t){return lz(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function sa(){}const _z=(()=>{let n=0;return()=>n++})();function ni(n){return n==null}function Un(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function pe(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ta(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function yr(n,t){return Ta(n)?n:t}function Se(n,t){return typeof n>"u"?t:n}const yz=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,LR=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Ue(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function we(n,t,e,i){let r,l,c;if(Un(n))for(l=n.length,r=0;r<l;r++)t.call(e,n[r],r);else if(pe(n))for(c=Object.keys(n),l=c.length,r=0;r<l;r++)t.call(e,n[c[r]],c[r])}function Am(n,t){let e,i,r,l;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],l=t[e],r.datasetIndex!==l.datasetIndex||r.index!==l.index)return!1;return!0}function Rm(n){if(Un(n))return n.map(Rm);if(pe(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=Rm(n[e[r]]);return t}return n}function NR(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function vz(n,t,e,i){if(!NR(n))return;const r=t[n],l=e[n];pe(r)&&pe(l)?tf(r,l,i):t[n]=Rm(l)}function tf(n,t,e){const i=Un(t)?t:[t],r=i.length;if(!pe(n))return n;e=e||{};const l=e.merger||vz;let c;for(let f=0;f<r;++f){if(c=i[f],!pe(c))continue;const m=Object.keys(c);for(let p=0,v=m.length;p<v;++p)l(m[p],n,c,e)}return n}function kh(n,t){return tf(n,t,{merger:bz})}function bz(n,t,e){if(!NR(n))return;const i=t[n],r=e[n];pe(i)&&pe(r)?kh(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Rm(r))}const eS={"":n=>n,x:n=>n.x,y:n=>n.y};function Tz(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function Ez(n){const t=Tz(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function ef(n,t){return(eS[t]||(eS[t]=Ez(t)))(n)}function Gv(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Im=n=>typeof n<"u",jo=n=>typeof n=="function",nS=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function wz(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const He=Math.PI,mn=2*He,Cm=Number.POSITIVE_INFINITY,Sz=He/180,vn=He/2,Pl=He/4,iS=He*2/3,sS=Math.sign;function xz(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,l)=>r-l).pop(),t}function Az(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Pm(n){return!Az(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Vl(n){return n*(He/180)}function Rz(n){return n*(180/He)}function VR(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let l=Math.atan2(i,e);return l<-.5*He&&(l+=mn),{angle:l,distance:r}}function Iz(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Er(n){return(n%mn+mn)%mn}function Mm(n,t,e,i){const r=Er(n),l=Er(t),c=Er(e),f=Er(l-r),m=Er(c-r),p=Er(r-l),v=Er(r-c);return r===l||r===c||i&&l===c||f>m&&p<v}function bs(n,t,e){return Math.max(t,Math.min(e,n))}function Cz(n){return bs(n,-32768,32767)}function Eh(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Zv(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,r=0,l;for(;i-r>1;)l=r+i>>1,e(l)?r=l:i=l;return{lo:r,hi:i}}const my=(n,t,e,i)=>Zv(n,e,i?r=>{const l=n[r][t];return l<e||l===e&&n[r+1][t]===e}:r=>n[r][t]<e),Pz=(n,t,e)=>Zv(n,e,i=>n[i][t]>=e);function Mz(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const zR=["push","pop","shift","splice","unshift"];function Oz(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),zR.forEach(e=>{const i="_onData"+Gv(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...l){const c=r.apply(this,l);return n._chartjs.listeners.forEach(f=>{typeof f[i]=="function"&&f[i](...l)}),c}})})}function rS(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(zR.forEach(l=>{delete n[l]}),delete n._chartjs)}function Dz(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const BR=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function UR(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,BR.call(window,()=>{i=!1,n.apply(t,e)}))}}function kz(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const jR=n=>n==="start"?"left":n==="end"?"right":"center",$i=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,Lz=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,Dd=n=>n===0||n===1,aS=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*mn/e)),oS=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*mn/e)+1,Lh={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*vn)+1,easeOutSine:n=>Math.sin(n*vn),easeInOutSine:n=>-.5*(Math.cos(He*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Dd(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Dd(n)?n:aS(n,.075,.3),easeOutElastic:n=>Dd(n)?n:oS(n,.075,.3),easeInOutElastic(n){return Dd(n)?n:n<.5?.5*aS(n*2,.1125,.45):.5+.5*oS(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Lh.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Lh.easeInBounce(n*2)*.5:Lh.easeOutBounce(n*2-1)*.5+.5};function HR(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function lS(n){return HR(n)?n:new Jh(n)}function w_(n){return HR(n)?n:new Jh(n).saturate(.5).darken(.1).hexString()}const Nz=["x","y","borderWidth","radius","tension"],Vz=["color","borderColor","backgroundColor"];function zz(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Vz},numbers:{type:"number",properties:Nz}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Bz(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const uS=new Map;function Uz(n,t){t=t||{};const e=n+JSON.stringify(t);let i=uS.get(e);return i||(i=new Intl.NumberFormat(n,t),uS.set(e,i)),i}function jz(n,t,e){return Uz(t,e).format(n)}const Hz={values(n){return Un(n)?n:""+n}};var Fz={formatters:Hz};function qz(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Fz.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Zl=Object.create(null),py=Object.create(null);function Nh(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const l=e[i];n=n[l]||(n[l]=Object.create(null))}return n}function S_(n,t,e){return typeof t=="string"?tf(Nh(n,t),e):tf(Nh(n,""),t)}class Gz{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>w_(r.backgroundColor),this.hoverBorderColor=(i,r)=>w_(r.borderColor),this.hoverColor=(i,r)=>w_(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return S_(this,t,e)}get(t){return Nh(this,t)}describe(t,e){return S_(py,t,e)}override(t,e){return S_(Zl,t,e)}route(t,e,i,r){const l=Nh(this,t),c=Nh(this,i),f="_"+e;Object.defineProperties(l,{[f]:{value:l[e],writable:!0},[e]:{enumerable:!0,get(){const m=this[f],p=c[r];return pe(m)?Object.assign({},p,m):Se(m,p)},set(m){this[f]=m}}})}apply(t){t.forEach(e=>e(this))}}var an=new Gz({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[zz,Bz,qz]);function Zz(n){return!n||ni(n.size)||ni(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function cS(n,t,e,i,r){let l=t[r];return l||(l=t[r]=n.measureText(r).width,e.push(r)),l>i&&(i=l),i}function Ml(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function hS(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function fS(n,t,e,i){FR(n,t,e,i,null)}function FR(n,t,e,i,r){let l,c,f,m,p,v,E,S;const I=t.pointStyle,P=t.rotation,k=t.radius;let O=(P||0)*Sz;if(I&&typeof I=="object"&&(l=I.toString(),l==="[object HTMLImageElement]"||l==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(O),n.drawImage(I,-I.width/2,-I.height/2,I.width,I.height),n.restore();return}if(!(isNaN(k)||k<=0)){switch(n.beginPath(),I){default:r?n.ellipse(e,i,r/2,k,0,0,mn):n.arc(e,i,k,0,mn),n.closePath();break;case"triangle":v=r?r/2:k,n.moveTo(e+Math.sin(O)*v,i-Math.cos(O)*k),O+=iS,n.lineTo(e+Math.sin(O)*v,i-Math.cos(O)*k),O+=iS,n.lineTo(e+Math.sin(O)*v,i-Math.cos(O)*k),n.closePath();break;case"rectRounded":p=k*.516,m=k-p,c=Math.cos(O+Pl)*m,E=Math.cos(O+Pl)*(r?r/2-p:m),f=Math.sin(O+Pl)*m,S=Math.sin(O+Pl)*(r?r/2-p:m),n.arc(e-E,i-f,p,O-He,O-vn),n.arc(e+S,i-c,p,O-vn,O),n.arc(e+E,i+f,p,O,O+vn),n.arc(e-S,i+c,p,O+vn,O+He),n.closePath();break;case"rect":if(!P){m=Math.SQRT1_2*k,v=r?r/2:m,n.rect(e-v,i-m,2*v,2*m);break}O+=Pl;case"rectRot":E=Math.cos(O)*(r?r/2:k),c=Math.cos(O)*k,f=Math.sin(O)*k,S=Math.sin(O)*(r?r/2:k),n.moveTo(e-E,i-f),n.lineTo(e+S,i-c),n.lineTo(e+E,i+f),n.lineTo(e-S,i+c),n.closePath();break;case"crossRot":O+=Pl;case"cross":E=Math.cos(O)*(r?r/2:k),c=Math.cos(O)*k,f=Math.sin(O)*k,S=Math.sin(O)*(r?r/2:k),n.moveTo(e-E,i-f),n.lineTo(e+E,i+f),n.moveTo(e+S,i-c),n.lineTo(e-S,i+c);break;case"star":E=Math.cos(O)*(r?r/2:k),c=Math.cos(O)*k,f=Math.sin(O)*k,S=Math.sin(O)*(r?r/2:k),n.moveTo(e-E,i-f),n.lineTo(e+E,i+f),n.moveTo(e+S,i-c),n.lineTo(e-S,i+c),O+=Pl,E=Math.cos(O)*(r?r/2:k),c=Math.cos(O)*k,f=Math.sin(O)*k,S=Math.sin(O)*(r?r/2:k),n.moveTo(e-E,i-f),n.lineTo(e+E,i+f),n.moveTo(e+S,i-c),n.lineTo(e-S,i+c);break;case"line":c=r?r/2:Math.cos(O)*k,f=Math.sin(O)*k,n.moveTo(e-c,i-f),n.lineTo(e+c,i+f);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(O)*(r?r/2:k),i+Math.sin(O)*k);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function qR(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Wv(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Yv(n){n.restore()}function Wz(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ni(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function Yz(n,t,e,i,r){if(r.strikethrough||r.underline){const l=n.measureText(i),c=t-l.actualBoundingBoxLeft,f=t+l.actualBoundingBoxRight,m=e-l.actualBoundingBoxAscent,p=e+l.actualBoundingBoxDescent,v=r.strikethrough?(m+p)/2:p;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(c,v),n.lineTo(f,v),n.stroke()}}function $z(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Om(n,t,e,i,r,l={}){const c=Un(t)?t:[t],f=l.strokeWidth>0&&l.strokeColor!=="";let m,p;for(n.save(),n.font=r.string,Wz(n,l),m=0;m<c.length;++m)p=c[m],l.backdrop&&$z(n,l.backdrop),f&&(l.strokeColor&&(n.strokeStyle=l.strokeColor),ni(l.strokeWidth)||(n.lineWidth=l.strokeWidth),n.strokeText(p,e,i,l.maxWidth)),n.fillText(p,e,i,l.maxWidth),Yz(n,e,i,p,l),i+=Number(r.lineHeight);n.restore()}function gy(n,t){const{x:e,y:i,w:r,h:l,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,1.5*He,He,!0),n.lineTo(e,i+l-c.bottomLeft),n.arc(e+c.bottomLeft,i+l-c.bottomLeft,c.bottomLeft,He,vn,!0),n.lineTo(e+r-c.bottomRight,i+l),n.arc(e+r-c.bottomRight,i+l-c.bottomRight,c.bottomRight,vn,0,!0),n.lineTo(e+r,i+c.topRight),n.arc(e+r-c.topRight,i+c.topRight,c.topRight,0,-vn,!0),n.lineTo(e+c.topLeft,i)}const Kz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Xz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Qz(n,t){const e=(""+n).match(Kz);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const Jz=n=>+n||0;function $v(n,t){const e={},i=pe(t),r=i?Object.keys(t):t,l=pe(n)?i?c=>Se(n[c],n[t[c]]):c=>n[c]:()=>n;for(const c of r)e[c]=Jz(l(c));return e}function t6(n){return $v(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Vh(n){return $v(n,["topLeft","topRight","bottomLeft","bottomRight"])}function $s(n){const t=t6(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function xi(n,t){n=n||{},t=t||an.font;let e=Se(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Se(n.style,t.style);i&&!(""+i).match(Xz)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Se(n.family,t.family),lineHeight:Qz(Se(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Se(n.weight,t.weight),string:""};return r.string=Zz(r),r}function kd(n,t,e,i){let r,l,c;for(r=0,l=n.length;r<l;++r)if(c=n[r],c!==void 0&&c!==void 0)return c}function e6(n,t,e){const{min:i,max:r}=n,l=LR(t,(r-i)/2),c=(f,m)=>e&&f===0?0:f+m;return{min:c(i,-Math.abs(l)),max:c(r,l)}}function pc(n,t){return Object.assign(Object.create(n),t)}function Kv(n,t=[""],e,i,r=()=>n[0]){const l=e||n;typeof i>"u"&&(i=YR("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:l,_fallback:i,_getTarget:r,override:f=>Kv([f,...n],t,l,i)};return new Proxy(c,{deleteProperty(f,m){return delete f[m],delete f._keys,delete n[0][m],!0},get(f,m){return ZR(f,m,()=>u6(m,t,n,f))},getOwnPropertyDescriptor(f,m){return Reflect.getOwnPropertyDescriptor(f._scopes[0],m)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(f,m){return mS(f).includes(m)},ownKeys(f){return mS(f)},set(f,m,p){const v=f._storage||(f._storage=r());return f[m]=v[m]=p,delete f._keys,!0}})}function sc(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:GR(n,i),setContext:l=>sc(n,l,e,i),override:l=>sc(n.override(l),t,e,i)};return new Proxy(r,{deleteProperty(l,c){return delete l[c],delete n[c],!0},get(l,c,f){return ZR(l,c,()=>i6(l,c,f))},getOwnPropertyDescriptor(l,c){return l._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(l,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(l,c,f){return n[c]=f,delete l[c],!0}})}function GR(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:jo(e)?e:()=>e,isIndexable:jo(i)?i:()=>i}}const n6=(n,t)=>n?n+Gv(t):t,Xv=(n,t)=>pe(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function ZR(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function i6(n,t,e){const{_proxy:i,_context:r,_subProxy:l,_descriptors:c}=n;let f=i[t];return jo(f)&&c.isScriptable(t)&&(f=s6(t,f,n,e)),Un(f)&&f.length&&(f=r6(t,f,n,c.isIndexable)),Xv(t,f)&&(f=sc(f,r,l&&l[t],c)),f}function s6(n,t,e,i){const{_proxy:r,_context:l,_subProxy:c,_stack:f}=e;if(f.has(n))throw new Error("Recursion detected: "+Array.from(f).join("->")+"->"+n);f.add(n);let m=t(l,c||i);return f.delete(n),Xv(n,m)&&(m=Qv(r._scopes,r,n,m)),m}function r6(n,t,e,i){const{_proxy:r,_context:l,_subProxy:c,_descriptors:f}=e;if(typeof l.index<"u"&&i(n))return t[l.index%t.length];if(pe(t[0])){const m=t,p=r._scopes.filter(v=>v!==m);t=[];for(const v of m){const E=Qv(p,r,n,v);t.push(sc(E,l,c&&c[n],f))}}return t}function WR(n,t,e){return jo(n)?n(t,e):n}const a6=(n,t)=>n===!0?t:typeof n=="string"?ef(t,n):void 0;function o6(n,t,e,i,r){for(const l of t){const c=a6(e,l);if(c){n.add(c);const f=WR(c._fallback,e,r);if(typeof f<"u"&&f!==e&&f!==i)return f}else if(c===!1&&typeof i<"u"&&e!==i)return null}return!1}function Qv(n,t,e,i){const r=t._rootScopes,l=WR(t._fallback,e,i),c=[...n,...r],f=new Set;f.add(i);let m=dS(f,c,e,l||e,i);return m===null||typeof l<"u"&&l!==e&&(m=dS(f,c,l,m,i),m===null)?!1:Kv(Array.from(f),[""],r,l,()=>l6(t,e,i))}function dS(n,t,e,i,r){for(;e;)e=o6(n,t,e,i,r);return e}function l6(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return Un(r)&&pe(e)?e:r||{}}function u6(n,t,e,i){let r;for(const l of t)if(r=YR(n6(l,n),e),typeof r<"u")return Xv(n,r)?Qv(e,i,n,r):r}function YR(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function mS(n){let t=n._keys;return t||(t=n._keys=c6(n._scopes)),t}function c6(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function Jv(){return typeof window<"u"&&typeof document<"u"}function t0(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Dm(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const yp=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function h6(n,t){return yp(n).getPropertyValue(t)}const f6=["top","right","bottom","left"];function Bl(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const l=f6[r];i[l]=parseFloat(n[t+"-"+l+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const d6=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function m6(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:l}=i;let c=!1,f,m;if(d6(r,l,n.target))f=r,m=l;else{const p=t.getBoundingClientRect();f=i.clientX-p.left,m=i.clientY-p.top,c=!0}return{x:f,y:m,box:c}}function kl(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=yp(e),l=r.boxSizing==="border-box",c=Bl(r,"padding"),f=Bl(r,"border","width"),{x:m,y:p,box:v}=m6(n,e),E=c.left+(v&&f.left),S=c.top+(v&&f.top);let{width:I,height:P}=t;return l&&(I-=c.width+f.width,P-=c.height+f.height),{x:Math.round((m-E)/I*e.width/i),y:Math.round((p-S)/P*e.height/i)}}function p6(n,t,e){let i,r;if(t===void 0||e===void 0){const l=n&&t0(n);if(!l)t=n.clientWidth,e=n.clientHeight;else{const c=l.getBoundingClientRect(),f=yp(l),m=Bl(f,"border","width"),p=Bl(f,"padding");t=c.width-p.width-m.width,e=c.height-p.height-m.height,i=Dm(f.maxWidth,l,"clientWidth"),r=Dm(f.maxHeight,l,"clientHeight")}}return{width:t,height:e,maxWidth:i||Cm,maxHeight:r||Cm}}const Ld=n=>Math.round(n*10)/10;function g6(n,t,e,i){const r=yp(n),l=Bl(r,"margin"),c=Dm(r.maxWidth,n,"clientWidth")||Cm,f=Dm(r.maxHeight,n,"clientHeight")||Cm,m=p6(n,t,e);let{width:p,height:v}=m;if(r.boxSizing==="content-box"){const S=Bl(r,"border","width"),I=Bl(r,"padding");p-=I.width+S.width,v-=I.height+S.height}return p=Math.max(0,p-l.width),v=Math.max(0,i?p/i:v-l.height),p=Ld(Math.min(p,c,m.maxWidth)),v=Ld(Math.min(v,f,m.maxHeight)),p&&!v&&(v=Ld(p/2)),(t!==void 0||e!==void 0)&&i&&m.height&&v>m.height&&(v=m.height,p=Ld(Math.floor(v*i))),{width:p,height:v}}function pS(n,t,e){const i=t||1,r=Math.floor(n.height*i),l=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==r||c.width!==l?(n.currentDevicePixelRatio=i,c.height=r,c.width=l,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const _6=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Jv()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function gS(n,t){const e=h6(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const y6=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},v6=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function $u(n,t,e){return n?y6(t,e):v6()}function $R(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function KR(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Nd(n,t,e){return n.options.clip?n[e]:t[e]}function b6(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Nd(e,t,"left"),right:Nd(e,t,"right"),top:Nd(i,t,"top"),bottom:Nd(i,t,"bottom")}:t}function T6(n,t){const e=t._clip;if(e.disabled)return!1;const i=b6(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class E6{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const l=e.listeners[r],c=e.duration;l.forEach(f=>f({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=BR.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const l=i.items;let c=l.length-1,f=!1,m;for(;c>=0;--c)m=l[c],m._active?(m._total>i.duration&&(i.duration=m._total),m.tick(t),f=!0):(l[c]=l[l.length-1],l.pop());f&&(r.draw(),this._notify(r,i,t,"progress")),l.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=l.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var aa=new E6;const _S="transparent",w6={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=lS(n||_S),r=i.valid&&lS(t||_S);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class S6{constructor(t,e,i,r){const l=e[i];r=kd([t.to,r,l,t.from]);const c=kd([t.from,l,r]);this._active=!0,this._fn=t.fn||w6[t.type||typeof c],this._easing=Lh[t.easing]||Lh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],l=i-this._start,c=this._duration-l;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=l,this._loop=!!t.loop,this._to=kd([t.to,e,r,t.from]),this._from=kd([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,l=this._from,c=this._loop,f=this._to;let m;if(this._active=l!==f&&(c||e<i),!this._active){this._target[r]=f,this._notify(!0);return}if(e<0){this._target[r]=l;return}m=e/i%2,m=c&&m>1?2-m:m,m=this._easing(Math.min(1,Math.max(0,m))),this._target[r]=this._fn(l,f,m)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class XR{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!pe(t))return;const e=Object.keys(an.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const l=t[r];if(!pe(l))return;const c={};for(const f of e)c[f]=l[f];(Un(l.properties)&&l.properties||[r]).forEach(f=>{(f===r||!i.has(f))&&i.set(f,c)})})}_animateOptions(t,e){const i=e.options,r=A6(t,i);if(!r)return[];const l=this._createAnimations(r,i);return i.$shared&&x6(t.options.$animations,i).then(()=>{t.options=i},()=>{}),l}_createAnimations(t,e){const i=this._properties,r=[],l=t.$animations||(t.$animations={}),c=Object.keys(e),f=Date.now();let m;for(m=c.length-1;m>=0;--m){const p=c[m];if(p.charAt(0)==="$")continue;if(p==="options"){r.push(...this._animateOptions(t,e));continue}const v=e[p];let E=l[p];const S=i.get(p);if(E)if(S&&E.active()){E.update(S,v,f);continue}else E.cancel();if(!S||!S.duration){t[p]=v;continue}l[p]=E=new S6(S,t,p,v),r.push(E)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return aa.add(this._chart,i),!0}}function x6(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const l=n[i[r]];l&&l.active()&&e.push(l.wait())}return Promise.all(e)}function A6(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function yS(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,l=e.max===void 0?t:0;return{start:i?l:r,end:i?r:l}}function R6(n,t,e){if(e===!1)return!1;const i=yS(n,e),r=yS(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function I6(n){let t,e,i,r;return pe(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function QR(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,l;for(r=0,l=i.length;r<l;++r)e.push(i[r].index);return e}function vS(n,t,e,i={}){const r=n.keys,l=i.mode==="single";let c,f,m,p;if(t===null)return;let v=!1;for(c=0,f=r.length;c<f;++c){if(m=+r[c],m===e){if(v=!0,i.all)continue;break}p=n.values[m],Ta(p)&&(l||t===0||sS(t)===sS(p))&&(t+=p)}return!v&&!i.all?0:t}function C6(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",l=i.axis==="x"?"x":"y",c=Object.keys(n),f=new Array(c.length);let m,p,v;for(m=0,p=c.length;m<p;++m)v=c[m],f[m]={[r]:v,[l]:n[v]};return f}function x_(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function P6(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function M6(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function O6(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function bS(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const l=n[r.index];if(e&&l>0||!e&&l<0)return r.index}return null}function TS(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:l,vScale:c,index:f}=i,m=l.axis,p=c.axis,v=P6(l,c,i),E=t.length;let S;for(let I=0;I<E;++I){const P=t[I],{[m]:k,[p]:O}=P,B=P._stacks||(P._stacks={});S=B[p]=O6(r,v,k),S[f]=O,S._top=bS(S,c,!0,i.type),S._bottom=bS(S,c,!1,i.type);const F=S._visualValues||(S._visualValues={});F[f]=O}}function A_(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function D6(n,t){return pc(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function k6(n,t,e){return pc(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function lh(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const l=r._stacks;if(!l||l[i]===void 0||l[i][e]===void 0)return;delete l[i][e],l[i]._visualValues!==void 0&&l[i]._visualValues[e]!==void 0&&delete l[i]._visualValues[e]}}}const R_=n=>n==="reset"||n==="none",ES=(n,t)=>t?n:Object.assign({},n),L6=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:QR(e,!0),values:null};class zh{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=x_(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&lh(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(E,S,I,P)=>E==="x"?S:E==="r"?P:I,l=e.xAxisID=Se(i.xAxisID,A_(t,"x")),c=e.yAxisID=Se(i.yAxisID,A_(t,"y")),f=e.rAxisID=Se(i.rAxisID,A_(t,"r")),m=e.indexAxis,p=e.iAxisID=r(m,l,c,f),v=e.vAxisID=r(m,c,l,f);e.xScale=this.getScaleForId(l),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(f),e.iScale=this.getScaleForId(p),e.vScale=this.getScaleForId(v)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&rS(this._data,this),t._stacked&&lh(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(pe(e)){const r=this._cachedMeta;this._data=C6(e,r)}else if(i!==e){if(i){rS(i,this);const r=this._cachedMeta;lh(r),r._parsed=[]}e&&Object.isExtensible(e)&&Oz(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const l=e._stacked;e._stacked=x_(e.vScale,e),e.stack!==i.stack&&(r=!0,lh(e),e.stack=i.stack),this._resyncElements(t),(r||l!==e._stacked)&&(TS(this,e._parsed),e._stacked=x_(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:l,_stacked:c}=i,f=l.axis;let m=t===0&&e===r.length?!0:i._sorted,p=t>0&&i._parsed[t-1],v,E,S;if(this._parsing===!1)i._parsed=r,i._sorted=!0,S=r;else{Un(r[t])?S=this.parseArrayData(i,r,t,e):pe(r[t])?S=this.parseObjectData(i,r,t,e):S=this.parsePrimitiveData(i,r,t,e);const I=()=>E[f]===null||p&&E[f]<p[f];for(v=0;v<e;++v)i._parsed[v+t]=E=S[v],m&&(I()&&(m=!1),p=E);i._sorted=m}c&&TS(this,S)}parsePrimitiveData(t,e,i,r){const{iScale:l,vScale:c}=t,f=l.axis,m=c.axis,p=l.getLabels(),v=l===c,E=new Array(r);let S,I,P;for(S=0,I=r;S<I;++S)P=S+i,E[S]={[f]:v||l.parse(p[P],P),[m]:c.parse(e[P],P)};return E}parseArrayData(t,e,i,r){const{xScale:l,yScale:c}=t,f=new Array(r);let m,p,v,E;for(m=0,p=r;m<p;++m)v=m+i,E=e[v],f[m]={x:l.parse(E[0],v),y:c.parse(E[1],v)};return f}parseObjectData(t,e,i,r){const{xScale:l,yScale:c}=t,{xAxisKey:f="x",yAxisKey:m="y"}=this._parsing,p=new Array(r);let v,E,S,I;for(v=0,E=r;v<E;++v)S=v+i,I=e[S],p[v]={x:l.parse(ef(I,f),S),y:c.parse(ef(I,m),S)};return p}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,l=this._cachedMeta,c=e[t.axis],f={keys:QR(r,!0),values:e._stacks[t.axis]._visualValues};return vS(f,c,l.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const l=i[e.axis];let c=l===null?NaN:l;const f=r&&i._stacks[e.axis];r&&f&&(r.values=f,c=vS(r,l,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,l=i._sorted&&t===i.iScale,c=r.length,f=this._getOtherScale(t),m=L6(e,i,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:v,max:E}=M6(f);let S,I;function P(){I=r[S];const k=I[f.axis];return!Ta(I[t.axis])||v>k||E<k}for(S=0;S<c&&!(!P()&&(this.updateRangeFromParsed(p,t,I,m),l));++S);if(l){for(S=c-1;S>=0;--S)if(!P()){this.updateRangeFromParsed(p,t,I,m);break}}return p}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,l,c;for(r=0,l=e.length;r<l;++r)c=e[r][t.axis],Ta(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,l=this.getParsed(t);return{label:i?""+i.getLabelForValue(l[i.axis]):"",value:r?""+r.getLabelForValue(l[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=I6(Se(this.options.clip,R6(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],l=e.chartArea,c=[],f=this._drawStart||0,m=this._drawCount||r.length-f,p=this.options.drawActiveElementsOnTop;let v;for(i.dataset&&i.dataset.draw(t,l,f,m),v=f;v<f+m;++v){const E=r[v];E.hidden||(E.active&&p?c.push(E):E.draw(t,l))}for(v=0;v<c.length;++v)c[v].draw(t,l)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let l;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];l=c.$context||(c.$context=k6(this.getContext(),t,c)),l.parsed=this.getParsed(t),l.raw=r.data[t],l.index=l.dataIndex=t}else l=this.$context||(this.$context=D6(this.chart.getContext(),this.index)),l.dataset=r,l.index=l.datasetIndex=this.index;return l.active=!!e,l.mode=i,l}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",l=this._cachedDataOpts,c=t+"-"+e,f=l[c],m=this.enableOptionSharing&&Im(i);if(f)return ES(f,m);const p=this.chart.config,v=p.datasetElementScopeKeys(this._type,t),E=r?[`${t}Hover`,"hover",t,""]:[t,""],S=p.getOptionScopes(this.getDataset(),v),I=Object.keys(an.elements[t]),P=()=>this.getContext(i,r,e),k=p.resolveNamedOptions(S,I,P,E);return k.$shared&&(k.$shared=m,l[c]=Object.freeze(ES(k,m))),k}_resolveAnimations(t,e,i){const r=this.chart,l=this._cachedDataOpts,c=`animation-${e}`,f=l[c];if(f)return f;let m;if(r.options.animation!==!1){const v=this.chart.config,E=v.datasetAnimationScopeKeys(this._type,e),S=v.getOptionScopes(this.getDataset(),E);m=v.createResolver(S,this.getContext(t,i,e))}const p=new XR(r,m&&m.animations);return m&&m._cacheable&&(l[c]=Object.freeze(p)),p}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||R_(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,l=this.getSharedOptions(i),c=this.includeOptions(e,l)||l!==r;return this.updateSharedOptions(l,e,i),{sharedOptions:l,includeOptions:c}}updateElement(t,e,i,r){R_(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!R_(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const l=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(l)||l})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[f,m,p]of this._syncList)this[f](m,p);this._syncList=[];const r=i.length,l=e.length,c=Math.min(l,r);c&&this.parse(0,c),l>r?this._insertElements(r,l-r,t):l<r&&this._removeElements(l,r-l)}_insertElements(t,e,i=!0){const r=this._cachedMeta,l=r.data,c=t+e;let f;const m=p=>{for(p.length+=e,f=p.length-1;f>=c;f--)p[f]=p[f-e]};for(m(l),f=t;f<c;++f)l[f]=new this.dataElementType;this._parsing&&m(r._parsed),this.parse(t,e),i&&this.updateElements(l,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&lh(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Xt(zh,"defaults",{}),Xt(zh,"datasetElementType",null),Xt(zh,"dataElementType",null);function N6(n,t,e){let i=1,r=1,l=0,c=0;if(t<mn){const f=n,m=f+t,p=Math.cos(f),v=Math.sin(f),E=Math.cos(m),S=Math.sin(m),I=($,nt,J)=>Mm($,f,m,!0)?1:Math.max(nt,nt*e,J,J*e),P=($,nt,J)=>Mm($,f,m,!0)?-1:Math.min(nt,nt*e,J,J*e),k=I(0,p,E),O=I(vn,v,S),B=P(He,p,E),F=P(He+vn,v,S);i=(k-B)/2,r=(O-F)/2,l=-(k+B)/2,c=-(O+F)/2}return{ratioX:i,ratioY:r,offsetX:l,offsetY:c}}class wh extends zh{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let l=m=>+i[m];if(pe(i[t])){const{key:m="value"}=this._parsing;l=p=>+ef(i[p],m)}let c,f;for(c=t,f=t+e;c<f;++c)r._parsed[c]=l(c)}}_getRotation(){return Vl(this.options.rotation-90)}_getCircumference(){return Vl(this.options.circumference)}_getRotationExtents(){let t=mn,e=-mn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,l=r._getRotation(),c=r._getCircumference();t=Math.min(t,l),e=Math.max(e,l+c)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,r=this._cachedMeta,l=r.data,c=this.getMaxBorderWidth()+this.getMaxOffset(l)+this.options.spacing,f=Math.max((Math.min(i.width,i.height)-c)/2,0),m=Math.min(yz(this.options.cutout,f),1),p=this._getRingWeight(this.index),{circumference:v,rotation:E}=this._getRotationExtents(),{ratioX:S,ratioY:I,offsetX:P,offsetY:k}=N6(E,v,m),O=(i.width-c)/S,B=(i.height-c)/I,F=Math.max(Math.min(O,B)/2,0),$=LR(this.options.radius,F),nt=Math.max($*m,0),J=($-nt)/this._getVisibleDatasetWeightTotal();this.offsetX=P*$,this.offsetY=k*$,r.total=this.calculateTotal(),this.outerRadius=$-J*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-J*p,0),this.updateElements(l,0,l.length,t)}_circumference(t,e){const i=this.options,r=this._cachedMeta,l=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*l/mn)}updateElements(t,e,i,r){const l=r==="reset",c=this.chart,f=c.chartArea,p=c.options.animation,v=(f.left+f.right)/2,E=(f.top+f.bottom)/2,S=l&&p.animateScale,I=S?0:this.innerRadius,P=S?0:this.outerRadius,{sharedOptions:k,includeOptions:O}=this._getSharedOptions(e,r);let B=this._getRotation(),F;for(F=0;F<e;++F)B+=this._circumference(F,l);for(F=e;F<e+i;++F){const $=this._circumference(F,l),nt=t[F],J={x:v+this.offsetX,y:E+this.offsetY,startAngle:B,endAngle:B+$,circumference:$,outerRadius:P,innerRadius:I};O&&(J.options=k||this.resolveDataElementOptions(F,nt.active?"active":r)),B+=$,this.updateElement(nt,F,J,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,r;for(r=0;r<e.length;r++){const l=t._parsed[r];l!==null&&!isNaN(l)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(i+=Math.abs(l))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?mn*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],l=jz(e._parsed[t],i.options.locale);return{label:r[t]||"",value:l}}getMaxBorderWidth(t){let e=0;const i=this.chart;let r,l,c,f,m;if(!t){for(r=0,l=i.data.datasets.length;r<l;++r)if(i.isDatasetVisible(r)){c=i.getDatasetMeta(r),t=c.data,f=c.controller;break}}if(!t)return 0;for(r=0,l=t.length;r<l;++r)m=f.resolveDataElementOptions(r),m.borderAlign!=="inner"&&(e=Math.max(e,m.borderWidth||0,m.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){const l=this.resolveDataElementOptions(i);e=Math.max(e,l.offset||0,l.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(Se(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Xt(wh,"id","doughnut"),Xt(wh,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Xt(wh,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),Xt(wh,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((l,c)=>{const m=t.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,fontColor:r,lineWidth:m.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class _y extends wh{}Xt(_y,"id","pie"),Xt(_y,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Ol(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class e0{constructor(t){Xt(this,"options");this.options=t||{}}static override(t){Object.assign(e0.prototype,t)}init(){}formats(){return Ol()}parse(){return Ol()}format(){return Ol()}add(){return Ol()}diff(){return Ol()}startOf(){return Ol()}endOf(){return Ol()}}var V6={_date:e0};function z6(n,t,e,i){const{controller:r,data:l,_sorted:c}=n,f=r._cachedMeta.iScale,m=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(f&&t===f.axis&&t!=="r"&&c&&l.length){const p=f._reversePixels?Pz:my;if(i){if(r._sharedOptions){const v=l[0],E=typeof v.getRange=="function"&&v.getRange(t);if(E){const S=p(l,t,e-E),I=p(l,t,e+E);return{lo:S.lo,hi:I.hi}}}}else{const v=p(l,t,e);if(m){const{vScale:E}=r._cachedMeta,{_parsed:S}=n,I=S.slice(0,v.lo+1).reverse().findIndex(k=>!ni(k[E.axis]));v.lo-=Math.max(0,I);const P=S.slice(v.hi).findIndex(k=>!ni(k[E.axis]));v.hi+=Math.max(0,P)}return v}}return{lo:0,hi:l.length-1}}function vp(n,t,e,i,r){const l=n.getSortedVisibleDatasetMetas(),c=e[t];for(let f=0,m=l.length;f<m;++f){const{index:p,data:v}=l[f],{lo:E,hi:S}=z6(l[f],t,c,r);for(let I=E;I<=S;++I){const P=v[I];P.skip||i(P,p,I)}}}function B6(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const l=t?Math.abs(i.x-r.x):0,c=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(c,2))}}function I_(n,t,e,i,r){const l=[];return!r&&!n.isPointInArea(t)||vp(n,e,t,function(f,m,p){!r&&!qR(f,n.chartArea,0)||f.inRange(t.x,t.y,i)&&l.push({element:f,datasetIndex:m,index:p})},!0),l}function U6(n,t,e,i){let r=[];function l(c,f,m){const{startAngle:p,endAngle:v}=c.getProps(["startAngle","endAngle"],i),{angle:E}=VR(c,{x:t.x,y:t.y});Mm(E,p,v)&&r.push({element:c,datasetIndex:f,index:m})}return vp(n,e,t,l),r}function j6(n,t,e,i,r,l){let c=[];const f=B6(e);let m=Number.POSITIVE_INFINITY;function p(v,E,S){const I=v.inRange(t.x,t.y,r);if(i&&!I)return;const P=v.getCenterPoint(r);if(!(!!l||n.isPointInArea(P))&&!I)return;const O=f(t,P);O<m?(c=[{element:v,datasetIndex:E,index:S}],m=O):O===m&&c.push({element:v,datasetIndex:E,index:S})}return vp(n,e,t,p),c}function C_(n,t,e,i,r,l){return!l&&!n.isPointInArea(t)?[]:e==="r"&&!i?U6(n,t,e,r):j6(n,t,e,i,r,l)}function wS(n,t,e,i,r){const l=[],c=e==="x"?"inXRange":"inYRange";let f=!1;return vp(n,e,t,(m,p,v)=>{m[c]&&m[c](t[e],r)&&(l.push({element:m,datasetIndex:p,index:v}),f=f||m.inRange(t.x,t.y,r))}),i&&!f?[]:l}var H6={modes:{index(n,t,e,i){const r=kl(t,n),l=e.axis||"x",c=e.includeInvisible||!1,f=e.intersect?I_(n,r,l,i,c):C_(n,r,l,!1,i,c),m=[];return f.length?(n.getSortedVisibleDatasetMetas().forEach(p=>{const v=f[0].index,E=p.data[v];E&&!E.skip&&m.push({element:E,datasetIndex:p.index,index:v})}),m):[]},dataset(n,t,e,i){const r=kl(t,n),l=e.axis||"xy",c=e.includeInvisible||!1;let f=e.intersect?I_(n,r,l,i,c):C_(n,r,l,!1,i,c);if(f.length>0){const m=f[0].datasetIndex,p=n.getDatasetMeta(m).data;f=[];for(let v=0;v<p.length;++v)f.push({element:p[v],datasetIndex:m,index:v})}return f},point(n,t,e,i){const r=kl(t,n),l=e.axis||"xy",c=e.includeInvisible||!1;return I_(n,r,l,i,c)},nearest(n,t,e,i){const r=kl(t,n),l=e.axis||"xy",c=e.includeInvisible||!1;return C_(n,r,l,e.intersect,i,c)},x(n,t,e,i){const r=kl(t,n);return wS(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=kl(t,n);return wS(n,r,"y",e.intersect,i)}}};const JR=["left","top","right","bottom"];function uh(n,t){return n.filter(e=>e.pos===t)}function SS(n,t){return n.filter(e=>JR.indexOf(e.pos)===-1&&e.box.axis===t)}function ch(n,t){return n.sort((e,i)=>{const r=t?i:e,l=t?e:i;return r.weight===l.weight?r.index-l.index:r.weight-l.weight})}function F6(n){const t=[];let e,i,r,l,c,f;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:l,options:{stack:c,stackWeight:f=1}}=r,t.push({index:e,box:r,pos:l,horizontal:r.isHorizontal(),weight:r.weight,stack:c&&l+c,stackWeight:f});return t}function q6(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:l}=e;if(!i||!JR.includes(r))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=l}return t}function G6(n,t){const e=q6(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let l,c,f;for(l=0,c=n.length;l<c;++l){f=n[l];const{fullSize:m}=f.box,p=e[f.stack],v=p&&f.stackWeight/p.weight;f.horizontal?(f.width=v?v*i:m&&t.availableWidth,f.height=r):(f.width=i,f.height=v?v*r:m&&t.availableHeight)}return e}function Z6(n){const t=F6(n),e=ch(t.filter(p=>p.box.fullSize),!0),i=ch(uh(t,"left"),!0),r=ch(uh(t,"right")),l=ch(uh(t,"top"),!0),c=ch(uh(t,"bottom")),f=SS(t,"x"),m=SS(t,"y");return{fullSize:e,leftAndTop:i.concat(l),rightAndBottom:r.concat(m).concat(c).concat(f),chartArea:uh(t,"chartArea"),vertical:i.concat(r).concat(m),horizontal:l.concat(c).concat(f)}}function xS(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function tI(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function W6(n,t,e,i){const{pos:r,box:l}=e,c=n.maxPadding;if(!pe(r)){e.size&&(n[r]-=e.size);const E=i[e.stack]||{size:0,count:1};E.size=Math.max(E.size,e.horizontal?l.height:l.width),e.size=E.size/E.count,n[r]+=e.size}l.getPadding&&tI(c,l.getPadding());const f=Math.max(0,t.outerWidth-xS(c,n,"left","right")),m=Math.max(0,t.outerHeight-xS(c,n,"top","bottom")),p=f!==n.w,v=m!==n.h;return n.w=f,n.h=m,e.horizontal?{same:p,other:v}:{same:v,other:p}}function Y6(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function $6(n,t){const e=t.maxPadding;function i(r){const l={left:0,top:0,right:0,bottom:0};return r.forEach(c=>{l[c]=Math.max(t[c],e[c])}),l}return i(n?["left","right"]:["top","bottom"])}function Sh(n,t,e,i){const r=[];let l,c,f,m,p,v;for(l=0,c=n.length,p=0;l<c;++l){f=n[l],m=f.box,m.update(f.width||t.w,f.height||t.h,$6(f.horizontal,t));const{same:E,other:S}=W6(t,e,f,i);p|=E&&r.length,v=v||S,m.fullSize||r.push(f)}return p&&Sh(r,t,e,i)||v}function Vd(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function AS(n,t,e,i){const r=e.padding;let{x:l,y:c}=t;for(const f of n){const m=f.box,p=i[f.stack]||{placed:0,weight:1},v=f.stackWeight/p.weight||1;if(f.horizontal){const E=t.w*v,S=p.size||m.height;Im(p.start)&&(c=p.start),m.fullSize?Vd(m,r.left,c,e.outerWidth-r.right-r.left,S):Vd(m,t.left+p.placed,c,E,S),p.start=c,p.placed+=E,c=m.bottom}else{const E=t.h*v,S=p.size||m.width;Im(p.start)&&(l=p.start),m.fullSize?Vd(m,l,r.top,S,e.outerHeight-r.bottom-r.top):Vd(m,l,t.top+p.placed,S,E),p.start=l,p.placed+=E,l=m.right}}t.x=l,t.y=c}var Ao={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=$s(n.options.layout.padding),l=Math.max(t-r.width,0),c=Math.max(e-r.height,0),f=Z6(n.boxes),m=f.vertical,p=f.horizontal;we(n.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const v=m.reduce((k,O)=>O.box.options&&O.box.options.display===!1?k:k+1,0)||1,E=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:l,availableHeight:c,vBoxMaxWidth:l/2/v,hBoxMaxHeight:c/2}),S=Object.assign({},r);tI(S,$s(i));const I=Object.assign({maxPadding:S,w:l,h:c,x:r.left,y:r.top},r),P=G6(m.concat(p),E);Sh(f.fullSize,I,E,P),Sh(m,I,E,P),Sh(p,I,E,P)&&Sh(m,I,E,P),Y6(I),AS(f.leftAndTop,I,E,P),I.x+=I.w,I.y+=I.h,AS(f.rightAndBottom,I,E,P),n.chartArea={left:I.left,top:I.top,right:I.left+I.w,bottom:I.top+I.h,height:I.h,width:I.w},we(f.chartArea,k=>{const O=k.box;Object.assign(O,n.chartArea),O.update(I.w,I.h,{left:0,top:0,right:0,bottom:0})})}};class eI{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class K6 extends eI{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const nm="$chartjs",X6={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},RS=n=>n===null||n==="";function Q6(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[nm]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",RS(r)){const l=gS(n,"width");l!==void 0&&(n.width=l)}if(RS(i))if(n.style.height==="")n.height=n.width/(t||2);else{const l=gS(n,"height");l!==void 0&&(n.height=l)}return n}const nI=_6?{passive:!0}:!1;function J6(n,t,e){n&&n.addEventListener(t,e,nI)}function tB(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,nI)}function eB(n,t){const e=X6[n.type]||n.type,{x:i,y:r}=kl(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function km(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function nB(n,t,e){const i=n.canvas,r=new MutationObserver(l=>{let c=!1;for(const f of l)c=c||km(f.addedNodes,i),c=c&&!km(f.removedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function iB(n,t,e){const i=n.canvas,r=new MutationObserver(l=>{let c=!1;for(const f of l)c=c||km(f.removedNodes,i),c=c&&!km(f.addedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const nf=new Map;let IS=0;function iI(){const n=window.devicePixelRatio;n!==IS&&(IS=n,nf.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function sB(n,t){nf.size||window.addEventListener("resize",iI),nf.set(n,t)}function rB(n){nf.delete(n),nf.size||window.removeEventListener("resize",iI)}function aB(n,t,e){const i=n.canvas,r=i&&t0(i);if(!r)return;const l=UR((f,m)=>{const p=r.clientWidth;e(f,m),p<r.clientWidth&&e()},window),c=new ResizeObserver(f=>{const m=f[0],p=m.contentRect.width,v=m.contentRect.height;p===0&&v===0||l(p,v)});return c.observe(r),sB(n,l),c}function P_(n,t,e){e&&e.disconnect(),t==="resize"&&rB(n)}function oB(n,t,e){const i=n.canvas,r=UR(l=>{n.ctx!==null&&e(eB(l,n))},n);return J6(i,t,r),r}class lB extends eI{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Q6(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[nm])return!1;const i=e[nm].initial;["height","width"].forEach(l=>{const c=i[l];ni(c)?e.removeAttribute(l):e.setAttribute(l,c)});const r=i.style||{};return Object.keys(r).forEach(l=>{e.style[l]=r[l]}),e.width=e.width,delete e[nm],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),c={attach:nB,detach:iB,resize:aB}[e]||oB;r[e]=c(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:P_,detach:P_,resize:P_}[e]||tB)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return g6(t,e,i,r)}isAttached(t){const e=t&&t0(t);return!!(e&&e.isConnected)}}function uB(n){return!Jv()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?K6:lB}var Fd;let bf=(Fd=class{constructor(){Xt(this,"x");Xt(this,"y");Xt(this,"active",!1);Xt(this,"options");Xt(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Pm(this.x)&&Pm(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(l=>{r[l]=i[l]&&i[l].active()?i[l]._to:this[l]}),r}},Xt(Fd,"defaults",{}),Xt(Fd,"defaultRoutes"),Fd);function cB(n,t){const e=n.options.ticks,i=hB(n),r=Math.min(e.maxTicksLimit||i,i),l=e.major.enabled?dB(t):[],c=l.length,f=l[0],m=l[c-1],p=[];if(c>r)return mB(t,p,l,c/r),p;const v=fB(l,t,r);if(c>0){let E,S;const I=c>1?Math.round((m-f)/(c-1)):null;for(zd(t,p,v,ni(I)?0:f-I,f),E=0,S=c-1;E<S;E++)zd(t,p,v,l[E],l[E+1]);return zd(t,p,v,m,ni(I)?t.length:m+I),p}return zd(t,p,v),p}function hB(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function fB(n,t,e){const i=pB(n),r=t.length/e;if(!i)return Math.max(r,1);const l=xz(i);for(let c=0,f=l.length-1;c<f;c++){const m=l[c];if(m>r)return m}return Math.max(r,1)}function dB(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function mB(n,t,e,i){let r=0,l=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===l&&(t.push(n[c]),r++,l=e[r*i])}function zd(n,t,e,i,r){const l=Se(i,0),c=Math.min(Se(r,n.length),n.length);let f=0,m,p,v;for(e=Math.ceil(e),r&&(m=r-i,e=m/Math.floor(m/e)),v=l;v<0;)f++,v=Math.round(l+f*e);for(p=Math.max(l,0);p<c;p++)p===v&&(t.push(n[p]),f++,v=Math.round(l+f*e))}function pB(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const gB=n=>n==="left"?"right":n==="right"?"left":n,CS=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,PS=(n,t)=>Math.min(t||n,n);function MS(n,t){const e=[],i=n.length/t,r=n.length;let l=0;for(;l<r;l+=i)e.push(n[Math.floor(l)]);return e}function _B(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),l=n._startPixel,c=n._endPixel,f=1e-6;let m=n.getPixelForTick(r),p;if(!(e&&(i===1?p=Math.max(m-l,c-m):t===0?p=(n.getPixelForTick(1)-m)/2:p=(m-n.getPixelForTick(r-1))/2,m+=r<t?p:-p,m<l-f||m>c+f)))return m}function yB(n,t){we(n,e=>{const i=e.gc,r=i.length/2;let l;if(r>t){for(l=0;l<r;++l)delete e.data[i[l]];i.splice(0,r)}})}function hh(n){return n.drawTicks?n.tickLength:0}function OS(n,t){if(!n.display)return 0;const e=xi(n.font,t),i=$s(n.padding);return(Un(n.text)?n.text.length:1)*e.lineHeight+i.height}function vB(n,t){return pc(n,{scale:t,type:"scale"})}function bB(n,t,e){return pc(n,{tick:e,index:t,type:"tick"})}function TB(n,t,e){let i=jR(n);return(e&&t!=="right"||!e&&t==="right")&&(i=gB(i)),i}function EB(n,t,e,i){const{top:r,left:l,bottom:c,right:f,chart:m}=n,{chartArea:p,scales:v}=m;let E=0,S,I,P;const k=c-r,O=f-l;if(n.isHorizontal()){if(I=$i(i,l,f),pe(e)){const B=Object.keys(e)[0],F=e[B];P=v[B].getPixelForValue(F)+k-t}else e==="center"?P=(p.bottom+p.top)/2+k-t:P=CS(n,e,t);S=f-l}else{if(pe(e)){const B=Object.keys(e)[0],F=e[B];I=v[B].getPixelForValue(F)-O+t}else e==="center"?I=(p.left+p.right)/2-O+t:I=CS(n,e,t);P=$i(i,c,r),E=e==="left"?-vn:vn}return{titleX:I,titleY:P,maxWidth:S,rotation:E}}class bp extends bf{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=yr(t,Number.POSITIVE_INFINITY),e=yr(e,Number.NEGATIVE_INFINITY),i=yr(i,Number.POSITIVE_INFINITY),r=yr(r,Number.NEGATIVE_INFINITY),{min:yr(t,i),max:yr(e,r),minDefined:Ta(t),maxDefined:Ta(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:l}=this.getUserBounds(),c;if(r&&l)return{min:e,max:i};const f=this.getMatchingVisibleMetas();for(let m=0,p=f.length;m<p;++m)c=f[m].controller.getMinMax(this,t),r||(e=Math.min(e,c.min)),l||(i=Math.max(i,c.max));return e=l&&e>i?i:e,i=r&&e>i?e:i,{min:yr(e,yr(i,e)),max:yr(i,yr(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ue(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:l,ticks:c}=this.options,f=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=e6(this,l,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const m=f<this.ticks.length;this._convertTicksToLabels(m?MS(this.ticks,f):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=cB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),m&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ue(this.options.afterUpdate,[this])}beforeSetDimensions(){Ue(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ue(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ue(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ue(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,l;for(i=0,r=t.length;i<r;i++)l=t[i],l.label=Ue(e.callback,[l.value,i,t],this)}afterTickToLabelConversion(){Ue(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ue(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=PS(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,l=e.maxRotation;let c=r,f,m,p;if(!this._isVisible()||!e.display||r>=l||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const v=this._getLabelSizes(),E=v.widest.width,S=v.highest.height,I=bs(this.chart.width-E,0,this.maxWidth);f=t.offset?this.maxWidth/i:I/(i-1),E+6>f&&(f=I/(i-(t.offset?.5:1)),m=this.maxHeight-hh(t.grid)-e.padding-OS(t.title,this.chart.options.font),p=Math.sqrt(E*E+S*S),c=Rz(Math.min(Math.asin(bs((v.highest.height+6)/f,-1,1)),Math.asin(bs(m/p,-1,1))-Math.asin(bs(S/p,-1,1)))),c=Math.max(r,Math.min(l,c))),this.labelRotation=c}afterCalculateLabelRotation(){Ue(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ue(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:l}}=this,c=this._isVisible(),f=this.isHorizontal();if(c){const m=OS(r,e.options.font);if(f?(t.width=this.maxWidth,t.height=hh(l)+m):(t.height=this.maxHeight,t.width=hh(l)+m),i.display&&this.ticks.length){const{first:p,last:v,widest:E,highest:S}=this._getLabelSizes(),I=i.padding*2,P=Vl(this.labelRotation),k=Math.cos(P),O=Math.sin(P);if(f){const B=i.mirror?0:O*E.width+k*S.height;t.height=Math.min(this.maxHeight,t.height+B+I)}else{const B=i.mirror?0:k*E.width+O*S.height;t.width=Math.min(this.maxWidth,t.width+B+I)}this._calculatePadding(p,v,O,k)}}this._handleMargins(),f?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:l,padding:c},position:f}=this.options,m=this.labelRotation!==0,p=f!=="top"&&this.axis==="x";if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,E=this.right-this.getPixelForTick(this.ticks.length-1);let S=0,I=0;m?p?(S=r*t.width,I=i*e.height):(S=i*t.height,I=r*e.width):l==="start"?I=e.width:l==="end"?S=t.width:l!=="inner"&&(S=t.width/2,I=e.width/2),this.paddingLeft=Math.max((S-v+c)*this.width/(this.width-v),0),this.paddingRight=Math.max((I-E+c)*this.width/(this.width-E),0)}else{let v=e.height/2,E=t.height/2;l==="start"?(v=0,E=t.height):l==="end"&&(v=e.height,E=0),this.paddingTop=v+c,this.paddingBottom=E+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ue(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)ni(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=MS(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:l}=this,c=[],f=[],m=Math.floor(e/PS(e,i));let p=0,v=0,E,S,I,P,k,O,B,F,$,nt,J;for(E=0;E<e;E+=m){if(P=t[E].label,k=this._resolveTickFontOptions(E),r.font=O=k.string,B=l[O]=l[O]||{data:{},gc:[]},F=k.lineHeight,$=nt=0,!ni(P)&&!Un(P))$=cS(r,B.data,B.gc,$,P),nt=F;else if(Un(P))for(S=0,I=P.length;S<I;++S)J=P[S],!ni(J)&&!Un(J)&&($=cS(r,B.data,B.gc,$,J),nt+=F);c.push($),f.push(nt),p=Math.max($,p),v=Math.max(nt,v)}yB(l,e);const ht=c.indexOf(p),V=f.indexOf(v),D=z=>({width:c[z]||0,height:f[z]||0});return{first:D(0),last:D(e-1),widest:D(ht),highest:D(V),widths:c,heights:f}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Cz(this._alignToPixels?Ml(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=bB(this.getContext(),t,i))}return this.$context||(this.$context=vB(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Vl(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),l=this._getLabelSizes(),c=t.autoSkipPadding||0,f=l?l.widest.width+c:0,m=l?l.highest.height+c:0;return this.isHorizontal()?m*i>f*r?f/i:m/r:m*r<f*i?m/i:f/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:l,position:c,border:f}=r,m=l.offset,p=this.isHorizontal(),E=this.ticks.length+(m?1:0),S=hh(l),I=[],P=f.setContext(this.getContext()),k=P.display?P.width:0,O=k/2,B=function(it){return Ml(i,it,k)};let F,$,nt,J,ht,V,D,z,U,H,G,q;if(c==="top")F=B(this.bottom),V=this.bottom-S,z=F-O,H=B(t.top)+O,q=t.bottom;else if(c==="bottom")F=B(this.top),H=t.top,q=B(t.bottom)-O,V=F+O,z=this.top+S;else if(c==="left")F=B(this.right),ht=this.right-S,D=F-O,U=B(t.left)+O,G=t.right;else if(c==="right")F=B(this.left),U=t.left,G=B(t.right)-O,ht=F+O,D=this.left+S;else if(e==="x"){if(c==="center")F=B((t.top+t.bottom)/2+.5);else if(pe(c)){const it=Object.keys(c)[0],vt=c[it];F=B(this.chart.scales[it].getPixelForValue(vt))}H=t.top,q=t.bottom,V=F+O,z=V+S}else if(e==="y"){if(c==="center")F=B((t.left+t.right)/2);else if(pe(c)){const it=Object.keys(c)[0],vt=c[it];F=B(this.chart.scales[it].getPixelForValue(vt))}ht=F-O,D=ht-S,U=t.left,G=t.right}const Yt=Se(r.ticks.maxTicksLimit,E),kt=Math.max(1,Math.ceil(E/Yt));for($=0;$<E;$+=kt){const it=this.getContext($),vt=l.setContext(it),mt=f.setContext(it),Vt=vt.lineWidth,j=vt.color,ct=mt.dash||[],Tt=mt.dashOffset,yt=vt.tickWidth,St=vt.tickColor,At=vt.tickBorderDash||[],Et=vt.tickBorderDashOffset;nt=_B(this,$,m),nt!==void 0&&(J=Ml(i,nt,Vt),p?ht=D=U=G=J:V=z=H=q=J,I.push({tx1:ht,ty1:V,tx2:D,ty2:z,x1:U,y1:H,x2:G,y2:q,width:Vt,color:j,borderDash:ct,borderDashOffset:Tt,tickWidth:yt,tickColor:St,tickBorderDash:At,tickBorderDashOffset:Et}))}return this._ticksLength=E,this._borderValue=F,I}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:l}=i,c=this.isHorizontal(),f=this.ticks,{align:m,crossAlign:p,padding:v,mirror:E}=l,S=hh(i.grid),I=S+v,P=E?-v:I,k=-Vl(this.labelRotation),O=[];let B,F,$,nt,J,ht,V,D,z,U,H,G,q="middle";if(r==="top")ht=this.bottom-P,V=this._getXAxisLabelAlignment();else if(r==="bottom")ht=this.top+P,V=this._getXAxisLabelAlignment();else if(r==="left"){const kt=this._getYAxisLabelAlignment(S);V=kt.textAlign,J=kt.x}else if(r==="right"){const kt=this._getYAxisLabelAlignment(S);V=kt.textAlign,J=kt.x}else if(e==="x"){if(r==="center")ht=(t.top+t.bottom)/2+I;else if(pe(r)){const kt=Object.keys(r)[0],it=r[kt];ht=this.chart.scales[kt].getPixelForValue(it)+I}V=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")J=(t.left+t.right)/2-I;else if(pe(r)){const kt=Object.keys(r)[0],it=r[kt];J=this.chart.scales[kt].getPixelForValue(it)}V=this._getYAxisLabelAlignment(S).textAlign}e==="y"&&(m==="start"?q="top":m==="end"&&(q="bottom"));const Yt=this._getLabelSizes();for(B=0,F=f.length;B<F;++B){$=f[B],nt=$.label;const kt=l.setContext(this.getContext(B));D=this.getPixelForTick(B)+l.labelOffset,z=this._resolveTickFontOptions(B),U=z.lineHeight,H=Un(nt)?nt.length:1;const it=H/2,vt=kt.color,mt=kt.textStrokeColor,Vt=kt.textStrokeWidth;let j=V;c?(J=D,V==="inner"&&(B===F-1?j=this.options.reverse?"left":"right":B===0?j=this.options.reverse?"right":"left":j="center"),r==="top"?p==="near"||k!==0?G=-H*U+U/2:p==="center"?G=-Yt.highest.height/2-it*U+U:G=-Yt.highest.height+U/2:p==="near"||k!==0?G=U/2:p==="center"?G=Yt.highest.height/2-it*U:G=Yt.highest.height-H*U,E&&(G*=-1),k!==0&&!kt.showLabelBackdrop&&(J+=U/2*Math.sin(k))):(ht=D,G=(1-H)*U/2);let ct;if(kt.showLabelBackdrop){const Tt=$s(kt.backdropPadding),yt=Yt.heights[B],St=Yt.widths[B];let At=G-Tt.top,Et=0-Tt.left;switch(q){case"middle":At-=yt/2;break;case"bottom":At-=yt;break}switch(V){case"center":Et-=St/2;break;case"right":Et-=St;break;case"inner":B===F-1?Et-=St:B>0&&(Et-=St/2);break}ct={left:Et,top:At,width:St+Tt.width,height:yt+Tt.height,color:kt.backdropColor}}O.push({label:nt,font:z,textOffset:G,options:{rotation:k,color:vt,strokeColor:mt,strokeWidth:Vt,textAlign:j,textBaseline:q,translation:[J,ht],backdrop:ct}})}return O}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Vl(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:l}}=this.options,c=this._getLabelSizes(),f=t+l,m=c.widest.width;let p,v;return e==="left"?r?(v=this.right+l,i==="near"?p="left":i==="center"?(p="center",v+=m/2):(p="right",v+=m)):(v=this.right-f,i==="near"?p="right":i==="center"?(p="center",v-=m/2):(p="left",v=this.left)):e==="right"?r?(v=this.left+l,i==="near"?p="right":i==="center"?(p="center",v-=m/2):(p="left",v-=m)):(v=this.left+f,i==="near"?p="left":i==="center"?(p="center",v+=m/2):(p="right",v=this.right)):p="right",{textAlign:p,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:l,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,l,c),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(l=>l.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let l,c;const f=(m,p,v)=>{!v.width||!v.color||(i.save(),i.lineWidth=v.width,i.strokeStyle=v.color,i.setLineDash(v.borderDash||[]),i.lineDashOffset=v.borderDashOffset,i.beginPath(),i.moveTo(m.x,m.y),i.lineTo(p.x,p.y),i.stroke(),i.restore())};if(e.display)for(l=0,c=r.length;l<c;++l){const m=r[l];e.drawOnChartArea&&f({x:m.x1,y:m.y1},{x:m.x2,y:m.y2},m),e.drawTicks&&f({x:m.tx1,y:m.ty1},{x:m.tx2,y:m.ty2},{color:m.tickColor,width:m.tickWidth,borderDash:m.tickBorderDash,borderDashOffset:m.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,l=i.setContext(this.getContext()),c=i.display?l.width:0;if(!c)return;const f=r.setContext(this.getContext(0)).lineWidth,m=this._borderValue;let p,v,E,S;this.isHorizontal()?(p=Ml(t,this.left,c)-c/2,v=Ml(t,this.right,f)+f/2,E=S=m):(E=Ml(t,this.top,c)-c/2,S=Ml(t,this.bottom,f)+f/2,p=v=m),e.save(),e.lineWidth=l.width,e.strokeStyle=l.color,e.beginPath(),e.moveTo(p,E),e.lineTo(v,S),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Wv(i,r);const l=this.getLabelItems(t);for(const c of l){const f=c.options,m=c.font,p=c.label,v=c.textOffset;Om(i,p,0,v,m,f)}r&&Yv(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const l=xi(i.font),c=$s(i.padding),f=i.align;let m=l.lineHeight/2;e==="bottom"||e==="center"||pe(e)?(m+=c.bottom,Un(i.text)&&(m+=l.lineHeight*(i.text.length-1))):m+=c.top;const{titleX:p,titleY:v,maxWidth:E,rotation:S}=EB(this,m,e,f);Om(t,i.text,0,0,l,{color:i.color,maxWidth:E,rotation:S,textAlign:TB(f,e,r),textBaseline:"middle",translation:[p,v]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Se(t.grid&&t.grid.z,-1),r=Se(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==bp.prototype.draw?[{z:e,draw:l=>{this.draw(l)}}]:[{z:i,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let l,c;for(l=0,c=e.length;l<c;++l){const f=e[l];f[i]===this.id&&(!t||f.type===t)&&r.push(f)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return xi(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Bd{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;xB(e)&&(i=this.register(e));const r=this.items,l=t.id,c=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+t);return l in r||(r[l]=t,wB(t,c,i),this.override&&an.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in an[r]&&(delete an[r][i],this.override&&delete Zl[i])}}function wB(n,t,e){const i=tf(Object.create(null),[e?an.get(e):{},an.get(t),n.defaults]);an.set(t,i),n.defaultRoutes&&SB(t,n.defaultRoutes),n.descriptors&&an.describe(t,n.descriptors)}function SB(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),l=[n].concat(i).join("."),c=t[e].split("."),f=c.pop(),m=c.join(".");an.route(l,r,m,f)})}function xB(n){return"id"in n&&"defaults"in n}class AB{constructor(){this.controllers=new Bd(zh,"datasets",!0),this.elements=new Bd(bf,"elements"),this.plugins=new Bd(Object,"plugins"),this.scales=new Bd(bp,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const l=i||this._getRegistryForType(r);i||l.isForType(r)||l===this.plugins&&r.id?this._exec(t,l,r):we(r,c=>{const f=i||this._getRegistryForType(c);this._exec(t,f,c)})})}_exec(t,e,i){const r=Gv(t);Ue(i["before"+r],[],i),e[t](i),Ue(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var br=new AB;class RB{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const l=r?this._descriptors(t).filter(r):this._descriptors(t),c=this._notify(l,t,e,i);return e==="afterDestroy"&&(this._notify(l,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,e,i,r){r=r||{};for(const l of t){const c=l.plugin,f=c[i],m=[e,r,l.options];if(Ue(f,m,c)===!1&&r.cancelable)return!1}return!0}invalidate(){ni(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Se(i.options&&i.options.plugins,{}),l=IB(i);return r===!1&&!e?[]:PB(t,l,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(l,c)=>l.filter(f=>!c.some(m=>f.plugin.id===m.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function IB(n){const t={},e=[],i=Object.keys(br.plugins.items);for(let l=0;l<i.length;l++)e.push(br.getPlugin(i[l]));const r=n.plugins||[];for(let l=0;l<r.length;l++){const c=r[l];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function CB(n,t){return!t&&n===!1?null:n===!0?{}:n}function PB(n,{plugins:t,localIds:e},i,r){const l=[],c=n.getContext();for(const f of t){const m=f.id,p=CB(i[m],r);p!==null&&l.push({plugin:f,options:MB(n.config,{plugin:f,local:e[m]},p,c)})}return l}function MB(n,{plugin:t,local:e},i,r){const l=n.pluginScopeKeys(t),c=n.getOptionScopes(i,l);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function yy(n,t){const e=an.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function OB(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function DB(n,t){return n===t?"_index_":"_value_"}function DS(n){if(n==="x"||n==="y"||n==="r")return n}function kB(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function vy(n,...t){if(DS(n))return n;for(const e of t){const i=e.axis||kB(e.position)||n.length>1&&DS(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function kS(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function LB(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return kS(n,"x",e[0])||kS(n,"y",e[0])}return{}}function NB(n,t){const e=Zl[n.type]||{scales:{}},i=t.scales||{},r=yy(n.type,t),l=Object.create(null);return Object.keys(i).forEach(c=>{const f=i[c];if(!pe(f))return console.error(`Invalid scale configuration for scale: ${c}`);if(f._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const m=vy(c,f,LB(c,n),an.scales[f.type]),p=DB(m,r),v=e.scales||{};l[c]=kh(Object.create(null),[{axis:m},f,v[m],v[p]])}),n.data.datasets.forEach(c=>{const f=c.type||n.type,m=c.indexAxis||yy(f,t),v=(Zl[f]||{}).scales||{};Object.keys(v).forEach(E=>{const S=OB(E,m),I=c[S+"AxisID"]||S;l[I]=l[I]||Object.create(null),kh(l[I],[{axis:S},i[I],v[E]])})}),Object.keys(l).forEach(c=>{const f=l[c];kh(f,[an.scales[f.type],an.scale])}),l}function sI(n){const t=n.options||(n.options={});t.plugins=Se(t.plugins,{}),t.scales=NB(n,t)}function rI(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function VB(n){return n=n||{},n.data=rI(n.data),sI(n),n}const LS=new Map,aI=new Set;function Ud(n,t){let e=LS.get(n);return e||(e=t(),LS.set(n,e),aI.add(e)),e}const fh=(n,t,e)=>{const i=ef(t,e);i!==void 0&&n.add(i)};class zB{constructor(t){this._config=VB(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=rI(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),sI(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ud(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Ud(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Ud(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Ud(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:l}=this,c=this._cachedScopes(t,i),f=c.get(e);if(f)return f;const m=new Set;e.forEach(v=>{t&&(m.add(t),v.forEach(E=>fh(m,t,E))),v.forEach(E=>fh(m,r,E)),v.forEach(E=>fh(m,Zl[l]||{},E)),v.forEach(E=>fh(m,an,E)),v.forEach(E=>fh(m,py,E))});const p=Array.from(m);return p.length===0&&p.push(Object.create(null)),aI.has(e)&&c.set(e,p),p}chartOptionScopes(){const{options:t,type:e}=this;return[t,Zl[e]||{},an.datasets[e]||{},{type:e},an,py]}resolveNamedOptions(t,e,i,r=[""]){const l={$shared:!0},{resolver:c,subPrefixes:f}=NS(this._resolverCache,t,r);let m=c;if(UB(c,e)){l.$shared=!1,i=jo(i)?i():i;const p=this.createResolver(t,i,f);m=sc(c,i,p)}for(const p of e)l[p]=m[p];return l}createResolver(t,e,i=[""],r){const{resolver:l}=NS(this._resolverCache,t,i);return pe(e)?sc(l,e,void 0,r):l}}function NS(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let l=i.get(r);return l||(l={resolver:Kv(t,e),subPrefixes:e.filter(f=>!f.toLowerCase().includes("hover"))},i.set(r,l)),l}const BB=n=>pe(n)&&Object.getOwnPropertyNames(n).some(t=>jo(n[t]));function UB(n,t){const{isScriptable:e,isIndexable:i}=GR(n);for(const r of t){const l=e(r),c=i(r),f=(c||l)&&n[r];if(l&&(jo(f)||BB(f))||c&&Un(f))return!0}return!1}var jB="4.5.0";const HB=["top","bottom","left","right","chartArea"];function VS(n,t){return n==="top"||n==="bottom"||HB.indexOf(n)===-1&&t==="x"}function zS(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function BS(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Ue(e&&e.onComplete,[n],t)}function FB(n){const t=n.chart,e=t.options.animation;Ue(e&&e.onProgress,[n],t)}function oI(n){return Jv()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const im={},US=n=>{const t=oI(n);return Object.values(im).filter(e=>e.canvas===t).pop()};function qB(n,t,e){const i=Object.keys(n);for(const r of i){const l=+r;if(l>=t){const c=n[r];delete n[r],(e>0||l>t)&&(n[l+e]=c)}}}function GB(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}var vo;let Tp=(vo=class{static register(...t){br.add(...t),jS()}static unregister(...t){br.remove(...t),jS()}constructor(t,e){const i=this.config=new zB(e),r=oI(t),l=US(r);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||uB(r)),this.platform.updateConfig(i);const f=this.platform.acquireContext(r,c.aspectRatio),m=f&&f.canvas,p=m&&m.height,v=m&&m.width;if(this.id=_z(),this.ctx=f,this.canvas=m,this.width=v,this.height=p,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new RB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=kz(E=>this.update(E),c.resizeDelay||0),this._dataChanges=[],im[this.id]=this,!f||!m){console.error("Failed to create chart: can't acquire context from the given item");return}aa.listen(this,"complete",BS),aa.listen(this,"progress",FB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:l}=this;return ni(t)?e&&l?l:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return br}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():pS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return hS(this.canvas,this.ctx),this}stop(){return aa.stop(this),this}resize(t,e){aa.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,l=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(r,t,e,l),f=i.devicePixelRatio||this.platform.getDevicePixelRatio(),m=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,pS(this,f,!0)&&(this.notifyPlugins("resize",{size:c}),Ue(i.onResize,[this,c],this),this.attached&&this._doResize(m)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};we(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((c,f)=>(c[f]=!1,c),{});let l=[];e&&(l=l.concat(Object.keys(e).map(c=>{const f=e[c],m=vy(c,f),p=m==="r",v=m==="x";return{options:f,dposition:p?"chartArea":v?"bottom":"left",dtype:p?"radialLinear":v?"category":"linear"}}))),we(l,c=>{const f=c.options,m=f.id,p=vy(m,f),v=Se(f.type,c.dtype);(f.position===void 0||VS(f.position,p)!==VS(c.dposition))&&(f.position=c.dposition),r[m]=!0;let E=null;if(m in i&&i[m].type===v)E=i[m];else{const S=br.getScale(v);E=new S({id:m,type:v,ctx:this.ctx,chart:this}),i[E.id]=E}E.init(f,t)}),we(r,(c,f)=>{c||delete i[f]}),we(i,c=>{Ao.configure(this,c,c.options),Ao.addBox(this,c)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,l)=>r.index-l.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(zS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(l=>l===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const l=e[i];let c=this.getDatasetMeta(i);const f=l.type||this.config.type;if(c.type&&c.type!==f&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=f,c.indexAxis=l.indexAxis||yy(f,this.options),c.order=l.order||0,c.index=i,c.label=""+l.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const m=br.getController(f),{datasetElementType:p,dataElementType:v}=an.datasets[f];Object.assign(m,{dataElementType:br.getElement(v),datasetElementType:p&&br.getElement(p)}),c.controller=new m(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){we(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let p=0,v=this.data.datasets.length;p<v;p++){const{controller:E}=this.getDatasetMeta(p),S=!r&&l.indexOf(E)===-1;E.buildOrUpdateElements(S),c=Math.max(+E.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),r||we(l,p=>{p.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(zS("z","_idx"));const{_active:f,_lastEvent:m}=this;m?this._eventHandler(m,!0):f.length&&this._updateHoverStyles(f,f,!0),this.render()}_updateScales(){we(this.scales,t=>{Ao.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!nS(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:l}of e){const c=i==="_removeElements"?-l:l;qB(t,r,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=l=>new Set(t.filter(c=>c[0]===l).map((c,f)=>f+","+c.splice(1).join(","))),r=i(0);for(let l=1;l<e;l++)if(!nS(r,i(l)))return;return Array.from(r).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ao.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],we(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,l)=>{r._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,jo(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(aa.has(this)?this.attached&&!aa.running(this)&&aa.start(this):(this.draw(),BS({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,l;for(r=0,l=e.length;r<l;++r){const c=e[r];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=T6(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Wv(e,r),t.controller.draw(),r&&Yv(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return qR(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const l=H6.modes[e];return typeof l=="function"?l(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(l=>l&&l._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=pc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",l=this.getDatasetMeta(t),c=l.controller._resolveAnimations(void 0,r);Im(e)?(l.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(l,{visible:i}),this.update(f=>f.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),aa.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),hS(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete im[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},r=(l,c,f)=>{l.offsetX=c,l.offsetY=f,this._eventHandler(l)};we(this.options.events,l=>i(l,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(m,p)=>{e.addEventListener(this,m,p),t[m]=p},r=(m,p)=>{t[m]&&(e.removeEventListener(this,m,p),delete t[m])},l=(m,p)=>{this.canvas&&this.resize(m,p)};let c;const f=()=>{r("attach",f),this.attached=!0,this.resize(),i("resize",l),i("detach",c)};c=()=>{this.attached=!1,r("resize",l),this._stop(),this._resize(0,0),i("attach",f)},e.isAttached(this.canvas)?f():c()}unbindEvents(){we(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},we(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let l,c,f,m;for(e==="dataset"&&(l=this.getDatasetMeta(t[0].datasetIndex),l.controller["_"+r+"DatasetHoverStyle"]()),f=0,m=t.length;f<m;++f){c=t[f];const p=c&&this.getDatasetMeta(c.datasetIndex).controller;p&&p[r+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:l,index:c})=>{const f=this.getDatasetMeta(l);if(!f)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:f.data[c],index:c}});!Am(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,l=(m,p)=>m.filter(v=>!p.some(E=>v.datasetIndex===E.datasetIndex&&v.index===E.index)),c=l(e,t),f=i?t:l(t,e);c.length&&this.updateHoverStyle(c,r.mode,!1),f.length&&r.mode&&this.updateHoverStyle(f,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const l=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(l||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:l}=this,c=e,f=this._getActiveElements(t,r,i,c),m=wz(t),p=GB(t,this._lastEvent,i,m);i&&(this._lastEvent=null,Ue(l.onHover,[t,f,this],this),m&&Ue(l.onClick,[t,f,this],this));const v=!Am(f,r);return(v||e)&&(this._active=f,this._updateHoverStyles(f,r,e)),this._lastEvent=p,v}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const l=this.options.hover;return this.getElementsAtEventForMode(t,l.mode,l,r)}},Xt(vo,"defaults",an),Xt(vo,"instances",im),Xt(vo,"overrides",Zl),Xt(vo,"registry",br),Xt(vo,"version",jB),Xt(vo,"getChart",US),vo);function jS(){return we(Tp.instances,n=>n._plugins.invalidate())}function ZB(n,t,e){const{startAngle:i,x:r,y:l,outerRadius:c,innerRadius:f,options:m}=t,{borderWidth:p,borderJoinStyle:v}=m,E=Math.min(p/c,Er(i-e));if(n.beginPath(),n.arc(r,l,c-p/2,i+E/2,e-E/2),f>0){const S=Math.min(p/f,Er(i-e));n.arc(r,l,f+p/2,e-S/2,i+S/2,!0)}else{const S=Math.min(p/2,c*Er(i-e));if(v==="round")n.arc(r,l,S,e-He/2,i+He/2,!0);else if(v==="bevel"){const I=2*S*S,P=-I*Math.cos(e+He/2)+r,k=-I*Math.sin(e+He/2)+l,O=I*Math.cos(i+He/2)+r,B=I*Math.sin(i+He/2)+l;n.lineTo(P,k),n.lineTo(O,B)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function WB(n,t,e){const{startAngle:i,pixelMargin:r,x:l,y:c,outerRadius:f,innerRadius:m}=t;let p=r/f;n.beginPath(),n.arc(l,c,f,i-p,e+p),m>r?(p=r/m,n.arc(l,c,m,e+p,i-p,!0)):n.arc(l,c,r,e+vn,i-vn),n.closePath(),n.clip()}function YB(n){return $v(n,["outerStart","outerEnd","innerStart","innerEnd"])}function $B(n,t,e,i){const r=YB(n.options.borderRadius),l=(e-t)/2,c=Math.min(l,i*t/2),f=m=>{const p=(e-Math.min(l,m))*i/2;return bs(m,0,Math.min(l,p))};return{outerStart:f(r.outerStart),outerEnd:f(r.outerEnd),innerStart:bs(r.innerStart,0,c),innerEnd:bs(r.innerEnd,0,c)}}function Uu(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Lm(n,t,e,i,r,l){const{x:c,y:f,startAngle:m,pixelMargin:p,innerRadius:v}=t,E=Math.max(t.outerRadius+i+e-p,0),S=v>0?v+i+e+p:0;let I=0;const P=r-m;if(i){const kt=v>0?v-i:0,it=E>0?E-i:0,vt=(kt+it)/2,mt=vt!==0?P*vt/(vt+i):P;I=(P-mt)/2}const k=Math.max(.001,P*E-e/He)/E,O=(P-k)/2,B=m+O+I,F=r-O-I,{outerStart:$,outerEnd:nt,innerStart:J,innerEnd:ht}=$B(t,S,E,F-B),V=E-$,D=E-nt,z=B+$/V,U=F-nt/D,H=S+J,G=S+ht,q=B+J/H,Yt=F-ht/G;if(n.beginPath(),l){const kt=(z+U)/2;if(n.arc(c,f,E,z,kt),n.arc(c,f,E,kt,U),nt>0){const Vt=Uu(D,U,c,f);n.arc(Vt.x,Vt.y,nt,U,F+vn)}const it=Uu(G,F,c,f);if(n.lineTo(it.x,it.y),ht>0){const Vt=Uu(G,Yt,c,f);n.arc(Vt.x,Vt.y,ht,F+vn,Yt+Math.PI)}const vt=(F-ht/S+(B+J/S))/2;if(n.arc(c,f,S,F-ht/S,vt,!0),n.arc(c,f,S,vt,B+J/S,!0),J>0){const Vt=Uu(H,q,c,f);n.arc(Vt.x,Vt.y,J,q+Math.PI,B-vn)}const mt=Uu(V,B,c,f);if(n.lineTo(mt.x,mt.y),$>0){const Vt=Uu(V,z,c,f);n.arc(Vt.x,Vt.y,$,B-vn,z)}}else{n.moveTo(c,f);const kt=Math.cos(z)*E+c,it=Math.sin(z)*E+f;n.lineTo(kt,it);const vt=Math.cos(U)*E+c,mt=Math.sin(U)*E+f;n.lineTo(vt,mt)}n.closePath()}function KB(n,t,e,i,r){const{fullCircles:l,startAngle:c,circumference:f}=t;let m=t.endAngle;if(l){Lm(n,t,e,i,m,r);for(let p=0;p<l;++p)n.fill();isNaN(f)||(m=c+(f%mn||mn))}return Lm(n,t,e,i,m,r),n.fill(),m}function XB(n,t,e,i,r){const{fullCircles:l,startAngle:c,circumference:f,options:m}=t,{borderWidth:p,borderJoinStyle:v,borderDash:E,borderDashOffset:S,borderRadius:I}=m,P=m.borderAlign==="inner";if(!p)return;n.setLineDash(E||[]),n.lineDashOffset=S,P?(n.lineWidth=p*2,n.lineJoin=v||"round"):(n.lineWidth=p,n.lineJoin=v||"bevel");let k=t.endAngle;if(l){Lm(n,t,e,i,k,r);for(let O=0;O<l;++O)n.stroke();isNaN(f)||(k=c+(f%mn||mn))}P&&WB(n,t,k),m.selfJoin&&k-c>=He&&I===0&&v!=="miter"&&ZB(n,t,k),l||(Lm(n,t,e,i,k,r),n.stroke())}class xh extends bf{constructor(e){super();Xt(this,"circumference");Xt(this,"endAngle");Xt(this,"fullCircles");Xt(this,"innerRadius");Xt(this,"outerRadius");Xt(this,"pixelMargin");Xt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,r){const l=this.getProps(["x","y"],r),{angle:c,distance:f}=VR(l,{x:e,y:i}),{startAngle:m,endAngle:p,innerRadius:v,outerRadius:E,circumference:S}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),I=(this.options.spacing+this.options.borderWidth)/2,P=Se(S,p-m),k=Mm(c,m,p)&&m!==p,O=P>=mn||k,B=Eh(f,v+I,E+I);return O&&B}getCenterPoint(e){const{x:i,y:r,startAngle:l,endAngle:c,innerRadius:f,outerRadius:m}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:p,spacing:v}=this.options,E=(l+c)/2,S=(f+m+v+p)/2;return{x:i+Math.cos(E)*S,y:r+Math.sin(E)*S}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:r}=this,l=(i.offset||0)/4,c=(i.spacing||0)/2,f=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>mn?Math.floor(r/mn):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const m=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(m)*l,Math.sin(m)*l);const p=1-Math.sin(Math.min(He,r||0)),v=l*p;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,KB(e,this,v,c,f),XB(e,this,v,c,f),e.restore()}}Xt(xh,"id","arc"),Xt(xh,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Xt(xh,"defaultRoutes",{backgroundColor:"backgroundColor"}),Xt(xh,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});const HS=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},QB=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class FS extends bf{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Ue(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=xi(i.font),l=r.size,c=this._computeTitleHeight(),{boxWidth:f,itemHeight:m}=HS(i,l);let p,v;e.font=r.string,this.isHorizontal()?(p=this.maxWidth,v=this._fitRows(c,l,f,m)+10):(v=this.maxHeight,p=this._fitCols(c,r,f,m)+10),this.width=Math.min(p,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:l,maxWidth:c,options:{labels:{padding:f}}}=this,m=this.legendHitBoxes=[],p=this.lineWidths=[0],v=r+f;let E=t;l.textAlign="left",l.textBaseline="middle";let S=-1,I=-v;return this.legendItems.forEach((P,k)=>{const O=i+e/2+l.measureText(P.text).width;(k===0||p[p.length-1]+O+2*f>c)&&(E+=v,p[p.length-(k>0?0:1)]=0,I+=v,S++),m[k]={left:0,top:I,row:S,width:O,height:r},p[p.length-1]+=O+f}),E}_fitCols(t,e,i,r){const{ctx:l,maxHeight:c,options:{labels:{padding:f}}}=this,m=this.legendHitBoxes=[],p=this.columnSizes=[],v=c-t;let E=f,S=0,I=0,P=0,k=0;return this.legendItems.forEach((O,B)=>{const{itemWidth:F,itemHeight:$}=JB(i,e,l,O,r);B>0&&I+$+2*f>v&&(E+=S+f,p.push({width:S,height:I}),P+=S+f,k++,S=I=0),m[B]={left:P,top:I,col:k,width:F,height:$},S=Math.max(S,F),I+=$+f}),E+=S,p.push({width:S,height:I}),E}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:l}}=this,c=$u(l,this.left,this.width);if(this.isHorizontal()){let f=0,m=$i(i,this.left+r,this.right-this.lineWidths[f]);for(const p of e)f!==p.row&&(f=p.row,m=$i(i,this.left+r,this.right-this.lineWidths[f])),p.top+=this.top+t+r,p.left=c.leftForLtr(c.x(m),p.width),m+=p.width+r}else{let f=0,m=$i(i,this.top+t+r,this.bottom-this.columnSizes[f].height);for(const p of e)p.col!==f&&(f=p.col,m=$i(i,this.top+t+r,this.bottom-this.columnSizes[f].height)),p.top=m,p.left+=this.left+r,p.left=c.leftForLtr(c.x(p.left),p.width),m+=p.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Wv(t,this),this._draw(),Yv(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:l,labels:c}=t,f=an.color,m=$u(t.rtl,this.left,this.width),p=xi(c.font),{padding:v}=c,E=p.size,S=E/2;let I;this.drawTitle(),r.textAlign=m.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=p.string;const{boxWidth:P,boxHeight:k,itemHeight:O}=HS(c,E),B=function(ht,V,D){if(isNaN(P)||P<=0||isNaN(k)||k<0)return;r.save();const z=Se(D.lineWidth,1);if(r.fillStyle=Se(D.fillStyle,f),r.lineCap=Se(D.lineCap,"butt"),r.lineDashOffset=Se(D.lineDashOffset,0),r.lineJoin=Se(D.lineJoin,"miter"),r.lineWidth=z,r.strokeStyle=Se(D.strokeStyle,f),r.setLineDash(Se(D.lineDash,[])),c.usePointStyle){const U={radius:k*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:z},H=m.xPlus(ht,P/2),G=V+S;FR(r,U,H,G,c.pointStyleWidth&&P)}else{const U=V+Math.max((E-k)/2,0),H=m.leftForLtr(ht,P),G=Vh(D.borderRadius);r.beginPath(),Object.values(G).some(q=>q!==0)?gy(r,{x:H,y:U,w:P,h:k,radius:G}):r.rect(H,U,P,k),r.fill(),z!==0&&r.stroke()}r.restore()},F=function(ht,V,D){Om(r,D.text,ht,V+O/2,p,{strikethrough:D.hidden,textAlign:m.textAlign(D.textAlign)})},$=this.isHorizontal(),nt=this._computeTitleHeight();$?I={x:$i(l,this.left+v,this.right-i[0]),y:this.top+v+nt,line:0}:I={x:this.left+v,y:$i(l,this.top+nt+v,this.bottom-e[0].height),line:0},$R(this.ctx,t.textDirection);const J=O+v;this.legendItems.forEach((ht,V)=>{r.strokeStyle=ht.fontColor,r.fillStyle=ht.fontColor;const D=r.measureText(ht.text).width,z=m.textAlign(ht.textAlign||(ht.textAlign=c.textAlign)),U=P+S+D;let H=I.x,G=I.y;m.setWidth(this.width),$?V>0&&H+U+v>this.right&&(G=I.y+=J,I.line++,H=I.x=$i(l,this.left+v,this.right-i[I.line])):V>0&&G+J>this.bottom&&(H=I.x=H+e[I.line].width+v,I.line++,G=I.y=$i(l,this.top+nt+v,this.bottom-e[I.line].height));const q=m.x(H);if(B(q,G,ht),H=Lz(z,H+P+S,$?H+U:this.right,t.rtl),F(m.x(H),G,ht),$)I.x+=U+v;else if(typeof ht.text!="string"){const Yt=p.lineHeight;I.y+=lI(ht,Yt)+v}else I.y+=J}),KR(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=xi(e.font),r=$s(e.padding);if(!e.display)return;const l=$u(t.rtl,this.left,this.width),c=this.ctx,f=e.position,m=i.size/2,p=r.top+m;let v,E=this.left,S=this.width;if(this.isHorizontal())S=Math.max(...this.lineWidths),v=this.top+p,E=$i(t.align,E,this.right-S);else{const P=this.columnSizes.reduce((k,O)=>Math.max(k,O.height),0);v=p+$i(t.align,this.top,this.bottom-P-t.labels.padding-this._computeTitleHeight())}const I=$i(f,E,E+S);c.textAlign=l.textAlign(jR(f)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,Om(c,e.text,I,v,i)}_computeTitleHeight(){const t=this.options.title,e=xi(t.font),i=$s(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,l;if(Eh(t,this.left,this.right)&&Eh(e,this.top,this.bottom)){for(l=this.legendHitBoxes,i=0;i<l.length;++i)if(r=l[i],Eh(t,r.left,r.left+r.width)&&Eh(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!n5(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,l=QB(r,i);r&&!l&&Ue(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!l&&Ue(e.onHover,[t,i,this],this)}else i&&Ue(e.onClick,[t,i,this],this)}}function JB(n,t,e,i,r){const l=t5(i,n,t,e),c=e5(r,i,t.lineHeight);return{itemWidth:l,itemHeight:c}}function t5(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((l,c)=>l.length>c.length?l:c)),t+e.size/2+i.measureText(r).width}function e5(n,t,e){let i=n;return typeof t.text!="string"&&(i=lI(t,e)),i}function lI(n,t){const e=n.text?n.text.length:0;return t*e}function n5(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var i5={id:"legend",_element:FS,start(n,t,e){const i=n.legend=new FS({ctx:n.ctx,options:e,chart:n});Ao.configure(n,i,e),Ao.addBox(n,i)},stop(n){Ao.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Ao.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:l,useBorderRadius:c,borderRadius:f}}=n.legend.options;return n._getSortedDatasetMetas().map(m=>{const p=m.controller.getStyle(e?0:void 0),v=$s(p.borderWidth);return{text:t[m.index].label,fillStyle:p.backgroundColor,fontColor:l,hidden:!m.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(v.width+v.height)/4,strokeStyle:p.borderColor,pointStyle:i||p.pointStyle,rotation:p.rotation,textAlign:r||p.textAlign,borderRadius:c&&(f||p.borderRadius),datasetIndex:m.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const Ah={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,l=0;for(t=0,e=n.length;t<e;++t){const f=n[t].element;if(f&&f.hasValue()){const m=f.tooltipPosition();i.add(m.x),r+=m.y,++l}}return l===0||i.size===0?!1:{x:[...i].reduce((f,m)=>f+m)/i.size,y:r/l}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,l,c,f;for(l=0,c=n.length;l<c;++l){const m=n[l].element;if(m&&m.hasValue()){const p=m.getCenterPoint(),v=Iz(t,p);v<r&&(r=v,f=m)}}if(f){const m=f.tooltipPosition();e=m.x,i=m.y}return{x:e,y:i}}};function vr(n,t){return t&&(Un(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function oa(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function s5(n,t){const{element:e,datasetIndex:i,index:r}=t,l=n.getDatasetMeta(i).controller,{label:c,value:f}=l.getLabelAndValue(r);return{chart:n,label:c,parsed:l.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:f,dataset:l.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function qS(n,t){const e=n.chart.ctx,{body:i,footer:r,title:l}=n,{boxWidth:c,boxHeight:f}=t,m=xi(t.bodyFont),p=xi(t.titleFont),v=xi(t.footerFont),E=l.length,S=r.length,I=i.length,P=$s(t.padding);let k=P.height,O=0,B=i.reduce((nt,J)=>nt+J.before.length+J.lines.length+J.after.length,0);if(B+=n.beforeBody.length+n.afterBody.length,E&&(k+=E*p.lineHeight+(E-1)*t.titleSpacing+t.titleMarginBottom),B){const nt=t.displayColors?Math.max(f,m.lineHeight):m.lineHeight;k+=I*nt+(B-I)*m.lineHeight+(B-1)*t.bodySpacing}S&&(k+=t.footerMarginTop+S*v.lineHeight+(S-1)*t.footerSpacing);let F=0;const $=function(nt){O=Math.max(O,e.measureText(nt).width+F)};return e.save(),e.font=p.string,we(n.title,$),e.font=m.string,we(n.beforeBody.concat(n.afterBody),$),F=t.displayColors?c+2+t.boxPadding:0,we(i,nt=>{we(nt.before,$),we(nt.lines,$),we(nt.after,$)}),F=0,e.font=v.string,we(n.footer,$),e.restore(),O+=P.width,{width:O,height:k}}function r5(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function a5(n,t,e,i){const{x:r,width:l}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&r+l+c>t.width||n==="right"&&r-l-c<0)return!0}function o5(n,t,e,i){const{x:r,width:l}=e,{width:c,chartArea:{left:f,right:m}}=n;let p="center";return i==="center"?p=r<=(f+m)/2?"left":"right":r<=l/2?p="left":r>=c-l/2&&(p="right"),a5(p,n,t,e)&&(p="center"),p}function GS(n,t,e){const i=e.yAlign||t.yAlign||r5(n,e);return{xAlign:e.xAlign||t.xAlign||o5(n,t,e,i),yAlign:i}}function l5(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function u5(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function ZS(n,t,e,i){const{caretSize:r,caretPadding:l,cornerRadius:c}=n,{xAlign:f,yAlign:m}=e,p=r+l,{topLeft:v,topRight:E,bottomLeft:S,bottomRight:I}=Vh(c);let P=l5(t,f);const k=u5(t,m,p);return m==="center"?f==="left"?P+=p:f==="right"&&(P-=p):f==="left"?P-=Math.max(v,S)+r:f==="right"&&(P+=Math.max(E,I)+r),{x:bs(P,0,i.width-t.width),y:bs(k,0,i.height-t.height)}}function jd(n,t,e){const i=$s(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function WS(n){return vr([],oa(n))}function c5(n,t,e){return pc(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function YS(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const uI={beforeTitle:sa,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:sa,beforeBody:sa,beforeLabel:sa,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return ni(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:sa,afterBody:sa,beforeFooter:sa,footer:sa,afterFooter:sa};function bi(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?uI[t].call(e,i):r}class by extends bf{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,l=new XR(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=c5(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=bi(i,"beforeTitle",this,t),l=bi(i,"title",this,t),c=bi(i,"afterTitle",this,t);let f=[];return f=vr(f,oa(r)),f=vr(f,oa(l)),f=vr(f,oa(c)),f}getBeforeBody(t,e){return WS(bi(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return we(t,l=>{const c={before:[],lines:[],after:[]},f=YS(i,l);vr(c.before,oa(bi(f,"beforeLabel",this,l))),vr(c.lines,bi(f,"label",this,l)),vr(c.after,oa(bi(f,"afterLabel",this,l))),r.push(c)}),r}getAfterBody(t,e){return WS(bi(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=bi(i,"beforeFooter",this,t),l=bi(i,"footer",this,t),c=bi(i,"afterFooter",this,t);let f=[];return f=vr(f,oa(r)),f=vr(f,oa(l)),f=vr(f,oa(c)),f}_createItems(t){const e=this._active,i=this.chart.data,r=[],l=[],c=[];let f=[],m,p;for(m=0,p=e.length;m<p;++m)f.push(s5(this.chart,e[m]));return t.filter&&(f=f.filter((v,E,S)=>t.filter(v,E,S,i))),t.itemSort&&(f=f.sort((v,E)=>t.itemSort(v,E,i))),we(f,v=>{const E=YS(t.callbacks,v);r.push(bi(E,"labelColor",this,v)),l.push(bi(E,"labelPointStyle",this,v)),c.push(bi(E,"labelTextColor",this,v))}),this.labelColors=r,this.labelPointStyles=l,this.labelTextColors=c,this.dataPoints=f,f}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let l,c=[];if(!r.length)this.opacity!==0&&(l={opacity:0});else{const f=Ah[i.position].call(this,r,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const m=this._size=qS(this,i),p=Object.assign({},f,m),v=GS(this.chart,i,p),E=ZS(i,p,v,this.chart);this.xAlign=v.xAlign,this.yAlign=v.yAlign,l={opacity:1,x:E.x,y:E.y,width:m.width,height:m.height,caretX:f.x,caretY:f.y}}this._tooltipItems=c,this.$context=void 0,l&&this._resolveAnimations().update(this,l),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const l=this.getCaretPosition(t,i,r);e.lineTo(l.x1,l.y1),e.lineTo(l.x2,l.y2),e.lineTo(l.x3,l.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:l}=this,{caretSize:c,cornerRadius:f}=i,{topLeft:m,topRight:p,bottomLeft:v,bottomRight:E}=Vh(f),{x:S,y:I}=t,{width:P,height:k}=e;let O,B,F,$,nt,J;return l==="center"?(nt=I+k/2,r==="left"?(O=S,B=O-c,$=nt+c,J=nt-c):(O=S+P,B=O+c,$=nt-c,J=nt+c),F=O):(r==="left"?B=S+Math.max(m,v)+c:r==="right"?B=S+P-Math.max(p,E)-c:B=this.caretX,l==="top"?($=I,nt=$-c,O=B-c,F=B+c):($=I+k,nt=$+c,O=B+c,F=B-c),J=$),{x1:O,x2:B,x3:F,y1:$,y2:nt,y3:J}}drawTitle(t,e,i){const r=this.title,l=r.length;let c,f,m;if(l){const p=$u(i.rtl,this.x,this.width);for(t.x=jd(this,i.titleAlign,i),e.textAlign=p.textAlign(i.titleAlign),e.textBaseline="middle",c=xi(i.titleFont),f=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,m=0;m<l;++m)e.fillText(r[m],p.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+f,m+1===l&&(t.y+=i.titleMarginBottom-f)}}_drawColorBox(t,e,i,r,l){const c=this.labelColors[i],f=this.labelPointStyles[i],{boxHeight:m,boxWidth:p}=l,v=xi(l.bodyFont),E=jd(this,"left",l),S=r.x(E),I=m<v.lineHeight?(v.lineHeight-m)/2:0,P=e.y+I;if(l.usePointStyle){const k={radius:Math.min(p,m)/2,pointStyle:f.pointStyle,rotation:f.rotation,borderWidth:1},O=r.leftForLtr(S,p)+p/2,B=P+m/2;t.strokeStyle=l.multiKeyBackground,t.fillStyle=l.multiKeyBackground,fS(t,k,O,B),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,fS(t,k,O,B)}else{t.lineWidth=pe(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const k=r.leftForLtr(S,p),O=r.leftForLtr(r.xPlus(S,1),p-2),B=Vh(c.borderRadius);Object.values(B).some(F=>F!==0)?(t.beginPath(),t.fillStyle=l.multiKeyBackground,gy(t,{x:k,y:P,w:p,h:m,radius:B}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),gy(t,{x:O,y:P+1,w:p-2,h:m-2,radius:B}),t.fill()):(t.fillStyle=l.multiKeyBackground,t.fillRect(k,P,p,m),t.strokeRect(k,P,p,m),t.fillStyle=c.backgroundColor,t.fillRect(O,P+1,p-2,m-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:l,bodyAlign:c,displayColors:f,boxHeight:m,boxWidth:p,boxPadding:v}=i,E=xi(i.bodyFont);let S=E.lineHeight,I=0;const P=$u(i.rtl,this.x,this.width),k=function(D){e.fillText(D,P.x(t.x+I),t.y+S/2),t.y+=S+l},O=P.textAlign(c);let B,F,$,nt,J,ht,V;for(e.textAlign=c,e.textBaseline="middle",e.font=E.string,t.x=jd(this,O,i),e.fillStyle=i.bodyColor,we(this.beforeBody,k),I=f&&O!=="right"?c==="center"?p/2+v:p+2+v:0,nt=0,ht=r.length;nt<ht;++nt){for(B=r[nt],F=this.labelTextColors[nt],e.fillStyle=F,we(B.before,k),$=B.lines,f&&$.length&&(this._drawColorBox(e,t,nt,P,i),S=Math.max(E.lineHeight,m)),J=0,V=$.length;J<V;++J)k($[J]),S=E.lineHeight;we(B.after,k)}I=0,S=E.lineHeight,we(this.afterBody,k),t.y-=l}drawFooter(t,e,i){const r=this.footer,l=r.length;let c,f;if(l){const m=$u(i.rtl,this.x,this.width);for(t.x=jd(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=m.textAlign(i.footerAlign),e.textBaseline="middle",c=xi(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,f=0;f<l;++f)e.fillText(r[f],m.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:l,yAlign:c}=this,{x:f,y:m}=t,{width:p,height:v}=i,{topLeft:E,topRight:S,bottomLeft:I,bottomRight:P}=Vh(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(f+E,m),c==="top"&&this.drawCaret(t,e,i,r),e.lineTo(f+p-S,m),e.quadraticCurveTo(f+p,m,f+p,m+S),c==="center"&&l==="right"&&this.drawCaret(t,e,i,r),e.lineTo(f+p,m+v-P),e.quadraticCurveTo(f+p,m+v,f+p-P,m+v),c==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(f+I,m+v),e.quadraticCurveTo(f,m+v,f,m+v-I),c==="center"&&l==="left"&&this.drawCaret(t,e,i,r),e.lineTo(f,m+E),e.quadraticCurveTo(f,m,f+E,m),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,l=i&&i.y;if(r||l){const c=Ah[t.position].call(this,this._active,this._eventPosition);if(!c)return;const f=this._size=qS(this,t),m=Object.assign({},c,this._size),p=GS(e,t,m),v=ZS(t,m,p,e);(r._to!==v.x||l._to!==v.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=f.width,this.height=f.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,v))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},l={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=$s(e.padding),f=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&f&&(t.save(),t.globalAlpha=i,this.drawBackground(l,t,r,e),$R(t,e.textDirection),l.y+=c.top,this.drawTitle(l,t,e),this.drawBody(l,t,e),this.drawFooter(l,t,e),KR(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:f,index:m})=>{const p=this.chart.getDatasetMeta(f);if(!p)throw new Error("Cannot find a dataset at index "+f);return{datasetIndex:f,element:p.data[m],index:m}}),l=!Am(i,r),c=this._positionChanged(r,e);(l||c)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,l=this._active||[],c=this._getActiveElements(t,l,e,i),f=this._positionChanged(c,t),m=e||!Am(c,l)||f;return m&&(this._active=c,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),m}_getActiveElements(t,e,i,r){const l=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(f=>this.chart.data.datasets[f.datasetIndex]&&this.chart.getDatasetMeta(f.datasetIndex).controller.getParsed(f.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,l.mode,l,i);return l.reverse&&c.reverse(),c}_positionChanged(t,e){const{caretX:i,caretY:r,options:l}=this,c=Ah[l.position].call(this,t,e);return c!==!1&&(i!==c.x||r!==c.y)}}Xt(by,"positioners",Ah);var h5={id:"tooltip",_element:by,positioners:Ah,afterInit(n,t,e){e&&(n.tooltip=new by({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:uI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Ep={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Si=Object.keys(Ep);function $S(n,t){return n-t}function KS(n,t){if(ni(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:l}=n._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),Ta(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(r&&(c=r==="week"&&(Pm(l)||l===!0)?e.startOf(c,"isoWeek",l):e.startOf(c,r)),+c)}function XS(n,t,e,i){const r=Si.length;for(let l=Si.indexOf(n);l<r-1;++l){const c=Ep[Si[l]],f=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(f*c.size))<=i)return Si[l]}return Si[r-1]}function f5(n,t,e,i,r){for(let l=Si.length-1;l>=Si.indexOf(e);l--){const c=Si[l];if(Ep[c].common&&n._adapter.diff(r,i,c)>=t-1)return c}return Si[e?Si.indexOf(e):0]}function d5(n){for(let t=Si.indexOf(n)+1,e=Si.length;t<e;++t)if(Ep[Si[t]].common)return Si[t]}function QS(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=Zv(e,t),l=e[i]>=t?e[i]:e[r];n[l]=!0}}function m5(n,t,e,i){const r=n._adapter,l=+r.startOf(t[0].value,i),c=t[t.length-1].value;let f,m;for(f=l;f<=c;f=+r.add(f,1,i))m=e[f],m>=0&&(t[m].major=!0);return t}function JS(n,t,e){const i=[],r={},l=t.length;let c,f;for(c=0;c<l;++c)f=t[c],r[f]=c,i.push({value:f,major:!1});return l===0||!e?i:m5(n,i,r,e)}class Nm extends bp{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new V6._date(t.adapters.date);r.init(e),kh(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:KS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:l,minDefined:c,maxDefined:f}=this.getUserBounds();function m(p){!c&&!isNaN(p.min)&&(r=Math.min(r,p.min)),!f&&!isNaN(p.max)&&(l=Math.max(l,p.max))}(!c||!f)&&(m(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&m(this.getMinMax(!1))),r=Ta(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),l=Ta(l)&&!isNaN(l)?l:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,l-1),this.max=Math.max(r+1,l)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const l=this.min,c=this.max,f=Mz(r,l,c);return this._unit=e.unit||(i.autoSkip?XS(e.minUnit,this.min,this.max,this._getLabelCapacity(l)):f5(this,f.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:d5(this._unit),this.initOffsets(r),t.reverse&&f.reverse(),JS(this,f,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,l;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,l=this.getDecimalForValue(t[t.length-1]),t.length===1?i=l:i=(l-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;e=bs(e,0,c),i=bs(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,l=r.time,c=l.unit||XS(l.minUnit,e,i,this._getLabelCapacity(e)),f=Se(r.ticks.stepSize,1),m=c==="week"?l.isoWeekday:!1,p=Pm(m)||m===!0,v={};let E=e,S,I;if(p&&(E=+t.startOf(E,"isoWeek",m)),E=+t.startOf(E,p?"day":c),t.diff(i,e,c)>1e5*f)throw new Error(e+" and "+i+" are too far apart with stepSize of "+f+" "+c);const P=r.ticks.source==="data"&&this.getDataTimestamps();for(S=E,I=0;S<i;S=+t.add(S,f,c),I++)QS(v,S,P);return(S===i||r.bounds==="ticks"||I===1)&&QS(v,S,P),Object.keys(v).sort($S).map(k=>+k)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,l=this._unit,c=e||r[l];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,r){const l=this.options,c=l.ticks.callback;if(c)return Ue(c,[t,e,i],this);const f=l.time.displayFormats,m=this._unit,p=this._majorUnit,v=m&&f[m],E=p&&f[p],S=i[e],I=p&&E&&S&&S.major;return this._adapter.format(t,r||(I?E:v))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=Vl(this.isHorizontal()?e.maxRotation:e.minRotation),l=Math.cos(r),c=Math.sin(r),f=this._resolveTickFontOptions(0).size;return{w:i*l+f*c,h:i*c+f*l}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,l=this._tickFormatFunction(t,0,JS(this,[t],this._majorUnit),r),c=this._getLabelSize(l),f=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return f>0?f:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(KS(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Dz(t.sort($S))}}Xt(Nm,"id","time"),Xt(Nm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Hd(n,t,e){let i=0,r=n.length-1,l,c,f,m;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=my(n,"pos",t)),{pos:l,time:f}=n[i],{pos:c,time:m}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=my(n,"time",t)),{time:l,pos:f}=n[i],{time:c,pos:m}=n[r]);const p=c-l;return p?f+(m-f)*(t-l)/p:f}class t1 extends Nm{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Hd(e,this.min),this._tableRange=Hd(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],l=[];let c,f,m,p,v;for(c=0,f=t.length;c<f;++c)p=t[c],p>=e&&p<=i&&r.push(p);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,f=r.length;c<f;++c)v=r[c+1],m=r[c-1],p=r[c],Math.round((v+m)/2)!==p&&l.push({time:p,pos:c/(f-1)});return l}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,l)=>r-l)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Hd(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Hd(this._table,i*this._tableRange+this._minPos,!0)}}Xt(t1,"id","timeseries"),Xt(t1,"defaults",Nm.defaults);const cI="label";function e1(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function p5(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function hI(n,t){n.labels=t}function fI(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cI;const i=[];n.datasets=t.map(r=>{const l=n.datasets.find(c=>c[e]===r[e]);return!l||!r.data||i.includes(l)?{...r}:(i.push(l),Object.assign(l,r),l)})}function g5(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cI;const e={labels:[],datasets:[]};return hI(e,n.labels),fI(e,n.datasets,t),e}function _5(n,t){const{height:e=150,width:i=300,redraw:r=!1,datasetIdKey:l,type:c,data:f,options:m,plugins:p=[],fallbackContent:v,updateMode:E,...S}=n,I=K.useRef(null),P=K.useRef(null),k=()=>{I.current&&(P.current=new Tp(I.current,{type:c,data:g5(f,l),options:m&&{...m},plugins:p}),e1(t,P.current))},O=()=>{e1(t,null),P.current&&(P.current.destroy(),P.current=null)};return K.useEffect(()=>{!r&&P.current&&m&&p5(P.current,m)},[r,m]),K.useEffect(()=>{!r&&P.current&&hI(P.current.config.data,f.labels)},[r,f.labels]),K.useEffect(()=>{!r&&P.current&&f.datasets&&fI(P.current.config.data,f.datasets,l)},[r,f.datasets]),K.useEffect(()=>{P.current&&(r?(O(),setTimeout(k)):P.current.update(E))},[r,m,f.labels,f.datasets,E]),K.useEffect(()=>{P.current&&(O(),setTimeout(k))},[c]),K.useEffect(()=>(k(),()=>O()),[]),ge.createElement("canvas",{ref:I,role:"img",height:e,width:i,...S},v)}const y5=K.forwardRef(_5);function v5(n,t){return Tp.register(t),K.forwardRef((e,i)=>ge.createElement(y5,{...e,ref:i,type:n}))}const b5=v5("pie",_y);Tp.register(xh,h5,i5);const T5={calma:"😴",musicá:"🎶",ambiante:"🍻",fiesta:"🎉",lleno:"🕺"},E5=n=>n.charAt(0).toUpperCase()+n.slice(1),w5=({votes:n})=>{const t=Object.keys(n),e=Object.values(n);if(t.length===0)return Z.jsx("p",{style:{textAlign:"center"},children:"Aucun vote pour le moment."});const i={labels:t.map(r=>`${T5[r]||""} ${E5(r)}`),datasets:[{label:"Votes",data:e,backgroundColor:["#8884d8","#82ca9d","#ffc658","#ff8042","#ff4d4f"],borderWidth:1}]};return Z.jsx("div",{className:"chart-container",children:Z.jsx(b5,{data:i})})};function wp(){const[n,t]=K.useState(null),[e,i]=K.useState(!0);return K.useEffect(()=>{const r=Vv($w,l=>{l?(t({uid:l.uid,isAnonymous:l.isAnonymous}),i(!1)):uR($w).then(c=>{t({uid:c.user.uid,isAnonymous:!0}),i(!1)}).catch(c=>{console.error("Erreur lors de la connexion anonyme",c),t(null),i(!1)})});return()=>r()},[]),{user:n,loading:e}}const dI=30,mI={free:1,premium:5,vip:10},S5=(n,t,e="free")=>{const[i,r]=K.useState(null),[l,c]=K.useState(!1);return{vote:async m=>{c(!0),r(null);try{const p=Mo(Mn,`bars/${n}/ambianceVotes`),v=mI[e]||1,E=dI,S=on.fromDate(new Date(Date.now()-E*60*1e3)),I=ym(p,_w("uid","==",t),_w("timestamp",">",S));return(await ny(I)).size>=v?(r(`Ya has votado el límite permitido (${v}) en los últimos ${E} minutos.`),!1):(await Ev(p,{uid:t,type:m,timestamp:on.now()}),!0)}catch(p){return console.error("Error al guardar el voto:",p),r("Hubo un error al enviar tu voto."),!1}finally{c(!1)}},loading:l,error:i}},n1={calma:"😴",musica:"🎶",ambiente:"🍻",fiesta:"🎉",lleno:"🕺"},i1=n=>n.charAt(0).toUpperCase()+n.slice(1),x5=()=>{const{id:n}=yP(),{user:t}=wp(),e=Ho(),[i,r]=K.useState(""),[l,c]=K.useState([]),[f,m]=K.useState(""),[p,v]=K.useState(0),[E,S]=K.useState(null),[I,P]=K.useState({}),{vote:k,error:O,loading:B}=S5(n,(t==null?void 0:t.uid)||"anon");K.useEffect(()=>{const V=async()=>{const U=Fs(Mn,"bars",n),H=await ic(U);H.exists()&&r(H.data().nom)},D=ym(Mo(Mn,`bars/${n}/comments`),xL("timestamp","desc")),z=iy(D,U=>{const H=U.docs.map(G=>G.data());c(H)});return V(),()=>z()},[n]),K.useEffect(()=>{const V=ym(Mo(Mn,`bars/${n}/ambianceVotes`));return iy(V,D=>{var H;const z={};D.docs.forEach(G=>{const q=G.data().type;z[q]=(z[q]||0)+1}),P(z);const U=(H=Object.entries(z).sort((G,q)=>q[1]-G[1])[0])==null?void 0:H[0];S(U||null)})},[n]);const F=l.length?(l.reduce((V,D)=>V+D.rating,0)/l.length).toFixed(1):"Sin valoraciones",$=async V=>{if(V.preventDefault(),!f||p===0){alert("Por favor completa todos los campos.");return}try{let D="Anónimo";if(t!=null&&t.uid){const z=Fs(Mn,"users",t.uid),U=await ic(z);U.exists()&&(D=U.data().pseudo||"Anónimo")}await Ev(Mo(Mn,`bars/${n}/comments`),{uid:(t==null?void 0:t.uid)||"anon",nom:D,message:f,rating:p,timestamp:CL()}),m(""),v(0)}catch(D){console.error("Error al enviar comentario:",D),alert("Hubo un problema al enviar el comentario.")}},nt=async V=>{await k(V)?alert("¡Gracias por tu voto!"):O&&alert(O)},J=()=>{e("/mapa")},ht=V=>{const D=Math.floor(V),z=V-D>=.5,U=5-D-(z?1:0),H=[];for(let G=0;G<D;G++)H.push(Z.jsx("span",{className:"star active",children:"★"},`full-${G}`));z&&H.push(Z.jsx("span",{className:"star half",children:"★"},"half"));for(let G=0;G<U;G++)H.push(Z.jsx("span",{className:"star",children:"★"},`empty-${G}`));return H};return Z.jsxs("div",{className:"bar-page",children:[Z.jsx(oc,{}),Z.jsx("h2",{children:i}),Object.keys(I).length>0&&Z.jsxs(Z.Fragment,{children:[Z.jsx("h3",{className:"title-center",children:"Distribución de votos de ambiente:"}),Z.jsx(w5,{votes:I})]}),E&&Z.jsxs("div",{className:"dominant-ambiance",children:["Ambiente dominante: ",Z.jsxs("span",{className:`tag tag-${E}`,children:[n1[E]," ",i1(E)]})]}),Z.jsxs("div",{className:"rating",children:[Z.jsx("span",{className:"label",children:"Calificación promedio:"}),typeof F=="string"?Z.jsxs("span",{children:[" ",F]}):Z.jsxs(Z.Fragment,{children:[ht(parseFloat(F)),Z.jsxs("span",{className:"note-value",children:["(",F," / 5)"]}),Z.jsxs("span",{className:"comment-count",children:["• ",l.length," ",l.length===1?"comentario":"comentarios"]})]})]}),Z.jsx("h3",{children:"Comentarios:"}),Z.jsx("ul",{children:l.map((V,D)=>Z.jsxs("li",{children:[Z.jsx("strong",{children:V.nom})," – ⭐ ",V.rating,Z.jsx("br",{}),V.message]},D))}),Z.jsx("h3",{children:"Añadir comentario:"}),Z.jsxs("form",{onSubmit:$,className:"comment-form",children:[Z.jsx("textarea",{placeholder:"Escribe tu comentario...",value:f,onChange:V=>m(V.target.value),required:!0}),Z.jsx("div",{className:"stars",children:[1,2,3,4,5].map(V=>Z.jsx("span",{onClick:()=>v(V),className:V<=p?"star active":"star",children:"★"},V))}),Z.jsx("button",{type:"submit",children:"Enviar"})]}),Z.jsx("h3",{children:"Ambiente actual:"}),Z.jsx("div",{className:"ambiance-buttons",children:["calma","musica","ambiente","fiesta","lleno"].map(V=>Z.jsxs("button",{onClick:()=>nt(V),disabled:B,children:[n1[V]," ",i1(V)]},V))}),Z.jsx("button",{onClick:J,children:" Ver 🗺️"})]})},A5="Mael Develop",pI=2;let R5=new Date().getFullYear();function I5(){return"Stable"}const C5=` ${R5}, ${A5} in version ${pI} ${I5()}`,P5=()=>Z.jsx("div",{className:"footer",children:Z.jsxs("p",{className:"credits",children:["© ",C5]})}),M5=()=>{const n=Ho(),t=mp(),[e,i]=K.useState(()=>localStorage.getItem("darkMode")==="true"),[r,l]=K.useState(""),[c,f]=K.useState("free"),[m,p]=K.useState(!1),v=()=>{n("/")},E=()=>{const O=!e;i(O),localStorage.setItem("darkMode",String(O)),document.documentElement.classList.toggle("dark-mode",O)},S=()=>{window.confirm("¿Estás seguro de que quieres borrar los datos locales?")&&(localStorage.clear(),alert("Datos locales eliminados."))},I=async()=>{try{await mR(t),n("/login")}catch(O){alert("Error al cerrar sesión: "+O.message)}},P=async()=>{if(!t.currentUser||!r.trim())return;const O=Fs(Mn,"users",t.currentUser.uid);await bh(O,{pseudo:r}),p(!0),setTimeout(()=>p(!1),2e3)};K.useEffect(()=>{document.documentElement.classList.toggle("dark-mode",e)},[e]),K.useEffect(()=>{(async()=>{if(!t.currentUser)return;const B=Fs(Mn,"users",t.currentUser.uid),F=await ic(B);if(F.exists()){const $=F.data();l($.pseudo||""),f($.subscriptionStatus||"free")}})()},[t.currentUser]);const k=mI[c]??1;return Z.jsxs("div",{className:"settings-page",children:[Z.jsx(oc,{}),Z.jsx("h2",{children:"⚙️ Ajustes"}),Z.jsx("div",{className:"setting",children:Z.jsxs("label",{children:[Z.jsx("input",{type:"checkbox",checked:e,onChange:E}),"Modo oscuro"]})}),Z.jsxs("div",{className:"setting",children:[Z.jsxs("label",{children:["Nombre público:",Z.jsx("input",{type:"text",value:r,onChange:O=>l(O.target.value),className:"pseudo-input"})]}),Z.jsx("button",{className:"save-button",onClick:P,children:"Guardar"}),m&&Z.jsx("span",{className:"save-success",children:"✔️ Guardado"})]}),Z.jsx("div",{className:"setting",children:Z.jsxs("p",{className:"vote-limit",children:["🗳️ Límite de voto de ambiente: ",k," voto(s) cada ",dI," minutos (plan ",c,")"]})}),Z.jsx("div",{className:"setting",children:Z.jsx("button",{onClick:S,children:"🧹 Borrar datos locales"})}),Z.jsx("div",{className:"setting",children:Z.jsx("button",{className:"logout-button",onClick:I,children:"🔒 Cerrar sesión"})}),Z.jsx("button",{onClick:v,children:"Ir a inicio"}),Z.jsx("div",{className:"setting small",children:Z.jsxs("p",{children:["Versión: ",pI]})})]})},O5=()=>Z.jsxs("div",{className:"about-page",children:[Z.jsx(oc,{}),Z.jsx("h1",{children:"ℹ️ Sobre nosotros"}),Z.jsx("p",{children:"Tapas Radar es una aplicación que te permite encontrar los mejores bares de Madrid según su ambiente, en tiempo real. Vota el ambiente, descubre los lugares más animados y participa en la comunidad."}),Z.jsx("h2",{style:{marginTop:"2rem"},children:"💳 Tarifs & Abonnements"}),Z.jsxs("div",{className:"pricing-table",children:[Z.jsxs("div",{className:"plan",children:[Z.jsx("h3",{children:"Free"}),Z.jsx("p",{children:Z.jsx("strong",{children:"0 € / mes"})}),Z.jsxs("ul",{children:[Z.jsx("li",{children:"✅ 1 voto chaque 30 minutes"}),Z.jsx("li",{children:"✅ Accès à la carte en direct"}),Z.jsx("li",{children:"❌ Aucun badge"})]})]}),Z.jsxs("div",{className:"plan",children:[Z.jsx("h3",{children:"Premium"}),Z.jsx("p",{children:Z.jsx("strong",{children:"2,49 € / mois"})}),Z.jsxs("ul",{children:[Z.jsx("li",{children:"✅ 3 votes chaque 30 minutes"}),Z.jsx("li",{children:"✅ Badge Premium"}),Z.jsx("li",{children:"✅ Accès plus rapide"})]})]}),Z.jsxs("div",{className:"plan",children:[Z.jsx("h3",{children:"VIP"}),Z.jsx("p",{children:Z.jsx("strong",{children:"4,99 € / mois"})}),Z.jsxs("ul",{children:[Z.jsx("li",{children:"✅ Votes illimités"}),Z.jsx("li",{children:"✅ Badge VIP doré"}),Z.jsx("li",{children:"✅ Accès anticipé aux nouveautés"}),Z.jsx("li",{children:"✅ Soutien au développement"})]})]})]}),Z.jsx("p",{style:{marginTop:"1rem",fontStyle:"italic",fontSize:"0.9rem"},children:"Tous les paiements sont sécurisés via Stripe. Vous pouvez annuler à tout moment."}),Z.jsx("h2",{style:{marginTop:"3rem"},children:"❓ Preguntas frecuentes (FAQ)"}),Z.jsxs("div",{className:"faq-section",children:[Z.jsxs("div",{className:"faq-item",children:[Z.jsx("h3",{children:"🧭 ¿Qué es TapasRadar?"}),Z.jsx("p",{children:"Una app que muestra el ambiente actual de los bares, basada en los votos de los usuarios. Te ayuda a decidir dónde salir."})]}),Z.jsxs("div",{className:"faq-item",children:[Z.jsx("h3",{children:"🗳️ ¿Cómo funcionan los votos?"}),Z.jsx("p",{children:"Cada usuario puede votar una vez cada 30 minutos. Los usuarios Premium o VIP tienen más votos disponibles por hora."})]}),Z.jsxs("div",{className:"faq-item",children:[Z.jsx("h3",{children:"🏅 ¿Qué beneficios tienen los planes Premium y VIP?"}),Z.jsxs("ul",{children:[Z.jsxs("li",{children:[Z.jsx("strong",{children:"Premium:"})," Más votos por hora, acceso anticipado a nuevas funciones."]}),Z.jsxs("li",{children:[Z.jsx("strong",{children:"VIP:"})," Votos illimitados, badge doré, priorización en nuevas funcionalidades."]})]})]}),Z.jsxs("div",{className:"faq-item",children:[Z.jsx("h3",{children:"🆓 ¿La app es gratuita?"}),Z.jsx("p",{children:"Sí. Puedes consultar la información de los bares sin pagar. Solo los extras como los votos adicionales requieren una suscripción."})]}),Z.jsxs("div",{className:"faq-item",children:[Z.jsx("h3",{children:"📍 ¿Dónde funciona TapasRadar?"}),Z.jsx("p",{children:"Actualmente en Madrid, pero planeamos expandirnos a otras ciudades con la ayuda de la comunidad."})]}),Z.jsxs("div",{className:"faq-item",children:[Z.jsx("h3",{children:"🔒 ¿Qué pasa con mis datos?"}),Z.jsx("p",{children:"No compartimos ni vendemos tus datos. Todo se queda en Firebase, en servidores seguros."})]})]}),Z.jsxs("p",{style:{marginTop:"3rem"},children:["Creado por: ",Z.jsx("a",{href:"https://github.com/maeldevelop7",target:"_blank",rel:"noopener noreferrer",children:"Mael Gruand"})]})]}),D5=[{level:"Free",price:"0 €",benefits:["Accès limité","1 vote cada 30 minutos","Publicités"]},{level:"Premium",price:"2 € / mes",benefits:["Accès complet","5 votes cada 30 minutos","Sans publicités","Support prioritaire"]},{level:"VIP",price:"5 € / mes",benefits:["Accès illimité","10 votes cada 30 minutos","Sans publicités","Support premium 24/7","Fonctionnalités exclusives"]}],k5=()=>Z.jsxs("div",{style:{padding:20},children:[Z.jsx("h2",{children:"Tarifs des abonnements"}),Z.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[Z.jsx("thead",{children:Z.jsxs("tr",{style:{backgroundColor:"#eee"},children:[Z.jsx("th",{style:{border:"1px solid #ccc",padding:10},children:"Abonnement"}),Z.jsx("th",{style:{border:"1px solid #ccc",padding:10},children:"Prix"}),Z.jsx("th",{style:{border:"1px solid #ccc",padding:10},children:"Avantages"})]})}),Z.jsx("tbody",{children:D5.map(({level:n,price:t,benefits:e})=>Z.jsxs("tr",{children:[Z.jsx("td",{style:{border:"1px solid #ccc",padding:10,fontWeight:"bold"},children:n}),Z.jsx("td",{style:{border:"1px solid #ccc",padding:10},children:t}),Z.jsx("td",{style:{border:"1px solid #ccc",padding:10},children:Z.jsx("ul",{style:{margin:0,paddingLeft:20},children:e.map((i,r)=>Z.jsx("li",{children:i},r))})})]},n))})]})]}),L5=()=>{const{user:n,loading:t}=wp(),e=Ho(),[i,r]=K.useState("free"),[l,c]=K.useState(null),[f,m]=K.useState(null),[p,v]=K.useState(!0),[E,S]=K.useState(!1);K.useEffect(()=>{!t&&n&&(async()=>{try{v(!0);const B=Fs(Mn,"users",n.uid),F=await ic(B);if(F.exists()){const $=F.data();if($.subscriptionEnd&&$.subscriptionEnd.toDate){const nt=$.subscriptionEnd.toDate();c(nt),nt>new Date?r($.subscriptionStatus||"free"):(await bh(B,{subscriptionStatus:"free",subscriptionEnd:null,subscriptionStart:null}),r("free"),c(null))}else r($.subscriptionStatus||"free"),c(null)}else r("free"),c(null)}catch(B){m("Error al recuperar la suscripción"),console.error(B)}finally{v(!1)}})()},[t,n]);const I=async()=>{if(n){S(!0);try{const O=Fs(Mn,"users",n.uid),B=new Date,F=new Date(B.getTime()+30*24*60*60*1e3);await bh(O,{subscriptionStatus:"premium",subscriptionStart:B,subscriptionEnd:F}),r("premium"),c(F),m(null)}catch(O){m("Error al actualizar la suscripción"),console.error(O)}finally{S(!1)}}},P=async()=>{if(n){S(!0);try{const O=Fs(Mn,"users",n.uid),B=new Date,F=new Date(B.getTime()+30*24*60*60*1e3);await bh(O,{subscriptionStatus:"vip",subscriptionStart:B,subscriptionEnd:F}),r("vip"),c(F),m(null)}catch(O){m("Error al actualizar la suscripción"),console.error(O)}finally{S(!1)}}},k=async()=>{if(n){S(!0);try{const O=Fs(Mn,"users",n.uid);await bh(O,{subscriptionStatus:"free",subscriptionStart:null,subscriptionEnd:null}),r("free"),c(null),m(null)}catch(O){m("Error al actualizar la suscripción"),console.error(O)}finally{S(!1)}}};return t||p?Z.jsx("div",{children:"Cargando..."}):n?Z.jsxs(Z.Fragment,{children:[Z.jsx("br",{}),Z.jsx(oc,{}),Z.jsxs("div",{style:{padding:20},children:[Z.jsx("h1",{children:"Suscripción del usuario"}),Z.jsxs("p",{children:["UID: ",n.uid]}),Z.jsxs("p",{children:["Estado: ",Z.jsx("strong",{children:i.toUpperCase()})]}),(i==="premium"||i==="vip")&&l&&Z.jsxs("p",{children:["Fecha de expiración: ",l.toLocaleDateString()]}),f&&Z.jsx("p",{style:{color:"red"},children:f}),i==="free"&&Z.jsxs(Z.Fragment,{children:[Z.jsx("button",{onClick:I,disabled:E,children:E?"Procesando...":"Pasar a Premium (30 días)"}),Z.jsx("br",{}),Z.jsx("button",{onClick:P,disabled:E,style:{marginTop:10},children:E?"Procesando...":"Pasar a VIP (30 días)"})]}),(i==="premium"||i==="vip")&&Z.jsx("button",{onClick:k,disabled:E,style:{marginTop:10},children:E?"Procesando...":"Volver a estado Free"}),Z.jsx(k5,{}),Z.jsx("button",{onClick:()=>e("/"),style:{marginTop:20,display:"block"},children:"Volver al inicio"})]})]}):Z.jsx("div",{children:"Usuario no conectado."})},N5=({children:n})=>{const{user:t,loading:e}=wp(),i=Pr();return e?Z.jsx("div",{children:"Chargement..."}):!t||t.isAnonymous?Z.jsx(OP,{to:"/login",replace:!0,state:{from:i}}):n},Qn=mp(),V5=()=>{var $,nt;const n=Ho(),t=Pr(),[e,i]=K.useState(!0),[r,l]=K.useState(""),[c,f]=K.useState(""),[m,p]=K.useState(null),[v,E]=K.useState(null),S=((nt=($=t.state)==null?void 0:$.from)==null?void 0:nt.pathname)||"/",I=async J=>{const ht=Fs(Mn,"users",J.uid);(await ic(ht)).exists()||await IL(ht,{email:J.email||null,subscriptionStatus:"free",subscriptionStart:null,subscriptionEnd:null,createdAt:new Date,pseudo:J.email?J.email.split("@")[0]:"anónimo"})};async function P(J){var V;const ht=new wr;try{return(await y4(J,ht)).user}catch(D){if(D.code==="auth/credential-already-in-use"){const z=await jw(Qn,ht);try{(V=Qn.currentUser)!=null&&V.isAnonymous&&await Qn.currentUser.delete()}catch(U){console.warn("Erreur lors de la suppression de l’utilisateur anonyme",U)}return z.user}throw D}}async function k(J,ht,V){var z;const D=Ql.credential(ht,V);try{return(await $V(J,D)).user}catch(U){if(U.code==="auth/email-already-in-use"){const H=await zw(Qn,ht,V);try{(z=Qn.currentUser)!=null&&z.isAnonymous&&await Qn.currentUser.delete()}catch(G){console.warn("Erreur lors de la suppression de l’utilisateur anonyme",G)}return H.user}throw U}}K.useEffect(()=>{const J=Vv(Qn,async ht=>{if(ht)E(ht),await I(ht),i(!1);else try{await uR(Qn)}catch{p("Error en la conexión anónima"),i(!1)}});return()=>J()},[]);const O=async()=>{p(null),i(!0);try{const J=Qn.currentUser;if(J&&J.isAnonymous){const ht=await P(J);await I(ht),E(ht)}else{const ht=await jw(Qn,new wr);await I(ht.user),E(ht.user)}n(S)}catch(J){p(J.message)}finally{i(!1)}},B=async()=>{p(null),i(!0);try{const J=Qn.currentUser;if(J&&J.isAnonymous){const ht=await k(J,r,c);await I(ht),E(ht)}else await zw(Qn,r,c),Qn.currentUser&&(await I(Qn.currentUser),E(Qn.currentUser));n(S)}catch(J){p(J.message)}finally{i(!1)}},F=async()=>{p(null),i(!0);try{const J=await KV(Qn,r,c);await I(J.user),E(J.user),n(S)}catch(J){p(J.message)}finally{i(!1)}};return e?Z.jsx("div",{children:"Cargando..."}):Z.jsxs("div",{style:{maxWidth:400,margin:"auto",padding:20},children:[Z.jsx("h1",{children:"Acceder a TapasMadrid"}),m&&Z.jsx("p",{style:{color:"red"},children:m}),Z.jsx("button",{onClick:O,style:{width:"100%",marginBottom:10},children:"Iniciar sesión con Google"}),Z.jsx("hr",{}),Z.jsx("input",{type:"email",placeholder:"Correo electrónico",value:r,onChange:J=>l(J.target.value),style:{width:"100%",marginTop:10,padding:8}}),Z.jsx("input",{type:"password",placeholder:"Contraseña",value:c,onChange:J=>f(J.target.value),style:{width:"100%",marginTop:10,padding:8}}),Z.jsx("button",{onClick:B,style:{width:"100%",marginTop:10},children:"Iniciar sesión"}),Z.jsx("button",{onClick:F,style:{width:"100%",marginTop:10},children:"Crear cuenta"})]})},z5=()=>{const{user:n,loading:t}=wp();return t?Z.jsx("p",{children:"Cargando..."}):n?(console.log(`Conectado anónimamente con UID ${n.uid}`),Z.jsx(Z.Fragment,{children:Z.jsxs(s2,{children:[Z.jsxs(kP,{children:[Z.jsx(ra,{path:"/",element:Z.jsx(_2,{})}),Z.jsx(ra,{path:"/mapa",element:Z.jsx(h3,{})}),Z.jsx(ra,{path:"/añadir",element:Z.jsx(Y3,{})}),Z.jsx(ra,{path:"/bar/:id",element:Z.jsx(x5,{})})," ",Z.jsx(ra,{path:"/settings",element:Z.jsx(M5,{})}),Z.jsx(ra,{path:"/about",element:Z.jsx(O5,{})}),Z.jsx(ra,{path:"/abonnement",element:Z.jsx(N5,{children:Z.jsx(L5,{})})}),Z.jsx(ra,{path:"/login",element:Z.jsx(V5,{})})]}),Z.jsx(P5,{}),Z.jsx(W3,{})]})})):Z.jsx("p",{children:"Problema de authentificación"})},B5="modulepreload",U5=function(n){return"/TapasMadrid/"+n},s1={},j5=function(t,e,i){let r=Promise.resolve();if(e&&e.length>0){let c=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));r=c(e.map(p=>{if(p=U5(p),p in s1)return;s1[p]=!0;const v=p.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${E}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":B5,v||(S.as="script"),S.crossOrigin="",S.href=p,m&&S.setAttribute("nonce",m),document.head.appendChild(S),v)return new Promise((I,P)=>{S.addEventListener("load",I),S.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return r.then(c=>{for(const f of c||[])f.status==="rejected"&&l(f.reason);return t().catch(l)})};function H5(n={}){const{immediate:t=!1,onNeedRefresh:e,onOfflineReady:i,onRegistered:r,onRegisteredSW:l,onRegisterError:c}=n;let f,m;const p=async(E=!0)=>{await m};async function v(){if("serviceWorker"in navigator){if(f=await j5(async()=>{const{Workbox:E}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:E}},[]).then(({Workbox:E})=>new E("/TapasMadrid/sw.js",{scope:"/TapasMadrid/",type:"classic"})).catch(E=>{c==null||c(E)}),!f)return;f.addEventListener("activated",E=>{(E.isUpdate||E.isExternal)&&window.location.reload()}),f.addEventListener("installed",E=>{E.isUpdate||i==null||i()}),f.register({immediate:t}).then(E=>{l?l("/TapasMadrid/sw.js",E):r==null||r(E)}).catch(E=>{c==null||c(E)})}}return m=v(),p}const F5=K.createContext({user:null,userData:null,loading:!0,logout:async()=>{}}),q5=({children:n})=>{const t=mp(),[e,i]=K.useState(null),[r,l]=K.useState(null),[c,f]=K.useState(!0);K.useEffect(()=>{const p=Vv(t,async v=>{if(i(v),v){const E=Fs(Mn,"users",v.uid),S=await ic(E);if(S.exists()){const I=S.data();l({uid:v.uid,email:v.email,subscriptionStatus:I.subscriptionStatus??"free",subscriptionStart:I.subscriptionStart?I.subscriptionStart.toDate():null,subscriptionEnd:I.subscriptionEnd?I.subscriptionEnd.toDate():null})}else l(null)}else l(null);f(!1)});return()=>p()},[t]);const m=async()=>{f(!0),await mR(t),i(null),l(null),f(!1)};return Z.jsx(F5.Provider,{value:{user:e,userData:r,loading:c,logout:m},children:n})};jC.createRoot(document.getElementById("root")).render(Z.jsx(ge.StrictMode,{children:Z.jsx(q5,{children:Z.jsx(z5,{})})}));H5({onNeedRefresh(){confirm("Nueva versión disponible. ¿Recargar la página?")&&window.location.reload()},onOfflineReady(){console.log("TapasRadar está disponible sin conexión.")}});
