var KC=Object.defineProperty;var XC=(n,t,e)=>t in n?KC(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Xt=(n,t,e)=>XC(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();function ey(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ng={exports:{}},$c={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _T;function QC(){if(_T)return $c;_T=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:l}}return $c.Fragment=t,$c.jsx=e,$c.jsxs=e,$c}var yT;function JC(){return yT||(yT=1,Ng.exports=QC()),Ng.exports}var ht=JC(),Vg={exports:{}},Kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT;function tI(){if(vT)return Kt;vT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.iterator;function S(B){return B===null||typeof B!="object"?null:(B=w&&B[w]||B["@@iterator"],typeof B=="function"?B:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,D={};function N(B,ut,Tt){this.props=B,this.context=ut,this.refs=D,this.updater=Tt||C}N.prototype.isReactComponent={},N.prototype.setState=function(B,ut){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ut,"setState")},N.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function j(){}j.prototype=N.prototype;function q(B,ut,Tt){this.props=B,this.context=ut,this.refs=D,this.updater=Tt||C}var Y=q.prototype=new j;Y.constructor=q,M(Y,N.prototype),Y.isPureReactComponent=!0;var it=Array.isArray,lt={H:null,A:null,T:null,S:null,V:null},bt=Object.prototype.hasOwnProperty;function V(B,ut,Tt,_t,St,xt){return Tt=xt.ref,{$$typeof:n,type:B,key:ut,ref:Tt!==void 0?Tt:null,props:xt}}function P(B,ut){return V(B.type,ut,void 0,void 0,void 0,B.props)}function z(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function U(B){var ut={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Tt){return ut[Tt]})}var H=/\/+/g;function G(B,ut){return typeof B=="object"&&B!==null&&B.key!=null?U(""+B.key):ut.toString(36)}function F(){}function Yt(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(F,F):(B.status="pending",B.then(function(ut){B.status==="pending"&&(B.status="fulfilled",B.value=ut)},function(ut){B.status==="pending"&&(B.status="rejected",B.reason=ut)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function kt(B,ut,Tt,_t,St){var xt=typeof B;(xt==="undefined"||xt==="boolean")&&(B=null);var wt=!1;if(B===null)wt=!0;else switch(xt){case"bigint":case"string":case"number":wt=!0;break;case"object":switch(B.$$typeof){case n:case t:wt=!0;break;case b:return wt=B._init,kt(wt(B._payload),ut,Tt,_t,St)}}if(wt)return St=St(B),wt=_t===""?"."+G(B,0):_t,it(St)?(Tt="",wt!=null&&(Tt=wt.replace(H,"$&/")+"/"),kt(St,ut,Tt,"",function(Ei){return Ei})):St!=null&&(z(St)&&(St=P(St,Tt+(St.key==null||B&&B.key===St.key?"":(""+St.key).replace(H,"$&/")+"/")+wt)),ut.push(St)),1;wt=0;var xe=_t===""?".":_t+":";if(it(B))for(var le=0;le<B.length;le++)_t=B[le],xt=xe+G(_t,le),wt+=kt(_t,ut,Tt,xt,St);else if(le=S(B),typeof le=="function")for(B=le.call(B),le=0;!(_t=B.next()).done;)_t=_t.value,xt=xe+G(_t,le++),wt+=kt(_t,ut,Tt,xt,St);else if(xt==="object"){if(typeof B.then=="function")return kt(Yt(B),ut,Tt,_t,St);throw ut=String(B),Error("Objects are not valid as a React child (found: "+(ut==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ut)+"). If you meant to render a collection of children, use an array instead.")}return wt}function tt(B,ut,Tt){if(B==null)return B;var _t=[],St=0;return kt(B,_t,"","",function(xt){return ut.call(Tt,xt,St++)}),_t}function yt(B){if(B._status===-1){var ut=B._result;ut=ut(),ut.then(function(Tt){(B._status===0||B._status===-1)&&(B._status=1,B._result=Tt)},function(Tt){(B._status===0||B._status===-1)&&(B._status=2,B._result=Tt)}),B._status===-1&&(B._status=0,B._result=ut)}if(B._status===1)return B._result.default;throw B._result}var dt=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ut=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(ut))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function Vt(){}return Kt.Children={map:tt,forEach:function(B,ut,Tt){tt(B,function(){ut.apply(this,arguments)},Tt)},count:function(B){var ut=0;return tt(B,function(){ut++}),ut},toArray:function(B){return tt(B,function(ut){return ut})||[]},only:function(B){if(!z(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Kt.Component=N,Kt.Fragment=e,Kt.Profiler=r,Kt.PureComponent=q,Kt.StrictMode=i,Kt.Suspense=m,Kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=lt,Kt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return lt.H.useMemoCache(B)}},Kt.cache=function(B){return function(){return B.apply(null,arguments)}},Kt.cloneElement=function(B,ut,Tt){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var _t=M({},B.props),St=B.key,xt=void 0;if(ut!=null)for(wt in ut.ref!==void 0&&(xt=void 0),ut.key!==void 0&&(St=""+ut.key),ut)!bt.call(ut,wt)||wt==="key"||wt==="__self"||wt==="__source"||wt==="ref"&&ut.ref===void 0||(_t[wt]=ut[wt]);var wt=arguments.length-2;if(wt===1)_t.children=Tt;else if(1<wt){for(var xe=Array(wt),le=0;le<wt;le++)xe[le]=arguments[le+2];_t.children=xe}return V(B.type,St,void 0,void 0,xt,_t)},Kt.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:l,_context:B},B},Kt.createElement=function(B,ut,Tt){var _t,St={},xt=null;if(ut!=null)for(_t in ut.key!==void 0&&(xt=""+ut.key),ut)bt.call(ut,_t)&&_t!=="key"&&_t!=="__self"&&_t!=="__source"&&(St[_t]=ut[_t]);var wt=arguments.length-2;if(wt===1)St.children=Tt;else if(1<wt){for(var xe=Array(wt),le=0;le<wt;le++)xe[le]=arguments[le+2];St.children=xe}if(B&&B.defaultProps)for(_t in wt=B.defaultProps,wt)St[_t]===void 0&&(St[_t]=wt[_t]);return V(B,xt,void 0,void 0,null,St)},Kt.createRef=function(){return{current:null}},Kt.forwardRef=function(B){return{$$typeof:d,render:B}},Kt.isValidElement=z,Kt.lazy=function(B){return{$$typeof:b,_payload:{_status:-1,_result:B},_init:yt}},Kt.memo=function(B,ut){return{$$typeof:g,type:B,compare:ut===void 0?null:ut}},Kt.startTransition=function(B){var ut=lt.T,Tt={};lt.T=Tt;try{var _t=B(),St=lt.S;St!==null&&St(Tt,_t),typeof _t=="object"&&_t!==null&&typeof _t.then=="function"&&_t.then(Vt,dt)}catch(xt){dt(xt)}finally{lt.T=ut}},Kt.unstable_useCacheRefresh=function(){return lt.H.useCacheRefresh()},Kt.use=function(B){return lt.H.use(B)},Kt.useActionState=function(B,ut,Tt){return lt.H.useActionState(B,ut,Tt)},Kt.useCallback=function(B,ut){return lt.H.useCallback(B,ut)},Kt.useContext=function(B){return lt.H.useContext(B)},Kt.useDebugValue=function(){},Kt.useDeferredValue=function(B,ut){return lt.H.useDeferredValue(B,ut)},Kt.useEffect=function(B,ut,Tt){var _t=lt.H;if(typeof Tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return _t.useEffect(B,ut)},Kt.useId=function(){return lt.H.useId()},Kt.useImperativeHandle=function(B,ut,Tt){return lt.H.useImperativeHandle(B,ut,Tt)},Kt.useInsertionEffect=function(B,ut){return lt.H.useInsertionEffect(B,ut)},Kt.useLayoutEffect=function(B,ut){return lt.H.useLayoutEffect(B,ut)},Kt.useMemo=function(B,ut){return lt.H.useMemo(B,ut)},Kt.useOptimistic=function(B,ut){return lt.H.useOptimistic(B,ut)},Kt.useReducer=function(B,ut,Tt){return lt.H.useReducer(B,ut,Tt)},Kt.useRef=function(B){return lt.H.useRef(B)},Kt.useState=function(B){return lt.H.useState(B)},Kt.useSyncExternalStore=function(B,ut,Tt){return lt.H.useSyncExternalStore(B,ut,Tt)},Kt.useTransition=function(){return lt.H.useTransition()},Kt.version="19.1.0",Kt}var bT;function ny(){return bT||(bT=1,Vg.exports=tI()),Vg.exports}var K=ny();const ge=ey(K);var zg={exports:{}},Kc={},Bg={exports:{}},Ug={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TT;function eI(){return TT||(TT=1,function(n){function t(tt,yt){var dt=tt.length;tt.push(yt);t:for(;0<dt;){var Vt=dt-1>>>1,B=tt[Vt];if(0<r(B,yt))tt[Vt]=yt,tt[dt]=B,dt=Vt;else break t}}function e(tt){return tt.length===0?null:tt[0]}function i(tt){if(tt.length===0)return null;var yt=tt[0],dt=tt.pop();if(dt!==yt){tt[0]=dt;t:for(var Vt=0,B=tt.length,ut=B>>>1;Vt<ut;){var Tt=2*(Vt+1)-1,_t=tt[Tt],St=Tt+1,xt=tt[St];if(0>r(_t,dt))St<B&&0>r(xt,_t)?(tt[Vt]=xt,tt[St]=dt,Vt=St):(tt[Vt]=_t,tt[Tt]=dt,Vt=Tt);else if(St<B&&0>r(xt,dt))tt[Vt]=xt,tt[St]=dt,Vt=St;else break t}}return yt}function r(tt,yt){var dt=tt.sortIndex-yt.sortIndex;return dt!==0?dt:tt.id-yt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],b=1,w=null,S=3,C=!1,M=!1,D=!1,N=!1,j=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function it(tt){for(var yt=e(g);yt!==null;){if(yt.callback===null)i(g);else if(yt.startTime<=tt)i(g),yt.sortIndex=yt.expirationTime,t(m,yt);else break;yt=e(g)}}function lt(tt){if(D=!1,it(tt),!M)if(e(m)!==null)M=!0,bt||(bt=!0,G());else{var yt=e(g);yt!==null&&kt(lt,yt.startTime-tt)}}var bt=!1,V=-1,P=5,z=-1;function U(){return N?!0:!(n.unstable_now()-z<P)}function H(){if(N=!1,bt){var tt=n.unstable_now();z=tt;var yt=!0;try{t:{M=!1,D&&(D=!1,q(V),V=-1),C=!0;var dt=S;try{e:{for(it(tt),w=e(m);w!==null&&!(w.expirationTime>tt&&U());){var Vt=w.callback;if(typeof Vt=="function"){w.callback=null,S=w.priorityLevel;var B=Vt(w.expirationTime<=tt);if(tt=n.unstable_now(),typeof B=="function"){w.callback=B,it(tt),yt=!0;break e}w===e(m)&&i(m),it(tt)}else i(m);w=e(m)}if(w!==null)yt=!0;else{var ut=e(g);ut!==null&&kt(lt,ut.startTime-tt),yt=!1}}break t}finally{w=null,S=dt,C=!1}yt=void 0}}finally{yt?G():bt=!1}}}var G;if(typeof Y=="function")G=function(){Y(H)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Yt=F.port2;F.port1.onmessage=H,G=function(){Yt.postMessage(null)}}else G=function(){j(H,0)};function kt(tt,yt){V=j(function(){tt(n.unstable_now())},yt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(tt){tt.callback=null},n.unstable_forceFrameRate=function(tt){0>tt||125<tt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<tt?Math.floor(1e3/tt):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(tt){switch(S){case 1:case 2:case 3:var yt=3;break;default:yt=S}var dt=S;S=yt;try{return tt()}finally{S=dt}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function(tt,yt){switch(tt){case 1:case 2:case 3:case 4:case 5:break;default:tt=3}var dt=S;S=tt;try{return yt()}finally{S=dt}},n.unstable_scheduleCallback=function(tt,yt,dt){var Vt=n.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?Vt+dt:Vt):dt=Vt,tt){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=dt+B,tt={id:b++,callback:yt,priorityLevel:tt,startTime:dt,expirationTime:B,sortIndex:-1},dt>Vt?(tt.sortIndex=dt,t(g,tt),e(m)===null&&tt===e(g)&&(D?(q(V),V=-1):D=!0,kt(lt,dt-Vt))):(tt.sortIndex=B,t(m,tt),M||C||(M=!0,bt||(bt=!0,G()))),tt},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(tt){var yt=S;return function(){var dt=S;S=yt;try{return tt.apply(this,arguments)}finally{S=dt}}}}(Ug)),Ug}var wT;function nI(){return wT||(wT=1,Bg.exports=eI()),Bg.exports}var Hg={exports:{}},Yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ET;function iI(){if(ET)return Yn;ET=1;var n=ny();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(m,g,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:w==null?null:""+w,children:m,containerInfo:g,implementation:b}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Yn.createPortal=function(m,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(m,g,null,b)},Yn.flushSync=function(m){var g=c.T,b=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=g,i.p=b,i.d.f()}},Yn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},Yn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Yn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var b=g.as,w=d(b,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:C}):b==="script"&&i.d.X(m,{crossOrigin:w,integrity:S,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Yn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=d(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},Yn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,w=d(b,g.crossOrigin);i.d.L(m,b,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Yn.preloadModule=function(m,g){if(typeof m=="string")if(g){var b=d(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},Yn.requestFormReset=function(m){i.d.r(m)},Yn.unstable_batchedUpdates=function(m,g){return m(g)},Yn.useFormState=function(m,g,b){return c.H.useFormState(m,g,b)},Yn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Yn.version="19.1.0",Yn}var ST;function IS(){if(ST)return Hg.exports;ST=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Hg.exports=iI(),Hg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AT;function sI(){if(AT)return Kc;AT=1;var n=nI(),t=ny(),e=IS();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(l(s)!==s)throw Error(i(188))}function m(s){var a=s.alternate;if(!a){if(a=l(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,f=a;;){var y=u.return;if(y===null)break;var v=y.alternate;if(v===null){if(f=y.return,f!==null){u=f;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===u)return d(y),s;if(v===f)return d(y),a;v=v.sibling}throw Error(i(188))}if(u.return!==f.return)u=y,f=v;else{for(var R=!1,O=y.child;O;){if(O===u){R=!0,u=y,f=v;break}if(O===f){R=!0,f=y,u=v;break}O=O.sibling}if(!R){for(O=v.child;O;){if(O===u){R=!0,u=v,f=y;break}if(O===f){R=!0,f=v,u=y;break}O=O.sibling}if(!R)throw Error(i(189))}}if(u.alternate!==f)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function g(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=g(s),a!==null)return a;s=s.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),it=Symbol.for("react.forward_ref"),lt=Symbol.for("react.suspense"),bt=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var F=Symbol.for("react.client.reference");function Yt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===F?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case N:return"Profiler";case D:return"StrictMode";case lt:return"Suspense";case bt:return"SuspenseList";case z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case C:return"Portal";case Y:return(s.displayName||"Context")+".Provider";case q:return(s._context.displayName||"Context")+".Consumer";case it:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return a=s.displayName||null,a!==null?a:Yt(s.type)||"Memo";case P:a=s._payload,s=s._init;try{return Yt(s(a))}catch{}}return null}var kt=Array.isArray,tt=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt={pending:!1,data:null,method:null,action:null},Vt=[],B=-1;function ut(s){return{current:s}}function Tt(s){0>B||(s.current=Vt[B],Vt[B]=null,B--)}function _t(s,a){B++,Vt[B]=s.current,s.current=a}var St=ut(null),xt=ut(null),wt=ut(null),xe=ut(null);function le(s,a){switch(_t(wt,a),_t(xt,s),_t(St,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Gb(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Gb(a),s=Zb(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Tt(St),_t(St,s)}function Ei(){Tt(St),Tt(xt),Tt(wt)}function Wi(s){s.memoizedState!==null&&_t(xe,s);var a=St.current,u=Zb(a,s.type);a!==u&&(_t(xt,s),_t(St,u))}function Si(s){xt.current===s&&(Tt(St),Tt(xt)),xe.current===s&&(Tt(xe),qc._currentValue=dt)}var Ai=Object.prototype.hasOwnProperty,_s=n.unstable_scheduleCallback,wr=n.unstable_cancelCallback,ma=n.unstable_shouldYield,No=n.unstable_requestPaint,Un=n.unstable_now,pa=n.unstable_getCurrentPriorityLevel,Vo=n.unstable_ImmediatePriority,Er=n.unstable_UserBlockingPriority,ys=n.unstable_NormalPriority,ql=n.unstable_LowPriority,Sr=n.unstable_IdlePriority,zo=n.log,Gl=n.unstable_setDisableYieldValue,De=null,fe=null;function Hn(s){if(typeof zo=="function"&&Gl(s),fe&&typeof fe.setStrictMode=="function")try{fe.setStrictMode(De,s)}catch{}}var bn=Math.clz32?Math.clz32:Ar,Bo=Math.log,Zl=Math.LN2;function Ar(s){return s>>>=0,s===0?32:31-(Bo(s)/Zl|0)|0}var qs=256,vs=4194304;function ui(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ga(s,a,u){var f=s.pendingLanes;if(f===0)return 0;var y=0,v=s.suspendedLanes,R=s.pingedLanes;s=s.warmLanes;var O=f&134217727;return O!==0?(f=O&~v,f!==0?y=ui(f):(R&=O,R!==0?y=ui(R):u||(u=O&~s,u!==0&&(y=ui(u))))):(O=f&~v,O!==0?y=ui(O):R!==0?y=ui(R):u||(u=f&~s,u!==0&&(y=ui(u)))),y===0?0:a!==0&&a!==y&&(a&v)===0&&(v=y&-y,u=a&-a,v>=u||v===32&&(u&4194048)!==0)?a:y}function xi(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Uo(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ho(){var s=qs;return qs<<=1,(qs&4194048)===0&&(qs=256),s}function _a(){var s=vs;return vs<<=1,(vs&62914560)===0&&(vs=4194304),s}function Yi(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function $i(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function jo(s,a,u,f,y,v){var R=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var O=s.entanglements,W=s.expirationTimes,nt=s.hiddenUpdates;for(u=R&~u;0<u;){var ct=31-bn(u),mt=1<<ct;O[ct]=0,W[ct]=-1;var st=nt[ct];if(st!==null)for(nt[ct]=null,ct=0;ct<st.length;ct++){var rt=st[ct];rt!==null&&(rt.lane&=-536870913)}u&=~mt}f!==0&&Ki(s,f,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(R&~a))}function Ki(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var f=31-bn(a);s.entangledLanes|=a,s.entanglements[f]=s.entanglements[f]|1073741824|u&4194090}function Fo(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var f=31-bn(u),y=1<<f;y&a|s[f]&a&&(s[f]|=a),u&=~y}}function Gs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ya(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Zs(){var s=yt.p;return s!==0?s:(s=window.event,s===void 0?32:hT(s.type))}function va(s,a){var u=yt.p;try{return yt.p=s,a()}finally{yt.p=u}}var ke=Math.random().toString(36).slice(2),Je="__reactFiber$"+ke,Ke="__reactProps$"+ke,ci="__reactContainer$"+ke,jn="__reactEvents$"+ke,Pt="__reactListeners$"+ke,bs="__reactHandles$"+ke,qo="__reactResources$"+ke,Ws="__reactMarker$"+ke;function Ts(s){delete s[Je],delete s[Ke],delete s[jn],delete s[Pt],delete s[bs]}function Ri(s){var a=s[Je];if(a)return a;for(var u=s.parentNode;u;){if(a=u[ci]||u[Je]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Kb(s);s!==null;){if(u=s[Je])return u;s=Kb(s)}return a}s=u,u=s.parentNode}return null}function Ci(s){if(s=s[Je]||s[ci]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function Mn(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function Tn(s){var a=s[qo];return a||(a=s[qo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ge(s){s[Ws]=!0}var Go=new Set,ba={};function Ii(s,a){Xi(s,a),Xi(s+"Capture",a)}function Xi(s,a){for(ba[s]=a,s=0;s<a.length;s++)Go.add(a[s])}var Wl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xr={},Rr={};function Yl(s){return Ai.call(Rr,s)?!0:Ai.call(xr,s)?!1:Wl.test(s)?Rr[s]=!0:(xr[s]=!0,!1)}function Ys(s,a,u){if(Yl(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function Qi(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function mn(s,a,u,f){if(f===null)s.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+f)}}var ws,$s;function Ji(s){if(ws===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);ws=a&&a[1]||"",$s=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ws+s+$s}var Cr=!1;function ts(s,a){if(!s||Cr)return"";Cr=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var mt=function(){throw Error()};if(Object.defineProperty(mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mt,[])}catch(rt){var st=rt}Reflect.construct(s,[],mt)}else{try{mt.call()}catch(rt){st=rt}s.call(mt.prototype)}}else{try{throw Error()}catch(rt){st=rt}(mt=s())&&typeof mt.catch=="function"&&mt.catch(function(){})}}catch(rt){if(rt&&st&&typeof rt.stack=="string")return[rt.stack,st.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=f.DetermineComponentFrameRoot(),R=v[0],O=v[1];if(R&&O){var W=R.split(`
`),nt=O.split(`
`);for(y=f=0;f<W.length&&!W[f].includes("DetermineComponentFrameRoot");)f++;for(;y<nt.length&&!nt[y].includes("DetermineComponentFrameRoot");)y++;if(f===W.length||y===nt.length)for(f=W.length-1,y=nt.length-1;1<=f&&0<=y&&W[f]!==nt[y];)y--;for(;1<=f&&0<=y;f--,y--)if(W[f]!==nt[y]){if(f!==1||y!==1)do if(f--,y--,0>y||W[f]!==nt[y]){var ct=`
`+W[f].replace(" at new "," at ");return s.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",s.displayName)),ct}while(1<=f&&0<=y);break}}}finally{Cr=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Ji(u):""}function te(s){switch(s.tag){case 26:case 27:case 5:return Ji(s.type);case 16:return Ji("Lazy");case 13:return Ji("Suspense");case 19:return Ji("SuspenseList");case 0:case 15:return ts(s.type,!1);case 11:return ts(s.type.render,!1);case 1:return ts(s.type,!0);case 31:return Ji("Activity");default:return""}}function _e(s){try{var a="";do a+=te(s),s=s.return;while(s);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function on(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function es(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ks(s){var a=es(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),f=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,v=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return y.call(this)},set:function(R){f=""+R,v.call(this,R)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(R){f=""+R},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Xs(s){s._valueTracker||(s._valueTracker=Ks(s))}function Gt(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return s&&(f=es(s)?s.checked?"true":"false":s.value),s=f,s!==u?(a.setValue(s),!0):!1}function be(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Zo=/[\n"\\]/g;function Be(s){return s.replace(Zo,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Le(s,a,u,f,y,v,R,O){s.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.type=R:s.removeAttribute("type"),a!=null?R==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+on(a)):s.value!==""+on(a)&&(s.value=""+on(a)):R!=="submit"&&R!=="reset"||s.removeAttribute("value"),a!=null?Mi(s,R,on(a)):u!=null?Mi(s,R,on(u)):f!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?s.name=""+on(O):s.removeAttribute("name")}function Ir(s,a,u,f,y,v,R,O){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),a!=null||u!=null){if(!(v!=="submit"&&v!=="reset"||a!=null))return;u=u!=null?""+on(u):"",a=a!=null?""+on(a):u,O||a===s.value||(s.value=a),s.defaultValue=a}f=f??y,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=O?s.checked:!!f,s.defaultChecked=!!f,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(s.name=R)}function Mi(s,a,u){a==="number"&&be(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function On(s,a,u,f){if(s=s.options,a){a={};for(var y=0;y<u.length;y++)a["$"+u[y]]=!0;for(u=0;u<s.length;u++)y=a.hasOwnProperty("$"+s[u].value),s[u].selected!==y&&(s[u].selected=y),y&&f&&(s[u].defaultSelected=!0)}else{for(u=""+on(u),a=null,y=0;y<s.length;y++){if(s[y].value===u){s[y].selected=!0,f&&(s[y].defaultSelected=!0);return}a!==null||s[y].disabled||(a=s[y])}a!==null&&(a.selected=!0)}}function Ut(s,a,u){if(a!=null&&(a=""+on(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+on(u):""}function ei(s,a,u,f){if(a==null){if(f!=null){if(u!=null)throw Error(i(92));if(kt(f)){if(1<f.length)throw Error(i(93));f=f[0]}u=f}u==null&&(u=""),a=u}u=on(a),s.defaultValue=u,f=s.textContent,f===u&&f!==""&&f!==null&&(s.value=f)}function wn(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Oi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ta(s,a,u){var f=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":f?s.setProperty(a,u):typeof u!="number"||u===0||Oi.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function Es(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var y in a)f=a[y],a.hasOwnProperty(y)&&u[y]!==f&&Ta(s,y,f)}else for(var v in a)a.hasOwnProperty(v)&&Ta(s,v,a[v])}function Mr(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qs(s){return wa.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Pi=null;function Pn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ns=null,Di=null;function Yo(s){var a=Ci(s);if(a&&(s=a.stateNode)){var u=s[Ke]||null;t:switch(s=a.stateNode,a.type){case"input":if(Le(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Be(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==s&&f.form===s.form){var y=f[Ke]||null;if(!y)throw Error(i(90));Le(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<u.length;a++)f=u[a],f.form===s.form&&Gt(f)}break t;case"textarea":Ut(s,u.value,u.defaultValue);break t;case"select":a=u.value,a!=null&&On(s,!!u.multiple,a,!1)}}}var Nt=!1;function ni(s,a,u){if(Nt)return s(a,u);Nt=!0;try{var f=s(a);return f}finally{if(Nt=!1,(ns!==null||Di!==null)&&(Ff(),ns&&(a=ns,s=Di,Di=ns=null,Yo(a),s)))for(a=0;a<s.length;a++)Yo(s[a])}}function ue(s,a){var u=s.stateNode;if(u===null)return null;var f=u[Ke]||null;if(f===null)return null;u=f[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break t;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fn=!1;if(hi)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){Fn=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{Fn=!1}var fi=null,qn=null,ki=null;function As(){if(ki)return ki;var s,a=qn,u=a.length,f,y="value"in fi?fi.value:fi.textContent,v=y.length;for(s=0;s<u&&a[s]===y[s];s++);var R=u-s;for(f=1;f<=R&&a[u-f]===y[v-f];f++);return ki=y.slice(s,1<f?1-f:void 0)}function Re(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function En(){return!0}function Ea(){return!1}function tn(s){function a(u,f,y,v,R){this._reactName=u,this._targetInst=y,this.type=f,this.nativeEvent=v,this.target=R,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(u=s[O],this[O]=u?u(v):v[O]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?En:Ea,this.isPropagationStopped=Ea,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=En)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=En)},persist:function(){},isPersistent:En}),a}var de={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Or=tn(de),xs=b({},de,{view:0,detail:0}),$l=tn(xs),Pr,$t,is,pn=b({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==is&&(is&&s.type==="mousemove"?(Pr=s.screenX-is.screenX,$t=s.screenY-is.screenY):$t=Pr=0,is=s),Pr)},movementY:function(s){return"movementY"in s?s.movementY:$t}}),Sn=tn(pn),$o=b({},pn,{dataTransfer:0}),oc=tn($o),Rs=b({},xs,{relatedTarget:0}),Sa=tn(Rs),Aa=b({},de,{animationName:0,elapsedTime:0,pseudoElement:0}),xa=tn(Aa),Kl=b({},de,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Js=tn(Kl),lc=b({},de,{data:0}),Gn=tn(lc),Dr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ko={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Li={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ra(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Li[s])?!!a[s]:!1}function tr(){return Ra}var Ca=b({},xs,{key:function(s){if(s.key){var a=Dr[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Re(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ko[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(s){return s.type==="keypress"?Re(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Re(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ia=tn(Ca),Xo=b({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ma=tn(Xo),Cs=b({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),Xl=tn(Cs),Oa=b({},de,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ql=tn(Oa),Qo=b({},pn,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),kr=tn(Qo),ln=b({},de,{newState:0,oldState:0}),ss=tn(ln),Jl=[9,13,27,32],Zn=hi&&"CompositionEvent"in window,p=null;hi&&"documentMode"in document&&(p=document.documentMode);var E=hi&&"TextEvent"in window&&!p,x=hi&&(!Zn||p&&8<p&&11>=p),k=" ",Q=!1;function ot(s,a){switch(s){case"keyup":return Jl.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Et(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var se=!1;function Xe(s,a){switch(s){case"compositionend":return Et(a);case"keypress":return a.which!==32?null:(Q=!0,k);case"textInput":return s=a.data,s===k&&Q?null:s;default:return null}}function re(s,a){if(se)return s==="compositionend"||!Zn&&ot(s,a)?(s=As(),ki=qn=fi=null,se=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return x&&a.locale!=="ko"?null:a.data;default:return null}}var ye={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ne(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!ye[s.type]:a==="textarea"}function Is(s,a,u,f){ns?Di?Di.push(f):Di=[f]:ns=f,a=$f(a,"onChange"),0<a.length&&(u=new Or("onChange","change",null,u,f),s.push({event:u,listeners:a}))}var Oe=null,rs=null;function as(s){Ub(s,0)}function tu(s){var a=Mn(s);if(Gt(a))return s}function Pa(s,a){if(s==="change")return a}var uc=!1;if(hi){var Da;if(hi){var cc="oninput"in document;if(!cc){var Ms=document.createElement("div");Ms.setAttribute("oninput","return;"),cc=typeof Ms.oninput=="function"}Da=cc}else Da=!1;uc=Da&&(!document.documentMode||9<document.documentMode)}function Jo(){Oe&&(Oe.detachEvent("onpropertychange",lf),rs=Oe=null)}function lf(s){if(s.propertyName==="value"&&tu(rs)){var a=[];Is(a,rs,s,Pn(s)),ni(as,a)}}function hc(s,a,u){s==="focusin"?(Jo(),Oe=a,rs=u,Oe.attachEvent("onpropertychange",lf)):s==="focusout"&&Jo()}function ap(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return tu(rs)}function Os(s,a){if(s==="click")return tu(a)}function op(s,a){if(s==="input"||s==="change")return tu(a)}function ka(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var ii=typeof Object.is=="function"?Object.is:ka;function si(s,a){if(ii(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var y=u[f];if(!Ai.call(a,y)||!ii(s[y],a[y]))return!1}return!0}function tl(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function fc(s,a){var u=tl(s);s=0;for(var f;u;){if(u.nodeType===3){if(f=s+u.textContent.length,s<=a&&f>=a)return{node:u,offset:a-s};s=f}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=tl(u)}}function eu(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?eu(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function el(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=be(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=be(s.document)}return a}function nl(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var nu=hi&&"documentMode"in document&&11>=document.documentMode,Ni=null,La=null,Lr=null,iu=!1;function uf(s,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;iu||Ni==null||Ni!==be(f)||(f=Ni,"selectionStart"in f&&nl(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Lr&&si(Lr,f)||(Lr=f,f=$f(La,"onSelect"),0<f.length&&(a=new Or("onSelect","select",null,a,u),s.push({event:a,listeners:f}),a.target=Ni)))}function os(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var Na={animationend:os("Animation","AnimationEnd"),animationiteration:os("Animation","AnimationIteration"),animationstart:os("Animation","AnimationStart"),transitionrun:os("Transition","TransitionRun"),transitionstart:os("Transition","TransitionStart"),transitioncancel:os("Transition","TransitionCancel"),transitionend:os("Transition","TransitionEnd")},su={},cf={};hi&&(cf=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function er(s){if(su[s])return su[s];if(!Na[s])return s;var a=Na[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in cf)return su[s]=a[u];return s}var hf=er("animationend"),Vi=er("animationiteration"),il=er("animationstart"),lp=er("transitionrun"),ru=er("transitionstart"),up=er("transitioncancel"),dc=er("transitionend"),ff=new Map,Nr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nr.push("scrollEnd");function zi(s,a){ff.set(s,a),Ii(a,[s])}var Vr=new WeakMap;function ri(s,a){if(typeof s=="object"&&s!==null){var u=Vr.get(s);return u!==void 0?u:(a={value:s,source:a,stack:_e(a)},Vr.set(s,a),a)}return{value:s,source:a,stack:_e(a)}}var ai=[],Va=0,Bi=0;function sl(){for(var s=Va,a=Bi=Va=0;a<s;){var u=ai[a];ai[a++]=null;var f=ai[a];ai[a++]=null;var y=ai[a];ai[a++]=null;var v=ai[a];if(ai[a++]=null,f!==null&&y!==null){var R=f.pending;R===null?y.next=y:(y.next=R.next,R.next=y),f.pending=y}v!==0&&al(u,y,v)}}function rl(s,a,u,f){ai[Va++]=s,ai[Va++]=a,ai[Va++]=u,ai[Va++]=f,Bi|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function zr(s,a,u,f){return rl(s,a,u,f),nr(s)}function za(s,a){return rl(s,null,null,a),nr(s)}function al(s,a,u){s.lanes|=u;var f=s.alternate;f!==null&&(f.lanes|=u);for(var y=!1,v=s.return;v!==null;)v.childLanes|=u,f=v.alternate,f!==null&&(f.childLanes|=u),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&a!==null&&(y=31-bn(u),s=v.hiddenUpdates,f=s[y],f===null?s[y]=[a]:f.push(a),a.lane=u|536870912),v):null}function nr(s){if(50<Nc)throw Nc=0,ag=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Br={};function df(s,a,u,f){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(s,a,u,f){return new df(s,a,u,f)}function au(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ls(s,a){var u=s.alternate;return u===null?(u=oi(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function mc(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function ol(s,a,u,f,y,v){var R=0;if(f=s,typeof s=="function")au(s)&&(R=1);else if(typeof s=="string")R=VC(s,u,St.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case z:return s=oi(31,u,a,y),s.elementType=z,s.lanes=v,s;case M:return ir(u.children,y,v,a);case D:R=8,y|=24;break;case N:return s=oi(12,u,a,y|2),s.elementType=N,s.lanes=v,s;case lt:return s=oi(13,u,a,y),s.elementType=lt,s.lanes=v,s;case bt:return s=oi(19,u,a,y),s.elementType=bt,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:case Y:R=10;break t;case q:R=9;break t;case it:R=11;break t;case V:R=14;break t;case P:R=16,f=null;break t}R=29,u=Error(i(130,s===null?"null":typeof s,"")),f=null}return a=oi(R,u,a,y),a.elementType=s,a.type=f,a.lanes=v,a}function ir(s,a,u,f){return s=oi(7,s,f,a),s.lanes=u,s}function pc(s,a,u){return s=oi(6,s,null,a),s.lanes=u,s}function ou(s,a,u){return a=oi(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Ur=[],Ba=0,o=null,h=0,_=[],T=0,A=null,I=1,Z="";function J(s,a){Ur[Ba++]=h,Ur[Ba++]=o,o=s,h=a}function at(s,a,u){_[T++]=I,_[T++]=Z,_[T++]=A,A=s;var f=I;s=Z;var y=32-bn(f)-1;f&=~(1<<y),u+=1;var v=32-bn(a)+y;if(30<v){var R=y-y%5;v=(f&(1<<R)-1).toString(32),f>>=R,y-=R,I=1<<32-bn(a)+y|u<<y|f,Z=v+s}else I=1<<v|u<<y|f,Z=s}function vt(s){s.return!==null&&(J(s,1),at(s,1,0))}function At(s){for(;s===o;)o=Ur[--Ba],Ur[Ba]=null,h=Ur[--Ba],Ur[Ba]=null;for(;s===A;)A=_[--T],_[T]=null,Z=_[--T],_[T]=null,I=_[--T],_[T]=null}var It=null,Ot=null,Ft=!1,Ve=null,Ze=!1,An=Error(i(519));function di(s){var a=Error(i(418,""));throw Ha(ri(a,s)),An}function mf(s){var a=s.stateNode,u=s.type,f=s.memoizedProps;switch(a[Je]=s,a[Ke]=f,u){case"dialog":ie("cancel",a),ie("close",a);break;case"iframe":case"object":case"embed":ie("load",a);break;case"video":case"audio":for(u=0;u<zc.length;u++)ie(zc[u],a);break;case"source":ie("error",a);break;case"img":case"image":case"link":ie("error",a),ie("load",a);break;case"details":ie("toggle",a);break;case"input":ie("invalid",a),Ir(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Xs(a);break;case"select":ie("invalid",a);break;case"textarea":ie("invalid",a),ei(a,f.value,f.defaultValue,f.children),Xs(a)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||f.suppressHydrationWarning===!0||qb(a.textContent,u)?(f.popover!=null&&(ie("beforetoggle",a),ie("toggle",a)),f.onScroll!=null&&ie("scroll",a),f.onScrollEnd!=null&&ie("scrollend",a),f.onClick!=null&&(a.onclick=Kf),a=!0):a=!1,a||di(s)}function pf(s){for(It=s.return;It;)switch(It.tag){case 5:case 13:Ze=!1;return;case 27:case 3:Ze=!0;return;default:It=It.return}}function ll(s){if(s!==It)return!1;if(!Ft)return pf(s),Ft=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||wg(s.type,s.memoizedProps)),u=!u),u&&Ot&&di(s),pf(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(a===0){Ot=Ls(s.nextSibling);break t}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;s=s.nextSibling}Ot=null}}else a===27?(a=Ot,no(s.type)?(s=xg,xg=null,Ot=s):Ot=a):Ot=It?Ls(s.stateNode.nextSibling):null;return!0}function Ua(){Ot=It=null,Ft=!1}function gf(){var s=Ve;return s!==null&&(gi===null?gi=s:gi.push.apply(gi,s),Ve=null),s}function Ha(s){Ve===null?Ve=[s]:Ve.push(s)}var Fe=ut(null),us=null,Ps=null;function sr(s,a,u){_t(Fe,a._currentValue),a._currentValue=u}function Ds(s){s._currentValue=Fe.current,Tt(Fe)}function ul(s,a,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===u)break;s=s.return}}function lu(s,a,u,f){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var R=y.child;v=v.firstContext;t:for(;v!==null;){var O=v;v=y;for(var W=0;W<a.length;W++)if(O.context===a[W]){v.lanes|=u,O=v.alternate,O!==null&&(O.lanes|=u),ul(v.return,u,s),f||(R=null);break t}v=O.next}}else if(y.tag===18){if(R=y.return,R===null)throw Error(i(341));R.lanes|=u,v=R.alternate,v!==null&&(v.lanes|=u),ul(R,u,s),R=null}else R=y.child;if(R!==null)R.return=y;else for(R=y;R!==null;){if(R===s){R=null;break}if(y=R.sibling,y!==null){y.return=R.return,R=y;break}R=R.return}y=R}}function cl(s,a,u,f){s=null;for(var y=a,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var R=y.alternate;if(R===null)throw Error(i(387));if(R=R.memoizedProps,R!==null){var O=y.type;ii(y.pendingProps.value,R.value)||(s!==null?s.push(O):s=[O])}}else if(y===xe.current){if(R=y.alternate,R===null)throw Error(i(387));R.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(qc):s=[qc])}y=y.return}s!==null&&lu(a,s,u,f),a.flags|=262144}function _f(s){for(s=s.firstContext;s!==null;){if(!ii(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function hl(s){us=s,Ps=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Wn(s){return Mv(us,s)}function yf(s,a){return us===null&&hl(s),Mv(s,a)}function Mv(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Ps===null){if(s===null)throw Error(i(308));Ps=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Ps=Ps.next=a;return u}var NR=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,f){s.push(f)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},VR=n.unstable_scheduleCallback,zR=n.unstable_NormalPriority,gn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cp(){return{controller:new NR,data:new Map,refCount:0}}function gc(s){s.refCount--,s.refCount===0&&VR(zR,function(){s.controller.abort()})}var _c=null,hp=0,uu=0,cu=null;function BR(s,a){if(_c===null){var u=_c=[];hp=0,uu=dg(),cu={status:"pending",value:void 0,then:function(f){u.push(f)}}}return hp++,a.then(Ov,Ov),a}function Ov(){if(--hp===0&&_c!==null){cu!==null&&(cu.status="fulfilled");var s=_c;_c=null,uu=0,cu=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function UR(s,a){var u=[],f={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return s.then(function(){f.status="fulfilled",f.value=a;for(var y=0;y<u.length;y++)(0,u[y])(a)},function(y){for(f.status="rejected",f.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),f}var Pv=tt.S;tt.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&BR(s,a),Pv!==null&&Pv(s,a)};var fl=ut(null);function fp(){var s=fl.current;return s!==null?s:ze.pooledCache}function vf(s,a){a===null?_t(fl,fl.current):_t(fl,a.pool)}function Dv(){var s=fp();return s===null?null:{parent:gn._currentValue,pool:s}}var yc=Error(i(460)),kv=Error(i(474)),bf=Error(i(542)),dp={then:function(){}};function Lv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Tf(){}function Nv(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(Tf,Tf),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,zv(s),s;default:if(typeof a.status=="string")a.then(Tf,Tf);else{if(s=ze,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(f){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=f}},function(f){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,zv(s),s}throw vc=a,yc}}var vc=null;function Vv(){if(vc===null)throw Error(i(459));var s=vc;return vc=null,s}function zv(s){if(s===yc||s===bf)throw Error(i(483))}var ja=!1;function mp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pp(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Fa(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function qa(s,a,u){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Te&2)!==0){var y=f.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),f.pending=a,a=nr(s),al(s,null,u),a}return rl(s,f,a,u),nr(s)}function bc(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,Fo(s,u)}}function gp(s,a){var u=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var y=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var R={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};v===null?y=v=R:v=v.next=R,u=u.next}while(u!==null);v===null?y=v=a:v=v.next=a}else y=v=a;u={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:f.shared,callbacks:f.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var _p=!1;function Tc(){if(_p){var s=cu;if(s!==null)throw s}}function wc(s,a,u,f){_p=!1;var y=s.updateQueue;ja=!1;var v=y.firstBaseUpdate,R=y.lastBaseUpdate,O=y.shared.pending;if(O!==null){y.shared.pending=null;var W=O,nt=W.next;W.next=null,R===null?v=nt:R.next=nt,R=W;var ct=s.alternate;ct!==null&&(ct=ct.updateQueue,O=ct.lastBaseUpdate,O!==R&&(O===null?ct.firstBaseUpdate=nt:O.next=nt,ct.lastBaseUpdate=W))}if(v!==null){var mt=y.baseState;R=0,ct=nt=W=null,O=v;do{var st=O.lane&-536870913,rt=st!==O.lane;if(rt?(ce&st)===st:(f&st)===st){st!==0&&st===uu&&(_p=!0),ct!==null&&(ct=ct.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});t:{var jt=s,zt=O;st=a;var Me=u;switch(zt.tag){case 1:if(jt=zt.payload,typeof jt=="function"){mt=jt.call(Me,mt,st);break t}mt=jt;break t;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=zt.payload,st=typeof jt=="function"?jt.call(Me,mt,st):jt,st==null)break t;mt=b({},mt,st);break t;case 2:ja=!0}}st=O.callback,st!==null&&(s.flags|=64,rt&&(s.flags|=8192),rt=y.callbacks,rt===null?y.callbacks=[st]:rt.push(st))}else rt={lane:st,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ct===null?(nt=ct=rt,W=mt):ct=ct.next=rt,R|=st;if(O=O.next,O===null){if(O=y.shared.pending,O===null)break;rt=O,O=rt.next,rt.next=null,y.lastBaseUpdate=rt,y.shared.pending=null}}while(!0);ct===null&&(W=mt),y.baseState=W,y.firstBaseUpdate=nt,y.lastBaseUpdate=ct,v===null&&(y.shared.lanes=0),Qa|=R,s.lanes=R,s.memoizedState=mt}}function Bv(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function Uv(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)Bv(u[s],a)}var hu=ut(null),wf=ut(0);function Hv(s,a){s=Wr,_t(wf,s),_t(hu,a),Wr=s|a.baseLanes}function yp(){_t(wf,Wr),_t(hu,hu.current)}function vp(){Wr=wf.current,Tt(hu),Tt(wf)}var Ga=0,Qt=null,Ce=null,un=null,Ef=!1,fu=!1,dl=!1,Sf=0,Ec=0,du=null,HR=0;function en(){throw Error(i(321))}function bp(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!ii(s[u],a[u]))return!1;return!0}function Tp(s,a,u,f,y,v){return Ga=v,Qt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,tt.H=s===null||s.memoizedState===null?S0:A0,dl=!1,v=u(f,y),dl=!1,fu&&(v=Fv(a,u,f,y)),jv(s),v}function jv(s){tt.H=Mf;var a=Ce!==null&&Ce.next!==null;if(Ga=0,un=Ce=Qt=null,Ef=!1,Ec=0,du=null,a)throw Error(i(300));s===null||xn||(s=s.dependencies,s!==null&&_f(s)&&(xn=!0))}function Fv(s,a,u,f){Qt=s;var y=0;do{if(fu&&(du=null),Ec=0,fu=!1,25<=y)throw Error(i(301));if(y+=1,un=Ce=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}tt.H=YR,v=a(u,f)}while(fu);return v}function jR(){var s=tt.H,a=s.useState()[0];return a=typeof a.then=="function"?Sc(a):a,s=s.useState()[0],(Ce!==null?Ce.memoizedState:null)!==s&&(Qt.flags|=1024),a}function wp(){var s=Sf!==0;return Sf=0,s}function Ep(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function Sp(s){if(Ef){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ef=!1}Ga=0,un=Ce=Qt=null,fu=!1,Ec=Sf=0,du=null}function mi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Qt.memoizedState=un=s:un=un.next=s,un}function cn(){if(Ce===null){var s=Qt.alternate;s=s!==null?s.memoizedState:null}else s=Ce.next;var a=un===null?Qt.memoizedState:un.next;if(a!==null)un=a,Ce=s;else{if(s===null)throw Qt.alternate===null?Error(i(467)):Error(i(310));Ce=s,s={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},un===null?Qt.memoizedState=un=s:un=un.next=s}return un}function Ap(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sc(s){var a=Ec;return Ec+=1,du===null&&(du=[]),s=Nv(du,s,a),a=Qt,(un===null?a.memoizedState:un.next)===null&&(a=a.alternate,tt.H=a===null||a.memoizedState===null?S0:A0),s}function Af(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Sc(s);if(s.$$typeof===Y)return Wn(s)}throw Error(i(438,String(s)))}function xp(s){var a=null,u=Qt.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var f=Qt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Ap(),Qt.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),f=0;f<s;f++)u[f]=U;return a.index++,u}function Hr(s,a){return typeof a=="function"?a(s):a}function xf(s){var a=cn();return Rp(a,Ce,s)}function Rp(s,a,u){var f=s.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=u;var y=s.baseQueue,v=f.pending;if(v!==null){if(y!==null){var R=y.next;y.next=v.next,v.next=R}a.baseQueue=y=v,f.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{a=y.next;var O=R=null,W=null,nt=a,ct=!1;do{var mt=nt.lane&-536870913;if(mt!==nt.lane?(ce&mt)===mt:(Ga&mt)===mt){var st=nt.revertLane;if(st===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),mt===uu&&(ct=!0);else if((Ga&st)===st){nt=nt.next,st===uu&&(ct=!0);continue}else mt={lane:0,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},W===null?(O=W=mt,R=v):W=W.next=mt,Qt.lanes|=st,Qa|=st;mt=nt.action,dl&&u(v,mt),v=nt.hasEagerState?nt.eagerState:u(v,mt)}else st={lane:mt,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},W===null?(O=W=st,R=v):W=W.next=st,Qt.lanes|=mt,Qa|=mt;nt=nt.next}while(nt!==null&&nt!==a);if(W===null?R=v:W.next=O,!ii(v,s.memoizedState)&&(xn=!0,ct&&(u=cu,u!==null)))throw u;s.memoizedState=v,s.baseState=R,s.baseQueue=W,f.lastRenderedState=v}return y===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function Cp(s){var a=cn(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var f=u.dispatch,y=u.pending,v=a.memoizedState;if(y!==null){u.pending=null;var R=y=y.next;do v=s(v,R.action),R=R.next;while(R!==y);ii(v,a.memoizedState)||(xn=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),u.lastRenderedState=v}return[v,f]}function qv(s,a,u){var f=Qt,y=cn(),v=Ft;if(v){if(u===void 0)throw Error(i(407));u=u()}else u=a();var R=!ii((Ce||y).memoizedState,u);R&&(y.memoizedState=u,xn=!0),y=y.queue;var O=Wv.bind(null,f,y,s);if(Ac(2048,8,O,[s]),y.getSnapshot!==a||R||un!==null&&un.memoizedState.tag&1){if(f.flags|=2048,mu(9,Rf(),Zv.bind(null,f,y,u,a),null),ze===null)throw Error(i(349));v||(Ga&124)!==0||Gv(f,a,u)}return u}function Gv(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Qt.updateQueue,a===null?(a=Ap(),Qt.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Zv(s,a,u,f){a.value=u,a.getSnapshot=f,Yv(a)&&$v(s)}function Wv(s,a,u){return u(function(){Yv(a)&&$v(s)})}function Yv(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!ii(s,u)}catch{return!0}}function $v(s){var a=za(s,2);a!==null&&qi(a,s,2)}function Ip(s){var a=mi();if(typeof s=="function"){var u=s;if(s=u(),dl){Hn(!0);try{u()}finally{Hn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:s},a}function Kv(s,a,u,f){return s.baseState=u,Rp(s,Ce,typeof f=="function"?f:Hr)}function FR(s,a,u,f,y){if(If(s))throw Error(i(485));if(s=a.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){v.listeners.push(R)}};tt.T!==null?u(!0):v.isTransition=!1,f(v),u=a.pending,u===null?(v.next=a.pending=v,Xv(a,v)):(v.next=u.next,a.pending=u.next=v)}}function Xv(s,a){var u=a.action,f=a.payload,y=s.state;if(a.isTransition){var v=tt.T,R={};tt.T=R;try{var O=u(y,f),W=tt.S;W!==null&&W(R,O),Qv(s,a,O)}catch(nt){Mp(s,a,nt)}finally{tt.T=v}}else try{v=u(y,f),Qv(s,a,v)}catch(nt){Mp(s,a,nt)}}function Qv(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){Jv(s,a,f)},function(f){return Mp(s,a,f)}):Jv(s,a,u)}function Jv(s,a,u){a.status="fulfilled",a.value=u,t0(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,Xv(s,u)))}function Mp(s,a,u){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=u,t0(a),a=a.next;while(a!==f)}s.action=null}function t0(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function e0(s,a){return a}function n0(s,a){if(Ft){var u=ze.formState;if(u!==null){t:{var f=Qt;if(Ft){if(Ot){e:{for(var y=Ot,v=Ze;y.nodeType!==8;){if(!v){y=null;break e}if(y=Ls(y.nextSibling),y===null){y=null;break e}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){Ot=Ls(y.nextSibling),f=y.data==="F!";break t}}di(f)}f=!1}f&&(a=u[0])}}return u=mi(),u.memoizedState=u.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e0,lastRenderedState:a},u.queue=f,u=T0.bind(null,Qt,f),f.dispatch=u,f=Ip(!1),v=Lp.bind(null,Qt,!1,f.queue),f=mi(),y={state:a,dispatch:null,action:s,pending:null},f.queue=y,u=FR.bind(null,Qt,y,v,u),y.dispatch=u,f.memoizedState=s,[a,u,!1]}function i0(s){var a=cn();return s0(a,Ce,s)}function s0(s,a,u){if(a=Rp(s,a,e0)[0],s=xf(Hr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=Sc(a)}catch(R){throw R===yc?bf:R}else f=a;a=cn();var y=a.queue,v=y.dispatch;return u!==a.memoizedState&&(Qt.flags|=2048,mu(9,Rf(),qR.bind(null,y,u),null)),[f,v,s]}function qR(s,a){s.action=a}function r0(s){var a=cn(),u=Ce;if(u!==null)return s0(a,u,s);cn(),a=a.memoizedState,u=cn();var f=u.queue.dispatch;return u.memoizedState=s,[a,f,!1]}function mu(s,a,u,f){return s={tag:s,create:u,deps:f,inst:a,next:null},a=Qt.updateQueue,a===null&&(a=Ap(),Qt.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(f=u.next,u.next=s,s.next=f,a.lastEffect=s),s}function Rf(){return{destroy:void 0,resource:void 0}}function a0(){return cn().memoizedState}function Cf(s,a,u,f){var y=mi();f=f===void 0?null:f,Qt.flags|=s,y.memoizedState=mu(1|a,Rf(),u,f)}function Ac(s,a,u,f){var y=cn();f=f===void 0?null:f;var v=y.memoizedState.inst;Ce!==null&&f!==null&&bp(f,Ce.memoizedState.deps)?y.memoizedState=mu(a,v,u,f):(Qt.flags|=s,y.memoizedState=mu(1|a,v,u,f))}function o0(s,a){Cf(8390656,8,s,a)}function l0(s,a){Ac(2048,8,s,a)}function u0(s,a){return Ac(4,2,s,a)}function c0(s,a){return Ac(4,4,s,a)}function h0(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function f0(s,a,u){u=u!=null?u.concat([s]):null,Ac(4,4,h0.bind(null,a,s),u)}function Op(){}function d0(s,a){var u=cn();a=a===void 0?null:a;var f=u.memoizedState;return a!==null&&bp(a,f[1])?f[0]:(u.memoizedState=[s,a],s)}function m0(s,a){var u=cn();a=a===void 0?null:a;var f=u.memoizedState;if(a!==null&&bp(a,f[1]))return f[0];if(f=s(),dl){Hn(!0);try{s()}finally{Hn(!1)}}return u.memoizedState=[f,a],f}function Pp(s,a,u){return u===void 0||(Ga&1073741824)!==0?s.memoizedState=a:(s.memoizedState=u,s=_b(),Qt.lanes|=s,Qa|=s,u)}function p0(s,a,u,f){return ii(u,a)?u:hu.current!==null?(s=Pp(s,u,f),ii(s,a)||(xn=!0),s):(Ga&42)===0?(xn=!0,s.memoizedState=u):(s=_b(),Qt.lanes|=s,Qa|=s,a)}function g0(s,a,u,f,y){var v=yt.p;yt.p=v!==0&&8>v?v:8;var R=tt.T,O={};tt.T=O,Lp(s,!1,a,u);try{var W=y(),nt=tt.S;if(nt!==null&&nt(O,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ct=UR(W,f);xc(s,a,ct,Fi(s))}else xc(s,a,f,Fi(s))}catch(mt){xc(s,a,{then:function(){},status:"rejected",reason:mt},Fi())}finally{yt.p=v,tt.T=R}}function GR(){}function Dp(s,a,u,f){if(s.tag!==5)throw Error(i(476));var y=_0(s).queue;g0(s,y,a,dt,u===null?GR:function(){return y0(s),u(f)})}function _0(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:dt,baseState:dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:dt},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function y0(s){var a=_0(s).next.queue;xc(s,a,{},Fi())}function kp(){return Wn(qc)}function v0(){return cn().memoizedState}function b0(){return cn().memoizedState}function ZR(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Fi();s=Fa(u);var f=qa(a,s,u);f!==null&&(qi(f,a,u),bc(f,a,u)),a={cache:cp()},s.payload=a;return}a=a.return}}function WR(s,a,u){var f=Fi();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},If(s)?w0(a,u):(u=zr(s,a,u,f),u!==null&&(qi(u,s,f),E0(u,a,f)))}function T0(s,a,u){var f=Fi();xc(s,a,u,f)}function xc(s,a,u,f){var y={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(If(s))w0(a,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var R=a.lastRenderedState,O=v(R,u);if(y.hasEagerState=!0,y.eagerState=O,ii(O,R))return rl(s,a,y,0),ze===null&&sl(),!1}catch{}finally{}if(u=zr(s,a,y,f),u!==null)return qi(u,s,f),E0(u,a,f),!0}return!1}function Lp(s,a,u,f){if(f={lane:2,revertLane:dg(),action:f,hasEagerState:!1,eagerState:null,next:null},If(s)){if(a)throw Error(i(479))}else a=zr(s,u,f,2),a!==null&&qi(a,s,2)}function If(s){var a=s.alternate;return s===Qt||a!==null&&a===Qt}function w0(s,a){fu=Ef=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function E0(s,a,u){if((u&4194048)!==0){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,Fo(s,u)}}var Mf={readContext:Wn,use:Af,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en,useHostTransitionStatus:en,useFormState:en,useActionState:en,useOptimistic:en,useMemoCache:en,useCacheRefresh:en},S0={readContext:Wn,use:Af,useCallback:function(s,a){return mi().memoizedState=[s,a===void 0?null:a],s},useContext:Wn,useEffect:o0,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,Cf(4194308,4,h0.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Cf(4194308,4,s,a)},useInsertionEffect:function(s,a){Cf(4,2,s,a)},useMemo:function(s,a){var u=mi();a=a===void 0?null:a;var f=s();if(dl){Hn(!0);try{s()}finally{Hn(!1)}}return u.memoizedState=[f,a],f},useReducer:function(s,a,u){var f=mi();if(u!==void 0){var y=u(a);if(dl){Hn(!0);try{u(a)}finally{Hn(!1)}}}else y=a;return f.memoizedState=f.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},f.queue=s,s=s.dispatch=WR.bind(null,Qt,s),[f.memoizedState,s]},useRef:function(s){var a=mi();return s={current:s},a.memoizedState=s},useState:function(s){s=Ip(s);var a=s.queue,u=T0.bind(null,Qt,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:Op,useDeferredValue:function(s,a){var u=mi();return Pp(u,s,a)},useTransition:function(){var s=Ip(!1);return s=g0.bind(null,Qt,s.queue,!0,!1),mi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var f=Qt,y=mi();if(Ft){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),ze===null)throw Error(i(349));(ce&124)!==0||Gv(f,a,u)}y.memoizedState=u;var v={value:u,getSnapshot:a};return y.queue=v,o0(Wv.bind(null,f,v,s),[s]),f.flags|=2048,mu(9,Rf(),Zv.bind(null,f,v,u,a),null),u},useId:function(){var s=mi(),a=ze.identifierPrefix;if(Ft){var u=Z,f=I;u=(f&~(1<<32-bn(f)-1)).toString(32)+u,a="«"+a+"R"+u,u=Sf++,0<u&&(a+="H"+u.toString(32)),a+="»"}else u=HR++,a="«"+a+"r"+u.toString(32)+"»";return s.memoizedState=a},useHostTransitionStatus:kp,useFormState:n0,useActionState:n0,useOptimistic:function(s){var a=mi();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Lp.bind(null,Qt,!0,u),u.dispatch=a,[s,a]},useMemoCache:xp,useCacheRefresh:function(){return mi().memoizedState=ZR.bind(null,Qt)}},A0={readContext:Wn,use:Af,useCallback:d0,useContext:Wn,useEffect:l0,useImperativeHandle:f0,useInsertionEffect:u0,useLayoutEffect:c0,useMemo:m0,useReducer:xf,useRef:a0,useState:function(){return xf(Hr)},useDebugValue:Op,useDeferredValue:function(s,a){var u=cn();return p0(u,Ce.memoizedState,s,a)},useTransition:function(){var s=xf(Hr)[0],a=cn().memoizedState;return[typeof s=="boolean"?s:Sc(s),a]},useSyncExternalStore:qv,useId:v0,useHostTransitionStatus:kp,useFormState:i0,useActionState:i0,useOptimistic:function(s,a){var u=cn();return Kv(u,Ce,s,a)},useMemoCache:xp,useCacheRefresh:b0},YR={readContext:Wn,use:Af,useCallback:d0,useContext:Wn,useEffect:l0,useImperativeHandle:f0,useInsertionEffect:u0,useLayoutEffect:c0,useMemo:m0,useReducer:Cp,useRef:a0,useState:function(){return Cp(Hr)},useDebugValue:Op,useDeferredValue:function(s,a){var u=cn();return Ce===null?Pp(u,s,a):p0(u,Ce.memoizedState,s,a)},useTransition:function(){var s=Cp(Hr)[0],a=cn().memoizedState;return[typeof s=="boolean"?s:Sc(s),a]},useSyncExternalStore:qv,useId:v0,useHostTransitionStatus:kp,useFormState:r0,useActionState:r0,useOptimistic:function(s,a){var u=cn();return Ce!==null?Kv(u,Ce,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:xp,useCacheRefresh:b0},pu=null,Rc=0;function Of(s){var a=Rc;return Rc+=1,pu===null&&(pu=[]),Nv(pu,s,a)}function Cc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Pf(s,a){throw a.$$typeof===w?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function x0(s){var a=s._init;return a(s._payload)}function R0(s){function a(X,$){if(s){var et=X.deletions;et===null?(X.deletions=[$],X.flags|=16):et.push($)}}function u(X,$){if(!s)return null;for(;$!==null;)a(X,$),$=$.sibling;return null}function f(X){for(var $=new Map;X!==null;)X.key!==null?$.set(X.key,X):$.set(X.index,X),X=X.sibling;return $}function y(X,$){return X=ls(X,$),X.index=0,X.sibling=null,X}function v(X,$,et){return X.index=et,s?(et=X.alternate,et!==null?(et=et.index,et<$?(X.flags|=67108866,$):et):(X.flags|=67108866,$)):(X.flags|=1048576,$)}function R(X){return s&&X.alternate===null&&(X.flags|=67108866),X}function O(X,$,et,ft){return $===null||$.tag!==6?($=pc(et,X.mode,ft),$.return=X,$):($=y($,et),$.return=X,$)}function W(X,$,et,ft){var Mt=et.type;return Mt===M?ct(X,$,et.props.children,ft,et.key):$!==null&&($.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===P&&x0(Mt)===$.type)?($=y($,et.props),Cc($,et),$.return=X,$):($=ol(et.type,et.key,et.props,null,X.mode,ft),Cc($,et),$.return=X,$)}function nt(X,$,et,ft){return $===null||$.tag!==4||$.stateNode.containerInfo!==et.containerInfo||$.stateNode.implementation!==et.implementation?($=ou(et,X.mode,ft),$.return=X,$):($=y($,et.children||[]),$.return=X,$)}function ct(X,$,et,ft,Mt){return $===null||$.tag!==7?($=ir(et,X.mode,ft,Mt),$.return=X,$):($=y($,et),$.return=X,$)}function mt(X,$,et){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=pc(""+$,X.mode,et),$.return=X,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return et=ol($.type,$.key,$.props,null,X.mode,et),Cc(et,$),et.return=X,et;case C:return $=ou($,X.mode,et),$.return=X,$;case P:var ft=$._init;return $=ft($._payload),mt(X,$,et)}if(kt($)||G($))return $=ir($,X.mode,et,null),$.return=X,$;if(typeof $.then=="function")return mt(X,Of($),et);if($.$$typeof===Y)return mt(X,yf(X,$),et);Pf(X,$)}return null}function st(X,$,et,ft){var Mt=$!==null?$.key:null;if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return Mt!==null?null:O(X,$,""+et,ft);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case S:return et.key===Mt?W(X,$,et,ft):null;case C:return et.key===Mt?nt(X,$,et,ft):null;case P:return Mt=et._init,et=Mt(et._payload),st(X,$,et,ft)}if(kt(et)||G(et))return Mt!==null?null:ct(X,$,et,ft,null);if(typeof et.then=="function")return st(X,$,Of(et),ft);if(et.$$typeof===Y)return st(X,$,yf(X,et),ft);Pf(X,et)}return null}function rt(X,$,et,ft,Mt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return X=X.get(et)||null,O($,X,""+ft,Mt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case S:return X=X.get(ft.key===null?et:ft.key)||null,W($,X,ft,Mt);case C:return X=X.get(ft.key===null?et:ft.key)||null,nt($,X,ft,Mt);case P:var ee=ft._init;return ft=ee(ft._payload),rt(X,$,et,ft,Mt)}if(kt(ft)||G(ft))return X=X.get(et)||null,ct($,X,ft,Mt,null);if(typeof ft.then=="function")return rt(X,$,et,Of(ft),Mt);if(ft.$$typeof===Y)return rt(X,$,et,yf($,ft),Mt);Pf($,ft)}return null}function jt(X,$,et,ft){for(var Mt=null,ee=null,Dt=$,Bt=$=0,Cn=null;Dt!==null&&Bt<et.length;Bt++){Dt.index>Bt?(Cn=Dt,Dt=null):Cn=Dt.sibling;var me=st(X,Dt,et[Bt],ft);if(me===null){Dt===null&&(Dt=Cn);break}s&&Dt&&me.alternate===null&&a(X,Dt),$=v(me,$,Bt),ee===null?Mt=me:ee.sibling=me,ee=me,Dt=Cn}if(Bt===et.length)return u(X,Dt),Ft&&J(X,Bt),Mt;if(Dt===null){for(;Bt<et.length;Bt++)Dt=mt(X,et[Bt],ft),Dt!==null&&($=v(Dt,$,Bt),ee===null?Mt=Dt:ee.sibling=Dt,ee=Dt);return Ft&&J(X,Bt),Mt}for(Dt=f(Dt);Bt<et.length;Bt++)Cn=rt(Dt,X,Bt,et[Bt],ft),Cn!==null&&(s&&Cn.alternate!==null&&Dt.delete(Cn.key===null?Bt:Cn.key),$=v(Cn,$,Bt),ee===null?Mt=Cn:ee.sibling=Cn,ee=Cn);return s&&Dt.forEach(function(oo){return a(X,oo)}),Ft&&J(X,Bt),Mt}function zt(X,$,et,ft){if(et==null)throw Error(i(151));for(var Mt=null,ee=null,Dt=$,Bt=$=0,Cn=null,me=et.next();Dt!==null&&!me.done;Bt++,me=et.next()){Dt.index>Bt?(Cn=Dt,Dt=null):Cn=Dt.sibling;var oo=st(X,Dt,me.value,ft);if(oo===null){Dt===null&&(Dt=Cn);break}s&&Dt&&oo.alternate===null&&a(X,Dt),$=v(oo,$,Bt),ee===null?Mt=oo:ee.sibling=oo,ee=oo,Dt=Cn}if(me.done)return u(X,Dt),Ft&&J(X,Bt),Mt;if(Dt===null){for(;!me.done;Bt++,me=et.next())me=mt(X,me.value,ft),me!==null&&($=v(me,$,Bt),ee===null?Mt=me:ee.sibling=me,ee=me);return Ft&&J(X,Bt),Mt}for(Dt=f(Dt);!me.done;Bt++,me=et.next())me=rt(Dt,X,Bt,me.value,ft),me!==null&&(s&&me.alternate!==null&&Dt.delete(me.key===null?Bt:me.key),$=v(me,$,Bt),ee===null?Mt=me:ee.sibling=me,ee=me);return s&&Dt.forEach(function($C){return a(X,$C)}),Ft&&J(X,Bt),Mt}function Me(X,$,et,ft){if(typeof et=="object"&&et!==null&&et.type===M&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case S:t:{for(var Mt=et.key;$!==null;){if($.key===Mt){if(Mt=et.type,Mt===M){if($.tag===7){u(X,$.sibling),ft=y($,et.props.children),ft.return=X,X=ft;break t}}else if($.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===P&&x0(Mt)===$.type){u(X,$.sibling),ft=y($,et.props),Cc(ft,et),ft.return=X,X=ft;break t}u(X,$);break}else a(X,$);$=$.sibling}et.type===M?(ft=ir(et.props.children,X.mode,ft,et.key),ft.return=X,X=ft):(ft=ol(et.type,et.key,et.props,null,X.mode,ft),Cc(ft,et),ft.return=X,X=ft)}return R(X);case C:t:{for(Mt=et.key;$!==null;){if($.key===Mt)if($.tag===4&&$.stateNode.containerInfo===et.containerInfo&&$.stateNode.implementation===et.implementation){u(X,$.sibling),ft=y($,et.children||[]),ft.return=X,X=ft;break t}else{u(X,$);break}else a(X,$);$=$.sibling}ft=ou(et,X.mode,ft),ft.return=X,X=ft}return R(X);case P:return Mt=et._init,et=Mt(et._payload),Me(X,$,et,ft)}if(kt(et))return jt(X,$,et,ft);if(G(et)){if(Mt=G(et),typeof Mt!="function")throw Error(i(150));return et=Mt.call(et),zt(X,$,et,ft)}if(typeof et.then=="function")return Me(X,$,Of(et),ft);if(et.$$typeof===Y)return Me(X,$,yf(X,et),ft);Pf(X,et)}return typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint"?(et=""+et,$!==null&&$.tag===6?(u(X,$.sibling),ft=y($,et),ft.return=X,X=ft):(u(X,$),ft=pc(et,X.mode,ft),ft.return=X,X=ft),R(X)):u(X,$)}return function(X,$,et,ft){try{Rc=0;var Mt=Me(X,$,et,ft);return pu=null,Mt}catch(Dt){if(Dt===yc||Dt===bf)throw Dt;var ee=oi(29,Dt,null,X.mode);return ee.lanes=ft,ee.return=X,ee}finally{}}}var gu=R0(!0),C0=R0(!1),cs=ut(null),rr=null;function Za(s){var a=s.alternate;_t(_n,_n.current&1),_t(cs,s),rr===null&&(a===null||hu.current!==null||a.memoizedState!==null)&&(rr=s)}function I0(s){if(s.tag===22){if(_t(_n,_n.current),_t(cs,s),rr===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(rr=s)}}else Wa()}function Wa(){_t(_n,_n.current),_t(cs,cs.current)}function jr(s){Tt(cs),rr===s&&(rr=null),Tt(_n)}var _n=ut(0);function Df(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Ag(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Np(s,a,u,f){a=s.memoizedState,u=u(f,a),u=u==null?a:b({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Vp={enqueueSetState:function(s,a,u){s=s._reactInternals;var f=Fi(),y=Fa(f);y.payload=a,u!=null&&(y.callback=u),a=qa(s,y,f),a!==null&&(qi(a,s,f),bc(a,s,f))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var f=Fi(),y=Fa(f);y.tag=1,y.payload=a,u!=null&&(y.callback=u),a=qa(s,y,f),a!==null&&(qi(a,s,f),bc(a,s,f))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Fi(),f=Fa(u);f.tag=2,a!=null&&(f.callback=a),a=qa(s,f,u),a!==null&&(qi(a,s,u),bc(a,s,u))}};function M0(s,a,u,f,y,v,R){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,v,R):a.prototype&&a.prototype.isPureReactComponent?!si(u,f)||!si(y,v):!0}function O0(s,a,u,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==s&&Vp.enqueueReplaceState(a,a.state,null)}function ml(s,a){var u=a;if("ref"in a){u={};for(var f in a)f!=="ref"&&(u[f]=a[f])}if(s=s.defaultProps){u===a&&(u=b({},u));for(var y in s)u[y]===void 0&&(u[y]=s[y])}return u}var kf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function P0(s){kf(s)}function D0(s){console.error(s)}function k0(s){kf(s)}function Lf(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function L0(s,a,u){try{var f=s.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function zp(s,a,u){return u=Fa(u),u.tag=3,u.payload={element:null},u.callback=function(){Lf(s,a)},u}function N0(s){return s=Fa(s),s.tag=3,s}function V0(s,a,u,f){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var v=f.value;s.payload=function(){return y(v)},s.callback=function(){L0(a,u,f)}}var R=u.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(s.callback=function(){L0(a,u,f),typeof y!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var O=f.stack;this.componentDidCatch(f.value,{componentStack:O!==null?O:""})})}function $R(s,a,u,f,y){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=u.alternate,a!==null&&cl(a,u,y,!0),u=cs.current,u!==null){switch(u.tag){case 13:return rr===null?lg():u.alternate===null&&Qe===0&&(Qe=3),u.flags&=-257,u.flags|=65536,u.lanes=y,f===dp?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([f]):a.add(f),cg(s,f,y)),!1;case 22:return u.flags|=65536,f===dp?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([f]):u.add(f)),cg(s,f,y)),!1}throw Error(i(435,u.tag))}return cg(s,f,y),lg(),!1}if(Ft)return a=cs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,f!==An&&(s=Error(i(422),{cause:f}),Ha(ri(s,u)))):(f!==An&&(a=Error(i(423),{cause:f}),Ha(ri(a,u))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,f=ri(f,u),y=zp(s.stateNode,f,y),gp(s,y),Qe!==4&&(Qe=2)),!1;var v=Error(i(520),{cause:f});if(v=ri(v,u),Lc===null?Lc=[v]:Lc.push(v),Qe!==4&&(Qe=2),a===null)return!0;f=ri(f,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=y&-y,u.lanes|=s,s=zp(u.stateNode,f,s),gp(u,s),!1;case 1:if(a=u.type,v=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ja===null||!Ja.has(v))))return u.flags|=65536,y&=-y,u.lanes|=y,y=N0(y),V0(y,s,u,f),gp(u,y),!1}u=u.return}while(u!==null);return!1}var z0=Error(i(461)),xn=!1;function Dn(s,a,u,f){a.child=s===null?C0(a,null,u,f):gu(a,s.child,u,f)}function B0(s,a,u,f,y){u=u.render;var v=a.ref;if("ref"in f){var R={};for(var O in f)O!=="ref"&&(R[O]=f[O])}else R=f;return hl(a),f=Tp(s,a,u,R,v,y),O=wp(),s!==null&&!xn?(Ep(s,a,y),Fr(s,a,y)):(Ft&&O&&vt(a),a.flags|=1,Dn(s,a,f,y),a.child)}function U0(s,a,u,f,y){if(s===null){var v=u.type;return typeof v=="function"&&!au(v)&&v.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=v,H0(s,a,v,f,y)):(s=ol(u.type,null,f,a,a.mode,y),s.ref=a.ref,s.return=a,a.child=s)}if(v=s.child,!Zp(s,y)){var R=v.memoizedProps;if(u=u.compare,u=u!==null?u:si,u(R,f)&&s.ref===a.ref)return Fr(s,a,y)}return a.flags|=1,s=ls(v,f),s.ref=a.ref,s.return=a,a.child=s}function H0(s,a,u,f,y){if(s!==null){var v=s.memoizedProps;if(si(v,f)&&s.ref===a.ref)if(xn=!1,a.pendingProps=f=v,Zp(s,y))(s.flags&131072)!==0&&(xn=!0);else return a.lanes=s.lanes,Fr(s,a,y)}return Bp(s,a,u,f,y)}function j0(s,a,u){var f=a.pendingProps,y=f.children,v=s!==null?s.memoizedState:null;if(f.mode==="hidden"){if((a.flags&128)!==0){if(f=v!==null?v.baseLanes|u:u,s!==null){for(y=a.child=s.child,v=0;y!==null;)v=v|y.lanes|y.childLanes,y=y.sibling;a.childLanes=v&~f}else a.childLanes=0,a.child=null;return F0(s,a,f,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&vf(a,v!==null?v.cachePool:null),v!==null?Hv(a,v):yp(),I0(a);else return a.lanes=a.childLanes=536870912,F0(s,a,v!==null?v.baseLanes|u:u,u)}else v!==null?(vf(a,v.cachePool),Hv(a,v),Wa(),a.memoizedState=null):(s!==null&&vf(a,null),yp(),Wa());return Dn(s,a,y,u),a.child}function F0(s,a,u,f){var y=fp();return y=y===null?null:{parent:gn._currentValue,pool:y},a.memoizedState={baseLanes:u,cachePool:y},s!==null&&vf(a,null),yp(),I0(a),s!==null&&cl(s,a,f,!0),null}function Nf(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function Bp(s,a,u,f,y){return hl(a),u=Tp(s,a,u,f,void 0,y),f=wp(),s!==null&&!xn?(Ep(s,a,y),Fr(s,a,y)):(Ft&&f&&vt(a),a.flags|=1,Dn(s,a,u,y),a.child)}function q0(s,a,u,f,y,v){return hl(a),a.updateQueue=null,u=Fv(a,f,u,y),jv(s),f=wp(),s!==null&&!xn?(Ep(s,a,v),Fr(s,a,v)):(Ft&&f&&vt(a),a.flags|=1,Dn(s,a,u,v),a.child)}function G0(s,a,u,f,y){if(hl(a),a.stateNode===null){var v=Br,R=u.contextType;typeof R=="object"&&R!==null&&(v=Wn(R)),v=new u(f,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Vp,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=f,v.state=a.memoizedState,v.refs={},mp(a),R=u.contextType,v.context=typeof R=="object"&&R!==null?Wn(R):Br,v.state=a.memoizedState,R=u.getDerivedStateFromProps,typeof R=="function"&&(Np(a,u,R,f),v.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(R=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),R!==v.state&&Vp.enqueueReplaceState(v,v.state,null),wc(a,f,v,y),Tc(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(s===null){v=a.stateNode;var O=a.memoizedProps,W=ml(u,O);v.props=W;var nt=v.context,ct=u.contextType;R=Br,typeof ct=="object"&&ct!==null&&(R=Wn(ct));var mt=u.getDerivedStateFromProps;ct=typeof mt=="function"||typeof v.getSnapshotBeforeUpdate=="function",O=a.pendingProps!==O,ct||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(O||nt!==R)&&O0(a,v,f,R),ja=!1;var st=a.memoizedState;v.state=st,wc(a,f,v,y),Tc(),nt=a.memoizedState,O||st!==nt||ja?(typeof mt=="function"&&(Np(a,u,mt,f),nt=a.memoizedState),(W=ja||M0(a,u,W,f,st,nt,R))?(ct||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=nt),v.props=f,v.state=nt,v.context=R,f=W):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{v=a.stateNode,pp(s,a),R=a.memoizedProps,ct=ml(u,R),v.props=ct,mt=a.pendingProps,st=v.context,nt=u.contextType,W=Br,typeof nt=="object"&&nt!==null&&(W=Wn(nt)),O=u.getDerivedStateFromProps,(nt=typeof O=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==mt||st!==W)&&O0(a,v,f,W),ja=!1,st=a.memoizedState,v.state=st,wc(a,f,v,y),Tc();var rt=a.memoizedState;R!==mt||st!==rt||ja||s!==null&&s.dependencies!==null&&_f(s.dependencies)?(typeof O=="function"&&(Np(a,u,O,f),rt=a.memoizedState),(ct=ja||M0(a,u,ct,f,st,rt,W)||s!==null&&s.dependencies!==null&&_f(s.dependencies))?(nt||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(f,rt,W),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(f,rt,W)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||R===s.memoizedProps&&st===s.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&st===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=rt),v.props=f,v.state=rt,v.context=W,f=ct):(typeof v.componentDidUpdate!="function"||R===s.memoizedProps&&st===s.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&st===s.memoizedState||(a.flags|=1024),f=!1)}return v=f,Nf(s,a),f=(a.flags&128)!==0,v||f?(v=a.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,s!==null&&f?(a.child=gu(a,s.child,null,y),a.child=gu(a,null,u,y)):Dn(s,a,u,y),a.memoizedState=v.state,s=a.child):s=Fr(s,a,y),s}function Z0(s,a,u,f){return Ua(),a.flags|=256,Dn(s,a,u,f),a.child}var Up={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hp(s){return{baseLanes:s,cachePool:Dv()}}function jp(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=hs),s}function W0(s,a,u){var f=a.pendingProps,y=!1,v=(a.flags&128)!==0,R;if((R=v)||(R=s!==null&&s.memoizedState===null?!1:(_n.current&2)!==0),R&&(y=!0,a.flags&=-129),R=(a.flags&32)!==0,a.flags&=-33,s===null){if(Ft){if(y?Za(a):Wa(),Ft){var O=Ot,W;if(W=O){t:{for(W=O,O=Ze;W.nodeType!==8;){if(!O){O=null;break t}if(W=Ls(W.nextSibling),W===null){O=null;break t}}O=W}O!==null?(a.memoizedState={dehydrated:O,treeContext:A!==null?{id:I,overflow:Z}:null,retryLane:536870912,hydrationErrors:null},W=oi(18,null,null,0),W.stateNode=O,W.return=a,a.child=W,It=a,Ot=null,W=!0):W=!1}W||di(a)}if(O=a.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return Ag(O)?a.lanes=32:a.lanes=536870912,null;jr(a)}return O=f.children,f=f.fallback,y?(Wa(),y=a.mode,O=Vf({mode:"hidden",children:O},y),f=ir(f,y,u,null),O.return=a,f.return=a,O.sibling=f,a.child=O,y=a.child,y.memoizedState=Hp(u),y.childLanes=jp(s,R,u),a.memoizedState=Up,f):(Za(a),Fp(a,O))}if(W=s.memoizedState,W!==null&&(O=W.dehydrated,O!==null)){if(v)a.flags&256?(Za(a),a.flags&=-257,a=qp(s,a,u)):a.memoizedState!==null?(Wa(),a.child=s.child,a.flags|=128,a=null):(Wa(),y=f.fallback,O=a.mode,f=Vf({mode:"visible",children:f.children},O),y=ir(y,O,u,null),y.flags|=2,f.return=a,y.return=a,f.sibling=y,a.child=f,gu(a,s.child,null,u),f=a.child,f.memoizedState=Hp(u),f.childLanes=jp(s,R,u),a.memoizedState=Up,a=y);else if(Za(a),Ag(O)){if(R=O.nextSibling&&O.nextSibling.dataset,R)var nt=R.dgst;R=nt,f=Error(i(419)),f.stack="",f.digest=R,Ha({value:f,source:null,stack:null}),a=qp(s,a,u)}else if(xn||cl(s,a,u,!1),R=(u&s.childLanes)!==0,xn||R){if(R=ze,R!==null&&(f=u&-u,f=(f&42)!==0?1:Gs(f),f=(f&(R.suspendedLanes|u))!==0?0:f,f!==0&&f!==W.retryLane))throw W.retryLane=f,za(s,f),qi(R,s,f),z0;O.data==="$?"||lg(),a=qp(s,a,u)}else O.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=W.treeContext,Ot=Ls(O.nextSibling),It=a,Ft=!0,Ve=null,Ze=!1,s!==null&&(_[T++]=I,_[T++]=Z,_[T++]=A,I=s.id,Z=s.overflow,A=a),a=Fp(a,f.children),a.flags|=4096);return a}return y?(Wa(),y=f.fallback,O=a.mode,W=s.child,nt=W.sibling,f=ls(W,{mode:"hidden",children:f.children}),f.subtreeFlags=W.subtreeFlags&65011712,nt!==null?y=ls(nt,y):(y=ir(y,O,u,null),y.flags|=2),y.return=a,f.return=a,f.sibling=y,a.child=f,f=y,y=a.child,O=s.child.memoizedState,O===null?O=Hp(u):(W=O.cachePool,W!==null?(nt=gn._currentValue,W=W.parent!==nt?{parent:nt,pool:nt}:W):W=Dv(),O={baseLanes:O.baseLanes|u,cachePool:W}),y.memoizedState=O,y.childLanes=jp(s,R,u),a.memoizedState=Up,f):(Za(a),u=s.child,s=u.sibling,u=ls(u,{mode:"visible",children:f.children}),u.return=a,u.sibling=null,s!==null&&(R=a.deletions,R===null?(a.deletions=[s],a.flags|=16):R.push(s)),a.child=u,a.memoizedState=null,u)}function Fp(s,a){return a=Vf({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Vf(s,a){return s=oi(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function qp(s,a,u){return gu(a,s.child,null,u),s=Fp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Y0(s,a,u){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),ul(s.return,a,u)}function Gp(s,a,u,f,y){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:y}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=y)}function $0(s,a,u){var f=a.pendingProps,y=f.revealOrder,v=f.tail;if(Dn(s,a,f.children,u),f=_n.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Y0(s,u,a);else if(s.tag===19)Y0(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}switch(_t(_n,f),y){case"forwards":for(u=a.child,y=null;u!==null;)s=u.alternate,s!==null&&Df(s)===null&&(y=u),u=u.sibling;u=y,u===null?(y=a.child,a.child=null):(y=u.sibling,u.sibling=null),Gp(a,!1,y,u,v);break;case"backwards":for(u=null,y=a.child,a.child=null;y!==null;){if(s=y.alternate,s!==null&&Df(s)===null){a.child=y;break}s=y.sibling,y.sibling=u,u=y,y=s}Gp(a,!0,u,null,v);break;case"together":Gp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Fr(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),Qa|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(cl(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=ls(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ls(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Zp(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&_f(s)))}function KR(s,a,u){switch(a.tag){case 3:le(a,a.stateNode.containerInfo),sr(a,gn,s.memoizedState.cache),Ua();break;case 27:case 5:Wi(a);break;case 4:le(a,a.stateNode.containerInfo);break;case 10:sr(a,a.type,a.memoizedProps.value);break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(Za(a),a.flags|=128,null):(u&a.child.childLanes)!==0?W0(s,a,u):(Za(a),s=Fr(s,a,u),s!==null?s.sibling:null);Za(a);break;case 19:var y=(s.flags&128)!==0;if(f=(u&a.childLanes)!==0,f||(cl(s,a,u,!1),f=(u&a.childLanes)!==0),y){if(f)return $0(s,a,u);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),_t(_n,_n.current),f)break;return null;case 22:case 23:return a.lanes=0,j0(s,a,u);case 24:sr(a,gn,s.memoizedState.cache)}return Fr(s,a,u)}function K0(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)xn=!0;else{if(!Zp(s,u)&&(a.flags&128)===0)return xn=!1,KR(s,a,u);xn=(s.flags&131072)!==0}else xn=!1,Ft&&(a.flags&1048576)!==0&&at(a,h,a.index);switch(a.lanes=0,a.tag){case 16:t:{s=a.pendingProps;var f=a.elementType,y=f._init;if(f=y(f._payload),a.type=f,typeof f=="function")au(f)?(s=ml(f,s),a.tag=1,a=G0(null,a,f,s,u)):(a.tag=0,a=Bp(null,a,f,s,u));else{if(f!=null){if(y=f.$$typeof,y===it){a.tag=11,a=B0(null,a,f,s,u);break t}else if(y===V){a.tag=14,a=U0(null,a,f,s,u);break t}}throw a=Yt(f)||f,Error(i(306,a,""))}}return a;case 0:return Bp(s,a,a.type,a.pendingProps,u);case 1:return f=a.type,y=ml(f,a.pendingProps),G0(s,a,f,y,u);case 3:t:{if(le(a,a.stateNode.containerInfo),s===null)throw Error(i(387));f=a.pendingProps;var v=a.memoizedState;y=v.element,pp(s,a),wc(a,f,null,u);var R=a.memoizedState;if(f=R.cache,sr(a,gn,f),f!==v.cache&&lu(a,[gn],u,!0),Tc(),f=R.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:R.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=Z0(s,a,f,u);break t}else if(f!==y){y=ri(Error(i(424)),a),Ha(y),a=Z0(s,a,f,u);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ot=Ls(s.firstChild),It=a,Ft=!0,Ve=null,Ze=!0,u=C0(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ua(),f===y){a=Fr(s,a,u);break t}Dn(s,a,f,u)}a=a.child}return a;case 26:return Nf(s,a),s===null?(u=tT(a.type,null,a.pendingProps,null))?a.memoizedState=u:Ft||(u=a.type,s=a.pendingProps,f=Xf(wt.current).createElement(u),f[Je]=a,f[Ke]=s,Ln(f,u,s),Ge(f),a.stateNode=f):a.memoizedState=tT(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Wi(a),s===null&&Ft&&(f=a.stateNode=Xb(a.type,a.pendingProps,wt.current),It=a,Ze=!0,y=Ot,no(a.type)?(xg=y,Ot=Ls(f.firstChild)):Ot=y),Dn(s,a,a.pendingProps.children,u),Nf(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Ft&&((y=f=Ot)&&(f=SC(f,a.type,a.pendingProps,Ze),f!==null?(a.stateNode=f,It=a,Ot=Ls(f.firstChild),Ze=!1,y=!0):y=!1),y||di(a)),Wi(a),y=a.type,v=a.pendingProps,R=s!==null?s.memoizedProps:null,f=v.children,wg(y,v)?f=null:R!==null&&wg(y,R)&&(a.flags|=32),a.memoizedState!==null&&(y=Tp(s,a,jR,null,null,u),qc._currentValue=y),Nf(s,a),Dn(s,a,f,u),a.child;case 6:return s===null&&Ft&&((s=u=Ot)&&(u=AC(u,a.pendingProps,Ze),u!==null?(a.stateNode=u,It=a,Ot=null,s=!0):s=!1),s||di(a)),null;case 13:return W0(s,a,u);case 4:return le(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=gu(a,null,f,u):Dn(s,a,f,u),a.child;case 11:return B0(s,a,a.type,a.pendingProps,u);case 7:return Dn(s,a,a.pendingProps,u),a.child;case 8:return Dn(s,a,a.pendingProps.children,u),a.child;case 12:return Dn(s,a,a.pendingProps.children,u),a.child;case 10:return f=a.pendingProps,sr(a,a.type,f.value),Dn(s,a,f.children,u),a.child;case 9:return y=a.type._context,f=a.pendingProps.children,hl(a),y=Wn(y),f=f(y),a.flags|=1,Dn(s,a,f,u),a.child;case 14:return U0(s,a,a.type,a.pendingProps,u);case 15:return H0(s,a,a.type,a.pendingProps,u);case 19:return $0(s,a,u);case 31:return f=a.pendingProps,u=a.mode,f={mode:f.mode,children:f.children},s===null?(u=Vf(f,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=ls(s.child,f),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return j0(s,a,u);case 24:return hl(a),f=Wn(gn),s===null?(y=fp(),y===null&&(y=ze,v=cp(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=u),y=v),a.memoizedState={parent:f,cache:y},mp(a),sr(a,gn,y)):((s.lanes&u)!==0&&(pp(s,a),wc(a,null,null,u),Tc()),y=s.memoizedState,v=a.memoizedState,y.parent!==f?(y={parent:f,cache:f},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),sr(a,gn,f)):(f=v.cache,sr(a,gn,f),f!==y.cache&&lu(a,[gn],u,!0))),Dn(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function qr(s){s.flags|=4}function X0(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!rT(a)){if(a=cs.current,a!==null&&((ce&4194048)===ce?rr!==null:(ce&62914560)!==ce&&(ce&536870912)===0||a!==rr))throw vc=dp,kv;s.flags|=8192}}function zf(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?_a():536870912,s.lanes|=a,bu|=a)}function Ic(s,a){if(!Ft)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function We(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,f=0;if(a)for(var y=s.child;y!==null;)u|=y.lanes|y.childLanes,f|=y.subtreeFlags&65011712,f|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)u|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=f,s.childLanes=u,a}function XR(s,a,u){var f=a.pendingProps;switch(At(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(a),null;case 1:return We(a),null;case 3:return u=a.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),Ds(gn),Ei(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(ll(a)?qr(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,gf())),We(a),null;case 26:return u=a.memoizedState,s===null?(qr(a),u!==null?(We(a),X0(a,u)):(We(a),a.flags&=-16777217)):u?u!==s.memoizedState?(qr(a),We(a),X0(a,u)):(We(a),a.flags&=-16777217):(s.memoizedProps!==f&&qr(a),We(a),a.flags&=-16777217),null;case 27:Si(a),u=wt.current;var y=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==f&&qr(a);else{if(!f){if(a.stateNode===null)throw Error(i(166));return We(a),null}s=St.current,ll(a)?mf(a):(s=Xb(y,f,u),a.stateNode=s,qr(a))}return We(a),null;case 5:if(Si(a),u=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==f&&qr(a);else{if(!f){if(a.stateNode===null)throw Error(i(166));return We(a),null}if(s=St.current,ll(a))mf(a);else{switch(y=Xf(wt.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof f.is=="string"?y.createElement("select",{is:f.is}):y.createElement("select"),f.multiple?s.multiple=!0:f.size&&(s.size=f.size);break;default:s=typeof f.is=="string"?y.createElement(u,{is:f.is}):y.createElement(u)}}s[Je]=a,s[Ke]=f;t:for(y=a.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===a)break t;for(;y.sibling===null;){if(y.return===null||y.return===a)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}a.stateNode=s;t:switch(Ln(s,u,f),u){case"button":case"input":case"select":case"textarea":s=!!f.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&qr(a)}}return We(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==f&&qr(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(i(166));if(s=wt.current,ll(a)){if(s=a.stateNode,u=a.memoizedProps,f=null,y=It,y!==null)switch(y.tag){case 27:case 5:f=y.memoizedProps}s[Je]=a,s=!!(s.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||qb(s.nodeValue,u)),s||di(a)}else s=Xf(s).createTextNode(f),s[Je]=a,a.stateNode=s}return We(a),null;case 13:if(f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=ll(a),f!==null&&f.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Je]=a}else Ua(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;We(a),y=!1}else y=gf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(jr(a),a):(jr(a),null)}if(jr(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=f!==null,s=s!==null&&s.memoizedState!==null,u){f=a.child,y=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(y=f.alternate.memoizedState.cachePool.pool);var v=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==y&&(f.flags|=2048)}return u!==s&&u&&(a.child.flags|=8192),zf(a,a.updateQueue),We(a),null;case 4:return Ei(),s===null&&_g(a.stateNode.containerInfo),We(a),null;case 10:return Ds(a.type),We(a),null;case 19:if(Tt(_n),y=a.memoizedState,y===null)return We(a),null;if(f=(a.flags&128)!==0,v=y.rendering,v===null)if(f)Ic(y,!1);else{if(Qe!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(v=Df(s),v!==null){for(a.flags|=128,Ic(y,!1),s=v.updateQueue,a.updateQueue=s,zf(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)mc(u,s),u=u.sibling;return _t(_n,_n.current&1|2),a.child}s=s.sibling}y.tail!==null&&Un()>Hf&&(a.flags|=128,f=!0,Ic(y,!1),a.lanes=4194304)}else{if(!f)if(s=Df(v),s!==null){if(a.flags|=128,f=!0,s=s.updateQueue,a.updateQueue=s,zf(a,s),Ic(y,!0),y.tail===null&&y.tailMode==="hidden"&&!v.alternate&&!Ft)return We(a),null}else 2*Un()-y.renderingStartTime>Hf&&u!==536870912&&(a.flags|=128,f=!0,Ic(y,!1),a.lanes=4194304);y.isBackwards?(v.sibling=a.child,a.child=v):(s=y.last,s!==null?s.sibling=v:a.child=v,y.last=v)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=Un(),a.sibling=null,s=_n.current,_t(_n,f?s&1|2:s&1),a):(We(a),null);case 22:case 23:return jr(a),vp(),f=a.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(u&536870912)!==0&&(a.flags&128)===0&&(We(a),a.subtreeFlags&6&&(a.flags|=8192)):We(a),u=a.updateQueue,u!==null&&zf(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==u&&(a.flags|=2048),s!==null&&Tt(fl),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Ds(gn),We(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function QR(s,a){switch(At(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ds(gn),Ei(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Si(a),null;case 13:if(jr(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ua()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Tt(_n),null;case 4:return Ei(),null;case 10:return Ds(a.type),null;case 22:case 23:return jr(a),vp(),s!==null&&Tt(fl),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Ds(gn),null;case 25:return null;default:return null}}function Q0(s,a){switch(At(a),a.tag){case 3:Ds(gn),Ei();break;case 26:case 27:case 5:Si(a);break;case 4:Ei();break;case 13:jr(a);break;case 19:Tt(_n);break;case 10:Ds(a.type);break;case 22:case 23:jr(a),vp(),s!==null&&Tt(fl);break;case 24:Ds(gn)}}function Mc(s,a){try{var u=a.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var y=f.next;u=y;do{if((u.tag&s)===s){f=void 0;var v=u.create,R=u.inst;f=v(),R.destroy=f}u=u.next}while(u!==y)}}catch(O){Pe(a,a.return,O)}}function Ya(s,a,u){try{var f=a.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var v=y.next;f=v;do{if((f.tag&s)===s){var R=f.inst,O=R.destroy;if(O!==void 0){R.destroy=void 0,y=a;var W=u,nt=O;try{nt()}catch(ct){Pe(y,W,ct)}}}f=f.next}while(f!==v)}}catch(ct){Pe(a,a.return,ct)}}function J0(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{Uv(a,u)}catch(f){Pe(s,s.return,f)}}}function tb(s,a,u){u.props=ml(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(f){Pe(s,a,f)}}function Oc(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof u=="function"?s.refCleanup=u(f):u.current=f}}catch(y){Pe(s,a,y)}}function ar(s,a){var u=s.ref,f=s.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(y){Pe(s,a,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){Pe(s,a,y)}else u.current=null}function eb(s){var a=s.type,u=s.memoizedProps,f=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break t;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(y){Pe(s,s.return,y)}}function Wp(s,a,u){try{var f=s.stateNode;vC(f,s.type,u,a),f[Ke]=a}catch(y){Pe(s,s.return,y)}}function nb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&no(s.type)||s.tag===4}function Yp(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||nb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&no(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function $p(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Kf));else if(f!==4&&(f===27&&no(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for($p(s,a,u),s=s.sibling;s!==null;)$p(s,a,u),s=s.sibling}function Bf(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(f!==4&&(f===27&&no(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Bf(s,a,u),s=s.sibling;s!==null;)Bf(s,a,u),s=s.sibling}function ib(s){var a=s.stateNode,u=s.memoizedProps;try{for(var f=s.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);Ln(a,f,u),a[Je]=s,a[Ke]=u}catch(v){Pe(s,s.return,v)}}var Gr=!1,nn=!1,Kp=!1,sb=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function JR(s,a){if(s=s.containerInfo,bg=id,s=el(s),nl(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{u=(u=s.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var y=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break t}var R=0,O=-1,W=-1,nt=0,ct=0,mt=s,st=null;e:for(;;){for(var rt;mt!==u||y!==0&&mt.nodeType!==3||(O=R+y),mt!==v||f!==0&&mt.nodeType!==3||(W=R+f),mt.nodeType===3&&(R+=mt.nodeValue.length),(rt=mt.firstChild)!==null;)st=mt,mt=rt;for(;;){if(mt===s)break e;if(st===u&&++nt===y&&(O=R),st===v&&++ct===f&&(W=R),(rt=mt.nextSibling)!==null)break;mt=st,st=mt.parentNode}mt=rt}u=O===-1||W===-1?null:{start:O,end:W}}else u=null}u=u||{start:0,end:0}}else u=null;for(Tg={focusedElem:s,selectionRange:u},id=!1,Rn=a;Rn!==null;)if(a=Rn,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,Rn=s;else for(;Rn!==null;){switch(a=Rn,v=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,u=a,y=v.memoizedProps,v=v.memoizedState,f=u.stateNode;try{var jt=ml(u.type,y,u.elementType===u.type);s=f.getSnapshotBeforeUpdate(jt,v),f.__reactInternalSnapshotBeforeUpdate=s}catch(zt){Pe(u,u.return,zt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)Sg(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Sg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Rn=s;break}Rn=a.return}}function rb(s,a,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:$a(s,u),f&4&&Mc(5,u);break;case 1:if($a(s,u),f&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(R){Pe(u,u.return,R)}else{var y=ml(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(y,a,s.__reactInternalSnapshotBeforeUpdate)}catch(R){Pe(u,u.return,R)}}f&64&&J0(u),f&512&&Oc(u,u.return);break;case 3:if($a(s,u),f&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{Uv(s,a)}catch(R){Pe(u,u.return,R)}}break;case 27:a===null&&f&4&&ib(u);case 26:case 5:$a(s,u),a===null&&f&4&&eb(u),f&512&&Oc(u,u.return);break;case 12:$a(s,u);break;case 13:$a(s,u),f&4&&lb(s,u),f&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=lC.bind(null,u),xC(s,u))));break;case 22:if(f=u.memoizedState!==null||Gr,!f){a=a!==null&&a.memoizedState!==null||nn,y=Gr;var v=nn;Gr=f,(nn=a)&&!v?Ka(s,u,(u.subtreeFlags&8772)!==0):$a(s,u),Gr=y,nn=v}break;case 30:break;default:$a(s,u)}}function ab(s){var a=s.alternate;a!==null&&(s.alternate=null,ab(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Ts(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var qe=null,pi=!1;function Zr(s,a,u){for(u=u.child;u!==null;)ob(s,a,u),u=u.sibling}function ob(s,a,u){if(fe&&typeof fe.onCommitFiberUnmount=="function")try{fe.onCommitFiberUnmount(De,u)}catch{}switch(u.tag){case 26:nn||ar(u,a),Zr(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:nn||ar(u,a);var f=qe,y=pi;no(u.type)&&(qe=u.stateNode,pi=!1),Zr(s,a,u),Uc(u.stateNode),qe=f,pi=y;break;case 5:nn||ar(u,a);case 6:if(f=qe,y=pi,qe=null,Zr(s,a,u),qe=f,pi=y,qe!==null)if(pi)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(u.stateNode)}catch(v){Pe(u,a,v)}else try{qe.removeChild(u.stateNode)}catch(v){Pe(u,a,v)}break;case 18:qe!==null&&(pi?(s=qe,$b(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Yc(s)):$b(qe,u.stateNode));break;case 4:f=qe,y=pi,qe=u.stateNode.containerInfo,pi=!0,Zr(s,a,u),qe=f,pi=y;break;case 0:case 11:case 14:case 15:nn||Ya(2,u,a),nn||Ya(4,u,a),Zr(s,a,u);break;case 1:nn||(ar(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"&&tb(u,a,f)),Zr(s,a,u);break;case 21:Zr(s,a,u);break;case 22:nn=(f=nn)||u.memoizedState!==null,Zr(s,a,u),nn=f;break;default:Zr(s,a,u)}}function lb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Yc(s)}catch(u){Pe(a,a.return,u)}}function tC(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new sb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new sb),a;default:throw Error(i(435,s.tag))}}function Xp(s,a){var u=tC(s);a.forEach(function(f){var y=uC.bind(null,s,f);u.has(f)||(u.add(f),f.then(y,y))})}function Ui(s,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var y=u[f],v=s,R=a,O=R;t:for(;O!==null;){switch(O.tag){case 27:if(no(O.type)){qe=O.stateNode,pi=!1;break t}break;case 5:qe=O.stateNode,pi=!1;break t;case 3:case 4:qe=O.stateNode.containerInfo,pi=!0;break t}O=O.return}if(qe===null)throw Error(i(160));ob(v,R,y),qe=null,pi=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)ub(a,s),a=a.sibling}var ks=null;function ub(s,a){var u=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ui(a,s),Hi(s),f&4&&(Ya(3,s,s.return),Mc(3,s),Ya(5,s,s.return));break;case 1:Ui(a,s),Hi(s),f&512&&(nn||u===null||ar(u,u.return)),f&64&&Gr&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var y=ks;if(Ui(a,s),Hi(s),f&512&&(nn||u===null||ar(u,u.return)),f&4){var v=u!==null?u.memoizedState:null;if(f=s.memoizedState,u===null)if(f===null)if(s.stateNode===null){t:{f=s.type,u=s.memoizedProps,y=y.ownerDocument||y;e:switch(f){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Ws]||v[Je]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(f),y.head.insertBefore(v,y.querySelector("head > title"))),Ln(v,f,u),v[Je]=s,Ge(v),f=v;break t;case"link":var R=iT("link","href",y).get(f+(u.href||""));if(R){for(var O=0;O<R.length;O++)if(v=R[O],v.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&v.getAttribute("rel")===(u.rel==null?null:u.rel)&&v.getAttribute("title")===(u.title==null?null:u.title)&&v.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){R.splice(O,1);break e}}v=y.createElement(f),Ln(v,f,u),y.head.appendChild(v);break;case"meta":if(R=iT("meta","content",y).get(f+(u.content||""))){for(O=0;O<R.length;O++)if(v=R[O],v.getAttribute("content")===(u.content==null?null:""+u.content)&&v.getAttribute("name")===(u.name==null?null:u.name)&&v.getAttribute("property")===(u.property==null?null:u.property)&&v.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&v.getAttribute("charset")===(u.charSet==null?null:u.charSet)){R.splice(O,1);break e}}v=y.createElement(f),Ln(v,f,u),y.head.appendChild(v);break;default:throw Error(i(468,f))}v[Je]=s,Ge(v),f=v}s.stateNode=f}else sT(y,s.type,s.stateNode);else s.stateNode=nT(y,f,s.memoizedProps);else v!==f?(v===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):v.count--,f===null?sT(y,s.type,s.stateNode):nT(y,f,s.memoizedProps)):f===null&&s.stateNode!==null&&Wp(s,s.memoizedProps,u.memoizedProps)}break;case 27:Ui(a,s),Hi(s),f&512&&(nn||u===null||ar(u,u.return)),u!==null&&f&4&&Wp(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Ui(a,s),Hi(s),f&512&&(nn||u===null||ar(u,u.return)),s.flags&32){y=s.stateNode;try{wn(y,"")}catch(rt){Pe(s,s.return,rt)}}f&4&&s.stateNode!=null&&(y=s.memoizedProps,Wp(s,y,u!==null?u.memoizedProps:y)),f&1024&&(Kp=!0);break;case 6:if(Ui(a,s),Hi(s),f&4){if(s.stateNode===null)throw Error(i(162));f=s.memoizedProps,u=s.stateNode;try{u.nodeValue=f}catch(rt){Pe(s,s.return,rt)}}break;case 3:if(td=null,y=ks,ks=Qf(a.containerInfo),Ui(a,s),ks=y,Hi(s),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Yc(a.containerInfo)}catch(rt){Pe(s,s.return,rt)}Kp&&(Kp=!1,cb(s));break;case 4:f=ks,ks=Qf(s.stateNode.containerInfo),Ui(a,s),Hi(s),ks=f;break;case 12:Ui(a,s),Hi(s);break;case 13:Ui(a,s),Hi(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(ig=Un()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Xp(s,f)));break;case 22:y=s.memoizedState!==null;var W=u!==null&&u.memoizedState!==null,nt=Gr,ct=nn;if(Gr=nt||y,nn=ct||W,Ui(a,s),nn=ct,Gr=nt,Hi(s),f&8192)t:for(a=s.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(u===null||W||Gr||nn||pl(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){W=u=a;try{if(v=W.stateNode,y)R=v.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{O=W.stateNode;var mt=W.memoizedProps.style,st=mt!=null&&mt.hasOwnProperty("display")?mt.display:null;O.style.display=st==null||typeof st=="boolean"?"":(""+st).trim()}}catch(rt){Pe(W,W.return,rt)}}}else if(a.tag===6){if(u===null){W=a;try{W.stateNode.nodeValue=y?"":W.memoizedProps}catch(rt){Pe(W,W.return,rt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=s.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,Xp(s,u))));break;case 19:Ui(a,s),Hi(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Xp(s,f)));break;case 30:break;case 21:break;default:Ui(a,s),Hi(s)}}function Hi(s){var a=s.flags;if(a&2){try{for(var u,f=s.return;f!==null;){if(nb(f)){u=f;break}f=f.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var y=u.stateNode,v=Yp(s);Bf(s,v,y);break;case 5:var R=u.stateNode;u.flags&32&&(wn(R,""),u.flags&=-33);var O=Yp(s);Bf(s,O,R);break;case 3:case 4:var W=u.stateNode.containerInfo,nt=Yp(s);$p(s,nt,W);break;default:throw Error(i(161))}}catch(ct){Pe(s,s.return,ct)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function cb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;cb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function $a(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)rb(s,a.alternate,a),a=a.sibling}function pl(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Ya(4,a,a.return),pl(a);break;case 1:ar(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&tb(a,a.return,u),pl(a);break;case 27:Uc(a.stateNode);case 26:case 5:ar(a,a.return),pl(a);break;case 22:a.memoizedState===null&&pl(a);break;case 30:pl(a);break;default:pl(a)}s=s.sibling}}function Ka(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,y=s,v=a,R=v.flags;switch(v.tag){case 0:case 11:case 15:Ka(y,v,u),Mc(4,v);break;case 1:if(Ka(y,v,u),f=v,y=f.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(nt){Pe(f,f.return,nt)}if(f=v,y=f.updateQueue,y!==null){var O=f.stateNode;try{var W=y.shared.hiddenCallbacks;if(W!==null)for(y.shared.hiddenCallbacks=null,y=0;y<W.length;y++)Bv(W[y],O)}catch(nt){Pe(f,f.return,nt)}}u&&R&64&&J0(v),Oc(v,v.return);break;case 27:ib(v);case 26:case 5:Ka(y,v,u),u&&f===null&&R&4&&eb(v),Oc(v,v.return);break;case 12:Ka(y,v,u);break;case 13:Ka(y,v,u),u&&R&4&&lb(y,v);break;case 22:v.memoizedState===null&&Ka(y,v,u),Oc(v,v.return);break;case 30:break;default:Ka(y,v,u)}a=a.sibling}}function Qp(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&gc(u))}function Jp(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&gc(s))}function or(s,a,u,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)hb(s,a,u,f),a=a.sibling}function hb(s,a,u,f){var y=a.flags;switch(a.tag){case 0:case 11:case 15:or(s,a,u,f),y&2048&&Mc(9,a);break;case 1:or(s,a,u,f);break;case 3:or(s,a,u,f),y&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&gc(s)));break;case 12:if(y&2048){or(s,a,u,f),s=a.stateNode;try{var v=a.memoizedProps,R=v.id,O=v.onPostCommit;typeof O=="function"&&O(R,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(W){Pe(a,a.return,W)}}else or(s,a,u,f);break;case 13:or(s,a,u,f);break;case 23:break;case 22:v=a.stateNode,R=a.alternate,a.memoizedState!==null?v._visibility&2?or(s,a,u,f):Pc(s,a):v._visibility&2?or(s,a,u,f):(v._visibility|=2,_u(s,a,u,f,(a.subtreeFlags&10256)!==0)),y&2048&&Qp(R,a);break;case 24:or(s,a,u,f),y&2048&&Jp(a.alternate,a);break;default:or(s,a,u,f)}}function _u(s,a,u,f,y){for(y=y&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var v=s,R=a,O=u,W=f,nt=R.flags;switch(R.tag){case 0:case 11:case 15:_u(v,R,O,W,y),Mc(8,R);break;case 23:break;case 22:var ct=R.stateNode;R.memoizedState!==null?ct._visibility&2?_u(v,R,O,W,y):Pc(v,R):(ct._visibility|=2,_u(v,R,O,W,y)),y&&nt&2048&&Qp(R.alternate,R);break;case 24:_u(v,R,O,W,y),y&&nt&2048&&Jp(R.alternate,R);break;default:_u(v,R,O,W,y)}a=a.sibling}}function Pc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,f=a,y=f.flags;switch(f.tag){case 22:Pc(u,f),y&2048&&Qp(f.alternate,f);break;case 24:Pc(u,f),y&2048&&Jp(f.alternate,f);break;default:Pc(u,f)}a=a.sibling}}var Dc=8192;function yu(s){if(s.subtreeFlags&Dc)for(s=s.child;s!==null;)fb(s),s=s.sibling}function fb(s){switch(s.tag){case 26:yu(s),s.flags&Dc&&s.memoizedState!==null&&BC(ks,s.memoizedState,s.memoizedProps);break;case 5:yu(s);break;case 3:case 4:var a=ks;ks=Qf(s.stateNode.containerInfo),yu(s),ks=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=Dc,Dc=16777216,yu(s),Dc=a):yu(s));break;default:yu(s)}}function db(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function kc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];Rn=f,pb(f,s)}db(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)mb(s),s=s.sibling}function mb(s){switch(s.tag){case 0:case 11:case 15:kc(s),s.flags&2048&&Ya(9,s,s.return);break;case 3:kc(s);break;case 12:kc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Uf(s)):kc(s);break;default:kc(s)}}function Uf(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];Rn=f,pb(f,s)}db(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Ya(8,a,a.return),Uf(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Uf(a));break;default:Uf(a)}s=s.sibling}}function pb(s,a){for(;Rn!==null;){var u=Rn;switch(u.tag){case 0:case 11:case 15:Ya(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:gc(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Rn=f;else t:for(u=s;Rn!==null;){f=Rn;var y=f.sibling,v=f.return;if(ab(f),f===u){Rn=null;break t}if(y!==null){y.return=v,Rn=y;break t}Rn=v}}}var eC={getCacheForType:function(s){var a=Wn(gn),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u}},nC=typeof WeakMap=="function"?WeakMap:Map,Te=0,ze=null,ne=null,ce=0,we=0,ji=null,Xa=!1,vu=!1,tg=!1,Wr=0,Qe=0,Qa=0,gl=0,eg=0,hs=0,bu=0,Lc=null,gi=null,ng=!1,ig=0,Hf=1/0,jf=null,Ja=null,kn=0,to=null,Tu=null,wu=0,sg=0,rg=null,gb=null,Nc=0,ag=null;function Fi(){if((Te&2)!==0&&ce!==0)return ce&-ce;if(tt.T!==null){var s=uu;return s!==0?s:dg()}return Zs()}function _b(){hs===0&&(hs=(ce&536870912)===0||Ft?Ho():536870912);var s=cs.current;return s!==null&&(s.flags|=32),hs}function qi(s,a,u){(s===ze&&(we===2||we===9)||s.cancelPendingCommit!==null)&&(Eu(s,0),eo(s,ce,hs,!1)),$i(s,u),((Te&2)===0||s!==ze)&&(s===ze&&((Te&2)===0&&(gl|=u),Qe===4&&eo(s,ce,hs,!1)),lr(s))}function yb(s,a,u){if((Te&6)!==0)throw Error(i(327));var f=!u&&(a&124)===0&&(a&s.expiredLanes)===0||xi(s,a),y=f?rC(s,a):ug(s,a,!0),v=f;do{if(y===0){vu&&!f&&eo(s,a,0,!1);break}else{if(u=s.current.alternate,v&&!iC(u)){y=ug(s,a,!1),v=!1;continue}if(y===2){if(v=a,s.errorRecoveryDisabledLanes&v)var R=0;else R=s.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){a=R;t:{var O=s;y=Lc;var W=O.current.memoizedState.isDehydrated;if(W&&(Eu(O,R).flags|=256),R=ug(O,R,!1),R!==2){if(tg&&!W){O.errorRecoveryDisabledLanes|=v,gl|=v,y=4;break t}v=gi,gi=y,v!==null&&(gi===null?gi=v:gi.push.apply(gi,v))}y=R}if(v=!1,y!==2)continue}}if(y===1){Eu(s,0),eo(s,a,0,!0);break}t:{switch(f=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:eo(f,a,hs,!Xa);break t;case 2:gi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(y=ig+300-Un(),10<y)){if(eo(f,a,hs,!Xa),ga(f,0,!0)!==0)break t;f.timeoutHandle=Wb(vb.bind(null,f,u,gi,jf,ng,a,hs,gl,bu,Xa,v,2,-0,0),y);break t}vb(f,u,gi,jf,ng,a,hs,gl,bu,Xa,v,0,-0,0)}}break}while(!0);lr(s)}function vb(s,a,u,f,y,v,R,O,W,nt,ct,mt,st,rt){if(s.timeoutHandle=-1,mt=a.subtreeFlags,(mt&8192||(mt&16785408)===16785408)&&(Fc={stylesheets:null,count:0,unsuspend:zC},fb(a),mt=UC(),mt!==null)){s.cancelPendingCommit=mt(xb.bind(null,s,a,v,u,f,y,R,O,W,ct,1,st,rt)),eo(s,v,R,!nt);return}xb(s,a,v,u,f,y,R,O,W)}function iC(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var y=u[f],v=y.getSnapshot;y=y.value;try{if(!ii(v(),y))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function eo(s,a,u,f){a&=~eg,a&=~gl,s.suspendedLanes|=a,s.pingedLanes&=~a,f&&(s.warmLanes|=a),f=s.expirationTimes;for(var y=a;0<y;){var v=31-bn(y),R=1<<v;f[v]=-1,y&=~R}u!==0&&Ki(s,u,a)}function Ff(){return(Te&6)===0?(Vc(0),!1):!0}function og(){if(ne!==null){if(we===0)var s=ne.return;else s=ne,Ps=us=null,Sp(s),pu=null,Rc=0,s=ne;for(;s!==null;)Q0(s.alternate,s),s=s.return;ne=null}}function Eu(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,TC(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),og(),ze=s,ne=u=ls(s.current,null),ce=a,we=0,ji=null,Xa=!1,vu=xi(s,a),tg=!1,bu=hs=eg=gl=Qa=Qe=0,gi=Lc=null,ng=!1,(a&8)!==0&&(a|=a&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=a;0<f;){var y=31-bn(f),v=1<<y;a|=s[y],f&=~v}return Wr=a,sl(),u}function bb(s,a){Qt=null,tt.H=Mf,a===yc||a===bf?(a=Vv(),we=3):a===kv?(a=Vv(),we=4):we=a===z0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ji=a,ne===null&&(Qe=1,Lf(s,ri(a,s.current)))}function Tb(){var s=tt.H;return tt.H=Mf,s===null?Mf:s}function wb(){var s=tt.A;return tt.A=eC,s}function lg(){Qe=4,Xa||(ce&4194048)!==ce&&cs.current!==null||(vu=!0),(Qa&134217727)===0&&(gl&134217727)===0||ze===null||eo(ze,ce,hs,!1)}function ug(s,a,u){var f=Te;Te|=2;var y=Tb(),v=wb();(ze!==s||ce!==a)&&(jf=null,Eu(s,a)),a=!1;var R=Qe;t:do try{if(we!==0&&ne!==null){var O=ne,W=ji;switch(we){case 8:og(),R=6;break t;case 3:case 2:case 9:case 6:cs.current===null&&(a=!0);var nt=we;if(we=0,ji=null,Su(s,O,W,nt),u&&vu){R=0;break t}break;default:nt=we,we=0,ji=null,Su(s,O,W,nt)}}sC(),R=Qe;break}catch(ct){bb(s,ct)}while(!0);return a&&s.shellSuspendCounter++,Ps=us=null,Te=f,tt.H=y,tt.A=v,ne===null&&(ze=null,ce=0,sl()),R}function sC(){for(;ne!==null;)Eb(ne)}function rC(s,a){var u=Te;Te|=2;var f=Tb(),y=wb();ze!==s||ce!==a?(jf=null,Hf=Un()+500,Eu(s,a)):vu=xi(s,a);t:do try{if(we!==0&&ne!==null){a=ne;var v=ji;e:switch(we){case 1:we=0,ji=null,Su(s,a,v,1);break;case 2:case 9:if(Lv(v)){we=0,ji=null,Sb(a);break}a=function(){we!==2&&we!==9||ze!==s||(we=7),lr(s)},v.then(a,a);break t;case 3:we=7;break t;case 4:we=5;break t;case 7:Lv(v)?(we=0,ji=null,Sb(a)):(we=0,ji=null,Su(s,a,v,7));break;case 5:var R=null;switch(ne.tag){case 26:R=ne.memoizedState;case 5:case 27:var O=ne;if(!R||rT(R)){we=0,ji=null;var W=O.sibling;if(W!==null)ne=W;else{var nt=O.return;nt!==null?(ne=nt,qf(nt)):ne=null}break e}}we=0,ji=null,Su(s,a,v,5);break;case 6:we=0,ji=null,Su(s,a,v,6);break;case 8:og(),Qe=6;break t;default:throw Error(i(462))}}aC();break}catch(ct){bb(s,ct)}while(!0);return Ps=us=null,tt.H=f,tt.A=y,Te=u,ne!==null?0:(ze=null,ce=0,sl(),Qe)}function aC(){for(;ne!==null&&!ma();)Eb(ne)}function Eb(s){var a=K0(s.alternate,s,Wr);s.memoizedProps=s.pendingProps,a===null?qf(s):ne=a}function Sb(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=q0(u,a,a.pendingProps,a.type,void 0,ce);break;case 11:a=q0(u,a,a.pendingProps,a.type.render,a.ref,ce);break;case 5:Sp(a);default:Q0(u,a),a=ne=mc(a,Wr),a=K0(u,a,Wr)}s.memoizedProps=s.pendingProps,a===null?qf(s):ne=a}function Su(s,a,u,f){Ps=us=null,Sp(a),pu=null,Rc=0;var y=a.return;try{if($R(s,y,a,u,ce)){Qe=1,Lf(s,ri(u,s.current)),ne=null;return}}catch(v){if(y!==null)throw ne=y,v;Qe=1,Lf(s,ri(u,s.current)),ne=null;return}a.flags&32768?(Ft||f===1?s=!0:vu||(ce&536870912)!==0?s=!1:(Xa=s=!0,(f===2||f===9||f===3||f===6)&&(f=cs.current,f!==null&&f.tag===13&&(f.flags|=16384))),Ab(a,s)):qf(a)}function qf(s){var a=s;do{if((a.flags&32768)!==0){Ab(a,Xa);return}s=a.return;var u=XR(a.alternate,a,Wr);if(u!==null){ne=u;return}if(a=a.sibling,a!==null){ne=a;return}ne=a=s}while(a!==null);Qe===0&&(Qe=5)}function Ab(s,a){do{var u=QR(s.alternate,s);if(u!==null){u.flags&=32767,ne=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){ne=s;return}ne=s=u}while(s!==null);Qe=6,ne=null}function xb(s,a,u,f,y,v,R,O,W){s.cancelPendingCommit=null;do Gf();while(kn!==0);if((Te&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(v=a.lanes|a.childLanes,v|=Bi,jo(s,u,v,R,O,W),s===ze&&(ne=ze=null,ce=0),Tu=a,to=s,wu=u,sg=v,rg=y,gb=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,cC(ys,function(){return Ob(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=tt.T,tt.T=null,y=yt.p,yt.p=2,R=Te,Te|=4;try{JR(s,a,u)}finally{Te=R,yt.p=y,tt.T=f}}kn=1,Rb(),Cb(),Ib()}}function Rb(){if(kn===1){kn=0;var s=to,a=Tu,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=tt.T,tt.T=null;var f=yt.p;yt.p=2;var y=Te;Te|=4;try{ub(a,s);var v=Tg,R=el(s.containerInfo),O=v.focusedElem,W=v.selectionRange;if(R!==O&&O&&O.ownerDocument&&eu(O.ownerDocument.documentElement,O)){if(W!==null&&nl(O)){var nt=W.start,ct=W.end;if(ct===void 0&&(ct=nt),"selectionStart"in O)O.selectionStart=nt,O.selectionEnd=Math.min(ct,O.value.length);else{var mt=O.ownerDocument||document,st=mt&&mt.defaultView||window;if(st.getSelection){var rt=st.getSelection(),jt=O.textContent.length,zt=Math.min(W.start,jt),Me=W.end===void 0?zt:Math.min(W.end,jt);!rt.extend&&zt>Me&&(R=Me,Me=zt,zt=R);var X=fc(O,zt),$=fc(O,Me);if(X&&$&&(rt.rangeCount!==1||rt.anchorNode!==X.node||rt.anchorOffset!==X.offset||rt.focusNode!==$.node||rt.focusOffset!==$.offset)){var et=mt.createRange();et.setStart(X.node,X.offset),rt.removeAllRanges(),zt>Me?(rt.addRange(et),rt.extend($.node,$.offset)):(et.setEnd($.node,$.offset),rt.addRange(et))}}}}for(mt=[],rt=O;rt=rt.parentNode;)rt.nodeType===1&&mt.push({element:rt,left:rt.scrollLeft,top:rt.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<mt.length;O++){var ft=mt[O];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}id=!!bg,Tg=bg=null}finally{Te=y,yt.p=f,tt.T=u}}s.current=a,kn=2}}function Cb(){if(kn===2){kn=0;var s=to,a=Tu,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=tt.T,tt.T=null;var f=yt.p;yt.p=2;var y=Te;Te|=4;try{rb(s,a.alternate,a)}finally{Te=y,yt.p=f,tt.T=u}}kn=3}}function Ib(){if(kn===4||kn===3){kn=0,No();var s=to,a=Tu,u=wu,f=gb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?kn=5:(kn=0,Tu=to=null,Mb(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Ja=null),ya(u),a=a.stateNode,fe&&typeof fe.onCommitFiberRoot=="function")try{fe.onCommitFiberRoot(De,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=tt.T,y=yt.p,yt.p=2,tt.T=null;try{for(var v=s.onRecoverableError,R=0;R<f.length;R++){var O=f[R];v(O.value,{componentStack:O.stack})}}finally{tt.T=a,yt.p=y}}(wu&3)!==0&&Gf(),lr(s),y=s.pendingLanes,(u&4194090)!==0&&(y&42)!==0?s===ag?Nc++:(Nc=0,ag=s):Nc=0,Vc(0)}}function Mb(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,gc(a)))}function Gf(s){return Rb(),Cb(),Ib(),Ob()}function Ob(){if(kn!==5)return!1;var s=to,a=sg;sg=0;var u=ya(wu),f=tt.T,y=yt.p;try{yt.p=32>u?32:u,tt.T=null,u=rg,rg=null;var v=to,R=wu;if(kn=0,Tu=to=null,wu=0,(Te&6)!==0)throw Error(i(331));var O=Te;if(Te|=4,mb(v.current),hb(v,v.current,R,u),Te=O,Vc(0,!1),fe&&typeof fe.onPostCommitFiberRoot=="function")try{fe.onPostCommitFiberRoot(De,v)}catch{}return!0}finally{yt.p=y,tt.T=f,Mb(s,a)}}function Pb(s,a,u){a=ri(u,a),a=zp(s.stateNode,a,2),s=qa(s,a,2),s!==null&&($i(s,2),lr(s))}function Pe(s,a,u){if(s.tag===3)Pb(s,s,u);else for(;a!==null;){if(a.tag===3){Pb(a,s,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ja===null||!Ja.has(f))){s=ri(u,s),u=N0(2),f=qa(a,u,2),f!==null&&(V0(u,f,a,s),$i(f,2),lr(f));break}}a=a.return}}function cg(s,a,u){var f=s.pingCache;if(f===null){f=s.pingCache=new nC;var y=new Set;f.set(a,y)}else y=f.get(a),y===void 0&&(y=new Set,f.set(a,y));y.has(u)||(tg=!0,y.add(u),s=oC.bind(null,s,a,u),a.then(s,s))}function oC(s,a,u){var f=s.pingCache;f!==null&&f.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,ze===s&&(ce&u)===u&&(Qe===4||Qe===3&&(ce&62914560)===ce&&300>Un()-ig?(Te&2)===0&&Eu(s,0):eg|=u,bu===ce&&(bu=0)),lr(s)}function Db(s,a){a===0&&(a=_a()),s=za(s,a),s!==null&&($i(s,a),lr(s))}function lC(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),Db(s,u)}function uC(s,a){var u=0;switch(s.tag){case 13:var f=s.stateNode,y=s.memoizedState;y!==null&&(u=y.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(a),Db(s,u)}function cC(s,a){return _s(s,a)}var Zf=null,Au=null,hg=!1,Wf=!1,fg=!1,_l=0;function lr(s){s!==Au&&s.next===null&&(Au===null?Zf=Au=s:Au=Au.next=s),Wf=!0,hg||(hg=!0,fC())}function Vc(s,a){if(!fg&&Wf){fg=!0;do for(var u=!1,f=Zf;f!==null;){if(s!==0){var y=f.pendingLanes;if(y===0)var v=0;else{var R=f.suspendedLanes,O=f.pingedLanes;v=(1<<31-bn(42|s)+1)-1,v&=y&~(R&~O),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(u=!0,Vb(f,v))}else v=ce,v=ga(f,f===ze?v:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(v&3)===0||xi(f,v)||(u=!0,Vb(f,v));f=f.next}while(u);fg=!1}}function hC(){kb()}function kb(){Wf=hg=!1;var s=0;_l!==0&&(bC()&&(s=_l),_l=0);for(var a=Un(),u=null,f=Zf;f!==null;){var y=f.next,v=Lb(f,a);v===0?(f.next=null,u===null?Zf=y:u.next=y,y===null&&(Au=u)):(u=f,(s!==0||(v&3)!==0)&&(Wf=!0)),f=y}Vc(s)}function Lb(s,a){for(var u=s.suspendedLanes,f=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var R=31-bn(v),O=1<<R,W=y[R];W===-1?((O&u)===0||(O&f)!==0)&&(y[R]=Uo(O,a)):W<=a&&(s.expiredLanes|=O),v&=~O}if(a=ze,u=ce,u=ga(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,u===0||s===a&&(we===2||we===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&wr(f),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||xi(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(f!==null&&wr(f),ya(u)){case 2:case 8:u=Er;break;case 32:u=ys;break;case 268435456:u=Sr;break;default:u=ys}return f=Nb.bind(null,s),u=_s(u,f),s.callbackPriority=a,s.callbackNode=u,a}return f!==null&&f!==null&&wr(f),s.callbackPriority=2,s.callbackNode=null,2}function Nb(s,a){if(kn!==0&&kn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Gf()&&s.callbackNode!==u)return null;var f=ce;return f=ga(s,s===ze?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(yb(s,f,a),Lb(s,Un()),s.callbackNode!=null&&s.callbackNode===u?Nb.bind(null,s):null)}function Vb(s,a){if(Gf())return null;yb(s,a,!0)}function fC(){wC(function(){(Te&6)!==0?_s(Vo,hC):kb()})}function dg(){return _l===0&&(_l=Ho()),_l}function zb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Qs(""+s)}function Bb(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function dC(s,a,u,f,y){if(a==="submit"&&u&&u.stateNode===y){var v=zb((y[Ke]||null).action),R=f.submitter;R&&(a=(a=R[Ke]||null)?zb(a.formAction):R.getAttribute("formAction"),a!==null&&(v=a,R=null));var O=new Or("action","action",null,f,y);s.push({event:O,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(_l!==0){var W=R?Bb(y,R):new FormData(y);Dp(u,{pending:!0,data:W,method:y.method,action:v},null,W)}}else typeof v=="function"&&(O.preventDefault(),W=R?Bb(y,R):new FormData(y),Dp(u,{pending:!0,data:W,method:y.method,action:v},v,W))},currentTarget:y}]})}}for(var mg=0;mg<Nr.length;mg++){var pg=Nr[mg],mC=pg.toLowerCase(),pC=pg[0].toUpperCase()+pg.slice(1);zi(mC,"on"+pC)}zi(hf,"onAnimationEnd"),zi(Vi,"onAnimationIteration"),zi(il,"onAnimationStart"),zi("dblclick","onDoubleClick"),zi("focusin","onFocus"),zi("focusout","onBlur"),zi(lp,"onTransitionRun"),zi(ru,"onTransitionStart"),zi(up,"onTransitionCancel"),zi(dc,"onTransitionEnd"),Xi("onMouseEnter",["mouseout","mouseover"]),Xi("onMouseLeave",["mouseout","mouseover"]),Xi("onPointerEnter",["pointerout","pointerover"]),Xi("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zc));function Ub(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var f=s[u],y=f.event;f=f.listeners;t:{var v=void 0;if(a)for(var R=f.length-1;0<=R;R--){var O=f[R],W=O.instance,nt=O.currentTarget;if(O=O.listener,W!==v&&y.isPropagationStopped())break t;v=O,y.currentTarget=nt;try{v(y)}catch(ct){kf(ct)}y.currentTarget=null,v=W}else for(R=0;R<f.length;R++){if(O=f[R],W=O.instance,nt=O.currentTarget,O=O.listener,W!==v&&y.isPropagationStopped())break t;v=O,y.currentTarget=nt;try{v(y)}catch(ct){kf(ct)}y.currentTarget=null,v=W}}}}function ie(s,a){var u=a[jn];u===void 0&&(u=a[jn]=new Set);var f=s+"__bubble";u.has(f)||(Hb(a,s,2,!1),u.add(f))}function gg(s,a,u){var f=0;a&&(f|=4),Hb(u,s,f,a)}var Yf="_reactListening"+Math.random().toString(36).slice(2);function _g(s){if(!s[Yf]){s[Yf]=!0,Go.forEach(function(u){u!=="selectionchange"&&(gC.has(u)||gg(u,!1,s),gg(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Yf]||(a[Yf]=!0,gg("selectionchange",!1,a))}}function Hb(s,a,u,f){switch(hT(a)){case 2:var y=FC;break;case 8:y=qC;break;default:y=Og}u=y.bind(null,a,u,s),y=void 0,!Fn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),f?y!==void 0?s.addEventListener(a,u,{capture:!0,passive:y}):s.addEventListener(a,u,!0):y!==void 0?s.addEventListener(a,u,{passive:y}):s.addEventListener(a,u,!1)}function yg(s,a,u,f,y){var v=f;if((a&1)===0&&(a&2)===0&&f!==null)t:for(;;){if(f===null)return;var R=f.tag;if(R===3||R===4){var O=f.stateNode.containerInfo;if(O===y)break;if(R===4)for(R=f.return;R!==null;){var W=R.tag;if((W===3||W===4)&&R.stateNode.containerInfo===y)return;R=R.return}for(;O!==null;){if(R=Ri(O),R===null)return;if(W=R.tag,W===5||W===6||W===26||W===27){f=v=R;continue t}O=O.parentNode}}f=f.return}ni(function(){var nt=v,ct=Pn(u),mt=[];t:{var st=ff.get(s);if(st!==void 0){var rt=Or,jt=s;switch(s){case"keypress":if(Re(u)===0)break t;case"keydown":case"keyup":rt=Ia;break;case"focusin":jt="focus",rt=Sa;break;case"focusout":jt="blur",rt=Sa;break;case"beforeblur":case"afterblur":rt=Sa;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=Sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=oc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=Xl;break;case hf:case Vi:case il:rt=xa;break;case dc:rt=Ql;break;case"scroll":case"scrollend":rt=$l;break;case"wheel":rt=kr;break;case"copy":case"cut":case"paste":rt=Js;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=Ma;break;case"toggle":case"beforetoggle":rt=ss}var zt=(a&4)!==0,Me=!zt&&(s==="scroll"||s==="scrollend"),X=zt?st!==null?st+"Capture":null:st;zt=[];for(var $=nt,et;$!==null;){var ft=$;if(et=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||et===null||X===null||(ft=ue($,X),ft!=null&&zt.push(Bc($,ft,et))),Me)break;$=$.return}0<zt.length&&(st=new rt(st,jt,null,u,ct),mt.push({event:st,listeners:zt}))}}if((a&7)===0){t:{if(st=s==="mouseover"||s==="pointerover",rt=s==="mouseout"||s==="pointerout",st&&u!==Pi&&(jt=u.relatedTarget||u.fromElement)&&(Ri(jt)||jt[ci]))break t;if((rt||st)&&(st=ct.window===ct?ct:(st=ct.ownerDocument)?st.defaultView||st.parentWindow:window,rt?(jt=u.relatedTarget||u.toElement,rt=nt,jt=jt?Ri(jt):null,jt!==null&&(Me=l(jt),zt=jt.tag,jt!==Me||zt!==5&&zt!==27&&zt!==6)&&(jt=null)):(rt=null,jt=nt),rt!==jt)){if(zt=Sn,ft="onMouseLeave",X="onMouseEnter",$="mouse",(s==="pointerout"||s==="pointerover")&&(zt=Ma,ft="onPointerLeave",X="onPointerEnter",$="pointer"),Me=rt==null?st:Mn(rt),et=jt==null?st:Mn(jt),st=new zt(ft,$+"leave",rt,u,ct),st.target=Me,st.relatedTarget=et,ft=null,Ri(ct)===nt&&(zt=new zt(X,$+"enter",jt,u,ct),zt.target=et,zt.relatedTarget=Me,ft=zt),Me=ft,rt&&jt)e:{for(zt=rt,X=jt,$=0,et=zt;et;et=xu(et))$++;for(et=0,ft=X;ft;ft=xu(ft))et++;for(;0<$-et;)zt=xu(zt),$--;for(;0<et-$;)X=xu(X),et--;for(;$--;){if(zt===X||X!==null&&zt===X.alternate)break e;zt=xu(zt),X=xu(X)}zt=null}else zt=null;rt!==null&&jb(mt,st,rt,zt,!1),jt!==null&&Me!==null&&jb(mt,Me,jt,zt,!0)}}t:{if(st=nt?Mn(nt):window,rt=st.nodeName&&st.nodeName.toLowerCase(),rt==="select"||rt==="input"&&st.type==="file")var Mt=Pa;else if(Ne(st))if(uc)Mt=op;else{Mt=ap;var ee=hc}else rt=st.nodeName,!rt||rt.toLowerCase()!=="input"||st.type!=="checkbox"&&st.type!=="radio"?nt&&Mr(nt.elementType)&&(Mt=Pa):Mt=Os;if(Mt&&(Mt=Mt(s,nt))){Is(mt,Mt,u,ct);break t}ee&&ee(s,st,nt),s==="focusout"&&nt&&st.type==="number"&&nt.memoizedProps.value!=null&&Mi(st,"number",st.value)}switch(ee=nt?Mn(nt):window,s){case"focusin":(Ne(ee)||ee.contentEditable==="true")&&(Ni=ee,La=nt,Lr=null);break;case"focusout":Lr=La=Ni=null;break;case"mousedown":iu=!0;break;case"contextmenu":case"mouseup":case"dragend":iu=!1,uf(mt,u,ct);break;case"selectionchange":if(nu)break;case"keydown":case"keyup":uf(mt,u,ct)}var Dt;if(Zn)t:{switch(s){case"compositionstart":var Bt="onCompositionStart";break t;case"compositionend":Bt="onCompositionEnd";break t;case"compositionupdate":Bt="onCompositionUpdate";break t}Bt=void 0}else se?ot(s,u)&&(Bt="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Bt="onCompositionStart");Bt&&(x&&u.locale!=="ko"&&(se||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&se&&(Dt=As()):(fi=ct,qn="value"in fi?fi.value:fi.textContent,se=!0)),ee=$f(nt,Bt),0<ee.length&&(Bt=new Gn(Bt,s,null,u,ct),mt.push({event:Bt,listeners:ee}),Dt?Bt.data=Dt:(Dt=Et(u),Dt!==null&&(Bt.data=Dt)))),(Dt=E?Xe(s,u):re(s,u))&&(Bt=$f(nt,"onBeforeInput"),0<Bt.length&&(ee=new Gn("onBeforeInput","beforeinput",null,u,ct),mt.push({event:ee,listeners:Bt}),ee.data=Dt)),dC(mt,s,nt,u,ct)}Ub(mt,a)})}function Bc(s,a,u){return{instance:s,listener:a,currentTarget:u}}function $f(s,a){for(var u=a+"Capture",f=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=ue(s,u),y!=null&&f.unshift(Bc(s,y,v)),y=ue(s,a),y!=null&&f.push(Bc(s,y,v))),s.tag===3)return f;s=s.return}return[]}function xu(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function jb(s,a,u,f,y){for(var v=a._reactName,R=[];u!==null&&u!==f;){var O=u,W=O.alternate,nt=O.stateNode;if(O=O.tag,W!==null&&W===f)break;O!==5&&O!==26&&O!==27||nt===null||(W=nt,y?(nt=ue(u,v),nt!=null&&R.unshift(Bc(u,nt,W))):y||(nt=ue(u,v),nt!=null&&R.push(Bc(u,nt,W)))),u=u.return}R.length!==0&&s.push({event:a,listeners:R})}var _C=/\r\n?/g,yC=/\u0000|\uFFFD/g;function Fb(s){return(typeof s=="string"?s:""+s).replace(_C,`
`).replace(yC,"")}function qb(s,a){return a=Fb(a),Fb(s)===a}function Kf(){}function Ie(s,a,u,f,y,v){switch(u){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||wn(s,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&wn(s,""+f);break;case"className":Qi(s,"class",f);break;case"tabIndex":Qi(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Qi(s,u,f);break;case"style":Es(s,f,v);break;case"data":if(a!=="object"){Qi(s,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(u);break}f=Qs(""+f),s.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(u==="formAction"?(a!=="input"&&Ie(s,a,"name",y.name,y,null),Ie(s,a,"formEncType",y.formEncType,y,null),Ie(s,a,"formMethod",y.formMethod,y,null),Ie(s,a,"formTarget",y.formTarget,y,null)):(Ie(s,a,"encType",y.encType,y,null),Ie(s,a,"method",y.method,y,null),Ie(s,a,"target",y.target,y,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(u);break}f=Qs(""+f),s.setAttribute(u,f);break;case"onClick":f!=null&&(s.onclick=Kf);break;case"onScroll":f!=null&&ie("scroll",s);break;case"onScrollEnd":f!=null&&ie("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}u=Qs(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(u,""+f):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":f===!0?s.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(u,f):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(u,f):s.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(u):s.setAttribute(u,f);break;case"popover":ie("beforetoggle",s),ie("toggle",s),Ys(s,"popover",f);break;case"xlinkActuate":mn(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":mn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":mn(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":mn(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":mn(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":mn(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":mn(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":mn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":mn(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Ys(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Wo.get(u)||u,Ys(s,u,f))}}function vg(s,a,u,f,y,v){switch(u){case"style":Es(s,f,v);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof f=="string"?wn(s,f):(typeof f=="number"||typeof f=="bigint")&&wn(s,""+f);break;case"onScroll":f!=null&&ie("scroll",s);break;case"onScrollEnd":f!=null&&ie("scrollend",s);break;case"onClick":f!=null&&(s.onclick=Kf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ba.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),a=u.slice(2,y?u.length-7:void 0),v=s[Ke]||null,v=v!=null?v[u]:null,typeof v=="function"&&s.removeEventListener(a,v,y),typeof f=="function")){typeof v!="function"&&v!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,f,y);break t}u in s?s[u]=f:f===!0?s.setAttribute(u,""):Ys(s,u,f)}}}function Ln(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ie("error",s),ie("load",s);var f=!1,y=!1,v;for(v in u)if(u.hasOwnProperty(v)){var R=u[v];if(R!=null)switch(v){case"src":f=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Ie(s,a,v,R,u,null)}}y&&Ie(s,a,"srcSet",u.srcSet,u,null),f&&Ie(s,a,"src",u.src,u,null);return;case"input":ie("invalid",s);var O=v=R=y=null,W=null,nt=null;for(f in u)if(u.hasOwnProperty(f)){var ct=u[f];if(ct!=null)switch(f){case"name":y=ct;break;case"type":R=ct;break;case"checked":W=ct;break;case"defaultChecked":nt=ct;break;case"value":v=ct;break;case"defaultValue":O=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(i(137,a));break;default:Ie(s,a,f,ct,u,null)}}Ir(s,v,O,W,nt,R,y,!1),Xs(s);return;case"select":ie("invalid",s),f=R=v=null;for(y in u)if(u.hasOwnProperty(y)&&(O=u[y],O!=null))switch(y){case"value":v=O;break;case"defaultValue":R=O;break;case"multiple":f=O;default:Ie(s,a,y,O,u,null)}a=v,u=R,s.multiple=!!f,a!=null?On(s,!!f,a,!1):u!=null&&On(s,!!f,u,!0);return;case"textarea":ie("invalid",s),v=y=f=null;for(R in u)if(u.hasOwnProperty(R)&&(O=u[R],O!=null))switch(R){case"value":f=O;break;case"defaultValue":y=O;break;case"children":v=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:Ie(s,a,R,O,u,null)}ei(s,f,y,v),Xs(s);return;case"option":for(W in u)if(u.hasOwnProperty(W)&&(f=u[W],f!=null))switch(W){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ie(s,a,W,f,u,null)}return;case"dialog":ie("beforetoggle",s),ie("toggle",s),ie("cancel",s),ie("close",s);break;case"iframe":case"object":ie("load",s);break;case"video":case"audio":for(f=0;f<zc.length;f++)ie(zc[f],s);break;case"image":ie("error",s),ie("load",s);break;case"details":ie("toggle",s);break;case"embed":case"source":case"link":ie("error",s),ie("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(nt in u)if(u.hasOwnProperty(nt)&&(f=u[nt],f!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Ie(s,a,nt,f,u,null)}return;default:if(Mr(a)){for(ct in u)u.hasOwnProperty(ct)&&(f=u[ct],f!==void 0&&vg(s,a,ct,f,u,void 0));return}}for(O in u)u.hasOwnProperty(O)&&(f=u[O],f!=null&&Ie(s,a,O,f,u,null))}function vC(s,a,u,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,R=null,O=null,W=null,nt=null,ct=null;for(rt in u){var mt=u[rt];if(u.hasOwnProperty(rt)&&mt!=null)switch(rt){case"checked":break;case"value":break;case"defaultValue":W=mt;default:f.hasOwnProperty(rt)||Ie(s,a,rt,null,f,mt)}}for(var st in f){var rt=f[st];if(mt=u[st],f.hasOwnProperty(st)&&(rt!=null||mt!=null))switch(st){case"type":v=rt;break;case"name":y=rt;break;case"checked":nt=rt;break;case"defaultChecked":ct=rt;break;case"value":R=rt;break;case"defaultValue":O=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(i(137,a));break;default:rt!==mt&&Ie(s,a,st,rt,f,mt)}}Le(s,R,O,W,nt,ct,v,y);return;case"select":rt=R=O=st=null;for(v in u)if(W=u[v],u.hasOwnProperty(v)&&W!=null)switch(v){case"value":break;case"multiple":rt=W;default:f.hasOwnProperty(v)||Ie(s,a,v,null,f,W)}for(y in f)if(v=f[y],W=u[y],f.hasOwnProperty(y)&&(v!=null||W!=null))switch(y){case"value":st=v;break;case"defaultValue":O=v;break;case"multiple":R=v;default:v!==W&&Ie(s,a,y,v,f,W)}a=O,u=R,f=rt,st!=null?On(s,!!u,st,!1):!!f!=!!u&&(a!=null?On(s,!!u,a,!0):On(s,!!u,u?[]:"",!1));return;case"textarea":rt=st=null;for(O in u)if(y=u[O],u.hasOwnProperty(O)&&y!=null&&!f.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Ie(s,a,O,null,f,y)}for(R in f)if(y=f[R],v=u[R],f.hasOwnProperty(R)&&(y!=null||v!=null))switch(R){case"value":st=y;break;case"defaultValue":rt=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&Ie(s,a,R,y,f,v)}Ut(s,st,rt);return;case"option":for(var jt in u)if(st=u[jt],u.hasOwnProperty(jt)&&st!=null&&!f.hasOwnProperty(jt))switch(jt){case"selected":s.selected=!1;break;default:Ie(s,a,jt,null,f,st)}for(W in f)if(st=f[W],rt=u[W],f.hasOwnProperty(W)&&st!==rt&&(st!=null||rt!=null))switch(W){case"selected":s.selected=st&&typeof st!="function"&&typeof st!="symbol";break;default:Ie(s,a,W,st,f,rt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var zt in u)st=u[zt],u.hasOwnProperty(zt)&&st!=null&&!f.hasOwnProperty(zt)&&Ie(s,a,zt,null,f,st);for(nt in f)if(st=f[nt],rt=u[nt],f.hasOwnProperty(nt)&&st!==rt&&(st!=null||rt!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(i(137,a));break;default:Ie(s,a,nt,st,f,rt)}return;default:if(Mr(a)){for(var Me in u)st=u[Me],u.hasOwnProperty(Me)&&st!==void 0&&!f.hasOwnProperty(Me)&&vg(s,a,Me,void 0,f,st);for(ct in f)st=f[ct],rt=u[ct],!f.hasOwnProperty(ct)||st===rt||st===void 0&&rt===void 0||vg(s,a,ct,st,f,rt);return}}for(var X in u)st=u[X],u.hasOwnProperty(X)&&st!=null&&!f.hasOwnProperty(X)&&Ie(s,a,X,null,f,st);for(mt in f)st=f[mt],rt=u[mt],!f.hasOwnProperty(mt)||st===rt||st==null&&rt==null||Ie(s,a,mt,st,f,rt)}var bg=null,Tg=null;function Xf(s){return s.nodeType===9?s:s.ownerDocument}function Gb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zb(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function wg(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Eg=null;function bC(){var s=window.event;return s&&s.type==="popstate"?s===Eg?!1:(Eg=s,!0):(Eg=null,!1)}var Wb=typeof setTimeout=="function"?setTimeout:void 0,TC=typeof clearTimeout=="function"?clearTimeout:void 0,Yb=typeof Promise=="function"?Promise:void 0,wC=typeof queueMicrotask=="function"?queueMicrotask:typeof Yb<"u"?function(s){return Yb.resolve(null).then(s).catch(EC)}:Wb;function EC(s){setTimeout(function(){throw s})}function no(s){return s==="head"}function $b(s,a){var u=a,f=0,y=0;do{var v=u.nextSibling;if(s.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(0<f&&8>f){u=f;var R=s.ownerDocument;if(u&1&&Uc(R.documentElement),u&2&&Uc(R.body),u&4)for(u=R.head,Uc(u),R=u.firstChild;R;){var O=R.nextSibling,W=R.nodeName;R[Ws]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&R.rel.toLowerCase()==="stylesheet"||u.removeChild(R),R=O}}if(y===0){s.removeChild(v),Yc(a);return}y--}else u==="$"||u==="$?"||u==="$!"?y++:f=u.charCodeAt(0)-48;else f=0;u=v}while(u);Yc(a)}function Sg(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Sg(u),Ts(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function SC(s,a,u,f){for(;s.nodeType===1;){var y=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[Ws])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=Ls(s.nextSibling),s===null)break}return null}function AC(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=Ls(s.nextSibling),s===null))return null;return s}function Ag(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function xC(s,a){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")a();else{var f=function(){a(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function Ls(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var xg=null;function Kb(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}function Xb(s,a,u){switch(a=Xf(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Uc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Ts(s)}var fs=new Map,Qb=new Set;function Qf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Yr=yt.d;yt.d={f:RC,r:CC,D:IC,C:MC,L:OC,m:PC,X:kC,S:DC,M:LC};function RC(){var s=Yr.f(),a=Ff();return s||a}function CC(s){var a=Ci(s);a!==null&&a.tag===5&&a.type==="form"?y0(a):Yr.r(s)}var Ru=typeof document>"u"?null:document;function Jb(s,a,u){var f=Ru;if(f&&typeof a=="string"&&a){var y=Be(a);y='link[rel="'+s+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),Qb.has(y)||(Qb.add(y),s={rel:s,crossOrigin:u,href:a},f.querySelector(y)===null&&(a=f.createElement("link"),Ln(a,"link",s),Ge(a),f.head.appendChild(a)))}}function IC(s){Yr.D(s),Jb("dns-prefetch",s,null)}function MC(s,a){Yr.C(s,a),Jb("preconnect",s,a)}function OC(s,a,u){Yr.L(s,a,u);var f=Ru;if(f&&s&&a){var y='link[rel="preload"][as="'+Be(a)+'"]';a==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+Be(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+Be(u.imageSizes)+'"]')):y+='[href="'+Be(s)+'"]';var v=y;switch(a){case"style":v=Cu(s);break;case"script":v=Iu(s)}fs.has(v)||(s=b({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),fs.set(v,s),f.querySelector(y)!==null||a==="style"&&f.querySelector(Hc(v))||a==="script"&&f.querySelector(jc(v))||(a=f.createElement("link"),Ln(a,"link",s),Ge(a),f.head.appendChild(a)))}}function PC(s,a){Yr.m(s,a);var u=Ru;if(u&&s){var f=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+Be(f)+'"][href="'+Be(s)+'"]',v=y;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Iu(s)}if(!fs.has(v)&&(s=b({rel:"modulepreload",href:s},a),fs.set(v,s),u.querySelector(y)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(jc(v)))return}f=u.createElement("link"),Ln(f,"link",s),Ge(f),u.head.appendChild(f)}}}function DC(s,a,u){Yr.S(s,a,u);var f=Ru;if(f&&s){var y=Tn(f).hoistableStyles,v=Cu(s);a=a||"default";var R=y.get(v);if(!R){var O={loading:0,preload:null};if(R=f.querySelector(Hc(v)))O.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":a},u),(u=fs.get(v))&&Rg(s,u);var W=R=f.createElement("link");Ge(W),Ln(W,"link",s),W._p=new Promise(function(nt,ct){W.onload=nt,W.onerror=ct}),W.addEventListener("load",function(){O.loading|=1}),W.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Jf(R,a,f)}R={type:"stylesheet",instance:R,count:1,state:O},y.set(v,R)}}}function kC(s,a){Yr.X(s,a);var u=Ru;if(u&&s){var f=Tn(u).hoistableScripts,y=Iu(s),v=f.get(y);v||(v=u.querySelector(jc(y)),v||(s=b({src:s,async:!0},a),(a=fs.get(y))&&Cg(s,a),v=u.createElement("script"),Ge(v),Ln(v,"link",s),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(y,v))}}function LC(s,a){Yr.M(s,a);var u=Ru;if(u&&s){var f=Tn(u).hoistableScripts,y=Iu(s),v=f.get(y);v||(v=u.querySelector(jc(y)),v||(s=b({src:s,async:!0,type:"module"},a),(a=fs.get(y))&&Cg(s,a),v=u.createElement("script"),Ge(v),Ln(v,"link",s),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(y,v))}}function tT(s,a,u,f){var y=(y=wt.current)?Qf(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Cu(u.href),u=Tn(y).hoistableStyles,f=u.get(a),f||(f={type:"style",instance:null,count:0,state:null},u.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Cu(u.href);var v=Tn(y).hoistableStyles,R=v.get(s);if(R||(y=y.ownerDocument||y,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,R),(v=y.querySelector(Hc(s)))&&!v._p&&(R.instance=v,R.state.loading=5),fs.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},fs.set(s,u),v||NC(y,s,u,R.state))),a&&f===null)throw Error(i(528,""));return R}if(a&&f!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Iu(u),u=Tn(y).hoistableScripts,f=u.get(a),f||(f={type:"script",instance:null,count:0,state:null},u.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Cu(s){return'href="'+Be(s)+'"'}function Hc(s){return'link[rel="stylesheet"]['+s+"]"}function eT(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function NC(s,a,u,f){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=s.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),Ln(a,"link",u),Ge(a),s.head.appendChild(a))}function Iu(s){return'[src="'+Be(s)+'"]'}function jc(s){return"script[async]"+s}function nT(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var f=s.querySelector('style[data-href~="'+Be(u.href)+'"]');if(f)return a.instance=f,Ge(f),f;var y=b({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),Ge(f),Ln(f,"style",y),Jf(f,u.precedence,s),a.instance=f;case"stylesheet":y=Cu(u.href);var v=s.querySelector(Hc(y));if(v)return a.state.loading|=4,a.instance=v,Ge(v),v;f=eT(u),(y=fs.get(y))&&Rg(f,y),v=(s.ownerDocument||s).createElement("link"),Ge(v);var R=v;return R._p=new Promise(function(O,W){R.onload=O,R.onerror=W}),Ln(v,"link",f),a.state.loading|=4,Jf(v,u.precedence,s),a.instance=v;case"script":return v=Iu(u.src),(y=s.querySelector(jc(v)))?(a.instance=y,Ge(y),y):(f=u,(y=fs.get(v))&&(f=b({},u),Cg(f,y)),s=s.ownerDocument||s,y=s.createElement("script"),Ge(y),Ln(y,"link",f),s.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,Jf(f,u.precedence,s));return a.instance}function Jf(s,a,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=f.length?f[f.length-1]:null,v=y,R=0;R<f.length;R++){var O=f[R];if(O.dataset.precedence===a)v=O;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function Rg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Cg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var td=null;function iT(s,a,u){if(td===null){var f=new Map,y=td=new Map;y.set(u,f)}else y=td,f=y.get(u),f||(f=new Map,y.set(u,f));if(f.has(s))return f;for(f.set(s,null),u=u.getElementsByTagName(s),y=0;y<u.length;y++){var v=u[y];if(!(v[Ws]||v[Je]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var R=v.getAttribute(a)||"";R=s+R;var O=f.get(R);O?O.push(v):f.set(R,[v])}}return f}function sT(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function VC(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function rT(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Fc=null;function zC(){}function BC(s,a,u){if(Fc===null)throw Error(i(475));var f=Fc;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Cu(u.href),v=s.querySelector(Hc(y));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(f.count++,f=ed.bind(f),s.then(f,f)),a.state.loading|=4,a.instance=v,Ge(v);return}v=s.ownerDocument||s,u=eT(u),(y=fs.get(y))&&Rg(u,y),v=v.createElement("link"),Ge(v);var R=v;R._p=new Promise(function(O,W){R.onload=O,R.onerror=W}),Ln(v,"link",u),a.instance=v}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(f.count++,a=ed.bind(f),s.addEventListener("load",a),s.addEventListener("error",a))}}function UC(){if(Fc===null)throw Error(i(475));var s=Fc;return s.stylesheets&&s.count===0&&Ig(s,s.stylesheets),0<s.count?function(a){var u=setTimeout(function(){if(s.stylesheets&&Ig(s,s.stylesheets),s.unsuspend){var f=s.unsuspend;s.unsuspend=null,f()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(u)}}:null}function ed(){if(this.count--,this.count===0){if(this.stylesheets)Ig(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var nd=null;function Ig(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,nd=new Map,a.forEach(HC,s),nd=null,ed.call(s))}function HC(s,a){if(!(a.state.loading&4)){var u=nd.get(s);if(u)var f=u.get(null);else{u=new Map,nd.set(s,u);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var R=y[v];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(u.set(R.dataset.precedence,R),f=R)}f&&u.set(null,f)}y=a.instance,R=y.getAttribute("data-precedence"),v=u.get(R)||f,v===f&&u.set(null,y),u.set(R,y),this.count++,f=ed.bind(this),y.addEventListener("load",f),y.addEventListener("error",f),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),a.state.loading|=4}}var qc={$$typeof:Y,Provider:null,Consumer:null,_currentValue:dt,_currentValue2:dt,_threadCount:0};function jC(s,a,u,f,y,v,R,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.hiddenUpdates=Yi(null),this.identifierPrefix=f,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function aT(s,a,u,f,y,v,R,O,W,nt,ct,mt){return s=new jC(s,a,u,R,O,W,nt,mt),a=1,v===!0&&(a|=24),v=oi(3,null,null,a),s.current=v,v.stateNode=s,a=cp(),a.refCount++,s.pooledCache=a,a.refCount++,v.memoizedState={element:f,isDehydrated:u,cache:a},mp(v),s}function oT(s){return s?(s=Br,s):Br}function lT(s,a,u,f,y,v){y=oT(y),f.context===null?f.context=y:f.pendingContext=y,f=Fa(a),f.payload={element:u},v=v===void 0?null:v,v!==null&&(f.callback=v),u=qa(s,f,a),u!==null&&(qi(u,s,a),bc(u,s,a))}function uT(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Mg(s,a){uT(s,a),(s=s.alternate)&&uT(s,a)}function cT(s){if(s.tag===13){var a=za(s,67108864);a!==null&&qi(a,s,67108864),Mg(s,67108864)}}var id=!0;function FC(s,a,u,f){var y=tt.T;tt.T=null;var v=yt.p;try{yt.p=2,Og(s,a,u,f)}finally{yt.p=v,tt.T=y}}function qC(s,a,u,f){var y=tt.T;tt.T=null;var v=yt.p;try{yt.p=8,Og(s,a,u,f)}finally{yt.p=v,tt.T=y}}function Og(s,a,u,f){if(id){var y=Pg(f);if(y===null)yg(s,a,f,sd,u),fT(s,f);else if(ZC(y,s,a,u,f))f.stopPropagation();else if(fT(s,f),a&4&&-1<GC.indexOf(s)){for(;y!==null;){var v=Ci(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var R=ui(v.pendingLanes);if(R!==0){var O=v;for(O.pendingLanes|=2,O.entangledLanes|=2;R;){var W=1<<31-bn(R);O.entanglements[1]|=W,R&=~W}lr(v),(Te&6)===0&&(Hf=Un()+500,Vc(0))}}break;case 13:O=za(v,2),O!==null&&qi(O,v,2),Ff(),Mg(v,2)}if(v=Pg(f),v===null&&yg(s,a,f,sd,u),v===y)break;y=v}y!==null&&f.stopPropagation()}else yg(s,a,f,null,u)}}function Pg(s){return s=Pn(s),Dg(s)}var sd=null;function Dg(s){if(sd=null,s=Ri(s),s!==null){var a=l(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return sd=s,null}function hT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pa()){case Vo:return 2;case Er:return 8;case ys:case ql:return 32;case Sr:return 268435456;default:return 32}default:return 32}}var kg=!1,io=null,so=null,ro=null,Gc=new Map,Zc=new Map,ao=[],GC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fT(s,a){switch(s){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":Gc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zc.delete(a.pointerId)}}function Wc(s,a,u,f,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:v,targetContainers:[y]},a!==null&&(a=Ci(a),a!==null&&cT(a)),s):(s.eventSystemFlags|=f,a=s.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),s)}function ZC(s,a,u,f,y){switch(a){case"focusin":return io=Wc(io,s,a,u,f,y),!0;case"dragenter":return so=Wc(so,s,a,u,f,y),!0;case"mouseover":return ro=Wc(ro,s,a,u,f,y),!0;case"pointerover":var v=y.pointerId;return Gc.set(v,Wc(Gc.get(v)||null,s,a,u,f,y)),!0;case"gotpointercapture":return v=y.pointerId,Zc.set(v,Wc(Zc.get(v)||null,s,a,u,f,y)),!0}return!1}function dT(s){var a=Ri(s.target);if(a!==null){var u=l(a);if(u!==null){if(a=u.tag,a===13){if(a=c(u),a!==null){s.blockedOn=a,va(s.priority,function(){if(u.tag===13){var f=Fi();f=Gs(f);var y=za(u,f);y!==null&&qi(y,u,f),Mg(u,f)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function rd(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=Pg(s.nativeEvent);if(u===null){u=s.nativeEvent;var f=new u.constructor(u.type,u);Pi=f,u.target.dispatchEvent(f),Pi=null}else return a=Ci(u),a!==null&&cT(a),s.blockedOn=u,!1;a.shift()}return!0}function mT(s,a,u){rd(s)&&u.delete(a)}function WC(){kg=!1,io!==null&&rd(io)&&(io=null),so!==null&&rd(so)&&(so=null),ro!==null&&rd(ro)&&(ro=null),Gc.forEach(mT),Zc.forEach(mT)}function ad(s,a){s.blockedOn===a&&(s.blockedOn=null,kg||(kg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,WC)))}var od=null;function pT(s){od!==s&&(od=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){od===s&&(od=null);for(var a=0;a<s.length;a+=3){var u=s[a],f=s[a+1],y=s[a+2];if(typeof f!="function"){if(Dg(f||u)===null)continue;break}var v=Ci(u);v!==null&&(s.splice(a,3),a-=3,Dp(v,{pending:!0,data:y,method:u.method,action:f},f,y))}}))}function Yc(s){function a(W){return ad(W,s)}io!==null&&ad(io,s),so!==null&&ad(so,s),ro!==null&&ad(ro,s),Gc.forEach(a),Zc.forEach(a);for(var u=0;u<ao.length;u++){var f=ao[u];f.blockedOn===s&&(f.blockedOn=null)}for(;0<ao.length&&(u=ao[0],u.blockedOn===null);)dT(u),u.blockedOn===null&&ao.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var y=u[f],v=u[f+1],R=y[Ke]||null;if(typeof v=="function")R||pT(u);else if(R){var O=null;if(v&&v.hasAttribute("formAction")){if(y=v,R=v[Ke]||null)O=R.formAction;else if(Dg(y)!==null)continue}else O=R.action;typeof O=="function"?u[f+1]=O:(u.splice(f,3),f-=3),pT(u)}}}function Lg(s){this._internalRoot=s}ld.prototype.render=Lg.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,f=Fi();lT(u,f,s,a,null,null)},ld.prototype.unmount=Lg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;lT(s.current,2,null,s,null,null),Ff(),a[ci]=null}};function ld(s){this._internalRoot=s}ld.prototype.unstable_scheduleHydration=function(s){if(s){var a=Zs();s={blockedOn:null,target:s,priority:a};for(var u=0;u<ao.length&&a!==0&&a<ao[u].priority;u++);ao.splice(u,0,s),u===0&&dT(s)}};var gT=t.version;if(gT!=="19.1.0")throw Error(i(527,gT,"19.1.0"));yt.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=m(a),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var YC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:tt,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ud.isDisabled&&ud.supportsFiber)try{De=ud.inject(YC),fe=ud}catch{}}return Kc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,f="",y=P0,v=D0,R=k0,O=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks)),a=aT(s,1,!1,null,null,u,f,y,v,R,O,null),s[ci]=a.current,_g(s),new Lg(a)},Kc.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var f=!1,y="",v=P0,R=D0,O=k0,W=null,nt=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(O=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(W=u.unstable_transitionCallbacks),u.formState!==void 0&&(nt=u.formState)),a=aT(s,1,!0,a,u??null,f,y,v,R,O,W,nt),a.context=oT(null),u=a.current,f=Fi(),f=Gs(f),y=Fa(f),y.callback=null,qa(u,y,f),u=f,a.current.lanes=u,$i(a,u),lr(a),s[ci]=a.current,_g(s),new ld(a)},Kc.version="19.1.0",Kc}var xT;function rI(){if(xT)return zg.exports;xT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),zg.exports=sI(),zg.exports}var aI=rI();const oI=ey(aI);var Xc={},RT;function lI(){if(RT)return Xc;RT=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.parse=c,Xc.serialize=g;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,l=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function c(S,C){const M=new l,D=S.length;if(D<2)return M;const N=(C==null?void 0:C.decode)||b;let j=0;do{const q=S.indexOf("=",j);if(q===-1)break;const Y=S.indexOf(";",j),it=Y===-1?D:Y;if(q>it){j=S.lastIndexOf(";",q-1)+1;continue}const lt=d(S,j,q),bt=m(S,q,lt),V=S.slice(lt,bt);if(M[V]===void 0){let P=d(S,q+1,it),z=m(S,it,P);const U=N(S.slice(P,z));M[V]=U}j=it+1}while(j<D);return M}function d(S,C,M){do{const D=S.charCodeAt(C);if(D!==32&&D!==9)return C}while(++C<M);return M}function m(S,C,M){for(;C>M;){const D=S.charCodeAt(--C);if(D!==32&&D!==9)return C+1}return M}function g(S,C,M){const D=(M==null?void 0:M.encode)||encodeURIComponent;if(!n.test(S))throw new TypeError(`argument name is invalid: ${S}`);const N=D(C);if(!t.test(N))throw new TypeError(`argument val is invalid: ${C}`);let j=S+"="+N;if(!M)return j;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);j+="; Max-Age="+M.maxAge}if(M.domain){if(!e.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);j+="; Domain="+M.domain}if(M.path){if(!i.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);j+="; Path="+M.path}if(M.expires){if(!w(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);j+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(j+="; HttpOnly"),M.secure&&(j+="; Secure"),M.partitioned&&(j+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":j+="; Priority=Low";break;case"medium":j+="; Priority=Medium";break;case"high":j+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":j+="; SameSite=Strict";break;case"lax":j+="; SameSite=Lax";break;case"none":j+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return j}function b(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function w(S){return r.call(S)==="[object Date]"}return Xc}lI();var CT="popstate";function uI(n={}){function t(r,l){let{pathname:c="/",search:d="",hash:m=""}=Nl(r.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),d_("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function e(r,l){let c=r.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=r.location.href,g=m.indexOf("#");d=g===-1?m:m.slice(0,g)}return d+"#"+(typeof l=="string"?l:Rh(l))}function i(r,l){Bs(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return hI(t,e,i,n)}function Ye(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Bs(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function cI(){return Math.random().toString(36).substring(2,10)}function IT(n,t){return{usr:n.state,key:n.key,idx:t}}function d_(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?Nl(t):t,state:e,key:t&&t.key||i||cI()}}function Rh({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function Nl(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function hI(n,t,e,i={}){let{window:r=document.defaultView,v5Compat:l=!1}=i,c=r.history,d="POP",m=null,g=b();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function b(){return(c.state||{idx:null}).idx}function w(){d="POP";let N=b(),j=N==null?null:N-g;g=N,m&&m({action:d,location:D.location,delta:j})}function S(N,j){d="PUSH";let q=d_(D.location,N,j);e&&e(q,N),g=b()+1;let Y=IT(q,g),it=D.createHref(q);try{c.pushState(Y,"",it)}catch(lt){if(lt instanceof DOMException&&lt.name==="DataCloneError")throw lt;r.location.assign(it)}l&&m&&m({action:d,location:D.location,delta:1})}function C(N,j){d="REPLACE";let q=d_(D.location,N,j);e&&e(q,N),g=b();let Y=IT(q,g),it=D.createHref(q);c.replaceState(Y,"",it),l&&m&&m({action:d,location:D.location,delta:0})}function M(N){return fI(N)}let D={get action(){return d},get location(){return n(r,c)},listen(N){if(m)throw new Error("A history only accepts one active listener");return r.addEventListener(CT,w),m=N,()=>{r.removeEventListener(CT,w),m=null}},createHref(N){return t(r,N)},createURL:M,encodeLocation(N){let j=M(N);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:S,replace:C,go(N){return c.go(N)}};return D}function fI(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Ye(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Rh(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function MS(n,t,e="/"){return dI(n,t,e,!1)}function dI(n,t,e,i){let r=typeof t=="string"?Nl(t):t,l=aa(r.pathname||"/",e);if(l==null)return null;let c=OS(n);mI(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=AI(l);d=EI(c[m],g,i)}return d}function OS(n,t=[],e=[],i=""){let r=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(Ye(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let g=na([i,m.relativePath]),b=e.concat(m);l.children&&l.children.length>0&&(Ye(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),OS(l.children,t,b,g)),!(l.path==null&&!l.index)&&t.push({path:g,score:TI(g,l.index),routesMeta:b})};return n.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))r(l,c);else for(let m of PS(l.path))r(l,c,m)}),t}function PS(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,r=e.endsWith("?"),l=e.replace(/\?$/,"");if(i.length===0)return r?[l,""]:[l];let c=PS(i.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),r&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function mI(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:wI(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var pI=/^:[\w-]+$/,gI=3,_I=2,yI=1,vI=10,bI=-2,MT=n=>n==="*";function TI(n,t){let e=n.split("/"),i=e.length;return e.some(MT)&&(i+=bI),t&&(i+=_I),e.filter(r=>!MT(r)).reduce((r,l)=>r+(pI.test(l)?gI:l===""?yI:vI),i)}function wI(n,t){return n.length===t.length&&n.slice(0,-1).every((i,r)=>i===t[r])?n[n.length-1]-t[t.length-1]:0}function EI(n,t,e=!1){let{routesMeta:i}=n,r={},l="/",c=[];for(let d=0;d<i.length;++d){let m=i[d],g=d===i.length-1,b=l==="/"?t:t.slice(l.length)||"/",w=Gd({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},b),S=m.route;if(!w&&g&&e&&!i[i.length-1].route.index&&(w=Gd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},b)),!w)return null;Object.assign(r,w.params),c.push({params:r,pathname:na([l,w.pathname]),pathnameBase:II(na([l,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(l=na([l,w.pathnameBase]))}return c}function Gd(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=SI(n.path,n.caseSensitive,n.end),r=t.match(e);if(!r)return null;let l=r[0],c=l.replace(/(.)\/+$/,"$1"),d=r.slice(1);return{params:i.reduce((g,{paramName:b,isOptional:w},S)=>{if(b==="*"){let M=d[S]||"";c=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const C=d[S];return w&&!C?g[b]=void 0:g[b]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function SI(n,t=!1,e=!0){Bs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function AI(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function aa(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function xI(n,t="/"){let{pathname:e,search:i="",hash:r=""}=typeof n=="string"?Nl(n):n;return{pathname:e?e.startsWith("/")?e:RI(e,t):t,search:MI(i),hash:OI(r)}}function RI(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function jg(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CI(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function DS(n){let t=CI(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function kS(n,t,e,i=!1){let r;typeof n=="string"?r=Nl(n):(r={...n},Ye(!r.pathname||!r.pathname.includes("?"),jg("?","pathname","search",r)),Ye(!r.pathname||!r.pathname.includes("#"),jg("#","pathname","hash",r)),Ye(!r.search||!r.search.includes("#"),jg("#","search","hash",r)));let l=n===""||r.pathname==="",c=l?"/":r.pathname,d;if(c==null)d=e;else{let w=t.length-1;if(!i&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),w-=1;r.pathname=S.join("/")}d=w>=0?t[w]:"/"}let m=xI(r,d),g=c&&c!=="/"&&c.endsWith("/"),b=(l||c===".")&&e.endsWith("/");return!m.pathname.endsWith("/")&&(g||b)&&(m.pathname+="/"),m}var na=n=>n.join("/").replace(/\/\/+/g,"/"),II=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),MI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,OI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function PI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var LS=["POST","PUT","PATCH","DELETE"];new Set(LS);var DI=["GET",...LS];new Set(DI);var Xu=K.createContext(null);Xu.displayName="DataRouter";var Am=K.createContext(null);Am.displayName="DataRouterState";var NS=K.createContext({isTransitioning:!1});NS.displayName="ViewTransition";var kI=K.createContext(new Map);kI.displayName="Fetchers";var LI=K.createContext(null);LI.displayName="Await";var br=K.createContext(null);br.displayName="Navigation";var Fh=K.createContext(null);Fh.displayName="Location";var Tr=K.createContext({outlet:null,matches:[],isDataRoute:!1});Tr.displayName="Route";var iy=K.createContext(null);iy.displayName="RouteError";function NI(n,{relative:t}={}){Ye(qh(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=K.useContext(br),{hash:r,pathname:l,search:c}=Zh(n,{relative:t}),d=l;return e!=="/"&&(d=l==="/"?e:na([e,l])),i.createHref({pathname:d,search:c,hash:r})}function qh(){return K.useContext(Fh)!=null}function Vl(){return Ye(qh(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(Fh).location}var VS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zS(n){K.useContext(br).static||K.useLayoutEffect(n)}function Gh(){let{isDataRoute:n}=K.useContext(Tr);return n?KI():VI()}function VI(){Ye(qh(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(Xu),{basename:t,navigator:e}=K.useContext(br),{matches:i}=K.useContext(Tr),{pathname:r}=Vl(),l=JSON.stringify(DS(i)),c=K.useRef(!1);return zS(()=>{c.current=!0}),K.useCallback((m,g={})=>{if(Bs(c.current,VS),!c.current)return;if(typeof m=="number"){e.go(m);return}let b=kS(m,JSON.parse(l),r,g.relative==="path");n==null&&t!=="/"&&(b.pathname=b.pathname==="/"?t:na([t,b.pathname])),(g.replace?e.replace:e.push)(b,g.state,g)},[t,e,l,r,n])}K.createContext(null);function zI(){let{matches:n}=K.useContext(Tr),t=n[n.length-1];return t?t.params:{}}function Zh(n,{relative:t}={}){let{matches:e}=K.useContext(Tr),{pathname:i}=Vl(),r=JSON.stringify(DS(e));return K.useMemo(()=>kS(n,JSON.parse(r),i,t==="path"),[n,r,i,t])}function BI(n,t){return BS(n,t)}function BS(n,t,e,i){var j;Ye(qh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=K.useContext(br),{matches:l}=K.useContext(Tr),c=l[l.length-1],d=c?c.params:{},m=c?c.pathname:"/",g=c?c.pathnameBase:"/",b=c&&c.route;{let q=b&&b.path||"";US(m,!b||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let w=Vl(),S;if(t){let q=typeof t=="string"?Nl(t):t;Ye(g==="/"||((j=q.pathname)==null?void 0:j.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${q.pathname}" was given in the \`location\` prop.`),S=q}else S=w;let C=S.pathname||"/",M=C;if(g!=="/"){let q=g.replace(/^\//,"").split("/");M="/"+C.replace(/^\//,"").split("/").slice(q.length).join("/")}let D=MS(n,{pathname:M});Bs(b||D!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Bs(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=qI(D&&D.map(q=>Object.assign({},q,{params:Object.assign({},d,q.params),pathname:na([g,r.encodeLocation?r.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?g:na([g,r.encodeLocation?r.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),l,e,i);return t&&N?K.createElement(Fh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},N):N}function UI(){let n=$I(),t=PI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=K.createElement(K.Fragment,null,K.createElement("p",null,"💿 Hey developer 👋"),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:l},"ErrorBoundary")," or"," ",K.createElement("code",{style:l},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},t),e?K.createElement("pre",{style:r},e):null,c)}var HI=K.createElement(UI,null),jI=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?K.createElement(Tr.Provider,{value:this.props.routeContext},K.createElement(iy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FI({routeContext:n,match:t,children:e}){let i=K.useContext(Xu);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),K.createElement(Tr.Provider,{value:n},e)}function qI(n,t=[],e=null,i=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let r=n,l=e==null?void 0:e.errors;if(l!=null){let m=r.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);Ye(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),r=r.slice(0,Math.min(r.length,m+1))}let c=!1,d=-1;if(e)for(let m=0;m<r.length;m++){let g=r[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=m),g.route.id){let{loaderData:b,errors:w}=e,S=g.route.loader&&!b.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||S){c=!0,d>=0?r=r.slice(0,d+1):r=[r[0]];break}}}return r.reduceRight((m,g,b)=>{let w,S=!1,C=null,M=null;e&&(w=l&&g.route.id?l[g.route.id]:void 0,C=g.route.errorElement||HI,c&&(d<0&&b===0?(US("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,M=null):d===b&&(S=!0,M=g.route.hydrateFallbackElement||null)));let D=t.concat(r.slice(0,b+1)),N=()=>{let j;return w?j=C:S?j=M:g.route.Component?j=K.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=m,K.createElement(FI,{match:g,routeContext:{outlet:m,matches:D,isDataRoute:e!=null},children:j})};return e&&(g.route.ErrorBoundary||g.route.errorElement||b===0)?K.createElement(jI,{location:e.location,revalidation:e.revalidation,component:C,error:w,children:N(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):N()},null)}function sy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GI(n){let t=K.useContext(Xu);return Ye(t,sy(n)),t}function ZI(n){let t=K.useContext(Am);return Ye(t,sy(n)),t}function WI(n){let t=K.useContext(Tr);return Ye(t,sy(n)),t}function ry(n){let t=WI(n),e=t.matches[t.matches.length-1];return Ye(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function YI(){return ry("useRouteId")}function $I(){var i;let n=K.useContext(iy),t=ZI("useRouteError"),e=ry("useRouteError");return n!==void 0?n:(i=t.errors)==null?void 0:i[e]}function KI(){let{router:n}=GI("useNavigate"),t=ry("useNavigate"),e=K.useRef(!1);return zS(()=>{e.current=!0}),K.useCallback(async(r,l={})=>{Bs(e.current,VS),e.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:t,...l}))},[n,t])}var OT={};function US(n,t,e){!t&&!OT[n]&&(OT[n]=!0,Bs(!1,e))}K.memo(XI);function XI({routes:n,future:t,state:e}){return BS(n,void 0,e,t)}function Tl(n){Ye(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QI({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:r,static:l=!1}){Ye(!qh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=K.useMemo(()=>({basename:c,navigator:r,static:l,future:{}}),[c,r,l]);typeof e=="string"&&(e=Nl(e));let{pathname:m="/",search:g="",hash:b="",state:w=null,key:S="default"}=e,C=K.useMemo(()=>{let M=aa(m,c);return M==null?null:{location:{pathname:M,search:g,hash:b,state:w,key:S},navigationType:i}},[c,m,g,b,w,S,i]);return Bs(C!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${b}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:K.createElement(br.Provider,{value:d},K.createElement(Fh.Provider,{children:t,value:C}))}function JI({children:n,location:t}){return BI(m_(n),t)}function m_(n,t=[]){let e=[];return K.Children.forEach(n,(i,r)=>{if(!K.isValidElement(i))return;let l=[...t,r];if(i.type===K.Fragment){e.push.apply(e,m_(i.props.children,l));return}Ye(i.type===Tl,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ye(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=m_(i.props.children,l)),e.push(c)}),e}var Od="get",Pd="application/x-www-form-urlencoded";function xm(n){return n!=null&&typeof n.tagName=="string"}function t2(n){return xm(n)&&n.tagName.toLowerCase()==="button"}function e2(n){return xm(n)&&n.tagName.toLowerCase()==="form"}function n2(n){return xm(n)&&n.tagName.toLowerCase()==="input"}function i2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function s2(n,t){return n.button===0&&(!t||t==="_self")&&!i2(n)}var cd=null;function r2(){if(cd===null)try{new FormData(document.createElement("form"),0),cd=!1}catch{cd=!0}return cd}var a2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fg(n){return n!=null&&!a2.has(n)?(Bs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pd}"`),null):n}function o2(n,t){let e,i,r,l,c;if(e2(n)){let d=n.getAttribute("action");i=d?aa(d,t):null,e=n.getAttribute("method")||Od,r=Fg(n.getAttribute("enctype"))||Pd,l=new FormData(n)}else if(t2(n)||n2(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(i=m?aa(m,t):null,e=n.getAttribute("formmethod")||d.getAttribute("method")||Od,r=Fg(n.getAttribute("formenctype"))||Fg(d.getAttribute("enctype"))||Pd,l=new FormData(d,n),!r2()){let{name:g,type:b,value:w}=n;if(b==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,w)}}else{if(xm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Od,i=null,r=Pd,c=n}return l&&r==="text/plain"&&(c=l,l=void 0),{action:i,method:e.toLowerCase(),encType:r,formData:l,body:c}}function ay(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}async function l2(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function u2(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function c2(n,t,e){let i=await Promise.all(n.map(async r=>{let l=t.routes[r.route.id];if(l){let c=await l2(l,e);return c.links?c.links():[]}return[]}));return m2(i.flat(1).filter(u2).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function PT(n,t,e,i,r,l){let c=(m,g)=>e[g]?m.route.id!==e[g].route.id:!0,d=(m,g)=>{var b;return e[g].pathname!==m.pathname||((b=e[g].route.path)==null?void 0:b.endsWith("*"))&&e[g].params["*"]!==m.params["*"]};return l==="assets"?t.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?t.filter((m,g)=>{var w;let b=i.routes[m.route.id];if(!b||!b.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((w=e[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function h2(n,t,{includeHydrateFallback:e}={}){return f2(n.map(i=>{let r=t.routes[i.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),e&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function f2(n){return[...new Set(n)]}function d2(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function m2(n,t){let e=new Set;return new Set(t),n.reduce((i,r)=>{let l=JSON.stringify(d2(r));return e.has(l)||(e.add(l),i.push({key:l,link:r})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var p2=new Set([100,101,204,205]);function g2(n,t){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":t&&aa(e.pathname,t)==="/"?e.pathname=`${t.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function HS(){let n=K.useContext(Xu);return ay(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function _2(){let n=K.useContext(Am);return ay(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var oy=K.createContext(void 0);oy.displayName="FrameworkContext";function jS(){let n=K.useContext(oy);return ay(n,"You must render this element inside a <HydratedRouter> element"),n}function y2(n,t){let e=K.useContext(oy),[i,r]=K.useState(!1),[l,c]=K.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:b,onTouchStart:w}=t,S=K.useRef(null);K.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let D=j=>{j.forEach(q=>{c(q.isIntersecting)})},N=new IntersectionObserver(D,{threshold:.5});return S.current&&N.observe(S.current),()=>{N.disconnect()}}},[n]),K.useEffect(()=>{if(i){let D=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(D)}}},[i]);let C=()=>{r(!0)},M=()=>{r(!1),c(!1)};return e?n!=="intent"?[l,S,{}]:[l,S,{onFocus:Qc(d,C),onBlur:Qc(m,M),onMouseEnter:Qc(g,C),onMouseLeave:Qc(b,M),onTouchStart:Qc(w,C)}]:[!1,S,{}]}function Qc(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function v2({page:n,...t}){let{router:e}=HS(),i=K.useMemo(()=>MS(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?K.createElement(T2,{page:n,matches:i,...t}):null}function b2(n){let{manifest:t,routeModules:e}=jS(),[i,r]=K.useState([]);return K.useEffect(()=>{let l=!1;return c2(n,t,e).then(c=>{l||r(c)}),()=>{l=!0}},[n,t,e]),i}function T2({page:n,matches:t,...e}){let i=Vl(),{manifest:r,routeModules:l}=jS(),{basename:c}=HS(),{loaderData:d,matches:m}=_2(),g=K.useMemo(()=>PT(n,t,m,r,i,"data"),[n,t,m,r,i]),b=K.useMemo(()=>PT(n,t,m,r,i,"assets"),[n,t,m,r,i]),w=K.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let M=new Set,D=!1;if(t.forEach(j=>{var Y;let q=r.routes[j.route.id];!q||!q.hasLoader||(!g.some(it=>it.route.id===j.route.id)&&j.route.id in d&&((Y=l[j.route.id])!=null&&Y.shouldRevalidate)||q.hasClientLoader?D=!0:M.add(j.route.id))}),M.size===0)return[];let N=g2(n,c);return D&&M.size>0&&N.searchParams.set("_routes",t.filter(j=>M.has(j.route.id)).map(j=>j.route.id).join(",")),[N.pathname+N.search]},[c,d,i,r,g,t,n,l]),S=K.useMemo(()=>h2(b,r),[b,r]),C=b2(b);return K.createElement(K.Fragment,null,w.map(M=>K.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...e})),S.map(M=>K.createElement("link",{key:M,rel:"modulepreload",href:M,...e})),C.map(({key:M,link:D})=>K.createElement("link",{key:M,...D})))}function w2(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var FS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FS&&(window.__reactRouterVersion="7.6.2")}catch{}function E2({basename:n,children:t,window:e}){let i=K.useRef();i.current==null&&(i.current=uI({window:e,v5Compat:!0}));let r=i.current,[l,c]=K.useState({action:r.action,location:r.location}),d=K.useCallback(m=>{K.startTransition(()=>c(m))},[c]);return K.useLayoutEffect(()=>r.listen(d),[r,d]),K.createElement(QI,{basename:n,children:t,location:l.location,navigationType:l.action,navigator:r})}var qS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,po=K.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:r,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:b,viewTransition:w,...S},C){let{basename:M}=K.useContext(br),D=typeof g=="string"&&qS.test(g),N,j=!1;if(typeof g=="string"&&D&&(N=g,FS))try{let z=new URL(window.location.href),U=g.startsWith("//")?new URL(z.protocol+g):new URL(g),H=aa(U.pathname,M);U.origin===z.origin&&H!=null?g=H+U.search+U.hash:j=!0}catch{Bs(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=NI(g,{relative:r}),[Y,it,lt]=y2(i,S),bt=R2(g,{replace:c,state:d,target:m,preventScrollReset:b,relative:r,viewTransition:w});function V(z){t&&t(z),z.defaultPrevented||bt(z)}let P=K.createElement("a",{...S,...lt,href:N||q,onClick:j||l?t:V,ref:w2(C,it),target:m,"data-discover":!D&&e==="render"?"true":void 0});return Y&&!D?K.createElement(K.Fragment,null,P,K.createElement(v2,{page:q})):P});po.displayName="Link";var S2=K.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:r=!1,style:l,to:c,viewTransition:d,children:m,...g},b){let w=Zh(c,{relative:g.relative}),S=Vl(),C=K.useContext(Am),{navigator:M,basename:D}=K.useContext(br),N=C!=null&&P2(w)&&d===!0,j=M.encodeLocation?M.encodeLocation(w).pathname:w.pathname,q=S.pathname,Y=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;e||(q=q.toLowerCase(),Y=Y?Y.toLowerCase():null,j=j.toLowerCase()),Y&&D&&(Y=aa(Y,D)||Y);const it=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let lt=q===j||!r&&q.startsWith(j)&&q.charAt(it)==="/",bt=Y!=null&&(Y===j||!r&&Y.startsWith(j)&&Y.charAt(j.length)==="/"),V={isActive:lt,isPending:bt,isTransitioning:N},P=lt?t:void 0,z;typeof i=="function"?z=i(V):z=[i,lt?"active":null,bt?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(V):l;return K.createElement(po,{...g,"aria-current":P,className:z,ref:b,style:U,to:c,viewTransition:d},typeof m=="function"?m(V):m)});S2.displayName="NavLink";var A2=K.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:r,state:l,method:c=Od,action:d,onSubmit:m,relative:g,preventScrollReset:b,viewTransition:w,...S},C)=>{let M=M2(),D=O2(d,{relative:g}),N=c.toLowerCase()==="get"?"get":"post",j=typeof d=="string"&&qS.test(d),q=Y=>{if(m&&m(Y),Y.defaultPrevented)return;Y.preventDefault();let it=Y.nativeEvent.submitter,lt=(it==null?void 0:it.getAttribute("formmethod"))||c;M(it||Y.currentTarget,{fetcherKey:t,method:lt,navigate:e,replace:r,state:l,relative:g,preventScrollReset:b,viewTransition:w})};return K.createElement("form",{ref:C,method:N,action:D,onSubmit:i?m:q,...S,"data-discover":!j&&n==="render"?"true":void 0})});A2.displayName="Form";function x2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GS(n){let t=K.useContext(Xu);return Ye(t,x2(n)),t}function R2(n,{target:t,replace:e,state:i,preventScrollReset:r,relative:l,viewTransition:c}={}){let d=Gh(),m=Vl(),g=Zh(n,{relative:l});return K.useCallback(b=>{if(s2(b,t)){b.preventDefault();let w=e!==void 0?e:Rh(m)===Rh(g);d(n,{replace:w,state:i,preventScrollReset:r,relative:l,viewTransition:c})}},[m,d,g,e,i,t,n,r,l,c])}var C2=0,I2=()=>`__${String(++C2)}__`;function M2(){let{router:n}=GS("useSubmit"),{basename:t}=K.useContext(br),e=YI();return K.useCallback(async(i,r={})=>{let{action:l,method:c,encType:d,formData:m,body:g}=o2(i,t);if(r.navigate===!1){let b=r.fetcherKey||I2();await n.fetch(b,e,r.action||l,{preventScrollReset:r.preventScrollReset,formData:m,body:g,formMethod:r.method||c,formEncType:r.encType||d,flushSync:r.flushSync})}else await n.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:m,body:g,formMethod:r.method||c,formEncType:r.encType||d,replace:r.replace,state:r.state,fromRouteId:e,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,t,e])}function O2(n,{relative:t}={}){let{basename:e}=K.useContext(br),i=K.useContext(Tr);Ye(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),l={...Zh(n||".",{relative:t})},c=Vl();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(b=>b==="")){d.delete("index"),m.filter(w=>w).forEach(w=>d.append("index",w));let b=d.toString();l.search=b?`?${b}`:""}}return(!n||n===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:na([e,l.pathname])),Rh(l)}function P2(n,t={}){let e=K.useContext(NS);Ye(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=GS("useViewTransitionState"),r=Zh(n,{relative:t.relative});if(!e.isTransitioning)return!1;let l=aa(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=aa(e.nextLocation.pathname,i)||e.nextLocation.pathname;return Gd(r.pathname,c)!=null||Gd(r.pathname,l)!=null}[...p2];var D2=IS();const k2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAclBMVEX///8AAAAgICDq6urCwsJZWVny8vL6+vrV1dX39/eNjY2srKwODg6BgYF0dHRGRkbj4+O1tbWlpaW7u7s9PT3MzMzb29tUVFRnZ2dgYGAmJiY4ODiIiIivr68yMjLKyspOTk4YGBgjIyN2dnaZmZkrKyvJgXKrAAALw0lEQVR4nOVd6WKySgy1giCKirjXpdLq+7/i/dRa5SQzLCaDes9PW4HjMNknabW0EUbzST/tDTvT3Wc7jj/i7LgeLVbDTTqeeVGofn9NBMlks5x+WJGNlj0/CZp+1BqYj4ejzE7uDp+LwaTb9CNXwDztxKXJ3RCvtl7Tj14CwWRQg9wfvjf+U7+x3nb1CL1frMZPSjIcdwTonREv/abZUHR/pOj94mfWNKV7BGmBTqiF9TZqmtgvvI0CvTPavWcQrslQi98Zy3nD/LoSwtOOfZOmQFdMelrR2Dp6uu/nPYZN7Mew54zfCQPnVkC//MPFu9FqkPpfs+488YIwCrwk6X7528Nyv87KX6bvlF+3pP77Xm78xLP4gF7i95brchfbO9yOpRTg6OAH5fzbMPAPozKX3CjzuqJb7BodB35l533W2xVz/NIgBIgKvaPFNql57WRbqH6G6pbc19H+BKP0McHu9Rf2GxyVDYCD9e7xoe7q3cMr0EOpwD1MCKy/734idiPf+rYu1HRjN7Pcdij79sxtBlOsJHBSyz0V3JzEJtIO4rf7h6X5fgMdARdZNuRQ/G6B2fD40TOLA/M6joR/1cSoJJYS4tOMuVHmHEVvbDRj2vrxIrMGFry3b7pHT+4eFhhF3FjqDlvDDTq6L+gNiUkPC1E0/YRiv2AJmNxREafRQHDkNrDg7dUoGn49FZVrhcEkfthK5QlmTYTcZ7xAf5DimL3oqpnkUMC/qdtHrskTdKMjOPBm3AOJqhl7QbdBrzwm7BPVdmsS9nLNZr263CPFNRVzxJlL7aazQQknb471BAMX4BsJP28NRFysdl3nSpyTvXiGAp+Qy3ctq1+HU7CdZyD4DxzFymrxiyOo8bS1wDmNFQVqwOznlc7T1gJDMasmbRh35ZkItkLmARdVLsD4E1ORPTjr9/oiCjVkJH0Fb4BRq7FE4Me/vPuxSD1Qmz5k6TAqp+ol3PmbVSlh2Xr0IY9ll4HRhBIB7XtHTMK2ZazmQblvMopCIiMR5a4o8dIzvmu5laDfE3GX8tJLJIFEnam4zNdoCnsv8TSgwmSsB2rclEiEz+nvIuPR58XXUeSaQVbjPaWRAiGHMC/d2zIXpdJmWvQVunulomoqDBkHoUBMB+QLe6FHUWLIeLF244tms8R8eiWGVPFbJT/9d7mwkxJDJh5oWxRizVSy1+3QYkg9KUt+mGoKweySGkMaEjRrDJKqlyxdUWNITRujOUGcJhm1/As9htSRMi0iUfaiZSuKDIneN8QjyC6UjTwpMqTbi5cf5N9kK1Y1GRJhw4pTogtLupNlocmwRc4kcTqRSCThJKEqQ7I8jBcVoUCSzhKqMqTmJl0fUlIiXaumyzDCx6eqHOvWhHehNkOyyYifSFSKeDWQMkOyE1HrozCSr25UZki8hh/4O/4C8qc3tBkSmzPvCWNtnkIiTZshMTrzVWlozyicNFZniHUauVUi6UL5++szbCGJe7sGIwEaNUH6DDHudl8shbFjjZISfYZof9/5UBhDFIzO3KDPkEQWb5YbSlKVui4HDDF1fUuZYTJGpe7JAUO0a26W53f+DzpVJQ4YkgKL6+dI/aGCTSNcMEQHaW74XKcE3wVDlKZXFwp0xU7l5k4YQpLyb7+BLaBUAuyEIbj6v0lvNMqVSmSdMES9d9mIaLHq3NsNwxC4XPwLWFmtIlknDNGsuTjyoES0zoq4YQjW93m5gs/8h1pNqNwwhI14LslEHaJ1WsQNQ3QiTrodWK+1Kp3dMAzBAj0Z3xBorFESXg5uGGI8ZkM/Ujvy44gh+EmnBQP5qtbtzhFD2HTTfy9ulv9I7eSrI4YoOENMaWRqp34cMfTAyo7QOax1vKYUHDEMoY/PHFMye607u2KIcmWCoVI1ZeGMIXi7fYxP6Z1gdsUQHIkU9YdOjOYEVwxhyXqYdtNr/po3p77V7gMKcYivbYkyqCjtHNuVAfbix3f1Sxw7aYniAjhM0UHvsLgQvEI/QQUUh+NBOUxRuBaaNG4bQlIU2s0QdtphDUYRQ2MjF2cokhRQnveJEcYio61Os3VZFB2LAcO03cryHxR4+HwPArcoiHaCGRrjohQIq2bFzAXVDlTEWGZSEMNoWs6cUCBrMGSKa1jwlr7AGoI7SN7SAknzAvsQ3tIMq8CLtMXzy1KQNMcWxIOLqr2eXx+Ctli3wCUutNqaljWFNg0wHLWgU0hxau3Z7VKw2hZ4aujtfIvV/8A/hH2l16TXlY8PdRcbdPrFy7v/4IohZBBTFBx6HUxcMYQ8zBiz+HqNoFwxhFLhGTqMO7VGSa4YgkvvEUP15fMWWZ5QRJyNN8s9Zf/eSTBq3ix/eJIrTFpYBY4YMkl7Ji2sgmby+CdDHdTF94vXYoAoPW2696+nwR4vb1UT9XleL4jrv1Vd2+VcBfhPb1WbeHEk8EiQkqhxwxC4XE5cYKcBpY3ohCFGO3/DThAhVHIRnTAEfX+NPEKoRrTfxw1OGELk8Gq+4HGh9zlvca27wI34Pmdm/lxB+FzlcJ4ThrDfbgE9bLnwLmfXbn4SnrhQCSk6YIjh+JveQ3NVxaxxwBAP5905EXgOWEOa6jPEl/Q+MooySMP61meIabH7lgPIvlSj04rQZ4gkcp4u9q2TG/T3B3WGmLzNx2PQv9jLP4A6Q1ylvAeBUVOR5s95aDMkzdjg7+/fn4Z0dxG3a5QZkpZtJF+Pkz/ETwcpM0TLkx6rIMMCXrzXF3WQSAdhaVdflyFq+zazQKRTufBOVGVI1ofbZKQdGAqjB6HKkLTcY5eHNBGWtb81GRJdyOeXiLyVTUNpMiTNkg3leaQPv2h3BUWGZF7F3vCPROsrNvsVvTSZqWK0OcliS6p9PYZElZu3F52g85r9vC1FskScCjZUUmNIRj/ZvAbaV19uJK4WQ1rvajVVaAXw681GsJubxBOWiywqMaQzVSofqHizGSXUT3y1OTP7wu9QjVFx7J4JKrOC6PGPEs1z6bwnmapajXlPdBOWKlqjv8vrzOwq18aLmQ0o0QxTfu4aM/645LwKOjBIRNpIz85jVqJsDJSbfyih+GXnHzITp0vPP+TmA4pId8kZlhFziq5CoJ4ZBjx6sjmkzGTnStKLG9X6JOOOL2CGHlcrsGDG7j3RwGOWYNUhhtyU9uehyM10rjzYiBkJ/CxDj0OOYA0HgYwOOlF8hr3IzXOulw3EqSUnTKXzNTXATHOu6cUGjOL/iNXO1JSEx8xyrqDq80jYo+ny+e8q4BsC1P7ZOYGqUqdRGvwx6wdsCP70vVrzyELwR+UfigeSKVBn7LVOndgRMHr+UYK8Wvwnb5Q6Ylsxy9hnedgR4ykqdq4zgfEGRAgaeyjs1Q6bsvA4LfghFA0xtYlQmfNhAB2JK0jQfPmFK+2fcIboCWI19yaKih0Y7mFspyJ4usfYWugoOoyVvzdnpp0Qi1pXCWejntGRn9CWuzHn4lx+XOE9Ehlk2T/86Ol/j8wX/cNa/q4kP3xDT8enipjA7RUqB7INKveMgbxY9Wz9mpRE3Jet0ddQdj92La/MR6bmwQVc/OAPHTnhPaFJpTssNA1/g5V6RU/ClEsO9qZwyiZx16g2fn/f/mMkvdQstM/Q18CRbYOc0dnWFTvJ1roNThi4CIUxeRvErlfZgQz9QcHr8SFtxlhAE+EMRgc/KBdeDQP/UPBuXqDWd4VibpV1N6yXPT+xbMzQS/zNEpvVGTB1G+Wr0FswW++Xh63/1U0SL4jCwEvm3dmXnw5Wo12FVpou3dEzAotJpYBeE/kEr1CqimHoNmRyw9zo2oii02SYvVtS5DyAVbNpBPV1HDadCTrB65niDA9j09T+Q0RbLtf4KKZpM8kDA2bmeEM9/DS9/Rj4S7FW2J3xM6TTGQRjPjtUDavts+w+FoG/KWlm8hhMnmrzGeBtV3Xe17iT6sZeZdGdDBafxax+kY2G41did0WQ+L3lKLOTmy43k+QV3kwzwsibjdPNcLUYrY9Z/BHH7c/dtDPspf3JPNKXmf8B8ByKAxrnKJYAAAAASUVORK5CYII=",L2="/TapasMadrid/assets/settings-Bbu9V-Hx.png",Wh=()=>ht.jsx(ht.Fragment,{children:ht.jsxs("header",{children:[ht.jsx("h1",{children:"🍻 Tapas Radar"}),ht.jsx("nav",{children:ht.jsxs("ul",{children:[ht.jsx("li",{children:ht.jsx(po,{to:"/",children:"Inicio"})}),ht.jsx("li",{children:ht.jsx(po,{to:"/mapa",children:"Mapa"})}),ht.jsx("li",{children:ht.jsx(po,{to:"/settings",children:"Ajustes"})}),ht.jsx("li",{children:ht.jsx(po,{to:"/about",children:"Sobre nosotros"})})]})})]})}),N2=()=>{const n=Gh(),t=()=>{n("/mapa")},e=()=>{n("/añadir")},i=()=>{n("/settings")};return ht.jsxs("div",{className:"home",children:[ht.jsx(Wh,{}),ht.jsx("p",{className:"description",children:"Descubre los bares con más ambiente de Madrid en tiempo real. Tapas, cerveza y buena vibra — todo en un vistazo."}),ht.jsx("button",{className:"start-button",onClick:t,children:"Empezar"}),ht.jsx("br",{}),ht.jsx("button",{className:"start-button",onClick:e,children:ht.jsx("img",{src:k2,alt:"icon +"})}),ht.jsx("button",{className:"goSetting",onClick:i,children:ht.jsx("img",{src:L2,alt:"settings"})})]})};function ZS(n,t){const e=K.useRef(t);K.useEffect(function(){t!==e.current&&n.attributionControl!=null&&(e.current!=null&&n.attributionControl.removeAttribution(e.current),t!=null&&n.attributionControl.addAttribution(t)),e.current=t},[n,t])}const V2=1;function z2(n){return Object.freeze({__version:V2,map:n})}function B2(n,t){return Object.freeze({...n,...t})}const ly=K.createContext(null);function WS(){const n=K.use(ly);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function U2(n){function t(e,i){const{instance:r,context:l}=n(e).current;K.useImperativeHandle(i,()=>r);const{children:c}=e;return c==null?null:ge.createElement(ly,{value:l},c)}return K.forwardRef(t)}function H2(n){function t(e,i){const[r,l]=K.useState(!1),{instance:c}=n(e,l).current;K.useImperativeHandle(i,()=>c),K.useEffect(function(){r&&c.update()},[c,r,e.children]);const d=c._contentNode;return d?D2.createPortal(e.children,d):null}return K.forwardRef(t)}function j2(n){function t(e,i){const{instance:r}=n(e).current;return K.useImperativeHandle(i,()=>r),null}return K.forwardRef(t)}function YS(n,t){const e=K.useRef(void 0);K.useEffect(function(){return t!=null&&n.instance.on(t),e.current=t,function(){e.current!=null&&n.instance.off(e.current),e.current=null}},[n,t])}function uy(n,t){const e=n.pane??t.pane;return e?{...n,pane:e}:n}function F2(n,t){return function(i,r){const l=WS(),c=n(uy(i,l),l);return ZS(l.map,i.attribution),YS(c.current,i.eventHandlers),t(c.current,l,i,r),c}}var sh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var q2=sh.exports,DT;function G2(){return DT||(DT=1,function(n,t){(function(e,i){i(t)})(q2,function(e){var i="1.9.4";function r(o){var h,_,T,A;for(_=1,T=arguments.length;_<T;_++){A=arguments[_];for(h in A)o[h]=A[h]}return o}var l=Object.create||function(){function o(){}return function(h){return o.prototype=h,new o}}();function c(o,h){var _=Array.prototype.slice;if(o.bind)return o.bind.apply(o,_.call(arguments,1));var T=_.call(arguments,2);return function(){return o.apply(h,T.length?T.concat(_.call(arguments)):arguments)}}var d=0;function m(o){return"_leaflet_id"in o||(o._leaflet_id=++d),o._leaflet_id}function g(o,h,_){var T,A,I,Z;return Z=function(){T=!1,A&&(I.apply(_,A),A=!1)},I=function(){T?A=arguments:(o.apply(_,arguments),setTimeout(Z,h),T=!0)},I}function b(o,h,_){var T=h[1],A=h[0],I=T-A;return o===T&&_?o:((o-A)%I+I)%I+A}function w(){return!1}function S(o,h){if(h===!1)return o;var _=Math.pow(10,h===void 0?6:h);return Math.round(o*_)/_}function C(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function M(o){return C(o).split(/\s+/)}function D(o,h){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?l(o.options):{});for(var _ in h)o.options[_]=h[_];return o.options}function N(o,h,_){var T=[];for(var A in o)T.push(encodeURIComponent(_?A.toUpperCase():A)+"="+encodeURIComponent(o[A]));return(!h||h.indexOf("?")===-1?"?":"&")+T.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function q(o,h){return o.replace(j,function(_,T){var A=h[T];if(A===void 0)throw new Error("No value provided for variable "+_);return typeof A=="function"&&(A=A(h)),A})}var Y=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function it(o,h){for(var _=0;_<o.length;_++)if(o[_]===h)return _;return-1}var lt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function bt(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var V=0;function P(o){var h=+new Date,_=Math.max(0,16-(h-V));return V=h+_,window.setTimeout(o,_)}var z=window.requestAnimationFrame||bt("RequestAnimationFrame")||P,U=window.cancelAnimationFrame||bt("CancelAnimationFrame")||bt("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function H(o,h,_){if(_&&z===P)o.call(h);else return z.call(window,c(o,h))}function G(o){o&&U.call(window,o)}var F={__proto__:null,extend:r,create:l,bind:c,get lastId(){return d},stamp:m,throttle:g,wrapNum:b,falseFn:w,formatNum:S,trim:C,splitWords:M,setOptions:D,getParamString:N,template:q,isArray:Y,indexOf:it,emptyImageUrl:lt,requestFn:z,cancelFn:U,requestAnimFrame:H,cancelAnimFrame:G};function Yt(){}Yt.extend=function(o){var h=function(){D(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=h.__super__=this.prototype,T=l(_);T.constructor=h,h.prototype=T;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(h[A]=this[A]);return o.statics&&r(h,o.statics),o.includes&&(kt(o.includes),r.apply(null,[T].concat(o.includes))),r(T,o),delete T.statics,delete T.includes,T.options&&(T.options=_.options?l(_.options):{},r(T.options,o.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,Z=T._initHooks.length;I<Z;I++)T._initHooks[I].call(this)}},h},Yt.include=function(o){var h=this.prototype.options;return r(this.prototype,o),o.options&&(this.prototype.options=h,this.mergeOptions(o.options)),this},Yt.mergeOptions=function(o){return r(this.prototype.options,o),this},Yt.addInitHook=function(o){var h=Array.prototype.slice.call(arguments,1),_=typeof o=="function"?o:function(){this[o].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function kt(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=Y(o)?o:[o];for(var h=0;h<o.length;h++)o[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var tt={on:function(o,h,_){if(typeof o=="object")for(var T in o)this._on(T,o[T],h);else{o=M(o);for(var A=0,I=o.length;A<I;A++)this._on(o[A],h,_)}return this},off:function(o,h,_){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var T in o)this._off(T,o[T],h);else{o=M(o);for(var A=arguments.length===1,I=0,Z=o.length;I<Z;I++)A?this._off(o[I]):this._off(o[I],h,_)}return this},_on:function(o,h,_,T){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(o,h,_)===!1){_===this&&(_=void 0);var A={fn:h,ctx:_};T&&(A.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(A)}},_off:function(o,h,_){var T,A,I;if(this._events&&(T=this._events[o],!!T)){if(arguments.length===1){if(this._firingCount)for(A=0,I=T.length;A<I;A++)T[A].fn=w;delete this._events[o];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var Z=this._listens(o,h,_);if(Z!==!1){var J=T[Z];this._firingCount&&(J.fn=w,this._events[o]=T=T.slice()),T.splice(Z,1)}}},fire:function(o,h,_){if(!this.listens(o,_))return this;var T=r({},h,{type:o,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var A=this._events[o];if(A){this._firingCount=this._firingCount+1||1;for(var I=0,Z=A.length;I<Z;I++){var J=A[I],at=J.fn;J.once&&this.off(o,at,J.ctx),at.call(J.ctx||this,T)}this._firingCount--}}return _&&this._propagateEvent(T),this},listens:function(o,h,_,T){typeof o!="string"&&console.warn('"string" type argument expected');var A=h;typeof h!="function"&&(T=!!h,A=void 0,_=void 0);var I=this._events&&this._events[o];if(I&&I.length&&this._listens(o,A,_)!==!1)return!0;if(T){for(var Z in this._eventParents)if(this._eventParents[Z].listens(o,h,_,T))return!0}return!1},_listens:function(o,h,_){if(!this._events)return!1;var T=this._events[o]||[];if(!h)return!!T.length;_===this&&(_=void 0);for(var A=0,I=T.length;A<I;A++)if(T[A].fn===h&&T[A].ctx===_)return A;return!1},once:function(o,h,_){if(typeof o=="object")for(var T in o)this._on(T,o[T],h,!0);else{o=M(o);for(var A=0,I=o.length;A<I;A++)this._on(o[A],h,_,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[m(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[m(o)],this},_propagateEvent:function(o){for(var h in this._eventParents)this._eventParents[h].fire(o.type,r({layer:o.target,propagatedFrom:o.target},o),!0)}};tt.addEventListener=tt.on,tt.removeEventListener=tt.clearAllEventListeners=tt.off,tt.addOneTimeEventListener=tt.once,tt.fireEvent=tt.fire,tt.hasEventListeners=tt.listens;var yt=Yt.extend(tt);function dt(o,h,_){this.x=_?Math.round(o):o,this.y=_?Math.round(h):h}var Vt=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};dt.prototype={clone:function(){return new dt(this.x,this.y)},add:function(o){return this.clone()._add(B(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(B(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new dt(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new dt(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Vt(this.x),this.y=Vt(this.y),this},distanceTo:function(o){o=B(o);var h=o.x-this.x,_=o.y-this.y;return Math.sqrt(h*h+_*_)},equals:function(o){return o=B(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=B(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function B(o,h,_){return o instanceof dt?o:Y(o)?new dt(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new dt(o.x,o.y):new dt(o,h,_)}function ut(o,h){if(o)for(var _=h?[o,h]:o,T=0,A=_.length;T<A;T++)this.extend(_[T])}ut.prototype={extend:function(o){var h,_;if(!o)return this;if(o instanceof dt||typeof o[0]=="number"||"x"in o)h=_=B(o);else if(o=Tt(o),h=o.min,_=o.max,!h||!_)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=_.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(o){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var h,_;return typeof o[0]=="number"||o instanceof dt?o=B(o):o=Tt(o),o instanceof ut?(h=o.min,_=o.max):h=_=o,h.x>=this.min.x&&_.x<=this.max.x&&h.y>=this.min.y&&_.y<=this.max.y},intersects:function(o){o=Tt(o);var h=this.min,_=this.max,T=o.min,A=o.max,I=A.x>=h.x&&T.x<=_.x,Z=A.y>=h.y&&T.y<=_.y;return I&&Z},overlaps:function(o){o=Tt(o);var h=this.min,_=this.max,T=o.min,A=o.max,I=A.x>h.x&&T.x<_.x,Z=A.y>h.y&&T.y<_.y;return I&&Z},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var h=this.min,_=this.max,T=Math.abs(h.x-_.x)*o,A=Math.abs(h.y-_.y)*o;return Tt(B(h.x-T,h.y-A),B(_.x+T,_.y+A))},equals:function(o){return o?(o=Tt(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function Tt(o,h){return!o||o instanceof ut?o:new ut(o,h)}function _t(o,h){if(o)for(var _=h?[o,h]:o,T=0,A=_.length;T<A;T++)this.extend(_[T])}_t.prototype={extend:function(o){var h=this._southWest,_=this._northEast,T,A;if(o instanceof xt)T=o,A=o;else if(o instanceof _t){if(T=o._southWest,A=o._northEast,!T||!A)return this}else return o?this.extend(wt(o)||St(o)):this;return!h&&!_?(this._southWest=new xt(T.lat,T.lng),this._northEast=new xt(A.lat,A.lng)):(h.lat=Math.min(T.lat,h.lat),h.lng=Math.min(T.lng,h.lng),_.lat=Math.max(A.lat,_.lat),_.lng=Math.max(A.lng,_.lng)),this},pad:function(o){var h=this._southWest,_=this._northEast,T=Math.abs(h.lat-_.lat)*o,A=Math.abs(h.lng-_.lng)*o;return new _t(new xt(h.lat-T,h.lng-A),new xt(_.lat+T,_.lng+A))},getCenter:function(){return new xt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xt(this.getNorth(),this.getWest())},getSouthEast:function(){return new xt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof xt||"lat"in o?o=wt(o):o=St(o);var h=this._southWest,_=this._northEast,T,A;return o instanceof _t?(T=o.getSouthWest(),A=o.getNorthEast()):T=A=o,T.lat>=h.lat&&A.lat<=_.lat&&T.lng>=h.lng&&A.lng<=_.lng},intersects:function(o){o=St(o);var h=this._southWest,_=this._northEast,T=o.getSouthWest(),A=o.getNorthEast(),I=A.lat>=h.lat&&T.lat<=_.lat,Z=A.lng>=h.lng&&T.lng<=_.lng;return I&&Z},overlaps:function(o){o=St(o);var h=this._southWest,_=this._northEast,T=o.getSouthWest(),A=o.getNorthEast(),I=A.lat>h.lat&&T.lat<_.lat,Z=A.lng>h.lng&&T.lng<_.lng;return I&&Z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,h){return o?(o=St(o),this._southWest.equals(o.getSouthWest(),h)&&this._northEast.equals(o.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function St(o,h){return o instanceof _t?o:new _t(o,h)}function xt(o,h,_){if(isNaN(o)||isNaN(h))throw new Error("Invalid LatLng object: ("+o+", "+h+")");this.lat=+o,this.lng=+h,_!==void 0&&(this.alt=+_)}xt.prototype={equals:function(o,h){if(!o)return!1;o=wt(o);var _=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return _<=(h===void 0?1e-9:h)},toString:function(o){return"LatLng("+S(this.lat,o)+", "+S(this.lng,o)+")"},distanceTo:function(o){return le.distance(this,wt(o))},wrap:function(){return le.wrapLatLng(this)},toBounds:function(o){var h=180*o/40075017,_=h/Math.cos(Math.PI/180*this.lat);return St([this.lat-h,this.lng-_],[this.lat+h,this.lng+_])},clone:function(){return new xt(this.lat,this.lng,this.alt)}};function wt(o,h,_){return o instanceof xt?o:Y(o)&&typeof o[0]!="object"?o.length===3?new xt(o[0],o[1],o[2]):o.length===2?new xt(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new xt(o.lat,"lng"in o?o.lng:o.lon,o.alt):h===void 0?null:new xt(o,h,_)}var xe={latLngToPoint:function(o,h){var _=this.projection.project(o),T=this.scale(h);return this.transformation._transform(_,T)},pointToLatLng:function(o,h){var _=this.scale(h),T=this.transformation.untransform(o,_);return this.projection.unproject(T)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var h=this.projection.bounds,_=this.scale(o),T=this.transformation.transform(h.min,_),A=this.transformation.transform(h.max,_);return new ut(T,A)},infinite:!1,wrapLatLng:function(o){var h=this.wrapLng?b(o.lng,this.wrapLng,!0):o.lng,_=this.wrapLat?b(o.lat,this.wrapLat,!0):o.lat,T=o.alt;return new xt(_,h,T)},wrapLatLngBounds:function(o){var h=o.getCenter(),_=this.wrapLatLng(h),T=h.lat-_.lat,A=h.lng-_.lng;if(T===0&&A===0)return o;var I=o.getSouthWest(),Z=o.getNorthEast(),J=new xt(I.lat-T,I.lng-A),at=new xt(Z.lat-T,Z.lng-A);return new _t(J,at)}},le=r({},xe,{wrapLng:[-180,180],R:6371e3,distance:function(o,h){var _=Math.PI/180,T=o.lat*_,A=h.lat*_,I=Math.sin((h.lat-o.lat)*_/2),Z=Math.sin((h.lng-o.lng)*_/2),J=I*I+Math.cos(T)*Math.cos(A)*Z*Z,at=2*Math.atan2(Math.sqrt(J),Math.sqrt(1-J));return this.R*at}}),Ei=6378137,Wi={R:Ei,MAX_LATITUDE:85.0511287798,project:function(o){var h=Math.PI/180,_=this.MAX_LATITUDE,T=Math.max(Math.min(_,o.lat),-_),A=Math.sin(T*h);return new dt(this.R*o.lng*h,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(o){var h=180/Math.PI;return new xt((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*h,o.x*h/this.R)},bounds:function(){var o=Ei*Math.PI;return new ut([-o,-o],[o,o])}()};function Si(o,h,_,T){if(Y(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=h,this._c=_,this._d=T}Si.prototype={transform:function(o,h){return this._transform(o.clone(),h)},_transform:function(o,h){return h=h||1,o.x=h*(this._a*o.x+this._b),o.y=h*(this._c*o.y+this._d),o},untransform:function(o,h){return h=h||1,new dt((o.x/h-this._b)/this._a,(o.y/h-this._d)/this._c)}};function Ai(o,h,_,T){return new Si(o,h,_,T)}var _s=r({},le,{code:"EPSG:3857",projection:Wi,transformation:function(){var o=.5/(Math.PI*Wi.R);return Ai(o,.5,-o,.5)}()}),wr=r({},_s,{code:"EPSG:900913"});function ma(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function No(o,h){var _="",T,A,I,Z,J,at;for(T=0,I=o.length;T<I;T++){for(J=o[T],A=0,Z=J.length;A<Z;A++)at=J[A],_+=(A?"L":"M")+at.x+" "+at.y;_+=h?Pt.svg?"z":"x":""}return _||"M0 0"}var Un=document.documentElement.style,pa="ActiveXObject"in window,Vo=pa&&!document.addEventListener,Er="msLaunchUri"in navigator&&!("documentMode"in document),ys=jn("webkit"),ql=jn("android"),Sr=jn("android 2")||jn("android 3"),zo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Gl=ql&&jn("Google")&&zo<537&&!("AudioNode"in window),De=!!window.opera,fe=!Er&&jn("chrome"),Hn=jn("gecko")&&!ys&&!De&&!pa,bn=!fe&&jn("safari"),Bo=jn("phantom"),Zl="OTransition"in Un,Ar=navigator.platform.indexOf("Win")===0,qs=pa&&"transition"in Un,vs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Sr,ui="MozPerspective"in Un,ga=!window.L_DISABLE_3D&&(qs||vs||ui)&&!Zl&&!Bo,xi=typeof orientation<"u"||jn("mobile"),Uo=xi&&ys,Ho=xi&&vs,_a=!window.PointerEvent&&window.MSPointerEvent,Yi=!!(window.PointerEvent||_a),$i="ontouchstart"in window||!!window.TouchEvent,jo=!window.L_NO_TOUCH&&($i||Yi),Ki=xi&&De,Fo=xi&&Hn,Gs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ya=function(){var o=!1;try{var h=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",w,h),window.removeEventListener("testPassiveEventSupport",w,h)}catch{}return o}(),Zs=function(){return!!document.createElement("canvas").getContext}(),va=!!(document.createElementNS&&ma("svg").createSVGRect),ke=!!va&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Je=!va&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var h=o.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),Ke=navigator.platform.indexOf("Mac")===0,ci=navigator.platform.indexOf("Linux")===0;function jn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Pt={ie:pa,ielt9:Vo,edge:Er,webkit:ys,android:ql,android23:Sr,androidStock:Gl,opera:De,chrome:fe,gecko:Hn,safari:bn,phantom:Bo,opera12:Zl,win:Ar,ie3d:qs,webkit3d:vs,gecko3d:ui,any3d:ga,mobile:xi,mobileWebkit:Uo,mobileWebkit3d:Ho,msPointer:_a,pointer:Yi,touch:jo,touchNative:$i,mobileOpera:Ki,mobileGecko:Fo,retina:Gs,passiveEvents:ya,canvas:Zs,svg:va,vml:Je,inlineSvg:ke,mac:Ke,linux:ci},bs=Pt.msPointer?"MSPointerDown":"pointerdown",qo=Pt.msPointer?"MSPointerMove":"pointermove",Ws=Pt.msPointer?"MSPointerUp":"pointerup",Ts=Pt.msPointer?"MSPointerCancel":"pointercancel",Ri={touchstart:bs,touchmove:qo,touchend:Ws,touchcancel:Ts},Ci={touchstart:Rr,touchmove:xr,touchend:xr,touchcancel:xr},Mn={},Tn=!1;function Ge(o,h,_){return h==="touchstart"&&Wl(),Ci[h]?(_=Ci[h].bind(this,_),o.addEventListener(Ri[h],_,!1),_):(console.warn("wrong event specified:",h),w)}function Go(o,h,_){if(!Ri[h]){console.warn("wrong event specified:",h);return}o.removeEventListener(Ri[h],_,!1)}function ba(o){Mn[o.pointerId]=o}function Ii(o){Mn[o.pointerId]&&(Mn[o.pointerId]=o)}function Xi(o){delete Mn[o.pointerId]}function Wl(){Tn||(document.addEventListener(bs,ba,!0),document.addEventListener(qo,Ii,!0),document.addEventListener(Ws,Xi,!0),document.addEventListener(Ts,Xi,!0),Tn=!0)}function xr(o,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var _ in Mn)h.touches.push(Mn[_]);h.changedTouches=[h],o(h)}}function Rr(o,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Re(h),xr(o,h)}function Yl(o){var h={},_,T;for(T in o)_=o[T],h[T]=_&&_.bind?_.bind(o):_;return o=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var Ys=200;function Qi(o,h){o.addEventListener("dblclick",h);var _=0,T;function A(I){if(I.detail!==1){T=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var Z=Ea(I);if(!(Z.some(function(at){return at instanceof HTMLLabelElement&&at.attributes.for})&&!Z.some(function(at){return at instanceof HTMLInputElement||at instanceof HTMLSelectElement}))){var J=Date.now();J-_<=Ys?(T++,T===2&&h(Yl(I))):T=1,_=J}}}return o.addEventListener("click",A),{dblclick:h,simDblclick:A}}function mn(o,h){o.removeEventListener("dblclick",h.dblclick),o.removeEventListener("click",h.simDblclick)}var ws=Mi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$s=Mi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ji=$s==="webkitTransition"||$s==="OTransition"?$s+"End":"transitionend";function Cr(o){return typeof o=="string"?document.getElementById(o):o}function ts(o,h){var _=o.style[h]||o.currentStyle&&o.currentStyle[h];if((!_||_==="auto")&&document.defaultView){var T=document.defaultView.getComputedStyle(o,null);_=T?T[h]:null}return _==="auto"?null:_}function te(o,h,_){var T=document.createElement(o);return T.className=h||"",_&&_.appendChild(T),T}function _e(o){var h=o.parentNode;h&&h.removeChild(o)}function on(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function es(o){var h=o.parentNode;h&&h.lastChild!==o&&h.appendChild(o)}function Ks(o){var h=o.parentNode;h&&h.firstChild!==o&&h.insertBefore(o,h.firstChild)}function Xs(o,h){if(o.classList!==void 0)return o.classList.contains(h);var _=Be(o);return _.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(_)}function Gt(o,h){if(o.classList!==void 0)for(var _=M(h),T=0,A=_.length;T<A;T++)o.classList.add(_[T]);else if(!Xs(o,h)){var I=Be(o);Zo(o,(I?I+" ":"")+h)}}function be(o,h){o.classList!==void 0?o.classList.remove(h):Zo(o,C((" "+Be(o)+" ").replace(" "+h+" "," ")))}function Zo(o,h){o.className.baseVal===void 0?o.className=h:o.className.baseVal=h}function Be(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Le(o,h){"opacity"in o.style?o.style.opacity=h:"filter"in o.style&&Ir(o,h)}function Ir(o,h){var _=!1,T="DXImageTransform.Microsoft.Alpha";try{_=o.filters.item(T)}catch{if(h===1)return}h=Math.round(h*100),_?(_.Enabled=h!==100,_.Opacity=h):o.style.filter+=" progid:"+T+"(opacity="+h+")"}function Mi(o){for(var h=document.documentElement.style,_=0;_<o.length;_++)if(o[_]in h)return o[_];return!1}function On(o,h,_){var T=h||new dt(0,0);o.style[ws]=(Pt.ie3d?"translate("+T.x+"px,"+T.y+"px)":"translate3d("+T.x+"px,"+T.y+"px,0)")+(_?" scale("+_+")":"")}function Ut(o,h){o._leaflet_pos=h,Pt.any3d?On(o,h):(o.style.left=h.x+"px",o.style.top=h.y+"px")}function ei(o){return o._leaflet_pos||new dt(0,0)}var wn,Oi,Ta;if("onselectstart"in document)wn=function(){Nt(window,"selectstart",Re)},Oi=function(){ue(window,"selectstart",Re)};else{var Es=Mi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);wn=function(){if(Es){var o=document.documentElement.style;Ta=o[Es],o[Es]="none"}},Oi=function(){Es&&(document.documentElement.style[Es]=Ta,Ta=void 0)}}function Mr(){Nt(window,"dragstart",Re)}function Wo(){ue(window,"dragstart",Re)}var wa,Qs;function Pi(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Pn(),wa=o,Qs=o.style.outlineStyle,o.style.outlineStyle="none",Nt(window,"keydown",Pn))}function Pn(){wa&&(wa.style.outlineStyle=Qs,wa=void 0,Qs=void 0,ue(window,"keydown",Pn))}function ns(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Di(o){var h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}var Yo={__proto__:null,TRANSFORM:ws,TRANSITION:$s,TRANSITION_END:Ji,get:Cr,getStyle:ts,create:te,remove:_e,empty:on,toFront:es,toBack:Ks,hasClass:Xs,addClass:Gt,removeClass:be,setClass:Zo,getClass:Be,setOpacity:Le,testProp:Mi,setTransform:On,setPosition:Ut,getPosition:ei,get disableTextSelection(){return wn},get enableTextSelection(){return Oi},disableImageDrag:Mr,enableImageDrag:Wo,preventOutline:Pi,restoreOutline:Pn,getSizedParentNode:ns,getScale:Di};function Nt(o,h,_,T){if(h&&typeof h=="object")for(var A in h)Ss(o,A,h[A],_);else{h=M(h);for(var I=0,Z=h.length;I<Z;I++)Ss(o,h[I],_,T)}return this}var ni="_leaflet_events";function ue(o,h,_,T){if(arguments.length===1)hi(o),delete o[ni];else if(h&&typeof h=="object")for(var A in h)fi(o,A,h[A],_);else if(h=M(h),arguments.length===2)hi(o,function(J){return it(h,J)!==-1});else for(var I=0,Z=h.length;I<Z;I++)fi(o,h[I],_,T);return this}function hi(o,h){for(var _ in o[ni]){var T=_.split(/\d/)[0];(!h||h(T))&&fi(o,T,null,null,_)}}var Fn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ss(o,h,_,T){var A=h+m(_)+(T?"_"+m(T):"");if(o[ni]&&o[ni][A])return this;var I=function(J){return _.call(T||o,J||window.event)},Z=I;!Pt.touchNative&&Pt.pointer&&h.indexOf("touch")===0?I=Ge(o,h,I):Pt.touch&&h==="dblclick"?I=Qi(o,I):"addEventListener"in o?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?o.addEventListener(Fn[h]||h,I,Pt.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(I=function(J){J=J||window.event,xs(o,J)&&Z(J)},o.addEventListener(Fn[h],I,!1)):o.addEventListener(h,Z,!1):o.attachEvent("on"+h,I),o[ni]=o[ni]||{},o[ni][A]=I}function fi(o,h,_,T,A){A=A||h+m(_)+(T?"_"+m(T):"");var I=o[ni]&&o[ni][A];if(!I)return this;!Pt.touchNative&&Pt.pointer&&h.indexOf("touch")===0?Go(o,h,I):Pt.touch&&h==="dblclick"?mn(o,I):"removeEventListener"in o?o.removeEventListener(Fn[h]||h,I,!1):o.detachEvent("on"+h,I),o[ni][A]=null}function qn(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function ki(o){return Ss(o,"wheel",qn),this}function As(o){return Nt(o,"mousedown touchstart dblclick contextmenu",qn),o._leaflet_disable_click=!0,this}function Re(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function En(o){return Re(o),qn(o),this}function Ea(o){if(o.composedPath)return o.composedPath();for(var h=[],_=o.target;_;)h.push(_),_=_.parentNode;return h}function tn(o,h){if(!h)return new dt(o.clientX,o.clientY);var _=Di(h),T=_.boundingClientRect;return new dt((o.clientX-T.left)/_.x-h.clientLeft,(o.clientY-T.top)/_.y-h.clientTop)}var de=Pt.linux&&Pt.chrome?window.devicePixelRatio:Pt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Or(o){return Pt.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/de:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function xs(o,h){var _=h.relatedTarget;if(!_)return!0;try{for(;_&&_!==o;)_=_.parentNode}catch{return!1}return _!==o}var $l={__proto__:null,on:Nt,off:ue,stopPropagation:qn,disableScrollPropagation:ki,disableClickPropagation:As,preventDefault:Re,stop:En,getPropagationPath:Ea,getMousePosition:tn,getWheelDelta:Or,isExternalTarget:xs,addListener:Nt,removeListener:ue},Pr=yt.extend({run:function(o,h,_,T){this.stop(),this._el=o,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(T||.5,.2),this._startPos=ei(o),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=H(this._animate,this),this._step()},_step:function(o){var h=+new Date-this._startTime,_=this._duration*1e3;h<_?this._runFrame(this._easeOut(h/_),o):(this._runFrame(1),this._complete())},_runFrame:function(o,h){var _=this._startPos.add(this._offset.multiplyBy(o));h&&_._round(),Ut(this._el,_),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),$t=yt.extend({options:{crs:_s,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,h){h=D(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(wt(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$s&&Pt.any3d&&!Pt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Nt(this._proxy,Ji,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,h,_){if(h=h===void 0?this._zoom:this._limitZoom(h),o=this._limitCenter(wt(o),h,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=r({animate:_.animate},_.zoom),_.pan=r({animate:_.animate,duration:_.duration},_.pan));var T=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,h,_.zoom):this._tryAnimatedPan(o,_.pan);if(T)return clearTimeout(this._sizeTimer),this}return this._resetView(o,h,_.pan&&_.pan.noMoveStart),this},setZoom:function(o,h){return this._loaded?this.setView(this.getCenter(),o,{zoom:h}):(this._zoom=o,this)},zoomIn:function(o,h){return o=o||(Pt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,h)},zoomOut:function(o,h){return o=o||(Pt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,h)},setZoomAround:function(o,h,_){var T=this.getZoomScale(h),A=this.getSize().divideBy(2),I=o instanceof dt?o:this.latLngToContainerPoint(o),Z=I.subtract(A).multiplyBy(1-1/T),J=this.containerPointToLatLng(A.add(Z));return this.setView(J,h,{zoom:_})},_getBoundsCenterZoom:function(o,h){h=h||{},o=o.getBounds?o.getBounds():St(o);var _=B(h.paddingTopLeft||h.padding||[0,0]),T=B(h.paddingBottomRight||h.padding||[0,0]),A=this.getBoundsZoom(o,!1,_.add(T));if(A=typeof h.maxZoom=="number"?Math.min(h.maxZoom,A):A,A===1/0)return{center:o.getCenter(),zoom:A};var I=T.subtract(_).divideBy(2),Z=this.project(o.getSouthWest(),A),J=this.project(o.getNorthEast(),A),at=this.unproject(Z.add(J).divideBy(2).add(I),A);return{center:at,zoom:A}},fitBounds:function(o,h){if(o=St(o),!o.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(o,h);return this.setView(_.center,_.zoom,h)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,h){return this.setView(o,this._zoom,{pan:h})},panBy:function(o,h){if(o=B(o).round(),h=h||{},!o.x&&!o.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Pr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Gt(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,_,h.duration||.25,h.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,h,_){if(_=_||{},_.animate===!1||!Pt.any3d)return this.setView(o,h,_);this._stop();var T=this.project(this.getCenter()),A=this.project(o),I=this.getSize(),Z=this._zoom;o=wt(o),h=h===void 0?Z:h;var J=Math.max(I.x,I.y),at=J*this.getZoomScale(Z,h),vt=A.distanceTo(T)||1,At=1.42,It=At*At;function Ot(Fe){var us=Fe?-1:1,Ps=Fe?at:J,sr=at*at-J*J+us*It*It*vt*vt,Ds=2*Ps*It*vt,ul=sr/Ds,lu=Math.sqrt(ul*ul+1)-ul,cl=lu<1e-9?-18:Math.log(lu);return cl}function Ft(Fe){return(Math.exp(Fe)-Math.exp(-Fe))/2}function Ve(Fe){return(Math.exp(Fe)+Math.exp(-Fe))/2}function Ze(Fe){return Ft(Fe)/Ve(Fe)}var An=Ot(0);function di(Fe){return J*(Ve(An)/Ve(An+At*Fe))}function mf(Fe){return J*(Ve(An)*Ze(An+At*Fe)-Ft(An))/It}function pf(Fe){return 1-Math.pow(1-Fe,1.5)}var ll=Date.now(),Ua=(Ot(1)-An)/At,gf=_.duration?1e3*_.duration:1e3*Ua*.8;function Ha(){var Fe=(Date.now()-ll)/gf,us=pf(Fe)*Ua;Fe<=1?(this._flyToFrame=H(Ha,this),this._move(this.unproject(T.add(A.subtract(T).multiplyBy(mf(us)/vt)),Z),this.getScaleZoom(J/di(us),Z),{flyTo:!0})):this._move(o,h)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),Ha.call(this),this},flyToBounds:function(o,h){var _=this._getBoundsCenterZoom(o,h);return this.flyTo(_.center,_.zoom,h)},setMaxBounds:function(o){return o=St(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var h=this.options.minZoom;return this.options.minZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var h=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,h){this._enforcingBounds=!0;var _=this.getCenter(),T=this._limitCenter(_,this._zoom,St(o));return _.equals(T)||this.panTo(T,h),this._enforcingBounds=!1,this},panInside:function(o,h){h=h||{};var _=B(h.paddingTopLeft||h.padding||[0,0]),T=B(h.paddingBottomRight||h.padding||[0,0]),A=this.project(this.getCenter()),I=this.project(o),Z=this.getPixelBounds(),J=Tt([Z.min.add(_),Z.max.subtract(T)]),at=J.getSize();if(!J.contains(I)){this._enforcingBounds=!0;var vt=I.subtract(J.getCenter()),At=J.extend(I).getSize().subtract(at);A.x+=vt.x<0?-At.x:At.x,A.y+=vt.y<0?-At.y:At.y,this.panTo(this.unproject(A),h),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=r({animate:!1,pan:!0},o===!0?{animate:!0}:o);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),T=h.divideBy(2).round(),A=_.divideBy(2).round(),I=T.subtract(A);return!I.x&&!I.y?this:(o.animate&&o.pan?this.panBy(I):(o.pan&&this._rawPanBy(I),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=r({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=c(this._handleGeolocationResponse,this),_=c(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,_,o):navigator.geolocation.getCurrentPosition(h,_,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var h=o.code,_=o.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var h=o.coords.latitude,_=o.coords.longitude,T=new xt(h,_),A=T.toBounds(o.coords.accuracy*2),I=this._locateOptions;if(I.setView){var Z=this.getBoundsZoom(A);this.setView(T,I.maxZoom?Math.min(Z,I.maxZoom):Z)}var J={latlng:T,bounds:A,timestamp:o.timestamp};for(var at in o.coords)typeof o.coords[at]=="number"&&(J[at]=o.coords[at]);this.fire("locationfound",J)}},addHandler:function(o,h){if(!h)return this;var _=this[o]=new h(this);return this._handlers.push(_),this.options[o]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),_e(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)_e(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,h){var _="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),T=te("div",_,h||this._mapPane);return o&&(this._panes[o]=T),T},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),h=this.unproject(o.getBottomLeft()),_=this.unproject(o.getTopRight());return new _t(h,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,h,_){o=St(o),_=B(_||[0,0]);var T=this.getZoom()||0,A=this.getMinZoom(),I=this.getMaxZoom(),Z=o.getNorthWest(),J=o.getSouthEast(),at=this.getSize().subtract(_),vt=Tt(this.project(J,T),this.project(Z,T)).getSize(),At=Pt.any3d?this.options.zoomSnap:1,It=at.x/vt.x,Ot=at.y/vt.y,Ft=h?Math.max(It,Ot):Math.min(It,Ot);return T=this.getScaleZoom(Ft,T),At&&(T=Math.round(T/(At/100))*(At/100),T=h?Math.ceil(T/At)*At:Math.floor(T/At)*At),Math.max(A,Math.min(I,T))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new dt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,h){var _=this._getTopLeftPoint(o,h);return new ut(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,h){var _=this.options.crs;return h=h===void 0?this._zoom:h,_.scale(o)/_.scale(h)},getScaleZoom:function(o,h){var _=this.options.crs;h=h===void 0?this._zoom:h;var T=_.zoom(o*_.scale(h));return isNaN(T)?1/0:T},project:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(wt(o),h)},unproject:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(B(o),h)},layerPointToLatLng:function(o){var h=B(o).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(o){var h=this.project(wt(o))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(wt(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(St(o))},distance:function(o,h){return this.options.crs.distance(wt(o),wt(h))},containerPointToLayerPoint:function(o){return B(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return B(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var h=this.containerPointToLayerPoint(B(o));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(wt(o)))},mouseEventToContainerPoint:function(o){return tn(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var h=this._container=Cr(o);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Nt(h,"scroll",this._onScroll,this),this._containerId=m(h)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Pt.any3d,Gt(o,"leaflet-container"+(Pt.touch?" leaflet-touch":"")+(Pt.retina?" leaflet-retina":"")+(Pt.ielt9?" leaflet-oldie":"")+(Pt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=ts(o,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ut(this._mapPane,new dt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Gt(o.markerPane,"leaflet-zoom-hide"),Gt(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,h,_){Ut(this._mapPane,new dt(0,0));var T=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var A=this._zoom!==h;this._moveStart(A,_)._move(o,h)._moveEnd(A),this.fire("viewreset"),T&&this.fire("load")},_moveStart:function(o,h){return o&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(o,h,_,T){h===void 0&&(h=this._zoom);var A=this._zoom!==h;return this._zoom=h,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),T?_&&_.pinch&&this.fire("zoom",_):((A||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Ut(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[m(this._container)]=this;var h=o?ue:Nt;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Pt.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=H(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,h){for(var _=[],T,A=h==="mouseout"||h==="mouseover",I=o.target||o.srcElement,Z=!1;I;){if(T=this._targets[m(I)],T&&(h==="click"||h==="preclick")&&this._draggableMoved(T)){Z=!0;break}if(T&&T.listens(h,!0)&&(A&&!xs(I,o)||(_.push(T),A))||I===this._container)break;I=I.parentNode}return!_.length&&!Z&&!A&&this.listens(h,!0)&&(_=[this]),_},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var h=o.target||o.srcElement;if(!(!this._loaded||h._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(h))){var _=o.type;_==="mousedown"&&Pi(h),this._fireDOMEvent(o,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,h,_){if(o.type==="click"){var T=r({},o);T.type="preclick",this._fireDOMEvent(T,T.type,_)}var A=this._findEventTargets(o,h);if(_){for(var I=[],Z=0;Z<_.length;Z++)_[Z].listens(h,!0)&&I.push(_[Z]);A=I.concat(A)}if(A.length){h==="contextmenu"&&Re(o);var J=A[0],at={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var vt=J.getLatLng&&(!J._radius||J._radius<=10);at.containerPoint=vt?this.latLngToContainerPoint(J.getLatLng()):this.mouseEventToContainerPoint(o),at.layerPoint=this.containerPointToLayerPoint(at.containerPoint),at.latlng=vt?J.getLatLng():this.layerPointToLatLng(at.layerPoint)}for(Z=0;Z<A.length;Z++)if(A[Z].fire(h,at,!0),at.originalEvent._stopped||A[Z].options.bubblingMouseEvents===!1&&it(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,h=this._handlers.length;o<h;o++)this._handlers[o].disable()},whenReady:function(o,h){return this._loaded?o.call(h||this,{target:this}):this.on("load",o,h),this},_getMapPanePos:function(){return ei(this._mapPane)||new dt(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,h){var _=o&&h!==void 0?this._getNewPixelOrigin(o,h):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,h){var _=this.getSize()._divideBy(2);return this.project(o,h)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,h,_){var T=this._getNewPixelOrigin(_,h);return this.project(o,h)._subtract(T)},_latLngBoundsToNewLayerBounds:function(o,h,_){var T=this._getNewPixelOrigin(_,h);return Tt([this.project(o.getSouthWest(),h)._subtract(T),this.project(o.getNorthWest(),h)._subtract(T),this.project(o.getSouthEast(),h)._subtract(T),this.project(o.getNorthEast(),h)._subtract(T)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,h,_){if(!_)return o;var T=this.project(o,h),A=this.getSize().divideBy(2),I=new ut(T.subtract(A),T.add(A)),Z=this._getBoundsOffset(I,_,h);return Math.abs(Z.x)<=1&&Math.abs(Z.y)<=1?o:this.unproject(T.add(Z),h)},_limitOffset:function(o,h){if(!h)return o;var _=this.getPixelBounds(),T=new ut(_.min.add(o),_.max.add(o));return o.add(this._getBoundsOffset(T,h))},_getBoundsOffset:function(o,h,_){var T=Tt(this.project(h.getNorthEast(),_),this.project(h.getSouthWest(),_)),A=T.min.subtract(o.min),I=T.max.subtract(o.max),Z=this._rebound(A.x,-I.x),J=this._rebound(A.y,-I.y);return new dt(Z,J)},_rebound:function(o,h){return o+h>0?Math.round(o-h)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(h))},_limitZoom:function(o){var h=this.getMinZoom(),_=this.getMaxZoom(),T=Pt.any3d?this.options.zoomSnap:1;return T&&(o=Math.round(o/T)*T),Math.max(h,Math.min(_,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,h){var _=this._getCenterOffset(o)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,h),!0)},_createAnimProxy:function(){var o=this._proxy=te("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(h){var _=ws,T=this._proxy.style[_];On(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),T===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){_e(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),h=this.getZoom();On(this._proxy,this.project(o,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,h,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var T=this.getZoomScale(h),A=this._getCenterOffset(o)._divideBy(1-1/T);return _.animate!==!0&&!this.getSize().contains(A)?!1:(H(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(o,h,!0)},this),!0)},_animateZoom:function(o,h,_,T){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=h,Gt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:h,noUpdate:T}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function is(o,h){return new $t(o,h)}var pn=Yt.extend({options:{position:"topright"},initialize:function(o){D(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var h=this._map;return h&&h.removeControl(this),this.options.position=o,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var h=this._container=this.onAdd(o),_=this.getPosition(),T=o._controlCorners[_];return Gt(h,"leaflet-control"),_.indexOf("bottom")!==-1?T.insertBefore(h,T.firstChild):T.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(_e(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Sn=function(o){return new pn(o)};$t.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},h="leaflet-",_=this._controlContainer=te("div",h+"control-container",this._container);function T(A,I){var Z=h+A+" "+h+I;o[A+I]=te("div",Z,_)}T("top","left"),T("top","right"),T("bottom","left"),T("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)_e(this._controlCorners[o]);_e(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $o=pn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,h,_,T){return _<T?-1:T<_?1:0}},initialize:function(o,h,_){D(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var T in o)this._addLayer(o[T],T);for(T in h)this._addLayer(h[T],T,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return pn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,h){return this._addLayer(o,h),this._map?this._update():this},addOverlay:function(o,h){return this._addLayer(o,h,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var h=this._getLayer(m(o));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Gt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(Gt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",h=this._container=te("div",o),_=this.options.collapsed;h.setAttribute("aria-haspopup",!0),As(h),ki(h);var T=this._section=te("section",o+"-list");_&&(this._map.on("click",this.collapse,this),Nt(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=te("a",o+"-toggle",h);A.href="#",A.title="Layers",A.setAttribute("role","button"),Nt(A,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){Re(I),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=te("div",o+"-base",T),this._separator=te("div",o+"-separator",T),this._overlaysList=te("div",o+"-overlays",T),h.appendChild(T)},_getLayer:function(o){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&m(this._layers[h].layer)===o)return this._layers[h]},_addLayer:function(o,h,_){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:h,overlay:_}),this.options.sortLayers&&this._layers.sort(c(function(T,A){return this.options.sortFunction(T.layer,A.layer,T.name,A.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;on(this._baseLayersList),on(this._overlaysList),this._layerControlInputs=[];var o,h,_,T,A=0;for(_=0;_<this._layers.length;_++)T=this._layers[_],this._addItem(T),h=h||T.overlay,o=o||!T.overlay,A+=T.overlay?0:1;return this.options.hideSingleBase&&(o=o&&A>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=h&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var h=this._getLayer(m(o.target)),_=h.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;_&&this._map.fire(_,h)},_createRadioElement:function(o,h){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(h?' checked="checked"':"")+"/>",T=document.createElement("div");return T.innerHTML=_,T.firstChild},_addItem:function(o){var h=document.createElement("label"),_=this._map.hasLayer(o.layer),T;o.overlay?(T=document.createElement("input"),T.type="checkbox",T.className="leaflet-control-layers-selector",T.defaultChecked=_):T=this._createRadioElement("leaflet-base-layers_"+m(this),_),this._layerControlInputs.push(T),T.layerId=m(o.layer),Nt(T,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+o.name;var I=document.createElement("span");h.appendChild(I),I.appendChild(T),I.appendChild(A);var Z=o.overlay?this._overlaysList:this._baseLayersList;return Z.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,h,_,T=[],A=[];this._handlingClick=!0;for(var I=o.length-1;I>=0;I--)h=o[I],_=this._getLayer(h.layerId).layer,h.checked?T.push(_):h.checked||A.push(_);for(I=0;I<A.length;I++)this._map.hasLayer(A[I])&&this._map.removeLayer(A[I]);for(I=0;I<T.length;I++)this._map.hasLayer(T[I])||this._map.addLayer(T[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h,_,T=this._map.getZoom(),A=o.length-1;A>=0;A--)h=o[A],_=this._getLayer(h.layerId).layer,h.disabled=_.options.minZoom!==void 0&&T<_.options.minZoom||_.options.maxZoom!==void 0&&T>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,Nt(o,"click",Re),this.expand();var h=this;setTimeout(function(){ue(o,"click",Re),h._preventClick=!1})}}),oc=function(o,h,_){return new $o(o,h,_)},Rs=pn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var h="leaflet-control-zoom",_=te("div",h+" leaflet-bar"),T=this.options;return this._zoomInButton=this._createButton(T.zoomInText,T.zoomInTitle,h+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(T.zoomOutText,T.zoomOutTitle,h+"-out",_,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,h,_,T,A){var I=te("a",_,T);return I.innerHTML=o,I.href="#",I.title=h,I.setAttribute("role","button"),I.setAttribute("aria-label",h),As(I),Nt(I,"click",En),Nt(I,"click",A,this),Nt(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var o=this._map,h="leaflet-disabled";be(this._zoomInButton,h),be(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(Gt(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(Gt(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});$t.mergeOptions({zoomControl:!0}),$t.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Rs,this.addControl(this.zoomControl))});var Sa=function(o){return new Rs(o)},Aa=pn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var h="leaflet-control-scale",_=te("div",h),T=this.options;return this._addScales(T,h+"-line",_),o.on(T.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),_},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,h,_){o.metric&&(this._mScale=te("div",h,_)),o.imperial&&(this._iScale=te("div",h,_))},_update:function(){var o=this._map,h=o.getSize().y/2,_=o.distance(o.containerPointToLatLng([0,h]),o.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(_)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var h=this._getRoundNum(o),_=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,_,h/o)},_updateImperial:function(o){var h=o*3.2808399,_,T,A;h>5280?(_=h/5280,T=this._getRoundNum(_),this._updateScale(this._iScale,T+" mi",T/_)):(A=this._getRoundNum(h),this._updateScale(this._iScale,A+" ft",A/h))},_updateScale:function(o,h,_){o.style.width=Math.round(this.options.maxWidth*_)+"px",o.innerHTML=h},_getRoundNum:function(o){var h=Math.pow(10,(Math.floor(o)+"").length-1),_=o/h;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,h*_}}),xa=function(o){return new Aa(o)},Kl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Js=pn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Pt.inlineSvg?Kl+" ":"")+"Leaflet</a>"},initialize:function(o){D(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=te("div","leaflet-control-attribution"),As(this._container);for(var h in o._layers)o._layers[h].getAttribution&&this.addAttribution(o._layers[h].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var h in this._attributions)this._attributions[h]&&o.push(h);var _=[];this.options.prefix&&_.push(this.options.prefix),o.length&&_.push(o.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});$t.mergeOptions({attributionControl:!0}),$t.addInitHook(function(){this.options.attributionControl&&new Js().addTo(this)});var lc=function(o){return new Js(o)};pn.Layers=$o,pn.Zoom=Rs,pn.Scale=Aa,pn.Attribution=Js,Sn.layers=oc,Sn.zoom=Sa,Sn.scale=xa,Sn.attribution=lc;var Gn=Yt.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Gn.addTo=function(o,h){return o.addHandler(h,this),this};var Dr={Events:tt},Ko=Pt.touch?"touchstart mousedown":"mousedown",Li=yt.extend({options:{clickTolerance:3},initialize:function(o,h,_,T){D(this,T),this._element=o,this._dragStartTarget=h||o,this._preventOutline=_},enable:function(){this._enabled||(Nt(this._dragStartTarget,Ko,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Li._dragging===this&&this.finishDrag(!0),ue(this._dragStartTarget,Ko,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Xs(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Li._dragging===this&&this.finishDrag();return}if(!(Li._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Li._dragging=this,this._preventOutline&&Pi(this._element),Mr(),wn(),!this._moving)){this.fire("down");var h=o.touches?o.touches[0]:o,_=ns(this._element);this._startPoint=new dt(h.clientX,h.clientY),this._startPos=ei(this._element),this._parentScale=Di(_);var T=o.type==="mousedown";Nt(document,T?"mousemove":"touchmove",this._onMove,this),Nt(document,T?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var h=o.touches&&o.touches.length===1?o.touches[0]:o,_=new dt(h.clientX,h.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,Re(o),this._moved||(this.fire("dragstart"),this._moved=!0,Gt(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Gt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Ut(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){be(document.body,"leaflet-dragging"),this._lastTarget&&(be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ue(document,"mousemove touchmove",this._onMove,this),ue(document,"mouseup touchend touchcancel",this._onUp,this),Wo(),Oi();var h=this._moved&&this._moving;this._moving=!1,Li._dragging=!1,h&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Ra(o,h,_){var T,A=[1,4,2,8],I,Z,J,at,vt,At,It,Ot;for(I=0,At=o.length;I<At;I++)o[I]._code=ss(o[I],h);for(J=0;J<4;J++){for(It=A[J],T=[],I=0,At=o.length,Z=At-1;I<At;Z=I++)at=o[I],vt=o[Z],at._code&It?vt._code&It||(Ot=ln(vt,at,It,h,_),Ot._code=ss(Ot,h),T.push(Ot)):(vt._code&It&&(Ot=ln(vt,at,It,h,_),Ot._code=ss(Ot,h),T.push(Ot)),T.push(at));o=T}return o}function tr(o,h){var _,T,A,I,Z,J,at,vt,At;if(!o||o.length===0)throw new Error("latlngs not passed");p(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var It=wt([0,0]),Ot=St(o),Ft=Ot.getNorthWest().distanceTo(Ot.getSouthWest())*Ot.getNorthEast().distanceTo(Ot.getNorthWest());Ft<1700&&(It=Ca(o));var Ve=o.length,Ze=[];for(_=0;_<Ve;_++){var An=wt(o[_]);Ze.push(h.project(wt([An.lat-It.lat,An.lng-It.lng])))}for(J=at=vt=0,_=0,T=Ve-1;_<Ve;T=_++)A=Ze[_],I=Ze[T],Z=A.y*I.x-I.y*A.x,at+=(A.x+I.x)*Z,vt+=(A.y+I.y)*Z,J+=Z*3;J===0?At=Ze[0]:At=[at/J,vt/J];var di=h.unproject(B(At));return wt([di.lat+It.lat,di.lng+It.lng])}function Ca(o){for(var h=0,_=0,T=0,A=0;A<o.length;A++){var I=wt(o[A]);h+=I.lat,_+=I.lng,T++}return wt([h/T,_/T])}var Ia={__proto__:null,clipPolygon:Ra,polygonCenter:tr,centroid:Ca};function Xo(o,h){if(!h||!o.length)return o.slice();var _=h*h;return o=Ql(o,_),o=Xl(o,_),o}function Ma(o,h,_){return Math.sqrt(Zn(o,h,_,!0))}function Cs(o,h,_){return Zn(o,h,_)}function Xl(o,h){var _=o.length,T=typeof Uint8Array<"u"?Uint8Array:Array,A=new T(_);A[0]=A[_-1]=1,Oa(o,A,h,0,_-1);var I,Z=[];for(I=0;I<_;I++)A[I]&&Z.push(o[I]);return Z}function Oa(o,h,_,T,A){var I=0,Z,J,at;for(J=T+1;J<=A-1;J++)at=Zn(o[J],o[T],o[A],!0),at>I&&(Z=J,I=at);I>_&&(h[Z]=1,Oa(o,h,_,T,Z),Oa(o,h,_,Z,A))}function Ql(o,h){for(var _=[o[0]],T=1,A=0,I=o.length;T<I;T++)Jl(o[T],o[A])>h&&(_.push(o[T]),A=T);return A<I-1&&_.push(o[I-1]),_}var Qo;function kr(o,h,_,T,A){var I=T?Qo:ss(o,_),Z=ss(h,_),J,at,vt;for(Qo=Z;;){if(!(I|Z))return[o,h];if(I&Z)return!1;J=I||Z,at=ln(o,h,J,_,A),vt=ss(at,_),J===I?(o=at,I=vt):(h=at,Z=vt)}}function ln(o,h,_,T,A){var I=h.x-o.x,Z=h.y-o.y,J=T.min,at=T.max,vt,At;return _&8?(vt=o.x+I*(at.y-o.y)/Z,At=at.y):_&4?(vt=o.x+I*(J.y-o.y)/Z,At=J.y):_&2?(vt=at.x,At=o.y+Z*(at.x-o.x)/I):_&1&&(vt=J.x,At=o.y+Z*(J.x-o.x)/I),new dt(vt,At,A)}function ss(o,h){var _=0;return o.x<h.min.x?_|=1:o.x>h.max.x&&(_|=2),o.y<h.min.y?_|=4:o.y>h.max.y&&(_|=8),_}function Jl(o,h){var _=h.x-o.x,T=h.y-o.y;return _*_+T*T}function Zn(o,h,_,T){var A=h.x,I=h.y,Z=_.x-A,J=_.y-I,at=Z*Z+J*J,vt;return at>0&&(vt=((o.x-A)*Z+(o.y-I)*J)/at,vt>1?(A=_.x,I=_.y):vt>0&&(A+=Z*vt,I+=J*vt)),Z=o.x-A,J=o.y-I,T?Z*Z+J*J:new dt(A,I)}function p(o){return!Y(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function E(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),p(o)}function x(o,h){var _,T,A,I,Z,J,at,vt;if(!o||o.length===0)throw new Error("latlngs not passed");p(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var At=wt([0,0]),It=St(o),Ot=It.getNorthWest().distanceTo(It.getSouthWest())*It.getNorthEast().distanceTo(It.getNorthWest());Ot<1700&&(At=Ca(o));var Ft=o.length,Ve=[];for(_=0;_<Ft;_++){var Ze=wt(o[_]);Ve.push(h.project(wt([Ze.lat-At.lat,Ze.lng-At.lng])))}for(_=0,T=0;_<Ft-1;_++)T+=Ve[_].distanceTo(Ve[_+1])/2;if(T===0)vt=Ve[0];else for(_=0,I=0;_<Ft-1;_++)if(Z=Ve[_],J=Ve[_+1],A=Z.distanceTo(J),I+=A,I>T){at=(I-T)/A,vt=[J.x-at*(J.x-Z.x),J.y-at*(J.y-Z.y)];break}var An=h.unproject(B(vt));return wt([An.lat+At.lat,An.lng+At.lng])}var k={__proto__:null,simplify:Xo,pointToSegmentDistance:Ma,closestPointOnSegment:Cs,clipSegment:kr,_getEdgeIntersection:ln,_getBitCode:ss,_sqClosestPointOnSegment:Zn,isFlat:p,_flat:E,polylineCenter:x},Q={project:function(o){return new dt(o.lng,o.lat)},unproject:function(o){return new xt(o.y,o.x)},bounds:new ut([-180,-90],[180,90])},ot={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ut([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var h=Math.PI/180,_=this.R,T=o.lat*h,A=this.R_MINOR/_,I=Math.sqrt(1-A*A),Z=I*Math.sin(T),J=Math.tan(Math.PI/4-T/2)/Math.pow((1-Z)/(1+Z),I/2);return T=-_*Math.log(Math.max(J,1e-10)),new dt(o.lng*h*_,T)},unproject:function(o){for(var h=180/Math.PI,_=this.R,T=this.R_MINOR/_,A=Math.sqrt(1-T*T),I=Math.exp(-o.y/_),Z=Math.PI/2-2*Math.atan(I),J=0,at=.1,vt;J<15&&Math.abs(at)>1e-7;J++)vt=A*Math.sin(Z),vt=Math.pow((1-vt)/(1+vt),A/2),at=Math.PI/2-2*Math.atan(I*vt)-Z,Z+=at;return new xt(Z*h,o.x*h/_)}},Et={__proto__:null,LonLat:Q,Mercator:ot,SphericalMercator:Wi},se=r({},le,{code:"EPSG:3395",projection:ot,transformation:function(){var o=.5/(Math.PI*ot.R);return Ai(o,.5,-o,.5)}()}),Xe=r({},le,{code:"EPSG:4326",projection:Q,transformation:Ai(1/180,1,-1/180,.5)}),re=r({},xe,{projection:Q,transformation:Ai(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,h){var _=h.lng-o.lng,T=h.lat-o.lat;return Math.sqrt(_*_+T*T)},infinite:!0});xe.Earth=le,xe.EPSG3395=se,xe.EPSG3857=_s,xe.EPSG900913=wr,xe.EPSG4326=Xe,xe.Simple=re;var ye=yt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[m(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[m(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var h=o.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var _=this.getEvents();h.on(_,this),this.once("remove",function(){h.off(_,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});$t.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var h=m(o);return this._layers[h]?this:(this._layers[h]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var h=m(o);return this._layers[h]?(this._loaded&&o.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return m(o)in this._layers},eachLayer:function(o,h){for(var _ in this._layers)o.call(h,this._layers[_]);return this},_addLayers:function(o){o=o?Y(o)?o:[o]:[];for(var h=0,_=o.length;h<_;h++)this.addLayer(o[h])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[m(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var h=m(o);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,h=-1/0,_=this._getZoomSpan();for(var T in this._zoomBoundLayers){var A=this._zoomBoundLayers[T].options;o=A.minZoom===void 0?o:Math.min(o,A.minZoom),h=A.maxZoom===void 0?h:Math.max(h,A.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=o===1/0?void 0:o,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ne=ye.extend({initialize:function(o,h){D(this,h),this._layers={};var _,T;if(o)for(_=0,T=o.length;_<T;_++)this.addLayer(o[_])},addLayer:function(o){var h=this.getLayerId(o);return this._layers[h]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var h=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(o){var h=typeof o=="number"?o:this.getLayerId(o);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var h=Array.prototype.slice.call(arguments,1),_,T;for(_ in this._layers)T=this._layers[_],T[o]&&T[o].apply(T,h);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,h){for(var _ in this._layers)o.call(h,this._layers[_]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return m(o)}}),Is=function(o,h){return new Ne(o,h)},Oe=Ne.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Ne.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Ne.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new _t;for(var h in this._layers){var _=this._layers[h];o.extend(_.getBounds?_.getBounds():_.getLatLng())}return o}}),rs=function(o,h){return new Oe(o,h)},as=Yt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){D(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,h){var _=this._getIconUrl(o);if(!_){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var T=this._createImg(_,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(T,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),T},_setIconStyles:function(o,h){var _=this.options,T=_[h+"Size"];typeof T=="number"&&(T=[T,T]);var A=B(T),I=B(h==="shadow"&&_.shadowAnchor||_.iconAnchor||A&&A.divideBy(2,!0));o.className="leaflet-marker-"+h+" "+(_.className||""),I&&(o.style.marginLeft=-I.x+"px",o.style.marginTop=-I.y+"px"),A&&(o.style.width=A.x+"px",o.style.height=A.y+"px")},_createImg:function(o,h){return h=h||document.createElement("img"),h.src=o,h},_getIconUrl:function(o){return Pt.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function tu(o){return new as(o)}var Pa=as.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Pa.imagePath!="string"&&(Pa.imagePath=this._detectIconPath()),(this.options.imagePath||Pa.imagePath)+as.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var h=function(_,T,A){var I=T.exec(_);return I&&I[A]};return o=h(o,/^url\((['"])?(.+)\1\)$/,2),o&&h(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=te("div","leaflet-default-icon-path",document.body),h=ts(o,"background-image")||ts(o,"backgroundImage");if(document.body.removeChild(o),h=this._stripUrl(h),h)return h;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),uc=Gn.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Li(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Gt(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var h=this._marker,_=h._map,T=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,I=ei(h._icon),Z=_.getPixelBounds(),J=_.getPixelOrigin(),at=Tt(Z.min._subtract(J).add(A),Z.max._subtract(J).subtract(A));if(!at.contains(I)){var vt=B((Math.max(at.max.x,I.x)-at.max.x)/(Z.max.x-at.max.x)-(Math.min(at.min.x,I.x)-at.min.x)/(Z.min.x-at.min.x),(Math.max(at.max.y,I.y)-at.max.y)/(Z.max.y-at.max.y)-(Math.min(at.min.y,I.y)-at.min.y)/(Z.min.y-at.min.y)).multiplyBy(T);_.panBy(vt,{animate:!1}),this._draggable._newPos._add(vt),this._draggable._startPos._add(vt),Ut(h._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=H(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=H(this._adjustPan.bind(this,o)))},_onDrag:function(o){var h=this._marker,_=h._shadow,T=ei(h._icon),A=h._map.layerPointToLatLng(T);_&&Ut(_,T),h._latlng=A,o.latlng=A,o.oldLatLng=this._oldLatLng,h.fire("move",o).fire("drag",o)},_onDragEnd:function(o){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Da=ye.extend({options:{icon:new Pa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,h){D(this,h),this._latlng=wt(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var h=this._latlng;return this._latlng=wt(o),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=o.icon.createIcon(this._icon),T=!1;_!==this._icon&&(this._icon&&this._removeIcon(),T=!0,o.title&&(_.title=o.title),_.tagName==="IMG"&&(_.alt=o.alt||"")),Gt(_,h),o.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nt(_,"focus",this._panOnFocus,this);var A=o.icon.createShadow(this._shadow),I=!1;A!==this._shadow&&(this._removeShadow(),I=!0),A&&(Gt(A,h),A.alt=""),this._shadow=A,o.opacity<1&&this._updateOpacity(),T&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&I&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ue(this._icon,"focus",this._panOnFocus,this),_e(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&_e(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Ut(this._icon,o),this._shadow&&Ut(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Gt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),uc)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new uc(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Le(this._icon,o),this._shadow&&Le(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var h=this.options.icon.options,_=h.iconSize?B(h.iconSize):B(0,0),T=h.iconAnchor?B(h.iconAnchor):B(0,0);o.panInside(this._latlng,{paddingTopLeft:T,paddingBottomRight:_.subtract(T)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function cc(o,h){return new Da(o,h)}var Ms=ye.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return D(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Jo=Ms.extend({options:{fill:!0,radius:10},initialize:function(o,h){D(this,h),this._latlng=wt(o),this._radius=this.options.radius},setLatLng:function(o){var h=this._latlng;return this._latlng=wt(o),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var h=o&&o.radius||this._radius;return Ms.prototype.setStyle.call(this,o),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,h=this._radiusY||o,_=this._clickTolerance(),T=[o+_,h+_];this._pxBounds=new ut(this._point.subtract(T),this._point.add(T))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function lf(o,h){return new Jo(o,h)}var hc=Jo.extend({initialize:function(o,h,_){if(typeof h=="number"&&(h=r({},_,{radius:h})),D(this,h),this._latlng=wt(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new _t(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Ms.prototype.setStyle,_project:function(){var o=this._latlng.lng,h=this._latlng.lat,_=this._map,T=_.options.crs;if(T.distance===le.distance){var A=Math.PI/180,I=this._mRadius/le.R/A,Z=_.project([h+I,o]),J=_.project([h-I,o]),at=Z.add(J).divideBy(2),vt=_.unproject(at).lat,At=Math.acos((Math.cos(I*A)-Math.sin(h*A)*Math.sin(vt*A))/(Math.cos(h*A)*Math.cos(vt*A)))/A;(isNaN(At)||At===0)&&(At=I/Math.cos(Math.PI/180*h)),this._point=at.subtract(_.getPixelOrigin()),this._radius=isNaN(At)?0:at.x-_.project([vt,o-At]).x,this._radiusY=at.y-Z.y}else{var It=T.unproject(T.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(It).x}this._updateBounds()}});function ap(o,h,_){return new hc(o,h,_)}var Os=Ms.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,h){D(this,h),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var h=1/0,_=null,T=Zn,A,I,Z=0,J=this._parts.length;Z<J;Z++)for(var at=this._parts[Z],vt=1,At=at.length;vt<At;vt++){A=at[vt-1],I=at[vt];var It=T(o,A,I,!0);It<h&&(h=It,_=T(o,A,I))}return _&&(_.distance=Math.sqrt(h)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return x(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,h){return h=h||this._defaultShape(),o=wt(o),h.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new _t,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return p(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var h=[],_=p(o),T=0,A=o.length;T<A;T++)_?(h[T]=wt(o[T]),this._bounds.extend(h[T])):h[T]=this._convertLatLngs(o[T]);return h},_project:function(){var o=new ut;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),h=new dt(o,o);this._rawPxBounds&&(this._pxBounds=new ut([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(o,h,_){var T=o[0]instanceof xt,A=o.length,I,Z;if(T){for(Z=[],I=0;I<A;I++)Z[I]=this._map.latLngToLayerPoint(o[I]),_.extend(Z[I]);h.push(Z)}else for(I=0;I<A;I++)this._projectLatlngs(o[I],h,_)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,_,T,A,I,Z,J,at;for(_=0,A=0,I=this._rings.length;_<I;_++)for(at=this._rings[_],T=0,Z=at.length;T<Z-1;T++)J=kr(at[T],at[T+1],o,T,!0),J&&(h[A]=h[A]||[],h[A].push(J[0]),(J[1]!==at[T+1]||T===Z-2)&&(h[A].push(J[1]),A++))}},_simplifyPoints:function(){for(var o=this._parts,h=this.options.smoothFactor,_=0,T=o.length;_<T;_++)o[_]=Xo(o[_],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,h){var _,T,A,I,Z,J,at=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(_=0,I=this._parts.length;_<I;_++)for(J=this._parts[_],T=0,Z=J.length,A=Z-1;T<Z;A=T++)if(!(!h&&T===0)&&Ma(o,J[A],J[T])<=at)return!0;return!1}});function op(o,h){return new Os(o,h)}Os._flat=E;var ka=Os.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return tr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var h=Os.prototype._convertLatLngs.call(this,o),_=h.length;return _>=2&&h[0]instanceof xt&&h[0].equals(h[_-1])&&h.pop(),h},_setLatLngs:function(o){Os.prototype._setLatLngs.call(this,o),p(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return p(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,h=this.options.weight,_=new dt(h,h);if(o=new ut(o.min.subtract(_),o.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var T=0,A=this._rings.length,I;T<A;T++)I=Ra(this._rings[T],o,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var h=!1,_,T,A,I,Z,J,at,vt;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(I=0,at=this._parts.length;I<at;I++)for(_=this._parts[I],Z=0,vt=_.length,J=vt-1;Z<vt;J=Z++)T=_[Z],A=_[J],T.y>o.y!=A.y>o.y&&o.x<(A.x-T.x)*(o.y-T.y)/(A.y-T.y)+T.x&&(h=!h);return h||Os.prototype._containsPoint.call(this,o,!0)}});function ii(o,h){return new ka(o,h)}var si=Oe.extend({initialize:function(o,h){D(this,h),this._layers={},o&&this.addData(o)},addData:function(o){var h=Y(o)?o:o.features,_,T,A;if(h){for(_=0,T=h.length;_<T;_++)A=h[_],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var I=this.options;if(I.filter&&!I.filter(o))return this;var Z=tl(o,I);return Z?(Z.feature=La(o),Z.defaultOptions=Z.options,this.resetStyle(Z),I.onEachFeature&&I.onEachFeature(o,Z),this.addLayer(Z)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=r({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(h){this._setLayerStyle(h,o)},this)},_setLayerStyle:function(o,h){o.setStyle&&(typeof h=="function"&&(h=h(o.feature)),o.setStyle(h))}});function tl(o,h){var _=o.type==="Feature"?o.geometry:o,T=_?_.coordinates:null,A=[],I=h&&h.pointToLayer,Z=h&&h.coordsToLatLng||eu,J,at,vt,At;if(!T&&!_)return null;switch(_.type){case"Point":return J=Z(T),fc(I,o,J,h);case"MultiPoint":for(vt=0,At=T.length;vt<At;vt++)J=Z(T[vt]),A.push(fc(I,o,J,h));return new Oe(A);case"LineString":case"MultiLineString":return at=el(T,_.type==="LineString"?0:1,Z),new Os(at,h);case"Polygon":case"MultiPolygon":return at=el(T,_.type==="Polygon"?1:2,Z),new ka(at,h);case"GeometryCollection":for(vt=0,At=_.geometries.length;vt<At;vt++){var It=tl({geometry:_.geometries[vt],type:"Feature",properties:o.properties},h);It&&A.push(It)}return new Oe(A);case"FeatureCollection":for(vt=0,At=_.features.length;vt<At;vt++){var Ot=tl(_.features[vt],h);Ot&&A.push(Ot)}return new Oe(A);default:throw new Error("Invalid GeoJSON object.")}}function fc(o,h,_,T){return o?o(h,_):new Da(_,T&&T.markersInheritOptions&&T)}function eu(o){return new xt(o[1],o[0],o[2])}function el(o,h,_){for(var T=[],A=0,I=o.length,Z;A<I;A++)Z=h?el(o[A],h-1,_):(_||eu)(o[A]),T.push(Z);return T}function nl(o,h){return o=wt(o),o.alt!==void 0?[S(o.lng,h),S(o.lat,h),S(o.alt,h)]:[S(o.lng,h),S(o.lat,h)]}function nu(o,h,_,T){for(var A=[],I=0,Z=o.length;I<Z;I++)A.push(h?nu(o[I],p(o[I])?0:h-1,_,T):nl(o[I],T));return!h&&_&&A.length>0&&A.push(A[0].slice()),A}function Ni(o,h){return o.feature?r({},o.feature,{geometry:h}):La(h)}function La(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var Lr={toGeoJSON:function(o){return Ni(this,{type:"Point",coordinates:nl(this.getLatLng(),o)})}};Da.include(Lr),hc.include(Lr),Jo.include(Lr),Os.include({toGeoJSON:function(o){var h=!p(this._latlngs),_=nu(this._latlngs,h?1:0,!1,o);return Ni(this,{type:(h?"Multi":"")+"LineString",coordinates:_})}}),ka.include({toGeoJSON:function(o){var h=!p(this._latlngs),_=h&&!p(this._latlngs[0]),T=nu(this._latlngs,_?2:h?1:0,!0,o);return h||(T=[T]),Ni(this,{type:(_?"Multi":"")+"Polygon",coordinates:T})}}),Ne.include({toMultiPoint:function(o){var h=[];return this.eachLayer(function(_){h.push(_.toGeoJSON(o).geometry.coordinates)}),Ni(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(o){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(o);var _=h==="GeometryCollection",T=[];return this.eachLayer(function(A){if(A.toGeoJSON){var I=A.toGeoJSON(o);if(_)T.push(I.geometry);else{var Z=La(I);Z.type==="FeatureCollection"?T.push.apply(T,Z.features):T.push(Z)}}}),_?Ni(this,{geometries:T,type:"GeometryCollection"}):{type:"FeatureCollection",features:T}}});function iu(o,h){return new si(o,h)}var uf=iu,os=ye.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,h,_){this._url=o,this._bounds=St(h),D(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Gt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){_e(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&es(this._image),this},bringToBack:function(){return this._map&&Ks(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=St(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",h=this._image=o?this._url:te("img");if(Gt(h,"leaflet-image-layer"),this._zoomAnimated&&Gt(h,"leaflet-zoom-animated"),this.options.className&&Gt(h,this.options.className),h.onselectstart=w,h.onmousemove=w,h.onload=c(this.fire,this,"load"),h.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(o){var h=this._map.getZoomScale(o.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;On(this._image,_,h)},_reset:function(){var o=this._image,h=new ut(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=h.getSize();Ut(o,h.min),o.style.width=_.x+"px",o.style.height=_.y+"px"},_updateOpacity:function(){Le(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Na=function(o,h,_){return new os(o,h,_)},su=os.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",h=this._image=o?this._url:te("video");if(Gt(h,"leaflet-image-layer"),this._zoomAnimated&&Gt(h,"leaflet-zoom-animated"),this.options.className&&Gt(h,this.options.className),h.onselectstart=w,h.onmousemove=w,h.onloadeddata=c(this.fire,this,"load"),o){for(var _=h.getElementsByTagName("source"),T=[],A=0;A<_.length;A++)T.push(_[A].src);this._url=_.length>0?T:[h.src];return}Y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var Z=te("source");Z.src=this._url[I],h.appendChild(Z)}}});function cf(o,h,_){return new su(o,h,_)}var er=os.extend({_initImage:function(){var o=this._image=this._url;Gt(o,"leaflet-image-layer"),this._zoomAnimated&&Gt(o,"leaflet-zoom-animated"),this.options.className&&Gt(o,this.options.className),o.onselectstart=w,o.onmousemove=w}});function hf(o,h,_){return new er(o,h,_)}var Vi=ye.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,h){o&&(o instanceof xt||Y(o))?(this._latlng=wt(o),D(this,h)):(D(this,o),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Le(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Le(this._container,1),this.bringToFront(),this.options.interactive&&(Gt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Le(this._container,0),this._removeTimeout=setTimeout(c(_e,void 0,this._container),200)):_e(this._container),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=wt(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&es(this._container),this},bringToBack:function(){return this._map&&Ks(this._container),this},_prepareOpen:function(o){var h=this._source;if(!h._map)return!1;if(h instanceof Oe){h=null;var _=this._source._layers;for(var T in _)if(_[T]._map){h=_[T];break}if(!h)return!1;this._source=h}if(!o)if(h.getCenter)o=h.getCenter();else if(h.getLatLng)o=h.getLatLng();else if(h.getBounds)o=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")o.innerHTML=h;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),h=B(this.options.offset),_=this._getAnchor();this._zoomAnimated?Ut(this._container,o.add(_)):h=h.add(o).add(_);var T=this._containerBottom=-h.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=T+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});$t.include({_initOverlay:function(o,h,_,T){var A=h;return A instanceof o||(A=new o(T).setContent(h)),_&&A.setLatLng(_),A}}),ye.include({_initOverlay:function(o,h,_,T){var A=_;return A instanceof o?(D(A,T),A._source=this):(A=h&&!T?h:new o(T,this),A.setContent(_)),A}});var il=Vi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Vi.prototype.openOn.call(this,o)},onAdd:function(o){Vi.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ms||this._source.on("preclick",qn))},onRemove:function(o){Vi.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ms||this._source.off("preclick",qn))},getEvents:function(){var o=Vi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",h=this._container=te("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=te("div",o+"-content-wrapper",h);if(this._contentNode=te("div",o+"-content",_),As(h),ki(this._contentNode),Nt(h,"contextmenu",qn),this._tipContainer=te("div",o+"-tip-container",h),this._tip=te("div",o+"-tip",this._tipContainer),this.options.closeButton){var T=this._closeButton=te("a",o+"-close-button",h);T.setAttribute("role","button"),T.setAttribute("aria-label","Close popup"),T.href="#close",T.innerHTML='<span aria-hidden="true">&#215;</span>',Nt(T,"click",function(A){Re(A),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,h=o.style;h.width="",h.whiteSpace="nowrap";var _=o.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),h.width=_+1+"px",h.whiteSpace="",h.height="";var T=o.offsetHeight,A=this.options.maxHeight,I="leaflet-popup-scrolled";A&&T>A?(h.height=A+"px",Gt(o,I)):be(o,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),_=this._getAnchor();Ut(this._container,h.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,h=parseInt(ts(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+h,T=this._containerWidth,A=new dt(this._containerLeft,-_-this._containerBottom);A._add(ei(this._container));var I=o.layerPointToContainerPoint(A),Z=B(this.options.autoPanPadding),J=B(this.options.autoPanPaddingTopLeft||Z),at=B(this.options.autoPanPaddingBottomRight||Z),vt=o.getSize(),At=0,It=0;I.x+T+at.x>vt.x&&(At=I.x+T-vt.x+at.x),I.x-At-J.x<0&&(At=I.x-J.x),I.y+_+at.y>vt.y&&(It=I.y+_-vt.y+at.y),I.y-It-J.y<0&&(It=I.y-J.y),(At||It)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([At,It]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),lp=function(o,h){return new il(o,h)};$t.mergeOptions({closePopupOnClick:!0}),$t.include({openPopup:function(o,h,_){return this._initOverlay(il,o,h,_).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),ye.include({bindPopup:function(o,h){return this._popup=this._initOverlay(il,this._popup,o,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Oe||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){En(o);var h=o.layer||o.target;if(this._popup._source===h&&!(h instanceof Ms)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=h,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var ru=Vi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Vi.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Vi.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Vi.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",h=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=te("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var h,_,T=this._map,A=this._container,I=T.latLngToContainerPoint(T.getCenter()),Z=T.layerPointToContainerPoint(o),J=this.options.direction,at=A.offsetWidth,vt=A.offsetHeight,At=B(this.options.offset),It=this._getAnchor();J==="top"?(h=at/2,_=vt):J==="bottom"?(h=at/2,_=0):J==="center"?(h=at/2,_=vt/2):J==="right"?(h=0,_=vt/2):J==="left"?(h=at,_=vt/2):Z.x<I.x?(J="right",h=0,_=vt/2):(J="left",h=at+(At.x+It.x)*2,_=vt/2),o=o.subtract(B(h,_,!0)).add(At).add(It),be(A,"leaflet-tooltip-right"),be(A,"leaflet-tooltip-left"),be(A,"leaflet-tooltip-top"),be(A,"leaflet-tooltip-bottom"),Gt(A,"leaflet-tooltip-"+J),Ut(A,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Le(this._container,o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(h)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),up=function(o,h){return new ru(o,h)};$t.include({openTooltip:function(o,h,_){return this._initOverlay(ru,o,h,_).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),ye.include({bindTooltip:function(o,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ru,this._tooltip,o,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var h=o?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[h](_),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Oe||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&(Nt(h,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),Nt(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var h=o.latlng,_,T;this._tooltip.options.sticky&&o.originalEvent&&(_=this._map.mouseEventToContainerPoint(o.originalEvent),T=this._map.containerPointToLayerPoint(_),h=this._map.layerPointToLatLng(T)),this._tooltip.setLatLng(h)}});var dc=as.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var h=o&&o.tagName==="DIV"?o:document.createElement("div"),_=this.options;if(_.html instanceof Element?(on(h),h.appendChild(_.html)):h.innerHTML=_.html!==!1?_.html:"",_.bgPos){var T=B(_.bgPos);h.style.backgroundPosition=-T.x+"px "+-T.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function ff(o){return new dc(o)}as.Default=Pa;var Nr=ye.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Pt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){D(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),_e(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(es(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ks(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof dt?o:new dt(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var h=this.getPane().children,_=-o(-1/0,1/0),T=0,A=h.length,I;T<A;T++)I=h[T].style.zIndex,h[T]!==this._container&&I&&(_=o(_,+I));isFinite(_)&&(this.options.zIndex=_+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Pt.ielt9){Le(this._container,this.options.opacity);var o=+new Date,h=!1,_=!1;for(var T in this._tiles){var A=this._tiles[T];if(!(!A.current||!A.loaded)){var I=Math.min(1,(o-A.loaded)/200);Le(A.el,I),I<1?h=!0:(A.active?_=!0:this._onOpaqueTile(A),A.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),h&&(G(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=te("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,h=this.options.maxZoom;if(o!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===o?(this._levels[_].el.style.zIndex=h-Math.abs(o-_),this._onUpdateLevel(_)):(_e(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var T=this._levels[o],A=this._map;return T||(T=this._levels[o]={},T.el=te("div","leaflet-tile-container leaflet-zoom-animated",this._container),T.el.style.zIndex=h,T.origin=A.project(A.unproject(A.getPixelOrigin()),o).round(),T.zoom=o,this._setZoomTransform(T,A.getCenter(),A.getZoom()),w(T.el.offsetWidth),this._onCreateLevel(T)),this._level=T,T}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var o,h,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)h=this._tiles[o],h.retain=h.current;for(o in this._tiles)if(h=this._tiles[o],h.current&&!h.active){var T=h.coords;this._retainParent(T.x,T.y,T.z,T.z-5)||this._retainChildren(T.x,T.y,T.z,T.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var h in this._tiles)this._tiles[h].coords.z===o&&this._removeTile(h)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)_e(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,h,_,T){var A=Math.floor(o/2),I=Math.floor(h/2),Z=_-1,J=new dt(+A,+I);J.z=+Z;var at=this._tileCoordsToKey(J),vt=this._tiles[at];return vt&&vt.active?(vt.retain=!0,!0):(vt&&vt.loaded&&(vt.retain=!0),Z>T?this._retainParent(A,I,Z,T):!1)},_retainChildren:function(o,h,_,T){for(var A=2*o;A<2*o+2;A++)for(var I=2*h;I<2*h+2;I++){var Z=new dt(A,I);Z.z=_+1;var J=this._tileCoordsToKey(Z),at=this._tiles[J];if(at&&at.active){at.retain=!0;continue}else at&&at.loaded&&(at.retain=!0);_+1<T&&this._retainChildren(A,I,_+1,T)}},_resetView:function(o){var h=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var h=this.options;return h.minNativeZoom!==void 0&&o<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<o?h.maxNativeZoom:o},_setView:function(o,h,_,T){var A=Math.round(h);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var I=this.options.updateWhenZooming&&A!==this._tileZoom;(!T||I)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(o),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(o,h)},_setZoomTransforms:function(o,h){for(var _ in this._levels)this._setZoomTransform(this._levels[_],o,h)},_setZoomTransform:function(o,h,_){var T=this._map.getZoomScale(_,o.zoom),A=o.origin.multiplyBy(T).subtract(this._map._getNewPixelOrigin(h,_)).round();Pt.any3d?On(o.el,A,T):Ut(o.el,A)},_resetGrid:function(){var o=this._map,h=o.options.crs,_=this._tileSize=this.getTileSize(),T=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,h.wrapLng[0]],T).x/_.x),Math.ceil(o.project([0,h.wrapLng[1]],T).x/_.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([h.wrapLat[0],0],T).y/_.x),Math.ceil(o.project([h.wrapLat[1],0],T).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var h=this._map,_=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),T=h.getZoomScale(_,this._tileZoom),A=h.project(o,this._tileZoom).floor(),I=h.getSize().divideBy(T*2);return new ut(A.subtract(I),A.add(I))},_update:function(o){var h=this._map;if(h){var _=this._clampZoom(h.getZoom());if(o===void 0&&(o=h.getCenter()),this._tileZoom!==void 0){var T=this._getTiledPixelBounds(o),A=this._pxBoundsToTileRange(T),I=A.getCenter(),Z=[],J=this.options.keepBuffer,at=new ut(A.getBottomLeft().subtract([J,-J]),A.getTopRight().add([J,-J]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var vt in this._tiles){var At=this._tiles[vt].coords;(At.z!==this._tileZoom||!at.contains(new dt(At.x,At.y)))&&(this._tiles[vt].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(o,_);return}for(var It=A.min.y;It<=A.max.y;It++)for(var Ot=A.min.x;Ot<=A.max.x;Ot++){var Ft=new dt(Ot,It);if(Ft.z=this._tileZoom,!!this._isValidTile(Ft)){var Ve=this._tiles[this._tileCoordsToKey(Ft)];Ve?Ve.current=!0:Z.push(Ft)}}if(Z.sort(function(An,di){return An.distanceTo(I)-di.distanceTo(I)}),Z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ze=document.createDocumentFragment();for(Ot=0;Ot<Z.length;Ot++)this._addTile(Z[Ot],Ze);this._level.el.appendChild(Ze)}}}},_isValidTile:function(o){var h=this._map.options.crs;if(!h.infinite){var _=this._globalTileRange;if(!h.wrapLng&&(o.x<_.min.x||o.x>_.max.x)||!h.wrapLat&&(o.y<_.min.y||o.y>_.max.y))return!1}if(!this.options.bounds)return!0;var T=this._tileCoordsToBounds(o);return St(this.options.bounds).overlaps(T)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var h=this._map,_=this.getTileSize(),T=o.scaleBy(_),A=T.add(_),I=h.unproject(T,o.z),Z=h.unproject(A,o.z);return[I,Z]},_tileCoordsToBounds:function(o){var h=this._tileCoordsToNwSe(o),_=new _t(h[0],h[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var h=o.split(":"),_=new dt(+h[0],+h[1]);return _.z=+h[2],_},_removeTile:function(o){var h=this._tiles[o];h&&(_e(h.el),delete this._tiles[o],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){Gt(o,"leaflet-tile");var h=this.getTileSize();o.style.width=h.x+"px",o.style.height=h.y+"px",o.onselectstart=w,o.onmousemove=w,Pt.ielt9&&this.options.opacity<1&&Le(o,this.options.opacity)},_addTile:function(o,h){var _=this._getTilePos(o),T=this._tileCoordsToKey(o),A=this.createTile(this._wrapCoords(o),c(this._tileReady,this,o));this._initTile(A),this.createTile.length<2&&H(c(this._tileReady,this,o,null,A)),Ut(A,_),this._tiles[T]={el:A,coords:o,current:!0},h.appendChild(A),this.fire("tileloadstart",{tile:A,coords:o})},_tileReady:function(o,h,_){h&&this.fire("tileerror",{error:h,tile:_,coords:o});var T=this._tileCoordsToKey(o);_=this._tiles[T],_&&(_.loaded=+new Date,this._map._fadeAnimated?(Le(_.el,0),G(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),h||(Gt(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Pt.ielt9||!this._map._fadeAnimated?H(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var h=new dt(this._wrapX?b(o.x,this._wrapX):o.x,this._wrapY?b(o.y,this._wrapY):o.y);return h.z=o.z,h},_pxBoundsToTileRange:function(o){var h=this.getTileSize();return new ut(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function zi(o){return new Nr(o)}var Vr=Nr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,h){this._url=o,h=D(this,h),h.detectRetina&&Pt.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,h){return this._url===o&&h===void 0&&(h=!0),this._url=o,h||this.redraw(),this},createTile:function(o,h){var _=document.createElement("img");return Nt(_,"load",c(this._tileOnLoad,this,h,_)),Nt(_,"error",c(this._tileOnError,this,h,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(o),_},getTileUrl:function(o){var h={r:Pt.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-o.y;this.options.tms&&(h.y=_),h["-y"]=_}return q(this._url,r(h,this.options))},_tileOnLoad:function(o,h){Pt.ielt9?setTimeout(c(o,this,null,h),0):o(null,h)},_tileOnError:function(o,h,_){var T=this.options.errorTileUrl;T&&h.getAttribute("src")!==T&&(h.src=T),o(_,h)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,h=this.options.maxZoom,_=this.options.zoomReverse,T=this.options.zoomOffset;return _&&(o=h-o),o+T},_getSubdomain:function(o){var h=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var o,h;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(h=this._tiles[o].el,h.onload=w,h.onerror=w,!h.complete)){h.src=lt;var _=this._tiles[o].coords;_e(h),delete this._tiles[o],this.fire("tileabort",{tile:h,coords:_})}},_removeTile:function(o){var h=this._tiles[o];if(h)return h.el.setAttribute("src",lt),Nr.prototype._removeTile.call(this,o)},_tileReady:function(o,h,_){if(!(!this._map||_&&_.getAttribute("src")===lt))return Nr.prototype._tileReady.call(this,o,h,_)}});function ri(o,h){return new Vr(o,h)}var ai=Vr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,h){this._url=o;var _=r({},this.defaultWmsParams);for(var T in h)T in this.options||(_[T]=h[T]);h=D(this,h);var A=h.detectRetina&&Pt.retina?2:1,I=this.getTileSize();_.width=I.x*A,_.height=I.y*A,this.wmsParams=_},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Vr.prototype.onAdd.call(this,o)},getTileUrl:function(o){var h=this._tileCoordsToNwSe(o),_=this._crs,T=Tt(_.project(h[0]),_.project(h[1])),A=T.min,I=T.max,Z=(this._wmsVersion>=1.3&&this._crs===Xe?[A.y,A.x,I.y,I.x]:[A.x,A.y,I.x,I.y]).join(","),J=Vr.prototype.getTileUrl.call(this,o);return J+N(this.wmsParams,J,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Z},setParams:function(o,h){return r(this.wmsParams,o),h||this.redraw(),this}});function Va(o,h){return new ai(o,h)}Vr.WMS=ai,ri.wms=Va;var Bi=ye.extend({options:{padding:.1},initialize:function(o){D(this,o),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Gt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,h){var _=this._map.getZoomScale(h,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,h),I=T.multiplyBy(-_).add(A).subtract(this._map._getNewPixelOrigin(o,h));Pt.any3d?On(this._container,I,_):Ut(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,h=this._map.getSize(),_=this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();this._bounds=new ut(_,_.add(h.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sl=Bi.extend({options:{tolerance:0},getEvents:function(){var o=Bi.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");Nt(o,"mousemove",this._onMouseMove,this),Nt(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Nt(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,_e(this._container),ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var h in this._layers)o=this._layers[h],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var o=this._bounds,h=this._container,_=o.getSize(),T=Pt.retina?2:1;Ut(h,o.min),h.width=T*_.x,h.height=T*_.y,h.style.width=_.x+"px",h.style.height=_.y+"px",Pt.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Bi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[m(o)]=o;var h=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var h=o._order,_=h.next,T=h.prev;_?_.prev=T:this._drawLast=T,T?T.next=_:this._drawFirst=_,delete o._order,delete this._layers[m(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var h=o.options.dashArray.split(/[, ]+/),_=[],T,A;for(A=0;A<h.length;A++){if(T=Number(h[A]),isNaN(T))return;_.push(T)}o.options._dashArray=_}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||H(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var h=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ut,this._redrawBounds.extend(o._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(o._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var h=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,h=this._redrawBounds;if(this._ctx.save(),h){var _=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var T=this._drawFirst;T;T=T.next)o=T.layer,(!h||o._pxBounds&&o._pxBounds.intersects(h))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,h){if(this._drawing){var _,T,A,I,Z=o._parts,J=Z.length,at=this._ctx;if(J){for(at.beginPath(),_=0;_<J;_++){for(T=0,A=Z[_].length;T<A;T++)I=Z[_][T],at[T?"lineTo":"moveTo"](I.x,I.y);h&&at.closePath()}this._fillStroke(at,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var h=o._point,_=this._ctx,T=Math.max(Math.round(o._radius),1),A=(Math.max(Math.round(o._radiusY),1)||T)/T;A!==1&&(_.save(),_.scale(1,A)),_.beginPath(),_.arc(h.x,h.y/A,T,0,Math.PI*2,!1),A!==1&&_.restore(),this._fillStroke(_,o)}},_fillStroke:function(o,h){var _=h.options;_.fill&&(o.globalAlpha=_.fillOpacity,o.fillStyle=_.fillColor||_.color,o.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(o.setLineDash&&o.setLineDash(h.options&&h.options._dashArray||[]),o.globalAlpha=_.opacity,o.lineWidth=_.weight,o.strokeStyle=_.color,o.lineCap=_.lineCap,o.lineJoin=_.lineJoin,o.stroke())},_onClick:function(o){for(var h=this._map.mouseEventToLayerPoint(o),_,T,A=this._drawFirst;A;A=A.next)_=A.layer,_.options.interactive&&_._containsPoint(h)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(_))&&(T=_);this._fireEvent(T?[T]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,h)}},_handleMouseOut:function(o){var h=this._hoveredLayer;h&&(be(this._container,"leaflet-interactive"),this._fireEvent([h],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,h){if(!this._mouseHoverThrottled){for(var _,T,A=this._drawFirst;A;A=A.next)_=A.layer,_.options.interactive&&_._containsPoint(h)&&(T=_);T!==this._hoveredLayer&&(this._handleMouseOut(o),T&&(Gt(this._container,"leaflet-interactive"),this._fireEvent([T],o,"mouseover"),this._hoveredLayer=T)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,h,_){this._map._fireDOMEvent(h,_||h.type,o)},_bringToFront:function(o){var h=o._order;if(h){var _=h.next,T=h.prev;if(_)_.prev=T;else return;T?T.next=_:_&&(this._drawFirst=_),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(o)}},_bringToBack:function(o){var h=o._order;if(h){var _=h.next,T=h.prev;if(T)T.next=_;else return;_?_.prev=T:T&&(this._drawLast=T),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(o)}}});function rl(o){return Pt.canvas?new sl(o):null}var zr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),za={_initContainer:function(){this._container=te("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bi.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var h=o._container=zr("shape");Gt(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",o._path=zr("path"),h.appendChild(o._path),this._updateStyle(o),this._layers[m(o)]=o},_addPath:function(o){var h=o._container;this._container.appendChild(h),o.options.interactive&&o.addInteractiveTarget(h)},_removePath:function(o){var h=o._container;_e(h),o.removeInteractiveTarget(h),delete this._layers[m(o)]},_updateStyle:function(o){var h=o._stroke,_=o._fill,T=o.options,A=o._container;A.stroked=!!T.stroke,A.filled=!!T.fill,T.stroke?(h||(h=o._stroke=zr("stroke")),A.appendChild(h),h.weight=T.weight+"px",h.color=T.color,h.opacity=T.opacity,T.dashArray?h.dashStyle=Y(T.dashArray)?T.dashArray.join(" "):T.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=T.lineCap.replace("butt","flat"),h.joinstyle=T.lineJoin):h&&(A.removeChild(h),o._stroke=null),T.fill?(_||(_=o._fill=zr("fill")),A.appendChild(_),_.color=T.fillColor||T.color,_.opacity=T.fillOpacity):_&&(A.removeChild(_),o._fill=null)},_updateCircle:function(o){var h=o._point.round(),_=Math.round(o._radius),T=Math.round(o._radiusY||_);this._setPath(o,o._empty()?"M0 0":"AL "+h.x+","+h.y+" "+_+","+T+" 0,"+65535*360)},_setPath:function(o,h){o._path.v=h},_bringToFront:function(o){es(o._container)},_bringToBack:function(o){Ks(o._container)}},al=Pt.vml?zr:ma,nr=Bi.extend({_initContainer:function(){this._container=al("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=al("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){_e(this._container),ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var o=this._bounds,h=o.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,_.setAttribute("width",h.x),_.setAttribute("height",h.y)),Ut(_,o.min),_.setAttribute("viewBox",[o.min.x,o.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(o){var h=o._path=al("path");o.options.className&&Gt(h,o.options.className),o.options.interactive&&Gt(h,"leaflet-interactive"),this._updateStyle(o),this._layers[m(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){_e(o._path),o.removeInteractiveTarget(o._path),delete this._layers[m(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var h=o._path,_=o.options;h&&(_.stroke?(h.setAttribute("stroke",_.color),h.setAttribute("stroke-opacity",_.opacity),h.setAttribute("stroke-width",_.weight),h.setAttribute("stroke-linecap",_.lineCap),h.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?h.setAttribute("stroke-dasharray",_.dashArray):h.removeAttribute("stroke-dasharray"),_.dashOffset?h.setAttribute("stroke-dashoffset",_.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),_.fill?(h.setAttribute("fill",_.fillColor||_.color),h.setAttribute("fill-opacity",_.fillOpacity),h.setAttribute("fill-rule",_.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(o,h){this._setPath(o,No(o._parts,h))},_updateCircle:function(o){var h=o._point,_=Math.max(Math.round(o._radius),1),T=Math.max(Math.round(o._radiusY),1)||_,A="a"+_+","+T+" 0 1,0 ",I=o._empty()?"M0 0":"M"+(h.x-_)+","+h.y+A+_*2+",0 "+A+-_*2+",0 ";this._setPath(o,I)},_setPath:function(o,h){o._path.setAttribute("d",h)},_bringToFront:function(o){es(o._path)},_bringToBack:function(o){Ks(o._path)}});Pt.vml&&nr.include(za);function Br(o){return Pt.svg||Pt.vml?new nr(o):null}$t.include({getRenderer:function(o){var h=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var h=this._paneRenderers[o];return h===void 0&&(h=this._createRenderer({pane:o}),this._paneRenderers[o]=h),h},_createRenderer:function(o){return this.options.preferCanvas&&rl(o)||Br(o)}});var df=ka.extend({initialize:function(o,h){ka.prototype.initialize.call(this,this._boundsToLatLngs(o),h)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=St(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function oi(o,h){return new df(o,h)}nr.create=al,nr.pointsToPath=No,si.geometryToLayer=tl,si.coordsToLatLng=eu,si.coordsToLatLngs=el,si.latLngToCoords=nl,si.latLngsToCoords=nu,si.getFeature=Ni,si.asFeature=La,$t.mergeOptions({boxZoom:!0});var au=Gn.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){Nt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){_e(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),wn(),Mr(),this._startPoint=this._map.mouseEventToContainerPoint(o),Nt(document,{contextmenu:En,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=te("div","leaflet-zoom-box",this._container),Gt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var h=new ut(this._point,this._startPoint),_=h.getSize();Ut(this._box,h.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(_e(this._box),be(this._container,"leaflet-crosshair")),Oi(),Wo(),ue(document,{contextmenu:En,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var h=new _t(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});$t.addInitHook("addHandler","boxZoom",au),$t.mergeOptions({doubleClickZoom:!0});var ls=Gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var h=this._map,_=h.getZoom(),T=h.options.zoomDelta,A=o.originalEvent.shiftKey?_-T:_+T;h.options.doubleClickZoom==="center"?h.setZoom(A):h.setZoomAround(o.containerPoint,A)}});$t.addInitHook("addHandler","doubleClickZoom",ls),$t.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mc=Gn.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Li(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}Gt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){be(this._map._container,"leaflet-grab"),be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=St(this._map.options.maxBounds);this._offsetLimit=Tt(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var h=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(h),this._prunePositions(h)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,h){return o-(o-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;o.x<h.min.x&&(o.x=this._viscousLimit(o.x,h.min.x)),o.y<h.min.y&&(o.y=this._viscousLimit(o.y,h.min.y)),o.x>h.max.x&&(o.x=this._viscousLimit(o.x,h.max.x)),o.y>h.max.y&&(o.y=this._viscousLimit(o.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,h=Math.round(o/2),_=this._initialWorldOffset,T=this._draggable._newPos.x,A=(T-h+_)%o+h-_,I=(T+h+_)%o-h-_,Z=Math.abs(A+_)<Math.abs(I+_)?A:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Z},_onDragEnd:function(o){var h=this._map,_=h.options,T=!_.inertia||o.noInertia||this._times.length<2;if(h.fire("dragend",o),T)h.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,Z=_.easeLinearity,J=A.multiplyBy(Z/I),at=J.distanceTo([0,0]),vt=Math.min(_.inertiaMaxSpeed,at),At=J.multiplyBy(vt/at),It=vt/(_.inertiaDeceleration*Z),Ot=At.multiplyBy(-It/2).round();!Ot.x&&!Ot.y?h.fire("moveend"):(Ot=h._limitOffset(Ot,h.options.maxBounds),H(function(){h.panBy(Ot,{duration:It,easeLinearity:Z,noMoveStart:!0,animate:!0})}))}}});$t.addInitHook("addHandler","dragging",mc),$t.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ol=Gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),Nt(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,h=document.documentElement,_=o.scrollTop||h.scrollTop,T=o.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(T,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var h=this._panKeys={},_=this.keyCodes,T,A;for(T=0,A=_.left.length;T<A;T++)h[_.left[T]]=[-1*o,0];for(T=0,A=_.right.length;T<A;T++)h[_.right[T]]=[o,0];for(T=0,A=_.down.length;T<A;T++)h[_.down[T]]=[0,o];for(T=0,A=_.up.length;T<A;T++)h[_.up[T]]=[0,-1*o]},_setZoomDelta:function(o){var h=this._zoomKeys={},_=this.keyCodes,T,A;for(T=0,A=_.zoomIn.length;T<A;T++)h[_.zoomIn[T]]=o;for(T=0,A=_.zoomOut.length;T<A;T++)h[_.zoomOut[T]]=-o},_addHooks:function(){Nt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var h=o.keyCode,_=this._map,T;if(h in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(T=this._panKeys[h],o.shiftKey&&(T=B(T).multiplyBy(3)),_.options.maxBounds&&(T=_._limitOffset(B(T),_.options.maxBounds)),_.options.worldCopyJump){var A=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(T)));_.panTo(A)}else _.panBy(T)}else if(h in this._zoomKeys)_.setZoom(_.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;En(o)}}});$t.addInitHook("addHandler","keyboard",ol),$t.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ir=Gn.extend({addHooks:function(){Nt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var h=Or(o),_=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var T=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),T),En(o)},_performZoom:function(){var o=this._map,h=o.getZoom(),_=this._map.options.zoomSnap||0;o._stop();var T=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(T))))/Math.LN2,I=_?Math.ceil(A/_)*_:A,Z=o._limitZoom(h+(this._delta>0?I:-I))-h;this._delta=0,this._startTime=null,Z&&(o.options.scrollWheelZoom==="center"?o.setZoom(h+Z):o.setZoomAround(this._lastMousePos,h+Z))}});$t.addInitHook("addHandler","scrollWheelZoom",ir);var pc=600;$t.mergeOptions({tapHold:Pt.touchNative&&Pt.safari&&Pt.mobile,tapTolerance:15});var ou=Gn.extend({addHooks:function(){Nt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var h=o.touches[0];this._startPos=this._newPos=new dt(h.clientX,h.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(Nt(document,"touchend",Re),Nt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),pc),Nt(document,"touchend touchcancel contextmenu",this._cancel,this),Nt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){ue(document,"touchend",Re),ue(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),ue(document,"touchend touchcancel contextmenu",this._cancel,this),ue(document,"touchmove",this._onMove,this)},_onMove:function(o){var h=o.touches[0];this._newPos=new dt(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,h){var _=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});_._simulated=!0,h.target.dispatchEvent(_)}});$t.addInitHook("addHandler","tapHold",ou),$t.mergeOptions({touchZoom:Pt.touch,bounceAtZoomLimits:!0});var Ur=Gn.extend({addHooks:function(){Gt(this._map._container,"leaflet-touch-zoom"),Nt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){be(this._map._container,"leaflet-touch-zoom"),ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var h=this._map;if(!(!o.touches||o.touches.length!==2||h._animatingZoom||this._zooming)){var _=h.mouseEventToContainerPoint(o.touches[0]),T=h.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(_.add(T)._divideBy(2))),this._startDist=_.distanceTo(T),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),Nt(document,"touchmove",this._onTouchMove,this),Nt(document,"touchend touchcancel",this._onTouchEnd,this),Re(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var h=this._map,_=h.mouseEventToContainerPoint(o.touches[0]),T=h.mouseEventToContainerPoint(o.touches[1]),A=_.distanceTo(T)/this._startDist;if(this._zoom=h.getScaleZoom(A,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&A<1||this._zoom>h.getMaxZoom()&&A>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var I=_._add(T)._divideBy(2)._subtract(this._centerPoint);if(A===1&&I.x===0&&I.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var Z=c(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=H(Z,this,!0),Re(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),ue(document,"touchmove",this._onTouchMove,this),ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});$t.addInitHook("addHandler","touchZoom",Ur),$t.BoxZoom=au,$t.DoubleClickZoom=ls,$t.Drag=mc,$t.Keyboard=ol,$t.ScrollWheelZoom=ir,$t.TapHold=ou,$t.TouchZoom=Ur,e.Bounds=ut,e.Browser=Pt,e.CRS=xe,e.Canvas=sl,e.Circle=hc,e.CircleMarker=Jo,e.Class=Yt,e.Control=pn,e.DivIcon=dc,e.DivOverlay=Vi,e.DomEvent=$l,e.DomUtil=Yo,e.Draggable=Li,e.Evented=yt,e.FeatureGroup=Oe,e.GeoJSON=si,e.GridLayer=Nr,e.Handler=Gn,e.Icon=as,e.ImageOverlay=os,e.LatLng=xt,e.LatLngBounds=_t,e.Layer=ye,e.LayerGroup=Ne,e.LineUtil=k,e.Map=$t,e.Marker=Da,e.Mixin=Dr,e.Path=Ms,e.Point=dt,e.PolyUtil=Ia,e.Polygon=ka,e.Polyline=Os,e.Popup=il,e.PosAnimation=Pr,e.Projection=Et,e.Rectangle=df,e.Renderer=Bi,e.SVG=nr,e.SVGOverlay=er,e.TileLayer=Vr,e.Tooltip=ru,e.Transformation=Si,e.Util=F,e.VideoOverlay=su,e.bind=c,e.bounds=Tt,e.canvas=rl,e.circle=ap,e.circleMarker=lf,e.control=Sn,e.divIcon=ff,e.extend=r,e.featureGroup=rs,e.geoJSON=iu,e.geoJson=uf,e.gridLayer=zi,e.icon=tu,e.imageOverlay=Na,e.latLng=wt,e.latLngBounds=St,e.layerGroup=Is,e.map=is,e.marker=cc,e.point=B,e.polygon=ii,e.polyline=op,e.popup=lp,e.rectangle=oi,e.setOptions=D,e.stamp=m,e.svg=Br,e.svgOverlay=hf,e.tileLayer=ri,e.tooltip=up,e.transformation=Ai,e.version=i,e.videoOverlay=cf;var Ba=window.L;e.noConflict=function(){return window.L=Ba,this},window.L=e})}(sh,sh.exports)),sh.exports}var Yh=G2();const $S=ey(Yh);function cy(n,t,e){return Object.freeze({instance:n,context:t,container:e})}function hy(n,t){return t==null?function(i,r){const l=K.useRef(void 0);return l.current||(l.current=n(i,r)),l}:function(i,r){const l=K.useRef(void 0);l.current||(l.current=n(i,r));const c=K.useRef(i),{instance:d}=l.current;return K.useEffect(function(){c.current!==i&&(t(d,i,c.current),c.current=i)},[d,i,t]),l}}function Z2(n,t){K.useEffect(function(){return(t.layerContainer??t.map).addLayer(n.instance),function(){var l;(l=t.layerContainer)==null||l.removeLayer(n.instance),t.map.removeLayer(n.instance)}},[t,n])}function KS(n){return function(e){const i=WS(),r=n(uy(e,i),i);return ZS(i.map,e.attribution),YS(r.current,e.eventHandlers),Z2(r.current,i),r}}function W2(n,t){const e=hy(n,t),i=KS(e);return U2(i)}function Y2(n,t){const e=hy(n),i=F2(e,t);return H2(i)}function $2(n,t){const e=hy(n,t),i=KS(e);return j2(i)}function K2(n,t,e){const{opacity:i,zIndex:r}=t;i!=null&&i!==e.opacity&&n.setOpacity(i),r!=null&&r!==e.zIndex&&n.setZIndex(r)}function X2({bounds:n,boundsOptions:t,center:e,children:i,className:r,id:l,placeholder:c,style:d,whenReady:m,zoom:g,...b},w){const[S]=K.useState({className:r,id:l,style:d}),[C,M]=K.useState(null),D=K.useRef(void 0);K.useImperativeHandle(w,()=>(C==null?void 0:C.map)??null,[C]);const N=K.useCallback(q=>{if(q!==null&&!D.current){const Y=new Yh.Map(q,b);D.current=Y,e!=null&&g!=null?Y.setView(e,g):n!=null&&Y.fitBounds(n,t),m!=null&&Y.whenReady(m),M(z2(Y))}},[]);K.useEffect(()=>()=>{C==null||C.map.remove()},[C]);const j=C?ge.createElement(ly,{value:C},i):c??null;return ge.createElement("div",{...S,ref:N},j)}const Q2=K.forwardRef(X2),J2=W2(function({position:t,...e},i){const r=new Yh.Marker(t,e);return cy(r,B2(i,{overlayContainer:r}))},function(t,e,i){e.position!==i.position&&t.setLatLng(e.position),e.icon!=null&&e.icon!==i.icon&&t.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==i.opacity&&t.setOpacity(e.opacity),t.dragging!=null&&e.draggable!==i.draggable&&(e.draggable===!0?t.dragging.enable():t.dragging.disable())}),tM=Y2(function(t,e){const i=new Yh.Popup(t,e.overlayContainer);return cy(i,e)},function(t,e,{position:i},r){K.useEffect(function(){const{instance:c}=t;function d(g){g.popup===c&&(c.update(),r(!0))}function m(g){g.popup===c&&r(!1)}return e.map.on({popupopen:d,popupclose:m}),e.overlayContainer==null?(i!=null&&c.setLatLng(i),c.openOn(e.map)):e.overlayContainer.bindPopup(c),function(){var b;e.map.off({popupopen:d,popupclose:m}),(b=e.overlayContainer)==null||b.unbindPopup(),e.map.removeLayer(c)}},[t,e,r,i])}),eM=$2(function({url:t,...e},i){const r=new Yh.TileLayer(t,uy(e,i));return cy(r,i)},function(t,e,i){K2(t,e,i);const{url:r}=e;r!=null&&r!==i.url&&t.setUrl(r)}),nM=()=>{};var kT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},iM=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[e++];t[i++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[e++],c=n[e++],d=n[e++],m=((r&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[e++],c=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return t.join("")},QS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,d=c?n[r+1]:0,m=r+2<n.length,g=m?n[r+2]:0,b=l>>2,w=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,C=g&63;m||(C=64,c||(S=64)),i.push(e[b],e[w],e[S],e[C])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(XS(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):iM(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const l=e[n.charAt(r++)],d=r<n.length?e[n.charAt(r)]:0;++r;const g=r<n.length?e[n.charAt(r)]:64;++r;const w=r<n.length?e[n.charAt(r)]:64;if(++r,l==null||d==null||g==null||w==null)throw new sM;const S=l<<2|d>>4;if(i.push(S),g!==64){const C=d<<4&240|g>>2;if(i.push(C),w!==64){const M=g<<6&192|w;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class sM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rM=function(n){const t=XS(n);return QS.encodeByteArray(t,!0)},Zd=function(n){return rM(n).replace(/\./g,"")},JS=function(n){try{return QS.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=()=>aM().__FIREBASE_DEFAULTS__,lM=()=>{if(typeof process>"u"||typeof kT>"u")return;const n=kT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&JS(n[1]);return t&&JSON.parse(t)},Rm=()=>{try{return nM()||oM()||lM()||uM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},t1=n=>{var t,e;return(e=(t=Rm())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},cM=n=>{const t=t1(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},e1=()=>{var n;return(n=Rm())===null||n===void 0?void 0:n.config},n1=n=>{var t;return(t=Rm())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(n){return n.endsWith(".cloudworkstations.dev")}async function i1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Zd(JSON.stringify(e)),Zd(JSON.stringify(c)),""].join(".")}const ph={};function dM(){const n={prod:[],emulator:[]};for(const t of Object.keys(ph))ph[t]?n.emulator.push(t):n.prod.push(t);return n}function mM(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let LT=!1;function s1(n,t){if(typeof window>"u"||typeof document>"u"||!Qu(window.location.host)||ph[n]===t||ph[n]||LT)return;ph[n]=t;function e(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=dM().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,C){S.setAttribute("width","24"),S.setAttribute("id",C),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{LT=!0,c()},S}function b(S,C){S.setAttribute("id",C),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function w(){const S=mM(i),C=e("text"),M=document.getElementById(C)||document.createElement("span"),D=e("learnmore"),N=document.getElementById(D)||document.createElement("a"),j=e("preprendIcon"),q=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Y=S.element;d(Y),b(N,D);const it=g();m(q,j),Y.append(q,M,N,it),document.body.appendChild(Y)}l?(M.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function gM(){var n;const t=(n=Rm())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _M(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fy(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vM(){const n=Jn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function bM(){return!gM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dy(){try{return typeof indexedDB=="object"}catch{return!1}}function my(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var l;t(((l=r.error)===null||l===void 0?void 0:l.message)||"")}}catch(e){t(e)}})}function r1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="FirebaseError";class Fs extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=TM,Object.setPrototypeOf(this,Fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zl.prototype.create)}}class zl{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,l=this.errors[t],c=l?wM(l,i):"Error",d=`${this.serviceName}: ${c} (${r}).`;return new Fs(r,d,i)}}function wM(n,t){return n.replace(EM,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const EM=/\{\$([^}]+)}/g;function SM(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function xo(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const l=n[r],c=t[r];if(NT(l)&&NT(c)){if(!xo(l,c))return!1}else if(l!==c)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function NT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function AM(n,t){const e=new xM(n,t);return e.subscribe.bind(e)}class xM{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");RM(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=qg),r.error===void 0&&(r.error=qg),r.complete===void 0&&(r.complete=qg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RM(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function qg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=1e3,IM=2,MM=4*60*60*1e3,OM=.5;function VT(n,t=CM,e=IM){const i=t*Math.pow(e,n),r=Math.round(OM*i*(Math.random()-.5)*2);return Math.min(MM,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(n){return n&&n._delegate?n._delegate:n}class Us{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new hM;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(kM(t))try{this.getOrInitializeService({instanceIdentifier:wl})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:r});i.resolve(l)}catch{}}}}clearInstance(t=wl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=wl){return this.instances.has(t)}getOptions(t=wl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(r)}return r}onInit(t,e){var i;const r=this.normalizeInstanceIdentifier(e),l=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;l.add(t),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&t(c,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:DM(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=wl){return this.component?this.component.multipleInstances?t:wl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DM(n){return n===wl?void 0:n}function kM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new PM(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ae||(ae={}));const NM={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},VM=ae.INFO,zM={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},BM=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=zM[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Cm{constructor(t){this.name=t,this._logLevel=VM,this._logHandler=BM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ae))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?NM[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...t),this._logHandler(this,ae.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...t),this._logHandler(this,ae.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...t),this._logHandler(this,ae.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...t),this._logHandler(this,ae.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...t),this._logHandler(this,ae.ERROR,...t)}}const UM=(n,t)=>t.some(e=>n instanceof e);let zT,BT;function HM(){return zT||(zT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jM(){return BT||(BT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a1=new WeakMap,p_=new WeakMap,o1=new WeakMap,Gg=new WeakMap,py=new WeakMap;function FM(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{e(vo(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&a1.set(e,n)}).catch(()=>{}),py.set(t,n),t}function qM(n){if(p_.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{e(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});p_.set(n,t)}let g_={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return p_.get(n);if(t==="objectStoreNames")return n.objectStoreNames||o1.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return vo(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function GM(n){g_=n(g_)}function ZM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(Zg(this),t,...e);return o1.set(i,t.sort?t.sort():[t]),vo(i)}:jM().includes(n)?function(...t){return n.apply(Zg(this),t),vo(a1.get(this))}:function(...t){return vo(n.apply(Zg(this),t))}}function WM(n){return typeof n=="function"?ZM(n):(n instanceof IDBTransaction&&qM(n),UM(n,HM())?new Proxy(n,g_):n)}function vo(n){if(n instanceof IDBRequest)return FM(n);if(Gg.has(n))return Gg.get(n);const t=WM(n);return t!==n&&(Gg.set(n,t),py.set(t,n)),t}const Zg=n=>py.get(n);function l1(n,t,{blocked:e,upgrade:i,blocking:r,terminated:l}={}){const c=indexedDB.open(n,t),d=vo(c);return i&&c.addEventListener("upgradeneeded",m=>{i(vo(c.result),m.oldVersion,m.newVersion,vo(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),r&&m.addEventListener("versionchange",g=>r(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const YM=["get","getKey","getAll","getAllKeys","count"],$M=["put","add","delete","clear"],Wg=new Map;function UT(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Wg.get(t))return Wg.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=$M.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||YM.includes(e)))return;const l=async function(c,...d){const m=this.transaction(c,r?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[e](...d),r&&m.done]))[0]};return Wg.set(t,l),l}GM(n=>({...n,get:(t,e,i)=>UT(t,e)||n.get(t,e,i),has:(t,e)=>!!UT(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(XM(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function XM(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const __="@firebase/app",HT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=new Cm("@firebase/app"),QM="@firebase/app-compat",JM="@firebase/analytics-compat",tO="@firebase/analytics",eO="@firebase/app-check-compat",nO="@firebase/app-check",iO="@firebase/auth",sO="@firebase/auth-compat",rO="@firebase/database",aO="@firebase/data-connect",oO="@firebase/database-compat",lO="@firebase/functions",uO="@firebase/functions-compat",cO="@firebase/installations",hO="@firebase/installations-compat",fO="@firebase/messaging",dO="@firebase/messaging-compat",mO="@firebase/performance",pO="@firebase/performance-compat",gO="@firebase/remote-config",_O="@firebase/remote-config-compat",yO="@firebase/storage",vO="@firebase/storage-compat",bO="@firebase/firestore",TO="@firebase/ai",wO="@firebase/firestore-compat",EO="firebase",SO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="[DEFAULT]",AO={[__]:"fire-core",[QM]:"fire-core-compat",[tO]:"fire-analytics",[JM]:"fire-analytics-compat",[nO]:"fire-app-check",[eO]:"fire-app-check-compat",[iO]:"fire-auth",[sO]:"fire-auth-compat",[rO]:"fire-rtdb",[aO]:"fire-data-connect",[oO]:"fire-rtdb-compat",[lO]:"fire-fn",[uO]:"fire-fn-compat",[cO]:"fire-iid",[hO]:"fire-iid-compat",[fO]:"fire-fcm",[dO]:"fire-fcm-compat",[mO]:"fire-perf",[pO]:"fire-perf-compat",[gO]:"fire-rc",[_O]:"fire-rc-compat",[yO]:"fire-gcs",[vO]:"fire-gcs-compat",[bO]:"fire-fst",[wO]:"fire-fst-compat",[TO]:"fire-vertex","fire-js":"fire-js",[EO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=new Map,xO=new Map,v_=new Map;function jT(n,t){try{n.container.addComponent(t)}catch(e){oa.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function yr(n){const t=n.name;if(v_.has(t))return oa.debug(`There were multiple attempts to register component ${t}.`),!1;v_.set(t,n);for(const e of Wd.values())jT(e,n);for(const e of xO.values())jT(e,n);return!0}function Bl(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Ns(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bo=new zl("app","Firebase",RO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw bo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=SO;function u1(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:y_,automaticDataCollectionEnabled:!0},t),r=i.name;if(typeof r!="string"||!r)throw bo.create("bad-app-name",{appName:String(r)});if(e||(e=e1()),!e)throw bo.create("no-options");const l=Wd.get(r);if(l){if(xo(e,l.options)&&xo(i,l.config))return l;throw bo.create("duplicate-app",{appName:r})}const c=new LM(r);for(const m of v_.values())c.addComponent(m);const d=new CO(e,i,c);return Wd.set(r,d),d}function gy(n=y_){const t=Wd.get(n);if(!t&&n===y_&&e1())return u1();if(!t)throw bo.create("no-app",{appName:n});return t}function gs(n,t,e){var i;let r=(i=AO[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);const l=r.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${r}" with version "${t}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),oa.warn(d.join(" "));return}yr(new Us(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO="firebase-heartbeat-database",MO=1,Ch="firebase-heartbeat-store";let Yg=null;function c1(){return Yg||(Yg=l1(IO,MO,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Ch)}catch(e){console.warn(e)}}}}).catch(n=>{throw bo.create("idb-open",{originalErrorMessage:n.message})})),Yg}async function OO(n){try{const e=(await c1()).transaction(Ch),i=await e.objectStore(Ch).get(h1(n));return await e.done,i}catch(t){if(t instanceof Fs)oa.warn(t.message);else{const e=bo.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});oa.warn(e.message)}}}async function FT(n,t){try{const i=(await c1()).transaction(Ch,"readwrite");await i.objectStore(Ch).put(t,h1(n)),await i.done}catch(e){if(e instanceof Fs)oa.warn(e.message);else{const i=bo.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});oa.warn(i.message)}}}function h1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=1024,DO=30;class kO{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new NO(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=qT();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>DO){const c=VO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){oa.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=qT(),{heartbeatsToSend:i,unsentEntries:r}=LO(this._heartbeatsCache.heartbeats),l=Zd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return oa.warn(e),""}}}function qT(){return new Date().toISOString().substring(0,10)}function LO(n,t=PO){const e=[];let i=n.slice();for(const r of n){const l=e.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),GT(e)>t){l.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),GT(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class NO{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dy()?my().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await OO(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return FT(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return FT(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function GT(n){return Zd(JSON.stringify({version:2,heartbeats:n})).length}function VO(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(n){yr(new Us("platform-logger",t=>new KM(t),"PRIVATE")),yr(new Us("heartbeat",t=>new kO(t),"PRIVATE")),gs(__,HT,n),gs(__,HT,"esm2017"),gs("fire-js","")}zO("");var ZT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var To,f1;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,P){function z(){}z.prototype=P.prototype,V.D=P.prototype,V.prototype=new z,V.prototype.constructor=V,V.C=function(U,H,G){for(var F=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)F[Yt-2]=arguments[Yt];return P.prototype[H].apply(U,F)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(V,P,z){z||(z=0);var U=Array(16);if(typeof P=="string")for(var H=0;16>H;++H)U[H]=P.charCodeAt(z++)|P.charCodeAt(z++)<<8|P.charCodeAt(z++)<<16|P.charCodeAt(z++)<<24;else for(H=0;16>H;++H)U[H]=P[z++]|P[z++]<<8|P[z++]<<16|P[z++]<<24;P=V.g[0],z=V.g[1],H=V.g[2];var G=V.g[3],F=P+(G^z&(H^G))+U[0]+3614090360&4294967295;P=z+(F<<7&4294967295|F>>>25),F=G+(H^P&(z^H))+U[1]+3905402710&4294967295,G=P+(F<<12&4294967295|F>>>20),F=H+(z^G&(P^z))+U[2]+606105819&4294967295,H=G+(F<<17&4294967295|F>>>15),F=z+(P^H&(G^P))+U[3]+3250441966&4294967295,z=H+(F<<22&4294967295|F>>>10),F=P+(G^z&(H^G))+U[4]+4118548399&4294967295,P=z+(F<<7&4294967295|F>>>25),F=G+(H^P&(z^H))+U[5]+1200080426&4294967295,G=P+(F<<12&4294967295|F>>>20),F=H+(z^G&(P^z))+U[6]+2821735955&4294967295,H=G+(F<<17&4294967295|F>>>15),F=z+(P^H&(G^P))+U[7]+4249261313&4294967295,z=H+(F<<22&4294967295|F>>>10),F=P+(G^z&(H^G))+U[8]+1770035416&4294967295,P=z+(F<<7&4294967295|F>>>25),F=G+(H^P&(z^H))+U[9]+2336552879&4294967295,G=P+(F<<12&4294967295|F>>>20),F=H+(z^G&(P^z))+U[10]+4294925233&4294967295,H=G+(F<<17&4294967295|F>>>15),F=z+(P^H&(G^P))+U[11]+2304563134&4294967295,z=H+(F<<22&4294967295|F>>>10),F=P+(G^z&(H^G))+U[12]+1804603682&4294967295,P=z+(F<<7&4294967295|F>>>25),F=G+(H^P&(z^H))+U[13]+4254626195&4294967295,G=P+(F<<12&4294967295|F>>>20),F=H+(z^G&(P^z))+U[14]+2792965006&4294967295,H=G+(F<<17&4294967295|F>>>15),F=z+(P^H&(G^P))+U[15]+1236535329&4294967295,z=H+(F<<22&4294967295|F>>>10),F=P+(H^G&(z^H))+U[1]+4129170786&4294967295,P=z+(F<<5&4294967295|F>>>27),F=G+(z^H&(P^z))+U[6]+3225465664&4294967295,G=P+(F<<9&4294967295|F>>>23),F=H+(P^z&(G^P))+U[11]+643717713&4294967295,H=G+(F<<14&4294967295|F>>>18),F=z+(G^P&(H^G))+U[0]+3921069994&4294967295,z=H+(F<<20&4294967295|F>>>12),F=P+(H^G&(z^H))+U[5]+3593408605&4294967295,P=z+(F<<5&4294967295|F>>>27),F=G+(z^H&(P^z))+U[10]+38016083&4294967295,G=P+(F<<9&4294967295|F>>>23),F=H+(P^z&(G^P))+U[15]+3634488961&4294967295,H=G+(F<<14&4294967295|F>>>18),F=z+(G^P&(H^G))+U[4]+3889429448&4294967295,z=H+(F<<20&4294967295|F>>>12),F=P+(H^G&(z^H))+U[9]+568446438&4294967295,P=z+(F<<5&4294967295|F>>>27),F=G+(z^H&(P^z))+U[14]+3275163606&4294967295,G=P+(F<<9&4294967295|F>>>23),F=H+(P^z&(G^P))+U[3]+4107603335&4294967295,H=G+(F<<14&4294967295|F>>>18),F=z+(G^P&(H^G))+U[8]+1163531501&4294967295,z=H+(F<<20&4294967295|F>>>12),F=P+(H^G&(z^H))+U[13]+2850285829&4294967295,P=z+(F<<5&4294967295|F>>>27),F=G+(z^H&(P^z))+U[2]+4243563512&4294967295,G=P+(F<<9&4294967295|F>>>23),F=H+(P^z&(G^P))+U[7]+1735328473&4294967295,H=G+(F<<14&4294967295|F>>>18),F=z+(G^P&(H^G))+U[12]+2368359562&4294967295,z=H+(F<<20&4294967295|F>>>12),F=P+(z^H^G)+U[5]+4294588738&4294967295,P=z+(F<<4&4294967295|F>>>28),F=G+(P^z^H)+U[8]+2272392833&4294967295,G=P+(F<<11&4294967295|F>>>21),F=H+(G^P^z)+U[11]+1839030562&4294967295,H=G+(F<<16&4294967295|F>>>16),F=z+(H^G^P)+U[14]+4259657740&4294967295,z=H+(F<<23&4294967295|F>>>9),F=P+(z^H^G)+U[1]+2763975236&4294967295,P=z+(F<<4&4294967295|F>>>28),F=G+(P^z^H)+U[4]+1272893353&4294967295,G=P+(F<<11&4294967295|F>>>21),F=H+(G^P^z)+U[7]+4139469664&4294967295,H=G+(F<<16&4294967295|F>>>16),F=z+(H^G^P)+U[10]+3200236656&4294967295,z=H+(F<<23&4294967295|F>>>9),F=P+(z^H^G)+U[13]+681279174&4294967295,P=z+(F<<4&4294967295|F>>>28),F=G+(P^z^H)+U[0]+3936430074&4294967295,G=P+(F<<11&4294967295|F>>>21),F=H+(G^P^z)+U[3]+3572445317&4294967295,H=G+(F<<16&4294967295|F>>>16),F=z+(H^G^P)+U[6]+76029189&4294967295,z=H+(F<<23&4294967295|F>>>9),F=P+(z^H^G)+U[9]+3654602809&4294967295,P=z+(F<<4&4294967295|F>>>28),F=G+(P^z^H)+U[12]+3873151461&4294967295,G=P+(F<<11&4294967295|F>>>21),F=H+(G^P^z)+U[15]+530742520&4294967295,H=G+(F<<16&4294967295|F>>>16),F=z+(H^G^P)+U[2]+3299628645&4294967295,z=H+(F<<23&4294967295|F>>>9),F=P+(H^(z|~G))+U[0]+4096336452&4294967295,P=z+(F<<6&4294967295|F>>>26),F=G+(z^(P|~H))+U[7]+1126891415&4294967295,G=P+(F<<10&4294967295|F>>>22),F=H+(P^(G|~z))+U[14]+2878612391&4294967295,H=G+(F<<15&4294967295|F>>>17),F=z+(G^(H|~P))+U[5]+4237533241&4294967295,z=H+(F<<21&4294967295|F>>>11),F=P+(H^(z|~G))+U[12]+1700485571&4294967295,P=z+(F<<6&4294967295|F>>>26),F=G+(z^(P|~H))+U[3]+2399980690&4294967295,G=P+(F<<10&4294967295|F>>>22),F=H+(P^(G|~z))+U[10]+4293915773&4294967295,H=G+(F<<15&4294967295|F>>>17),F=z+(G^(H|~P))+U[1]+2240044497&4294967295,z=H+(F<<21&4294967295|F>>>11),F=P+(H^(z|~G))+U[8]+1873313359&4294967295,P=z+(F<<6&4294967295|F>>>26),F=G+(z^(P|~H))+U[15]+4264355552&4294967295,G=P+(F<<10&4294967295|F>>>22),F=H+(P^(G|~z))+U[6]+2734768916&4294967295,H=G+(F<<15&4294967295|F>>>17),F=z+(G^(H|~P))+U[13]+1309151649&4294967295,z=H+(F<<21&4294967295|F>>>11),F=P+(H^(z|~G))+U[4]+4149444226&4294967295,P=z+(F<<6&4294967295|F>>>26),F=G+(z^(P|~H))+U[11]+3174756917&4294967295,G=P+(F<<10&4294967295|F>>>22),F=H+(P^(G|~z))+U[2]+718787259&4294967295,H=G+(F<<15&4294967295|F>>>17),F=z+(G^(H|~P))+U[9]+3951481745&4294967295,V.g[0]=V.g[0]+P&4294967295,V.g[1]=V.g[1]+(H+(F<<21&4294967295|F>>>11))&4294967295,V.g[2]=V.g[2]+H&4294967295,V.g[3]=V.g[3]+G&4294967295}i.prototype.u=function(V,P){P===void 0&&(P=V.length);for(var z=P-this.blockSize,U=this.B,H=this.h,G=0;G<P;){if(H==0)for(;G<=z;)r(this,V,G),G+=this.blockSize;if(typeof V=="string"){for(;G<P;)if(U[H++]=V.charCodeAt(G++),H==this.blockSize){r(this,U),H=0;break}}else for(;G<P;)if(U[H++]=V[G++],H==this.blockSize){r(this,U),H=0;break}}this.h=H,this.o+=P},i.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var P=1;P<V.length-8;++P)V[P]=0;var z=8*this.o;for(P=V.length-8;P<V.length;++P)V[P]=z&255,z/=256;for(this.u(V),V=Array(16),P=z=0;4>P;++P)for(var U=0;32>U;U+=8)V[z++]=this.g[P]>>>U&255;return V};function l(V,P){var z=d;return Object.prototype.hasOwnProperty.call(z,V)?z[V]:z[V]=P(V)}function c(V,P){this.h=P;for(var z=[],U=!0,H=V.length-1;0<=H;H--){var G=V[H]|0;U&&G==P||(z[H]=G,U=!1)}this.g=z}var d={};function m(V){return-128<=V&&128>V?l(V,function(P){return new c([P|0],0>P?-1:0)}):new c([V|0],0>V?-1:0)}function g(V){if(isNaN(V)||!isFinite(V))return w;if(0>V)return N(g(-V));for(var P=[],z=1,U=0;V>=z;U++)P[U]=V/z|0,z*=4294967296;return new c(P,0)}function b(V,P){if(V.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(V.charAt(0)=="-")return N(b(V.substring(1),P));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var z=g(Math.pow(P,8)),U=w,H=0;H<V.length;H+=8){var G=Math.min(8,V.length-H),F=parseInt(V.substring(H,H+G),P);8>G?(G=g(Math.pow(P,G)),U=U.j(G).add(g(F))):(U=U.j(z),U=U.add(g(F)))}return U}var w=m(0),S=m(1),C=m(16777216);n=c.prototype,n.m=function(){if(D(this))return-N(this).m();for(var V=0,P=1,z=0;z<this.g.length;z++){var U=this.i(z);V+=(0<=U?U:4294967296+U)*P,P*=4294967296}return V},n.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(M(this))return"0";if(D(this))return"-"+N(this).toString(V);for(var P=g(Math.pow(V,6)),z=this,U="";;){var H=it(z,P).g;z=j(z,H.j(P));var G=((0<z.g.length?z.g[0]:z.h)>>>0).toString(V);if(z=H,M(z))return G+U;for(;6>G.length;)G="0"+G;U=G+U}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function M(V){if(V.h!=0)return!1;for(var P=0;P<V.g.length;P++)if(V.g[P]!=0)return!1;return!0}function D(V){return V.h==-1}n.l=function(V){return V=j(this,V),D(V)?-1:M(V)?0:1};function N(V){for(var P=V.g.length,z=[],U=0;U<P;U++)z[U]=~V.g[U];return new c(z,~V.h).add(S)}n.abs=function(){return D(this)?N(this):this},n.add=function(V){for(var P=Math.max(this.g.length,V.g.length),z=[],U=0,H=0;H<=P;H++){var G=U+(this.i(H)&65535)+(V.i(H)&65535),F=(G>>>16)+(this.i(H)>>>16)+(V.i(H)>>>16);U=F>>>16,G&=65535,F&=65535,z[H]=F<<16|G}return new c(z,z[z.length-1]&-2147483648?-1:0)};function j(V,P){return V.add(N(P))}n.j=function(V){if(M(this)||M(V))return w;if(D(this))return D(V)?N(this).j(N(V)):N(N(this).j(V));if(D(V))return N(this.j(N(V)));if(0>this.l(C)&&0>V.l(C))return g(this.m()*V.m());for(var P=this.g.length+V.g.length,z=[],U=0;U<2*P;U++)z[U]=0;for(U=0;U<this.g.length;U++)for(var H=0;H<V.g.length;H++){var G=this.i(U)>>>16,F=this.i(U)&65535,Yt=V.i(H)>>>16,kt=V.i(H)&65535;z[2*U+2*H]+=F*kt,q(z,2*U+2*H),z[2*U+2*H+1]+=G*kt,q(z,2*U+2*H+1),z[2*U+2*H+1]+=F*Yt,q(z,2*U+2*H+1),z[2*U+2*H+2]+=G*Yt,q(z,2*U+2*H+2)}for(U=0;U<P;U++)z[U]=z[2*U+1]<<16|z[2*U];for(U=P;U<2*P;U++)z[U]=0;return new c(z,0)};function q(V,P){for(;(V[P]&65535)!=V[P];)V[P+1]+=V[P]>>>16,V[P]&=65535,P++}function Y(V,P){this.g=V,this.h=P}function it(V,P){if(M(P))throw Error("division by zero");if(M(V))return new Y(w,w);if(D(V))return P=it(N(V),P),new Y(N(P.g),N(P.h));if(D(P))return P=it(V,N(P)),new Y(N(P.g),P.h);if(30<V.g.length){if(D(V)||D(P))throw Error("slowDivide_ only works with positive integers.");for(var z=S,U=P;0>=U.l(V);)z=lt(z),U=lt(U);var H=bt(z,1),G=bt(U,1);for(U=bt(U,2),z=bt(z,2);!M(U);){var F=G.add(U);0>=F.l(V)&&(H=H.add(z),G=F),U=bt(U,1),z=bt(z,1)}return P=j(V,H.j(P)),new Y(H,P)}for(H=w;0<=V.l(P);){for(z=Math.max(1,Math.floor(V.m()/P.m())),U=Math.ceil(Math.log(z)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),G=g(z),F=G.j(P);D(F)||0<F.l(V);)z-=U,G=g(z),F=G.j(P);M(G)&&(G=S),H=H.add(G),V=j(V,F)}return new Y(H,V)}n.A=function(V){return it(this,V).h},n.and=function(V){for(var P=Math.max(this.g.length,V.g.length),z=[],U=0;U<P;U++)z[U]=this.i(U)&V.i(U);return new c(z,this.h&V.h)},n.or=function(V){for(var P=Math.max(this.g.length,V.g.length),z=[],U=0;U<P;U++)z[U]=this.i(U)|V.i(U);return new c(z,this.h|V.h)},n.xor=function(V){for(var P=Math.max(this.g.length,V.g.length),z=[],U=0;U<P;U++)z[U]=this.i(U)^V.i(U);return new c(z,this.h^V.h)};function lt(V){for(var P=V.g.length+1,z=[],U=0;U<P;U++)z[U]=V.i(U)<<1|V.i(U-1)>>>31;return new c(z,V.h)}function bt(V,P){var z=P>>5;P%=32;for(var U=V.g.length-z,H=[],G=0;G<U;G++)H[G]=0<P?V.i(G+z)>>>P|V.i(G+z+1)<<32-P:V.i(G+z);return new c(H,V.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,f1=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=b,To=c}).apply(typeof ZT<"u"?ZT:typeof self<"u"?self:typeof window<"u"?window:{});var hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d1,rh,m1,Dd,b_,p1,g1,_1;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,E,x){return p==Array.prototype||p==Object.prototype||(p[E]=x.value),p};function e(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof hd=="object"&&hd];for(var E=0;E<p.length;++E){var x=p[E];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=e(this);function r(p,E){if(E)t:{var x=i;p=p.split(".");for(var k=0;k<p.length-1;k++){var Q=p[k];if(!(Q in x))break t;x=x[Q]}p=p[p.length-1],k=x[p],E=E(k),E!=k&&E!=null&&t(x,p,{configurable:!0,writable:!0,value:E})}}function l(p,E){p instanceof String&&(p+="");var x=0,k=!1,Q={next:function(){if(!k&&x<p.length){var ot=x++;return{value:E(ot,p[ot]),done:!1}}return k=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}r("Array.prototype.values",function(p){return p||function(){return l(this,function(E,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(p){var E=typeof p;return E=E!="object"?E:p?Array.isArray(p)?"array":E:"null",E=="array"||E=="object"&&typeof p.length=="number"}function g(p){var E=typeof p;return E=="object"&&p!=null||E=="function"}function b(p,E,x){return p.call.apply(p.bind,arguments)}function w(p,E,x){if(!p)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,k),p.apply(E,Q)}}return function(){return p.apply(E,arguments)}}function S(p,E,x){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:w,S.apply(null,arguments)}function C(p,E){var x=Array.prototype.slice.call(arguments,1);return function(){var k=x.slice();return k.push.apply(k,arguments),p.apply(this,k)}}function M(p,E){function x(){}x.prototype=E.prototype,p.aa=E.prototype,p.prototype=new x,p.prototype.constructor=p,p.Qb=function(k,Q,ot){for(var Et=Array(arguments.length-2),se=2;se<arguments.length;se++)Et[se-2]=arguments[se];return E.prototype[Q].apply(k,Et)}}function D(p){const E=p.length;if(0<E){const x=Array(E);for(let k=0;k<E;k++)x[k]=p[k];return x}return[]}function N(p,E){for(let x=1;x<arguments.length;x++){const k=arguments[x];if(m(k)){const Q=p.length||0,ot=k.length||0;p.length=Q+ot;for(let Et=0;Et<ot;Et++)p[Q+Et]=k[Et]}else p.push(k)}}class j{constructor(E,x){this.i=E,this.j=x,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function q(p){return/^[\s\xa0]*$/.test(p)}function Y(){var p=d.navigator;return p&&(p=p.userAgent)?p:""}function it(p){return it[" "](p),p}it[" "]=function(){};var lt=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function bt(p,E,x){for(const k in p)E.call(x,p[k],k,p)}function V(p,E){for(const x in p)E.call(void 0,p[x],x,p)}function P(p){const E={};for(const x in p)E[x]=p[x];return E}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(p,E){let x,k;for(let Q=1;Q<arguments.length;Q++){k=arguments[Q];for(x in k)p[x]=k[x];for(let ot=0;ot<z.length;ot++)x=z[ot],Object.prototype.hasOwnProperty.call(k,x)&&(p[x]=k[x])}}function H(p){var E=1;p=p.split(":");const x=[];for(;0<E&&p.length;)x.push(p.shift()),E--;return p.length&&x.push(p.join(":")),x}function G(p){d.setTimeout(()=>{throw p},0)}function F(){var p=Vt;let E=null;return p.g&&(E=p.g,p.g=p.g.next,p.g||(p.h=null),E.next=null),E}class Yt{constructor(){this.h=this.g=null}add(E,x){const k=kt.get();k.set(E,x),this.h?this.h.next=k:this.g=k,this.h=k}}var kt=new j(()=>new tt,p=>p.reset());class tt{constructor(){this.next=this.g=this.h=null}set(E,x){this.h=E,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let yt,dt=!1,Vt=new Yt,B=()=>{const p=d.Promise.resolve(void 0);yt=()=>{p.then(ut)}};var ut=()=>{for(var p;p=F();){try{p.h.call(p.g)}catch(x){G(x)}var E=kt;E.j(p),100>E.h&&(E.h++,p.next=E.g,E.g=p)}dt=!1};function Tt(){this.s=this.s,this.C=this.C}Tt.prototype.s=!1,Tt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Tt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _t(p,E){this.type=p,this.g=this.target=E,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var St=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var p=!1,E=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const x=()=>{};d.addEventListener("test",x,E),d.removeEventListener("test",x,E)}catch{}return p}();function xt(p,E){if(_t.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var x=this.type=p.type,k=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=E,E=p.relatedTarget){if(lt){t:{try{it(E.nodeName);var Q=!0;break t}catch{}Q=!1}Q||(E=null)}}else x=="mouseover"?E=p.fromElement:x=="mouseout"&&(E=p.toElement);this.relatedTarget=E,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:wt[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&xt.aa.h.call(this)}}M(xt,_t);var wt={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),le=0;function Ei(p,E,x,k,Q){this.listener=p,this.proxy=null,this.src=E,this.type=x,this.capture=!!k,this.ha=Q,this.key=++le,this.da=this.fa=!1}function Wi(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Si(p){this.src=p,this.g={},this.h=0}Si.prototype.add=function(p,E,x,k,Q){var ot=p.toString();p=this.g[ot],p||(p=this.g[ot]=[],this.h++);var Et=_s(p,E,k,Q);return-1<Et?(E=p[Et],x||(E.fa=!1)):(E=new Ei(E,this.src,ot,!!k,Q),E.fa=x,p.push(E)),E};function Ai(p,E){var x=E.type;if(x in p.g){var k=p.g[x],Q=Array.prototype.indexOf.call(k,E,void 0),ot;(ot=0<=Q)&&Array.prototype.splice.call(k,Q,1),ot&&(Wi(E),p.g[x].length==0&&(delete p.g[x],p.h--))}}function _s(p,E,x,k){for(var Q=0;Q<p.length;++Q){var ot=p[Q];if(!ot.da&&ot.listener==E&&ot.capture==!!x&&ot.ha==k)return Q}return-1}var wr="closure_lm_"+(1e6*Math.random()|0),ma={};function No(p,E,x,k,Q){if(Array.isArray(E)){for(var ot=0;ot<E.length;ot++)No(p,E[ot],x,k,Q);return null}return x=Gl(x),p&&p[xe]?p.K(E,x,g(k)?!!k.capture:!1,Q):Un(p,E,x,!1,k,Q)}function Un(p,E,x,k,Q,ot){if(!E)throw Error("Invalid event type");var Et=g(Q)?!!Q.capture:!!Q,se=Sr(p);if(se||(p[wr]=se=new Si(p)),x=se.add(E,x,k,Et,ot),x.proxy)return x;if(k=pa(),x.proxy=k,k.src=p,k.listener=x,p.addEventListener)St||(Q=Et),Q===void 0&&(Q=!1),p.addEventListener(E.toString(),k,Q);else if(p.attachEvent)p.attachEvent(ys(E.toString()),k);else if(p.addListener&&p.removeListener)p.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return x}function pa(){function p(x){return E.call(p.src,p.listener,x)}const E=ql;return p}function Vo(p,E,x,k,Q){if(Array.isArray(E))for(var ot=0;ot<E.length;ot++)Vo(p,E[ot],x,k,Q);else k=g(k)?!!k.capture:!!k,x=Gl(x),p&&p[xe]?(p=p.i,E=String(E).toString(),E in p.g&&(ot=p.g[E],x=_s(ot,x,k,Q),-1<x&&(Wi(ot[x]),Array.prototype.splice.call(ot,x,1),ot.length==0&&(delete p.g[E],p.h--)))):p&&(p=Sr(p))&&(E=p.g[E.toString()],p=-1,E&&(p=_s(E,x,k,Q)),(x=-1<p?E[p]:null)&&Er(x))}function Er(p){if(typeof p!="number"&&p&&!p.da){var E=p.src;if(E&&E[xe])Ai(E.i,p);else{var x=p.type,k=p.proxy;E.removeEventListener?E.removeEventListener(x,k,p.capture):E.detachEvent?E.detachEvent(ys(x),k):E.addListener&&E.removeListener&&E.removeListener(k),(x=Sr(E))?(Ai(x,p),x.h==0&&(x.src=null,E[wr]=null)):Wi(p)}}}function ys(p){return p in ma?ma[p]:ma[p]="on"+p}function ql(p,E){if(p.da)p=!0;else{E=new xt(E,this);var x=p.listener,k=p.ha||p.src;p.fa&&Er(p),p=x.call(k,E)}return p}function Sr(p){return p=p[wr],p instanceof Si?p:null}var zo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gl(p){return typeof p=="function"?p:(p[zo]||(p[zo]=function(E){return p.handleEvent(E)}),p[zo])}function De(){Tt.call(this),this.i=new Si(this),this.M=this,this.F=null}M(De,Tt),De.prototype[xe]=!0,De.prototype.removeEventListener=function(p,E,x,k){Vo(this,p,E,x,k)};function fe(p,E){var x,k=p.F;if(k)for(x=[];k;k=k.F)x.push(k);if(p=p.M,k=E.type||E,typeof E=="string")E=new _t(E,p);else if(E instanceof _t)E.target=E.target||p;else{var Q=E;E=new _t(k,p),U(E,Q)}if(Q=!0,x)for(var ot=x.length-1;0<=ot;ot--){var Et=E.g=x[ot];Q=Hn(Et,k,!0,E)&&Q}if(Et=E.g=p,Q=Hn(Et,k,!0,E)&&Q,Q=Hn(Et,k,!1,E)&&Q,x)for(ot=0;ot<x.length;ot++)Et=E.g=x[ot],Q=Hn(Et,k,!1,E)&&Q}De.prototype.N=function(){if(De.aa.N.call(this),this.i){var p=this.i,E;for(E in p.g){for(var x=p.g[E],k=0;k<x.length;k++)Wi(x[k]);delete p.g[E],p.h--}}this.F=null},De.prototype.K=function(p,E,x,k){return this.i.add(String(p),E,!1,x,k)},De.prototype.L=function(p,E,x,k){return this.i.add(String(p),E,!0,x,k)};function Hn(p,E,x,k){if(E=p.i.g[String(E)],!E)return!0;E=E.concat();for(var Q=!0,ot=0;ot<E.length;++ot){var Et=E[ot];if(Et&&!Et.da&&Et.capture==x){var se=Et.listener,Xe=Et.ha||Et.src;Et.fa&&Ai(p.i,Et),Q=se.call(Xe,k)!==!1&&Q}}return Q&&!k.defaultPrevented}function bn(p,E,x){if(typeof p=="function")x&&(p=S(p,x));else if(p&&typeof p.handleEvent=="function")p=S(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:d.setTimeout(p,E||0)}function Bo(p){p.g=bn(()=>{p.g=null,p.i&&(p.i=!1,Bo(p))},p.l);const E=p.h;p.h=null,p.m.apply(null,E)}class Zl extends Tt{constructor(E,x){super(),this.m=E,this.l=x,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Bo(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ar(p){Tt.call(this),this.h=p,this.g={}}M(Ar,Tt);var qs=[];function vs(p){bt(p.g,function(E,x){this.g.hasOwnProperty(x)&&Er(E)},p),p.g={}}Ar.prototype.N=function(){Ar.aa.N.call(this),vs(this)},Ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ui=d.JSON.stringify,ga=d.JSON.parse,xi=class{stringify(p){return d.JSON.stringify(p,void 0)}parse(p){return d.JSON.parse(p,void 0)}};function Uo(){}Uo.prototype.h=null;function Ho(p){return p.h||(p.h=p.i())}function _a(){}var Yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $i(){_t.call(this,"d")}M($i,_t);function jo(){_t.call(this,"c")}M(jo,_t);var Ki={},Fo=null;function Gs(){return Fo=Fo||new De}Ki.La="serverreachability";function ya(p){_t.call(this,Ki.La,p)}M(ya,_t);function Zs(p){const E=Gs();fe(E,new ya(E))}Ki.STAT_EVENT="statevent";function va(p,E){_t.call(this,Ki.STAT_EVENT,p),this.stat=E}M(va,_t);function ke(p){const E=Gs();fe(E,new va(E,p))}Ki.Ma="timingevent";function Je(p,E){_t.call(this,Ki.Ma,p),this.size=E}M(Je,_t);function Ke(p,E){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){p()},E)}function ci(){this.g=!0}ci.prototype.xa=function(){this.g=!1};function jn(p,E,x,k,Q,ot){p.info(function(){if(p.g)if(ot)for(var Et="",se=ot.split("&"),Xe=0;Xe<se.length;Xe++){var re=se[Xe].split("=");if(1<re.length){var ye=re[0];re=re[1];var Ne=ye.split("_");Et=2<=Ne.length&&Ne[1]=="type"?Et+(ye+"="+re+"&"):Et+(ye+"=redacted&")}}else Et=null;else Et=ot;return"XMLHTTP REQ ("+k+") [attempt "+Q+"]: "+E+`
`+x+`
`+Et})}function Pt(p,E,x,k,Q,ot,Et){p.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+Q+"]: "+E+`
`+x+`
`+ot+" "+Et})}function bs(p,E,x,k){p.info(function(){return"XMLHTTP TEXT ("+E+"): "+Ws(p,x)+(k?" "+k:"")})}function qo(p,E){p.info(function(){return"TIMEOUT: "+E})}ci.prototype.info=function(){};function Ws(p,E){if(!p.g)return E;if(!E)return null;try{var x=JSON.parse(E);if(x){for(p=0;p<x.length;p++)if(Array.isArray(x[p])){var k=x[p];if(!(2>k.length)){var Q=k[1];if(Array.isArray(Q)&&!(1>Q.length)){var ot=Q[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var Et=1;Et<Q.length;Et++)Q[Et]=""}}}}return ui(x)}catch{return E}}var Ts={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ri={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ci;function Mn(){}M(Mn,Uo),Mn.prototype.g=function(){return new XMLHttpRequest},Mn.prototype.i=function(){return{}},Ci=new Mn;function Tn(p,E,x,k){this.j=p,this.i=E,this.l=x,this.R=k||1,this.U=new Ar(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ge}function Ge(){this.i=null,this.g="",this.h=!1}var Go={},ba={};function Ii(p,E,x){p.L=1,p.v=ei(Le(E)),p.m=x,p.P=!0,Xi(p,null)}function Xi(p,E){p.F=Date.now(),Rr(p),p.A=Le(p.v);var x=p.A,k=p.R;Array.isArray(k)||(k=[String(k)]),Yo(x.i,"t",k),p.C=0,x=p.j.J,p.h=new Ge,p.g=Ql(p.j,x?E:null,!p.m),0<p.O&&(p.M=new Zl(S(p.Y,p,p.g),p.O)),E=p.U,x=p.g,k=p.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(qs[0]=Q.toString()),Q=qs);for(var ot=0;ot<Q.length;ot++){var Et=No(x,Q[ot],k||E.handleEvent,!1,E.h||E);if(!Et)break;E.g[Et.key]=Et}E=p.H?P(p.H):{},p.m?(p.u||(p.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,E)):(p.u="GET",p.g.ea(p.A,p.u,null,E)),Zs(),jn(p.i,p.u,p.A,p.l,p.R,p.m)}Tn.prototype.ca=function(p){p=p.target;const E=this.M;E&&Sn(p)==3?E.j():this.Y(p)},Tn.prototype.Y=function(p){try{if(p==this.g)t:{const Ne=Sn(this.g);var E=this.g.Ba();const Is=this.g.Z();if(!(3>Ne)&&(Ne!=3||this.g&&(this.h.h||this.g.oa()||$o(this.g)))){this.J||Ne!=4||E==7||(E==8||0>=Is?Zs(3):Zs(2)),Ys(this);var x=this.g.Z();this.X=x;e:if(Wl(this)){var k=$o(this.g);p="";var Q=k.length,ot=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),Qi(this);var Et="";break e}this.h.i=new d.TextDecoder}for(E=0;E<Q;E++)this.h.h=!0,p+=this.h.i.decode(k[E],{stream:!(ot&&E==Q-1)});k.length=0,this.h.g+=p,this.C=0,Et=this.h.g}else Et=this.g.oa();if(this.o=x==200,Pt(this.i,this.u,this.A,this.l,this.R,Ne,x),this.o){if(this.T&&!this.K){e:{if(this.g){var se,Xe=this.g;if((se=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(se)){var re=se;break e}}re=null}if(x=re)bs(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ws(this,x);else{this.o=!1,this.s=3,ke(12),mn(this),Qi(this);break t}}if(this.P){x=!0;let Oe;for(;!this.J&&this.C<Et.length;)if(Oe=xr(this,Et),Oe==ba){Ne==4&&(this.s=4,ke(14),x=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(Oe==Go){this.s=4,ke(15),bs(this.i,this.l,Et,"[Invalid Chunk]"),x=!1;break}else bs(this.i,this.l,Oe,null),ws(this,Oe);if(Wl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||Et.length!=0||this.h.h||(this.s=1,ke(16),x=!1),this.o=this.o&&x,!x)bs(this.i,this.l,Et,"[Invalid Chunked Response]"),mn(this),Qi(this);else if(0<Et.length&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.ba&&!ye.M&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+Et.length),tr(ye),ye.M=!0,ke(11))}}else bs(this.i,this.l,Et,null),ws(this,Et);Ne==4&&mn(this),this.o&&!this.J&&(Ne==4?Xo(this.j,this):(this.o=!1,Rr(this)))}else oc(this.g),x==400&&0<Et.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),mn(this),Qi(this)}}}catch{}finally{}};function Wl(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function xr(p,E){var x=p.C,k=E.indexOf(`
`,x);return k==-1?ba:(x=Number(E.substring(x,k)),isNaN(x)?Go:(k+=1,k+x>E.length?ba:(E=E.slice(k,k+x),p.C=k+x,E)))}Tn.prototype.cancel=function(){this.J=!0,mn(this)};function Rr(p){p.S=Date.now()+p.I,Yl(p,p.I)}function Yl(p,E){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Ke(S(p.ba,p),E)}function Ys(p){p.B&&(d.clearTimeout(p.B),p.B=null)}Tn.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(qo(this.i,this.A),this.L!=2&&(Zs(),ke(17)),mn(this),this.s=2,Qi(this)):Yl(this,this.S-p)};function Qi(p){p.j.G==0||p.J||Xo(p.j,p)}function mn(p){Ys(p);var E=p.M;E&&typeof E.ma=="function"&&E.ma(),p.M=null,vs(p.U),p.g&&(E=p.g,p.g=null,E.abort(),E.ma())}function ws(p,E){try{var x=p.j;if(x.G!=0&&(x.g==p||te(x.h,p))){if(!p.K&&te(x.h,p)&&x.G==3){try{var k=x.Da.g.parse(E)}catch{k=null}if(Array.isArray(k)&&k.length==3){var Q=k;if(Q[0]==0){t:if(!x.u){if(x.g)if(x.g.F+3e3<p.F)Ia(x),xa(x);else break t;Ra(x),ke(18)}}else x.za=Q[1],0<x.za-x.T&&37500>Q[2]&&x.F&&x.v==0&&!x.C&&(x.C=Ke(S(x.Za,x),6e3));if(1>=ts(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Cs(x,11)}else if((p.K||x.g==p)&&Ia(x),!q(E))for(Q=x.Da.g.parse(E),E=0;E<Q.length;E++){let re=Q[E];if(x.T=re[0],re=re[1],x.G==2)if(re[0]=="c"){x.K=re[1],x.ia=re[2];const ye=re[3];ye!=null&&(x.la=ye,x.j.info("VER="+x.la));const Ne=re[4];Ne!=null&&(x.Aa=Ne,x.j.info("SVER="+x.Aa));const Is=re[5];Is!=null&&typeof Is=="number"&&0<Is&&(k=1.5*Is,x.L=k,x.j.info("backChannelRequestTimeoutMs_="+k)),k=x;const Oe=p.g;if(Oe){const rs=Oe.g?Oe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rs){var ot=k.h;ot.g||rs.indexOf("spdy")==-1&&rs.indexOf("quic")==-1&&rs.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(_e(ot,ot.h),ot.h=null))}if(k.D){const as=Oe.g?Oe.g.getResponseHeader("X-HTTP-Session-Id"):null;as&&(k.ya=as,Ut(k.I,k.D,as))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-p.F,x.j.info("Handshake RTT: "+x.R+"ms")),k=x;var Et=p;if(k.qa=Oa(k,k.J?k.ia:null,k.W),Et.K){on(k.h,Et);var se=Et,Xe=k.L;Xe&&(se.I=Xe),se.B&&(Ys(se),Rr(se)),k.g=Et}else Li(k);0<x.i.length&&Js(x)}else re[0]!="stop"&&re[0]!="close"||Cs(x,7);else x.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?Cs(x,7):Aa(x):re[0]!="noop"&&x.l&&x.l.ta(re),x.v=0)}}Zs(4)}catch{}}var $s=class{constructor(p,E){this.g=p,this.map=E}};function Ji(p){this.l=p||10,d.PerformanceNavigationTiming?(p=d.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cr(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function ts(p){return p.h?1:p.g?p.g.size:0}function te(p,E){return p.h?p.h==E:p.g?p.g.has(E):!1}function _e(p,E){p.g?p.g.add(E):p.h=E}function on(p,E){p.h&&p.h==E?p.h=null:p.g&&p.g.has(E)&&p.g.delete(E)}Ji.prototype.cancel=function(){if(this.i=es(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function es(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let E=p.i;for(const x of p.g.values())E=E.concat(x.D);return E}return D(p.i)}function Ks(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(m(p)){for(var E=[],x=p.length,k=0;k<x;k++)E.push(p[k]);return E}E=[],x=0;for(k in p)E[x++]=p[k];return E}function Xs(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(m(p)||typeof p=="string"){var E=[];p=p.length;for(var x=0;x<p;x++)E.push(x);return E}E=[],x=0;for(const k in p)E[x++]=k;return E}}}function Gt(p,E){if(p.forEach&&typeof p.forEach=="function")p.forEach(E,void 0);else if(m(p)||typeof p=="string")Array.prototype.forEach.call(p,E,void 0);else for(var x=Xs(p),k=Ks(p),Q=k.length,ot=0;ot<Q;ot++)E.call(void 0,k[ot],x&&x[ot],p)}var be=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zo(p,E){if(p){p=p.split("&");for(var x=0;x<p.length;x++){var k=p[x].indexOf("="),Q=null;if(0<=k){var ot=p[x].substring(0,k);Q=p[x].substring(k+1)}else ot=p[x];E(ot,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Be(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Be){this.h=p.h,Ir(this,p.j),this.o=p.o,this.g=p.g,Mi(this,p.s),this.l=p.l;var E=p.i,x=new Pi;x.i=E.i,E.g&&(x.g=new Map(E.g),x.h=E.h),On(this,x),this.m=p.m}else p&&(E=String(p).match(be))?(this.h=!1,Ir(this,E[1]||"",!0),this.o=wn(E[2]||""),this.g=wn(E[3]||"",!0),Mi(this,E[4]),this.l=wn(E[5]||"",!0),On(this,E[6]||"",!0),this.m=wn(E[7]||"")):(this.h=!1,this.i=new Pi(null,this.h))}Be.prototype.toString=function(){var p=[],E=this.j;E&&p.push(Oi(E,Es,!0),":");var x=this.g;return(x||E=="file")&&(p.push("//"),(E=this.o)&&p.push(Oi(E,Es,!0),"@"),p.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&p.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&p.push("/"),p.push(Oi(x,x.charAt(0)=="/"?Wo:Mr,!0))),(x=this.i.toString())&&p.push("?",x),(x=this.m)&&p.push("#",Oi(x,Qs)),p.join("")};function Le(p){return new Be(p)}function Ir(p,E,x){p.j=x?wn(E,!0):E,p.j&&(p.j=p.j.replace(/:$/,""))}function Mi(p,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);p.s=E}else p.s=null}function On(p,E,x){E instanceof Pi?(p.i=E,ni(p.i,p.h)):(x||(E=Oi(E,wa)),p.i=new Pi(E,p.h))}function Ut(p,E,x){p.i.set(E,x)}function ei(p){return Ut(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function wn(p,E){return p?E?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Oi(p,E,x){return typeof p=="string"?(p=encodeURI(p).replace(E,Ta),x&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Ta(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Es=/[#\/\?@]/g,Mr=/[#\?:]/g,Wo=/[#\?]/g,wa=/[#\?@]/g,Qs=/#/g;function Pi(p,E){this.h=this.g=null,this.i=p||null,this.j=!!E}function Pn(p){p.g||(p.g=new Map,p.h=0,p.i&&Zo(p.i,function(E,x){p.add(decodeURIComponent(E.replace(/\+/g," ")),x)}))}n=Pi.prototype,n.add=function(p,E){Pn(this),this.i=null,p=Nt(this,p);var x=this.g.get(p);return x||this.g.set(p,x=[]),x.push(E),this.h+=1,this};function ns(p,E){Pn(p),E=Nt(p,E),p.g.has(E)&&(p.i=null,p.h-=p.g.get(E).length,p.g.delete(E))}function Di(p,E){return Pn(p),E=Nt(p,E),p.g.has(E)}n.forEach=function(p,E){Pn(this),this.g.forEach(function(x,k){x.forEach(function(Q){p.call(E,Q,k,this)},this)},this)},n.na=function(){Pn(this);const p=Array.from(this.g.values()),E=Array.from(this.g.keys()),x=[];for(let k=0;k<E.length;k++){const Q=p[k];for(let ot=0;ot<Q.length;ot++)x.push(E[k])}return x},n.V=function(p){Pn(this);let E=[];if(typeof p=="string")Di(this,p)&&(E=E.concat(this.g.get(Nt(this,p))));else{p=Array.from(this.g.values());for(let x=0;x<p.length;x++)E=E.concat(p[x])}return E},n.set=function(p,E){return Pn(this),this.i=null,p=Nt(this,p),Di(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[E]),this.h+=1,this},n.get=function(p,E){return p?(p=this.V(p),0<p.length?String(p[0]):E):E};function Yo(p,E,x){ns(p,E),0<x.length&&(p.i=null,p.g.set(Nt(p,E),D(x)),p.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],E=Array.from(this.g.keys());for(var x=0;x<E.length;x++){var k=E[x];const ot=encodeURIComponent(String(k)),Et=this.V(k);for(k=0;k<Et.length;k++){var Q=ot;Et[k]!==""&&(Q+="="+encodeURIComponent(String(Et[k]))),p.push(Q)}}return this.i=p.join("&")};function Nt(p,E){return E=String(E),p.j&&(E=E.toLowerCase()),E}function ni(p,E){E&&!p.j&&(Pn(p),p.i=null,p.g.forEach(function(x,k){var Q=k.toLowerCase();k!=Q&&(ns(this,k),Yo(this,Q,x))},p)),p.j=E}function ue(p,E){const x=new ci;if(d.Image){const k=new Image;k.onload=C(Fn,x,"TestLoadImage: loaded",!0,E,k),k.onerror=C(Fn,x,"TestLoadImage: error",!1,E,k),k.onabort=C(Fn,x,"TestLoadImage: abort",!1,E,k),k.ontimeout=C(Fn,x,"TestLoadImage: timeout",!1,E,k),d.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=p}else E(!1)}function hi(p,E){const x=new ci,k=new AbortController,Q=setTimeout(()=>{k.abort(),Fn(x,"TestPingServer: timeout",!1,E)},1e4);fetch(p,{signal:k.signal}).then(ot=>{clearTimeout(Q),ot.ok?Fn(x,"TestPingServer: ok",!0,E):Fn(x,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Q),Fn(x,"TestPingServer: error",!1,E)})}function Fn(p,E,x,k,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),k(x)}catch{}}function Ss(){this.g=new xi}function fi(p,E,x){const k=x||"";try{Gt(p,function(Q,ot){let Et=Q;g(Q)&&(Et=ui(Q)),E.push(k+ot+"="+encodeURIComponent(Et))})}catch(Q){throw E.push(k+"type="+encodeURIComponent("_badmap")),Q}}function qn(p){this.l=p.Ub||null,this.j=p.eb||!1}M(qn,Uo),qn.prototype.g=function(){return new ki(this.l,this.j)},qn.prototype.i=function(p){return function(){return p}}({});function ki(p,E){De.call(this),this.D=p,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(ki,De),n=ki.prototype,n.open=function(p,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=E,this.readyState=1,En(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(E.body=p),(this.D||d).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Re(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,En(this)),this.g&&(this.readyState=3,En(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;As(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function As(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var E=p.value?p.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!p.done}))&&(this.response=this.responseText+=E)}p.done?Re(this):En(this),this.readyState==3&&As(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,Re(this))},n.Qa=function(p){this.g&&(this.response=p,Re(this))},n.ga=function(){this.g&&Re(this)};function Re(p){p.readyState=4,p.l=null,p.j=null,p.v=null,En(p)}n.setRequestHeader=function(p,E){this.u.append(p,E)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],E=this.h.entries();for(var x=E.next();!x.done;)x=x.value,p.push(x[0]+": "+x[1]),x=E.next();return p.join(`\r
`)};function En(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Ea(p){let E="";return bt(p,function(x,k){E+=k,E+=":",E+=x,E+=`\r
`}),E}function tn(p,E,x){t:{for(k in x){var k=!1;break t}k=!0}k||(x=Ea(x),typeof p=="string"?x!=null&&encodeURIComponent(String(x)):Ut(p,E,x))}function de(p){De.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(de,De);var Or=/^https?$/i,xs=["POST","PUT"];n=de.prototype,n.Ha=function(p){this.J=p},n.ea=function(p,E,x,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);E=E?E.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ci.g(),this.v=this.o?Ho(this.o):Ho(Ci),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(E,String(p),!0),this.B=!1}catch(ot){$l(this,ot);return}if(p=x||"",x=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var Q in k)x.set(Q,k[Q]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const ot of k.keys())x.set(ot,k.get(ot));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(x.keys()).find(ot=>ot.toLowerCase()=="content-type"),Q=d.FormData&&p instanceof d.FormData,!(0<=Array.prototype.indexOf.call(xs,E,void 0))||k||Q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,Et]of x)this.g.setRequestHeader(ot,Et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pn(this),this.u=!0,this.g.send(p),this.u=!1}catch(ot){$l(this,ot)}};function $l(p,E){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=E,p.m=5,Pr(p),is(p)}function Pr(p){p.A||(p.A=!0,fe(p,"complete"),fe(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,fe(this,"complete"),fe(this,"abort"),is(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),is(this,!0)),de.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?$t(this):this.bb())},n.bb=function(){$t(this)};function $t(p){if(p.h&&typeof c<"u"&&(!p.v[1]||Sn(p)!=4||p.Z()!=2)){if(p.u&&Sn(p)==4)bn(p.Ea,0,p);else if(fe(p,"readystatechange"),Sn(p)==4){p.h=!1;try{const Et=p.Z();t:switch(Et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break t;default:E=!1}var x;if(!(x=E)){var k;if(k=Et===0){var Q=String(p.D).match(be)[1]||null;!Q&&d.self&&d.self.location&&(Q=d.self.location.protocol.slice(0,-1)),k=!Or.test(Q?Q.toLowerCase():"")}x=k}if(x)fe(p,"complete"),fe(p,"success");else{p.m=6;try{var ot=2<Sn(p)?p.g.statusText:""}catch{ot=""}p.l=ot+" ["+p.Z()+"]",Pr(p)}}finally{is(p)}}}}function is(p,E){if(p.g){pn(p);const x=p.g,k=p.v[0]?()=>{}:null;p.g=null,p.v=null,E||fe(p,"ready");try{x.onreadystatechange=k}catch{}}}function pn(p){p.I&&(d.clearTimeout(p.I),p.I=null)}n.isActive=function(){return!!this.g};function Sn(p){return p.g?p.g.readyState:0}n.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var E=this.g.responseText;return p&&E.indexOf(p)==0&&(E=E.substring(p.length)),ga(E)}};function $o(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function oc(p){const E={};p=(p.g&&2<=Sn(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<p.length;k++){if(q(p[k]))continue;var x=H(p[k]);const Q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const ot=E[Q]||[];E[Q]=ot,ot.push(x)}V(E,function(k){return k.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rs(p,E,x){return x&&x.internalChannelParams&&x.internalChannelParams[p]||E}function Sa(p){this.Aa=0,this.i=[],this.j=new ci,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rs("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rs("baseRetryDelayMs",5e3,p),this.cb=Rs("retryDelaySeedMs",1e4,p),this.Wa=Rs("forwardChannelMaxRetries",2,p),this.wa=Rs("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Ji(p&&p.concurrentRequestLimit),this.Da=new Ss,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Sa.prototype,n.la=8,n.G=1,n.connect=function(p,E,x,k){ke(0),this.W=p,this.H=E||{},x&&k!==void 0&&(this.H.OSID=x,this.H.OAID=k),this.F=this.X,this.I=Oa(this,null,this.W),Js(this)};function Aa(p){if(Kl(p),p.G==3){var E=p.U++,x=Le(p.I);if(Ut(x,"SID",p.K),Ut(x,"RID",E),Ut(x,"TYPE","terminate"),Dr(p,x),E=new Tn(p,p.j,E),E.L=2,E.v=ei(Le(x)),x=!1,d.navigator&&d.navigator.sendBeacon)try{x=d.navigator.sendBeacon(E.v.toString(),"")}catch{}!x&&d.Image&&(new Image().src=E.v,x=!0),x||(E.g=Ql(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Rr(E)}Xl(p)}function xa(p){p.g&&(tr(p),p.g.cancel(),p.g=null)}function Kl(p){xa(p),p.u&&(d.clearTimeout(p.u),p.u=null),Ia(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&d.clearTimeout(p.s),p.s=null)}function Js(p){if(!Cr(p.h)&&!p.s){p.s=!0;var E=p.Ga;yt||B(),dt||(yt(),dt=!0),Vt.add(E,p),p.B=0}}function lc(p,E){return ts(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=E.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Ke(S(p.Ga,p,E),Ma(p,p.B)),p.B++,!0)}n.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Q=new Tn(this,this.j,p);let ot=this.o;if(this.S&&(ot?(ot=P(ot),U(ot,this.S)):ot=this.S),this.m!==null||this.O||(Q.H=ot,ot=null),this.P)t:{for(var E=0,x=0;x<this.i.length;x++){e:{var k=this.i[x];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break e}k=void 0}if(k===void 0)break;if(E+=k,4096<E){E=x;break t}if(E===4096||x===this.i.length-1){E=x+1;break t}}E=1e3}else E=1e3;E=Ko(this,Q,E),x=Le(this.I),Ut(x,"RID",p),Ut(x,"CVER",22),this.D&&Ut(x,"X-HTTP-Session-Id",this.D),Dr(this,x),ot&&(this.O?E="headers="+encodeURIComponent(String(Ea(ot)))+"&"+E:this.m&&tn(x,this.m,ot)),_e(this.h,Q),this.Ua&&Ut(x,"TYPE","init"),this.P?(Ut(x,"$req",E),Ut(x,"SID","null"),Q.T=!0,Ii(Q,x,null)):Ii(Q,x,E),this.G=2}}else this.G==3&&(p?Gn(this,p):this.i.length==0||Cr(this.h)||Gn(this))};function Gn(p,E){var x;E?x=E.l:x=p.U++;const k=Le(p.I);Ut(k,"SID",p.K),Ut(k,"RID",x),Ut(k,"AID",p.T),Dr(p,k),p.m&&p.o&&tn(k,p.m,p.o),x=new Tn(p,p.j,x,p.B+1),p.m===null&&(x.H=p.o),E&&(p.i=E.D.concat(p.i)),E=Ko(p,x,1e3),x.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),_e(p.h,x),Ii(x,k,E)}function Dr(p,E){p.H&&bt(p.H,function(x,k){Ut(E,k,x)}),p.l&&Gt({},function(x,k){Ut(E,k,x)})}function Ko(p,E,x){x=Math.min(p.i.length,x);var k=p.l?S(p.l.Na,p.l,p):null;t:{var Q=p.i;let ot=-1;for(;;){const Et=["count="+x];ot==-1?0<x?(ot=Q[0].g,Et.push("ofs="+ot)):ot=0:Et.push("ofs="+ot);let se=!0;for(let Xe=0;Xe<x;Xe++){let re=Q[Xe].g;const ye=Q[Xe].map;if(re-=ot,0>re)ot=Math.max(0,Q[Xe].g-100),se=!1;else try{fi(ye,Et,"req"+re+"_")}catch{k&&k(ye)}}if(se){k=Et.join("&");break t}}}return p=p.i.splice(0,x),E.D=p,k}function Li(p){if(!p.g&&!p.u){p.Y=1;var E=p.Fa;yt||B(),dt||(yt(),dt=!0),Vt.add(E,p),p.v=0}}function Ra(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Ke(S(p.Fa,p),Ma(p,p.v)),p.v++,!0)}n.Fa=function(){if(this.u=null,Ca(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Ke(S(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),xa(this),Ca(this))};function tr(p){p.A!=null&&(d.clearTimeout(p.A),p.A=null)}function Ca(p){p.g=new Tn(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var E=Le(p.qa);Ut(E,"RID","rpc"),Ut(E,"SID",p.K),Ut(E,"AID",p.T),Ut(E,"CI",p.F?"0":"1"),!p.F&&p.ja&&Ut(E,"TO",p.ja),Ut(E,"TYPE","xmlhttp"),Dr(p,E),p.m&&p.o&&tn(E,p.m,p.o),p.L&&(p.g.I=p.L);var x=p.g;p=p.ia,x.L=1,x.v=ei(Le(E)),x.m=null,x.P=!0,Xi(x,p)}n.Za=function(){this.C!=null&&(this.C=null,xa(this),Ra(this),ke(19))};function Ia(p){p.C!=null&&(d.clearTimeout(p.C),p.C=null)}function Xo(p,E){var x=null;if(p.g==E){Ia(p),tr(p),p.g=null;var k=2}else if(te(p.h,E))x=E.D,on(p.h,E),k=1;else return;if(p.G!=0){if(E.o)if(k==1){x=E.m?E.m.length:0,E=Date.now()-E.F;var Q=p.B;k=Gs(),fe(k,new Je(k,x)),Js(p)}else Li(p);else if(Q=E.s,Q==3||Q==0&&0<E.X||!(k==1&&lc(p,E)||k==2&&Ra(p)))switch(x&&0<x.length&&(E=p.h,E.i=E.i.concat(x)),Q){case 1:Cs(p,5);break;case 4:Cs(p,10);break;case 3:Cs(p,6);break;default:Cs(p,2)}}}function Ma(p,E){let x=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(x*=2),x*E}function Cs(p,E){if(p.j.info("Error code "+E),E==2){var x=S(p.fb,p),k=p.Xa;const Q=!k;k=new Be(k||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ir(k,"https"),ei(k),Q?ue(k.toString(),x):hi(k.toString(),x)}else ke(2);p.G=0,p.l&&p.l.sa(E),Xl(p),Kl(p)}n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))};function Xl(p){if(p.G=0,p.ka=[],p.l){const E=es(p.h);(E.length!=0||p.i.length!=0)&&(N(p.ka,E),N(p.ka,p.i),p.h.i.length=0,D(p.i),p.i.length=0),p.l.ra()}}function Oa(p,E,x){var k=x instanceof Be?Le(x):new Be(x);if(k.g!="")E&&(k.g=E+"."+k.g),Mi(k,k.s);else{var Q=d.location;k=Q.protocol,E=E?E+"."+Q.hostname:Q.hostname,Q=+Q.port;var ot=new Be(null);k&&Ir(ot,k),E&&(ot.g=E),Q&&Mi(ot,Q),x&&(ot.l=x),k=ot}return x=p.D,E=p.ya,x&&E&&Ut(k,x,E),Ut(k,"VER",p.la),Dr(p,k),k}function Ql(p,E,x){if(E&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=p.Ca&&!p.pa?new de(new qn({eb:x})):new de(p.pa),E.Ha(p.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qo(){}n=Qo.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function kr(){}kr.prototype.g=function(p,E){return new ln(p,E)};function ln(p,E){De.call(this),this.g=new Sa(E),this.l=p,this.h=E&&E.messageUrlParams||null,p=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(p?p["X-WebChannel-Content-Type"]=E.messageContentType:p={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(p?p["X-WebChannel-Client-Profile"]=E.va:p={"X-WebChannel-Client-Profile":E.va}),this.g.S=p,(p=E&&E.Sb)&&!q(p)&&(this.g.m=p),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!q(E)&&(this.g.D=E,p=this.h,p!==null&&E in p&&(p=this.h,E in p&&delete p[E])),this.j=new Zn(this)}M(ln,De),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Aa(this.g)},ln.prototype.o=function(p){var E=this.g;if(typeof p=="string"){var x={};x.__data__=p,p=x}else this.u&&(x={},x.__data__=ui(p),p=x);E.i.push(new $s(E.Ya++,p)),E.G==3&&Js(E)},ln.prototype.N=function(){this.g.l=null,delete this.j,Aa(this.g),delete this.g,ln.aa.N.call(this)};function ss(p){$i.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var E=p.__sm__;if(E){t:{for(const x in E){p=x;break t}p=void 0}(this.i=p)&&(p=this.i,E=E!==null&&p in E?E[p]:void 0),this.data=E}else this.data=p}M(ss,$i);function Jl(){jo.call(this),this.status=1}M(Jl,jo);function Zn(p){this.g=p}M(Zn,Qo),Zn.prototype.ua=function(){fe(this.g,"a")},Zn.prototype.ta=function(p){fe(this.g,new ss(p))},Zn.prototype.sa=function(p){fe(this.g,new Jl)},Zn.prototype.ra=function(){fe(this.g,"b")},kr.prototype.createWebChannel=kr.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,_1=function(){return new kr},g1=function(){return Gs()},p1=Ki,b_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,Dd=Ts,Ri.COMPLETE="complete",m1=Ri,_a.EventType=Yi,Yi.OPEN="a",Yi.CLOSE="b",Yi.ERROR="c",Yi.MESSAGE="d",De.prototype.listen=De.prototype.K,rh=_a,de.prototype.listenOnce=de.prototype.L,de.prototype.getLastError=de.prototype.Ka,de.prototype.getLastErrorCode=de.prototype.Ba,de.prototype.getStatus=de.prototype.Z,de.prototype.getResponseJson=de.prototype.Oa,de.prototype.getResponseText=de.prototype.oa,de.prototype.send=de.prototype.ea,de.prototype.setWithCredentials=de.prototype.Ha,d1=de}).apply(typeof hd<"u"?hd:typeof self<"u"?self:typeof window<"u"?window:{});const WT="@firebase/firestore",YT="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Kn.UNAUTHENTICATED=new Kn(null),Kn.GOOGLE_CREDENTIALS=new Kn("google-credentials-uid"),Kn.FIRST_PARTY=new Kn("first-party-uid"),Kn.MOCK_USER=new Kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tc="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new Cm("@firebase/firestore");function Pu(){return Il.logLevel}function Rt(n,...t){if(Il.logLevel<=ae.DEBUG){const e=t.map(_y);Il.debug(`Firestore (${tc}): ${n}`,...e)}}function la(n,...t){if(Il.logLevel<=ae.ERROR){const e=t.map(_y);Il.error(`Firestore (${tc}): ${n}`,...e)}}function ju(n,...t){if(Il.logLevel<=ae.WARN){const e=t.map(_y);Il.warn(`Firestore (${tc}): ${n}`,...e)}}function _y(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,y1(n,i,e)}function y1(n,t,e){let i=`FIRESTORE (${tc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw la(i),new Error(i)}function ve(n,t,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,n||y1(t,r,i)}function Wt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends Fs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class BO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Kn.UNAUTHENTICATED))}shutdown(){}}class UO{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class HO{constructor(t){this.t=t,this.currentUser=Kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ve(this.o===void 0,42304);let i=this.i;const r=m=>this.i!==i?(i=this.i,e(m)):Promise.resolve();let l=new ia;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ia,t.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const m=l;t.enqueueRetryable(async()=>{await m.promise,await r(this.currentUser)})},d=m=>{Rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(Rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ia)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ve(typeof i.accessToken=="string",31837,{l:i}),new v1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ve(t===null||typeof t=="string",2055,{h:t}),new Kn(t)}}class jO{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=Kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FO{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new jO(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Kn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $T{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qO{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ns(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){ve(this.o===void 0,3512);const i=l=>{l.error!=null&&Rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Rt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>i(l))};const r=l=>{Rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>r(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):Rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $T(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ve(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new $T(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=GO(40);for(let l=0;l<r.length;++l)i.length<20&&r[l]<e&&(i+=t.charAt(r[l]%62))}return i}}function Jt(n,t){return n<t?-1:n>t?1:0}function T_(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),r=t.codePointAt(e);if(i!==r){if(i<128&&r<128)return Jt(i,r);{const l=b1(),c=ZO(l.encode(KT(n,e)),l.encode(KT(t,e)));return c!==0?c:Jt(i,r)}}e+=i>65535?2:1}return Jt(n.length,t.length)}function KT(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function ZO(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Jt(n[e],t[e]);return Jt(n.length,t.length)}function Fu(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=-62135596800,QT=1e6;class an{static now(){return an.fromMillis(Date.now())}static fromDate(t){return an.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*QT);return new an(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ct(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ct(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<XT)throw new Ct(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ct(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/QT}_compareTo(t){return this.seconds===t.seconds?Jt(this.nanoseconds,t.nanoseconds):Jt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-XT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{static fromTimestamp(t){return new Zt(t)}static min(){return new Zt(new an(0,0))}static max(){return new Zt(new an(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="__name__";class fr{constructor(t,e,i){e===void 0?e=0:e>t.length&&Ht(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&Ht(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return fr.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof fr?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const l=fr.compareSegments(t.get(r),e.get(r));if(l!==0)return l}return Jt(t.length,e.length)}static compareSegments(t,e){const i=fr.isNumericId(t),r=fr.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?fr.extractNumericId(t).compare(fr.extractNumericId(e)):T_(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return To.fromString(t.substring(4,t.length-2))}}class He extends fr{construct(t,e,i){return new He(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ct(pt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new He(e)}static emptyPath(){return new He([])}}const WO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends fr{construct(t,e,i){return new Vn(t,e,i)}static isValidIdentifier(t){return WO.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===JT}static keyField(){return new Vn([JT])}static fromServerFormat(t){const e=[];let i="",r=0;const l=()=>{if(i.length===0)throw new Ct(pt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const d=t[r];if(d==="\\"){if(r+1===t.length)throw new Ct(pt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[r+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ct(pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,r+=2}else d==="`"?(c=!c,r++):d!=="."||c?(i+=d,r++):(l(),r++)}if(l(),c)throw new Ct(pt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Vn(e)}static emptyPath(){return new Vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t){this.path=t}static fromPath(t){return new Lt(He.fromString(t))}static fromName(t){return new Lt(He.fromString(t).popFirst(5))}static empty(){return new Lt(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&He.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return He.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Lt(new He(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=-1;function YO(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Zt.fromTimestamp(i===1e9?new an(e+1,0):new an(e,i));return new Ro(r,Lt.empty(),t)}function $O(n){return new Ro(n.readTime,n.key,Ih)}class Ro{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Ro(Zt.min(),Lt.empty(),Ih)}static max(){return new Ro(Zt.max(),Lt.empty(),Ih)}}function KO(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Lt.comparator(n.documentKey,t.documentKey),e!==0?e:Jt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(n){if(n.code!==pt.FAILED_PRECONDITION||n.message!==XO)throw n;Rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ht(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new gt((i,r)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(i,r)},this.catchCallback=l=>{this.wrapFailure(e,l).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof gt?e:gt.resolve(e)}catch(e){return gt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):gt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):gt.reject(e)}static resolve(t){return new gt((e,i)=>{e(t)})}static reject(t){return new gt((e,i)=>{i(t)})}static waitFor(t){return new gt((e,i)=>{let r=0,l=0,c=!1;t.forEach(d=>{++r,d.next(()=>{++l,c&&l===r&&e()},m=>i(m))}),c=!0,l===r&&e()})}static or(t){let e=gt.resolve(!1);for(const i of t)e=e.next(r=>r?gt.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,l)=>{i.push(e.call(this,r,l))}),this.waitFor(i)}static mapArray(t,e){return new gt((i,r)=>{const l=t.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;e(t[g]).next(b=>{c[g]=b,++d,d===l&&i(c)},b=>r(b))}})}static doWhile(t,e){return new gt((i,r)=>{const l=()=>{t()===!0?e().next(()=>{l()},r):i()};l()})}}function JO(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function nc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>e.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Im.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=-1;function Mm(n){return n==null}function Yd(n){return n===0&&1/n==-1/0}function tP(n){return typeof n=="number"&&Number.isInteger(n)&&!Yd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="";function eP(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=tw(t)),t=nP(n.get(e),t);return tw(t)}function nP(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const l=n.charAt(r);switch(l){case"\0":e+="";break;case w1:e+="";break;default:e+=l}}return e}function tw(n){return n+w1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Ul(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function E1(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t,e){this.comparator=t,this.root=e||Nn.EMPTY}insert(t,e){return new $e(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(t){return new $e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fd(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fd(this.root,t,this.comparator,!1)}getReverseIterator(){return new fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fd(this.root,t,this.comparator,!0)}}class fd{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,e&&r&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Nn{constructor(t,e,i,r,l){this.key=t,this.value=e,this.color=i??Nn.RED,this.left=r??Nn.EMPTY,this.right=l??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,l){return new Nn(t??this.key,e??this.value,i??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const l=i(t,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(t,e,i),null):l===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Nn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ht(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ht(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ht(27949);return t+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ht(57766)}get value(){throw Ht(16141)}get color(){throw Ht(16727)}get left(){throw Ht(29726)}get right(){throw Ht(36894)}copy(t,e,i,r,l){return this}insert(t,e,i){return new Nn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t){this.comparator=t,this.data=new $e(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new nw(this.data.getIterator())}getIteratorFrom(t){return new nw(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof vn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,l=i.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new vn(this.comparator);return e.data=t,e}}class nw{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(t){this.fields=t,t.sort(Vn.comparator)}static empty(){return new Vs([])}unionWith(t){let e=new vn(Vn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Vs(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Fu(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new S1("Invalid base64 string: "+l):l}}(t);return new Bn(e)}static fromUint8Array(t){const e=function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l}(t);return new Bn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Jt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Bn.EMPTY_BYTE_STRING=new Bn("");const iP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Co(n){if(ve(!!n,39018),typeof n=="string"){let t=0;const e=iP.exec(n);if(ve(!!e,46558,{timestamp:n}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:sn(n.seconds),nanos:sn(n.nanos)}}function sn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Io(n){return typeof n=="string"?Bn.fromBase64String(n):Bn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="server_timestamp",x1="__type__",R1="__previous_value__",C1="__local_write_time__";function vy(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[x1])===null||e===void 0?void 0:e.stringValue)===A1}function Om(n){const t=n.mapValue.fields[R1];return vy(t)?Om(t):t}function Mh(n){const t=Co(n.mapValue.fields[C1].timestampValue);return new an(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(t,e,i,r,l,c,d,m,g,b){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=b}}const $d="(default)";class Oh{constructor(t,e){this.projectId=t,this.database=e||$d}static empty(){return new Oh("","")}get isDefaultDatabase(){return this.database===$d}isEqual(t){return t instanceof Oh&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="__type__",rP="__max__",dd={mapValue:{}},M1="__vector__",Kd="value";function Mo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vy(n)?4:oP(n)?9007199254740991:aP(n)?10:11:Ht(28295,{value:n})}function vr(n,t){if(n===t)return!0;const e=Mo(n);if(e!==Mo(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Mh(n).isEqual(Mh(t));case 3:return function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=Co(r.timestampValue),d=Co(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,l){return Io(r.bytesValue).isEqual(Io(l.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,l){return sn(r.geoPointValue.latitude)===sn(l.geoPointValue.latitude)&&sn(r.geoPointValue.longitude)===sn(l.geoPointValue.longitude)}(n,t);case 2:return function(r,l){if("integerValue"in r&&"integerValue"in l)return sn(r.integerValue)===sn(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=sn(r.doubleValue),d=sn(l.doubleValue);return c===d?Yd(c)===Yd(d):isNaN(c)&&isNaN(d)}return!1}(n,t);case 9:return Fu(n.arrayValue.values||[],t.arrayValue.values||[],vr);case 10:case 11:return function(r,l){const c=r.mapValue.fields||{},d=l.mapValue.fields||{};if(ew(c)!==ew(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!vr(c[m],d[m])))return!1;return!0}(n,t);default:return Ht(52216,{left:n})}}function Ph(n,t){return(n.values||[]).find(e=>vr(e,t))!==void 0}function qu(n,t){if(n===t)return 0;const e=Mo(n),i=Mo(t);if(e!==i)return Jt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Jt(n.booleanValue,t.booleanValue);case 2:return function(l,c){const d=sn(l.integerValue||l.doubleValue),m=sn(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,t);case 3:return iw(n.timestampValue,t.timestampValue);case 4:return iw(Mh(n),Mh(t));case 5:return T_(n.stringValue,t.stringValue);case 6:return function(l,c){const d=Io(l),m=Io(c);return d.compareTo(m)}(n.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const b=Jt(d[g],m[g]);if(b!==0)return b}return Jt(d.length,m.length)}(n.referenceValue,t.referenceValue);case 8:return function(l,c){const d=Jt(sn(l.latitude),sn(c.latitude));return d!==0?d:Jt(sn(l.longitude),sn(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return sw(n.arrayValue,t.arrayValue);case 10:return function(l,c){var d,m,g,b;const w=l.fields||{},S=c.fields||{},C=(d=w[Kd])===null||d===void 0?void 0:d.arrayValue,M=(m=S[Kd])===null||m===void 0?void 0:m.arrayValue,D=Jt(((g=C==null?void 0:C.values)===null||g===void 0?void 0:g.length)||0,((b=M==null?void 0:M.values)===null||b===void 0?void 0:b.length)||0);return D!==0?D:sw(C,M)}(n.mapValue,t.mapValue);case 11:return function(l,c){if(l===dd.mapValue&&c===dd.mapValue)return 0;if(l===dd.mapValue)return 1;if(c===dd.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},b=Object.keys(g);m.sort(),b.sort();for(let w=0;w<m.length&&w<b.length;++w){const S=T_(m[w],b[w]);if(S!==0)return S;const C=qu(d[m[w]],g[b[w]]);if(C!==0)return C}return Jt(m.length,b.length)}(n.mapValue,t.mapValue);default:throw Ht(23264,{Pe:e})}}function iw(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Jt(n,t);const e=Co(n),i=Co(t),r=Jt(e.seconds,i.seconds);return r!==0?r:Jt(e.nanos,i.nanos)}function sw(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const l=qu(e[r],i[r]);if(l)return l}return Jt(e.length,i.length)}function Gu(n){return w_(n)}function w_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=Co(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Io(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Lt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const l of e.values||[])r?r=!1:i+=",",i+=w_(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",l=!0;for(const c of i)l?l=!1:r+=",",r+=`${c}:${w_(e.fields[c])}`;return r+"}"}(n.mapValue):Ht(61005,{value:n})}function kd(n){switch(Mo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Om(n);return t?16+kd(t):16;case 5:return 2*n.stringValue.length;case 6:return Io(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,l)=>r+kd(l),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return Ul(i.fields,(l,c)=>{r+=l.length+kd(c)}),r}(n.mapValue);default:throw Ht(13486,{value:n})}}function rw(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function E_(n){return!!n&&"integerValue"in n}function by(n){return!!n&&"arrayValue"in n}function aw(n){return!!n&&"nullValue"in n}function ow(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ld(n){return!!n&&"mapValue"in n}function aP(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[I1])===null||e===void 0?void 0:e.stringValue)===M1}function gh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Ul(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=gh(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=gh(n.arrayValue.values[e]);return t}return Object.assign({},n)}function oP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===rP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(t){this.value=t}static empty(){return new ms({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Ld(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=gh(e)}setAll(t){let e=Vn.emptyPath(),i={},r=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const m=this.getFieldsMap(e);this.applyChanges(m,i,r),i={},r=[],e=d.popLast()}c?i[d.lastSegment()]=gh(c):r.push(d.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,i,r)}delete(t){const e=this.field(t.popLast());Ld(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return vr(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Ld(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Ul(e,(r,l)=>t[r]=l);for(const r of i)delete t[r]}clone(){return new ms(gh(this.value))}}function O1(n){const t=[];return Ul(n.fields,(e,i)=>{const r=new Vn([e]);if(Ld(i)){const l=O1(i.mapValue).fields;if(l.length===0)t.push(r);else for(const c of l)t.push(r.child(c))}else t.push(r)}),new Vs(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t,e,i,r,l,c,d){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new Xn(t,0,Zt.min(),Zt.min(),Zt.min(),ms.empty(),0)}static newFoundDocument(t,e,i,r){return new Xn(t,1,e,Zt.min(),i,r,0)}static newNoDocument(t,e){return new Xn(t,2,e,Zt.min(),Zt.min(),ms.empty(),0)}static newUnknownDocument(t,e){return new Xn(t,3,e,Zt.min(),Zt.min(),ms.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Xn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(t,e){this.position=t,this.inclusive=e}}function lw(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const l=t[r],c=n.position[r];if(l.field.isKeyField()?i=Lt.comparator(Lt.fromName(c.referenceValue),e.key):i=qu(c,e.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function uw(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!vr(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(t,e="asc"){this.field=t,this.dir=e}}function lP(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{}class fn extends P1{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new cP(t,e,i):e==="array-contains"?new dP(t,i):e==="in"?new mP(t,i):e==="not-in"?new pP(t,i):e==="array-contains-any"?new gP(t,i):new fn(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new hP(t,i):new fP(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(qu(e,this.value)):e!==null&&Mo(this.value)===Mo(e)&&this.matchesComparison(qu(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ht(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hs extends P1{constructor(t,e){super(),this.filters=t,this.op=e,this.Te=null}static create(t,e){return new Hs(t,e)}matches(t){return D1(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function D1(n){return n.op==="and"}function k1(n){return uP(n)&&D1(n)}function uP(n){for(const t of n.filters)if(t instanceof Hs)return!1;return!0}function S_(n){if(n instanceof fn)return n.field.canonicalString()+n.op.toString()+Gu(n.value);if(k1(n))return n.filters.map(t=>S_(t)).join(",");{const t=n.filters.map(e=>S_(e)).join(",");return`${n.op}(${t})`}}function L1(n,t){return n instanceof fn?function(i,r){return r instanceof fn&&i.op===r.op&&i.field.isEqual(r.field)&&vr(i.value,r.value)}(n,t):n instanceof Hs?function(i,r){return r instanceof Hs&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((l,c,d)=>l&&L1(c,r.filters[d]),!0):!1}(n,t):void Ht(19439)}function N1(n){return n instanceof fn?function(e){return`${e.field.canonicalString()} ${e.op} ${Gu(e.value)}`}(n):n instanceof Hs?function(e){return e.op.toString()+" {"+e.getFilters().map(N1).join(" ,")+"}"}(n):"Filter"}class cP extends fn{constructor(t,e,i){super(t,e,i),this.key=Lt.fromName(i.referenceValue)}matches(t){const e=Lt.comparator(t.key,this.key);return this.matchesComparison(e)}}class hP extends fn{constructor(t,e){super(t,"in",e),this.keys=V1("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class fP extends fn{constructor(t,e){super(t,"not-in",e),this.keys=V1("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function V1(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>Lt.fromName(i.referenceValue))}class dP extends fn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return by(e)&&Ph(e.arrayValue,this.value)}}class mP extends fn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Ph(this.value.arrayValue,e)}}class pP extends fn{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ph(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Ph(this.value.arrayValue,e)}}class gP extends fn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!by(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Ph(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(t,e=null,i=[],r=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function cw(n,t=null,e=[],i=[],r=null,l=null,c=null){return new _P(n,t,e,i,r,l,c)}function Ty(n){const t=Wt(n);if(t.Ie===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>S_(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Mm(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Gu(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Gu(i)).join(",")),t.Ie=e}return t.Ie}function wy(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!lP(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!L1(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!uw(n.startAt,t.startAt)&&uw(n.endAt,t.endAt)}function A_(n){return Lt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t,e=null,i=[],r=[],l=null,c="F",d=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function yP(n,t,e,i,r,l,c,d){return new ic(n,t,e,i,r,l,c,d)}function Pm(n){return new ic(n)}function hw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function z1(n){return n.collectionGroup!==null}function _h(n){const t=Wt(n);if(t.Ee===null){t.Ee=[];const e=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),e.add(l.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new vn(Vn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(t).forEach(l=>{e.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new Dh(l,i))}),e.has(Vn.keyField().canonicalString())||t.Ee.push(new Dh(Vn.keyField(),i))}return t.Ee}function mr(n){const t=Wt(n);return t.de||(t.de=vP(t,_h(n))),t.de}function vP(n,t){if(n.limitType==="F")return cw(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const l=r.dir==="desc"?"asc":"desc";return new Dh(r.field,l)});const e=n.endAt?new Xd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Xd(n.startAt.position,n.startAt.inclusive):null;return cw(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function x_(n,t){const e=n.filters.concat([t]);return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function R_(n,t,e){return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Dm(n,t){return wy(mr(n),mr(t))&&n.limitType===t.limitType}function B1(n){return`${Ty(mr(n))}|lt:${n.limitType}`}function Du(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>N1(r)).join(", ")}]`),Mm(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Gu(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Gu(r)).join(",")),`Target(${i})`}(mr(n))}; limitType=${n.limitType})`}function km(n,t){return t.isFoundDocument()&&function(i,r){const l=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Lt.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,t)&&function(i,r){for(const l of _h(i))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0}(n,t)&&function(i,r){for(const l of i.filters)if(!l.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(c,d,m){const g=lw(c,d,m);return c.inclusive?g<=0:g<0}(i.startAt,_h(i),r)||i.endAt&&!function(c,d,m){const g=lw(c,d,m);return c.inclusive?g>=0:g>0}(i.endAt,_h(i),r))}(n,t)}function bP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function U1(n){return(t,e)=>{let i=!1;for(const r of _h(n)){const l=TP(r,t,e);if(l!==0)return l;i=i||r.field.isKeyField()}return 0}}function TP(n,t,e){const i=n.field.isKeyField()?Lt.comparator(t.key,e.key):function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?qu(m,g):Ht(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ht(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,l]of i)if(this.equalsFn(r,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return void(r[l]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Ul(this.inner,(e,i)=>{for(const[r,l]of i)t(r,l)})}isEmpty(){return E1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new $e(Lt.comparator);function ua(){return wP}const H1=new $e(Lt.comparator);function ah(...n){let t=H1;for(const e of n)t=t.insert(e.key,e);return t}function j1(n){let t=H1;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Sl(){return yh()}function F1(){return yh()}function yh(){return new Hl(n=>n.toString(),(n,t)=>n.isEqual(t))}const EP=new $e(Lt.comparator),SP=new vn(Lt.comparator);function oe(...n){let t=SP;for(const e of n)t=t.add(e);return t}const AP=new vn(Jt);function xP(){return AP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yd(t)?"-0":t}}function q1(n){return{integerValue:""+n}}function RP(n,t){return tP(t)?q1(t):Ey(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(){this._=void 0}}function CP(n,t,e){return n instanceof kh?function(r,l){const c={fields:{[x1]:{stringValue:A1},[C1]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&vy(l)&&(l=Om(l)),l&&(c.fields[R1]=l),{mapValue:c}}(e,t):n instanceof Lh?Z1(n,t):n instanceof Nh?W1(n,t):function(r,l){const c=G1(r,l),d=fw(c)+fw(r.Re);return E_(c)&&E_(r.Re)?q1(d):Ey(r.serializer,d)}(n,t)}function IP(n,t,e){return n instanceof Lh?Z1(n,t):n instanceof Nh?W1(n,t):e}function G1(n,t){return n instanceof Qd?function(i){return E_(i)||function(l){return!!l&&"doubleValue"in l}(i)}(t)?t:{integerValue:0}:null}class kh extends Lm{}class Lh extends Lm{constructor(t){super(),this.elements=t}}function Z1(n,t){const e=Y1(t);for(const i of n.elements)e.some(r=>vr(r,i))||e.push(i);return{arrayValue:{values:e}}}class Nh extends Lm{constructor(t){super(),this.elements=t}}function W1(n,t){let e=Y1(t);for(const i of n.elements)e=e.filter(r=>!vr(r,i));return{arrayValue:{values:e}}}class Qd extends Lm{constructor(t,e){super(),this.serializer=t,this.Re=e}}function fw(n){return sn(n.integerValue||n.doubleValue)}function Y1(n){return by(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(t,e){this.field=t,this.transform=e}}function OP(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Lh&&r instanceof Lh||i instanceof Nh&&r instanceof Nh?Fu(i.elements,r.elements,vr):i instanceof Qd&&r instanceof Qd?vr(i.Re,r.Re):i instanceof kh&&r instanceof kh}(n.transform,t.transform)}class PP{constructor(t,e){this.version=t,this.transformResults=e}}class sa{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new sa}static exists(t){return new sa(void 0,t)}static updateTime(t){return new sa(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Nd(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Nm{}function $1(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new X1(n.key,sa.none()):new Kh(n.key,n.data,sa.none());{const e=n.data,i=ms.empty();let r=new vn(Vn.comparator);for(let l of t.fields)if(!r.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?i.delete(l):i.set(l,c),r=r.add(l)}return new jl(n.key,i,new Vs(r.toArray()),sa.none())}}function DP(n,t,e){n instanceof Kh?function(r,l,c){const d=r.value.clone(),m=mw(r.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,t,e):n instanceof jl?function(r,l,c){if(!Nd(r.precondition,l))return void l.convertToUnknownDocument(c.version);const d=mw(r.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(K1(r)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,t,e):function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function vh(n,t,e,i){return n instanceof Kh?function(l,c,d,m){if(!Nd(l.precondition,c))return d;const g=l.value.clone(),b=pw(l.fieldTransforms,m,c);return g.setAll(b),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,t,e,i):n instanceof jl?function(l,c,d,m){if(!Nd(l.precondition,c))return d;const g=pw(l.fieldTransforms,m,c),b=c.data;return b.setAll(K1(l)),b.setAll(g),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(w=>w.field))}(n,t,e,i):function(l,c,d){return Nd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,t,e)}function kP(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),l=G1(i.transform,r||null);l!=null&&(e===null&&(e=ms.empty()),e.set(i.field,l))}return e||null}function dw(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Fu(i,r,(l,c)=>OP(l,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Kh extends Nm{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jl extends Nm{constructor(t,e,i,r,l=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function K1(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function mw(n,t,e){const i=new Map;ve(n.length===e.length,32656,{Ve:e.length,me:n.length});for(let r=0;r<e.length;r++){const l=n[r],c=l.transform,d=t.data.field(l.field);i.set(l.field,IP(c,d,e[r]))}return i}function pw(n,t,e){const i=new Map;for(const r of n){const l=r.transform,c=e.data.field(r.field);i.set(r.field,CP(l,c,t))}return i}class X1 extends Nm{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LP extends Nm{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(t.key)&&DP(l,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=vh(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=vh(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=F1();return this.mutations.forEach(r=>{const l=t.get(r.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=e.has(r.key)?null:d;const m=$1(c,d);m!==null&&i.set(r.key,m),c.isValidDocument()||c.convertToNoDocument(Zt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),oe())}isEqual(t){return this.batchId===t.batchId&&Fu(this.mutations,t.mutations,(e,i)=>dw(e,i))&&Fu(this.baseMutations,t.baseMutations,(e,i)=>dw(e,i))}}class Sy{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){ve(t.mutations.length===i.length,58842,{fe:t.mutations.length,ge:i.length});let r=function(){return EP}();const l=t.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,i[c].version);return new Sy(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,he;function BP(n){switch(n){case pt.OK:return Ht(64938);case pt.CANCELLED:case pt.UNKNOWN:case pt.DEADLINE_EXCEEDED:case pt.RESOURCE_EXHAUSTED:case pt.INTERNAL:case pt.UNAVAILABLE:case pt.UNAUTHENTICATED:return!1;case pt.INVALID_ARGUMENT:case pt.NOT_FOUND:case pt.ALREADY_EXISTS:case pt.PERMISSION_DENIED:case pt.FAILED_PRECONDITION:case pt.ABORTED:case pt.OUT_OF_RANGE:case pt.UNIMPLEMENTED:case pt.DATA_LOSS:return!0;default:return Ht(15467,{code:n})}}function Q1(n){if(n===void 0)return la("GRPC error has no .code"),pt.UNKNOWN;switch(n){case hn.OK:return pt.OK;case hn.CANCELLED:return pt.CANCELLED;case hn.UNKNOWN:return pt.UNKNOWN;case hn.DEADLINE_EXCEEDED:return pt.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return pt.RESOURCE_EXHAUSTED;case hn.INTERNAL:return pt.INTERNAL;case hn.UNAVAILABLE:return pt.UNAVAILABLE;case hn.UNAUTHENTICATED:return pt.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return pt.INVALID_ARGUMENT;case hn.NOT_FOUND:return pt.NOT_FOUND;case hn.ALREADY_EXISTS:return pt.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return pt.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return pt.FAILED_PRECONDITION;case hn.ABORTED:return pt.ABORTED;case hn.OUT_OF_RANGE:return pt.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return pt.UNIMPLEMENTED;case hn.DATA_LOSS:return pt.DATA_LOSS;default:return Ht(39323,{code:n})}}(he=hn||(hn={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=new To([4294967295,4294967295],0);function gw(n){const t=b1().encode(n),e=new f1;return e.update(t),new Uint8Array(e.digest())}function _w(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new To([e,i],0),new To([r,l],0)]}class Ay{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new oh(`Invalid padding: ${e}`);if(i<0)throw new oh(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new oh(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new oh(`Invalid padding when bitmap length is 0: ${e}`);this.pe=8*t.length-e,this.ye=To.fromNumber(this.pe)}we(t,e,i){let r=t.add(e.multiply(To.fromNumber(i)));return r.compare(UP)===1&&(r=new To([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const e=gw(t),[i,r]=_w(e);for(let l=0;l<this.hashCount;l++){const c=this.we(i,r,l);if(!this.be(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new Ay(l,r,e);return i.forEach(d=>c.insert(d)),c}insert(t){if(this.pe===0)return;const e=gw(t),[i,r]=_w(e);for(let l=0;l<this.hashCount;l++){const c=this.we(i,r,l);this.Se(c)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class oh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,e,i,r,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,Xh.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Vm(Zt.min(),r,new $e(Jt),ua(),oe())}}class Xh{constructor(t,e,i,r,l){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Xh(i,e,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(t,e,i,r){this.De=t,this.removedTargetIds=e,this.key=i,this.ve=r}}class J1{constructor(t,e){this.targetId=t,this.Ce=e}}class tA{constructor(t,e,i=Bn.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class yw{constructor(){this.Fe=0,this.Me=vw(),this.xe=Bn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=oe(),e=oe(),i=oe();return this.Me.forEach((r,l)=>{switch(l){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Ht(38017,{changeType:l})}}),new Xh(this.xe,this.Oe,t,e,i)}Qe(){this.Ne=!1,this.Me=vw()}$e(t,e){this.Ne=!0,this.Me=this.Me.insert(t,e)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,ve(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class HP{constructor(t){this.ze=t,this.je=new Map,this.He=ua(),this.Je=md(),this.Ye=md(),this.Ze=new $e(Jt)}Xe(t){for(const e of t.De)t.ve&&t.ve.isFoundDocument()?this.et(e,t.ve):this.tt(e,t.key,t.ve);for(const e of t.removedTargetIds)this.tt(e,t.key,t.ve)}nt(t){this.forEachTarget(t,e=>{const i=this.rt(e);switch(t.state){case 0:this.it(e)&&i.ke(t.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(t.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(e);break;case 3:this.it(e)&&(i.Ge(),i.ke(t.resumeToken));break;case 4:this.it(e)&&(this.st(e),i.ke(t.resumeToken));break;default:Ht(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.je.forEach((i,r)=>{this.it(r)&&e(r)})}ot(t){const e=t.targetId,i=t.Ce.count,r=this._t(e);if(r){const l=r.target;if(A_(l))if(i===0){const c=new Lt(l.path);this.tt(e,c,Xn.newNoDocument(c,Zt.min()))}else ve(i===1,20013,{expectedCount:i});else{const c=this.ut(e);if(c!==i){const d=this.ct(t),m=d?this.lt(d,t,c):1;if(m!==0){this.st(e);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,g)}}}}}ct(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:l=0}=e;let c,d;try{c=Io(i).toUint8Array()}catch(m){if(m instanceof S1)return ju("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Ay(c,r,l)}catch(m){return ju(m instanceof oh?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.pe===0?null:d}lt(t,e,i){return e.Ce.count===i-this.Tt(t,e.targetId)?0:2}Tt(t,e){const i=this.ze.getRemoteKeysForTarget(e);let r=0;return i.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.tt(e,l,null),r++)}),r}It(t){const e=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&A_(d.target)){const m=new Lt(d.target.path);this.Et(m).has(c)||this.dt(c,m)||this.tt(c,m,Xn.newNoDocument(m,t))}l.Le&&(e.set(c,l.qe()),l.Qe())}});let i=oe();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const g=this._t(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.He.forEach((l,c)=>c.setReadTime(t));const r=new Vm(t,e,this.Ze,this.He,i);return this.He=ua(),this.Je=md(),this.Ye=md(),this.Ze=new $e(Jt),r}et(t,e){if(!this.it(t))return;const i=this.dt(t,e.key)?2:0;this.rt(t).$e(e.key,i),this.He=this.He.insert(e.key,e),this.Je=this.Je.insert(e.key,this.Et(e.key).add(t)),this.Ye=this.Ye.insert(e.key,this.At(e.key).add(t))}tt(t,e,i){if(!this.it(t))return;const r=this.rt(t);this.dt(t,e)?r.$e(e,1):r.Ue(e),this.Ye=this.Ye.insert(e,this.At(e).delete(t)),this.Ye=this.Ye.insert(e,this.At(e).add(t)),i&&(this.He=this.He.insert(e,i))}removeTarget(t){this.je.delete(t)}ut(t){const e=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let e=this.je.get(t);return e||(e=new yw,this.je.set(t,e)),e}At(t){let e=this.Ye.get(t);return e||(e=new vn(Jt),this.Ye=this.Ye.insert(t,e)),e}Et(t){let e=this.Je.get(t);return e||(e=new vn(Jt),this.Je=this.Je.insert(t,e)),e}it(t){const e=this._t(t)!==null;return e||Rt("WatchChangeAggregator","Detected inactive target",t),e}_t(t){const e=this.je.get(t);return e&&e.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new yw),this.ze.getRemoteKeysForTarget(t).forEach(e=>{this.tt(t,e,null)})}dt(t,e){return this.ze.getRemoteKeysForTarget(t).has(e)}}function md(){return new $e(Lt.comparator)}function vw(){return new $e(Lt.comparator)}const jP={asc:"ASCENDING",desc:"DESCENDING"},FP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qP={and:"AND",or:"OR"};class GP{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function C_(n,t){return n.useProto3Json||Mm(t)?t:{value:t}}function Jd(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function eA(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function ZP(n,t){return Jd(n,t.toTimestamp())}function pr(n){return ve(!!n,49232),Zt.fromTimestamp(function(e){const i=Co(e);return new an(i.seconds,i.nanos)}(n))}function xy(n,t){return I_(n,t).canonicalString()}function I_(n,t){const e=function(r){return new He(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function nA(n){const t=He.fromString(n);return ve(oA(t),10190,{key:t.toString()}),t}function M_(n,t){return xy(n.databaseId,t.path)}function $g(n,t){const e=nA(t);if(e.get(1)!==n.databaseId.projectId)throw new Ct(pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ct(pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Lt(sA(e))}function iA(n,t){return xy(n.databaseId,t)}function WP(n){const t=nA(n);return t.length===4?He.emptyPath():sA(t)}function O_(n){return new He(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sA(n){return ve(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function bw(n,t,e){return{name:M_(n,t),fields:e.value.mapValue.fields}}function YP(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ht(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],l=function(g,b){return g.useProto3Json?(ve(b===void 0||typeof b=="string",58123),Bn.fromBase64String(b||"")):(ve(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Bn.fromUint8Array(b||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(g){const b=g.code===void 0?pt.UNKNOWN:Q1(g.code);return new Ct(b,g.message||"")}(c);e=new tA(i,r,l,d||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=$g(n,i.document.name),l=pr(i.document.updateTime),c=i.document.createTime?pr(i.document.createTime):Zt.min(),d=new ms({mapValue:{fields:i.document.fields}}),m=Xn.newFoundDocument(r,l,c,d),g=i.targetIds||[],b=i.removedTargetIds||[];e=new Vd(g,b,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=$g(n,i.document),l=i.readTime?pr(i.readTime):Zt.min(),c=Xn.newNoDocument(r,l),d=i.removedTargetIds||[];e=new Vd([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=$g(n,i.document),l=i.removedTargetIds||[];e=new Vd([],l,r,null)}else{if(!("filter"in t))return Ht(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:l}=i,c=new zP(r,l),d=i.targetId;e=new J1(d,c)}}return e}function $P(n,t){let e;if(t instanceof Kh)e={update:bw(n,t.key,t.value)};else if(t instanceof X1)e={delete:M_(n,t.key)};else if(t instanceof jl)e={update:bw(n,t.key,t.data),updateMask:sD(t.fieldMask)};else{if(!(t instanceof LP))return Ht(16599,{ft:t.type});e={verify:M_(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof kh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Lh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Nh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Qd)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Ht(20930,{transform:c.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,l){return l.updateTime!==void 0?{updateTime:ZP(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ht(27497)}(n,t.precondition)),e}function KP(n,t){return n&&n.length>0?(ve(t!==void 0,14353),n.map(e=>function(r,l){let c=r.updateTime?pr(r.updateTime):pr(l);return c.isEqual(Zt.min())&&(c=pr(l)),new PP(c,r.transformResults||[])}(e,t))):[]}function XP(n,t){return{documents:[iA(n,t.path)]}}function QP(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=iA(n,r);const l=function(g){if(g.length!==0)return aA(Hs.create(g,"and"))}(t.filters);l&&(e.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(b=>function(S){return{field:ku(S.field),direction:eD(S.dir)}}(b))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const d=C_(n,t.limit);return d!==null&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{gt:e,parent:r}}function JP(n){let t=WP(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){ve(i===1,65062);const b=e.from[0];b.allDescendants?r=b.collectionId:t=t.child(b.collectionId)}let l=[];e.where&&(l=function(w){const S=rA(w);return S instanceof Hs&&k1(S)?S.getFilters():[S]}(e.where));let c=[];e.orderBy&&(c=function(w){return w.map(S=>function(M){return new Dh(Lu(M.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(S))}(e.orderBy));let d=null;e.limit&&(d=function(w){let S;return S=typeof w=="object"?w.value:w,Mm(S)?null:S}(e.limit));let m=null;e.startAt&&(m=function(w){const S=!!w.before,C=w.values||[];return new Xd(C,S)}(e.startAt));let g=null;return e.endAt&&(g=function(w){const S=!w.before,C=w.values||[];return new Xd(C,S)}(e.endAt)),yP(t,r,c,l,d,"F",m,g)}function tD(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ht(28987,{purpose:r})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function rA(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Lu(e.unaryFilter.field);return fn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Lu(e.unaryFilter.field);return fn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Lu(e.unaryFilter.field);return fn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Lu(e.unaryFilter.field);return fn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ht(61313);default:return Ht(60726)}}(n):n.fieldFilter!==void 0?function(e){return fn.create(Lu(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ht(58110);default:return Ht(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Hs.create(e.compositeFilter.filters.map(i=>rA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ht(1026)}}(e.compositeFilter.op))}(n):Ht(30097,{filter:n})}function eD(n){return jP[n]}function nD(n){return FP[n]}function iD(n){return qP[n]}function ku(n){return{fieldPath:n.canonicalString()}}function Lu(n){return Vn.fromServerFormat(n.fieldPath)}function aA(n){return n instanceof fn?function(e){if(e.op==="=="){if(ow(e.value))return{unaryFilter:{field:ku(e.field),op:"IS_NAN"}};if(aw(e.value))return{unaryFilter:{field:ku(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ow(e.value))return{unaryFilter:{field:ku(e.field),op:"IS_NOT_NAN"}};if(aw(e.value))return{unaryFilter:{field:ku(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ku(e.field),op:nD(e.op),value:e.value}}}(n):n instanceof Hs?function(e){const i=e.getFilters().map(r=>aA(r));return i.length===1?i[0]:{compositeFilter:{op:iD(e.op),filters:i}}}(n):Ht(54877,{filter:n})}function sD(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function oA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t,e,i,r,l=Zt.min(),c=Zt.min(),d=Bn.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(t){return new go(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(t){this.wt=t}}function aD(n){const t=JP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?R_(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this.Cn=new lD}addToCollectionParentIndex(t,e){return this.Cn.add(e),gt.resolve()}getCollectionParents(t,e){return gt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return gt.resolve()}deleteFieldIndex(t,e){return gt.resolve()}deleteAllFieldIndexes(t){return gt.resolve()}createTargetIndexes(t,e){return gt.resolve()}getDocumentsMatchingTarget(t,e){return gt.resolve(null)}getIndexType(t,e){return gt.resolve(0)}getFieldIndexes(t,e){return gt.resolve([])}getNextCollectionGroupToUpdate(t){return gt.resolve(null)}getMinOffset(t,e){return gt.resolve(Ro.min())}getMinOffsetFromCollectionGroup(t,e){return gt.resolve(Ro.min())}updateCollectionGroup(t,e,i){return gt.resolve()}updateIndexEntries(t,e){return gt.resolve()}}class lD{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new vn(He.comparator),l=!r.has(i);return this.index[e]=r.add(i),l}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new vn(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lA=41943040;class yi{static withCacheSize(t){return new yi(t,yi.DEFAULT_COLLECTION_PERCENTILE,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yi.DEFAULT_COLLECTION_PERCENTILE=10,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yi.DEFAULT=new yi(lA,yi.DEFAULT_COLLECTION_PERCENTILE,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yi.DISABLED=new yi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new Zu(0)}static lr(){return new Zu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="LruGarbageCollector",uD=1048576;function Ew([n,t],[e,i]){const r=Jt(n,e);return r===0?Jt(t,i):r}class cD{constructor(t){this.Er=t,this.buffer=new vn(Ew),this.dr=0}Ar(){return++this.dr}Rr(t){const e=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();Ew(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class hD{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){Rt(ww,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){nc(e)?Rt(ww,"Ignoring IndexedDB error during garbage collection: ",e):await ec(e)}await this.mr(3e5)})}}class fD{constructor(t,e){this.gr=t,this.params=e}calculateTargetCount(t,e){return this.gr.pr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return gt.resolve(Im.le);const i=new cD(e);return this.gr.forEachTarget(t,r=>i.Rr(r.sequenceNumber)).next(()=>this.gr.yr(t,r=>i.Rr(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.gr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.gr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Rt("LruGarbageCollector","Garbage collection skipped; disabled"),gt.resolve(Tw)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tw):this.wr(t,e))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,e){let i,r,l,c,d,m,g;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(Rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),r=this.params.maximumSequenceNumbersToCollect):r=w,c=Date.now(),this.nthSequenceNumber(t,r))).next(w=>(i=w,d=Date.now(),this.removeTargets(t,i,e))).next(w=>(l=w,m=Date.now(),this.removeOrphanedDocuments(t,i))).next(w=>(g=Date.now(),Pu()<=ae.DEBUG&&Rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${r} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${w} documents in `+(g-m)+`ms
Total Duration: ${g-b}ms`),gt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:w})))}}function dD(n,t){return new fD(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this.changes=new Hl(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Xn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?gt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&vh(i.mutation,r,Vs.empty(),an.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,oe()).next(()=>i))}getLocalViewOfDocuments(t,e,i=oe()){const r=Sl();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(l=>{let c=ah();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=Sl();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,oe()))}populateOverlays(t,e,i){const r=[];return i.forEach(l=>{e.has(l)||r.push(l)}),this.documentOverlayCache.getOverlays(t,r).next(l=>{l.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,r){let l=ua();const c=yh(),d=function(){return yh()}();return e.forEach((m,g)=>{const b=i.get(g.key);r.has(g.key)&&(b===void 0||b.mutation instanceof jl)?l=l.insert(g.key,g):b!==void 0?(c.set(g.key,b.mutation.getFieldMask()),vh(b.mutation,g,b.mutation.getFieldMask(),an.now())):c.set(g.key,Vs.empty())}),this.recalculateAndSaveOverlays(t,l).next(m=>(m.forEach((g,b)=>c.set(g,b)),e.forEach((g,b)=>{var w;return d.set(g,new pD(b,(w=c.get(g))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(t,e){const i=yh();let r=new $e((c,d)=>c-d),l=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(m=>{const g=e.get(m);if(g===null)return;let b=i.get(m)||Vs.empty();b=d.applyToLocalView(g,b),i.set(m,b);const w=(r.get(d.batchId)||oe()).add(m);r=r.insert(d.batchId,w)})}).next(()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,b=m.value,w=F1();b.forEach(S=>{if(!l.has(S)){const C=$1(e.get(S),i.get(S));C!==null&&w.set(S,C),l=l.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(t,g,w))}return gt.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(c){return Lt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):z1(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-l.size):gt.resolve(Sl());let d=Ih,m=l;return c.next(g=>gt.forEach(g,(b,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),l.get(b)?gt.resolve():this.remoteDocumentCache.getEntry(t,b).next(S=>{m=m.insert(b,S)}))).next(()=>this.populateOverlays(t,g,l)).next(()=>this.computeViews(t,m,g,oe())).next(b=>({batchId:d,changes:j1(b)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Lt(e)).next(i=>{let r=ah();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const l=e.collectionGroup;let c=ah();return this.indexManager.getCollectionParents(t,l).next(d=>gt.forEach(d,m=>{const g=function(w,S){return new ic(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(e,m.child(l));return this.getDocumentsMatchingCollectionQuery(t,g,i,r).next(b=>{b.forEach((w,S)=>{c=c.insert(w,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,r){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,l,r))).next(c=>{l.forEach((m,g)=>{const b=g.getKey();c.get(b)===null&&(c=c.insert(b,Xn.newInvalidDocument(b)))});let d=ah();return c.forEach((m,g)=>{const b=l.get(m);b!==void 0&&vh(b.mutation,g,Vs.empty(),an.now()),km(e,g)&&(d=d.insert(m,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,e){return gt.resolve(this.kr.get(e))}saveBundleMetadata(t,e){return this.kr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:pr(r.createTime)}}(e)),gt.resolve()}getNamedQuery(t,e){return gt.resolve(this.qr.get(e))}saveNamedQuery(t,e){return this.qr.set(e.name,function(r){return{name:r.name,query:aD(r.bundledQuery),readTime:pr(r.readTime)}}(e)),gt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.overlays=new $e(Lt.comparator),this.Qr=new Map}getOverlay(t,e){return gt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Sl();return gt.forEach(e,r=>this.getOverlay(t,r).next(l=>{l!==null&&i.set(r,l)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,l)=>{this.St(t,e,l)}),gt.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Qr.get(i);return r!==void 0&&(r.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(i)),gt.resolve()}getOverlaysForCollection(t,e,i){const r=Sl(),l=e.length+1,c=new Lt(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>i&&r.set(m.getKey(),m)}return gt.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let l=new $e((g,b)=>g-b);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let b=l.get(g.largestBatchId);b===null&&(b=Sl(),l=l.insert(g.largestBatchId,b)),b.set(g.getKey(),g)}}const d=Sl(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,b)=>d.set(g,b)),!(d.size()>=r)););return gt.resolve(d)}St(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.Qr.get(r.largestBatchId).delete(i.key);this.Qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new VP(e,i));let l=this.Qr.get(e);l===void 0&&(l=oe(),this.Qr.set(e,l)),this.Qr.set(e,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.sessionToken=Bn.EMPTY_BYTE_STRING}getSessionToken(t){return gt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,gt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(){this.$r=new vn(In.Ur),this.Kr=new vn(In.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,e){const i=new In(t,e);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.zr(new In(t,e))}jr(t,e){t.forEach(i=>this.removeReference(i,e))}Hr(t){const e=new Lt(new He([])),i=new In(e,t),r=new In(e,t+1),l=[];return this.Kr.forEachInRange([i,r],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const e=new Lt(new He([])),i=new In(e,t),r=new In(e,t+1);let l=oe();return this.Kr.forEachInRange([i,r],c=>{l=l.add(c.key)}),l}containsKey(t){const e=new In(t,0),i=this.$r.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class In{constructor(t,e){this.key=t,this.Zr=e}static Ur(t,e){return Lt.comparator(t.key,e.key)||Jt(t.Zr,e.Zr)}static Wr(t,e){return Jt(t.Zr,e.Zr)||Lt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nr=1,this.Xr=new vn(In.Ur)}checkEmpty(t){return gt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new NP(l,e,i,r);this.mutationQueue.push(c);for(const d of r)this.Xr=this.Xr.add(new In(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return gt.resolve(c)}lookupMutationBatch(t,e){return gt.resolve(this.ei(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.ti(i),l=r<0?0:r;return gt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(this.mutationQueue.length===0?yy:this.nr-1)}getAllMutationBatches(t){return gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new In(e,0),r=new In(e,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([i,r],c=>{const d=this.ei(c.Zr);l.push(d)}),gt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new vn(Jt);return e.forEach(r=>{const l=new In(r,0),c=new In(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{i=i.add(d.Zr)})}),gt.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let l=i;Lt.isDocumentKey(l)||(l=l.child(""));const c=new In(new Lt(l),0);let d=new vn(Jt);return this.Xr.forEachWhile(m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===r&&(d=d.add(m.Zr)),!0)},c),gt.resolve(this.ni(d))}ni(t){const e=[];return t.forEach(i=>{const r=this.ei(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){ve(this.ri(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return gt.forEach(e.mutations,r=>{const l=new In(r.key,e.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Xr=i})}sr(t){}containsKey(t,e){const i=new In(e,0),r=this.Xr.firstAfterOrEqual(i);return gt.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,gt.resolve()}ri(t,e){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const e=this.ti(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(t){this.ii=t,this.docs=function(){return new $e(Lt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),l=r?r.size:0,c=this.ii(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return gt.resolve(i?i.document.mutableCopy():Xn.newInvalidDocument(e))}getEntries(t,e){let i=ua();return e.forEach(r=>{const l=this.docs.get(r);i=i.insert(r,l?l.document.mutableCopy():Xn.newInvalidDocument(r))}),gt.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let l=ua();const c=e.path,d=new Lt(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:b}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||KO($O(b),i)<=0||(r.has(b.key)||km(e,b))&&(l=l.insert(b.key,b.mutableCopy()))}return gt.resolve(l)}getAllFromCollectionGroup(t,e,i,r){Ht(9500)}si(t,e){return gt.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new wD(this)}getSize(t){return gt.resolve(this.size)}}class wD extends mD{constructor(t){super(),this.Br=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Br.addEntry(t,r)):this.Br.removeEntry(i)}),gt.waitFor(e)}getFromCache(t,e){return this.Br.getEntry(t,e)}getAllFromCache(t,e){return this.Br.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(t){this.persistence=t,this.oi=new Hl(e=>Ty(e),wy),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this._i=0,this.ai=new Ry,this.targetCount=0,this.ui=Zu.cr()}forEachTarget(t,e){return this.oi.forEach((i,r)=>e(r)),gt.resolve()}getLastRemoteSnapshotVersion(t){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return gt.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this._i&&(this._i=e),gt.resolve()}Tr(t){this.oi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ui=new Zu(e),this.highestTargetId=e),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,e){return this.Tr(e),this.targetCount+=1,gt.resolve()}updateTargetData(t,e){return this.Tr(e),gt.resolve()}removeTargetData(t,e){return this.oi.delete(e.target),this.ai.Hr(e.targetId),this.targetCount-=1,gt.resolve()}removeTargets(t,e,i){let r=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=e&&i.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),gt.waitFor(l).next(()=>r)}getTargetCount(t){return gt.resolve(this.targetCount)}getTargetData(t,e){const i=this.oi.get(e)||null;return gt.resolve(i)}addMatchingKeys(t,e,i){return this.ai.Gr(e,i),gt.resolve()}removeMatchingKeys(t,e,i){this.ai.jr(e,i);const r=this.persistence.referenceDelegate,l=[];return r&&e.forEach(c=>{l.push(r.markPotentiallyOrphaned(t,c))}),gt.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.ai.Hr(e),gt.resolve()}getMatchingKeysForTargetId(t,e){const i=this.ai.Yr(e);return gt.resolve(i)}containsKey(t,e){return gt.resolve(this.ai.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(t,e){this.ci={},this.overlays={},this.li=new Im(0),this.hi=!1,this.hi=!0,this.Pi=new vD,this.referenceDelegate=t(this),this.Ti=new ED(this),this.indexManager=new oD,this.remoteDocumentCache=function(r){return new TD(r)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new rD(e),this.Ei=new _D(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new yD,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ci[t.toKey()];return i||(i=new bD(e,this.referenceDelegate),this.ci[t.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,e,i){Rt("MemoryPersistence","Starting transaction:",t);const r=new SD(this.li.next());return this.referenceDelegate.di(),i(r).next(l=>this.referenceDelegate.Ai(r).next(()=>l)).toPromise().then(l=>(r.raiseOnCommittedEvent(),l))}Ri(t,e){return gt.or(Object.values(this.ci).map(i=>()=>i.containsKey(t,e)))}}class SD extends QO{constructor(t){super(),this.currentSequenceNumber=t}}class Cy{constructor(t){this.persistence=t,this.Vi=new Ry,this.mi=null}static fi(t){return new Cy(t)}get gi(){if(this.mi)return this.mi;throw Ht(60996)}addReference(t,e,i){return this.Vi.addReference(i,e),this.gi.delete(i.toString()),gt.resolve()}removeReference(t,e,i){return this.Vi.removeReference(i,e),this.gi.add(i.toString()),gt.resolve()}markPotentiallyOrphaned(t,e){return this.gi.add(e.toString()),gt.resolve()}removeTarget(t,e){this.Vi.Hr(e.targetId).forEach(r=>this.gi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(l=>this.gi.add(l.toString()))}).next(()=>i.removeTargetData(t,e))}di(){this.mi=new Set}Ai(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.gi,i=>{const r=Lt.fromPath(i);return this.pi(t,r).next(l=>{l||e.removeEntry(r,Zt.min())})}).next(()=>(this.mi=null,e.apply(t)))}updateLimboDocument(t,e){return this.pi(t,e).next(i=>{i?this.gi.delete(e.toString()):this.gi.add(e.toString())})}Ii(t){return 0}pi(t,e){return gt.or([()=>gt.resolve(this.Vi.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ri(t,e)])}}class tm{constructor(t,e){this.persistence=t,this.yi=new Hl(i=>eP(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=dD(this,e)}static fi(t,e){return new tm(t,e)}di(){}Ai(t){return gt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}pr(t){const e=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}br(t){let e=0;return this.yr(t,i=>{e++}).next(()=>e)}yr(t,e){return gt.forEach(this.yi,(i,r)=>this.Dr(t,i,r).next(l=>l?gt.resolve():e(r)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.si(t,c=>this.Dr(t,c,e).next(d=>{d||(i++,l.removeEntry(c,Zt.min()))})).next(()=>l.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.yi.set(e,t.currentSequenceNumber),gt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.yi.set(i,t.currentSequenceNumber),gt.resolve()}removeReference(t,e,i){return this.yi.set(i,t.currentSequenceNumber),gt.resolve()}updateLimboDocument(t,e){return this.yi.set(e,t.currentSequenceNumber),gt.resolve()}Ii(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=kd(t.data.value)),e}Dr(t,e,i){return gt.or([()=>this.persistence.Ri(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.yi.get(e);return gt.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.ds=i,this.As=r}static Rs(t,e){let i=oe(),r=oe();for(const l of e.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Iy(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return bM()?8:JO(Jn())>0?6:4}()}initialize(t,e){this.ys=t,this.indexManager=e,this.Vs=!0}getDocumentsMatchingQuery(t,e,i,r){const l={result:null};return this.ws(t,e).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(t,e,r,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new AD;return this.Ss(t,e,c).next(d=>{if(l.result=d,this.fs)return this.Ds(t,e,c,d.size)})}).next(()=>l.result)}Ds(t,e,i,r){return i.documentReadCount<this.gs?(Pu()<=ae.DEBUG&&Rt("QueryEngine","SDK will not create cache indexes for query:",Du(e),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),gt.resolve()):(Pu()<=ae.DEBUG&&Rt("QueryEngine","Query:",Du(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ps*r?(Pu()<=ae.DEBUG&&Rt("QueryEngine","The SDK decides to create cache indexes for query:",Du(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,mr(e))):gt.resolve())}ws(t,e){if(hw(e))return gt.resolve(null);let i=mr(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=R_(e,null,"F"),i=mr(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(l=>{const c=oe(...l);return this.ys.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(m=>{const g=this.vs(e,d);return this.Cs(e,g,c,m.readTime)?this.ws(t,R_(e,null,"F")):this.Fs(t,g,e,m)}))})))}bs(t,e,i,r){return hw(e)||r.isEqual(Zt.min())?gt.resolve(null):this.ys.getDocuments(t,i).next(l=>{const c=this.vs(e,l);return this.Cs(e,c,i,r)?gt.resolve(null):(Pu()<=ae.DEBUG&&Rt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Du(e)),this.Fs(t,c,e,YO(r,Ih)).next(d=>d))})}vs(t,e){let i=new vn(U1(t));return e.forEach((r,l)=>{km(t,l)&&(i=i.add(l))}),i}Cs(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(t,e,i){return Pu()<=ae.DEBUG&&Rt("QueryEngine","Using full collection scan to execute query:",Du(e)),this.ys.getDocumentsMatchingQuery(t,e,Ro.min(),i)}Fs(t,e,i,r){return this.ys.getDocumentsMatchingQuery(t,i,r).next(l=>(e.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="LocalStore",RD=3e8;class CD{constructor(t,e,i,r){this.persistence=t,this.Ms=e,this.serializer=r,this.xs=new $e(Jt),this.Os=new Hl(l=>Ty(l),wy),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(i)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new gD(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.xs))}}function ID(n,t,e,i){return new CD(n,t,e,i)}async function cA(n,t){const e=Wt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(l=>(r=l,e.Ls(t),e.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let m=oe();for(const g of r){c.push(g.batchId);for(const b of g.mutations)m=m.add(b.key)}for(const g of l){d.push(g.batchId);for(const b of g.mutations)m=m.add(b.key)}return e.localDocuments.getDocuments(i,m).next(g=>({ks:g,removedBatchIds:c,addedBatchIds:d}))})})}function MD(n,t){const e=Wt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),l=e.Bs.newChangeBuffer({trackRemovals:!0});return function(d,m,g,b){const w=g.batch,S=w.keys();let C=gt.resolve();return S.forEach(M=>{C=C.next(()=>b.getEntry(m,M)).next(D=>{const N=g.docVersions.get(M);ve(N!==null,48541),D.version.compareTo(N)<0&&(w.applyToRemoteDocument(D,g),D.isValidDocument()&&(D.setReadTime(g.commitVersion),b.addEntry(D)))})}),C.next(()=>d.mutationQueue.removeMutationBatch(m,w))}(e,i,t,l).next(()=>l.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let m=oe();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function hA(n){const t=Wt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ti.getLastRemoteSnapshotVersion(e))}function OD(n,t){const e=Wt(n),i=t.snapshotVersion;let r=e.xs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=e.Bs.newChangeBuffer({trackRemovals:!0});r=e.xs;const d=[];t.targetChanges.forEach((b,w)=>{const S=r.get(w);if(!S)return;d.push(e.Ti.removeMatchingKeys(l,b.removedDocuments,w).next(()=>e.Ti.addMatchingKeys(l,b.addedDocuments,w)));let C=S.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(w)!==null?C=C.withResumeToken(Bn.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):b.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(b.resumeToken,i)),r=r.insert(w,C),function(D,N,j){return D.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=RD?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(S,C,b)&&d.push(e.Ti.updateTargetData(l,C))});let m=ua(),g=oe();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(l,b))}),d.push(PD(l,c,t.documentUpdates).next(b=>{m=b.qs,g=b.Qs})),!i.isEqual(Zt.min())){const b=e.Ti.getLastRemoteSnapshotVersion(l).next(w=>e.Ti.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(b)}return gt.waitFor(d).next(()=>c.apply(l)).next(()=>e.localDocuments.getLocalViewOfDocuments(l,m,g)).next(()=>m)}).then(l=>(e.xs=r,l))}function PD(n,t,e){let i=oe(),r=oe();return e.forEach(l=>i=i.add(l)),t.getEntries(n,i).next(l=>{let c=ua();return e.forEach((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(r=r.add(d)),m.isNoDocument()&&m.version.isEqual(Zt.min())?(t.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(m),c=c.insert(d,m)):Rt(My,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)}),{qs:c,Qs:r}})}function DD(n,t){const e=Wt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=yy),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function kD(n,t){const e=Wt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Ti.getTargetData(i,t).next(l=>l?(r=l,gt.resolve(r)):e.Ti.allocateTargetId(i).next(c=>(r=new go(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Ti.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.xs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.xs=e.xs.insert(i.targetId,i),e.Os.set(t,i.targetId)),i})}async function P_(n,t,e){const i=Wt(n),r=i.xs.get(t),l=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!nc(c))throw c;Rt(My,`Failed to update sequence numbers for target ${t}: ${c}`)}i.xs=i.xs.remove(t),i.Os.delete(r.target)}function Sw(n,t,e){const i=Wt(n);let r=Zt.min(),l=oe();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,g,b){const w=Wt(m),S=w.Os.get(b);return S!==void 0?gt.resolve(w.xs.get(S)):w.Ti.getTargetData(g,b)}(i,c,mr(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>i.Ms.getDocumentsMatchingQuery(c,t,e?r:Zt.min(),e?l:oe())).next(d=>(LD(i,bP(t),d),{documents:d,$s:l})))}function LD(n,t,e){let i=n.Ns.get(t)||Zt.min();e.forEach((r,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.Ns.set(t,i)}class Aw{constructor(){this.activeTargetIds=xP()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ND{constructor(){this.xo=new Aw,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,e,i){this.Oo[t]=e}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new Aw,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="ConnectivityMonitor";class Rw{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Rt(xw,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){Rt(xw,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd=null;function D_(){return pd===null?pd=function(){return 268435456+Math.round(2147483648*Math.random())}():pd++,"0x"+pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="RestConnection",zD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BD{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=e+"://"+t.host,this.Wo=`projects/${i}/databases/${r}`,this.Go=this.databaseId.database===$d?`project_id=${i}`:`project_id=${i}&database_id=${r}`}zo(t,e,i,r,l){const c=D_(),d=this.jo(t,e.toUriEncodedString());Rt(Kg,`Sending RPC '${t}' ${c}:`,d,i);const m={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(m,r,l);const{host:g}=new URL(d),b=Qu(g);return this.Jo(t,d,m,i,b).then(w=>(Rt(Kg,`Received RPC '${t}' ${c}: `,w),w),w=>{throw ju(Kg,`RPC '${t}' ${c} failed with error: `,w,"url: ",d,"request:",i),w})}Yo(t,e,i,r,l,c){return this.zo(t,e,i,r,l)}Ho(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,l)=>t[l]=r),i&&i.headers.forEach((r,l)=>t[l]=r)}jo(t,e){const i=zD[t];return`${this.Ko}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection";class HD extends BD{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,r,l){const c=D_();return new Promise((d,m)=>{const g=new d1;g.setWithCredentials(!0),g.listenOnce(m1.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Dd.NO_ERROR:const w=g.getResponseJson();Rt($n,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(w)),d(w);break;case Dd.TIMEOUT:Rt($n,`RPC '${t}' ${c} timed out`),m(new Ct(pt.DEADLINE_EXCEEDED,"Request time out"));break;case Dd.HTTP_ERROR:const S=g.getStatus();if(Rt($n,`RPC '${t}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const M=C==null?void 0:C.error;if(M&&M.status&&M.message){const D=function(j){const q=j.toLowerCase().replace(/_/g,"-");return Object.values(pt).indexOf(q)>=0?q:pt.UNKNOWN}(M.status);m(new Ct(D,M.message))}else m(new Ct(pt.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Ct(pt.UNAVAILABLE,"Connection failed."));break;default:Ht(9055,{h_:t,streamId:c,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{Rt($n,`RPC '${t}' ${c} completed.`)}});const b=JSON.stringify(r);Rt($n,`RPC '${t}' ${c} sending request:`,r),g.send(e,"POST",b,i,15)})}I_(t,e,i){const r=D_(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=_1(),d=g1(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Ho(m.initMessageHeaders,e,i),m.encodeInitMessageHeaders=!0;const b=l.join("");Rt($n,`Creating RPC '${t}' stream ${r}: ${b}`,m);const w=c.createWebChannel(b,m);this.E_(w);let S=!1,C=!1;const M=new UD({Zo:N=>{C?Rt($n,`Not sending because RPC '${t}' stream ${r} is closed:`,N):(S||(Rt($n,`Opening RPC '${t}' stream ${r} transport.`),w.open(),S=!0),Rt($n,`RPC '${t}' stream ${r} sending:`,N),w.send(N))},Xo:()=>w.close()}),D=(N,j,q)=>{N.listen(j,Y=>{try{q(Y)}catch(it){setTimeout(()=>{throw it},0)}})};return D(w,rh.EventType.OPEN,()=>{C||(Rt($n,`RPC '${t}' stream ${r} transport opened.`),M.__())}),D(w,rh.EventType.CLOSE,()=>{C||(C=!0,Rt($n,`RPC '${t}' stream ${r} transport closed`),M.u_(),this.d_(w))}),D(w,rh.EventType.ERROR,N=>{C||(C=!0,ju($n,`RPC '${t}' stream ${r} transport errored. Name:`,N.name,"Message:",N.message),M.u_(new Ct(pt.UNAVAILABLE,"The operation could not be completed")))}),D(w,rh.EventType.MESSAGE,N=>{var j;if(!C){const q=N.data[0];ve(!!q,16349);const Y=q,it=(Y==null?void 0:Y.error)||((j=Y[0])===null||j===void 0?void 0:j.error);if(it){Rt($n,`RPC '${t}' stream ${r} received error:`,it);const lt=it.status;let bt=function(z){const U=hn[z];if(U!==void 0)return Q1(U)}(lt),V=it.message;bt===void 0&&(bt=pt.INTERNAL,V="Unknown error status: "+lt+" with message "+it.message),C=!0,M.u_(new Ct(bt,V)),w.close()}else Rt($n,`RPC '${t}' stream ${r} received:`,q),M.c_(q)}}),D(d,p1.STAT_EVENT,N=>{N.stat===b_.PROXY?Rt($n,`RPC '${t}' stream ${r} detected buffering proxy`):N.stat===b_.NOPROXY&&Rt($n,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{M.a_()},0),M}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(e=>e===t)}}function Xg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(n){return new GP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(t,e,i=1e3,r=1.5,l=6e4){this.xi=t,this.timerId=e,this.A_=i,this.R_=r,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const e=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),r=Math.max(0,e-i);r>0&&Rt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="PersistentStream";class dA{constructor(t,e,i,r,l,c,d,m){this.xi=t,this.S_=i,this.D_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new fA(t,e)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,e){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():e&&e.code===pt.RESOURCE_EXHAUSTED?(la(e.toString()),la("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):e&&e.code===pt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(e)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),e=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.v_===e&&this.z_(i,r)},i=>{t(()=>{const r=new Ct(pt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(r)})})}z_(t,e){const i=this.G_(this.v_);this.stream=this.H_(t,e),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{i(()=>this.j_(r))}),this.stream.onMessage(r=>{i(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return Rt(Cw,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return e=>{this.xi.enqueueAndForget(()=>this.v_===t?e():(Rt(Cw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jD extends dA{constructor(t,e,i,r,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=l}H_(t,e){return this.connection.I_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const e=YP(this.serializer,t),i=function(l){if(!("targetChange"in l))return Zt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Zt.min():c.readTime?pr(c.readTime):Zt.min()}(t);return this.listener.Y_(e,i)}Z_(t){const e={};e.database=O_(this.serializer),e.addTarget=function(l,c){let d;const m=c.target;if(d=A_(m)?{documents:XP(l,m)}:{query:QP(l,m).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=eA(l,c.resumeToken);const g=C_(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Zt.min())>0){d.readTime=Jd(l,c.snapshotVersion.toTimestamp());const g=C_(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,t);const i=tD(this.serializer,t);i&&(e.labels=i),this.Q_(e)}X_(t){const e={};e.database=O_(this.serializer),e.removeTarget=t,this.Q_(e)}}class FD extends dA{constructor(t,e,i,r,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,e){return this.connection.I_("Write",t,e)}J_(t){return ve(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ve(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){ve(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const e=KP(t.writeResults,t.commitTime),i=pr(t.commitTime);return this.listener.ra(i,e)}ia(){const t={};t.database=O_(this.serializer),this.Q_(t)}ta(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>$P(this.serializer,i))};this.Q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{}class GD extends qD{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new Ct(pt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,e,i,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(t,I_(e,i),r,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ct(pt.UNKNOWN,l.toString())})}Yo(t,e,i,r,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(t,I_(e,i),r,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ct(pt.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class ZD{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(la(e),this.ua=!1):Rt("OnlineStateTracker",e)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml="RemoteStore";class WD{constructor(t,e,i,r,l){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{i.enqueueAndForget(async()=>{Fl(this)&&(Rt(Ml,"Restarting streams for network reachability change."),await async function(m){const g=Wt(m);g.da.add(4),await Qh(g),g.Va.set("Unknown"),g.da.delete(4),await Bm(g)}(this))})}),this.Va=new ZD(i,r)}}async function Bm(n){if(Fl(n))for(const t of n.Aa)await t(!0)}async function Qh(n){for(const t of n.Aa)await t(!1)}function mA(n,t){const e=Wt(n);e.Ea.has(t.targetId)||(e.Ea.set(t.targetId,t),ky(e)?Dy(e):sc(e).N_()&&Py(e,t))}function Oy(n,t){const e=Wt(n),i=sc(e);e.Ea.delete(t),i.N_()&&pA(e,t),e.Ea.size===0&&(i.N_()?i.k_():Fl(e)&&e.Va.set("Unknown"))}function Py(n,t){if(n.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}sc(n).Z_(t)}function pA(n,t){n.ma.Ke(t),sc(n).X_(t)}function Dy(n){n.ma=new HP({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>n.Ea.get(t)||null,Pt:()=>n.datastore.serializer.databaseId}),sc(n).start(),n.Va.ca()}function ky(n){return Fl(n)&&!sc(n).O_()&&n.Ea.size>0}function Fl(n){return Wt(n).da.size===0}function gA(n){n.ma=void 0}async function YD(n){n.Va.set("Online")}async function $D(n){n.Ea.forEach((t,e)=>{Py(n,t)})}async function KD(n,t){gA(n),ky(n)?(n.Va.Pa(t),Dy(n)):n.Va.set("Unknown")}async function XD(n,t,e){if(n.Va.set("Online"),t instanceof tA&&t.state===2&&t.cause)try{await async function(r,l){const c=l.cause;for(const d of l.targetIds)r.Ea.has(d)&&(await r.remoteSyncer.rejectListen(d,c),r.Ea.delete(d),r.ma.removeTarget(d))}(n,t)}catch(i){Rt(Ml,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await em(n,i)}else if(t instanceof Vd?n.ma.Xe(t):t instanceof J1?n.ma.ot(t):n.ma.nt(t),!e.isEqual(Zt.min()))try{const i=await hA(n.localStore);e.compareTo(i)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const b=l.Ea.get(g);b&&l.Ea.set(g,b.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,g)=>{const b=l.Ea.get(m);if(!b)return;l.Ea.set(m,b.withResumeToken(Bn.EMPTY_BYTE_STRING,b.snapshotVersion)),pA(l,m);const w=new go(b.target,m,g,b.sequenceNumber);Py(l,w)}),l.remoteSyncer.applyRemoteEvent(d)}(n,e)}catch(i){Rt(Ml,"Failed to raise snapshot:",i),await em(n,i)}}async function em(n,t,e){if(!nc(t))throw t;n.da.add(1),await Qh(n),n.Va.set("Offline"),e||(e=()=>hA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Rt(Ml,"Retrying IndexedDB access"),await e(),n.da.delete(1),await Bm(n)})}function _A(n,t){return t().catch(e=>em(n,e,t))}async function Um(n){const t=Wt(n),e=Oo(t);let i=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:yy;for(;QD(t);)try{const r=await DD(t.localStore,i);if(r===null){t.Ia.length===0&&e.k_();break}i=r.batchId,JD(t,r)}catch(r){await em(t,r)}yA(t)&&vA(t)}function QD(n){return Fl(n)&&n.Ia.length<10}function JD(n,t){n.Ia.push(t);const e=Oo(n);e.N_()&&e.ea&&e.ta(t.mutations)}function yA(n){return Fl(n)&&!Oo(n).O_()&&n.Ia.length>0}function vA(n){Oo(n).start()}async function tk(n){Oo(n).ia()}async function ek(n){const t=Oo(n);for(const e of n.Ia)t.ta(e.mutations)}async function nk(n,t,e){const i=n.Ia.shift(),r=Sy.from(i,t,e);await _A(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await Um(n)}async function ik(n,t){t&&Oo(n).ea&&await async function(i,r){if(function(c){return BP(c)&&c!==pt.ABORTED}(r.code)){const l=i.Ia.shift();Oo(i).L_(),await _A(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),await Um(i)}}(n,t),yA(n)&&vA(n)}async function Iw(n,t){const e=Wt(n);e.asyncQueue.verifyOperationInProgress(),Rt(Ml,"RemoteStore received new credentials");const i=Fl(e);e.da.add(3),await Qh(e),i&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.da.delete(3),await Bm(e)}async function sk(n,t){const e=Wt(n);t?(e.da.delete(2),await Bm(e)):t||(e.da.add(2),await Qh(e),e.Va.set("Unknown"))}function sc(n){return n.fa||(n.fa=function(e,i,r){const l=Wt(e);return l.oa(),new jD(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)}(n.datastore,n.asyncQueue,{e_:YD.bind(null,n),n_:$D.bind(null,n),i_:KD.bind(null,n),Y_:XD.bind(null,n)}),n.Aa.push(async t=>{t?(n.fa.L_(),ky(n)?Dy(n):n.Va.set("Unknown")):(await n.fa.stop(),gA(n))})),n.fa}function Oo(n){return n.ga||(n.ga=function(e,i,r){const l=Wt(e);return l.oa(),new FD(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:tk.bind(null,n),i_:ik.bind(null,n),na:ek.bind(null,n),ra:nk.bind(null,n)}),n.Aa.push(async t=>{t?(n.ga.L_(),await Um(n)):(await n.ga.stop(),n.Ia.length>0&&(Rt(Ml,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(t,e,i,r,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=l,this.deferred=new ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,l){const c=Date.now()+i,d=new Ly(t,e,c,r,l);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(pt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ny(n,t){if(la("AsyncQueue",`${t}: ${n}`),nc(n))return new Ct(pt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{static emptySet(t){return new Vu(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||Lt.comparator(e.key,i.key):(e,i)=>Lt.comparator(e.key,i.key),this.keyedMap=ah(),this.sortedSet=new $e(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Vu)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,l=i.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Vu;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.pa=new $e(Lt.comparator)}track(t){const e=t.doc.key,i=this.pa.get(e);i?t.type!==0&&i.type===3?this.pa=this.pa.insert(e,t):t.type===3&&i.type!==1?this.pa=this.pa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.pa=this.pa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.pa=this.pa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.pa=this.pa.remove(e):t.type===1&&i.type===2?this.pa=this.pa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.pa=this.pa.insert(e,{type:2,doc:t.doc}):Ht(63341,{Vt:t,ya:i}):this.pa=this.pa.insert(e,t)}wa(){const t=[];return this.pa.inorderTraversal((e,i)=>{t.push(i)}),t}}class Wu{constructor(t,e,i,r,l,c,d,m,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,r,l){const c=[];return e.forEach(d=>{c.push({type:0,doc:d})}),new Wu(t,e,Vu.emptySet(e),c,i,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Dm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class ak{constructor(){this.queries=Ow(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const r=Wt(e),l=r.queries;r.queries=Ow(),l.forEach((c,d)=>{for(const m of d.Sa)m.onError(i)})})(this,new Ct(pt.ABORTED,"Firestore shutting down"))}}function Ow(){return new Hl(n=>B1(n),Dm)}async function Vy(n,t){const e=Wt(n);let i=3;const r=t.query;let l=e.queries.get(r);l?!l.Da()&&t.va()&&(i=2):(l=new rk,i=t.va()?0:1);try{switch(i){case 0:l.ba=await e.onListen(r,!0);break;case 1:l.ba=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const d=Ny(c,`Initialization of query '${Du(t.query)}' failed`);return void t.onError(d)}e.queries.set(r,l),l.Sa.push(t),t.Fa(e.onlineState),l.ba&&t.Ma(l.ba)&&By(e)}async function zy(n,t){const e=Wt(n),i=t.query;let r=3;const l=e.queries.get(i);if(l){const c=l.Sa.indexOf(t);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?r=t.va()?0:1:!l.Da()&&t.va()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function ok(n,t){const e=Wt(n);let i=!1;for(const r of t){const l=r.query,c=e.queries.get(l);if(c){for(const d of c.Sa)d.Ma(r)&&(i=!0);c.ba=r}}i&&By(e)}function lk(n,t,e){const i=Wt(n),r=i.queries.get(t);if(r)for(const l of r.Sa)l.onError(e);i.queries.delete(t)}function By(n){n.Ca.forEach(t=>{t.next()})}var k_,Pw;(Pw=k_||(k_={})).xa="default",Pw.Cache="cache";class Uy{constructor(t,e,i){this.query=t,this.Oa=e,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Wu(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Na?this.La(t)&&(this.Oa.next(t),e=!0):this.ka(t,this.onlineState)&&(this.qa(t),e=!0),this.Ba=t,e}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let e=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),e=!0),e}ka(t,e){if(!t.fromCache||!this.va())return!0;const i=e!=="Offline";return(!this.options.Qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}La(t){if(t.docChanges.length>0)return!0;const e=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}qa(t){t=Wu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==k_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(t){this.key=t}}class TA{constructor(t){this.key=t}}class uk{constructor(t,e){this.query=t,this.Ha=e,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=oe(),this.mutatedKeys=oe(),this.Za=U1(t),this.Xa=new Vu(this.Za)}get eu(){return this.Ha}tu(t,e){const i=e?e.nu:new Mw,r=e?e.Xa:this.Xa;let l=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const m=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,g=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((b,w)=>{const S=r.get(b),C=km(this.query,w)?w:null,M=!!S&&this.mutatedKeys.has(S.key),D=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let N=!1;S&&C?S.data.isEqual(C.data)?M!==D&&(i.track({type:3,doc:C}),N=!0):this.ru(S,C)||(i.track({type:2,doc:C}),N=!0,(m&&this.Za(C,m)>0||g&&this.Za(C,g)<0)&&(d=!0)):!S&&C?(i.track({type:0,doc:C}),N=!0):S&&!C&&(i.track({type:1,doc:S}),N=!0,(m||g)&&(d=!0)),N&&(C?(c=c.add(C),l=D?l.add(b):l.delete(b)):(c=c.delete(b),l=l.delete(b)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),l=l.delete(b.key),i.track({type:1,doc:b})}return{Xa:c,nu:i,Cs:d,mutatedKeys:l}}ru(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const c=t.nu.wa();c.sort((b,w)=>function(C,M){const D=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ht(20277,{Vt:N})}};return D(C)-D(M)}(b.type,w.type)||this.Za(b.doc,w.doc)),this.iu(i),r=r!=null&&r;const d=e&&!r?this.su():[],m=this.Ya.size===0&&this.current&&!r?1:0,g=m!==this.Ja;return this.Ja=m,c.length!==0||g?{snapshot:new Wu(this.query,t.Xa,l,c,t.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Mw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=oe(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const e=[];return t.forEach(i=>{this.Ya.has(i)||e.push(new TA(i))}),this.Ya.forEach(i=>{t.has(i)||e.push(new bA(i))}),e}au(t){this.Ha=t.$s,this.Ya=oe();const e=this.tu(t.documents);return this.applyChanges(e,!0)}uu(){return Wu.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Hy="SyncEngine";class ck{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class hk{constructor(t){this.key=t,this.cu=!1}}class fk{constructor(t,e,i,r,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Hl(d=>B1(d),Dm),this.Pu=new Map,this.Tu=new Set,this.Iu=new $e(Lt.comparator),this.Eu=new Map,this.du=new Ry,this.Au={},this.Ru=new Map,this.Vu=Zu.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function dk(n,t,e=!0){const i=RA(n);let r;const l=i.hu.get(t);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.uu()):r=await wA(i,t,e,!0),r}async function mk(n,t){const e=RA(n);await wA(e,t,!0,!1)}async function wA(n,t,e,i){const r=await kD(n.localStore,mr(t)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,e);let d;return i&&(d=await pk(n,t,l,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&mA(n.remoteStore,r),d}async function pk(n,t,e,i,r){n.fu=(w,S,C)=>async function(D,N,j,q){let Y=N.view.tu(j);Y.Cs&&(Y=await Sw(D.localStore,N.query,!1).then(({documents:V})=>N.view.tu(V,Y)));const it=q&&q.targetChanges.get(N.targetId),lt=q&&q.targetMismatches.get(N.targetId)!=null,bt=N.view.applyChanges(Y,D.isPrimaryClient,it,lt);return kw(D,N.targetId,bt.ou),bt.snapshot}(n,w,S,C);const l=await Sw(n.localStore,t,!0),c=new uk(t,l.$s),d=c.tu(l.documents),m=Xh.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),g=c.applyChanges(d,n.isPrimaryClient,m);kw(n,e,g.ou);const b=new ck(t,e,c);return n.hu.set(t,b),n.Pu.has(e)?n.Pu.get(e).push(t):n.Pu.set(e,[t]),g.snapshot}async function gk(n,t,e){const i=Wt(n),r=i.hu.get(t),l=i.Pu.get(r.targetId);if(l.length>1)return i.Pu.set(r.targetId,l.filter(c=>!Dm(c,t))),void i.hu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await P_(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Oy(i.remoteStore,r.targetId),L_(i,r.targetId)}).catch(ec)):(L_(i,r.targetId),await P_(i.localStore,r.targetId,!0))}async function _k(n,t){const e=Wt(n),i=e.hu.get(t),r=e.Pu.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Oy(e.remoteStore,i.targetId))}async function yk(n,t,e){const i=Ak(n);try{const r=await function(c,d){const m=Wt(c),g=an.now(),b=d.reduce((C,M)=>C.add(M.key),oe());let w,S;return m.persistence.runTransaction("Locally write mutations","readwrite",C=>{let M=ua(),D=oe();return m.Bs.getEntries(C,b).next(N=>{M=N,M.forEach((j,q)=>{q.isValidDocument()||(D=D.add(j))})}).next(()=>m.localDocuments.getOverlayedDocuments(C,M)).next(N=>{w=N;const j=[];for(const q of d){const Y=kP(q,w.get(q.key).overlayedDocument);Y!=null&&j.push(new jl(q.key,Y,O1(Y.value.mapValue),sa.exists(!0)))}return m.mutationQueue.addMutationBatch(C,g,j,d)}).next(N=>{S=N;const j=N.applyToLocalDocumentSet(w,D);return m.documentOverlayCache.saveOverlays(C,N.batchId,j)})}).then(()=>({batchId:S.batchId,changes:j1(w)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(c,d,m){let g=c.Au[c.currentUser.toKey()];g||(g=new $e(Jt)),g=g.insert(d,m),c.Au[c.currentUser.toKey()]=g}(i,r.batchId,e),await Jh(i,r.changes),await Um(i.remoteStore)}catch(r){const l=Ny(r,"Failed to persist write");e.reject(l)}}async function EA(n,t){const e=Wt(n);try{const i=await OD(e.localStore,t);t.targetChanges.forEach((r,l)=>{const c=e.Eu.get(l);c&&(ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.cu=!0:r.modifiedDocuments.size>0?ve(c.cu,14607):r.removedDocuments.size>0&&(ve(c.cu,42227),c.cu=!1))}),await Jh(e,i,t)}catch(i){await ec(i)}}function Dw(n,t,e){const i=Wt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.hu.forEach((l,c)=>{const d=c.view.Fa(t);d.snapshot&&r.push(d.snapshot)}),function(c,d){const m=Wt(c);m.onlineState=d;let g=!1;m.queries.forEach((b,w)=>{for(const S of w.Sa)S.Fa(d)&&(g=!0)}),g&&By(m)}(i.eventManager,t),r.length&&i.lu.Y_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function vk(n,t,e){const i=Wt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Eu.get(t),l=r&&r.key;if(l){let c=new $e(Lt.comparator);c=c.insert(l,Xn.newNoDocument(l,Zt.min()));const d=oe().add(l),m=new Vm(Zt.min(),new Map,new $e(Jt),c,d);await EA(i,m),i.Iu=i.Iu.remove(l),i.Eu.delete(t),jy(i)}else await P_(i.localStore,t,!1).then(()=>L_(i,t,e)).catch(ec)}async function bk(n,t){const e=Wt(n),i=t.batch.batchId;try{const r=await MD(e.localStore,t);AA(e,i,null),SA(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Jh(e,r)}catch(r){await ec(r)}}async function Tk(n,t,e){const i=Wt(n);try{const r=await function(c,d){const m=Wt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let b;return m.mutationQueue.lookupMutationBatch(g,d).next(w=>(ve(w!==null,37113),b=w.keys(),m.mutationQueue.removeMutationBatch(g,w))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,b,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,b)).next(()=>m.localDocuments.getDocuments(g,b))})}(i.localStore,t);AA(i,t,e),SA(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Jh(i,r)}catch(r){await ec(r)}}function SA(n,t){(n.Ru.get(t)||[]).forEach(e=>{e.resolve()}),n.Ru.delete(t)}function AA(n,t,e){const i=Wt(n);let r=i.Au[i.currentUser.toKey()];if(r){const l=r.get(t);l&&(e?l.reject(e):l.resolve(),r=r.remove(t)),i.Au[i.currentUser.toKey()]=r}}function L_(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Pu.get(t))n.hu.delete(i),e&&n.lu.gu(i,e);n.Pu.delete(t),n.isPrimaryClient&&n.du.Hr(t).forEach(i=>{n.du.containsKey(i)||xA(n,i)})}function xA(n,t){n.Tu.delete(t.path.canonicalString());const e=n.Iu.get(t);e!==null&&(Oy(n.remoteStore,e),n.Iu=n.Iu.remove(t),n.Eu.delete(e),jy(n))}function kw(n,t,e){for(const i of e)i instanceof bA?(n.du.addReference(i.key,t),wk(n,i)):i instanceof TA?(Rt(Hy,"Document no longer in limbo: "+i.key),n.du.removeReference(i.key,t),n.du.containsKey(i.key)||xA(n,i.key)):Ht(19791,{pu:i})}function wk(n,t){const e=t.key,i=e.path.canonicalString();n.Iu.get(e)||n.Tu.has(i)||(Rt(Hy,"New document in limbo: "+e),n.Tu.add(i),jy(n))}function jy(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const t=n.Tu.values().next().value;n.Tu.delete(t);const e=new Lt(He.fromString(t)),i=n.Vu.next();n.Eu.set(i,new hk(e)),n.Iu=n.Iu.insert(e,i),mA(n.remoteStore,new go(mr(Pm(e.path)),i,"TargetPurposeLimboResolution",Im.le))}}async function Jh(n,t,e){const i=Wt(n),r=[],l=[],c=[];i.hu.isEmpty()||(i.hu.forEach((d,m)=>{c.push(i.fu(m,t,e).then(g=>{var b;if((g||e)&&i.isPrimaryClient){const w=g?!g.fromCache:(b=e==null?void 0:e.targetChanges.get(m.targetId))===null||b===void 0?void 0:b.current;i.sharedClientState.updateQueryState(m.targetId,w?"current":"not-current")}if(g){r.push(g);const w=Iy.Rs(m.targetId,g);l.push(w)}}))}),await Promise.all(c),i.lu.Y_(r),await async function(m,g){const b=Wt(m);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>gt.forEach(g,S=>gt.forEach(S.ds,C=>b.persistence.referenceDelegate.addReference(w,S.targetId,C)).next(()=>gt.forEach(S.As,C=>b.persistence.referenceDelegate.removeReference(w,S.targetId,C)))))}catch(w){if(!nc(w))throw w;Rt(My,"Failed to update sequence numbers: "+w)}for(const w of g){const S=w.targetId;if(!w.fromCache){const C=b.xs.get(S),M=C.snapshotVersion,D=C.withLastLimboFreeSnapshotVersion(M);b.xs=b.xs.insert(S,D)}}}(i.localStore,l))}async function Ek(n,t){const e=Wt(n);if(!e.currentUser.isEqual(t)){Rt(Hy,"User change. New user:",t.toKey());const i=await cA(e.localStore,t);e.currentUser=t,function(l,c){l.Ru.forEach(d=>{d.forEach(m=>{m.reject(new Ct(pt.CANCELLED,c))})}),l.Ru.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Jh(e,i.ks)}}function Sk(n,t){const e=Wt(n),i=e.Eu.get(t);if(i&&i.cu)return oe().add(i.key);{let r=oe();const l=e.Pu.get(t);if(!l)return r;for(const c of l){const d=e.hu.get(c);r=r.unionWith(d.view.eu)}return r}}function RA(n){const t=Wt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=EA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sk.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vk.bind(null,t),t.lu.Y_=ok.bind(null,t.eventManager),t.lu.gu=lk.bind(null,t.eventManager),t}function Ak(n){const t=Wt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bk.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Tk.bind(null,t),t}class nm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=zm(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,e){return null}Cu(t,e){return null}Du(t){return ID(this.persistence,new xD,t.initialUser,this.serializer)}Su(t){return new uA(Cy.fi,this.serializer)}bu(t){return new ND}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nm.provider={build:()=>new nm};class xk extends nm{constructor(t){super(),this.cacheSizeBytes=t}vu(t,e){ve(this.persistence.referenceDelegate instanceof tm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new hD(i,t.asyncQueue,e)}Su(t){const e=this.cacheSizeBytes!==void 0?yi.withCacheSize(this.cacheSizeBytes):yi.DEFAULT;return new uA(i=>tm.fi(i,e),this.serializer)}}class N_{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Dw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ek.bind(null,this.syncEngine),await sk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ak}()}createDatastore(t){const e=zm(t.databaseInfo.databaseId),i=function(l){return new HD(l)}(t.databaseInfo);return function(l,c,d,m){return new GD(l,c,d,m)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,l,c,d){return new WD(i,r,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,e=>Dw(this.syncEngine,e,0),function(){return Rw.C()?new Rw:new VD}())}createSyncEngine(t,e){return function(r,l,c,d,m,g,b){const w=new fk(r,l,c,d,m,g);return b&&(w.mu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const l=Wt(r);Rt(Ml,"RemoteStore shutting down."),l.da.add(5),await Qh(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}N_.provider={build:()=>new N_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):la("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="FirestoreClient";class Rk{constructor(t,e,i,r,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Kn.UNAUTHENTICATED,this.clientId=T1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{Rt(Po,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(Rt(Po,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Ny(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Qg(n,t){n.asyncQueue.verifyOperationInProgress(),Rt(Po,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await cA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function Lw(n,t){n.asyncQueue.verifyOperationInProgress();const e=await Ck(n);Rt(Po,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>Iw(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>Iw(t.remoteStore,r)),n._onlineComponents=t}async function Ck(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Rt(Po,"Using user provided OfflineComponentProvider");try{await Qg(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===pt.FAILED_PRECONDITION||r.code===pt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;ju("Error using user provided cache. Falling back to memory cache: "+e),await Qg(n,new nm)}}else Rt(Po,"Using default OfflineComponentProvider"),await Qg(n,new xk(void 0));return n._offlineComponents}async function CA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Rt(Po,"Using user provided OnlineComponentProvider"),await Lw(n,n._uninitializedComponentsProvider._online)):(Rt(Po,"Using default OnlineComponentProvider"),await Lw(n,new N_))),n._onlineComponents}function Ik(n){return CA(n).then(t=>t.syncEngine)}async function im(n){const t=await CA(n),e=t.eventManager;return e.onListen=dk.bind(null,t.syncEngine),e.onUnlisten=gk.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=mk.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=_k.bind(null,t.syncEngine),e}function Mk(n,t,e={}){const i=new ia;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,g){const b=new Fy({next:S=>{b.xu(),c.enqueueAndForget(()=>zy(l,w));const C=S.docs.has(d);!C&&S.fromCache?g.reject(new Ct(pt.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&S.fromCache&&m&&m.source==="server"?g.reject(new Ct(pt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),w=new Uy(Pm(d.path),b,{includeMetadataChanges:!0,Qa:!0});return Vy(l,w)}(await im(n),n.asyncQueue,t,e,i)),i.promise}function Ok(n,t,e={}){const i=new ia;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,g){const b=new Fy({next:S=>{b.xu(),c.enqueueAndForget(()=>zy(l,w)),S.fromCache&&m.source==="server"?g.reject(new Ct(pt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),w=new Uy(d,b,{includeMetadataChanges:!0,Qa:!0});return Vy(l,w)}(await im(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(n,t,e){if(!e)throw new Ct(pt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Pk(n,t,e,i){if(t===!0&&i===!0)throw new Ct(pt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Vw(n){if(!Lt.isDocumentKey(n))throw new Ct(pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zw(n){if(Lt.isDocumentKey(n))throw new Ct(pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Hm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Ht(12329,{type:typeof n})}function ra(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ct(pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Hm(n);throw new Ct(pt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="firestore.googleapis.com",Bw=!0;class Uw{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Ct(pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OA,this.ssl=Bw}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:Bw;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=lA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<uD)throw new Ct(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Pk("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IA((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ct(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ct(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ct(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class jm{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ct(pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uw(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new BO;switch(i.type){case"firstParty":return new FO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ct(pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=Nw.get(e);i&&(Rt("ComponentProvider","Removing Datastore"),Nw.delete(e),i.terminate())}(this),Promise.resolve()}}function Dk(n,t,e,i={}){var r;n=ra(n,jm);const l=Qu(t),c=n._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),m=`${t}:${e}`;l&&(i1(`https://${m}`),s1("Firestore",!0)),c.host!==OA&&c.host!==m&&ju("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:i});if(!xo(g,d)&&(n._setSettings(g),i.mockUserToken)){let b,w;if(typeof i.mockUserToken=="string")b=i.mockUserToken,w=Kn.MOCK_USER;else{b=fM(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new Ct(pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Kn(S)}n._authCredentials=new UO(new v1(b,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Lo(this.firestore,t,this._query)}}class Ti{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ti(this.firestore,t,this._key)}}class wo extends Lo{constructor(t,e,i){super(t,e,Pm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ti(this.firestore,null,new Lt(t))}withConverter(t){return new wo(this.firestore,t,this._path)}}function Eo(n,t,...e){if(n=ti(n),MA("collection","path",t),n instanceof jm){const i=He.fromString(t,...e);return zw(i),new wo(n,null,i)}{if(!(n instanceof Ti||n instanceof wo))throw new Ct(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(He.fromString(t,...e));return zw(i),new wo(n.firestore,null,i)}}function PA(n,t,...e){if(n=ti(n),arguments.length===1&&(t=T1.newId()),MA("doc","path",t),n instanceof jm){const i=He.fromString(t,...e);return Vw(i),new Ti(n,null,new Lt(i))}{if(!(n instanceof Ti||n instanceof wo))throw new Ct(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(He.fromString(t,...e));return Vw(i),new Ti(n.firestore,n instanceof wo?n.converter:null,new Lt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="AsyncQueue";class jw{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new fA(this,"async_queue_retry"),this.rc=()=>{const i=Xg();i&&Rt(Hw,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=t;const e=Xg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const e=Xg();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const e=new ia;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!nc(t))throw t;Rt(Hw,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const e=this.sc.then(()=>(this.ec=!0,t().catch(i=>{throw this.Xu=i,this.ec=!1,la("INTERNAL UNHANDLED ERROR: ",Fw(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=e,e}enqueueAfterDelay(t,e,i){this.oc(),this.nc.indexOf(t)>-1&&(e=0);const r=Ly.createAndSchedule(this,t,e,i,l=>this.uc(l));return this.Zu.push(r),r}oc(){this.Xu&&Ht(47125,{cc:Fw(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const e of this.Zu)if(e.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Zu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const e=this.Zu.indexOf(t);this.Zu.splice(e,1)}}function Fw(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const r=e;for(const l of i)if(l in r&&typeof r[l]=="function")return!0;return!1}(n,["next","error","complete"])}class Yu extends jm{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new jw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new jw(t),this._firestoreClient=void 0,await t}}}function kk(n,t){const e=typeof n=="object"?n:gy(),i=typeof n=="string"?n:$d,r=Bl(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const l=cM("firestore");l&&Dk(r,...l)}return r}function Fm(n){if(n._terminated)throw new Ct(pt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Lk(n),n._firestoreClient}function Lk(n){var t,e,i;const r=n._freezeSettings(),l=function(d,m,g,b){return new sP(d,m,g,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,IA(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new Rk(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $u(Bn.fromBase64String(t))}catch(e){throw new Ct(pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new $u(Bn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Ct(pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ct(pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ct(pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Jt(this._lat,t._lat)||Jt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==r[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=/^__.*__$/;class Vk{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new jl(t,this.data,this.fieldMask,e,this.fieldTransforms):new Kh(t,this.data,e,this.fieldTransforms)}}function DA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ht(40011,{Ic:n})}}class Yy{constructor(t,e,i,r,l,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new Yy(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.dc({path:i,Rc:!1});return r.Vc(t),r}mc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.dc({path:i,Rc:!1});return r.Ec(),r}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return sm(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(DA(this.Ic)&&Nk.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class zk{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||zm(t)}bc(t,e,i,r=!1){return new Yy({Ic:t,methodName:e,wc:i,path:Vn.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kA(n){const t=n._freezeSettings(),e=zm(n._databaseId);return new zk(n._databaseId,!!t.ignoreUndefinedProperties,e)}function Bk(n,t,e,i,r,l={}){const c=n.bc(l.merge||l.mergeFields?2:0,t,e,r);VA("Data must be an object, but it was:",c,i);const d=LA(i,c);let m,g;if(l.merge)m=new Vs(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const b=[];for(const w of l.mergeFields){const S=Hk(t,w,e);if(!c.contains(S))throw new Ct(pt.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Fk(b,S)||b.push(S)}m=new Vs(b),g=c.fieldTransforms.filter(w=>m.covers(w.field))}else m=null,g=c.fieldTransforms;return new Vk(new ms(d),m,g)}class $y extends Gy{_toFieldTransform(t){return new MP(t.path,new kh)}isEqual(t){return t instanceof $y}}function Uk(n,t,e,i=!1){return Ky(e,n.bc(i?4:3,t))}function Ky(n,t){if(NA(n=ti(n)))return VA("Unsupported field value:",t,n),LA(n,t);if(n instanceof Gy)return function(i,r){if(!DA(r.Ic))throw r.gc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(r);l&&r.fieldTransforms.push(l)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(i,r){const l=[];let c=0;for(const d of i){let m=Ky(d,r.fc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(n,t)}return function(i,r){if((i=ti(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return RP(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=an.fromDate(i);return{timestampValue:Jd(r.serializer,l)}}if(i instanceof an){const l=new an(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Jd(r.serializer,l)}}if(i instanceof Zy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $u)return{bytesValue:eA(r.serializer,i._byteString)};if(i instanceof Ti){const l=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw r.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:xy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Wy)return function(c,d){return{mapValue:{fields:{[I1]:{stringValue:M1},[Kd]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.gc("VectorValues must only contain numeric values.");return Ey(d.serializer,g)})}}}}}}(i,r);throw r.gc(`Unsupported field value: ${Hm(i)}`)}(n,t)}function LA(n,t){const e={};return E1(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ul(n,(i,r)=>{const l=Ky(r,t.Ac(i));l!=null&&(e[i]=l)}),{mapValue:{fields:e}}}function NA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof an||n instanceof Zy||n instanceof $u||n instanceof Ti||n instanceof Gy||n instanceof Wy)}function VA(n,t,e){if(!NA(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const i=Hm(e);throw i==="an object"?t.gc(n+" a custom object"):t.gc(n+" "+i)}}function Hk(n,t,e){if((t=ti(t))instanceof qy)return t._internalPath;if(typeof t=="string")return zA(n,t);throw sm("Field path arguments must be of type string or ",n,!1,void 0,e)}const jk=new RegExp("[~\\*/\\[\\]]");function zA(n,t,e){if(t.search(jk)>=0)throw sm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new qy(...t.split("."))._internalPath}catch{throw sm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function sm(n,t,e,i,r){const l=i&&!i.isEmpty(),c=r!==void 0;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${r}`),m+=")"),new Ct(pt.INVALID_ARGUMENT,d+n+m)}function Fk(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(t,e,i,r,l){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new qk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(qm("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class qk extends BA{data(){return super.data()}}function qm(n,t){return typeof t=="string"?zA(n,t):t instanceof qy?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ct(pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xy{}class HA extends Xy{}function rm(n,t,...e){let i=[];t instanceof Xy&&i.push(t),i=i.concat(e),function(l){const c=l.filter(m=>m instanceof Qy).length,d=l.filter(m=>m instanceof Gm).length;if(c>1||c>0&&d>0)throw new Ct(pt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class Gm extends HA{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new Gm(t,e,i)}_apply(t){const e=this._parse(t);return jA(t._query,e),new Lo(t.firestore,t.converter,x_(t._query,e))}_parse(t){const e=kA(t.firestore);return function(l,c,d,m,g,b,w){let S;if(g.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ct(pt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Ww(w,b);const M=[];for(const D of w)M.push(Zw(m,l,D));S={arrayValue:{values:M}}}else S=Zw(m,l,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Ww(w,b),S=Uk(d,c,w,b==="in"||b==="not-in");return fn.create(g,b,S)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function Gw(n,t,e){const i=t,r=qm("where",n);return Gm._create(r,i,e)}class Qy extends Xy{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Qy(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:Hs.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(r,l){let c=r;const d=l.getFlattenedFilters();for(const m of d)jA(c,m),c=x_(c,m)}(t._query,e),new Lo(t.firestore,t.converter,x_(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jy extends HA{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Jy(t,e)}_apply(t){const e=function(r,l,c){if(r.startAt!==null)throw new Ct(pt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Ct(pt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dh(l,c)}(t._query,this._field,this._direction);return new Lo(t.firestore,t.converter,function(r,l){const c=r.explicitOrderBy.concat([l]);return new ic(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}function Gk(n,t="asc"){const e=t,i=qm("orderBy",n);return Jy._create(i,e)}function Zw(n,t,e){if(typeof(e=ti(e))=="string"){if(e==="")throw new Ct(pt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z1(t)&&e.indexOf("/")!==-1)throw new Ct(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(He.fromString(e));if(!Lt.isDocumentKey(i))throw new Ct(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return rw(n,new Lt(i))}if(e instanceof Ti)return rw(n,e._key);throw new Ct(pt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hm(e)}.`)}function Ww(n,t){if(!Array.isArray(n)||n.length===0)throw new Ct(pt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function jA(n,t){const e=function(r,l){for(const c of r)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new Ct(pt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ct(pt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class Zk{convertValue(t,e="none"){switch(Mo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return sn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Io(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Ht(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Ul(t,(r,l)=>{i[r]=this.convertValue(l,e)}),i}convertVectorValue(t){var e,i,r;const l=(r=(i=(e=t.fields)===null||e===void 0?void 0:e[Kd].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(c=>sn(c.doubleValue));return new Wy(l)}convertGeoPoint(t){return new Zy(sn(t.latitude),sn(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Om(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Mh(t));default:return null}}convertTimestamp(t){const e=Co(t);return new an(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=He.fromString(t);ve(oA(i),9688,{name:t});const r=new Oh(i.get(1),i.get(3)),l=new Lt(i.popFirst(5));return r.isEqual(e)||la(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(n,t,e){let i;return i=n?n.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class FA extends BA{constructor(t,e,i,r,l,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(qm("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class zd extends FA{data(t={}){return super.data(t)}}class qA{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new lh(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new zd(this._firestore,this._userDataWriter,i.key,i,new lh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ct(pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(d=>{const m=new zd(r._firestore,r._userDataWriter,d.doc.key,d.doc,new lh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new zd(r._firestore,r._userDataWriter,d.doc.key,d.doc,new lh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,b=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),b=c.indexOf(d.doc.key)),{type:Yk(d.type),doc:m,oldIndex:g,newIndex:b}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Yk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ht(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(n){n=ra(n,Ti);const t=ra(n.firestore,Yu);return Mk(Fm(t),n._key).then(e=>GA(t,n,e))}class tv extends Zk{constructor(t){super(),this.firestore=t}convertBytes(t){return new $u(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ti(this.firestore,null,e)}}function V_(n){n=ra(n,Lo);const t=ra(n.firestore,Yu),e=Fm(t),i=new tv(t);return UA(n._query),Ok(e,n._query).then(r=>new qA(t,i,n,r))}function ev(n,t){const e=ra(n.firestore,Yu),i=PA(n),r=Wk(n.converter,t);return Kk(e,[Bk(kA(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,sa.exists(!1))]).then(()=>i)}function z_(n,...t){var e,i,r;n=ti(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof t[c]!="object"||qw(t[c])||(l=t[c],c++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(qw(t[c])){const w=t[c];t[c]=(e=w.next)===null||e===void 0?void 0:e.bind(w),t[c+1]=(i=w.error)===null||i===void 0?void 0:i.bind(w),t[c+2]=(r=w.complete)===null||r===void 0?void 0:r.bind(w)}let m,g,b;if(n instanceof Ti)g=ra(n.firestore,Yu),b=Pm(n._key.path),m={next:w=>{t[c]&&t[c](GA(g,n,w))},error:t[c+1],complete:t[c+2]};else{const w=ra(n,Lo);g=ra(w.firestore,Yu),b=w._query;const S=new tv(g);m={next:C=>{t[c]&&t[c](new qA(g,S,w,C))},error:t[c+1],complete:t[c+2]},UA(n._query)}return function(S,C,M,D){const N=new Fy(D),j=new Uy(C,N,M);return S.asyncQueue.enqueueAndForget(async()=>Vy(await im(S),j)),()=>{N.xu(),S.asyncQueue.enqueueAndForget(async()=>zy(await im(S),j))}}(Fm(g),b,d,m)}function Kk(n,t){return function(i,r){const l=new ia;return i.asyncQueue.enqueueAndForget(async()=>yk(await Ik(i),r,l)),l.promise}(Fm(n),t)}function GA(n,t,e){const i=e.docs.get(t._key),r=new tv(n);return new FA(n,r,t._key,i,new lh(e.hasPendingWrites,e.fromCache),t.converter)}function Xk(){return new $y("serverTimestamp")}(function(t,e=!0){(function(r){tc=r})(Ju),yr(new Us("firestore",(i,{instanceIdentifier:r,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Yu(new HO(i.getProvider("auth-internal")),new qO(c,i.getProvider("app-check-internal")),function(g,b){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ct(pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oh(g.options.projectId,b)}(c,r),c);return l=Object.assign({useFetchStreams:e},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),gs(WT,YT,t),gs(WT,YT,"esm2017")})();var Qk="firebase",Jk="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(Qk,Jk,"app");const ZA="@firebase/installations",nv="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=1e4,YA=`w:${nv}`,$A="FIS_v2",tL="https://firebaseinstallations.googleapis.com/v1",eL=60*60*1e3,nL="installations",iL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ol=new zl(nL,iL,sL);function KA(n){return n instanceof Fs&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA({projectId:n}){return`${tL}/projects/${n}/installations`}function QA(n){return{token:n.token,requestStatus:2,expiresIn:aL(n.expiresIn),creationTime:Date.now()}}async function JA(n,t){const i=(await t.json()).error;return Ol.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function tx({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function rL(n,{refreshToken:t}){const e=tx(n);return e.append("Authorization",oL(t)),e}async function ex(n){const t=await n();return t.status>=500&&t.status<600?n():t}function aL(n){return Number(n.replace("s","000"))}function oL(n){return`${$A} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const i=XA(n),r=tx(n),l=t.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&r.append("x-firebase-client",g)}const c={fid:e,authVersion:$A,appId:n.appId,sdkVersion:YA},d={method:"POST",headers:r,body:JSON.stringify(c)},m=await ex(()=>fetch(i,d));if(m.ok){const g=await m.json();return{fid:g.fid||e,registrationStatus:2,refreshToken:g.refreshToken,authToken:QA(g.authToken)}}else throw await JA("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=/^[cdef][\w-]{21}$/,B_="";function hL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=fL(n);return cL.test(e)?e:B_}catch{return B_}}function fL(n){return uL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=new Map;function sx(n,t){const e=Zm(n);rx(e,t),dL(e,t)}function rx(n,t){const e=ix.get(n);if(e)for(const i of e)i(t)}function dL(n,t){const e=mL();e&&e.postMessage({key:n,fid:t}),pL()}let Al=null;function mL(){return!Al&&"BroadcastChannel"in self&&(Al=new BroadcastChannel("[Firebase] FID Change"),Al.onmessage=n=>{rx(n.data.key,n.data.fid)}),Al}function pL(){ix.size===0&&Al&&(Al.close(),Al=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="firebase-installations-database",_L=1,Pl="firebase-installations-store";let Jg=null;function iv(){return Jg||(Jg=l1(gL,_L,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(Pl)}}})),Jg}async function am(n,t){const e=Zm(n),r=(await iv()).transaction(Pl,"readwrite"),l=r.objectStore(Pl),c=await l.get(e);return await l.put(t,e),await r.done,(!c||c.fid!==t.fid)&&sx(n,t.fid),t}async function ax(n){const t=Zm(n),i=(await iv()).transaction(Pl,"readwrite");await i.objectStore(Pl).delete(t),await i.done}async function Wm(n,t){const e=Zm(n),r=(await iv()).transaction(Pl,"readwrite"),l=r.objectStore(Pl),c=await l.get(e),d=t(c);return d===void 0?await l.delete(e):await l.put(d,e),await r.done,d&&(!c||c.fid!==d.fid)&&sx(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sv(n){let t;const e=await Wm(n.appConfig,i=>{const r=yL(i),l=vL(n,r);return t=l.registrationPromise,l.installationEntry});return e.fid===B_?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function yL(n){const t=n||{fid:hL(),registrationStatus:0};return ox(t)}function vL(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Ol.create("app-offline"));return{installationEntry:t,registrationPromise:r}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=bL(n,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:TL(n)}:{installationEntry:t}}async function bL(n,t){try{const e=await lL(n,t);return am(n.appConfig,e)}catch(e){throw KA(e)&&e.customData.serverCode===409?await ax(n.appConfig):await am(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function TL(n){let t=await Yw(n.appConfig);for(;t.registrationStatus===1;)await nx(100),t=await Yw(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:i}=await sv(n);return i||e}return t}function Yw(n){return Wm(n,t=>{if(!t)throw Ol.create("installation-not-found");return ox(t)})}function ox(n){return wL(n)?{fid:n.fid,registrationStatus:0}:n}function wL(n){return n.registrationStatus===1&&n.registrationTime+WA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EL({appConfig:n,heartbeatServiceProvider:t},e){const i=SL(n,e),r=rL(n,e),l=t.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&r.append("x-firebase-client",g)}const c={installation:{sdkVersion:YA,appId:n.appId}},d={method:"POST",headers:r,body:JSON.stringify(c)},m=await ex(()=>fetch(i,d));if(m.ok){const g=await m.json();return QA(g)}else throw await JA("Generate Auth Token",m)}function SL(n,{fid:t}){return`${XA(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rv(n,t=!1){let e;const i=await Wm(n.appConfig,l=>{if(!lx(l))throw Ol.create("not-registered");const c=l.authToken;if(!t&&RL(c))return l;if(c.requestStatus===1)return e=AL(n,t),l;{if(!navigator.onLine)throw Ol.create("app-offline");const d=IL(l);return e=xL(n,d),d}});return e?await e:i.authToken}async function AL(n,t){let e=await $w(n.appConfig);for(;e.authToken.requestStatus===1;)await nx(100),e=await $w(n.appConfig);const i=e.authToken;return i.requestStatus===0?rv(n,t):i}function $w(n){return Wm(n,t=>{if(!lx(t))throw Ol.create("not-registered");const e=t.authToken;return ML(e)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function xL(n,t){try{const e=await EL(n,t),i=Object.assign(Object.assign({},t),{authToken:e});return await am(n.appConfig,i),e}catch(e){if(KA(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await ax(n.appConfig);else{const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await am(n.appConfig,i)}throw e}}function lx(n){return n!==void 0&&n.registrationStatus===2}function RL(n){return n.requestStatus===2&&!CL(n)}function CL(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+eL}function IL(n){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:t})}function ML(n){return n.requestStatus===1&&n.requestTime+WA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL(n){const t=n,{installationEntry:e,registrationPromise:i}=await sv(t);return i?i.catch(console.error):rv(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(n,t=!1){const e=n;return await DL(e),(await rv(e,t)).token}async function DL(n){const{registrationPromise:t}=await sv(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(n){if(!n||!n.options)throw t_("App Configuration");if(!n.name)throw t_("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw t_(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function t_(n){return Ol.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="installations",LL="installations-internal",NL=n=>{const t=n.getProvider("app").getImmediate(),e=kL(t),i=Bl(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},VL=n=>{const t=n.getProvider("app").getImmediate(),e=Bl(t,ux).getImmediate();return{getId:()=>OL(e),getToken:r=>PL(e,r)}};function zL(){yr(new Us(ux,NL,"PUBLIC")),yr(new Us(LL,VL,"PRIVATE"))}zL();gs(ZA,nv);gs(ZA,nv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="analytics",BL="firebase_id",UL="origin",HL=60*1e3,jL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",av="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Cm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zi=new zl("analytics","Analytics",FL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(n){if(!n.startsWith(av)){const t=Zi.create("invalid-gtag-resource",{gtagURL:n});return wi.warn(t.message),""}return n}function cx(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function GL(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function ZL(n,t){const e=GL("firebase-js-sdk-policy",{createScriptURL:qL}),i=document.createElement("script"),r=`${av}?l=${n}&id=${t}`;i.src=e?e==null?void 0:e.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function WL(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function YL(n,t,e,i,r,l){const c=i[r];try{if(c)await t[c];else{const m=(await cx(e)).find(g=>g.measurementId===r);m&&await t[m.appId]}}catch(d){wi.error(d)}n("config",r,l)}async function $L(n,t,e,i,r){try{let l=[];if(r&&r.send_to){let c=r.send_to;Array.isArray(c)||(c=[c]);const d=await cx(e);for(const m of c){const g=d.find(w=>w.measurementId===m),b=g&&t[g.appId];if(b)l.push(b);else{l=[];break}}}l.length===0&&(l=Object.values(t)),await Promise.all(l),n("event",i,r||{})}catch(l){wi.error(l)}}function KL(n,t,e,i){async function r(l,...c){try{if(l==="event"){const[d,m]=c;await $L(n,t,e,d,m)}else if(l==="config"){const[d,m]=c;await YL(n,t,e,i,d,m)}else if(l==="consent"){const[d,m]=c;n("consent",d,m)}else if(l==="get"){const[d,m,g]=c;n("get",d,m,g)}else if(l==="set"){const[d]=c;n("set",d)}else n(l,...c)}catch(d){wi.error(d)}}return r}function XL(n,t,e,i,r){let l=function(...c){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(l=window[r]),window[r]=KL(l,n,t,e),{gtagCore:l,wrappedGtag:window[r]}}function QL(n){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(av)&&e.src.includes(n))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=30,tN=1e3;class eN{constructor(t={},e=tN){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const hx=new eN;function nN(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function iN(n){var t;const{appId:e,apiKey:i}=n,r={method:"GET",headers:nN(i)},l=jL.replace("{app-id}",e),c=await fetch(l,r);if(c.status!==200&&c.status!==304){let d="";try{const m=await c.json();!((t=m.error)===null||t===void 0)&&t.message&&(d=m.error.message)}catch{}throw Zi.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function sN(n,t=hx,e){const{appId:i,apiKey:r,measurementId:l}=n.options;if(!i)throw Zi.create("no-app-id");if(!r){if(l)return{measurementId:l,appId:i};throw Zi.create("no-api-key")}const c=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new oN;return setTimeout(async()=>{d.abort()},HL),fx({appId:i,apiKey:r,measurementId:l},c,d,t)}async function fx(n,{throttleEndTimeMillis:t,backoffCount:e},i,r=hx){var l;const{appId:c,measurementId:d}=n;try{await rN(i,t)}catch(m){if(d)return wi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:c,measurementId:d};throw m}try{const m=await iN(n);return r.deleteThrottleMetadata(c),m}catch(m){const g=m;if(!aN(g)){if(r.deleteThrottleMetadata(c),d)return wi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:d};throw m}const b=Number((l=g==null?void 0:g.customData)===null||l===void 0?void 0:l.httpStatus)===503?VT(e,r.intervalMillis,JL):VT(e,r.intervalMillis),w={throttleEndTimeMillis:Date.now()+b,backoffCount:e+1};return r.setThrottleMetadata(c,w),wi.debug(`Calling attemptFetch again in ${b} millis`),fx(n,w,i,r)}}function rN(n,t){return new Promise((e,i)=>{const r=Math.max(t-Date.now(),0),l=setTimeout(e,r);n.addEventListener(()=>{clearTimeout(l),i(Zi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function aN(n){if(!(n instanceof Fs)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class oN{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function lN(n,t,e,i,r){if(r&&r.global){n("event",e,i);return}else{const l=await t,c=Object.assign(Object.assign({},i),{send_to:l});n("event",e,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(){if(dy())try{await my()}catch(n){return wi.warn(Zi.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return wi.warn(Zi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function cN(n,t,e,i,r,l,c){var d;const m=sN(n);m.then(C=>{e[C.measurementId]=C.appId,n.options.measurementId&&C.measurementId!==n.options.measurementId&&wi.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${C.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(C=>wi.error(C)),t.push(m);const g=uN().then(C=>{if(C)return i.getId()}),[b,w]=await Promise.all([m,g]);QL(l)||ZL(l,b.measurementId),r("js",new Date);const S=(d=c==null?void 0:c.config)!==null&&d!==void 0?d:{};return S[UL]="firebase",S.update=!0,w!=null&&(S[BL]=w),r("config",b.measurementId,S),b.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(t){this.app=t}_delete(){return delete bh[this.app.options.appId],Promise.resolve()}}let bh={},Kw=[];const Xw={};let e_="dataLayer",fN="gtag",Qw,dx,Jw=!1;function dN(){const n=[];if(fy()&&n.push("This is a browser extension environment."),r1()||n.push("Cookies are not available."),n.length>0){const t=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),e=Zi.create("invalid-analytics-context",{errorInfo:t});wi.warn(e.message)}}function mN(n,t,e){dN();const i=n.options.appId;if(!i)throw Zi.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)wi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zi.create("no-api-key");if(bh[i]!=null)throw Zi.create("already-exists",{id:i});if(!Jw){WL(e_);const{wrappedGtag:l,gtagCore:c}=XL(bh,Kw,Xw,e_,fN);dx=l,Qw=c,Jw=!0}return bh[i]=cN(n,Kw,Xw,t,Qw,e_,e),new hN(n)}function pN(n=gy()){n=ti(n);const t=Bl(n,om);return t.isInitialized()?t.getImmediate():gN(n)}function gN(n,t={}){const e=Bl(n,om);if(e.isInitialized()){const r=e.getImmediate();if(xo(t,e.getOptions()))return r;throw Zi.create("already-initialized")}return e.initialize({options:t})}async function _N(){if(fy()||!r1()||!dy())return!1;try{return await my()}catch{return!1}}function yN(n,t,e,i){n=ti(n),lN(dx,bh[n.app.options.appId],t,e,i).catch(r=>wi.error(r))}const tE="@firebase/analytics",eE="0.10.16";function vN(){yr(new Us(om,(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return mN(i,r,e)},"PUBLIC")),yr(new Us("analytics-internal",n,"PRIVATE")),gs(tE,eE),gs(tE,eE,"esm2017");function n(t){try{const e=t.getProvider(om).getImmediate();return{logEvent:(i,r,l)=>yN(e,i,r,l)}}catch(e){throw Zi.create("interop-component-reg-failed",{reason:e})}}}vN();function ov(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e}function mx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bN=mx,px=new zl("auth","Firebase",mx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=new Cm("@firebase/auth");function TN(n,...t){lm.logLevel<=ae.WARN&&lm.warn(`Auth (${Ju}): ${n}`,...t)}function Bd(n,...t){lm.logLevel<=ae.ERROR&&lm.error(`Auth (${Ju}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(n,...t){throw lv(n,...t)}function gr(n,...t){return lv(n,...t)}function gx(n,t,e){const i=Object.assign(Object.assign({},bN()),{[t]:e});return new zl("auth","Firebase",i).create(t,{appName:n.name})}function So(n){return gx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lv(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return px.create(n,...t)}function qt(n,t,...e){if(!n)throw lv(t,...e)}function Jr(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Bd(t),new Error(t)}function ha(n,t){n||Jr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function wN(){return nE()==="http:"||nE()==="https:"}function nE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wN()||fy()||"connection"in navigator)?navigator.onLine:!0}function SN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(t,e){this.shortDelay=t,this.longDelay=e,ha(e>t,"Short delay should be less than long delay!"),this.isMobile=pM()||yM()}get(){return EN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(n,t){ha(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RN=new tf(3e4,6e4);function Ym(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function rc(n,t,e,i,r={}){return yx(n,r,async()=>{let l={},c={};i&&(t==="GET"?c=i:l={body:JSON.stringify(i)});const d=$h(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:t,headers:m},l);return _M()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Qu(n.emulatorConfig.host)&&(g.credentials="include"),_x.fetch()(await bx(n,n.config.apiHost,e,d),g)})}async function yx(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},AN),t);try{const r=new CN(n),l=await Promise.race([e(),r.promise]);r.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw gd(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw gd(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw gd(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw gd(n,"user-disabled",c);const b=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw gx(n,b,g);ca(n,b)}}catch(r){if(r instanceof Fs)throw r;ca(n,"network-request-failed",{message:String(r)})}}async function vx(n,t,e,i,r={}){const l=await rc(n,t,e,i,r);return"mfaPendingCredential"in l&&ca(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function bx(n,t,e,i){const r=`${t}${e}?${i}`,l=n,c=l.config.emulator?uv(n.config,r):`${n.config.apiScheme}://${r}`;return xN.includes(e)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class CN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(gr(this.auth,"network-request-failed")),RN.get())})}}function gd(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=gr(n,t,i);return r.customData._tokenResponse=e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(n,t){return rc(n,"POST","/v1/accounts:delete",t)}async function um(n,t){return rc(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function MN(n,t=!1){const e=ti(n),i=await e.getIdToken(t),r=cv(i);qt(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const l=typeof r.firebase=="object"?r.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:r,token:i,authTime:Th(n_(r.auth_time)),issuedAtTime:Th(n_(r.iat)),expirationTime:Th(n_(r.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function n_(n){return Number(n)*1e3}function cv(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Bd("JWT malformed, contained fewer than 3 sections"),null;try{const r=JS(e);return r?JSON.parse(r):(Bd("Failed to decode base64 JWT payload"),null)}catch(r){return Bd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function iE(n){const t=cv(n);return qt(t,"internal-error"),qt(typeof t.exp<"u","internal-error"),qt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Fs&&ON(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function ON({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Th(this.lastLoginAt),this.creationTime=Th(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cm(n){var t;const e=n.auth,i=await n.getIdToken(),r=await Vh(n,um(e,{idToken:i}));qt(r==null?void 0:r.users.length,e,"internal-error");const l=r.users[0];n._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?Tx(l.providerUserInfo):[],d=kN(n.providerData,c),m=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),b=m?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new H_(l.createdAt,l.lastLoginAt),isAnonymous:b};Object.assign(n,w)}async function DN(n){const t=ti(n);await cm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function kN(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function Tx(n){return n.map(t=>{var{providerId:e}=t,i=ov(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LN(n,t){const e=await yx(n,{},async()=>{const i=$h({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:l}=n.config,c=await bx(n,r,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return n.emulatorConfig&&Qu(n.emulatorConfig.host)&&(m.credentials="include"),_x.fetch()(c,m)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function NN(n,t){return rc(n,"POST","/v2/accounts:revokeToken",Ym(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){qt(t.idToken,"internal-error"),qt(typeof t.idToken<"u","internal-error"),qt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):iE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){qt(t.length!==0,"internal-error");const e=iE(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(qt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:l}=await LN(t,e);this.updateTokensAndExpiration(i,r,Number(l))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:l}=e,c=new zu;return i&&(qt(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),r&&(qt(typeof r=="string","internal-error",{appName:t}),c.accessToken=r),l&&(qt(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new zu,this.toJSON())}_performRefresh(){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(n,t){qt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class zs{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,l=ov(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new H_(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const e=await Vh(this,this.stsTokenManager.getToken(this.auth,t));return qt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return MN(this,t)}reload(){return DN(this)}_assign(t){this!==t&&(qt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new zs(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){qt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await cm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ns(this.auth.app))return Promise.reject(So(this.auth));const t=await this.getIdToken();return await Vh(this,IN(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,l,c,d,m,g,b;const w=(i=e.displayName)!==null&&i!==void 0?i:void 0,S=(r=e.email)!==null&&r!==void 0?r:void 0,C=(l=e.phoneNumber)!==null&&l!==void 0?l:void 0,M=(c=e.photoURL)!==null&&c!==void 0?c:void 0,D=(d=e.tenantId)!==null&&d!==void 0?d:void 0,N=(m=e._redirectEventId)!==null&&m!==void 0?m:void 0,j=(g=e.createdAt)!==null&&g!==void 0?g:void 0,q=(b=e.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:Y,emailVerified:it,isAnonymous:lt,providerData:bt,stsTokenManager:V}=e;qt(Y&&V,t,"internal-error");const P=zu.fromJSON(this.name,V);qt(typeof Y=="string",t,"internal-error"),lo(w,t.name),lo(S,t.name),qt(typeof it=="boolean",t,"internal-error"),qt(typeof lt=="boolean",t,"internal-error"),lo(C,t.name),lo(M,t.name),lo(D,t.name),lo(N,t.name),lo(j,t.name),lo(q,t.name);const z=new zs({uid:Y,auth:t,email:S,emailVerified:it,displayName:w,isAnonymous:lt,photoURL:M,phoneNumber:C,tenantId:D,stsTokenManager:P,createdAt:j,lastLoginAt:q});return bt&&Array.isArray(bt)&&(z.providerData=bt.map(U=>Object.assign({},U))),N&&(z._redirectEventId=N),z}static async _fromIdTokenResponse(t,e,i=!1){const r=new zu;r.updateFromServerResponse(e);const l=new zs({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await cm(l),l}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];qt(r.localId!==void 0,"internal-error");const l=r.providerUserInfo!==void 0?Tx(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!(l!=null&&l.length),d=new zu;d.updateFromIdToken(i);const m=new zs({uid:r.localId,auth:t,stsTokenManager:d,isAnonymous:c}),g={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new H_(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;function ta(n){ha(n instanceof Function,"Expected a class definition");let t=sE.get(n);return t?(ha(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,sE.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}wx.type="NONE";const rE=wx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(n,t,e){return`firebase:${n}:${t}:${e}`}class Bu{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:l}=this.auth;this.fullUserKey=Ud(this.userKey,r.apiKey,l),this.fullPersistenceKey=Ud("persistence",r.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await um(this.auth,{idToken:t}).catch(()=>{});return e?zs._fromGetAccountInfoResponse(this.auth,e,t):null}return zs._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Bu(ta(rE),t,i);const r=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=r[0]||ta(rE);const c=Ud(i,t.config.apiKey,t.name);let d=null;for(const g of e)try{const b=await g._get(c);if(b){let w;if(typeof b=="string"){const S=await um(t,{idToken:b}).catch(()=>{});if(!S)break;w=await zs._fromGetAccountInfoResponse(t,S,b)}else w=zs._fromJSON(t,b);g!==l&&(d=w),l=g;break}}catch{}const m=r.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Bu(l,t,i):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(e.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Bu(l,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(xx(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ex(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Cx(t))return"Blackberry";if(Ix(t))return"Webos";if(Sx(t))return"Safari";if((t.includes("chrome/")||Ax(t))&&!t.includes("edge/"))return"Chrome";if(Rx(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Ex(n=Jn()){return/firefox\//i.test(n)}function Sx(n=Jn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ax(n=Jn()){return/crios\//i.test(n)}function xx(n=Jn()){return/iemobile/i.test(n)}function Rx(n=Jn()){return/android/i.test(n)}function Cx(n=Jn()){return/blackberry/i.test(n)}function Ix(n=Jn()){return/webos/i.test(n)}function hv(n=Jn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function VN(n=Jn()){var t;return hv(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function zN(){return vM()&&document.documentMode===10}function Mx(n=Jn()){return hv(n)||Rx(n)||Ix(n)||Cx(n)||/windows phone/i.test(n)||xx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(n,t=[]){let e;switch(n){case"Browser":e=aE(Jn());break;case"Worker":e=`${aE(Jn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Ju}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=l=>new Promise((c,d)=>{try{const m=t(l);c(m)}catch(m){d(m)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(n,t={}){return rc(n,"GET","/v2/passwordPolicy",Ym(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=6;class jN{constructor(t){var e,i,r,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=c.minPasswordLength)!==null&&e!==void 0?e:HN,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,l,c,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(e=m.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(r=m.containsLowercaseLetter)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oE(this),this.idTokenSubscription=new oE(this),this.beforeStateQueue=new BN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=px,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ta(e)),this._initializationPromise=this.queue(async()=>{var i,r,l;if(!this._deleted&&(this.persistenceManager=await Bu.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await um(this,{idToken:t}),i=await zs._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(Ns(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,d=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(t);(!c||c===d)&&(m!=null&&m.user)&&(r=m.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await cm(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=SN()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ns(this.app))return Promise.reject(So(this));const e=t?ti(t):null;return e&&qt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&qt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ns(this.app)?Promise.reject(So(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ns(this.app)?Promise.reject(So(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ta(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await UN(this),e=new jN(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new zl("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await NN(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ta(t)||this._popupRedirectResolver;qt(e,this,"argument-error"),this.redirectPersistenceManager=await Bu.create(this,[ta(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(qt(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof e=="function"){const m=t.addObserver(e,i,r);return()=>{c=!0,m()}}else{const m=t.addObserver(e);return()=>{c=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return qt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Ox(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&TN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function $m(n){return ti(n)}class oE{constructor(t){this.auth=t,this.observer=null,this.addObserver=AM(e=>this.observer=e)}get next(){return qt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qN(n){fv=n}function GN(n){return fv.loadJS(n)}function ZN(){return fv.gapiScript}function WN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(n,t){const e=Bl(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),l=e.getOptions();if(xo(l,t??{}))return r;ca(r,"already-initialized")}return e.initialize({options:t})}function $N(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(ta);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function KN(n,t,e){const i=$m(n);qt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,l=Px(t),{host:c,port:d}=XN(t),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},b=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){qt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),qt(xo(g,i.config.emulator)&&xo(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,Qu(c)?(i1(`${l}//${c}${m}`),s1("Auth",!0)):QN()}function Px(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function XN(n){const t=Px(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const l=r[1];return{host:l,port:lE(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:lE(c)}}}function lE(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function QN(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Jr("not implemented")}_getIdTokenResponse(t){return Jr("not implemented")}_linkToIdToken(t,e){return Jr("not implemented")}_getReauthenticationResolver(t){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(n,t){return vx(n,"POST","/v1/accounts:signInWithIdp",Ym(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="http://localhost";class Dl extends Dx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Dl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ca("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r}=e,l=ov(e,["providerId","signInMethod"]);if(!i||!r)return null;const c=new Dl(i,r);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Uu(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Uu(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Uu(t,e)}buildRequest(){const t={requestUri:JN,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=$h(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends kx{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends ef{constructor(){super("facebook.com")}static credential(t){return Dl._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return co.credentialFromTaggedObject(t)}static credentialFromError(t){return co.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return co.credential(t.oauthAccessToken)}catch{return null}}}co.FACEBOOK_SIGN_IN_METHOD="facebook.com";co.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends ef{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Dl._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ho.credentialFromTaggedObject(t)}static credentialFromError(t){return ho.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return ho.credential(e,i)}catch{return null}}}ho.GOOGLE_SIGN_IN_METHOD="google.com";ho.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo extends ef{constructor(){super("github.com")}static credential(t){return Dl._fromParams({providerId:fo.PROVIDER_ID,signInMethod:fo.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return fo.credentialFromTaggedObject(t)}static credentialFromError(t){return fo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return fo.credential(t.oauthAccessToken)}catch{return null}}}fo.GITHUB_SIGN_IN_METHOD="github.com";fo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends ef{constructor(){super("twitter.com")}static credential(t,e){return Dl._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return mo.credentialFromTaggedObject(t)}static credentialFromError(t){return mo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return mo.credential(e,i)}catch{return null}}}mo.TWITTER_SIGN_IN_METHOD="twitter.com";mo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tV(n,t){return vx(n,"POST","/v1/accounts:signUp",Ym(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const l=await zs._fromIdTokenResponse(t,i,r),c=uE(i);return new Do({user:l,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=uE(i);return new Do({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function uE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eV(n){var t;if(Ns(n.app))return Promise.reject(So(n));const e=$m(n);if(await e._initializationPromise,!((t=e.currentUser)===null||t===void 0)&&t.isAnonymous)return new Do({user:e.currentUser,providerId:null,operationType:"signIn"});const i=await tV(e,{returnSecureToken:!0}),r=await Do._fromIdTokenResponse(e,"signIn",i,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends Fs{constructor(t,e,i,r){var l;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,hm.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new hm(t,e,i,r)}}function Lx(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?hm._fromErrorAndOperation(n,l,t,i):l})}async function nV(n,t,e=!1){const i=await Vh(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Do._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iV(n,t,e=!1){const{auth:i}=n;if(Ns(i.app))return Promise.reject(So(i));const r="reauthenticate";try{const l=await Vh(n,Lx(i,r,t,n),e);qt(l.idToken,i,"internal-error");const c=cv(l.idToken);qt(c,i,"internal-error");const{sub:d}=c;return qt(n.uid===d,i,"user-mismatch"),Do._forOperation(n,r,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ca(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sV(n,t,e=!1){if(Ns(n.app))return Promise.reject(So(n));const i="signIn",r=await Lx(n,i,t),l=await Do._fromIdTokenResponse(n,i,r);return e||await n._updateCurrentUser(l.user),l}function rV(n,t,e,i){return ti(n).onIdTokenChanged(t,e,i)}function aV(n,t,e){return ti(n).beforeAuthStateChanged(t,e)}function oV(n,t,e,i){return ti(n).onAuthStateChanged(t,e,i)}const fm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(fm,"1"),this.storage.removeItem(fm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=1e3,uV=10;class Vx extends Nx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mx(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);zN()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,uV):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},lV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Vx.type="LOCAL";const cV=Vx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx extends Nx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}zx.type="SESSION";const Bx=zx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new Km(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:l}=e.data,c=this.handlersMap[r];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const d=Array.from(c).map(async g=>g(e.origin,l)),m=await hV(d);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:m})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Km.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=dv("",20);r.port1.start();const b=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(w){const S=w;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(b),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return window}function dV(n){_r().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function mV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function gV(){return Ux()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="firebaseLocalStorageDb",_V=1,dm="firebaseLocalStorage",jx="fbase_key";class nf{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Xm(n,t){return n.transaction([dm],t?"readwrite":"readonly").objectStore(dm)}function yV(){const n=indexedDB.deleteDatabase(Hx);return new nf(n).toPromise()}function j_(){const n=indexedDB.open(Hx,_V);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(dm,{keyPath:jx})}catch(r){e(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(dm)?t(i):(i.close(),await yV(),t(await j_()))})})}async function cE(n,t,e){const i=Xm(n,!0).put({[jx]:t,value:e});return new nf(i).toPromise()}async function vV(n,t){const e=Xm(n,!1).get(t),i=await new nf(e).toPromise();return i===void 0?null:i.value}function hE(n,t){const e=Xm(n,!0).delete(t);return new nf(e).toPromise()}const bV=800,TV=3;class Fx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await j_(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>TV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ux()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Km._getInstance(gV()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await mV(),!this.activeServiceWorker)return;this.sender=new fV(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||pV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await j_();return await cE(t,fm,"1"),await hE(t,fm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>cE(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>vV(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>hE(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const l=Xm(r,!1).getAll();return new nf(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:l}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(l)&&(this.notifyListeners(r,l),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fx.type="LOCAL";const wV=Fx;new tf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(n,t){return t?ta(t):(qt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends Dx{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Uu(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Uu(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Uu(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function SV(n){return sV(n.auth,new mv(n),n.bypassAuthState)}function AV(n){const{auth:t,user:e}=n;return qt(e,t,"internal-error"),iV(e,new mv(n),n.bypassAuthState)}async function xV(n){const{auth:t,user:e}=n;return qt(e,t,"internal-error"),nV(e,new mv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(t,e,i,r,l=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:l,error:c,type:d}=t;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:e,sessionId:i,tenantId:l||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return SV;case"linkViaPopup":case"linkViaRedirect":return xV;case"reauthViaPopup":case"reauthViaRedirect":return AV;default:ca(this.auth,"internal-error")}}resolve(t){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=new tf(2e3,1e4);class Nu extends qx{constructor(t,e,i,r,l){super(t,e,r,l),this.provider=i,this.authWindow=null,this.pollId=null,Nu.currentPopupAction&&Nu.currentPopupAction.cancel(),Nu.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return qt(t,this.auth,"internal-error"),t}async onExecution(){ha(this.filter.length===1,"Popup operations only handle one event");const t=dv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nu.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,RV.get())};t()}}Nu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="pendingRedirect",Hd=new Map;class IV extends qx{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Hd.get(this.auth._key());if(!t){try{const i=await MV(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Hd.set(this.auth._key(),t)}return this.bypassAuthState||Hd.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MV(n,t){const e=DV(t),i=PV(n);if(!await i._isAvailable())return!1;const r=await i._get(e)==="true";return await i._remove(e),r}function OV(n,t){Hd.set(n._key(),t)}function PV(n){return ta(n._redirectPersistence)}function DV(n){return Ud(CV,n.config.apiKey,n.name)}async function kV(n,t,e=!1){if(Ns(n.app))return Promise.reject(So(n));const i=$m(n),r=EV(i,t),c=await new IV(i,r,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV=10*60*1e3;class NV{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!VV(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!Gx(t)){const r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(gr(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=LV&&this.cachedEventUids.clear(),this.cachedEventUids.has(fE(t))}saveEventToCache(t){this.cachedEventUids.add(fE(t)),this.lastProcessedEventTime=Date.now()}}function fE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function Gx({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function VV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gx(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(n,t={}){return rc(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UV=/^https?/;async function HV(n){if(n.config.emulator)return;const{authorizedDomains:t}=await zV(n);for(const e of t)try{if(jV(e))return}catch{}ca(n,"unauthorized-domain")}function jV(n){const t=U_(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!UV.test(e))return!1;if(BV.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=new tf(3e4,6e4);function dE(){const n=_r().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function qV(n){return new Promise((t,e)=>{var i,r,l;function c(){dE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{dE(),e(gr(n,"network-request-failed"))},timeout:FV.get()})}if(!((r=(i=_r().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((l=_r().gapi)===null||l===void 0)&&l.load)c();else{const d=WN("iframefcb");return _r()[d]=()=>{gapi.load?c():e(gr(n,"network-request-failed"))},GN(`${ZN()}?onload=${d}`).catch(m=>e(m))}}).catch(t=>{throw jd=null,t})}let jd=null;function GV(n){return jd=jd||qV(n),jd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=new tf(5e3,15e3),WV="__/auth/iframe",YV="emulator/auth/iframe",$V={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XV(n){const t=n.config;qt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?uv(t,YV):`https://${n.config.authDomain}/${WV}`,i={apiKey:t.apiKey,appName:n.name,v:Ju},r=KV.get(n.config.apiHost);r&&(i.eid=r);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${e}?${$h(i).slice(1)}`}async function QV(n){const t=await GV(n),e=_r().gapi;return qt(e,n,"internal-error"),t.open({where:document.body,url:XV(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$V,dontclear:!0},i=>new Promise(async(r,l)=>{await i.restyle({setHideOnLeave:!1});const c=gr(n,"network-request-failed"),d=_r().setTimeout(()=>{l(c)},ZV.get());function m(){_r().clearTimeout(d),r(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t4=500,e4=600,n4="_blank",i4="http://localhost";class mE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s4(n,t,e,i=t4,r=e4){const l=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m=Object.assign(Object.assign({},JV),{width:i.toString(),height:r.toString(),top:l,left:c}),g=Jn().toLowerCase();e&&(d=Ax(g)?n4:e),Ex(g)&&(t=t||i4,m.scrollbars="yes");const b=Object.entries(m).reduce((S,[C,M])=>`${S}${C}=${M},`,"");if(VN(g)&&d!=="_self")return r4(t||"",d),new mE(null);const w=window.open(t||"",d,b);qt(w,n,"popup-blocked");try{w.focus()}catch{}return new mE(w)}function r4(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="__/auth/handler",o4="emulator/auth/handler",l4=encodeURIComponent("fac");async function pE(n,t,e,i,r,l){qt(n.config.authDomain,n,"auth-domain-config-required"),qt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:Ju,eventId:r};if(t instanceof kx){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",SM(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[b,w]of Object.entries({}))c[b]=w}if(t instanceof ef){const b=t.getScopes().filter(w=>w!=="");b.length>0&&(c.scopes=b.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const b of Object.keys(d))d[b]===void 0&&delete d[b];const m=await n._getAppCheckToken(),g=m?`#${l4}=${encodeURIComponent(m)}`:"";return`${u4(n)}?${$h(d).slice(1)}${g}`}function u4({config:n}){return n.emulator?uv(n,o4):`https://${n.authDomain}/${a4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="webStorageSupport";class c4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bx,this._completeRedirectFn=kV,this._overrideRedirectResult=OV}async _openPopup(t,e,i,r){var l;ha((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await pE(t,e,i,U_(),r);return s4(t,c,dv())}async _openRedirect(t,e,i,r){await this._originValidation(t);const l=await pE(t,e,i,U_(),r);return dV(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:l}=this.eventManagers[e];return r?Promise.resolve(r):(ha(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await QV(t),i=new NV(t);return e.register("authEvent",r=>(qt(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(i_,{type:i_},r=>{var l;const c=(l=r==null?void 0:r[0])===null||l===void 0?void 0:l[i_];c!==void 0&&e(!!c),ca(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=HV(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Mx()||Sx()||hv()}}const h4=c4;var gE="@firebase/auth",_E="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){qt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m4(n){yr(new Us("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;qt(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ox(n)},g=new FN(i,r,l,m);return $N(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),yr(new Us("auth-internal",t=>{const e=$m(t.getProvider("auth").getImmediate());return(i=>new f4(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),gs(gE,_E,d4(n)),gs(gE,_E,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=5*60,g4=n1("authIdTokenMaxAge")||p4;let yE=null;const _4=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>g4)return;const r=e==null?void 0:e.token;yE!==r&&(yE=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function y4(n=gy()){const t=Bl(n,"auth");if(t.isInitialized())return t.getImmediate();const e=YN(n,{popupRedirectResolver:h4,persistence:[wV,cV,Bx]}),i=n1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=_4(l.toString());aV(e,c,()=>c(e.currentUser)),rV(e,d=>c(d))}}const r=t1("auth");return r&&KN(e,`http://${r}`),e}function v4(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}qN({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const l=gr("internal-error");l.customData=r,e(l)},i.type="text/javascript",i.charset="UTF-8",v4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m4("Browser");const b4={apiKey:"AIzaSyB34vwxqdgDvGctHQfEfrBJSk04a1rzQgg",authDomain:"tapasradar.firebaseapp.com",projectId:"tapasradar",storageBucket:"tapasradar.appspot.com",messagingSenderId:"164963298374",appId:"1:164963298374:web:5e29f30e084ede3ecdae47",measurementId:"G-0GS8PM4XGB"},pv=u1(b4);_N().then(n=>{n&&pN(pv)});const vE=y4(pv),ea=kk(pv);delete $S.Icon.Default.prototype._getIconUrl;$S.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png"});const T4=()=>{const[n,t]=K.useState([]),e=[40.4168,-3.7038];return K.useEffect(()=>{(async()=>{const r=await V_(Eo(ea,"bars")),l=[];for(const c of r.docs){const d=c.data(),g=(await V_(Eo(ea,`bars/${c.id}/comments`))).docs.map(w=>w.data()),b=g.length>0?g.reduce((w,S)=>w+S.rating,0)/g.length:null;l.push({id:c.id,nom:d.nom,lat:d.lat,lng:d.lng,note:b??null})}t(l)})()},[]),ht.jsxs("div",{className:"container",children:[ht.jsx(Wh,{}),ht.jsx("h2",{className:"title",children:"Mapa de bares en Madrid"}),ht.jsx("div",{className:"map",children:ht.jsxs(Q2,{center:e,zoom:13,style:{height:"100%",width:"100%"},children:[ht.jsx(eM,{attribution:'© <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map(i=>ht.jsx(J2,{position:[i.lat,i.lng],children:ht.jsxs(tM,{children:[ht.jsx("strong",{children:i.nom}),ht.jsx("br",{}),i.note!==null?`⭐ ${i.note.toFixed(1)} / 5`:"Sin valoraciones",ht.jsx("br",{}),ht.jsx(po,{to:`/bar/${i.id}`,children:"Ver ficha"})]})},i.id))]})}),ht.jsx(po,{to:"/",className:"back-link",children:"Volver al inicio"})]})},w4=()=>{const[n,t]=K.useState([]),[e,i]=K.useState(!0);return K.useEffect(()=>{const l=rm(Eo(ea,"bars")),c=z_(l,d=>{const m=d.docs.map(g=>({id:g.id,...g.data()}));console.log("Bars récupérés :",m),t(m),i(!1)});return()=>c()},[]),{bars:n,ajouterBar:async l=>{await ev(Eo(ea,"bars"),l)},loading:e}};function Zx(n){var t,e,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(t=0;t<r;t++)n[t]&&(e=Zx(n[t]))&&(i&&(i+=" "),i+=e)}else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function Rl(){for(var n,t,e=0,i="",r=arguments.length;e<r;e++)(n=arguments[e])&&(t=Zx(n))&&(i&&(i+=" "),i+=t);return i}function E4(n){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e),e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}E4(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var sf=n=>typeof n=="number"&&!isNaN(n),kl=n=>typeof n=="string",fa=n=>typeof n=="function",S4=n=>kl(n)||sf(n),F_=n=>kl(n)||fa(n)?n:null,A4=(n,t)=>n===!1||sf(n)&&n>0?n:t,q_=n=>K.isValidElement(n)||kl(n)||fa(n)||sf(n);function x4(n,t,e=300){let{scrollHeight:i,style:r}=n;requestAnimationFrame(()=>{r.minHeight="initial",r.height=i+"px",r.transition=`all ${e}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,e)})})}function R4({enter:n,exit:t,appendPosition:e=!1,collapse:i=!0,collapseDuration:r=300}){return function({children:l,position:c,preventExitTransition:d,done:m,nodeRef:g,isIn:b,playToast:w}){let S=e?`${n}--${c}`:n,C=e?`${t}--${c}`:t,M=K.useRef(0);return K.useLayoutEffect(()=>{let D=g.current,N=S.split(" "),j=q=>{q.target===g.current&&(w(),D.removeEventListener("animationend",j),D.removeEventListener("animationcancel",j),M.current===0&&q.type!=="animationcancel"&&D.classList.remove(...N))};D.classList.add(...N),D.addEventListener("animationend",j),D.addEventListener("animationcancel",j)},[]),K.useEffect(()=>{let D=g.current,N=()=>{D.removeEventListener("animationend",N),i?x4(D,m,r):m()};b||(d?N():(M.current=1,D.className+=` ${C}`,D.addEventListener("animationend",N)))},[b]),ge.createElement(ge.Fragment,null,l)}}function bE(n,t){return{content:Wx(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:t}}function Wx(n,t,e=!1){return K.isValidElement(n)&&!kl(n.type)?K.cloneElement(n,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:e}):fa(n)?n({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:e}):n}function C4({closeToast:n,theme:t,ariaLabel:e="close"}){return ge.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:i=>{i.stopPropagation(),n(!0)},"aria-label":e},ge.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ge.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function I4({delay:n,isRunning:t,closeToast:e,type:i="default",hide:r,className:l,controlledProgress:c,progress:d,rtl:m,isIn:g,theme:b}){let w=r||c&&d===0,S={animationDuration:`${n}ms`,animationPlayState:t?"running":"paused"};c&&(S.transform=`scaleX(${d})`);let C=Rl("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${b}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":m}),M=fa(l)?l({rtl:m,type:i,defaultClassName:C}):Rl(C,l),D={[c&&d>=1?"onTransitionEnd":"onAnimationEnd"]:c&&d<1?null:()=>{g&&e()}};return ge.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":w},ge.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${b} Toastify__progress-bar--${i}`}),ge.createElement("div",{role:"progressbar","aria-hidden":w?"true":"false","aria-label":"notification timer",className:M,style:S,...D}))}var M4=1,Yx=()=>`${M4++}`;function O4(n,t,e){let i=1,r=0,l=[],c=[],d=t,m=new Map,g=new Set,b=q=>(g.add(q),()=>g.delete(q)),w=()=>{c=Array.from(m.values()),g.forEach(q=>q())},S=({containerId:q,toastId:Y,updateId:it})=>{let lt=q?q!==n:n!==1,bt=m.has(Y)&&it==null;return lt||bt},C=(q,Y)=>{m.forEach(it=>{var lt;(Y==null||Y===it.props.toastId)&&((lt=it.toggle)==null||lt.call(it,q))})},M=q=>{var Y,it;(it=(Y=q.props)==null?void 0:Y.onClose)==null||it.call(Y,q.removalReason),q.isActive=!1},D=q=>{if(q==null)m.forEach(M);else{let Y=m.get(q);Y&&M(Y)}w()},N=()=>{r-=l.length,l=[]},j=q=>{var Y,it;let{toastId:lt,updateId:bt}=q.props,V=bt==null;q.staleId&&m.delete(q.staleId),q.isActive=!0,m.set(lt,q),w(),e(bE(q,V?"added":"updated")),V&&((it=(Y=q.props).onOpen)==null||it.call(Y))};return{id:n,props:d,observe:b,toggle:C,removeToast:D,toasts:m,clearQueue:N,buildToast:(q,Y)=>{if(S(Y))return;let{toastId:it,updateId:lt,data:bt,staleId:V,delay:P}=Y,z=lt==null;z&&r++;let U={...d,style:d.toastStyle,key:i++,...Object.fromEntries(Object.entries(Y).filter(([G,F])=>F!=null)),toastId:it,updateId:lt,data:bt,isIn:!1,className:F_(Y.className||d.toastClassName),progressClassName:F_(Y.progressClassName||d.progressClassName),autoClose:Y.isLoading?!1:A4(Y.autoClose,d.autoClose),closeToast(G){m.get(it).removalReason=G,D(it)},deleteToast(){let G=m.get(it);if(G!=null){if(e(bE(G,"removed")),m.delete(it),r--,r<0&&(r=0),l.length>0){j(l.shift());return}w()}}};U.closeButton=d.closeButton,Y.closeButton===!1||q_(Y.closeButton)?U.closeButton=Y.closeButton:Y.closeButton===!0&&(U.closeButton=q_(d.closeButton)?d.closeButton:!0);let H={content:q,props:U,staleId:V};d.limit&&d.limit>0&&r>d.limit&&z?l.push(H):sf(P)?setTimeout(()=>{j(H)},P):j(H)},setProps(q){d=q},setToggle:(q,Y)=>{let it=m.get(q);it&&(it.toggle=Y)},isToastActive:q=>{var Y;return(Y=m.get(q))==null?void 0:Y.isActive},getSnapshot:()=>c}}var li=new Map,zh=[],G_=new Set,P4=n=>G_.forEach(t=>t(n)),$x=()=>li.size>0;function D4(){zh.forEach(n=>Xx(n.content,n.options)),zh=[]}var k4=(n,{containerId:t})=>{var e;return(e=li.get(t||1))==null?void 0:e.toasts.get(n)};function Kx(n,t){var e;if(t)return!!((e=li.get(t))!=null&&e.isToastActive(n));let i=!1;return li.forEach(r=>{r.isToastActive(n)&&(i=!0)}),i}function L4(n){if(!$x()){zh=zh.filter(t=>n!=null&&t.options.toastId!==n);return}if(n==null||S4(n))li.forEach(t=>{t.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let t=li.get(n.containerId);t?t.removeToast(n.id):li.forEach(e=>{e.removeToast(n.id)})}}var N4=(n={})=>{li.forEach(t=>{t.props.limit&&(!n.containerId||t.id===n.containerId)&&t.clearQueue()})};function Xx(n,t){q_(n)&&($x()||zh.push({content:n,options:t}),li.forEach(e=>{e.buildToast(n,t)}))}function V4(n){var t;(t=li.get(n.containerId||1))==null||t.setToggle(n.id,n.fn)}function Qx(n,t){li.forEach(e=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===e.id)&&e.toggle(n,t==null?void 0:t.id)})}function z4(n){let t=n.containerId||1;return{subscribe(e){let i=O4(t,n,P4);li.set(t,i);let r=i.observe(e);return D4(),()=>{r(),li.delete(t)}},setProps(e){var i;(i=li.get(t))==null||i.setProps(e)},getSnapshot(){var e;return(e=li.get(t))==null?void 0:e.getSnapshot()}}}function B4(n){return G_.add(n),()=>{G_.delete(n)}}function U4(n){return n&&(kl(n.toastId)||sf(n.toastId))?n.toastId:Yx()}function rf(n,t){return Xx(n,t),t.toastId}function Qm(n,t){return{...t,type:t&&t.type||n,toastId:U4(t)}}function Jm(n){return(t,e)=>rf(t,Qm(n,e))}function Ae(n,t){return rf(n,Qm("default",t))}Ae.loading=(n,t)=>rf(n,Qm("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function H4(n,{pending:t,error:e,success:i},r){let l;t&&(l=kl(t)?Ae.loading(t,r):Ae.loading(t.render,{...r,...t}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(g,b,w)=>{if(b==null){Ae.dismiss(l);return}let S={type:g,...c,...r,data:w},C=kl(b)?{render:b}:b;return l?Ae.update(l,{...S,...C}):Ae(C.render,{...S,...C}),w},m=fa(n)?n():n;return m.then(g=>d("success",i,g)).catch(g=>d("error",e,g)),m}Ae.promise=H4;Ae.success=Jm("success");Ae.info=Jm("info");Ae.error=Jm("error");Ae.warning=Jm("warning");Ae.warn=Ae.warning;Ae.dark=(n,t)=>rf(n,Qm("default",{theme:"dark",...t}));function j4(n){L4(n)}Ae.dismiss=j4;Ae.clearWaitingQueue=N4;Ae.isActive=Kx;Ae.update=(n,t={})=>{let e=k4(n,t);if(e){let{props:i,content:r}=e,l={delay:100,...i,...t,toastId:t.toastId||n,updateId:Yx()};l.toastId!==n&&(l.staleId=n);let c=l.render||r;delete l.render,rf(c,l)}};Ae.done=n=>{Ae.update(n,{progress:1})};Ae.onChange=B4;Ae.play=n=>Qx(!0,n);Ae.pause=n=>Qx(!1,n);function F4(n){var t;let{subscribe:e,getSnapshot:i,setProps:r}=K.useRef(z4(n)).current;r(n);let l=(t=K.useSyncExternalStore(e,i,i))==null?void 0:t.slice();function c(d){if(!l)return[];let m=new Map;return n.newestOnTop&&l.reverse(),l.forEach(g=>{let{position:b}=g.props;m.has(b)||m.set(b,[]),m.get(b).push(g)}),Array.from(m,g=>d(g[0],g[1]))}return{getToastToRender:c,isToastActive:Kx,count:l==null?void 0:l.length}}function q4(n){let[t,e]=K.useState(!1),[i,r]=K.useState(!1),l=K.useRef(null),c=K.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:d,pauseOnHover:m,closeToast:g,onClick:b,closeOnClick:w}=n;V4({id:n.toastId,containerId:n.containerId,fn:e}),K.useEffect(()=>{if(n.pauseOnFocusLoss)return S(),()=>{C()}},[n.pauseOnFocusLoss]);function S(){document.hasFocus()||j(),window.addEventListener("focus",N),window.addEventListener("blur",j)}function C(){window.removeEventListener("focus",N),window.removeEventListener("blur",j)}function M(V){if(n.draggable===!0||n.draggable===V.pointerType){q();let P=l.current;c.canCloseOnClick=!0,c.canDrag=!0,P.style.transition="none",n.draggableDirection==="x"?(c.start=V.clientX,c.removalDistance=P.offsetWidth*(n.draggablePercent/100)):(c.start=V.clientY,c.removalDistance=P.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function D(V){let{top:P,bottom:z,left:U,right:H}=l.current.getBoundingClientRect();V.nativeEvent.type!=="touchend"&&n.pauseOnHover&&V.clientX>=U&&V.clientX<=H&&V.clientY>=P&&V.clientY<=z?j():N()}function N(){e(!0)}function j(){e(!1)}function q(){c.didMove=!1,document.addEventListener("pointermove",it),document.addEventListener("pointerup",lt)}function Y(){document.removeEventListener("pointermove",it),document.removeEventListener("pointerup",lt)}function it(V){let P=l.current;if(c.canDrag&&P){c.didMove=!0,t&&j(),n.draggableDirection==="x"?c.delta=V.clientX-c.start:c.delta=V.clientY-c.start,c.start!==V.clientX&&(c.canCloseOnClick=!1);let z=n.draggableDirection==="x"?`${c.delta}px, var(--y)`:`0, calc(${c.delta}px + var(--y))`;P.style.transform=`translate3d(${z},0)`,P.style.opacity=`${1-Math.abs(c.delta/c.removalDistance)}`}}function lt(){Y();let V=l.current;if(c.canDrag&&c.didMove&&V){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance){r(!0),n.closeToast(!0),n.collapseAll();return}V.style.transition="transform 0.2s, opacity 0.2s",V.style.removeProperty("transform"),V.style.removeProperty("opacity")}}let bt={onPointerDown:M,onPointerUp:D};return d&&m&&(bt.onMouseEnter=j,n.stacked||(bt.onMouseLeave=N)),w&&(bt.onClick=V=>{b&&b(V),c.canCloseOnClick&&g(!0)}),{playToast:N,pauseToast:j,isRunning:t,preventExitTransition:i,toastRef:l,eventHandlers:bt}}var G4=typeof window<"u"?K.useLayoutEffect:K.useEffect,tp=({theme:n,type:t,isLoading:e,...i})=>ge.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...i});function Z4(n){return ge.createElement(tp,{...n},ge.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function W4(n){return ge.createElement(tp,{...n},ge.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Y4(n){return ge.createElement(tp,{...n},ge.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function $4(n){return ge.createElement(tp,{...n},ge.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function K4(){return ge.createElement("div",{className:"Toastify__spinner"})}var Z_={info:W4,warning:Z4,success:Y4,error:$4,spinner:K4},X4=n=>n in Z_;function Q4({theme:n,type:t,isLoading:e,icon:i}){let r=null,l={theme:n,type:t};return i===!1||(fa(i)?r=i({...l,isLoading:e}):K.isValidElement(i)?r=K.cloneElement(i,l):e?r=Z_.spinner():X4(t)&&(r=Z_[t](l))),r}var J4=n=>{let{isRunning:t,preventExitTransition:e,toastRef:i,eventHandlers:r,playToast:l}=q4(n),{closeButton:c,children:d,autoClose:m,onClick:g,type:b,hideProgressBar:w,closeToast:S,transition:C,position:M,className:D,style:N,progressClassName:j,updateId:q,role:Y,progress:it,rtl:lt,toastId:bt,deleteToast:V,isIn:P,isLoading:z,closeOnClick:U,theme:H,ariaLabel:G}=n,F=Rl("Toastify__toast",`Toastify__toast-theme--${H}`,`Toastify__toast--${b}`,{"Toastify__toast--rtl":lt},{"Toastify__toast--close-on-click":U}),Yt=fa(D)?D({rtl:lt,position:M,type:b,defaultClassName:F}):Rl(F,D),kt=Q4(n),tt=!!it||!m,yt={closeToast:S,type:b,theme:H},dt=null;return c===!1||(fa(c)?dt=c(yt):K.isValidElement(c)?dt=K.cloneElement(c,yt):dt=C4(yt)),ge.createElement(C,{isIn:P,done:V,position:M,preventExitTransition:e,nodeRef:i,playToast:l},ge.createElement("div",{id:bt,tabIndex:0,onClick:g,"data-in":P,className:Yt,...r,style:N,ref:i,...P&&{role:Y,"aria-label":G}},kt!=null&&ge.createElement("div",{className:Rl("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!z})},kt),Wx(d,n,!t),dt,!n.customProgressBar&&ge.createElement(I4,{...q&&!tt?{key:`p-${q}`}:{},rtl:lt,theme:H,delay:m,isRunning:t,isIn:P,closeToast:S,hide:w,type:b,className:j,controlledProgress:tt,progress:it||0})))},tz=(n,t=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:t}),ez=R4(tz("bounce",!0)),nz={position:"top-right",transition:ez,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function iz(n){let t={...nz,...n},e=n.stacked,[i,r]=K.useState(!0),l=K.useRef(null),{getToastToRender:c,isToastActive:d,count:m}=F4(t),{className:g,style:b,rtl:w,containerId:S,hotKeys:C}=t;function M(N){let j=Rl("Toastify__toast-container",`Toastify__toast-container--${N}`,{"Toastify__toast-container--rtl":w});return fa(g)?g({position:N,rtl:w,defaultClassName:j}):Rl(j,F_(g))}function D(){e&&(r(!0),Ae.play())}return G4(()=>{var N;if(e){let j=l.current.querySelectorAll('[data-in="true"]'),q=12,Y=(N=t.position)==null?void 0:N.includes("top"),it=0,lt=0;Array.from(j).reverse().forEach((bt,V)=>{let P=bt;P.classList.add("Toastify__toast--stacked"),V>0&&(P.dataset.collapsed=`${i}`),P.dataset.pos||(P.dataset.pos=Y?"top":"bot");let z=it*(i?.2:1)+(i?0:q*V);P.style.setProperty("--y",`${Y?z:z*-1}px`),P.style.setProperty("--g",`${q}`),P.style.setProperty("--s",`${1-(i?lt:0)}`),it+=P.offsetHeight,lt+=.025})}},[i,m,e]),K.useEffect(()=>{function N(j){var q;let Y=l.current;C(j)&&((q=Y.querySelector('[tabIndex="0"]'))==null||q.focus(),r(!1),Ae.pause()),j.key==="Escape"&&(document.activeElement===Y||Y!=null&&Y.contains(document.activeElement))&&(r(!0),Ae.play())}return document.addEventListener("keydown",N),()=>{document.removeEventListener("keydown",N)}},[C]),ge.createElement("section",{ref:l,className:"Toastify",id:S,onMouseEnter:()=>{e&&(r(!1),Ae.pause())},onMouseLeave:D,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},c((N,j)=>{let q=j.length?{...b}:{...b,pointerEvents:"none"};return ge.createElement("div",{tabIndex:-1,className:M(N),"data-stacked":e,style:q,key:`c-${N}`},j.map(({content:Y,props:it})=>ge.createElement(J4,{...it,stacked:e,collapseAll:D,isIn:d(it.toastId,it.containerId),key:`t-${it.key}`},Y)))}))}const sz=()=>{const[n,t]=K.useState(""),[e,i]=K.useState(""),[r,l]=K.useState(""),[c,d]=K.useState(!1),{ajouterBar:m}=w4(),g=Gh(),b=()=>{g("/")},w=async C=>{if(C.preventDefault(),!n||!e||!r)return alert("Por favor, completa todos los campos.");try{await m({nom:n,lat:parseFloat(e),lng:parseFloat(r)}),g("/mapa"),Ae.success("Formulario enviado correctamente ✅")}catch(M){console.error("Error al añadir bar:",M),alert("Hubo un error al guardar el bar.")}},S=()=>{window.confirm("¿Estás seguro de que quieres borrar el formulario?")&&(d(!0),setTimeout(()=>{t(""),i(""),l(""),d(!1),Ae.info("Formulario limpiado correctamente ✅")},300))};return ht.jsx("div",{className:"form-container",children:ht.jsxs("form",{onSubmit:w,children:[ht.jsx("input",{type:"text",placeholder:"Nombre del bar",value:n,onChange:C=>t(C.target.value),className:c?"resetting":""}),ht.jsx("input",{type:"number",placeholder:"Latitud",value:e,onChange:C=>i(C.target.value),className:c?"resetting":""}),ht.jsx("input",{type:"number",placeholder:"Longitud",value:r,onChange:C=>l(C.target.value),className:c?"resetting":""}),ht.jsx("button",{type:"submit",children:"Guardar"}),ht.jsx("button",{type:"button",onClick:S,children:"Resetear"}),ht.jsx("button",{type:"button",onClick:b,children:"Ir a inicio"})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function af(n){return n+.5|0}const _o=(n,t,e)=>Math.max(Math.min(n,e),t);function uh(n){return _o(af(n*2.55),0,255)}function Ao(n){return _o(af(n*255),0,255)}function Qr(n){return _o(af(n/2.55)/100,0,1)}function TE(n){return _o(af(n*100),0,100)}const ds={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},W_=[..."0123456789ABCDEF"],rz=n=>W_[n&15],az=n=>W_[(n&240)>>4]+W_[n&15],_d=n=>(n&240)>>4===(n&15),oz=n=>_d(n.r)&&_d(n.g)&&_d(n.b)&&_d(n.a);function lz(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&ds[n[1]]*17,g:255&ds[n[2]]*17,b:255&ds[n[3]]*17,a:t===5?ds[n[4]]*17:255}:(t===7||t===9)&&(e={r:ds[n[1]]<<4|ds[n[2]],g:ds[n[3]]<<4|ds[n[4]],b:ds[n[5]]<<4|ds[n[6]],a:t===9?ds[n[7]]<<4|ds[n[8]]:255})),e}const uz=(n,t)=>n<255?t(n):"";function cz(n){var t=oz(n)?rz:az;return n?"#"+t(n.r)+t(n.g)+t(n.b)+uz(n.a,t):void 0}const hz=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Jx(n,t,e){const i=t*Math.min(e,1-e),r=(l,c=(l+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[r(0),r(8),r(4)]}function fz(n,t,e){const i=(r,l=(r+n/60)%6)=>e-e*t*Math.max(Math.min(l,4-l,1),0);return[i(5),i(3),i(1)]}function dz(n,t,e){const i=Jx(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function mz(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function gv(n){const e=n.r/255,i=n.g/255,r=n.b/255,l=Math.max(e,i,r),c=Math.min(e,i,r),d=(l+c)/2;let m,g,b;return l!==c&&(b=l-c,g=d>.5?b/(2-l-c):b/(l+c),m=mz(e,i,r,b,l),m=m*60+.5),[m|0,g||0,d]}function _v(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Ao)}function yv(n,t,e){return _v(Jx,n,t,e)}function pz(n,t,e){return _v(dz,n,t,e)}function gz(n,t,e){return _v(fz,n,t,e)}function tR(n){return(n%360+360)%360}function _z(n){const t=hz.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?uh(+t[5]):Ao(+t[5]));const r=tR(+t[2]),l=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=pz(r,l,c):t[1]==="hsv"?i=gz(r,l,c):i=yv(r,l,c),{r:i[0],g:i[1],b:i[2],a:e}}function yz(n,t){var e=gv(n);e[0]=tR(e[0]+t),e=yv(e),n.r=e[0],n.g=e[1],n.b=e[2]}function vz(n){if(!n)return;const t=gv(n),e=t[0],i=TE(t[1]),r=TE(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Qr(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const wE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},EE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function bz(){const n={},t=Object.keys(EE),e=Object.keys(wE);let i,r,l,c,d;for(i=0;i<t.length;i++){for(c=d=t[i],r=0;r<e.length;r++)l=e[r],d=d.replace(l,wE[l]);l=parseInt(EE[c],16),n[d]=[l>>16&255,l>>8&255,l&255]}return n}let yd;function Tz(n){yd||(yd=bz(),yd.transparent=[0,0,0,0]);const t=yd[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const wz=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Ez(n){const t=wz.exec(n);let e=255,i,r,l;if(t){if(t[7]!==i){const c=+t[7];e=t[8]?uh(c):_o(c*255,0,255)}return i=+t[1],r=+t[3],l=+t[5],i=255&(t[2]?uh(i):_o(i,0,255)),r=255&(t[4]?uh(r):_o(r,0,255)),l=255&(t[6]?uh(l):_o(l,0,255)),{r:i,g:r,b:l,a:e}}}function Sz(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Qr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const s_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Mu=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Az(n,t,e){const i=Mu(Qr(n.r)),r=Mu(Qr(n.g)),l=Mu(Qr(n.b));return{r:Ao(s_(i+e*(Mu(Qr(t.r))-i))),g:Ao(s_(r+e*(Mu(Qr(t.g))-r))),b:Ao(s_(l+e*(Mu(Qr(t.b))-l))),a:n.a+e*(t.a-n.a)}}function vd(n,t,e){if(n){let i=gv(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=yv(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function eR(n,t){return n&&Object.assign(t||{},n)}function SE(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Ao(n[3]))):(t=eR(n,{r:0,g:0,b:0,a:1}),t.a=Ao(t.a)),t}function xz(n){return n.charAt(0)==="r"?Ez(n):_z(n)}class Bh{constructor(t){if(t instanceof Bh)return t;const e=typeof t;let i;e==="object"?i=SE(t):e==="string"&&(i=lz(t)||Tz(t)||xz(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=eR(this._rgb);return t&&(t.a=Qr(t.a)),t}set rgb(t){this._rgb=SE(t)}rgbString(){return this._valid?Sz(this._rgb):void 0}hexString(){return this._valid?cz(this._rgb):void 0}hslString(){return this._valid?vz(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let l;const c=e===l?.5:e,d=2*c-1,m=i.a-r.a,g=((d*m===-1?d:(d+m)/(1+d*m))+1)/2;l=1-g,i.r=255&g*i.r+l*r.r+.5,i.g=255&g*i.g+l*r.g+.5,i.b=255&g*i.b+l*r.b+.5,i.a=c*i.a+(1-c)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=Az(this._rgb,t._rgb,e)),this}clone(){return new Bh(this.rgb)}alpha(t){return this._rgb.a=Ao(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=af(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return vd(this._rgb,2,t),this}darken(t){return vd(this._rgb,2,-t),this}saturate(t){return vd(this._rgb,1,t),this}desaturate(t){return vd(this._rgb,1,-t),this}rotate(t){return yz(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function $r(){}const Rz=(()=>{let n=0;return()=>n++})();function Qn(n){return n==null}function zn(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function pe(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function da(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ur(n,t){return da(n)?n:t}function Se(n,t){return typeof n>"u"?t:n}const Cz=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,nR=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Ue(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Ee(n,t,e,i){let r,l,c;if(zn(n))for(l=n.length,r=0;r<l;r++)t.call(e,n[r],r);else if(pe(n))for(c=Object.keys(n),l=c.length,r=0;r<l;r++)t.call(e,n[c[r]],c[r])}function mm(n,t){let e,i,r,l;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],l=t[e],r.datasetIndex!==l.datasetIndex||r.index!==l.index)return!1;return!0}function pm(n){if(zn(n))return n.map(pm);if(pe(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=pm(n[e[r]]);return t}return n}function iR(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Iz(n,t,e,i){if(!iR(n))return;const r=t[n],l=e[n];pe(r)&&pe(l)?Uh(r,l,i):t[n]=pm(l)}function Uh(n,t,e){const i=zn(t)?t:[t],r=i.length;if(!pe(n))return n;e=e||{};const l=e.merger||Iz;let c;for(let d=0;d<r;++d){if(c=i[d],!pe(c))continue;const m=Object.keys(c);for(let g=0,b=m.length;g<b;++g)l(m[g],n,c,e)}return n}function wh(n,t){return Uh(n,t,{merger:Mz})}function Mz(n,t,e){if(!iR(n))return;const i=t[n],r=e[n];pe(i)&&pe(r)?wh(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=pm(r))}const AE={"":n=>n,x:n=>n.x,y:n=>n.y};function Oz(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function Pz(n){const t=Oz(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Hh(n,t){return(AE[t]||(AE[t]=Pz(t)))(n)}function vv(n){return n.charAt(0).toUpperCase()+n.slice(1)}const gm=n=>typeof n<"u",ko=n=>typeof n=="function",xE=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function Dz(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const je=Math.PI,dn=2*je,_m=Number.POSITIVE_INFINITY,kz=je/180,yn=je/2,yl=je/4,RE=je*2/3,CE=Math.sign;function Lz(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,l)=>r-l).pop(),t}function Nz(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function ym(n){return!Nz(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function xl(n){return n*(je/180)}function Vz(n){return n*(180/je)}function sR(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let l=Math.atan2(i,e);return l<-.5*je&&(l+=dn),{angle:l,distance:r}}function zz(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function dr(n){return(n%dn+dn)%dn}function vm(n,t,e,i){const r=dr(n),l=dr(t),c=dr(e),d=dr(l-r),m=dr(c-r),g=dr(r-l),b=dr(r-c);return r===l||r===c||i&&l===c||d>m&&g<b}function ps(n,t,e){return Math.max(t,Math.min(e,n))}function Bz(n){return ps(n,-32768,32767)}function ch(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function bv(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,r=0,l;for(;i-r>1;)l=r+i>>1,e(l)?r=l:i=l;return{lo:r,hi:i}}const Y_=(n,t,e,i)=>bv(n,e,i?r=>{const l=n[r][t];return l<e||l===e&&n[r+1][t]===e}:r=>n[r][t]<e),Uz=(n,t,e)=>bv(n,e,i=>n[i][t]>=e);function Hz(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const rR=["push","pop","shift","splice","unshift"];function jz(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),rR.forEach(e=>{const i="_onData"+vv(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...l){const c=r.apply(this,l);return n._chartjs.listeners.forEach(d=>{typeof d[i]=="function"&&d[i](...l)}),c}})})}function IE(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(rR.forEach(l=>{delete n[l]}),delete n._chartjs)}function Fz(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const aR=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function oR(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,aR.call(window,()=>{i=!1,n.apply(t,e)}))}}function qz(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const lR=n=>n==="start"?"left":n==="end"?"right":"center",Gi=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,Gz=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,bd=n=>n===0||n===1,ME=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*dn/e)),OE=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*dn/e)+1,Eh={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*yn)+1,easeOutSine:n=>Math.sin(n*yn),easeInOutSine:n=>-.5*(Math.cos(je*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>bd(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>bd(n)?n:ME(n,.075,.3),easeOutElastic:n=>bd(n)?n:OE(n,.075,.3),easeInOutElastic(n){return bd(n)?n:n<.5?.5*ME(n*2,.1125,.45):.5+.5*OE(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Eh.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Eh.easeInBounce(n*2)*.5:Eh.easeOutBounce(n*2-1)*.5+.5};function uR(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function PE(n){return uR(n)?n:new Bh(n)}function r_(n){return uR(n)?n:new Bh(n).saturate(.5).darken(.1).hexString()}const Zz=["x","y","borderWidth","radius","tension"],Wz=["color","borderColor","backgroundColor"];function Yz(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Wz},numbers:{type:"number",properties:Zz}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function $z(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const DE=new Map;function Kz(n,t){t=t||{};const e=n+JSON.stringify(t);let i=DE.get(e);return i||(i=new Intl.NumberFormat(n,t),DE.set(e,i)),i}function Xz(n,t,e){return Kz(t,e).format(n)}const Qz={values(n){return zn(n)?n:""+n}};var Jz={formatters:Qz};function t3(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Jz.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ll=Object.create(null),$_=Object.create(null);function Sh(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const l=e[i];n=n[l]||(n[l]=Object.create(null))}return n}function a_(n,t,e){return typeof t=="string"?Uh(Sh(n,t),e):Uh(Sh(n,""),t)}class e3{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>r_(r.backgroundColor),this.hoverBorderColor=(i,r)=>r_(r.borderColor),this.hoverColor=(i,r)=>r_(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return a_(this,t,e)}get(t){return Sh(this,t)}describe(t,e){return a_($_,t,e)}override(t,e){return a_(Ll,t,e)}route(t,e,i,r){const l=Sh(this,t),c=Sh(this,i),d="_"+e;Object.defineProperties(l,{[d]:{value:l[e],writable:!0},[e]:{enumerable:!0,get(){const m=this[d],g=c[r];return pe(m)?Object.assign({},g,m):Se(m,g)},set(m){this[d]=m}}})}apply(t){t.forEach(e=>e(this))}}var rn=new e3({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Yz,$z,t3]);function n3(n){return!n||Qn(n.size)||Qn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function kE(n,t,e,i,r){let l=t[r];return l||(l=t[r]=n.measureText(r).width,e.push(r)),l>i&&(i=l),i}function vl(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function LE(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function NE(n,t,e,i){cR(n,t,e,i,null)}function cR(n,t,e,i,r){let l,c,d,m,g,b,w,S;const C=t.pointStyle,M=t.rotation,D=t.radius;let N=(M||0)*kz;if(C&&typeof C=="object"&&(l=C.toString(),l==="[object HTMLImageElement]"||l==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(N),n.drawImage(C,-C.width/2,-C.height/2,C.width,C.height),n.restore();return}if(!(isNaN(D)||D<=0)){switch(n.beginPath(),C){default:r?n.ellipse(e,i,r/2,D,0,0,dn):n.arc(e,i,D,0,dn),n.closePath();break;case"triangle":b=r?r/2:D,n.moveTo(e+Math.sin(N)*b,i-Math.cos(N)*D),N+=RE,n.lineTo(e+Math.sin(N)*b,i-Math.cos(N)*D),N+=RE,n.lineTo(e+Math.sin(N)*b,i-Math.cos(N)*D),n.closePath();break;case"rectRounded":g=D*.516,m=D-g,c=Math.cos(N+yl)*m,w=Math.cos(N+yl)*(r?r/2-g:m),d=Math.sin(N+yl)*m,S=Math.sin(N+yl)*(r?r/2-g:m),n.arc(e-w,i-d,g,N-je,N-yn),n.arc(e+S,i-c,g,N-yn,N),n.arc(e+w,i+d,g,N,N+yn),n.arc(e-S,i+c,g,N+yn,N+je),n.closePath();break;case"rect":if(!M){m=Math.SQRT1_2*D,b=r?r/2:m,n.rect(e-b,i-m,2*b,2*m);break}N+=yl;case"rectRot":w=Math.cos(N)*(r?r/2:D),c=Math.cos(N)*D,d=Math.sin(N)*D,S=Math.sin(N)*(r?r/2:D),n.moveTo(e-w,i-d),n.lineTo(e+S,i-c),n.lineTo(e+w,i+d),n.lineTo(e-S,i+c),n.closePath();break;case"crossRot":N+=yl;case"cross":w=Math.cos(N)*(r?r/2:D),c=Math.cos(N)*D,d=Math.sin(N)*D,S=Math.sin(N)*(r?r/2:D),n.moveTo(e-w,i-d),n.lineTo(e+w,i+d),n.moveTo(e+S,i-c),n.lineTo(e-S,i+c);break;case"star":w=Math.cos(N)*(r?r/2:D),c=Math.cos(N)*D,d=Math.sin(N)*D,S=Math.sin(N)*(r?r/2:D),n.moveTo(e-w,i-d),n.lineTo(e+w,i+d),n.moveTo(e+S,i-c),n.lineTo(e-S,i+c),N+=yl,w=Math.cos(N)*(r?r/2:D),c=Math.cos(N)*D,d=Math.sin(N)*D,S=Math.sin(N)*(r?r/2:D),n.moveTo(e-w,i-d),n.lineTo(e+w,i+d),n.moveTo(e+S,i-c),n.lineTo(e-S,i+c);break;case"line":c=r?r/2:Math.cos(N)*D,d=Math.sin(N)*D,n.moveTo(e-c,i-d),n.lineTo(e+c,i+d);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(N)*(r?r/2:D),i+Math.sin(N)*D);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function hR(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Tv(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function wv(n){n.restore()}function i3(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Qn(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function s3(n,t,e,i,r){if(r.strikethrough||r.underline){const l=n.measureText(i),c=t-l.actualBoundingBoxLeft,d=t+l.actualBoundingBoxRight,m=e-l.actualBoundingBoxAscent,g=e+l.actualBoundingBoxDescent,b=r.strikethrough?(m+g)/2:g;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(c,b),n.lineTo(d,b),n.stroke()}}function r3(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function bm(n,t,e,i,r,l={}){const c=zn(t)?t:[t],d=l.strokeWidth>0&&l.strokeColor!=="";let m,g;for(n.save(),n.font=r.string,i3(n,l),m=0;m<c.length;++m)g=c[m],l.backdrop&&r3(n,l.backdrop),d&&(l.strokeColor&&(n.strokeStyle=l.strokeColor),Qn(l.strokeWidth)||(n.lineWidth=l.strokeWidth),n.strokeText(g,e,i,l.maxWidth)),n.fillText(g,e,i,l.maxWidth),s3(n,e,i,g,l),i+=Number(r.lineHeight);n.restore()}function K_(n,t){const{x:e,y:i,w:r,h:l,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,1.5*je,je,!0),n.lineTo(e,i+l-c.bottomLeft),n.arc(e+c.bottomLeft,i+l-c.bottomLeft,c.bottomLeft,je,yn,!0),n.lineTo(e+r-c.bottomRight,i+l),n.arc(e+r-c.bottomRight,i+l-c.bottomRight,c.bottomRight,yn,0,!0),n.lineTo(e+r,i+c.topRight),n.arc(e+r-c.topRight,i+c.topRight,c.topRight,0,-yn,!0),n.lineTo(e+c.topLeft,i)}const a3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,o3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function l3(n,t){const e=(""+n).match(a3);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const u3=n=>+n||0;function Ev(n,t){const e={},i=pe(t),r=i?Object.keys(t):t,l=pe(n)?i?c=>Se(n[c],n[t[c]]):c=>n[c]:()=>n;for(const c of r)e[c]=u3(l(c));return e}function c3(n){return Ev(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ah(n){return Ev(n,["topLeft","topRight","bottomLeft","bottomRight"])}function js(n){const t=c3(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function bi(n,t){n=n||{},t=t||rn.font;let e=Se(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Se(n.style,t.style);i&&!(""+i).match(o3)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Se(n.family,t.family),lineHeight:l3(Se(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Se(n.weight,t.weight),string:""};return r.string=n3(r),r}function Td(n,t,e,i){let r,l,c;for(r=0,l=n.length;r<l;++r)if(c=n[r],c!==void 0&&c!==void 0)return c}function h3(n,t,e){const{min:i,max:r}=n,l=nR(t,(r-i)/2),c=(d,m)=>e&&d===0?0:d+m;return{min:c(i,-Math.abs(l)),max:c(r,l)}}function ac(n,t){return Object.assign(Object.create(n),t)}function Sv(n,t=[""],e,i,r=()=>n[0]){const l=e||n;typeof i>"u"&&(i=pR("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:l,_fallback:i,_getTarget:r,override:d=>Sv([d,...n],t,l,i)};return new Proxy(c,{deleteProperty(d,m){return delete d[m],delete d._keys,delete n[0][m],!0},get(d,m){return dR(d,m,()=>v3(m,t,n,d))},getOwnPropertyDescriptor(d,m){return Reflect.getOwnPropertyDescriptor(d._scopes[0],m)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(d,m){return zE(d).includes(m)},ownKeys(d){return zE(d)},set(d,m,g){const b=d._storage||(d._storage=r());return d[m]=b[m]=g,delete d._keys,!0}})}function Ku(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:fR(n,i),setContext:l=>Ku(n,l,e,i),override:l=>Ku(n.override(l),t,e,i)};return new Proxy(r,{deleteProperty(l,c){return delete l[c],delete n[c],!0},get(l,c,d){return dR(l,c,()=>d3(l,c,d))},getOwnPropertyDescriptor(l,c){return l._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(l,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(l,c,d){return n[c]=d,delete l[c],!0}})}function fR(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:ko(e)?e:()=>e,isIndexable:ko(i)?i:()=>i}}const f3=(n,t)=>n?n+vv(t):t,Av=(n,t)=>pe(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function dR(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function d3(n,t,e){const{_proxy:i,_context:r,_subProxy:l,_descriptors:c}=n;let d=i[t];return ko(d)&&c.isScriptable(t)&&(d=m3(t,d,n,e)),zn(d)&&d.length&&(d=p3(t,d,n,c.isIndexable)),Av(t,d)&&(d=Ku(d,r,l&&l[t],c)),d}function m3(n,t,e,i){const{_proxy:r,_context:l,_subProxy:c,_stack:d}=e;if(d.has(n))throw new Error("Recursion detected: "+Array.from(d).join("->")+"->"+n);d.add(n);let m=t(l,c||i);return d.delete(n),Av(n,m)&&(m=xv(r._scopes,r,n,m)),m}function p3(n,t,e,i){const{_proxy:r,_context:l,_subProxy:c,_descriptors:d}=e;if(typeof l.index<"u"&&i(n))return t[l.index%t.length];if(pe(t[0])){const m=t,g=r._scopes.filter(b=>b!==m);t=[];for(const b of m){const w=xv(g,r,n,b);t.push(Ku(w,l,c&&c[n],d))}}return t}function mR(n,t,e){return ko(n)?n(t,e):n}const g3=(n,t)=>n===!0?t:typeof n=="string"?Hh(t,n):void 0;function _3(n,t,e,i,r){for(const l of t){const c=g3(e,l);if(c){n.add(c);const d=mR(c._fallback,e,r);if(typeof d<"u"&&d!==e&&d!==i)return d}else if(c===!1&&typeof i<"u"&&e!==i)return null}return!1}function xv(n,t,e,i){const r=t._rootScopes,l=mR(t._fallback,e,i),c=[...n,...r],d=new Set;d.add(i);let m=VE(d,c,e,l||e,i);return m===null||typeof l<"u"&&l!==e&&(m=VE(d,c,l,m,i),m===null)?!1:Sv(Array.from(d),[""],r,l,()=>y3(t,e,i))}function VE(n,t,e,i,r){for(;e;)e=_3(n,t,e,i,r);return e}function y3(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return zn(r)&&pe(e)?e:r||{}}function v3(n,t,e,i){let r;for(const l of t)if(r=pR(f3(l,n),e),typeof r<"u")return Av(n,r)?xv(e,i,n,r):r}function pR(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function zE(n){let t=n._keys;return t||(t=n._keys=b3(n._scopes)),t}function b3(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function Rv(){return typeof window<"u"&&typeof document<"u"}function Cv(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Tm(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const ep=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function T3(n,t){return ep(n).getPropertyValue(t)}const w3=["top","right","bottom","left"];function Cl(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const l=w3[r];i[l]=parseFloat(n[t+"-"+l+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const E3=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function S3(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:l}=i;let c=!1,d,m;if(E3(r,l,n.target))d=r,m=l;else{const g=t.getBoundingClientRect();d=i.clientX-g.left,m=i.clientY-g.top,c=!0}return{x:d,y:m,box:c}}function El(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=ep(e),l=r.boxSizing==="border-box",c=Cl(r,"padding"),d=Cl(r,"border","width"),{x:m,y:g,box:b}=S3(n,e),w=c.left+(b&&d.left),S=c.top+(b&&d.top);let{width:C,height:M}=t;return l&&(C-=c.width+d.width,M-=c.height+d.height),{x:Math.round((m-w)/C*e.width/i),y:Math.round((g-S)/M*e.height/i)}}function A3(n,t,e){let i,r;if(t===void 0||e===void 0){const l=n&&Cv(n);if(!l)t=n.clientWidth,e=n.clientHeight;else{const c=l.getBoundingClientRect(),d=ep(l),m=Cl(d,"border","width"),g=Cl(d,"padding");t=c.width-g.width-m.width,e=c.height-g.height-m.height,i=Tm(d.maxWidth,l,"clientWidth"),r=Tm(d.maxHeight,l,"clientHeight")}}return{width:t,height:e,maxWidth:i||_m,maxHeight:r||_m}}const wd=n=>Math.round(n*10)/10;function x3(n,t,e,i){const r=ep(n),l=Cl(r,"margin"),c=Tm(r.maxWidth,n,"clientWidth")||_m,d=Tm(r.maxHeight,n,"clientHeight")||_m,m=A3(n,t,e);let{width:g,height:b}=m;if(r.boxSizing==="content-box"){const S=Cl(r,"border","width"),C=Cl(r,"padding");g-=C.width+S.width,b-=C.height+S.height}return g=Math.max(0,g-l.width),b=Math.max(0,i?g/i:b-l.height),g=wd(Math.min(g,c,m.maxWidth)),b=wd(Math.min(b,d,m.maxHeight)),g&&!b&&(b=wd(g/2)),(t!==void 0||e!==void 0)&&i&&m.height&&b>m.height&&(b=m.height,g=wd(Math.floor(b*i))),{width:g,height:b}}function BE(n,t,e){const i=t||1,r=Math.floor(n.height*i),l=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==r||c.width!==l?(n.currentDevicePixelRatio=i,c.height=r,c.width=l,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const R3=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Rv()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function UE(n,t){const e=T3(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const C3=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},I3=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Hu(n,t,e){return n?C3(t,e):I3()}function gR(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function _R(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Ed(n,t,e){return n.options.clip?n[e]:t[e]}function M3(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Ed(e,t,"left"),right:Ed(e,t,"right"),top:Ed(i,t,"top"),bottom:Ed(i,t,"bottom")}:t}function O3(n,t){const e=t._clip;if(e.disabled)return!1;const i=M3(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class P3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const l=e.listeners[r],c=e.duration;l.forEach(d=>d({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=aR.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const l=i.items;let c=l.length-1,d=!1,m;for(;c>=0;--c)m=l[c],m._active?(m._total>i.duration&&(i.duration=m._total),m.tick(t),d=!0):(l[c]=l[l.length-1],l.pop());d&&(r.draw(),this._notify(r,i,t,"progress")),l.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=l.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Kr=new P3;const HE="transparent",D3={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=PE(n||HE),r=i.valid&&PE(t||HE);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class k3{constructor(t,e,i,r){const l=e[i];r=Td([t.to,r,l,t.from]);const c=Td([t.from,l,r]);this._active=!0,this._fn=t.fn||D3[t.type||typeof c],this._easing=Eh[t.easing]||Eh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],l=i-this._start,c=this._duration-l;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=l,this._loop=!!t.loop,this._to=Td([t.to,e,r,t.from]),this._from=Td([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,l=this._from,c=this._loop,d=this._to;let m;if(this._active=l!==d&&(c||e<i),!this._active){this._target[r]=d,this._notify(!0);return}if(e<0){this._target[r]=l;return}m=e/i%2,m=c&&m>1?2-m:m,m=this._easing(Math.min(1,Math.max(0,m))),this._target[r]=this._fn(l,d,m)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class yR{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!pe(t))return;const e=Object.keys(rn.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const l=t[r];if(!pe(l))return;const c={};for(const d of e)c[d]=l[d];(zn(l.properties)&&l.properties||[r]).forEach(d=>{(d===r||!i.has(d))&&i.set(d,c)})})}_animateOptions(t,e){const i=e.options,r=N3(t,i);if(!r)return[];const l=this._createAnimations(r,i);return i.$shared&&L3(t.options.$animations,i).then(()=>{t.options=i},()=>{}),l}_createAnimations(t,e){const i=this._properties,r=[],l=t.$animations||(t.$animations={}),c=Object.keys(e),d=Date.now();let m;for(m=c.length-1;m>=0;--m){const g=c[m];if(g.charAt(0)==="$")continue;if(g==="options"){r.push(...this._animateOptions(t,e));continue}const b=e[g];let w=l[g];const S=i.get(g);if(w)if(S&&w.active()){w.update(S,b,d);continue}else w.cancel();if(!S||!S.duration){t[g]=b;continue}l[g]=w=new k3(S,t,g,b),r.push(w)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return Kr.add(this._chart,i),!0}}function L3(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const l=n[i[r]];l&&l.active()&&e.push(l.wait())}return Promise.all(e)}function N3(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function jE(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,l=e.max===void 0?t:0;return{start:i?l:r,end:i?r:l}}function V3(n,t,e){if(e===!1)return!1;const i=jE(n,e),r=jE(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function z3(n){let t,e,i,r;return pe(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function vR(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,l;for(r=0,l=i.length;r<l;++r)e.push(i[r].index);return e}function FE(n,t,e,i={}){const r=n.keys,l=i.mode==="single";let c,d,m,g;if(t===null)return;let b=!1;for(c=0,d=r.length;c<d;++c){if(m=+r[c],m===e){if(b=!0,i.all)continue;break}g=n.values[m],da(g)&&(l||t===0||CE(t)===CE(g))&&(t+=g)}return!b&&!i.all?0:t}function B3(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",l=i.axis==="x"?"x":"y",c=Object.keys(n),d=new Array(c.length);let m,g,b;for(m=0,g=c.length;m<g;++m)b=c[m],d[m]={[r]:b,[l]:n[b]};return d}function o_(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function U3(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function H3(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function j3(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function qE(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const l=n[r.index];if(e&&l>0||!e&&l<0)return r.index}return null}function GE(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:l,vScale:c,index:d}=i,m=l.axis,g=c.axis,b=U3(l,c,i),w=t.length;let S;for(let C=0;C<w;++C){const M=t[C],{[m]:D,[g]:N}=M,j=M._stacks||(M._stacks={});S=j[g]=j3(r,b,D),S[d]=N,S._top=qE(S,c,!0,i.type),S._bottom=qE(S,c,!1,i.type);const q=S._visualValues||(S._visualValues={});q[d]=N}}function l_(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function F3(n,t){return ac(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function q3(n,t,e){return ac(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Jc(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const l=r._stacks;if(!l||l[i]===void 0||l[i][e]===void 0)return;delete l[i][e],l[i]._visualValues!==void 0&&l[i]._visualValues[e]!==void 0&&delete l[i]._visualValues[e]}}}const u_=n=>n==="reset"||n==="none",ZE=(n,t)=>t?n:Object.assign({},n),G3=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:vR(e,!0),values:null};class xh{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=o_(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Jc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(w,S,C,M)=>w==="x"?S:w==="r"?M:C,l=e.xAxisID=Se(i.xAxisID,l_(t,"x")),c=e.yAxisID=Se(i.yAxisID,l_(t,"y")),d=e.rAxisID=Se(i.rAxisID,l_(t,"r")),m=e.indexAxis,g=e.iAxisID=r(m,l,c,d),b=e.vAxisID=r(m,c,l,d);e.xScale=this.getScaleForId(l),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(d),e.iScale=this.getScaleForId(g),e.vScale=this.getScaleForId(b)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&IE(this._data,this),t._stacked&&Jc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(pe(e)){const r=this._cachedMeta;this._data=B3(e,r)}else if(i!==e){if(i){IE(i,this);const r=this._cachedMeta;Jc(r),r._parsed=[]}e&&Object.isExtensible(e)&&jz(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const l=e._stacked;e._stacked=o_(e.vScale,e),e.stack!==i.stack&&(r=!0,Jc(e),e.stack=i.stack),this._resyncElements(t),(r||l!==e._stacked)&&(GE(this,e._parsed),e._stacked=o_(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:l,_stacked:c}=i,d=l.axis;let m=t===0&&e===r.length?!0:i._sorted,g=t>0&&i._parsed[t-1],b,w,S;if(this._parsing===!1)i._parsed=r,i._sorted=!0,S=r;else{zn(r[t])?S=this.parseArrayData(i,r,t,e):pe(r[t])?S=this.parseObjectData(i,r,t,e):S=this.parsePrimitiveData(i,r,t,e);const C=()=>w[d]===null||g&&w[d]<g[d];for(b=0;b<e;++b)i._parsed[b+t]=w=S[b],m&&(C()&&(m=!1),g=w);i._sorted=m}c&&GE(this,S)}parsePrimitiveData(t,e,i,r){const{iScale:l,vScale:c}=t,d=l.axis,m=c.axis,g=l.getLabels(),b=l===c,w=new Array(r);let S,C,M;for(S=0,C=r;S<C;++S)M=S+i,w[S]={[d]:b||l.parse(g[M],M),[m]:c.parse(e[M],M)};return w}parseArrayData(t,e,i,r){const{xScale:l,yScale:c}=t,d=new Array(r);let m,g,b,w;for(m=0,g=r;m<g;++m)b=m+i,w=e[b],d[m]={x:l.parse(w[0],b),y:c.parse(w[1],b)};return d}parseObjectData(t,e,i,r){const{xScale:l,yScale:c}=t,{xAxisKey:d="x",yAxisKey:m="y"}=this._parsing,g=new Array(r);let b,w,S,C;for(b=0,w=r;b<w;++b)S=b+i,C=e[S],g[b]={x:l.parse(Hh(C,d),S),y:c.parse(Hh(C,m),S)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,l=this._cachedMeta,c=e[t.axis],d={keys:vR(r,!0),values:e._stacks[t.axis]._visualValues};return FE(d,c,l.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const l=i[e.axis];let c=l===null?NaN:l;const d=r&&i._stacks[e.axis];r&&d&&(r.values=d,c=FE(r,l,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,l=i._sorted&&t===i.iScale,c=r.length,d=this._getOtherScale(t),m=G3(e,i,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:b,max:w}=H3(d);let S,C;function M(){C=r[S];const D=C[d.axis];return!da(C[t.axis])||b>D||w<D}for(S=0;S<c&&!(!M()&&(this.updateRangeFromParsed(g,t,C,m),l));++S);if(l){for(S=c-1;S>=0;--S)if(!M()){this.updateRangeFromParsed(g,t,C,m);break}}return g}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,l,c;for(r=0,l=e.length;r<l;++r)c=e[r][t.axis],da(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,l=this.getParsed(t);return{label:i?""+i.getLabelForValue(l[i.axis]):"",value:r?""+r.getLabelForValue(l[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=z3(Se(this.options.clip,V3(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],l=e.chartArea,c=[],d=this._drawStart||0,m=this._drawCount||r.length-d,g=this.options.drawActiveElementsOnTop;let b;for(i.dataset&&i.dataset.draw(t,l,d,m),b=d;b<d+m;++b){const w=r[b];w.hidden||(w.active&&g?c.push(w):w.draw(t,l))}for(b=0;b<c.length;++b)c[b].draw(t,l)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let l;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];l=c.$context||(c.$context=q3(this.getContext(),t,c)),l.parsed=this.getParsed(t),l.raw=r.data[t],l.index=l.dataIndex=t}else l=this.$context||(this.$context=F3(this.chart.getContext(),this.index)),l.dataset=r,l.index=l.datasetIndex=this.index;return l.active=!!e,l.mode=i,l}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",l=this._cachedDataOpts,c=t+"-"+e,d=l[c],m=this.enableOptionSharing&&gm(i);if(d)return ZE(d,m);const g=this.chart.config,b=g.datasetElementScopeKeys(this._type,t),w=r?[`${t}Hover`,"hover",t,""]:[t,""],S=g.getOptionScopes(this.getDataset(),b),C=Object.keys(rn.elements[t]),M=()=>this.getContext(i,r,e),D=g.resolveNamedOptions(S,C,M,w);return D.$shared&&(D.$shared=m,l[c]=Object.freeze(ZE(D,m))),D}_resolveAnimations(t,e,i){const r=this.chart,l=this._cachedDataOpts,c=`animation-${e}`,d=l[c];if(d)return d;let m;if(r.options.animation!==!1){const b=this.chart.config,w=b.datasetAnimationScopeKeys(this._type,e),S=b.getOptionScopes(this.getDataset(),w);m=b.createResolver(S,this.getContext(t,i,e))}const g=new yR(r,m&&m.animations);return m&&m._cacheable&&(l[c]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||u_(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,l=this.getSharedOptions(i),c=this.includeOptions(e,l)||l!==r;return this.updateSharedOptions(l,e,i),{sharedOptions:l,includeOptions:c}}updateElement(t,e,i,r){u_(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!u_(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const l=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(l)||l})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[d,m,g]of this._syncList)this[d](m,g);this._syncList=[];const r=i.length,l=e.length,c=Math.min(l,r);c&&this.parse(0,c),l>r?this._insertElements(r,l-r,t):l<r&&this._removeElements(l,r-l)}_insertElements(t,e,i=!0){const r=this._cachedMeta,l=r.data,c=t+e;let d;const m=g=>{for(g.length+=e,d=g.length-1;d>=c;d--)g[d]=g[d-e]};for(m(l),d=t;d<c;++d)l[d]=new this.dataElementType;this._parsing&&m(r._parsed),this.parse(t,e),i&&this.updateElements(l,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&Jc(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Xt(xh,"defaults",{}),Xt(xh,"datasetElementType",null),Xt(xh,"dataElementType",null);function Z3(n,t,e){let i=1,r=1,l=0,c=0;if(t<dn){const d=n,m=d+t,g=Math.cos(d),b=Math.sin(d),w=Math.cos(m),S=Math.sin(m),C=(Y,it,lt)=>vm(Y,d,m,!0)?1:Math.max(it,it*e,lt,lt*e),M=(Y,it,lt)=>vm(Y,d,m,!0)?-1:Math.min(it,it*e,lt,lt*e),D=C(0,g,w),N=C(yn,b,S),j=M(je,g,w),q=M(je+yn,b,S);i=(D-j)/2,r=(N-q)/2,l=-(D+j)/2,c=-(N+q)/2}return{ratioX:i,ratioY:r,offsetX:l,offsetY:c}}class hh extends xh{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let l=m=>+i[m];if(pe(i[t])){const{key:m="value"}=this._parsing;l=g=>+Hh(i[g],m)}let c,d;for(c=t,d=t+e;c<d;++c)r._parsed[c]=l(c)}}_getRotation(){return xl(this.options.rotation-90)}_getCircumference(){return xl(this.options.circumference)}_getRotationExtents(){let t=dn,e=-dn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,l=r._getRotation(),c=r._getCircumference();t=Math.min(t,l),e=Math.max(e,l+c)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,r=this._cachedMeta,l=r.data,c=this.getMaxBorderWidth()+this.getMaxOffset(l)+this.options.spacing,d=Math.max((Math.min(i.width,i.height)-c)/2,0),m=Math.min(Cz(this.options.cutout,d),1),g=this._getRingWeight(this.index),{circumference:b,rotation:w}=this._getRotationExtents(),{ratioX:S,ratioY:C,offsetX:M,offsetY:D}=Z3(w,b,m),N=(i.width-c)/S,j=(i.height-c)/C,q=Math.max(Math.min(N,j)/2,0),Y=nR(this.options.radius,q),it=Math.max(Y*m,0),lt=(Y-it)/this._getVisibleDatasetWeightTotal();this.offsetX=M*Y,this.offsetY=D*Y,r.total=this.calculateTotal(),this.outerRadius=Y-lt*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-lt*g,0),this.updateElements(l,0,l.length,t)}_circumference(t,e){const i=this.options,r=this._cachedMeta,l=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*l/dn)}updateElements(t,e,i,r){const l=r==="reset",c=this.chart,d=c.chartArea,g=c.options.animation,b=(d.left+d.right)/2,w=(d.top+d.bottom)/2,S=l&&g.animateScale,C=S?0:this.innerRadius,M=S?0:this.outerRadius,{sharedOptions:D,includeOptions:N}=this._getSharedOptions(e,r);let j=this._getRotation(),q;for(q=0;q<e;++q)j+=this._circumference(q,l);for(q=e;q<e+i;++q){const Y=this._circumference(q,l),it=t[q],lt={x:b+this.offsetX,y:w+this.offsetY,startAngle:j,endAngle:j+Y,circumference:Y,outerRadius:M,innerRadius:C};N&&(lt.options=D||this.resolveDataElementOptions(q,it.active?"active":r)),j+=Y,this.updateElement(it,q,lt,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,r;for(r=0;r<e.length;r++){const l=t._parsed[r];l!==null&&!isNaN(l)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(i+=Math.abs(l))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?dn*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],l=Xz(e._parsed[t],i.options.locale);return{label:r[t]||"",value:l}}getMaxBorderWidth(t){let e=0;const i=this.chart;let r,l,c,d,m;if(!t){for(r=0,l=i.data.datasets.length;r<l;++r)if(i.isDatasetVisible(r)){c=i.getDatasetMeta(r),t=c.data,d=c.controller;break}}if(!t)return 0;for(r=0,l=t.length;r<l;++r)m=d.resolveDataElementOptions(r),m.borderAlign!=="inner"&&(e=Math.max(e,m.borderWidth||0,m.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){const l=this.resolveDataElementOptions(i);e=Math.max(e,l.offset||0,l.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(Se(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Xt(hh,"id","doughnut"),Xt(hh,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Xt(hh,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),Xt(hh,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((l,c)=>{const m=t.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,fontColor:r,lineWidth:m.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class X_ extends hh{}Xt(X_,"id","pie"),Xt(X_,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function bl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Iv{constructor(t){Xt(this,"options");this.options=t||{}}static override(t){Object.assign(Iv.prototype,t)}init(){}formats(){return bl()}parse(){return bl()}format(){return bl()}add(){return bl()}diff(){return bl()}startOf(){return bl()}endOf(){return bl()}}var W3={_date:Iv};function Y3(n,t,e,i){const{controller:r,data:l,_sorted:c}=n,d=r._cachedMeta.iScale,m=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(d&&t===d.axis&&t!=="r"&&c&&l.length){const g=d._reversePixels?Uz:Y_;if(i){if(r._sharedOptions){const b=l[0],w=typeof b.getRange=="function"&&b.getRange(t);if(w){const S=g(l,t,e-w),C=g(l,t,e+w);return{lo:S.lo,hi:C.hi}}}}else{const b=g(l,t,e);if(m){const{vScale:w}=r._cachedMeta,{_parsed:S}=n,C=S.slice(0,b.lo+1).reverse().findIndex(D=>!Qn(D[w.axis]));b.lo-=Math.max(0,C);const M=S.slice(b.hi).findIndex(D=>!Qn(D[w.axis]));b.hi+=Math.max(0,M)}return b}}return{lo:0,hi:l.length-1}}function np(n,t,e,i,r){const l=n.getSortedVisibleDatasetMetas(),c=e[t];for(let d=0,m=l.length;d<m;++d){const{index:g,data:b}=l[d],{lo:w,hi:S}=Y3(l[d],t,c,r);for(let C=w;C<=S;++C){const M=b[C];M.skip||i(M,g,C)}}}function $3(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const l=t?Math.abs(i.x-r.x):0,c=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(c,2))}}function c_(n,t,e,i,r){const l=[];return!r&&!n.isPointInArea(t)||np(n,e,t,function(d,m,g){!r&&!hR(d,n.chartArea,0)||d.inRange(t.x,t.y,i)&&l.push({element:d,datasetIndex:m,index:g})},!0),l}function K3(n,t,e,i){let r=[];function l(c,d,m){const{startAngle:g,endAngle:b}=c.getProps(["startAngle","endAngle"],i),{angle:w}=sR(c,{x:t.x,y:t.y});vm(w,g,b)&&r.push({element:c,datasetIndex:d,index:m})}return np(n,e,t,l),r}function X3(n,t,e,i,r,l){let c=[];const d=$3(e);let m=Number.POSITIVE_INFINITY;function g(b,w,S){const C=b.inRange(t.x,t.y,r);if(i&&!C)return;const M=b.getCenterPoint(r);if(!(!!l||n.isPointInArea(M))&&!C)return;const N=d(t,M);N<m?(c=[{element:b,datasetIndex:w,index:S}],m=N):N===m&&c.push({element:b,datasetIndex:w,index:S})}return np(n,e,t,g),c}function h_(n,t,e,i,r,l){return!l&&!n.isPointInArea(t)?[]:e==="r"&&!i?K3(n,t,e,r):X3(n,t,e,i,r,l)}function WE(n,t,e,i,r){const l=[],c=e==="x"?"inXRange":"inYRange";let d=!1;return np(n,e,t,(m,g,b)=>{m[c]&&m[c](t[e],r)&&(l.push({element:m,datasetIndex:g,index:b}),d=d||m.inRange(t.x,t.y,r))}),i&&!d?[]:l}var Q3={modes:{index(n,t,e,i){const r=El(t,n),l=e.axis||"x",c=e.includeInvisible||!1,d=e.intersect?c_(n,r,l,i,c):h_(n,r,l,!1,i,c),m=[];return d.length?(n.getSortedVisibleDatasetMetas().forEach(g=>{const b=d[0].index,w=g.data[b];w&&!w.skip&&m.push({element:w,datasetIndex:g.index,index:b})}),m):[]},dataset(n,t,e,i){const r=El(t,n),l=e.axis||"xy",c=e.includeInvisible||!1;let d=e.intersect?c_(n,r,l,i,c):h_(n,r,l,!1,i,c);if(d.length>0){const m=d[0].datasetIndex,g=n.getDatasetMeta(m).data;d=[];for(let b=0;b<g.length;++b)d.push({element:g[b],datasetIndex:m,index:b})}return d},point(n,t,e,i){const r=El(t,n),l=e.axis||"xy",c=e.includeInvisible||!1;return c_(n,r,l,i,c)},nearest(n,t,e,i){const r=El(t,n),l=e.axis||"xy",c=e.includeInvisible||!1;return h_(n,r,l,e.intersect,i,c)},x(n,t,e,i){const r=El(t,n);return WE(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=El(t,n);return WE(n,r,"y",e.intersect,i)}}};const bR=["left","top","right","bottom"];function th(n,t){return n.filter(e=>e.pos===t)}function YE(n,t){return n.filter(e=>bR.indexOf(e.pos)===-1&&e.box.axis===t)}function eh(n,t){return n.sort((e,i)=>{const r=t?i:e,l=t?e:i;return r.weight===l.weight?r.index-l.index:r.weight-l.weight})}function J3(n){const t=[];let e,i,r,l,c,d;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:l,options:{stack:c,stackWeight:d=1}}=r,t.push({index:e,box:r,pos:l,horizontal:r.isHorizontal(),weight:r.weight,stack:c&&l+c,stackWeight:d});return t}function t6(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:l}=e;if(!i||!bR.includes(r))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=l}return t}function e6(n,t){const e=t6(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let l,c,d;for(l=0,c=n.length;l<c;++l){d=n[l];const{fullSize:m}=d.box,g=e[d.stack],b=g&&d.stackWeight/g.weight;d.horizontal?(d.width=b?b*i:m&&t.availableWidth,d.height=r):(d.width=i,d.height=b?b*r:m&&t.availableHeight)}return e}function n6(n){const t=J3(n),e=eh(t.filter(g=>g.box.fullSize),!0),i=eh(th(t,"left"),!0),r=eh(th(t,"right")),l=eh(th(t,"top"),!0),c=eh(th(t,"bottom")),d=YE(t,"x"),m=YE(t,"y");return{fullSize:e,leftAndTop:i.concat(l),rightAndBottom:r.concat(m).concat(c).concat(d),chartArea:th(t,"chartArea"),vertical:i.concat(r).concat(m),horizontal:l.concat(c).concat(d)}}function $E(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function TR(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function i6(n,t,e,i){const{pos:r,box:l}=e,c=n.maxPadding;if(!pe(r)){e.size&&(n[r]-=e.size);const w=i[e.stack]||{size:0,count:1};w.size=Math.max(w.size,e.horizontal?l.height:l.width),e.size=w.size/w.count,n[r]+=e.size}l.getPadding&&TR(c,l.getPadding());const d=Math.max(0,t.outerWidth-$E(c,n,"left","right")),m=Math.max(0,t.outerHeight-$E(c,n,"top","bottom")),g=d!==n.w,b=m!==n.h;return n.w=d,n.h=m,e.horizontal?{same:g,other:b}:{same:b,other:g}}function s6(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function r6(n,t){const e=t.maxPadding;function i(r){const l={left:0,top:0,right:0,bottom:0};return r.forEach(c=>{l[c]=Math.max(t[c],e[c])}),l}return i(n?["left","right"]:["top","bottom"])}function fh(n,t,e,i){const r=[];let l,c,d,m,g,b;for(l=0,c=n.length,g=0;l<c;++l){d=n[l],m=d.box,m.update(d.width||t.w,d.height||t.h,r6(d.horizontal,t));const{same:w,other:S}=i6(t,e,d,i);g|=w&&r.length,b=b||S,m.fullSize||r.push(d)}return g&&fh(r,t,e,i)||b}function Sd(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function KE(n,t,e,i){const r=e.padding;let{x:l,y:c}=t;for(const d of n){const m=d.box,g=i[d.stack]||{placed:0,weight:1},b=d.stackWeight/g.weight||1;if(d.horizontal){const w=t.w*b,S=g.size||m.height;gm(g.start)&&(c=g.start),m.fullSize?Sd(m,r.left,c,e.outerWidth-r.right-r.left,S):Sd(m,t.left+g.placed,c,w,S),g.start=c,g.placed+=w,c=m.bottom}else{const w=t.h*b,S=g.size||m.width;gm(g.start)&&(l=g.start),m.fullSize?Sd(m,l,r.top,S,e.outerHeight-r.bottom-r.top):Sd(m,l,t.top+g.placed,S,w),g.start=l,g.placed+=w,l=m.right}}t.x=l,t.y=c}var yo={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=js(n.options.layout.padding),l=Math.max(t-r.width,0),c=Math.max(e-r.height,0),d=n6(n.boxes),m=d.vertical,g=d.horizontal;Ee(n.boxes,D=>{typeof D.beforeLayout=="function"&&D.beforeLayout()});const b=m.reduce((D,N)=>N.box.options&&N.box.options.display===!1?D:D+1,0)||1,w=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:l,availableHeight:c,vBoxMaxWidth:l/2/b,hBoxMaxHeight:c/2}),S=Object.assign({},r);TR(S,js(i));const C=Object.assign({maxPadding:S,w:l,h:c,x:r.left,y:r.top},r),M=e6(m.concat(g),w);fh(d.fullSize,C,w,M),fh(m,C,w,M),fh(g,C,w,M)&&fh(m,C,w,M),s6(C),KE(d.leftAndTop,C,w,M),C.x+=C.w,C.y+=C.h,KE(d.rightAndBottom,C,w,M),n.chartArea={left:C.left,top:C.top,right:C.left+C.w,bottom:C.top+C.h,height:C.h,width:C.w},Ee(d.chartArea,D=>{const N=D.box;Object.assign(N,n.chartArea),N.update(C.w,C.h,{left:0,top:0,right:0,bottom:0})})}};class wR{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class a6 extends wR{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Fd="$chartjs",o6={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},XE=n=>n===null||n==="";function l6(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Fd]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",XE(r)){const l=UE(n,"width");l!==void 0&&(n.width=l)}if(XE(i))if(n.style.height==="")n.height=n.width/(t||2);else{const l=UE(n,"height");l!==void 0&&(n.height=l)}return n}const ER=R3?{passive:!0}:!1;function u6(n,t,e){n&&n.addEventListener(t,e,ER)}function c6(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,ER)}function h6(n,t){const e=o6[n.type]||n.type,{x:i,y:r}=El(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function wm(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function f6(n,t,e){const i=n.canvas,r=new MutationObserver(l=>{let c=!1;for(const d of l)c=c||wm(d.addedNodes,i),c=c&&!wm(d.removedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function d6(n,t,e){const i=n.canvas,r=new MutationObserver(l=>{let c=!1;for(const d of l)c=c||wm(d.removedNodes,i),c=c&&!wm(d.addedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const jh=new Map;let QE=0;function SR(){const n=window.devicePixelRatio;n!==QE&&(QE=n,jh.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function m6(n,t){jh.size||window.addEventListener("resize",SR),jh.set(n,t)}function p6(n){jh.delete(n),jh.size||window.removeEventListener("resize",SR)}function g6(n,t,e){const i=n.canvas,r=i&&Cv(i);if(!r)return;const l=oR((d,m)=>{const g=r.clientWidth;e(d,m),g<r.clientWidth&&e()},window),c=new ResizeObserver(d=>{const m=d[0],g=m.contentRect.width,b=m.contentRect.height;g===0&&b===0||l(g,b)});return c.observe(r),m6(n,l),c}function f_(n,t,e){e&&e.disconnect(),t==="resize"&&p6(n)}function _6(n,t,e){const i=n.canvas,r=oR(l=>{n.ctx!==null&&e(h6(l,n))},n);return u6(i,t,r),r}class y6 extends wR{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(l6(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Fd])return!1;const i=e[Fd].initial;["height","width"].forEach(l=>{const c=i[l];Qn(c)?e.removeAttribute(l):e.setAttribute(l,c)});const r=i.style||{};return Object.keys(r).forEach(l=>{e.style[l]=r[l]}),e.width=e.width,delete e[Fd],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),c={attach:f6,detach:d6,resize:g6}[e]||_6;r[e]=c(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:f_,detach:f_,resize:f_}[e]||c6)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return x3(t,e,i,r)}isAttached(t){const e=t&&Cv(t);return!!(e&&e.isConnected)}}function v6(n){return!Rv()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?a6:y6}var Md;let of=(Md=class{constructor(){Xt(this,"x");Xt(this,"y");Xt(this,"active",!1);Xt(this,"options");Xt(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ym(this.x)&&ym(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(l=>{r[l]=i[l]&&i[l].active()?i[l]._to:this[l]}),r}},Xt(Md,"defaults",{}),Xt(Md,"defaultRoutes"),Md);function b6(n,t){const e=n.options.ticks,i=T6(n),r=Math.min(e.maxTicksLimit||i,i),l=e.major.enabled?E6(t):[],c=l.length,d=l[0],m=l[c-1],g=[];if(c>r)return S6(t,g,l,c/r),g;const b=w6(l,t,r);if(c>0){let w,S;const C=c>1?Math.round((m-d)/(c-1)):null;for(Ad(t,g,b,Qn(C)?0:d-C,d),w=0,S=c-1;w<S;w++)Ad(t,g,b,l[w],l[w+1]);return Ad(t,g,b,m,Qn(C)?t.length:m+C),g}return Ad(t,g,b),g}function T6(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function w6(n,t,e){const i=A6(n),r=t.length/e;if(!i)return Math.max(r,1);const l=Lz(i);for(let c=0,d=l.length-1;c<d;c++){const m=l[c];if(m>r)return m}return Math.max(r,1)}function E6(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function S6(n,t,e,i){let r=0,l=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===l&&(t.push(n[c]),r++,l=e[r*i])}function Ad(n,t,e,i,r){const l=Se(i,0),c=Math.min(Se(r,n.length),n.length);let d=0,m,g,b;for(e=Math.ceil(e),r&&(m=r-i,e=m/Math.floor(m/e)),b=l;b<0;)d++,b=Math.round(l+d*e);for(g=Math.max(l,0);g<c;g++)g===b&&(t.push(n[g]),d++,b=Math.round(l+d*e))}function A6(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const x6=n=>n==="left"?"right":n==="right"?"left":n,JE=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,tS=(n,t)=>Math.min(t||n,n);function eS(n,t){const e=[],i=n.length/t,r=n.length;let l=0;for(;l<r;l+=i)e.push(n[Math.floor(l)]);return e}function R6(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),l=n._startPixel,c=n._endPixel,d=1e-6;let m=n.getPixelForTick(r),g;if(!(e&&(i===1?g=Math.max(m-l,c-m):t===0?g=(n.getPixelForTick(1)-m)/2:g=(m-n.getPixelForTick(r-1))/2,m+=r<t?g:-g,m<l-d||m>c+d)))return m}function C6(n,t){Ee(n,e=>{const i=e.gc,r=i.length/2;let l;if(r>t){for(l=0;l<r;++l)delete e.data[i[l]];i.splice(0,r)}})}function nh(n){return n.drawTicks?n.tickLength:0}function nS(n,t){if(!n.display)return 0;const e=bi(n.font,t),i=js(n.padding);return(zn(n.text)?n.text.length:1)*e.lineHeight+i.height}function I6(n,t){return ac(n,{scale:t,type:"scale"})}function M6(n,t,e){return ac(n,{tick:e,index:t,type:"tick"})}function O6(n,t,e){let i=lR(n);return(e&&t!=="right"||!e&&t==="right")&&(i=x6(i)),i}function P6(n,t,e,i){const{top:r,left:l,bottom:c,right:d,chart:m}=n,{chartArea:g,scales:b}=m;let w=0,S,C,M;const D=c-r,N=d-l;if(n.isHorizontal()){if(C=Gi(i,l,d),pe(e)){const j=Object.keys(e)[0],q=e[j];M=b[j].getPixelForValue(q)+D-t}else e==="center"?M=(g.bottom+g.top)/2+D-t:M=JE(n,e,t);S=d-l}else{if(pe(e)){const j=Object.keys(e)[0],q=e[j];C=b[j].getPixelForValue(q)-N+t}else e==="center"?C=(g.left+g.right)/2-N+t:C=JE(n,e,t);M=Gi(i,c,r),w=e==="left"?-yn:yn}return{titleX:C,titleY:M,maxWidth:S,rotation:w}}class ip extends of{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=ur(t,Number.POSITIVE_INFINITY),e=ur(e,Number.NEGATIVE_INFINITY),i=ur(i,Number.POSITIVE_INFINITY),r=ur(r,Number.NEGATIVE_INFINITY),{min:ur(t,i),max:ur(e,r),minDefined:da(t),maxDefined:da(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:l}=this.getUserBounds(),c;if(r&&l)return{min:e,max:i};const d=this.getMatchingVisibleMetas();for(let m=0,g=d.length;m<g;++m)c=d[m].controller.getMinMax(this,t),r||(e=Math.min(e,c.min)),l||(i=Math.max(i,c.max));return e=l&&e>i?i:e,i=r&&e>i?e:i,{min:ur(e,ur(i,e)),max:ur(i,ur(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ue(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:l,ticks:c}=this.options,d=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=h3(this,l,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const m=d<this.ticks.length;this._convertTicksToLabels(m?eS(this.ticks,d):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=b6(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),m&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ue(this.options.afterUpdate,[this])}beforeSetDimensions(){Ue(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ue(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ue(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ue(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,l;for(i=0,r=t.length;i<r;i++)l=t[i],l.label=Ue(e.callback,[l.value,i,t],this)}afterTickToLabelConversion(){Ue(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ue(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=tS(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,l=e.maxRotation;let c=r,d,m,g;if(!this._isVisible()||!e.display||r>=l||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const b=this._getLabelSizes(),w=b.widest.width,S=b.highest.height,C=ps(this.chart.width-w,0,this.maxWidth);d=t.offset?this.maxWidth/i:C/(i-1),w+6>d&&(d=C/(i-(t.offset?.5:1)),m=this.maxHeight-nh(t.grid)-e.padding-nS(t.title,this.chart.options.font),g=Math.sqrt(w*w+S*S),c=Vz(Math.min(Math.asin(ps((b.highest.height+6)/d,-1,1)),Math.asin(ps(m/g,-1,1))-Math.asin(ps(S/g,-1,1)))),c=Math.max(r,Math.min(l,c))),this.labelRotation=c}afterCalculateLabelRotation(){Ue(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ue(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:l}}=this,c=this._isVisible(),d=this.isHorizontal();if(c){const m=nS(r,e.options.font);if(d?(t.width=this.maxWidth,t.height=nh(l)+m):(t.height=this.maxHeight,t.width=nh(l)+m),i.display&&this.ticks.length){const{first:g,last:b,widest:w,highest:S}=this._getLabelSizes(),C=i.padding*2,M=xl(this.labelRotation),D=Math.cos(M),N=Math.sin(M);if(d){const j=i.mirror?0:N*w.width+D*S.height;t.height=Math.min(this.maxHeight,t.height+j+C)}else{const j=i.mirror?0:D*w.width+N*S.height;t.width=Math.min(this.maxWidth,t.width+j+C)}this._calculatePadding(g,b,N,D)}}this._handleMargins(),d?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:l,padding:c},position:d}=this.options,m=this.labelRotation!==0,g=d!=="top"&&this.axis==="x";if(this.isHorizontal()){const b=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1);let S=0,C=0;m?g?(S=r*t.width,C=i*e.height):(S=i*t.height,C=r*e.width):l==="start"?C=e.width:l==="end"?S=t.width:l!=="inner"&&(S=t.width/2,C=e.width/2),this.paddingLeft=Math.max((S-b+c)*this.width/(this.width-b),0),this.paddingRight=Math.max((C-w+c)*this.width/(this.width-w),0)}else{let b=e.height/2,w=t.height/2;l==="start"?(b=0,w=t.height):l==="end"&&(b=e.height,w=0),this.paddingTop=b+c,this.paddingBottom=w+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ue(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Qn(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=eS(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:l}=this,c=[],d=[],m=Math.floor(e/tS(e,i));let g=0,b=0,w,S,C,M,D,N,j,q,Y,it,lt;for(w=0;w<e;w+=m){if(M=t[w].label,D=this._resolveTickFontOptions(w),r.font=N=D.string,j=l[N]=l[N]||{data:{},gc:[]},q=D.lineHeight,Y=it=0,!Qn(M)&&!zn(M))Y=kE(r,j.data,j.gc,Y,M),it=q;else if(zn(M))for(S=0,C=M.length;S<C;++S)lt=M[S],!Qn(lt)&&!zn(lt)&&(Y=kE(r,j.data,j.gc,Y,lt),it+=q);c.push(Y),d.push(it),g=Math.max(Y,g),b=Math.max(it,b)}C6(l,e);const bt=c.indexOf(g),V=d.indexOf(b),P=z=>({width:c[z]||0,height:d[z]||0});return{first:P(0),last:P(e-1),widest:P(bt),highest:P(V),widths:c,heights:d}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Bz(this._alignToPixels?vl(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=M6(this.getContext(),t,i))}return this.$context||(this.$context=I6(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=xl(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),l=this._getLabelSizes(),c=t.autoSkipPadding||0,d=l?l.widest.width+c:0,m=l?l.highest.height+c:0;return this.isHorizontal()?m*i>d*r?d/i:m/r:m*r<d*i?m/i:d/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:l,position:c,border:d}=r,m=l.offset,g=this.isHorizontal(),w=this.ticks.length+(m?1:0),S=nh(l),C=[],M=d.setContext(this.getContext()),D=M.display?M.width:0,N=D/2,j=function(tt){return vl(i,tt,D)};let q,Y,it,lt,bt,V,P,z,U,H,G,F;if(c==="top")q=j(this.bottom),V=this.bottom-S,z=q-N,H=j(t.top)+N,F=t.bottom;else if(c==="bottom")q=j(this.top),H=t.top,F=j(t.bottom)-N,V=q+N,z=this.top+S;else if(c==="left")q=j(this.right),bt=this.right-S,P=q-N,U=j(t.left)+N,G=t.right;else if(c==="right")q=j(this.left),U=t.left,G=j(t.right)-N,bt=q+N,P=this.left+S;else if(e==="x"){if(c==="center")q=j((t.top+t.bottom)/2+.5);else if(pe(c)){const tt=Object.keys(c)[0],yt=c[tt];q=j(this.chart.scales[tt].getPixelForValue(yt))}H=t.top,F=t.bottom,V=q+N,z=V+S}else if(e==="y"){if(c==="center")q=j((t.left+t.right)/2);else if(pe(c)){const tt=Object.keys(c)[0],yt=c[tt];q=j(this.chart.scales[tt].getPixelForValue(yt))}bt=q-N,P=bt-S,U=t.left,G=t.right}const Yt=Se(r.ticks.maxTicksLimit,w),kt=Math.max(1,Math.ceil(w/Yt));for(Y=0;Y<w;Y+=kt){const tt=this.getContext(Y),yt=l.setContext(tt),dt=d.setContext(tt),Vt=yt.lineWidth,B=yt.color,ut=dt.dash||[],Tt=dt.dashOffset,_t=yt.tickWidth,St=yt.tickColor,xt=yt.tickBorderDash||[],wt=yt.tickBorderDashOffset;it=R6(this,Y,m),it!==void 0&&(lt=vl(i,it,Vt),g?bt=P=U=G=lt:V=z=H=F=lt,C.push({tx1:bt,ty1:V,tx2:P,ty2:z,x1:U,y1:H,x2:G,y2:F,width:Vt,color:B,borderDash:ut,borderDashOffset:Tt,tickWidth:_t,tickColor:St,tickBorderDash:xt,tickBorderDashOffset:wt}))}return this._ticksLength=w,this._borderValue=q,C}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:l}=i,c=this.isHorizontal(),d=this.ticks,{align:m,crossAlign:g,padding:b,mirror:w}=l,S=nh(i.grid),C=S+b,M=w?-b:C,D=-xl(this.labelRotation),N=[];let j,q,Y,it,lt,bt,V,P,z,U,H,G,F="middle";if(r==="top")bt=this.bottom-M,V=this._getXAxisLabelAlignment();else if(r==="bottom")bt=this.top+M,V=this._getXAxisLabelAlignment();else if(r==="left"){const kt=this._getYAxisLabelAlignment(S);V=kt.textAlign,lt=kt.x}else if(r==="right"){const kt=this._getYAxisLabelAlignment(S);V=kt.textAlign,lt=kt.x}else if(e==="x"){if(r==="center")bt=(t.top+t.bottom)/2+C;else if(pe(r)){const kt=Object.keys(r)[0],tt=r[kt];bt=this.chart.scales[kt].getPixelForValue(tt)+C}V=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")lt=(t.left+t.right)/2-C;else if(pe(r)){const kt=Object.keys(r)[0],tt=r[kt];lt=this.chart.scales[kt].getPixelForValue(tt)}V=this._getYAxisLabelAlignment(S).textAlign}e==="y"&&(m==="start"?F="top":m==="end"&&(F="bottom"));const Yt=this._getLabelSizes();for(j=0,q=d.length;j<q;++j){Y=d[j],it=Y.label;const kt=l.setContext(this.getContext(j));P=this.getPixelForTick(j)+l.labelOffset,z=this._resolveTickFontOptions(j),U=z.lineHeight,H=zn(it)?it.length:1;const tt=H/2,yt=kt.color,dt=kt.textStrokeColor,Vt=kt.textStrokeWidth;let B=V;c?(lt=P,V==="inner"&&(j===q-1?B=this.options.reverse?"left":"right":j===0?B=this.options.reverse?"right":"left":B="center"),r==="top"?g==="near"||D!==0?G=-H*U+U/2:g==="center"?G=-Yt.highest.height/2-tt*U+U:G=-Yt.highest.height+U/2:g==="near"||D!==0?G=U/2:g==="center"?G=Yt.highest.height/2-tt*U:G=Yt.highest.height-H*U,w&&(G*=-1),D!==0&&!kt.showLabelBackdrop&&(lt+=U/2*Math.sin(D))):(bt=P,G=(1-H)*U/2);let ut;if(kt.showLabelBackdrop){const Tt=js(kt.backdropPadding),_t=Yt.heights[j],St=Yt.widths[j];let xt=G-Tt.top,wt=0-Tt.left;switch(F){case"middle":xt-=_t/2;break;case"bottom":xt-=_t;break}switch(V){case"center":wt-=St/2;break;case"right":wt-=St;break;case"inner":j===q-1?wt-=St:j>0&&(wt-=St/2);break}ut={left:wt,top:xt,width:St+Tt.width,height:_t+Tt.height,color:kt.backdropColor}}N.push({label:it,font:z,textOffset:G,options:{rotation:D,color:yt,strokeColor:dt,strokeWidth:Vt,textAlign:B,textBaseline:F,translation:[lt,bt],backdrop:ut}})}return N}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-xl(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:l}}=this.options,c=this._getLabelSizes(),d=t+l,m=c.widest.width;let g,b;return e==="left"?r?(b=this.right+l,i==="near"?g="left":i==="center"?(g="center",b+=m/2):(g="right",b+=m)):(b=this.right-d,i==="near"?g="right":i==="center"?(g="center",b-=m/2):(g="left",b=this.left)):e==="right"?r?(b=this.left+l,i==="near"?g="right":i==="center"?(g="center",b-=m/2):(g="left",b-=m)):(b=this.left+d,i==="near"?g="left":i==="center"?(g="center",b+=m/2):(g="right",b=this.right)):g="right",{textAlign:g,x:b}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:l,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,l,c),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(l=>l.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let l,c;const d=(m,g,b)=>{!b.width||!b.color||(i.save(),i.lineWidth=b.width,i.strokeStyle=b.color,i.setLineDash(b.borderDash||[]),i.lineDashOffset=b.borderDashOffset,i.beginPath(),i.moveTo(m.x,m.y),i.lineTo(g.x,g.y),i.stroke(),i.restore())};if(e.display)for(l=0,c=r.length;l<c;++l){const m=r[l];e.drawOnChartArea&&d({x:m.x1,y:m.y1},{x:m.x2,y:m.y2},m),e.drawTicks&&d({x:m.tx1,y:m.ty1},{x:m.tx2,y:m.ty2},{color:m.tickColor,width:m.tickWidth,borderDash:m.tickBorderDash,borderDashOffset:m.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,l=i.setContext(this.getContext()),c=i.display?l.width:0;if(!c)return;const d=r.setContext(this.getContext(0)).lineWidth,m=this._borderValue;let g,b,w,S;this.isHorizontal()?(g=vl(t,this.left,c)-c/2,b=vl(t,this.right,d)+d/2,w=S=m):(w=vl(t,this.top,c)-c/2,S=vl(t,this.bottom,d)+d/2,g=b=m),e.save(),e.lineWidth=l.width,e.strokeStyle=l.color,e.beginPath(),e.moveTo(g,w),e.lineTo(b,S),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Tv(i,r);const l=this.getLabelItems(t);for(const c of l){const d=c.options,m=c.font,g=c.label,b=c.textOffset;bm(i,g,0,b,m,d)}r&&wv(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const l=bi(i.font),c=js(i.padding),d=i.align;let m=l.lineHeight/2;e==="bottom"||e==="center"||pe(e)?(m+=c.bottom,zn(i.text)&&(m+=l.lineHeight*(i.text.length-1))):m+=c.top;const{titleX:g,titleY:b,maxWidth:w,rotation:S}=P6(this,m,e,d);bm(t,i.text,0,0,l,{color:i.color,maxWidth:w,rotation:S,textAlign:O6(d,e,r),textBaseline:"middle",translation:[g,b]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Se(t.grid&&t.grid.z,-1),r=Se(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ip.prototype.draw?[{z:e,draw:l=>{this.draw(l)}}]:[{z:i,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let l,c;for(l=0,c=e.length;l<c;++l){const d=e[l];d[i]===this.id&&(!t||d.type===t)&&r.push(d)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return bi(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class xd{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;L6(e)&&(i=this.register(e));const r=this.items,l=t.id,c=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+t);return l in r||(r[l]=t,D6(t,c,i),this.override&&rn.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in rn[r]&&(delete rn[r][i],this.override&&delete Ll[i])}}function D6(n,t,e){const i=Uh(Object.create(null),[e?rn.get(e):{},rn.get(t),n.defaults]);rn.set(t,i),n.defaultRoutes&&k6(t,n.defaultRoutes),n.descriptors&&rn.describe(t,n.descriptors)}function k6(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),l=[n].concat(i).join("."),c=t[e].split("."),d=c.pop(),m=c.join(".");rn.route(l,r,m,d)})}function L6(n){return"id"in n&&"defaults"in n}class N6{constructor(){this.controllers=new xd(xh,"datasets",!0),this.elements=new xd(of,"elements"),this.plugins=new xd(Object,"plugins"),this.scales=new xd(ip,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const l=i||this._getRegistryForType(r);i||l.isForType(r)||l===this.plugins&&r.id?this._exec(t,l,r):Ee(r,c=>{const d=i||this._getRegistryForType(c);this._exec(t,d,c)})})}_exec(t,e,i){const r=vv(t);Ue(i["before"+r],[],i),e[t](i),Ue(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var hr=new N6;class V6{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const l=r?this._descriptors(t).filter(r):this._descriptors(t),c=this._notify(l,t,e,i);return e==="afterDestroy"&&(this._notify(l,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,e,i,r){r=r||{};for(const l of t){const c=l.plugin,d=c[i],m=[e,r,l.options];if(Ue(d,m,c)===!1&&r.cancelable)return!1}return!0}invalidate(){Qn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Se(i.options&&i.options.plugins,{}),l=z6(i);return r===!1&&!e?[]:U6(t,l,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(l,c)=>l.filter(d=>!c.some(m=>d.plugin.id===m.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function z6(n){const t={},e=[],i=Object.keys(hr.plugins.items);for(let l=0;l<i.length;l++)e.push(hr.getPlugin(i[l]));const r=n.plugins||[];for(let l=0;l<r.length;l++){const c=r[l];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function B6(n,t){return!t&&n===!1?null:n===!0?{}:n}function U6(n,{plugins:t,localIds:e},i,r){const l=[],c=n.getContext();for(const d of t){const m=d.id,g=B6(i[m],r);g!==null&&l.push({plugin:d,options:H6(n.config,{plugin:d,local:e[m]},g,c)})}return l}function H6(n,{plugin:t,local:e},i,r){const l=n.pluginScopeKeys(t),c=n.getOptionScopes(i,l);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Q_(n,t){const e=rn.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function j6(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function F6(n,t){return n===t?"_index_":"_value_"}function iS(n){if(n==="x"||n==="y"||n==="r")return n}function q6(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function J_(n,...t){if(iS(n))return n;for(const e of t){const i=e.axis||q6(e.position)||n.length>1&&iS(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function sS(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function G6(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return sS(n,"x",e[0])||sS(n,"y",e[0])}return{}}function Z6(n,t){const e=Ll[n.type]||{scales:{}},i=t.scales||{},r=Q_(n.type,t),l=Object.create(null);return Object.keys(i).forEach(c=>{const d=i[c];if(!pe(d))return console.error(`Invalid scale configuration for scale: ${c}`);if(d._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const m=J_(c,d,G6(c,n),rn.scales[d.type]),g=F6(m,r),b=e.scales||{};l[c]=wh(Object.create(null),[{axis:m},d,b[m],b[g]])}),n.data.datasets.forEach(c=>{const d=c.type||n.type,m=c.indexAxis||Q_(d,t),b=(Ll[d]||{}).scales||{};Object.keys(b).forEach(w=>{const S=j6(w,m),C=c[S+"AxisID"]||S;l[C]=l[C]||Object.create(null),wh(l[C],[{axis:S},i[C],b[w]])})}),Object.keys(l).forEach(c=>{const d=l[c];wh(d,[rn.scales[d.type],rn.scale])}),l}function AR(n){const t=n.options||(n.options={});t.plugins=Se(t.plugins,{}),t.scales=Z6(n,t)}function xR(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function W6(n){return n=n||{},n.data=xR(n.data),AR(n),n}const rS=new Map,RR=new Set;function Rd(n,t){let e=rS.get(n);return e||(e=t(),rS.set(n,e),RR.add(e)),e}const ih=(n,t,e)=>{const i=Hh(t,e);i!==void 0&&n.add(i)};class Y6{constructor(t){this._config=W6(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=xR(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),AR(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Rd(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Rd(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Rd(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Rd(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:l}=this,c=this._cachedScopes(t,i),d=c.get(e);if(d)return d;const m=new Set;e.forEach(b=>{t&&(m.add(t),b.forEach(w=>ih(m,t,w))),b.forEach(w=>ih(m,r,w)),b.forEach(w=>ih(m,Ll[l]||{},w)),b.forEach(w=>ih(m,rn,w)),b.forEach(w=>ih(m,$_,w))});const g=Array.from(m);return g.length===0&&g.push(Object.create(null)),RR.has(e)&&c.set(e,g),g}chartOptionScopes(){const{options:t,type:e}=this;return[t,Ll[e]||{},rn.datasets[e]||{},{type:e},rn,$_]}resolveNamedOptions(t,e,i,r=[""]){const l={$shared:!0},{resolver:c,subPrefixes:d}=aS(this._resolverCache,t,r);let m=c;if(K6(c,e)){l.$shared=!1,i=ko(i)?i():i;const g=this.createResolver(t,i,d);m=Ku(c,i,g)}for(const g of e)l[g]=m[g];return l}createResolver(t,e,i=[""],r){const{resolver:l}=aS(this._resolverCache,t,i);return pe(e)?Ku(l,e,void 0,r):l}}function aS(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let l=i.get(r);return l||(l={resolver:Sv(t,e),subPrefixes:e.filter(d=>!d.toLowerCase().includes("hover"))},i.set(r,l)),l}const $6=n=>pe(n)&&Object.getOwnPropertyNames(n).some(t=>ko(n[t]));function K6(n,t){const{isScriptable:e,isIndexable:i}=fR(n);for(const r of t){const l=e(r),c=i(r),d=(c||l)&&n[r];if(l&&(ko(d)||$6(d))||c&&zn(d))return!0}return!1}var X6="4.5.0";const Q6=["top","bottom","left","right","chartArea"];function oS(n,t){return n==="top"||n==="bottom"||Q6.indexOf(n)===-1&&t==="x"}function lS(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function uS(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Ue(e&&e.onComplete,[n],t)}function J6(n){const t=n.chart,e=t.options.animation;Ue(e&&e.onProgress,[n],t)}function CR(n){return Rv()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const qd={},cS=n=>{const t=CR(n);return Object.values(qd).filter(e=>e.canvas===t).pop()};function tB(n,t,e){const i=Object.keys(n);for(const r of i){const l=+r;if(l>=t){const c=n[r];delete n[r],(e>0||l>t)&&(n[l+e]=c)}}}function eB(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}var uo;let sp=(uo=class{static register(...t){hr.add(...t),hS()}static unregister(...t){hr.remove(...t),hS()}constructor(t,e){const i=this.config=new Y6(e),r=CR(t),l=cS(r);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||v6(r)),this.platform.updateConfig(i);const d=this.platform.acquireContext(r,c.aspectRatio),m=d&&d.canvas,g=m&&m.height,b=m&&m.width;if(this.id=Rz(),this.ctx=d,this.canvas=m,this.width=b,this.height=g,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new V6,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=qz(w=>this.update(w),c.resizeDelay||0),this._dataChanges=[],qd[this.id]=this,!d||!m){console.error("Failed to create chart: can't acquire context from the given item");return}Kr.listen(this,"complete",uS),Kr.listen(this,"progress",J6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:l}=this;return Qn(t)?e&&l?l:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return hr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():BE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return LE(this.canvas,this.ctx),this}stop(){return Kr.stop(this),this}resize(t,e){Kr.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,l=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(r,t,e,l),d=i.devicePixelRatio||this.platform.getDevicePixelRatio(),m=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,BE(this,d,!0)&&(this.notifyPlugins("resize",{size:c}),Ue(i.onResize,[this,c],this),this.attached&&this._doResize(m)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Ee(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((c,d)=>(c[d]=!1,c),{});let l=[];e&&(l=l.concat(Object.keys(e).map(c=>{const d=e[c],m=J_(c,d),g=m==="r",b=m==="x";return{options:d,dposition:g?"chartArea":b?"bottom":"left",dtype:g?"radialLinear":b?"category":"linear"}}))),Ee(l,c=>{const d=c.options,m=d.id,g=J_(m,d),b=Se(d.type,c.dtype);(d.position===void 0||oS(d.position,g)!==oS(c.dposition))&&(d.position=c.dposition),r[m]=!0;let w=null;if(m in i&&i[m].type===b)w=i[m];else{const S=hr.getScale(b);w=new S({id:m,type:b,ctx:this.ctx,chart:this}),i[w.id]=w}w.init(d,t)}),Ee(r,(c,d)=>{c||delete i[d]}),Ee(i,c=>{yo.configure(this,c,c.options),yo.addBox(this,c)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,l)=>r.index-l.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(lS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(l=>l===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const l=e[i];let c=this.getDatasetMeta(i);const d=l.type||this.config.type;if(c.type&&c.type!==d&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=d,c.indexAxis=l.indexAxis||Q_(d,this.options),c.order=l.order||0,c.index=i,c.label=""+l.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const m=hr.getController(d),{datasetElementType:g,dataElementType:b}=rn.datasets[d];Object.assign(m,{dataElementType:hr.getElement(b),datasetElementType:g&&hr.getElement(g)}),c.controller=new m(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){Ee(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let g=0,b=this.data.datasets.length;g<b;g++){const{controller:w}=this.getDatasetMeta(g),S=!r&&l.indexOf(w)===-1;w.buildOrUpdateElements(S),c=Math.max(+w.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),r||Ee(l,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(lS("z","_idx"));const{_active:d,_lastEvent:m}=this;m?this._eventHandler(m,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){Ee(this.scales,t=>{yo.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!xE(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:l}of e){const c=i==="_removeElements"?-l:l;tB(t,r,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=l=>new Set(t.filter(c=>c[0]===l).map((c,d)=>d+","+c.splice(1).join(","))),r=i(0);for(let l=1;l<e;l++)if(!xE(r,i(l)))return;return Array.from(r).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;yo.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Ee(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,l)=>{r._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,ko(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Kr.has(this)?this.attached&&!Kr.running(this)&&Kr.start(this):(this.draw(),uS({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,l;for(r=0,l=e.length;r<l;++r){const c=e[r];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=O3(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Tv(e,r),t.controller.draw(),r&&wv(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return hR(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const l=Q3.modes[e];return typeof l=="function"?l(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(l=>l&&l._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=ac(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",l=this.getDatasetMeta(t),c=l.controller._resolveAnimations(void 0,r);gm(e)?(l.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(l,{visible:i}),this.update(d=>d.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Kr.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),LE(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete qd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},r=(l,c,d)=>{l.offsetX=c,l.offsetY=d,this._eventHandler(l)};Ee(this.options.events,l=>i(l,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(m,g)=>{e.addEventListener(this,m,g),t[m]=g},r=(m,g)=>{t[m]&&(e.removeEventListener(this,m,g),delete t[m])},l=(m,g)=>{this.canvas&&this.resize(m,g)};let c;const d=()=>{r("attach",d),this.attached=!0,this.resize(),i("resize",l),i("detach",c)};c=()=>{this.attached=!1,r("resize",l),this._stop(),this._resize(0,0),i("attach",d)},e.isAttached(this.canvas)?d():c()}unbindEvents(){Ee(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Ee(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let l,c,d,m;for(e==="dataset"&&(l=this.getDatasetMeta(t[0].datasetIndex),l.controller["_"+r+"DatasetHoverStyle"]()),d=0,m=t.length;d<m;++d){c=t[d];const g=c&&this.getDatasetMeta(c.datasetIndex).controller;g&&g[r+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:l,index:c})=>{const d=this.getDatasetMeta(l);if(!d)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:d.data[c],index:c}});!mm(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,l=(m,g)=>m.filter(b=>!g.some(w=>b.datasetIndex===w.datasetIndex&&b.index===w.index)),c=l(e,t),d=i?t:l(t,e);c.length&&this.updateHoverStyle(c,r.mode,!1),d.length&&r.mode&&this.updateHoverStyle(d,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const l=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(l||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:l}=this,c=e,d=this._getActiveElements(t,r,i,c),m=Dz(t),g=eB(t,this._lastEvent,i,m);i&&(this._lastEvent=null,Ue(l.onHover,[t,d,this],this),m&&Ue(l.onClick,[t,d,this],this));const b=!mm(d,r);return(b||e)&&(this._active=d,this._updateHoverStyles(d,r,e)),this._lastEvent=g,b}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const l=this.options.hover;return this.getElementsAtEventForMode(t,l.mode,l,r)}},Xt(uo,"defaults",rn),Xt(uo,"instances",qd),Xt(uo,"overrides",Ll),Xt(uo,"registry",hr),Xt(uo,"version",X6),Xt(uo,"getChart",cS),uo);function hS(){return Ee(sp.instances,n=>n._plugins.invalidate())}function nB(n,t,e){const{startAngle:i,x:r,y:l,outerRadius:c,innerRadius:d,options:m}=t,{borderWidth:g,borderJoinStyle:b}=m,w=Math.min(g/c,dr(i-e));if(n.beginPath(),n.arc(r,l,c-g/2,i+w/2,e-w/2),d>0){const S=Math.min(g/d,dr(i-e));n.arc(r,l,d+g/2,e-S/2,i+S/2,!0)}else{const S=Math.min(g/2,c*dr(i-e));if(b==="round")n.arc(r,l,S,e-je/2,i+je/2,!0);else if(b==="bevel"){const C=2*S*S,M=-C*Math.cos(e+je/2)+r,D=-C*Math.sin(e+je/2)+l,N=C*Math.cos(i+je/2)+r,j=C*Math.sin(i+je/2)+l;n.lineTo(M,D),n.lineTo(N,j)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function iB(n,t,e){const{startAngle:i,pixelMargin:r,x:l,y:c,outerRadius:d,innerRadius:m}=t;let g=r/d;n.beginPath(),n.arc(l,c,d,i-g,e+g),m>r?(g=r/m,n.arc(l,c,m,e+g,i-g,!0)):n.arc(l,c,r,e+yn,i-yn),n.closePath(),n.clip()}function sB(n){return Ev(n,["outerStart","outerEnd","innerStart","innerEnd"])}function rB(n,t,e,i){const r=sB(n.options.borderRadius),l=(e-t)/2,c=Math.min(l,i*t/2),d=m=>{const g=(e-Math.min(l,m))*i/2;return ps(m,0,Math.min(l,g))};return{outerStart:d(r.outerStart),outerEnd:d(r.outerEnd),innerStart:ps(r.innerStart,0,c),innerEnd:ps(r.innerEnd,0,c)}}function Ou(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Em(n,t,e,i,r,l){const{x:c,y:d,startAngle:m,pixelMargin:g,innerRadius:b}=t,w=Math.max(t.outerRadius+i+e-g,0),S=b>0?b+i+e+g:0;let C=0;const M=r-m;if(i){const kt=b>0?b-i:0,tt=w>0?w-i:0,yt=(kt+tt)/2,dt=yt!==0?M*yt/(yt+i):M;C=(M-dt)/2}const D=Math.max(.001,M*w-e/je)/w,N=(M-D)/2,j=m+N+C,q=r-N-C,{outerStart:Y,outerEnd:it,innerStart:lt,innerEnd:bt}=rB(t,S,w,q-j),V=w-Y,P=w-it,z=j+Y/V,U=q-it/P,H=S+lt,G=S+bt,F=j+lt/H,Yt=q-bt/G;if(n.beginPath(),l){const kt=(z+U)/2;if(n.arc(c,d,w,z,kt),n.arc(c,d,w,kt,U),it>0){const Vt=Ou(P,U,c,d);n.arc(Vt.x,Vt.y,it,U,q+yn)}const tt=Ou(G,q,c,d);if(n.lineTo(tt.x,tt.y),bt>0){const Vt=Ou(G,Yt,c,d);n.arc(Vt.x,Vt.y,bt,q+yn,Yt+Math.PI)}const yt=(q-bt/S+(j+lt/S))/2;if(n.arc(c,d,S,q-bt/S,yt,!0),n.arc(c,d,S,yt,j+lt/S,!0),lt>0){const Vt=Ou(H,F,c,d);n.arc(Vt.x,Vt.y,lt,F+Math.PI,j-yn)}const dt=Ou(V,j,c,d);if(n.lineTo(dt.x,dt.y),Y>0){const Vt=Ou(V,z,c,d);n.arc(Vt.x,Vt.y,Y,j-yn,z)}}else{n.moveTo(c,d);const kt=Math.cos(z)*w+c,tt=Math.sin(z)*w+d;n.lineTo(kt,tt);const yt=Math.cos(U)*w+c,dt=Math.sin(U)*w+d;n.lineTo(yt,dt)}n.closePath()}function aB(n,t,e,i,r){const{fullCircles:l,startAngle:c,circumference:d}=t;let m=t.endAngle;if(l){Em(n,t,e,i,m,r);for(let g=0;g<l;++g)n.fill();isNaN(d)||(m=c+(d%dn||dn))}return Em(n,t,e,i,m,r),n.fill(),m}function oB(n,t,e,i,r){const{fullCircles:l,startAngle:c,circumference:d,options:m}=t,{borderWidth:g,borderJoinStyle:b,borderDash:w,borderDashOffset:S,borderRadius:C}=m,M=m.borderAlign==="inner";if(!g)return;n.setLineDash(w||[]),n.lineDashOffset=S,M?(n.lineWidth=g*2,n.lineJoin=b||"round"):(n.lineWidth=g,n.lineJoin=b||"bevel");let D=t.endAngle;if(l){Em(n,t,e,i,D,r);for(let N=0;N<l;++N)n.stroke();isNaN(d)||(D=c+(d%dn||dn))}M&&iB(n,t,D),m.selfJoin&&D-c>=je&&C===0&&b!=="miter"&&nB(n,t,D),l||(Em(n,t,e,i,D,r),n.stroke())}class dh extends of{constructor(e){super();Xt(this,"circumference");Xt(this,"endAngle");Xt(this,"fullCircles");Xt(this,"innerRadius");Xt(this,"outerRadius");Xt(this,"pixelMargin");Xt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,r){const l=this.getProps(["x","y"],r),{angle:c,distance:d}=sR(l,{x:e,y:i}),{startAngle:m,endAngle:g,innerRadius:b,outerRadius:w,circumference:S}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),C=(this.options.spacing+this.options.borderWidth)/2,M=Se(S,g-m),D=vm(c,m,g)&&m!==g,N=M>=dn||D,j=ch(d,b+C,w+C);return N&&j}getCenterPoint(e){const{x:i,y:r,startAngle:l,endAngle:c,innerRadius:d,outerRadius:m}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:g,spacing:b}=this.options,w=(l+c)/2,S=(d+m+b+g)/2;return{x:i+Math.cos(w)*S,y:r+Math.sin(w)*S}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:r}=this,l=(i.offset||0)/4,c=(i.spacing||0)/2,d=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>dn?Math.floor(r/dn):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const m=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(m)*l,Math.sin(m)*l);const g=1-Math.sin(Math.min(je,r||0)),b=l*g;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,aB(e,this,b,c,d),oB(e,this,b,c,d),e.restore()}}Xt(dh,"id","arc"),Xt(dh,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Xt(dh,"defaultRoutes",{backgroundColor:"backgroundColor"}),Xt(dh,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});const fS=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},lB=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class dS extends of{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Ue(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=bi(i.font),l=r.size,c=this._computeTitleHeight(),{boxWidth:d,itemHeight:m}=fS(i,l);let g,b;e.font=r.string,this.isHorizontal()?(g=this.maxWidth,b=this._fitRows(c,l,d,m)+10):(b=this.maxHeight,g=this._fitCols(c,r,d,m)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(b,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:l,maxWidth:c,options:{labels:{padding:d}}}=this,m=this.legendHitBoxes=[],g=this.lineWidths=[0],b=r+d;let w=t;l.textAlign="left",l.textBaseline="middle";let S=-1,C=-b;return this.legendItems.forEach((M,D)=>{const N=i+e/2+l.measureText(M.text).width;(D===0||g[g.length-1]+N+2*d>c)&&(w+=b,g[g.length-(D>0?0:1)]=0,C+=b,S++),m[D]={left:0,top:C,row:S,width:N,height:r},g[g.length-1]+=N+d}),w}_fitCols(t,e,i,r){const{ctx:l,maxHeight:c,options:{labels:{padding:d}}}=this,m=this.legendHitBoxes=[],g=this.columnSizes=[],b=c-t;let w=d,S=0,C=0,M=0,D=0;return this.legendItems.forEach((N,j)=>{const{itemWidth:q,itemHeight:Y}=uB(i,e,l,N,r);j>0&&C+Y+2*d>b&&(w+=S+d,g.push({width:S,height:C}),M+=S+d,D++,S=C=0),m[j]={left:M,top:C,col:D,width:q,height:Y},S=Math.max(S,q),C+=Y+d}),w+=S,g.push({width:S,height:C}),w}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:l}}=this,c=Hu(l,this.left,this.width);if(this.isHorizontal()){let d=0,m=Gi(i,this.left+r,this.right-this.lineWidths[d]);for(const g of e)d!==g.row&&(d=g.row,m=Gi(i,this.left+r,this.right-this.lineWidths[d])),g.top+=this.top+t+r,g.left=c.leftForLtr(c.x(m),g.width),m+=g.width+r}else{let d=0,m=Gi(i,this.top+t+r,this.bottom-this.columnSizes[d].height);for(const g of e)g.col!==d&&(d=g.col,m=Gi(i,this.top+t+r,this.bottom-this.columnSizes[d].height)),g.top=m,g.left+=this.left+r,g.left=c.leftForLtr(c.x(g.left),g.width),m+=g.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Tv(t,this),this._draw(),wv(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:l,labels:c}=t,d=rn.color,m=Hu(t.rtl,this.left,this.width),g=bi(c.font),{padding:b}=c,w=g.size,S=w/2;let C;this.drawTitle(),r.textAlign=m.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=g.string;const{boxWidth:M,boxHeight:D,itemHeight:N}=fS(c,w),j=function(bt,V,P){if(isNaN(M)||M<=0||isNaN(D)||D<0)return;r.save();const z=Se(P.lineWidth,1);if(r.fillStyle=Se(P.fillStyle,d),r.lineCap=Se(P.lineCap,"butt"),r.lineDashOffset=Se(P.lineDashOffset,0),r.lineJoin=Se(P.lineJoin,"miter"),r.lineWidth=z,r.strokeStyle=Se(P.strokeStyle,d),r.setLineDash(Se(P.lineDash,[])),c.usePointStyle){const U={radius:D*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:z},H=m.xPlus(bt,M/2),G=V+S;cR(r,U,H,G,c.pointStyleWidth&&M)}else{const U=V+Math.max((w-D)/2,0),H=m.leftForLtr(bt,M),G=Ah(P.borderRadius);r.beginPath(),Object.values(G).some(F=>F!==0)?K_(r,{x:H,y:U,w:M,h:D,radius:G}):r.rect(H,U,M,D),r.fill(),z!==0&&r.stroke()}r.restore()},q=function(bt,V,P){bm(r,P.text,bt,V+N/2,g,{strikethrough:P.hidden,textAlign:m.textAlign(P.textAlign)})},Y=this.isHorizontal(),it=this._computeTitleHeight();Y?C={x:Gi(l,this.left+b,this.right-i[0]),y:this.top+b+it,line:0}:C={x:this.left+b,y:Gi(l,this.top+it+b,this.bottom-e[0].height),line:0},gR(this.ctx,t.textDirection);const lt=N+b;this.legendItems.forEach((bt,V)=>{r.strokeStyle=bt.fontColor,r.fillStyle=bt.fontColor;const P=r.measureText(bt.text).width,z=m.textAlign(bt.textAlign||(bt.textAlign=c.textAlign)),U=M+S+P;let H=C.x,G=C.y;m.setWidth(this.width),Y?V>0&&H+U+b>this.right&&(G=C.y+=lt,C.line++,H=C.x=Gi(l,this.left+b,this.right-i[C.line])):V>0&&G+lt>this.bottom&&(H=C.x=H+e[C.line].width+b,C.line++,G=C.y=Gi(l,this.top+it+b,this.bottom-e[C.line].height));const F=m.x(H);if(j(F,G,bt),H=Gz(z,H+M+S,Y?H+U:this.right,t.rtl),q(m.x(H),G,bt),Y)C.x+=U+b;else if(typeof bt.text!="string"){const Yt=g.lineHeight;C.y+=IR(bt,Yt)+b}else C.y+=lt}),_R(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=bi(e.font),r=js(e.padding);if(!e.display)return;const l=Hu(t.rtl,this.left,this.width),c=this.ctx,d=e.position,m=i.size/2,g=r.top+m;let b,w=this.left,S=this.width;if(this.isHorizontal())S=Math.max(...this.lineWidths),b=this.top+g,w=Gi(t.align,w,this.right-S);else{const M=this.columnSizes.reduce((D,N)=>Math.max(D,N.height),0);b=g+Gi(t.align,this.top,this.bottom-M-t.labels.padding-this._computeTitleHeight())}const C=Gi(d,w,w+S);c.textAlign=l.textAlign(lR(d)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,bm(c,e.text,C,b,i)}_computeTitleHeight(){const t=this.options.title,e=bi(t.font),i=js(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,l;if(ch(t,this.left,this.right)&&ch(e,this.top,this.bottom)){for(l=this.legendHitBoxes,i=0;i<l.length;++i)if(r=l[i],ch(t,r.left,r.left+r.width)&&ch(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!fB(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,l=lB(r,i);r&&!l&&Ue(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!l&&Ue(e.onHover,[t,i,this],this)}else i&&Ue(e.onClick,[t,i,this],this)}}function uB(n,t,e,i,r){const l=cB(i,n,t,e),c=hB(r,i,t.lineHeight);return{itemWidth:l,itemHeight:c}}function cB(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((l,c)=>l.length>c.length?l:c)),t+e.size/2+i.measureText(r).width}function hB(n,t,e){let i=n;return typeof t.text!="string"&&(i=IR(t,e)),i}function IR(n,t){const e=n.text?n.text.length:0;return t*e}function fB(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var dB={id:"legend",_element:dS,start(n,t,e){const i=n.legend=new dS({ctx:n.ctx,options:e,chart:n});yo.configure(n,i,e),yo.addBox(n,i)},stop(n){yo.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;yo.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:l,useBorderRadius:c,borderRadius:d}}=n.legend.options;return n._getSortedDatasetMetas().map(m=>{const g=m.controller.getStyle(e?0:void 0),b=js(g.borderWidth);return{text:t[m.index].label,fillStyle:g.backgroundColor,fontColor:l,hidden:!m.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(b.width+b.height)/4,strokeStyle:g.borderColor,pointStyle:i||g.pointStyle,rotation:g.rotation,textAlign:r||g.textAlign,borderRadius:c&&(d||g.borderRadius),datasetIndex:m.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const mh={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,l=0;for(t=0,e=n.length;t<e;++t){const d=n[t].element;if(d&&d.hasValue()){const m=d.tooltipPosition();i.add(m.x),r+=m.y,++l}}return l===0||i.size===0?!1:{x:[...i].reduce((d,m)=>d+m)/i.size,y:r/l}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,l,c,d;for(l=0,c=n.length;l<c;++l){const m=n[l].element;if(m&&m.hasValue()){const g=m.getCenterPoint(),b=zz(t,g);b<r&&(r=b,d=m)}}if(d){const m=d.tooltipPosition();e=m.x,i=m.y}return{x:e,y:i}}};function cr(n,t){return t&&(zn(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Xr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function mB(n,t){const{element:e,datasetIndex:i,index:r}=t,l=n.getDatasetMeta(i).controller,{label:c,value:d}=l.getLabelAndValue(r);return{chart:n,label:c,parsed:l.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:d,dataset:l.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function mS(n,t){const e=n.chart.ctx,{body:i,footer:r,title:l}=n,{boxWidth:c,boxHeight:d}=t,m=bi(t.bodyFont),g=bi(t.titleFont),b=bi(t.footerFont),w=l.length,S=r.length,C=i.length,M=js(t.padding);let D=M.height,N=0,j=i.reduce((it,lt)=>it+lt.before.length+lt.lines.length+lt.after.length,0);if(j+=n.beforeBody.length+n.afterBody.length,w&&(D+=w*g.lineHeight+(w-1)*t.titleSpacing+t.titleMarginBottom),j){const it=t.displayColors?Math.max(d,m.lineHeight):m.lineHeight;D+=C*it+(j-C)*m.lineHeight+(j-1)*t.bodySpacing}S&&(D+=t.footerMarginTop+S*b.lineHeight+(S-1)*t.footerSpacing);let q=0;const Y=function(it){N=Math.max(N,e.measureText(it).width+q)};return e.save(),e.font=g.string,Ee(n.title,Y),e.font=m.string,Ee(n.beforeBody.concat(n.afterBody),Y),q=t.displayColors?c+2+t.boxPadding:0,Ee(i,it=>{Ee(it.before,Y),Ee(it.lines,Y),Ee(it.after,Y)}),q=0,e.font=b.string,Ee(n.footer,Y),e.restore(),N+=M.width,{width:N,height:D}}function pB(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function gB(n,t,e,i){const{x:r,width:l}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&r+l+c>t.width||n==="right"&&r-l-c<0)return!0}function _B(n,t,e,i){const{x:r,width:l}=e,{width:c,chartArea:{left:d,right:m}}=n;let g="center";return i==="center"?g=r<=(d+m)/2?"left":"right":r<=l/2?g="left":r>=c-l/2&&(g="right"),gB(g,n,t,e)&&(g="center"),g}function pS(n,t,e){const i=e.yAlign||t.yAlign||pB(n,e);return{xAlign:e.xAlign||t.xAlign||_B(n,t,e,i),yAlign:i}}function yB(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function vB(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function gS(n,t,e,i){const{caretSize:r,caretPadding:l,cornerRadius:c}=n,{xAlign:d,yAlign:m}=e,g=r+l,{topLeft:b,topRight:w,bottomLeft:S,bottomRight:C}=Ah(c);let M=yB(t,d);const D=vB(t,m,g);return m==="center"?d==="left"?M+=g:d==="right"&&(M-=g):d==="left"?M-=Math.max(b,S)+r:d==="right"&&(M+=Math.max(w,C)+r),{x:ps(M,0,i.width-t.width),y:ps(D,0,i.height-t.height)}}function Cd(n,t,e){const i=js(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function _S(n){return cr([],Xr(n))}function bB(n,t,e){return ac(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function yS(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const MR={beforeTitle:$r,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:$r,beforeBody:$r,beforeLabel:$r,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Qn(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:$r,afterBody:$r,beforeFooter:$r,footer:$r,afterFooter:$r};function _i(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?MR[t].call(e,i):r}class ty extends of{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,l=new yR(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=bB(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=_i(i,"beforeTitle",this,t),l=_i(i,"title",this,t),c=_i(i,"afterTitle",this,t);let d=[];return d=cr(d,Xr(r)),d=cr(d,Xr(l)),d=cr(d,Xr(c)),d}getBeforeBody(t,e){return _S(_i(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return Ee(t,l=>{const c={before:[],lines:[],after:[]},d=yS(i,l);cr(c.before,Xr(_i(d,"beforeLabel",this,l))),cr(c.lines,_i(d,"label",this,l)),cr(c.after,Xr(_i(d,"afterLabel",this,l))),r.push(c)}),r}getAfterBody(t,e){return _S(_i(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=_i(i,"beforeFooter",this,t),l=_i(i,"footer",this,t),c=_i(i,"afterFooter",this,t);let d=[];return d=cr(d,Xr(r)),d=cr(d,Xr(l)),d=cr(d,Xr(c)),d}_createItems(t){const e=this._active,i=this.chart.data,r=[],l=[],c=[];let d=[],m,g;for(m=0,g=e.length;m<g;++m)d.push(mB(this.chart,e[m]));return t.filter&&(d=d.filter((b,w,S)=>t.filter(b,w,S,i))),t.itemSort&&(d=d.sort((b,w)=>t.itemSort(b,w,i))),Ee(d,b=>{const w=yS(t.callbacks,b);r.push(_i(w,"labelColor",this,b)),l.push(_i(w,"labelPointStyle",this,b)),c.push(_i(w,"labelTextColor",this,b))}),this.labelColors=r,this.labelPointStyles=l,this.labelTextColors=c,this.dataPoints=d,d}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let l,c=[];if(!r.length)this.opacity!==0&&(l={opacity:0});else{const d=mh[i.position].call(this,r,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const m=this._size=mS(this,i),g=Object.assign({},d,m),b=pS(this.chart,i,g),w=gS(i,g,b,this.chart);this.xAlign=b.xAlign,this.yAlign=b.yAlign,l={opacity:1,x:w.x,y:w.y,width:m.width,height:m.height,caretX:d.x,caretY:d.y}}this._tooltipItems=c,this.$context=void 0,l&&this._resolveAnimations().update(this,l),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const l=this.getCaretPosition(t,i,r);e.lineTo(l.x1,l.y1),e.lineTo(l.x2,l.y2),e.lineTo(l.x3,l.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:l}=this,{caretSize:c,cornerRadius:d}=i,{topLeft:m,topRight:g,bottomLeft:b,bottomRight:w}=Ah(d),{x:S,y:C}=t,{width:M,height:D}=e;let N,j,q,Y,it,lt;return l==="center"?(it=C+D/2,r==="left"?(N=S,j=N-c,Y=it+c,lt=it-c):(N=S+M,j=N+c,Y=it-c,lt=it+c),q=N):(r==="left"?j=S+Math.max(m,b)+c:r==="right"?j=S+M-Math.max(g,w)-c:j=this.caretX,l==="top"?(Y=C,it=Y-c,N=j-c,q=j+c):(Y=C+D,it=Y+c,N=j+c,q=j-c),lt=Y),{x1:N,x2:j,x3:q,y1:Y,y2:it,y3:lt}}drawTitle(t,e,i){const r=this.title,l=r.length;let c,d,m;if(l){const g=Hu(i.rtl,this.x,this.width);for(t.x=Cd(this,i.titleAlign,i),e.textAlign=g.textAlign(i.titleAlign),e.textBaseline="middle",c=bi(i.titleFont),d=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,m=0;m<l;++m)e.fillText(r[m],g.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+d,m+1===l&&(t.y+=i.titleMarginBottom-d)}}_drawColorBox(t,e,i,r,l){const c=this.labelColors[i],d=this.labelPointStyles[i],{boxHeight:m,boxWidth:g}=l,b=bi(l.bodyFont),w=Cd(this,"left",l),S=r.x(w),C=m<b.lineHeight?(b.lineHeight-m)/2:0,M=e.y+C;if(l.usePointStyle){const D={radius:Math.min(g,m)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},N=r.leftForLtr(S,g)+g/2,j=M+m/2;t.strokeStyle=l.multiKeyBackground,t.fillStyle=l.multiKeyBackground,NE(t,D,N,j),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,NE(t,D,N,j)}else{t.lineWidth=pe(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const D=r.leftForLtr(S,g),N=r.leftForLtr(r.xPlus(S,1),g-2),j=Ah(c.borderRadius);Object.values(j).some(q=>q!==0)?(t.beginPath(),t.fillStyle=l.multiKeyBackground,K_(t,{x:D,y:M,w:g,h:m,radius:j}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),K_(t,{x:N,y:M+1,w:g-2,h:m-2,radius:j}),t.fill()):(t.fillStyle=l.multiKeyBackground,t.fillRect(D,M,g,m),t.strokeRect(D,M,g,m),t.fillStyle=c.backgroundColor,t.fillRect(N,M+1,g-2,m-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:l,bodyAlign:c,displayColors:d,boxHeight:m,boxWidth:g,boxPadding:b}=i,w=bi(i.bodyFont);let S=w.lineHeight,C=0;const M=Hu(i.rtl,this.x,this.width),D=function(P){e.fillText(P,M.x(t.x+C),t.y+S/2),t.y+=S+l},N=M.textAlign(c);let j,q,Y,it,lt,bt,V;for(e.textAlign=c,e.textBaseline="middle",e.font=w.string,t.x=Cd(this,N,i),e.fillStyle=i.bodyColor,Ee(this.beforeBody,D),C=d&&N!=="right"?c==="center"?g/2+b:g+2+b:0,it=0,bt=r.length;it<bt;++it){for(j=r[it],q=this.labelTextColors[it],e.fillStyle=q,Ee(j.before,D),Y=j.lines,d&&Y.length&&(this._drawColorBox(e,t,it,M,i),S=Math.max(w.lineHeight,m)),lt=0,V=Y.length;lt<V;++lt)D(Y[lt]),S=w.lineHeight;Ee(j.after,D)}C=0,S=w.lineHeight,Ee(this.afterBody,D),t.y-=l}drawFooter(t,e,i){const r=this.footer,l=r.length;let c,d;if(l){const m=Hu(i.rtl,this.x,this.width);for(t.x=Cd(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=m.textAlign(i.footerAlign),e.textBaseline="middle",c=bi(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,d=0;d<l;++d)e.fillText(r[d],m.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:l,yAlign:c}=this,{x:d,y:m}=t,{width:g,height:b}=i,{topLeft:w,topRight:S,bottomLeft:C,bottomRight:M}=Ah(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(d+w,m),c==="top"&&this.drawCaret(t,e,i,r),e.lineTo(d+g-S,m),e.quadraticCurveTo(d+g,m,d+g,m+S),c==="center"&&l==="right"&&this.drawCaret(t,e,i,r),e.lineTo(d+g,m+b-M),e.quadraticCurveTo(d+g,m+b,d+g-M,m+b),c==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(d+C,m+b),e.quadraticCurveTo(d,m+b,d,m+b-C),c==="center"&&l==="left"&&this.drawCaret(t,e,i,r),e.lineTo(d,m+w),e.quadraticCurveTo(d,m,d+w,m),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,l=i&&i.y;if(r||l){const c=mh[t.position].call(this,this._active,this._eventPosition);if(!c)return;const d=this._size=mS(this,t),m=Object.assign({},c,this._size),g=pS(e,t,m),b=gS(t,m,g,e);(r._to!==b.x||l._to!==b.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=d.width,this.height=d.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,b))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},l={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=js(e.padding),d=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&d&&(t.save(),t.globalAlpha=i,this.drawBackground(l,t,r,e),gR(t,e.textDirection),l.y+=c.top,this.drawTitle(l,t,e),this.drawBody(l,t,e),this.drawFooter(l,t,e),_R(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:d,index:m})=>{const g=this.chart.getDatasetMeta(d);if(!g)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:g.data[m],index:m}}),l=!mm(i,r),c=this._positionChanged(r,e);(l||c)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,l=this._active||[],c=this._getActiveElements(t,l,e,i),d=this._positionChanged(c,t),m=e||!mm(c,l)||d;return m&&(this._active=c,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),m}_getActiveElements(t,e,i,r){const l=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(d=>this.chart.data.datasets[d.datasetIndex]&&this.chart.getDatasetMeta(d.datasetIndex).controller.getParsed(d.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,l.mode,l,i);return l.reverse&&c.reverse(),c}_positionChanged(t,e){const{caretX:i,caretY:r,options:l}=this,c=mh[l.position].call(this,t,e);return c!==!1&&(i!==c.x||r!==c.y)}}Xt(ty,"positioners",mh);var TB={id:"tooltip",_element:ty,positioners:mh,afterInit(n,t,e){e&&(n.tooltip=new ty({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:MR},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const rp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vi=Object.keys(rp);function vS(n,t){return n-t}function bS(n,t){if(Qn(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:l}=n._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),da(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(r&&(c=r==="week"&&(ym(l)||l===!0)?e.startOf(c,"isoWeek",l):e.startOf(c,r)),+c)}function TS(n,t,e,i){const r=vi.length;for(let l=vi.indexOf(n);l<r-1;++l){const c=rp[vi[l]],d=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(d*c.size))<=i)return vi[l]}return vi[r-1]}function wB(n,t,e,i,r){for(let l=vi.length-1;l>=vi.indexOf(e);l--){const c=vi[l];if(rp[c].common&&n._adapter.diff(r,i,c)>=t-1)return c}return vi[e?vi.indexOf(e):0]}function EB(n){for(let t=vi.indexOf(n)+1,e=vi.length;t<e;++t)if(rp[vi[t]].common)return vi[t]}function wS(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=bv(e,t),l=e[i]>=t?e[i]:e[r];n[l]=!0}}function SB(n,t,e,i){const r=n._adapter,l=+r.startOf(t[0].value,i),c=t[t.length-1].value;let d,m;for(d=l;d<=c;d=+r.add(d,1,i))m=e[d],m>=0&&(t[m].major=!0);return t}function ES(n,t,e){const i=[],r={},l=t.length;let c,d;for(c=0;c<l;++c)d=t[c],r[d]=c,i.push({value:d,major:!1});return l===0||!e?i:SB(n,i,r,e)}class Sm extends ip{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new W3._date(t.adapters.date);r.init(e),wh(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:bS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:l,minDefined:c,maxDefined:d}=this.getUserBounds();function m(g){!c&&!isNaN(g.min)&&(r=Math.min(r,g.min)),!d&&!isNaN(g.max)&&(l=Math.max(l,g.max))}(!c||!d)&&(m(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&m(this.getMinMax(!1))),r=da(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),l=da(l)&&!isNaN(l)?l:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,l-1),this.max=Math.max(r+1,l)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const l=this.min,c=this.max,d=Hz(r,l,c);return this._unit=e.unit||(i.autoSkip?TS(e.minUnit,this.min,this.max,this._getLabelCapacity(l)):wB(this,d.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:EB(this._unit),this.initOffsets(r),t.reverse&&d.reverse(),ES(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,l;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,l=this.getDecimalForValue(t[t.length-1]),t.length===1?i=l:i=(l-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;e=ps(e,0,c),i=ps(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,l=r.time,c=l.unit||TS(l.minUnit,e,i,this._getLabelCapacity(e)),d=Se(r.ticks.stepSize,1),m=c==="week"?l.isoWeekday:!1,g=ym(m)||m===!0,b={};let w=e,S,C;if(g&&(w=+t.startOf(w,"isoWeek",m)),w=+t.startOf(w,g?"day":c),t.diff(i,e,c)>1e5*d)throw new Error(e+" and "+i+" are too far apart with stepSize of "+d+" "+c);const M=r.ticks.source==="data"&&this.getDataTimestamps();for(S=w,C=0;S<i;S=+t.add(S,d,c),C++)wS(b,S,M);return(S===i||r.bounds==="ticks"||C===1)&&wS(b,S,M),Object.keys(b).sort(vS).map(D=>+D)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,l=this._unit,c=e||r[l];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,r){const l=this.options,c=l.ticks.callback;if(c)return Ue(c,[t,e,i],this);const d=l.time.displayFormats,m=this._unit,g=this._majorUnit,b=m&&d[m],w=g&&d[g],S=i[e],C=g&&w&&S&&S.major;return this._adapter.format(t,r||(C?w:b))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=xl(this.isHorizontal()?e.maxRotation:e.minRotation),l=Math.cos(r),c=Math.sin(r),d=this._resolveTickFontOptions(0).size;return{w:i*l+d*c,h:i*c+d*l}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,l=this._tickFormatFunction(t,0,ES(this,[t],this._majorUnit),r),c=this._getLabelSize(l),d=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return d>0?d:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(bS(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Fz(t.sort(vS))}}Xt(Sm,"id","time"),Xt(Sm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Id(n,t,e){let i=0,r=n.length-1,l,c,d,m;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Y_(n,"pos",t)),{pos:l,time:d}=n[i],{pos:c,time:m}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Y_(n,"time",t)),{time:l,pos:d}=n[i],{time:c,pos:m}=n[r]);const g=c-l;return g?d+(m-d)*(t-l)/g:d}class SS extends Sm{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Id(e,this.min),this._tableRange=Id(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],l=[];let c,d,m,g,b;for(c=0,d=t.length;c<d;++c)g=t[c],g>=e&&g<=i&&r.push(g);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,d=r.length;c<d;++c)b=r[c+1],m=r[c-1],g=r[c],Math.round((b+m)/2)!==g&&l.push({time:g,pos:c/(d-1)});return l}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,l)=>r-l)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Id(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Id(this._table,i*this._tableRange+this._minPos,!0)}}Xt(SS,"id","timeseries"),Xt(SS,"defaults",Sm.defaults);const OR="label";function AS(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function AB(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function PR(n,t){n.labels=t}function DR(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:OR;const i=[];n.datasets=t.map(r=>{const l=n.datasets.find(c=>c[e]===r[e]);return!l||!r.data||i.includes(l)?{...r}:(i.push(l),Object.assign(l,r),l)})}function xB(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OR;const e={labels:[],datasets:[]};return PR(e,n.labels),DR(e,n.datasets,t),e}function RB(n,t){const{height:e=150,width:i=300,redraw:r=!1,datasetIdKey:l,type:c,data:d,options:m,plugins:g=[],fallbackContent:b,updateMode:w,...S}=n,C=K.useRef(null),M=K.useRef(null),D=()=>{C.current&&(M.current=new sp(C.current,{type:c,data:xB(d,l),options:m&&{...m},plugins:g}),AS(t,M.current))},N=()=>{AS(t,null),M.current&&(M.current.destroy(),M.current=null)};return K.useEffect(()=>{!r&&M.current&&m&&AB(M.current,m)},[r,m]),K.useEffect(()=>{!r&&M.current&&PR(M.current.config.data,d.labels)},[r,d.labels]),K.useEffect(()=>{!r&&M.current&&d.datasets&&DR(M.current.config.data,d.datasets,l)},[r,d.datasets]),K.useEffect(()=>{M.current&&(r?(N(),setTimeout(D)):M.current.update(w))},[r,m,d.labels,d.datasets,w]),K.useEffect(()=>{M.current&&(N(),setTimeout(D))},[c]),K.useEffect(()=>(D(),()=>N()),[]),ge.createElement("canvas",{ref:C,role:"img",height:e,width:i,...S},b)}const CB=K.forwardRef(RB);function IB(n,t){return sp.register(t),K.forwardRef((e,i)=>ge.createElement(CB,{...e,ref:i,type:n}))}const MB=IB("pie",X_);sp.register(dh,TB,dB);const OB={calma:"😴",musicá:"🎶",ambiante:"🍻",fiesta:"🎉",lleno:"🕺"},PB=n=>n.charAt(0).toUpperCase()+n.slice(1),DB=({votes:n})=>{const t=Object.keys(n),e=Object.values(n);if(t.length===0)return ht.jsx("p",{style:{textAlign:"center"},children:"Aucun vote pour le moment."});const i={labels:t.map(r=>`${OB[r]||""} ${PB(r)}`),datasets:[{label:"Votes",data:e,backgroundColor:["#8884d8","#82ca9d","#ffc658","#ff8042","#ff4d4f"],borderWidth:1}]};return ht.jsx("div",{className:"chart-container",children:ht.jsx(MB,{data:i})})};function kR(){const[n,t]=K.useState(null),[e,i]=K.useState(!0);return K.useEffect(()=>{const r=oV(vE,l=>{t(l?{uid:l.uid,isAnonymous:l.isAnonymous}:null),i(!1)});return eV(vE).catch(l=>{console.error("Erreur lors de la connexion anonyme",l),i(!1)}),()=>r()},[]),{user:n,loading:e}}const kB=(n,t)=>{const[e,i]=K.useState(null),[r,l]=K.useState(!1);return{vote:async d=>{l(!0),i(null);try{const m=Eo(ea,`bars/${n}/ambianceVotes`),g=an.fromDate(new Date(Date.now()-30*60*1e3)),b=rm(m,Gw("uid","==",t),Gw("timestamp",">",g));return(await V_(b)).empty?(await ev(m,{uid:t,type:d,timestamp:an.now()}),!0):(i("Ya has votado en los últimos 30 minutos."),!1)}catch(m){return console.error("Error al guardar el voto:",m),i("Hubo un error al enviar tu voto."),!1}finally{l(!1)}},loading:r,error:e}},xS={calma:"😴",musica:"🎶",ambiente:"🍻",fiesta:"🎉",lleno:"🕺"},RS=n=>n.charAt(0).toUpperCase()+n.slice(1),LB=()=>{const{id:n}=zI(),{user:t}=kR(),e=Gh(),[i,r]=K.useState(""),[l,c]=K.useState([]),[d,m]=K.useState(""),[g,b]=K.useState(0),[w,S]=K.useState(null),[C,M]=K.useState({}),{vote:D,error:N,loading:j}=kB(n,(t==null?void 0:t.uid)||"anon");K.useEffect(()=>{const V=async()=>{const U=PA(ea,"bars",n),H=await $k(U);H.exists()&&r(H.data().nom)},P=rm(Eo(ea,`bars/${n}/comments`),Gk("timestamp","desc")),z=z_(P,U=>{const H=U.docs.map(G=>G.data());c(H)});return V(),()=>z()},[n]),K.useEffect(()=>{const V=rm(Eo(ea,`bars/${n}/ambianceVotes`));return z_(V,P=>{var H;const z={};P.docs.forEach(G=>{const F=G.data().type;z[F]=(z[F]||0)+1}),M(z);const U=(H=Object.entries(z).sort((G,F)=>F[1]-G[1])[0])==null?void 0:H[0];S(U||null)})},[n]);const q=l.length?(l.reduce((V,P)=>V+P.rating,0)/l.length).toFixed(1):"Sin valoraciones",Y=async V=>{if(V.preventDefault(),!d||g===0){alert("Por favor completa todos los campos.");return}try{await ev(Eo(ea,`bars/${n}/comments`),{uid:(t==null?void 0:t.uid)||"anon",nom:"Anónimo",message:d,rating:g,timestamp:Xk()}),m(""),b(0)}catch(P){console.error("Error al enviar comentario:",P),alert("Hubo un problema al enviar el comentario.")}},it=async V=>{await D(V)?alert("¡Gracias por tu voto!"):N&&alert(N)},lt=()=>{e("/mapa")},bt=V=>{const P=Math.floor(V),z=V-P>=.5,U=5-P-(z?1:0),H=[];for(let G=0;G<P;G++)H.push(ht.jsx("span",{className:"star active",children:"★"},`full-${G}`));z&&H.push(ht.jsx("span",{className:"star half",children:"★"},"half"));for(let G=0;G<U;G++)H.push(ht.jsx("span",{className:"star",children:"★"},`empty-${G}`));return H};return ht.jsxs("div",{className:"bar-page",children:[ht.jsx(Wh,{}),ht.jsx("h2",{children:i}),Object.keys(C).length>0&&ht.jsxs(ht.Fragment,{children:[ht.jsx("h3",{style:{textAlign:"center"},children:"Distribución de votos de ambiente:"}),ht.jsx(DB,{votes:C})]}),w&&ht.jsxs("div",{className:"dominant-ambiance",children:["Ambiente dominante: ",ht.jsxs("span",{className:`tag tag-${w}`,children:[xS[w]," ",RS(w)]})]}),ht.jsxs("div",{className:"rating",children:[ht.jsx("span",{className:"label",children:"Calificación promedio:"}),typeof q=="string"?ht.jsxs("span",{children:[" ",q]}):ht.jsxs(ht.Fragment,{children:[bt(parseFloat(q)),ht.jsxs("span",{style:{marginLeft:"0.5rem"},children:["(",q," / 5)"]}),ht.jsxs("span",{style:{marginLeft:"0.5rem",fontSize:"1rem"},children:["• ",l.length," ",l.length===1?"comentario":"comentarios"]})]})]}),ht.jsx("h3",{children:"Comentarios:"}),ht.jsx("ul",{children:l.map((V,P)=>ht.jsxs("li",{children:[ht.jsx("strong",{children:V.nom})," – ⭐ ",V.rating,ht.jsx("br",{}),V.message]},P))}),ht.jsx("h3",{children:"Añadir comentario:"}),ht.jsxs("form",{onSubmit:Y,className:"comment-form",children:[ht.jsx("textarea",{placeholder:"Escribe tu comentario...",value:d,onChange:V=>m(V.target.value),required:!0}),ht.jsx("div",{className:"stars",children:[1,2,3,4,5].map(V=>ht.jsx("span",{onClick:()=>b(V),className:V<=g?"star active":"star",children:"★"},V))}),ht.jsx("button",{type:"submit",children:"Enviar"})]}),ht.jsx("h3",{children:"Ambiente actual:"}),ht.jsx("div",{className:"ambiance-buttons",children:["calma","musica","ambiente","fiesta","lleno"].map(V=>ht.jsxs("button",{onClick:()=>it(V),disabled:j,children:[xS[V]," ",RS(V)]},V))}),ht.jsx("button",{onClick:lt,children:" Ver 🗺️"})]})},NB="Mael Develop",LR=2;let VB=new Date().getFullYear();function zB(){return"Stable"}const BB=` ${VB}, ${NB} in version ${LR} ${zB()}`,UB=()=>ht.jsx("div",{className:"footer",children:ht.jsxs("p",{className:"credits",children:["© ",BB]})}),HB=()=>{const n=Gh(),[t,e]=K.useState(()=>localStorage.getItem("darkMode")==="true"),i=()=>{n("/")},r=()=>{const c=!t;e(c),localStorage.setItem("darkMode",String(c)),document.documentElement.classList.toggle("dark-mode",c)},l=()=>{window.confirm("¿Estás seguro de que quieres borrar los datos locales?")&&(localStorage.clear(),alert("Datos locales eliminados."))};return K.useEffect(()=>{document.documentElement.classList.toggle("dark-mode",t)},[t]),ht.jsxs("div",{className:"settings-page",children:[ht.jsx(Wh,{}),ht.jsx("h2",{children:"⚙️ Ajustes"}),ht.jsx("div",{className:"setting",children:ht.jsxs("label",{children:[ht.jsx("input",{type:"checkbox",checked:t,onChange:r}),"Modo oscuro"]})}),ht.jsx("div",{className:"setting",children:ht.jsx("button",{onClick:l,children:"🧹 Borrar datos locales"})}),ht.jsx("button",{onClick:i,children:"Ir a inicio"}),ht.jsx("div",{className:"setting small",children:ht.jsxs("p",{children:["Versión: ",LR]})})]})},jB=()=>ht.jsxs("div",{className:"about-page",children:[ht.jsx(Wh,{}),ht.jsx("h1",{children:"Sobre nosotros"}),ht.jsx("p",{children:"Tapas Radar es una aplicación que te permite encontrar los mejores bares de Madrid."}),ht.jsxs("p",{children:["By: ",ht.jsx("a",{href:"https://github.com/maeldevelop7",children:"Mael Gruand"})]})]}),FB=()=>{const{user:n,loading:t}=kR();return t?ht.jsx("p",{children:"Cargando..."}):n?(console.log(`Conectado anónimamente con UID ${n.uid}`),ht.jsx(ht.Fragment,{children:ht.jsxs(E2,{children:[ht.jsxs(JI,{children:[ht.jsx(Tl,{path:"/",element:ht.jsx(N2,{})}),ht.jsx(Tl,{path:"/mapa",element:ht.jsx(T4,{})}),ht.jsx(Tl,{path:"/añadir",element:ht.jsx(sz,{})}),ht.jsx(Tl,{path:"/bar/:id",element:ht.jsx(LB,{})})," ",ht.jsx(Tl,{path:"/settings",element:ht.jsx(HB,{})}),ht.jsx(Tl,{path:"/about",element:ht.jsx(jB,{})})]}),ht.jsx(UB,{}),ht.jsx(iz,{})]})})):ht.jsx("p",{children:"Problema con la autenticación"})},qB="modulepreload",GB=function(n){return"/TapasMadrid/"+n},CS={},ZB=function(t,e,i){let r=Promise.resolve();if(e&&e.length>0){let c=function(g){return Promise.all(g.map(b=>Promise.resolve(b).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));r=c(e.map(g=>{if(g=GB(g),g in CS)return;CS[g]=!0;const b=g.endsWith(".css"),w=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${w}`))return;const S=document.createElement("link");if(S.rel=b?"stylesheet":qB,b||(S.as="script"),S.crossOrigin="",S.href=g,m&&S.setAttribute("nonce",m),document.head.appendChild(S),b)return new Promise((C,M)=>{S.addEventListener("load",C),S.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return r.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return t().catch(l)})};function WB(n={}){const{immediate:t=!1,onNeedRefresh:e,onOfflineReady:i,onRegistered:r,onRegisteredSW:l,onRegisterError:c}=n;let d,m;const g=async(w=!0)=>{await m};async function b(){if("serviceWorker"in navigator){if(d=await ZB(async()=>{const{Workbox:w}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:w}},[]).then(({Workbox:w})=>new w("/TapasMadrid/sw.js",{scope:"/TapasMadrid/",type:"classic"})).catch(w=>{c==null||c(w)}),!d)return;d.addEventListener("activated",w=>{(w.isUpdate||w.isExternal)&&window.location.reload()}),d.addEventListener("installed",w=>{w.isUpdate||i==null||i()}),d.register({immediate:t}).then(w=>{l?l("/TapasMadrid/sw.js",w):r==null||r(w)}).catch(w=>{c==null||c(w)})}}return m=b(),g}oI.createRoot(document.getElementById("root")).render(ht.jsx(ge.StrictMode,{children:ht.jsx(FB,{})}));WB({onNeedRefresh(){confirm("Nueva versión disponible. ¿Recargar la página?")&&window.location.reload()},onOfflineReady(){console.log("TapasRadar está disponible sin conexión.")}});
