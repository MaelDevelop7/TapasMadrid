var CI=Object.defineProperty;var II=(n,t,e)=>t in n?CI(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Xt=(n,t,e)=>II(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();function Ty(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var t_={exports:{}},ih={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT;function PI(){if(FT)return ih;FT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:l}}return ih.Fragment=t,ih.jsx=e,ih.jsxs=e,ih}var qT;function MI(){return qT||(qT=1,t_.exports=PI()),t_.exports}var it=MI(),e_={exports:{}},$t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function OI(){if(GT)return $t;GT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,k={};function D(j,ct,Tt){this.props=j,this.context=ct,this.refs=k,this.updater=Tt||R}D.prototype.isReactComponent={},D.prototype.setState=function(j,ct){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ct,"setState")},D.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function U(){}U.prototype=D.prototype;function q(j,ct,Tt){this.props=j,this.context=ct,this.refs=k,this.updater=Tt||R}var Y=q.prototype=new U;Y.constructor=q,P(Y,D.prototype),Y.isPureReactComponent=!0;var st=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},ht=Object.prototype.hasOwnProperty;function V(j,ct,Tt,yt,St,xt){return Tt=xt.ref,{$$typeof:n,type:j,key:ct,ref:Tt!==void 0?Tt:null,props:xt}}function O(j,ct){return V(j.type,ct,void 0,void 0,void 0,j.props)}function z(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function B(j){var ct={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Tt){return ct[Tt]})}var H=/\/+/g;function G(j,ct){return typeof j=="object"&&j!==null&&j.key!=null?B(""+j.key):ct.toString(36)}function F(){}function Yt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(F,F):(j.status="pending",j.then(function(ct){j.status==="pending"&&(j.status="fulfilled",j.value=ct)},function(ct){j.status==="pending"&&(j.status="rejected",j.reason=ct)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Dt(j,ct,Tt,yt,St){var xt=typeof j;(xt==="undefined"||xt==="boolean")&&(j=null);var Et=!1;if(j===null)Et=!0;else switch(xt){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(j.$$typeof){case n:case t:Et=!0;break;case v:return Et=j._init,Dt(Et(j._payload),ct,Tt,yt,St)}}if(Et)return St=St(j),Et=yt===""?"."+G(j,0):yt,st(St)?(Tt="",Et!=null&&(Tt=Et.replace(H,"$&/")+"/"),Dt(St,ct,Tt,"",function(Ri){return Ri})):St!=null&&(z(St)&&(St=O(St,Tt+(St.key==null||j&&j.key===St.key?"":(""+St.key).replace(H,"$&/")+"/")+Et)),ct.push(St)),1;Et=0;var xe=yt===""?".":yt+":";if(st(j))for(var le=0;le<j.length;le++)yt=j[le],xt=xe+G(yt,le),Et+=Dt(yt,ct,Tt,xt,St);else if(le=S(j),typeof le=="function")for(j=le.call(j),le=0;!(yt=j.next()).done;)yt=yt.value,xt=xe+G(yt,le++),Et+=Dt(yt,ct,Tt,xt,St);else if(xt==="object"){if(typeof j.then=="function")return Dt(Yt(j),ct,Tt,yt,St);throw ct=String(j),Error("Objects are not valid as a React child (found: "+(ct==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ct)+"). If you meant to render a collection of children, use an array instead.")}return Et}function et(j,ct,Tt){if(j==null)return j;var yt=[],St=0;return Dt(j,yt,"","",function(xt){return ct.call(Tt,xt,St++)}),yt}function vt(j){if(j._status===-1){var ct=j._result;ct=ct(),ct.then(function(Tt){(j._status===0||j._status===-1)&&(j._status=1,j._result=Tt)},function(Tt){(j._status===0||j._status===-1)&&(j._status=2,j._result=Tt)}),j._status===-1&&(j._status=0,j._result=ct)}if(j._status===1)return j._result.default;throw j._result}var mt=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ct=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ct))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function Vt(){}return $t.Children={map:et,forEach:function(j,ct,Tt){et(j,function(){ct.apply(this,arguments)},Tt)},count:function(j){var ct=0;return et(j,function(){ct++}),ct},toArray:function(j){return et(j,function(ct){return ct})||[]},only:function(j){if(!z(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},$t.Component=D,$t.Fragment=e,$t.Profiler=r,$t.PureComponent=q,$t.StrictMode=i,$t.Suspense=m,$t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,$t.__COMPILER_RUNTIME={__proto__:null,c:function(j){return Q.H.useMemoCache(j)}},$t.cache=function(j){return function(){return j.apply(null,arguments)}},$t.cloneElement=function(j,ct,Tt){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var yt=P({},j.props),St=j.key,xt=void 0;if(ct!=null)for(Et in ct.ref!==void 0&&(xt=void 0),ct.key!==void 0&&(St=""+ct.key),ct)!ht.call(ct,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&ct.ref===void 0||(yt[Et]=ct[Et]);var Et=arguments.length-2;if(Et===1)yt.children=Tt;else if(1<Et){for(var xe=Array(Et),le=0;le<Et;le++)xe[le]=arguments[le+2];yt.children=xe}return V(j.type,St,void 0,void 0,xt,yt)},$t.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},$t.createElement=function(j,ct,Tt){var yt,St={},xt=null;if(ct!=null)for(yt in ct.key!==void 0&&(xt=""+ct.key),ct)ht.call(ct,yt)&&yt!=="key"&&yt!=="__self"&&yt!=="__source"&&(St[yt]=ct[yt]);var Et=arguments.length-2;if(Et===1)St.children=Tt;else if(1<Et){for(var xe=Array(Et),le=0;le<Et;le++)xe[le]=arguments[le+2];St.children=xe}if(j&&j.defaultProps)for(yt in Et=j.defaultProps,Et)St[yt]===void 0&&(St[yt]=Et[yt]);return V(j,xt,void 0,void 0,null,St)},$t.createRef=function(){return{current:null}},$t.forwardRef=function(j){return{$$typeof:f,render:j}},$t.isValidElement=z,$t.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:vt}},$t.memo=function(j,ct){return{$$typeof:p,type:j,compare:ct===void 0?null:ct}},$t.startTransition=function(j){var ct=Q.T,Tt={};Q.T=Tt;try{var yt=j(),St=Q.S;St!==null&&St(Tt,yt),typeof yt=="object"&&yt!==null&&typeof yt.then=="function"&&yt.then(Vt,mt)}catch(xt){mt(xt)}finally{Q.T=ct}},$t.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},$t.use=function(j){return Q.H.use(j)},$t.useActionState=function(j,ct,Tt){return Q.H.useActionState(j,ct,Tt)},$t.useCallback=function(j,ct){return Q.H.useCallback(j,ct)},$t.useContext=function(j){return Q.H.useContext(j)},$t.useDebugValue=function(){},$t.useDeferredValue=function(j,ct){return Q.H.useDeferredValue(j,ct)},$t.useEffect=function(j,ct,Tt){var yt=Q.H;if(typeof Tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return yt.useEffect(j,ct)},$t.useId=function(){return Q.H.useId()},$t.useImperativeHandle=function(j,ct,Tt){return Q.H.useImperativeHandle(j,ct,Tt)},$t.useInsertionEffect=function(j,ct){return Q.H.useInsertionEffect(j,ct)},$t.useLayoutEffect=function(j,ct){return Q.H.useLayoutEffect(j,ct)},$t.useMemo=function(j,ct){return Q.H.useMemo(j,ct)},$t.useOptimistic=function(j,ct){return Q.H.useOptimistic(j,ct)},$t.useReducer=function(j,ct,Tt){return Q.H.useReducer(j,ct,Tt)},$t.useRef=function(j){return Q.H.useRef(j)},$t.useState=function(j){return Q.H.useState(j)},$t.useSyncExternalStore=function(j,ct,Tt){return Q.H.useSyncExternalStore(j,ct,Tt)},$t.useTransition=function(){return Q.H.useTransition()},$t.version="19.1.0",$t}var ZT;function Ey(){return ZT||(ZT=1,e_.exports=OI()),e_.exports}var K=Ey();const ge=Ty(K);var n_={exports:{}},sh={},i_={exports:{}},s_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT;function kI(){return WT||(WT=1,function(n){function t(et,vt){var mt=et.length;et.push(vt);t:for(;0<mt;){var Vt=mt-1>>>1,j=et[Vt];if(0<r(j,vt))et[Vt]=vt,et[mt]=j,mt=Vt;else break t}}function e(et){return et.length===0?null:et[0]}function i(et){if(et.length===0)return null;var vt=et[0],mt=et.pop();if(mt!==vt){et[0]=mt;t:for(var Vt=0,j=et.length,ct=j>>>1;Vt<ct;){var Tt=2*(Vt+1)-1,yt=et[Tt],St=Tt+1,xt=et[St];if(0>r(yt,mt))St<j&&0>r(xt,yt)?(et[Vt]=xt,et[St]=mt,Vt=St):(et[Vt]=yt,et[Tt]=mt,Vt=Tt);else if(St<j&&0>r(xt,mt))et[Vt]=xt,et[St]=mt,Vt=St;else break t}}return vt}function r(et,vt){var mt=et.sortIndex-vt.sortIndex;return mt!==0?mt:et.id-vt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],p=[],v=1,E=null,S=3,R=!1,P=!1,k=!1,D=!1,U=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function st(et){for(var vt=e(p);vt!==null;){if(vt.callback===null)i(p);else if(vt.startTime<=et)i(p),vt.sortIndex=vt.expirationTime,t(m,vt);else break;vt=e(p)}}function Q(et){if(k=!1,st(et),!P)if(e(m)!==null)P=!0,ht||(ht=!0,G());else{var vt=e(p);vt!==null&&Dt(Q,vt.startTime-et)}}var ht=!1,V=-1,O=5,z=-1;function B(){return D?!0:!(n.unstable_now()-z<O)}function H(){if(D=!1,ht){var et=n.unstable_now();z=et;var vt=!0;try{t:{P=!1,k&&(k=!1,q(V),V=-1),R=!0;var mt=S;try{e:{for(st(et),E=e(m);E!==null&&!(E.expirationTime>et&&B());){var Vt=E.callback;if(typeof Vt=="function"){E.callback=null,S=E.priorityLevel;var j=Vt(E.expirationTime<=et);if(et=n.unstable_now(),typeof j=="function"){E.callback=j,st(et),vt=!0;break e}E===e(m)&&i(m),st(et)}else i(m);E=e(m)}if(E!==null)vt=!0;else{var ct=e(p);ct!==null&&Dt(Q,ct.startTime-et),vt=!1}}break t}finally{E=null,S=mt,R=!1}vt=void 0}}finally{vt?G():ht=!1}}}var G;if(typeof Y=="function")G=function(){Y(H)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Yt=F.port2;F.port1.onmessage=H,G=function(){Yt.postMessage(null)}}else G=function(){U(H,0)};function Dt(et,vt){V=U(function(){et(n.unstable_now())},vt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(et){et.callback=null},n.unstable_forceFrameRate=function(et){0>et||125<et?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<et?Math.floor(1e3/et):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(et){switch(S){case 1:case 2:case 3:var vt=3;break;default:vt=S}var mt=S;S=vt;try{return et()}finally{S=mt}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(et,vt){switch(et){case 1:case 2:case 3:case 4:case 5:break;default:et=3}var mt=S;S=et;try{return vt()}finally{S=mt}},n.unstable_scheduleCallback=function(et,vt,mt){var Vt=n.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?Vt+mt:Vt):mt=Vt,et){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=mt+j,et={id:v++,callback:vt,priorityLevel:et,startTime:mt,expirationTime:j,sortIndex:-1},mt>Vt?(et.sortIndex=mt,t(p,et),e(m)===null&&et===e(p)&&(k?(q(V),V=-1):k=!0,Dt(Q,mt-Vt))):(et.sortIndex=j,t(m,et),P||R||(P=!0,ht||(ht=!0,G()))),et},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(et){var vt=S;return function(){var mt=S;S=vt;try{return et.apply(this,arguments)}finally{S=mt}}}}(s_)),s_}var YT;function DI(){return YT||(YT=1,i_.exports=kI()),i_.exports}var r_={exports:{}},$n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function LI(){if(KT)return $n;KT=1;var n=Ey();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(m,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:m,containerInfo:p,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return $n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,$n.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(m,p,null,v)},$n.flushSync=function(m){var p=c.T,v=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=v,i.d.f()}},$n.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},$n.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},$n.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,E=f(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:R}):v==="script"&&i.d.X(m,{crossOrigin:E,integrity:S,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},$n.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=f(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},$n.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=f(v,p.crossOrigin);i.d.L(m,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},$n.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=f(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},$n.requestFormReset=function(m){i.d.r(m)},$n.unstable_batchedUpdates=function(m,p){return m(p)},$n.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},$n.useFormStatus=function(){return c.H.useHostTransitionStatus()},$n.version="19.1.0",$n}var $T;function r1(){if($T)return r_.exports;$T=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),r_.exports=LI(),r_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function NI(){if(XT)return sh;XT=1;var n=DI(),t=Ey(),e=r1();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(l(s)!==s)throw Error(i(188))}function m(s){var a=s.alternate;if(!a){if(a=l(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,d=a;;){var y=u.return;if(y===null)break;var b=y.alternate;if(b===null){if(d=y.return,d!==null){u=d;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===u)return f(y),s;if(b===d)return f(y),a;b=b.sibling}throw Error(i(188))}if(u.return!==d.return)u=y,d=b;else{for(var C=!1,M=y.child;M;){if(M===u){C=!0,u=y,d=b;break}if(M===d){C=!0,d=y,u=b;break}M=M.sibling}if(!C){for(M=b.child;M;){if(M===u){C=!0,u=b,d=y;break}if(M===d){C=!0,d=b,u=y;break}M=M.sibling}if(!C)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),st=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),ht=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var F=Symbol.for("react.client.reference");function Yt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===F?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case D:return"Profiler";case k:return"StrictMode";case Q:return"Suspense";case ht:return"SuspenseList";case z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case R:return"Portal";case Y:return(s.displayName||"Context")+".Provider";case q:return(s._context.displayName||"Context")+".Consumer";case st:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return a=s.displayName||null,a!==null?a:Yt(s.type)||"Memo";case O:a=s._payload,s=s._init;try{return Yt(s(a))}catch{}}return null}var Dt=Array.isArray,et=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt={pending:!1,data:null,method:null,action:null},Vt=[],j=-1;function ct(s){return{current:s}}function Tt(s){0>j||(s.current=Vt[j],Vt[j]=null,j--)}function yt(s,a){j++,Vt[j]=s.current,s.current=a}var St=ct(null),xt=ct(null),Et=ct(null),xe=ct(null);function le(s,a){switch(yt(Et,a),yt(xt,s),yt(St,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?_T(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=_T(a),s=yT(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Tt(St),yt(St,s)}function Ri(){Tt(St),Tt(xt),Tt(Et)}function Ji(s){s.memoizedState!==null&&yt(xe,s);var a=St.current,u=yT(a,s.type);a!==u&&(yt(xt,s),yt(St,u))}function Ci(s){xt.current===s&&(Tt(St),Tt(xt)),xe.current===s&&(Tt(xe),Qc._currentValue=mt)}var Ii=Object.prototype.hasOwnProperty,Ss=n.unstable_scheduleCallback,Mr=n.unstable_cancelCallback,wa=n.unstable_shouldYield,Yo=n.unstable_requestPaint,Hn=n.unstable_now,Sa=n.unstable_getCurrentPriorityLevel,Ko=n.unstable_ImmediatePriority,Or=n.unstable_UserBlockingPriority,As=n.unstable_NormalPriority,Jl=n.unstable_LowPriority,kr=n.unstable_IdlePriority,$o=n.log,tu=n.unstable_setDisableYieldValue,ke=null,fe=null;function Fn(s){if(typeof $o=="function"&&tu(s),fe&&typeof fe.setStrictMode=="function")try{fe.setStrictMode(ke,s)}catch{}}var Tn=Math.clz32?Math.clz32:Dr,Xo=Math.log,eu=Math.LN2;function Dr(s){return s>>>=0,s===0?32:31-(Xo(s)/eu|0)|0}var Qs=256,xs=4194304;function fi(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Aa(s,a,u){var d=s.pendingLanes;if(d===0)return 0;var y=0,b=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var M=d&134217727;return M!==0?(d=M&~b,d!==0?y=fi(d):(C&=M,C!==0?y=fi(C):u||(u=M&~s,u!==0&&(y=fi(u))))):(M=d&~b,M!==0?y=fi(M):C!==0?y=fi(C):u||(u=d&~s,u!==0&&(y=fi(u)))),y===0?0:a!==0&&a!==y&&(a&b)===0&&(b=y&-y,u=a&-a,b>=u||b===32&&(u&4194048)!==0)?a:y}function Pi(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Qo(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jo(){var s=Qs;return Qs<<=1,(Qs&4194048)===0&&(Qs=256),s}function xa(){var s=xs;return xs<<=1,(xs&62914560)===0&&(xs=4194304),s}function ts(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function es(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function tl(s,a,u,d,y,b){var C=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var M=s.entanglements,W=s.expirationTimes,rt=s.hiddenUpdates;for(u=C&~u;0<u;){var ft=31-Tn(u),pt=1<<ft;M[ft]=0,W[ft]=-1;var at=rt[ft];if(at!==null)for(rt[ft]=null,ft=0;ft<at.length;ft++){var ot=at[ft];ot!==null&&(ot.lane&=-536870913)}u&=~pt}d!==0&&ns(s,d,0),b!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=b&~(C&~a))}function ns(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var d=31-Tn(a);s.entangledLanes|=a,s.entanglements[d]=s.entanglements[d]|1073741824|u&4194090}function el(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var d=31-Tn(u),y=1<<d;y&a|s[d]&a&&(s[d]|=a),u&=~y}}function Js(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ra(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function tr(){var s=vt.p;return s!==0?s:(s=window.event,s===void 0?32:VT(s.type))}function Ca(s,a){var u=vt.p;try{return vt.p=s,a()}finally{vt.p=u}}var De=Math.random().toString(36).slice(2),tn="__reactFiber$"+De,Xe="__reactProps$"+De,di="__reactContainer$"+De,qn="__reactEvents$"+De,Ot="__reactListeners$"+De,Rs="__reactHandles$"+De,nl="__reactResources$"+De,er="__reactMarker$"+De;function Cs(s){delete s[tn],delete s[Xe],delete s[qn],delete s[Ot],delete s[Rs]}function Mi(s){var a=s[tn];if(a)return a;for(var u=s.parentNode;u;){if(a=u[di]||u[tn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=ET(s);s!==null;){if(u=s[tn])return u;s=ET(s)}return a}s=u,u=s.parentNode}return null}function Oi(s){if(s=s[tn]||s[di]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function Mn(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function En(s){var a=s[nl];return a||(a=s[nl]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ze(s){s[er]=!0}var il=new Set,Ia={};function ki(s,a){is(s,a),is(s+"Capture",a)}function is(s,a){for(Ia[s]=a,s=0;s<a.length;s++)il.add(a[s])}var nu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lr={},Nr={};function iu(s){return Ii.call(Nr,s)?!0:Ii.call(Lr,s)?!1:nu.test(s)?Nr[s]=!0:(Lr[s]=!0,!1)}function nr(s,a,u){if(iu(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function ss(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function pn(s,a,u,d){if(d===null)s.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+d)}}var Is,ir;function rs(s){if(Is===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Is=a&&a[1]||"",ir=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Is+s+ir}var Vr=!1;function as(s,a){if(!s||Vr)return"";Vr=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(ot){var at=ot}Reflect.construct(s,[],pt)}else{try{pt.call()}catch(ot){at=ot}s.call(pt.prototype)}}else{try{throw Error()}catch(ot){at=ot}(pt=s())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(ot){if(ot&&at&&typeof ot.stack=="string")return[ot.stack,at.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),C=b[0],M=b[1];if(C&&M){var W=C.split(`
`),rt=M.split(`
`);for(y=d=0;d<W.length&&!W[d].includes("DetermineComponentFrameRoot");)d++;for(;y<rt.length&&!rt[y].includes("DetermineComponentFrameRoot");)y++;if(d===W.length||y===rt.length)for(d=W.length-1,y=rt.length-1;1<=d&&0<=y&&W[d]!==rt[y];)y--;for(;1<=d&&0<=y;d--,y--)if(W[d]!==rt[y]){if(d!==1||y!==1)do if(d--,y--,0>y||W[d]!==rt[y]){var ft=`
`+W[d].replace(" at new "," at ");return s.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",s.displayName)),ft}while(1<=d&&0<=y);break}}}finally{Vr=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?rs(u):""}function te(s){switch(s.tag){case 26:case 27:case 5:return rs(s.type);case 16:return rs("Lazy");case 13:return rs("Suspense");case 19:return rs("SuspenseList");case 0:case 15:return as(s.type,!1);case 11:return as(s.type.render,!1);case 1:return as(s.type,!0);case 31:return rs("Activity");default:return""}}function _e(s){try{var a="";do a+=te(s),s=s.return;while(s);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function ln(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function os(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function sr(s){var a=os(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),d=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,b=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return y.call(this)},set:function(C){d=""+C,b.call(this,C)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function rr(s){s._valueTracker||(s._valueTracker=sr(s))}function Gt(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),d="";return s&&(d=os(s)?s.checked?"true":"false":s.value),s=d,s!==u?(a.setValue(s),!0):!1}function be(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var sl=/[\n"\\]/g;function Be(s){return s.replace(sl,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Le(s,a,u,d,y,b,C,M){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),a!=null?C==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+ln(a)):s.value!==""+ln(a)&&(s.value=""+ln(a)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),a!=null?Di(s,C,ln(a)):u!=null?Di(s,C,ln(u)):d!=null&&s.removeAttribute("value"),y==null&&b!=null&&(s.defaultChecked=!!b),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+ln(M):s.removeAttribute("name")}function zr(s,a,u,d,y,b,C,M){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),a!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||a!=null))return;u=u!=null?""+ln(u):"",a=a!=null?""+ln(a):u,M||a===s.value||(s.value=a),s.defaultValue=a}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=M?s.checked:!!d,s.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C)}function Di(s,a,u){a==="number"&&be(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function On(s,a,u,d){if(s=s.options,a){a={};for(var y=0;y<u.length;y++)a["$"+u[y]]=!0;for(u=0;u<s.length;u++)y=a.hasOwnProperty("$"+s[u].value),s[u].selected!==y&&(s[u].selected=y),y&&d&&(s[u].defaultSelected=!0)}else{for(u=""+ln(u),a=null,y=0;y<s.length;y++){if(s[y].value===u){s[y].selected=!0,d&&(s[y].defaultSelected=!0);return}a!==null||s[y].disabled||(a=s[y])}a!==null&&(a.selected=!0)}}function jt(s,a,u){if(a!=null&&(a=""+ln(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+ln(u):""}function si(s,a,u,d){if(a==null){if(d!=null){if(u!=null)throw Error(i(92));if(Dt(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),a=u}u=ln(a),s.defaultValue=u,d=s.textContent,d===u&&d!==""&&d!==null&&(s.value=d)}function wn(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Li=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pa(s,a,u){var d=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":d?s.setProperty(a,u):typeof u!="number"||u===0||Li.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function Ps(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var y in a)d=a[y],a.hasOwnProperty(y)&&u[y]!==d&&Pa(s,y,d)}else for(var b in a)a.hasOwnProperty(b)&&Pa(s,b,a[b])}function Br(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ma=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ar(s){return Ma.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Ni=null;function kn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ls=null,Vi=null;function al(s){var a=Oi(s);if(a&&(s=a.stateNode)){var u=s[Xe]||null;t:switch(s=a.stateNode,a.type){case"input":if(Le(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Be(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var d=u[a];if(d!==s&&d.form===s.form){var y=d[Xe]||null;if(!y)throw Error(i(90));Le(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<u.length;a++)d=u[a],d.form===s.form&&Gt(d)}break t;case"textarea":jt(s,u.value,u.defaultValue);break t;case"select":a=u.value,a!=null&&On(s,!!u.multiple,a,!1)}}}var Nt=!1;function ri(s,a,u){if(Nt)return s(a,u);Nt=!0;try{var d=s(a);return d}finally{if(Nt=!1,(ls!==null||Vi!==null)&&(ed(),ls&&(a=ls,s=Vi,Vi=ls=null,al(a),s)))for(a=0;a<s.length;a++)al(s[a])}}function ue(s,a){var u=s.stateNode;if(u===null)return null;var d=u[Xe]||null;if(d===null)return null;u=d[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break t;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(mi)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{Gn=!1}var pi=null,Zn=null,zi=null;function Os(){if(zi)return zi;var s,a=Zn,u=a.length,d,y="value"in pi?pi.value:pi.textContent,b=y.length;for(s=0;s<u&&a[s]===y[s];s++);var C=u-s;for(d=1;d<=C&&a[u-d]===y[b-d];d++);return zi=y.slice(s,1<d?1-d:void 0)}function Re(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Sn(){return!0}function Oa(){return!1}function en(s){function a(u,d,y,b,C){this._reactName=u,this._targetInst=y,this.type=d,this.nativeEvent=b,this.target=C,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(b):b[M]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Sn:Oa,this.isPropagationStopped=Oa,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Sn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Sn)},persist:function(){},isPersistent:Sn}),a}var de={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ur=en(de),ks=v({},de,{view:0,detail:0}),su=en(ks),jr,Kt,us,gn=v({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==us&&(us&&s.type==="mousemove"?(jr=s.screenX-us.screenX,Kt=s.screenY-us.screenY):Kt=jr=0,us=s),jr)},movementY:function(s){return"movementY"in s?s.movementY:Kt}}),An=en(gn),ol=v({},gn,{dataTransfer:0}),pc=en(ol),Ds=v({},ks,{relatedTarget:0}),ka=en(Ds),Da=v({},de,{animationName:0,elapsedTime:0,pseudoElement:0}),La=en(Da),ru=v({},de,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),or=en(ru),gc=v({},de,{data:0}),Wn=en(gc),Hr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ll={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Na(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Bi[s])?!!a[s]:!1}function lr(){return Na}var Va=v({},ks,{key:function(s){if(s.key){var a=Hr[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Re(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ll[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lr,charCode:function(s){return s.type==="keypress"?Re(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Re(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),za=en(Va),ul=v({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ba=en(ul),Ls=v({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lr}),au=en(Ls),Ua=v({},de,{propertyName:0,elapsedTime:0,pseudoElement:0}),ou=en(Ua),cl=v({},gn,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Fr=en(cl),un=v({},de,{newState:0,oldState:0}),cs=en(un),lu=[9,13,27,32],Yn=mi&&"CompositionEvent"in window,g=null;mi&&"documentMode"in document&&(g=document.documentMode);var w=mi&&"TextEvent"in window&&!g,x=mi&&(!Yn||g&&8<g&&11>=g),N=" ",J=!1;function ut(s,a){switch(s){case"keyup":return lu.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var se=!1;function Qe(s,a){switch(s){case"compositionend":return wt(a);case"keypress":return a.which!==32?null:(J=!0,N);case"textInput":return s=a.data,s===N&&J?null:s;default:return null}}function re(s,a){if(se)return s==="compositionend"||!Yn&&ut(s,a)?(s=Os(),zi=Zn=pi=null,se=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return x&&a.locale!=="ko"?null:a.data;default:return null}}var ye={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ne(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!ye[s.type]:a==="textarea"}function Ns(s,a,u,d){ls?Vi?Vi.push(d):Vi=[d]:ls=d,a=od(a,"onChange"),0<a.length&&(u=new Ur("onChange","change",null,u,d),s.push({event:u,listeners:a}))}var Me=null,hs=null;function fs(s){fT(s,0)}function uu(s){var a=Mn(s);if(Gt(a))return s}function ja(s,a){if(s==="change")return a}var _c=!1;if(mi){var Ha;if(mi){var yc="oninput"in document;if(!yc){var Vs=document.createElement("div");Vs.setAttribute("oninput","return;"),yc=typeof Vs.oninput=="function"}Ha=yc}else Ha=!1;_c=Ha&&(!document.documentMode||9<document.documentMode)}function hl(){Me&&(Me.detachEvent("onpropertychange",bf),hs=Me=null)}function bf(s){if(s.propertyName==="value"&&uu(hs)){var a=[];Ns(a,hs,s,kn(s)),ri(fs,a)}}function vc(s,a,u){s==="focusin"?(hl(),Me=a,hs=u,Me.attachEvent("onpropertychange",bf)):s==="focusout"&&hl()}function Sp(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return uu(hs)}function zs(s,a){if(s==="click")return uu(a)}function Ap(s,a){if(s==="input"||s==="change")return uu(a)}function Fa(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var ai=typeof Object.is=="function"?Object.is:Fa;function oi(s,a){if(ai(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),d=Object.keys(a);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var y=u[d];if(!Ii.call(a,y)||!ai(s[y],a[y]))return!1}return!0}function fl(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function bc(s,a){var u=fl(s);s=0;for(var d;u;){if(u.nodeType===3){if(d=s+u.textContent.length,s<=a&&d>=a)return{node:u,offset:a-s};s=d}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=fl(u)}}function cu(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?cu(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function dl(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=be(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=be(s.document)}return a}function ml(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var hu=mi&&"documentMode"in document&&11>=document.documentMode,Ui=null,qa=null,qr=null,fu=!1;function Tf(s,a,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;fu||Ui==null||Ui!==be(d)||(d=Ui,"selectionStart"in d&&ml(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),qr&&oi(qr,d)||(qr=d,d=od(qa,"onSelect"),0<d.length&&(a=new Ur("onSelect","select",null,a,u),s.push({event:a,listeners:d}),a.target=Ui)))}function ds(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var Ga={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionrun:ds("Transition","TransitionRun"),transitionstart:ds("Transition","TransitionStart"),transitioncancel:ds("Transition","TransitionCancel"),transitionend:ds("Transition","TransitionEnd")},du={},Ef={};mi&&(Ef=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function ur(s){if(du[s])return du[s];if(!Ga[s])return s;var a=Ga[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in Ef)return du[s]=a[u];return s}var wf=ur("animationend"),ji=ur("animationiteration"),pl=ur("animationstart"),xp=ur("transitionrun"),mu=ur("transitionstart"),Rp=ur("transitioncancel"),Tc=ur("transitionend"),Sf=new Map,Gr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gr.push("scrollEnd");function Hi(s,a){Sf.set(s,a),ki(a,[s])}var Zr=new WeakMap;function li(s,a){if(typeof s=="object"&&s!==null){var u=Zr.get(s);return u!==void 0?u:(a={value:s,source:a,stack:_e(a)},Zr.set(s,a),a)}return{value:s,source:a,stack:_e(a)}}var ui=[],Za=0,Fi=0;function gl(){for(var s=Za,a=Fi=Za=0;a<s;){var u=ui[a];ui[a++]=null;var d=ui[a];ui[a++]=null;var y=ui[a];ui[a++]=null;var b=ui[a];if(ui[a++]=null,d!==null&&y!==null){var C=d.pending;C===null?y.next=y:(y.next=C.next,C.next=y),d.pending=y}b!==0&&yl(u,y,b)}}function _l(s,a,u,d){ui[Za++]=s,ui[Za++]=a,ui[Za++]=u,ui[Za++]=d,Fi|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Wr(s,a,u,d){return _l(s,a,u,d),cr(s)}function Wa(s,a){return _l(s,null,null,a),cr(s)}function yl(s,a,u){s.lanes|=u;var d=s.alternate;d!==null&&(d.lanes|=u);for(var y=!1,b=s.return;b!==null;)b.childLanes|=u,d=b.alternate,d!==null&&(d.childLanes|=u),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(y=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,y&&a!==null&&(y=31-Tn(u),s=b.hiddenUpdates,d=s[y],d===null?s[y]=[a]:d.push(a),a.lane=u|536870912),b):null}function cr(s){if(50<qc)throw qc=0,Sg=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Yr={};function Af(s,a,u,d){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(s,a,u,d){return new Af(s,a,u,d)}function pu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ms(s,a){var u=s.alternate;return u===null?(u=ci(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function Ec(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function vl(s,a,u,d,y,b){var C=0;if(d=s,typeof s=="function")pu(s)&&(C=1);else if(typeof s=="string")C=pI(s,u,St.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case z:return s=ci(31,u,a,y),s.elementType=z,s.lanes=b,s;case P:return hr(u.children,y,b,a);case k:C=8,y|=24;break;case D:return s=ci(12,u,a,y|2),s.elementType=D,s.lanes=b,s;case Q:return s=ci(13,u,a,y),s.elementType=Q,s.lanes=b,s;case ht:return s=ci(19,u,a,y),s.elementType=ht,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case U:case Y:C=10;break t;case q:C=9;break t;case st:C=11;break t;case V:C=14;break t;case O:C=16,d=null;break t}C=29,u=Error(i(130,s===null?"null":typeof s,"")),d=null}return a=ci(C,u,a,y),a.elementType=s,a.type=d,a.lanes=b,a}function hr(s,a,u,d){return s=ci(7,s,d,a),s.lanes=u,s}function wc(s,a,u){return s=ci(6,s,null,a),s.lanes=u,s}function gu(s,a,u){return a=ci(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Kr=[],Ya=0,o=null,h=0,_=[],T=0,A=null,I=1,Z="";function tt(s,a){Kr[Ya++]=h,Kr[Ya++]=o,o=s,h=a}function lt(s,a,u){_[T++]=I,_[T++]=Z,_[T++]=A,A=s;var d=I;s=Z;var y=32-Tn(d)-1;d&=~(1<<y),u+=1;var b=32-Tn(a)+y;if(30<b){var C=y-y%5;b=(d&(1<<C)-1).toString(32),d>>=C,y-=C,I=1<<32-Tn(a)+y|u<<y|d,Z=b+s}else I=1<<b|u<<y|d,Z=s}function bt(s){s.return!==null&&(tt(s,1),lt(s,1,0))}function At(s){for(;s===o;)o=Kr[--Ya],Kr[Ya]=null,h=Kr[--Ya],Kr[Ya]=null;for(;s===A;)A=_[--T],_[T]=null,Z=_[--T],_[T]=null,I=_[--T],_[T]=null}var It=null,Mt=null,qt=!1,Ve=null,We=!1,xn=Error(i(519));function gi(s){var a=Error(i(418,""));throw $a(li(a,s)),xn}function xf(s){var a=s.stateNode,u=s.type,d=s.memoizedProps;switch(a[tn]=s,a[Xe]=d,u){case"dialog":ie("cancel",a),ie("close",a);break;case"iframe":case"object":case"embed":ie("load",a);break;case"video":case"audio":for(u=0;u<Zc.length;u++)ie(Zc[u],a);break;case"source":ie("error",a);break;case"img":case"image":case"link":ie("error",a),ie("load",a);break;case"details":ie("toggle",a);break;case"input":ie("invalid",a),zr(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),rr(a);break;case"select":ie("invalid",a);break;case"textarea":ie("invalid",a),si(a,d.value,d.defaultValue,d.children),rr(a)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||d.suppressHydrationWarning===!0||gT(a.textContent,u)?(d.popover!=null&&(ie("beforetoggle",a),ie("toggle",a)),d.onScroll!=null&&ie("scroll",a),d.onScrollEnd!=null&&ie("scrollend",a),d.onClick!=null&&(a.onclick=ld),a=!0):a=!1,a||gi(s)}function Rf(s){for(It=s.return;It;)switch(It.tag){case 5:case 13:We=!1;return;case 27:case 3:We=!0;return;default:It=It.return}}function bl(s){if(s!==It)return!1;if(!qt)return Rf(s),qt=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Ug(s.type,s.memoizedProps)),u=!u),u&&Mt&&gi(s),Rf(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(a===0){Mt=Hs(s.nextSibling);break t}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;s=s.nextSibling}Mt=null}}else a===27?(a=Mt,ho(s.type)?(s=qg,qg=null,Mt=s):Mt=a):Mt=It?Hs(s.stateNode.nextSibling):null;return!0}function Ka(){Mt=It=null,qt=!1}function Cf(){var s=Ve;return s!==null&&(vi===null?vi=s:vi.push.apply(vi,s),Ve=null),s}function $a(s){Ve===null?Ve=[s]:Ve.push(s)}var Fe=ct(null),ps=null,Bs=null;function fr(s,a,u){yt(Fe,a._currentValue),a._currentValue=u}function Us(s){s._currentValue=Fe.current,Tt(Fe)}function Tl(s,a,u){for(;s!==null;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===u)break;s=s.return}}function _u(s,a,u,d){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var b=y.dependencies;if(b!==null){var C=y.child;b=b.firstContext;t:for(;b!==null;){var M=b;b=y;for(var W=0;W<a.length;W++)if(M.context===a[W]){b.lanes|=u,M=b.alternate,M!==null&&(M.lanes|=u),Tl(b.return,u,s),d||(C=null);break t}b=M.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=u,b=C.alternate,b!==null&&(b.lanes|=u),Tl(C,u,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function El(s,a,u,d){s=null;for(var y=a,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var M=y.type;ai(y.pendingProps.value,C.value)||(s!==null?s.push(M):s=[M])}}else if(y===xe.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Qc):s=[Qc])}y=y.return}s!==null&&_u(a,s,u,d),a.flags|=262144}function If(s){for(s=s.firstContext;s!==null;){if(!ai(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function wl(s){ps=s,Bs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Kn(s){return n0(ps,s)}function Pf(s,a){return ps===null&&wl(s),n0(s,a)}function n0(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Bs===null){if(s===null)throw Error(i(308));Bs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Bs=Bs.next=a;return u}var mC=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,d){s.push(d)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},pC=n.unstable_scheduleCallback,gC=n.unstable_NormalPriority,_n={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cp(){return{controller:new mC,data:new Map,refCount:0}}function Sc(s){s.refCount--,s.refCount===0&&pC(gC,function(){s.controller.abort()})}var Ac=null,Ip=0,yu=0,vu=null;function _C(s,a){if(Ac===null){var u=Ac=[];Ip=0,yu=Mg(),vu={status:"pending",value:void 0,then:function(d){u.push(d)}}}return Ip++,a.then(i0,i0),a}function i0(){if(--Ip===0&&Ac!==null){vu!==null&&(vu.status="fulfilled");var s=Ac;Ac=null,yu=0,vu=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function yC(s,a){var u=[],d={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return s.then(function(){d.status="fulfilled",d.value=a;for(var y=0;y<u.length;y++)(0,u[y])(a)},function(y){for(d.status="rejected",d.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),d}var s0=et.S;et.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&_C(s,a),s0!==null&&s0(s,a)};var Sl=ct(null);function Pp(){var s=Sl.current;return s!==null?s:ze.pooledCache}function Mf(s,a){a===null?yt(Sl,Sl.current):yt(Sl,a.pool)}function r0(){var s=Pp();return s===null?null:{parent:_n._currentValue,pool:s}}var xc=Error(i(460)),a0=Error(i(474)),Of=Error(i(542)),Mp={then:function(){}};function o0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function kf(){}function l0(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(kf,kf),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,c0(s),s;default:if(typeof a.status=="string")a.then(kf,kf);else{if(s=ze,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(d){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=d}},function(d){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,c0(s),s}throw Rc=a,xc}}var Rc=null;function u0(){if(Rc===null)throw Error(i(459));var s=Rc;return Rc=null,s}function c0(s){if(s===xc||s===Of)throw Error(i(483))}var Xa=!1;function Op(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kp(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Qa(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ja(s,a,u){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Te&2)!==0){var y=d.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),d.pending=a,a=cr(s),yl(s,null,u),a}return _l(s,d,a,u),cr(s)}function Cc(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var d=a.lanes;d&=s.pendingLanes,u|=d,a.lanes=u,el(s,u)}}function Dp(s,a){var u=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var y=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?y=b=C:b=b.next=C,u=u.next}while(u!==null);b===null?y=b=a:b=b.next=a}else y=b=a;u={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var Lp=!1;function Ic(){if(Lp){var s=vu;if(s!==null)throw s}}function Pc(s,a,u,d){Lp=!1;var y=s.updateQueue;Xa=!1;var b=y.firstBaseUpdate,C=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var W=M,rt=W.next;W.next=null,C===null?b=rt:C.next=rt,C=W;var ft=s.alternate;ft!==null&&(ft=ft.updateQueue,M=ft.lastBaseUpdate,M!==C&&(M===null?ft.firstBaseUpdate=rt:M.next=rt,ft.lastBaseUpdate=W))}if(b!==null){var pt=y.baseState;C=0,ft=rt=W=null,M=b;do{var at=M.lane&-536870913,ot=at!==M.lane;if(ot?(ce&at)===at:(d&at)===at){at!==0&&at===yu&&(Lp=!0),ft!==null&&(ft=ft.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var Ft=s,zt=M;at=a;var Pe=u;switch(zt.tag){case 1:if(Ft=zt.payload,typeof Ft=="function"){pt=Ft.call(Pe,pt,at);break t}pt=Ft;break t;case 3:Ft.flags=Ft.flags&-65537|128;case 0:if(Ft=zt.payload,at=typeof Ft=="function"?Ft.call(Pe,pt,at):Ft,at==null)break t;pt=v({},pt,at);break t;case 2:Xa=!0}}at=M.callback,at!==null&&(s.flags|=64,ot&&(s.flags|=8192),ot=y.callbacks,ot===null?y.callbacks=[at]:ot.push(at))}else ot={lane:at,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ft===null?(rt=ft=ot,W=pt):ft=ft.next=ot,C|=at;if(M=M.next,M===null){if(M=y.shared.pending,M===null)break;ot=M,M=ot.next,ot.next=null,y.lastBaseUpdate=ot,y.shared.pending=null}}while(!0);ft===null&&(W=pt),y.baseState=W,y.firstBaseUpdate=rt,y.lastBaseUpdate=ft,b===null&&(y.shared.lanes=0),oo|=C,s.lanes=C,s.memoizedState=pt}}function h0(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function f0(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)h0(u[s],a)}var bu=ct(null),Df=ct(0);function d0(s,a){s=na,yt(Df,s),yt(bu,a),na=s|a.baseLanes}function Np(){yt(Df,na),yt(bu,bu.current)}function Vp(){na=Df.current,Tt(bu),Tt(Df)}var to=0,Qt=null,Ce=null,cn=null,Lf=!1,Tu=!1,Al=!1,Nf=0,Mc=0,Eu=null,vC=0;function nn(){throw Error(i(321))}function zp(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!ai(s[u],a[u]))return!1;return!0}function Bp(s,a,u,d,y,b){return to=b,Qt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,et.H=s===null||s.memoizedState===null?$0:X0,Al=!1,b=u(d,y),Al=!1,Tu&&(b=p0(a,u,d,y)),m0(s),b}function m0(s){et.H=Hf;var a=Ce!==null&&Ce.next!==null;if(to=0,cn=Ce=Qt=null,Lf=!1,Mc=0,Eu=null,a)throw Error(i(300));s===null||Rn||(s=s.dependencies,s!==null&&If(s)&&(Rn=!0))}function p0(s,a,u,d){Qt=s;var y=0;do{if(Tu&&(Eu=null),Mc=0,Tu=!1,25<=y)throw Error(i(301));if(y+=1,cn=Ce=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}et.H=xC,b=a(u,d)}while(Tu);return b}function bC(){var s=et.H,a=s.useState()[0];return a=typeof a.then=="function"?Oc(a):a,s=s.useState()[0],(Ce!==null?Ce.memoizedState:null)!==s&&(Qt.flags|=1024),a}function Up(){var s=Nf!==0;return Nf=0,s}function jp(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function Hp(s){if(Lf){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Lf=!1}to=0,cn=Ce=Qt=null,Tu=!1,Mc=Nf=0,Eu=null}function _i(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Qt.memoizedState=cn=s:cn=cn.next=s,cn}function hn(){if(Ce===null){var s=Qt.alternate;s=s!==null?s.memoizedState:null}else s=Ce.next;var a=cn===null?Qt.memoizedState:cn.next;if(a!==null)cn=a,Ce=s;else{if(s===null)throw Qt.alternate===null?Error(i(467)):Error(i(310));Ce=s,s={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},cn===null?Qt.memoizedState=cn=s:cn=cn.next=s}return cn}function Fp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oc(s){var a=Mc;return Mc+=1,Eu===null&&(Eu=[]),s=l0(Eu,s,a),a=Qt,(cn===null?a.memoizedState:cn.next)===null&&(a=a.alternate,et.H=a===null||a.memoizedState===null?$0:X0),s}function Vf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Oc(s);if(s.$$typeof===Y)return Kn(s)}throw Error(i(438,String(s)))}function qp(s){var a=null,u=Qt.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var d=Qt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Fp(),Qt.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),d=0;d<s;d++)u[d]=B;return a.index++,u}function $r(s,a){return typeof a=="function"?a(s):a}function zf(s){var a=hn();return Gp(a,Ce,s)}function Gp(s,a,u){var d=s.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var y=s.baseQueue,b=d.pending;if(b!==null){if(y!==null){var C=y.next;y.next=b.next,b.next=C}a.baseQueue=y=b,d.pending=null}if(b=s.baseState,y===null)s.memoizedState=b;else{a=y.next;var M=C=null,W=null,rt=a,ft=!1;do{var pt=rt.lane&-536870913;if(pt!==rt.lane?(ce&pt)===pt:(to&pt)===pt){var at=rt.revertLane;if(at===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),pt===yu&&(ft=!0);else if((to&at)===at){rt=rt.next,at===yu&&(ft=!0);continue}else pt={lane:0,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},W===null?(M=W=pt,C=b):W=W.next=pt,Qt.lanes|=at,oo|=at;pt=rt.action,Al&&u(b,pt),b=rt.hasEagerState?rt.eagerState:u(b,pt)}else at={lane:pt,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},W===null?(M=W=at,C=b):W=W.next=at,Qt.lanes|=pt,oo|=pt;rt=rt.next}while(rt!==null&&rt!==a);if(W===null?C=b:W.next=M,!ai(b,s.memoizedState)&&(Rn=!0,ft&&(u=vu,u!==null)))throw u;s.memoizedState=b,s.baseState=C,s.baseQueue=W,d.lastRenderedState=b}return y===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function Zp(s){var a=hn(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var d=u.dispatch,y=u.pending,b=a.memoizedState;if(y!==null){u.pending=null;var C=y=y.next;do b=s(b,C.action),C=C.next;while(C!==y);ai(b,a.memoizedState)||(Rn=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),u.lastRenderedState=b}return[b,d]}function g0(s,a,u){var d=Qt,y=hn(),b=qt;if(b){if(u===void 0)throw Error(i(407));u=u()}else u=a();var C=!ai((Ce||y).memoizedState,u);C&&(y.memoizedState=u,Rn=!0),y=y.queue;var M=v0.bind(null,d,y,s);if(kc(2048,8,M,[s]),y.getSnapshot!==a||C||cn!==null&&cn.memoizedState.tag&1){if(d.flags|=2048,wu(9,Bf(),y0.bind(null,d,y,u,a),null),ze===null)throw Error(i(349));b||(to&124)!==0||_0(d,a,u)}return u}function _0(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Qt.updateQueue,a===null?(a=Fp(),Qt.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function y0(s,a,u,d){a.value=u,a.getSnapshot=d,b0(a)&&T0(s)}function v0(s,a,u){return u(function(){b0(a)&&T0(s)})}function b0(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!ai(s,u)}catch{return!0}}function T0(s){var a=Wa(s,2);a!==null&&Yi(a,s,2)}function Wp(s){var a=_i();if(typeof s=="function"){var u=s;if(s=u(),Al){Fn(!0);try{u()}finally{Fn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:s},a}function E0(s,a,u,d){return s.baseState=u,Gp(s,Ce,typeof d=="function"?d:$r)}function TC(s,a,u,d,y){if(jf(s))throw Error(i(485));if(s=a.action,s!==null){var b={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){b.listeners.push(C)}};et.T!==null?u(!0):b.isTransition=!1,d(b),u=a.pending,u===null?(b.next=a.pending=b,w0(a,b)):(b.next=u.next,a.pending=u.next=b)}}function w0(s,a){var u=a.action,d=a.payload,y=s.state;if(a.isTransition){var b=et.T,C={};et.T=C;try{var M=u(y,d),W=et.S;W!==null&&W(C,M),S0(s,a,M)}catch(rt){Yp(s,a,rt)}finally{et.T=b}}else try{b=u(y,d),S0(s,a,b)}catch(rt){Yp(s,a,rt)}}function S0(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){A0(s,a,d)},function(d){return Yp(s,a,d)}):A0(s,a,u)}function A0(s,a,u){a.status="fulfilled",a.value=u,x0(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,w0(s,u)))}function Yp(s,a,u){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=u,x0(a),a=a.next;while(a!==d)}s.action=null}function x0(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function R0(s,a){return a}function C0(s,a){if(qt){var u=ze.formState;if(u!==null){t:{var d=Qt;if(qt){if(Mt){e:{for(var y=Mt,b=We;y.nodeType!==8;){if(!b){y=null;break e}if(y=Hs(y.nextSibling),y===null){y=null;break e}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){Mt=Hs(y.nextSibling),d=y.data==="F!";break t}}gi(d)}d=!1}d&&(a=u[0])}}return u=_i(),u.memoizedState=u.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:R0,lastRenderedState:a},u.queue=d,u=W0.bind(null,Qt,d),d.dispatch=u,d=Wp(!1),b=Jp.bind(null,Qt,!1,d.queue),d=_i(),y={state:a,dispatch:null,action:s,pending:null},d.queue=y,u=TC.bind(null,Qt,y,b,u),y.dispatch=u,d.memoizedState=s,[a,u,!1]}function I0(s){var a=hn();return P0(a,Ce,s)}function P0(s,a,u){if(a=Gp(s,a,R0)[0],s=zf($r)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=Oc(a)}catch(C){throw C===xc?Of:C}else d=a;a=hn();var y=a.queue,b=y.dispatch;return u!==a.memoizedState&&(Qt.flags|=2048,wu(9,Bf(),EC.bind(null,y,u),null)),[d,b,s]}function EC(s,a){s.action=a}function M0(s){var a=hn(),u=Ce;if(u!==null)return P0(a,u,s);hn(),a=a.memoizedState,u=hn();var d=u.queue.dispatch;return u.memoizedState=s,[a,d,!1]}function wu(s,a,u,d){return s={tag:s,create:u,deps:d,inst:a,next:null},a=Qt.updateQueue,a===null&&(a=Fp(),Qt.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(d=u.next,u.next=s,s.next=d,a.lastEffect=s),s}function Bf(){return{destroy:void 0,resource:void 0}}function O0(){return hn().memoizedState}function Uf(s,a,u,d){var y=_i();d=d===void 0?null:d,Qt.flags|=s,y.memoizedState=wu(1|a,Bf(),u,d)}function kc(s,a,u,d){var y=hn();d=d===void 0?null:d;var b=y.memoizedState.inst;Ce!==null&&d!==null&&zp(d,Ce.memoizedState.deps)?y.memoizedState=wu(a,b,u,d):(Qt.flags|=s,y.memoizedState=wu(1|a,b,u,d))}function k0(s,a){Uf(8390656,8,s,a)}function D0(s,a){kc(2048,8,s,a)}function L0(s,a){return kc(4,2,s,a)}function N0(s,a){return kc(4,4,s,a)}function V0(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function z0(s,a,u){u=u!=null?u.concat([s]):null,kc(4,4,V0.bind(null,a,s),u)}function Kp(){}function B0(s,a){var u=hn();a=a===void 0?null:a;var d=u.memoizedState;return a!==null&&zp(a,d[1])?d[0]:(u.memoizedState=[s,a],s)}function U0(s,a){var u=hn();a=a===void 0?null:a;var d=u.memoizedState;if(a!==null&&zp(a,d[1]))return d[0];if(d=s(),Al){Fn(!0);try{s()}finally{Fn(!1)}}return u.memoizedState=[d,a],d}function $p(s,a,u){return u===void 0||(to&1073741824)!==0?s.memoizedState=a:(s.memoizedState=u,s=Fb(),Qt.lanes|=s,oo|=s,u)}function j0(s,a,u,d){return ai(u,a)?u:bu.current!==null?(s=$p(s,u,d),ai(s,a)||(Rn=!0),s):(to&42)===0?(Rn=!0,s.memoizedState=u):(s=Fb(),Qt.lanes|=s,oo|=s,a)}function H0(s,a,u,d,y){var b=vt.p;vt.p=b!==0&&8>b?b:8;var C=et.T,M={};et.T=M,Jp(s,!1,a,u);try{var W=y(),rt=et.S;if(rt!==null&&rt(M,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ft=yC(W,d);Dc(s,a,ft,Wi(s))}else Dc(s,a,d,Wi(s))}catch(pt){Dc(s,a,{then:function(){},status:"rejected",reason:pt},Wi())}finally{vt.p=b,et.T=C}}function wC(){}function Xp(s,a,u,d){if(s.tag!==5)throw Error(i(476));var y=F0(s).queue;H0(s,y,a,mt,u===null?wC:function(){return q0(s),u(d)})}function F0(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:mt,baseState:mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:mt},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function q0(s){var a=F0(s).next.queue;Dc(s,a,{},Wi())}function Qp(){return Kn(Qc)}function G0(){return hn().memoizedState}function Z0(){return hn().memoizedState}function SC(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Wi();s=Qa(u);var d=Ja(a,s,u);d!==null&&(Yi(d,a,u),Cc(d,a,u)),a={cache:Cp()},s.payload=a;return}a=a.return}}function AC(s,a,u){var d=Wi();u={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},jf(s)?Y0(a,u):(u=Wr(s,a,u,d),u!==null&&(Yi(u,s,d),K0(u,a,d)))}function W0(s,a,u){var d=Wi();Dc(s,a,u,d)}function Dc(s,a,u,d){var y={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(jf(s))Y0(a,y);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var C=a.lastRenderedState,M=b(C,u);if(y.hasEagerState=!0,y.eagerState=M,ai(M,C))return _l(s,a,y,0),ze===null&&gl(),!1}catch{}finally{}if(u=Wr(s,a,y,d),u!==null)return Yi(u,s,d),K0(u,a,d),!0}return!1}function Jp(s,a,u,d){if(d={lane:2,revertLane:Mg(),action:d,hasEagerState:!1,eagerState:null,next:null},jf(s)){if(a)throw Error(i(479))}else a=Wr(s,u,d,2),a!==null&&Yi(a,s,2)}function jf(s){var a=s.alternate;return s===Qt||a!==null&&a===Qt}function Y0(s,a){Tu=Lf=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function K0(s,a,u){if((u&4194048)!==0){var d=a.lanes;d&=s.pendingLanes,u|=d,a.lanes=u,el(s,u)}}var Hf={readContext:Kn,use:Vf,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn},$0={readContext:Kn,use:Vf,useCallback:function(s,a){return _i().memoizedState=[s,a===void 0?null:a],s},useContext:Kn,useEffect:k0,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,Uf(4194308,4,V0.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Uf(4194308,4,s,a)},useInsertionEffect:function(s,a){Uf(4,2,s,a)},useMemo:function(s,a){var u=_i();a=a===void 0?null:a;var d=s();if(Al){Fn(!0);try{s()}finally{Fn(!1)}}return u.memoizedState=[d,a],d},useReducer:function(s,a,u){var d=_i();if(u!==void 0){var y=u(a);if(Al){Fn(!0);try{u(a)}finally{Fn(!1)}}}else y=a;return d.memoizedState=d.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},d.queue=s,s=s.dispatch=AC.bind(null,Qt,s),[d.memoizedState,s]},useRef:function(s){var a=_i();return s={current:s},a.memoizedState=s},useState:function(s){s=Wp(s);var a=s.queue,u=W0.bind(null,Qt,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:Kp,useDeferredValue:function(s,a){var u=_i();return $p(u,s,a)},useTransition:function(){var s=Wp(!1);return s=H0.bind(null,Qt,s.queue,!0,!1),_i().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var d=Qt,y=_i();if(qt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),ze===null)throw Error(i(349));(ce&124)!==0||_0(d,a,u)}y.memoizedState=u;var b={value:u,getSnapshot:a};return y.queue=b,k0(v0.bind(null,d,b,s),[s]),d.flags|=2048,wu(9,Bf(),y0.bind(null,d,b,u,a),null),u},useId:function(){var s=_i(),a=ze.identifierPrefix;if(qt){var u=Z,d=I;u=(d&~(1<<32-Tn(d)-1)).toString(32)+u,a="«"+a+"R"+u,u=Nf++,0<u&&(a+="H"+u.toString(32)),a+="»"}else u=vC++,a="«"+a+"r"+u.toString(32)+"»";return s.memoizedState=a},useHostTransitionStatus:Qp,useFormState:C0,useActionState:C0,useOptimistic:function(s){var a=_i();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Jp.bind(null,Qt,!0,u),u.dispatch=a,[s,a]},useMemoCache:qp,useCacheRefresh:function(){return _i().memoizedState=SC.bind(null,Qt)}},X0={readContext:Kn,use:Vf,useCallback:B0,useContext:Kn,useEffect:D0,useImperativeHandle:z0,useInsertionEffect:L0,useLayoutEffect:N0,useMemo:U0,useReducer:zf,useRef:O0,useState:function(){return zf($r)},useDebugValue:Kp,useDeferredValue:function(s,a){var u=hn();return j0(u,Ce.memoizedState,s,a)},useTransition:function(){var s=zf($r)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:Oc(s),a]},useSyncExternalStore:g0,useId:G0,useHostTransitionStatus:Qp,useFormState:I0,useActionState:I0,useOptimistic:function(s,a){var u=hn();return E0(u,Ce,s,a)},useMemoCache:qp,useCacheRefresh:Z0},xC={readContext:Kn,use:Vf,useCallback:B0,useContext:Kn,useEffect:D0,useImperativeHandle:z0,useInsertionEffect:L0,useLayoutEffect:N0,useMemo:U0,useReducer:Zp,useRef:O0,useState:function(){return Zp($r)},useDebugValue:Kp,useDeferredValue:function(s,a){var u=hn();return Ce===null?$p(u,s,a):j0(u,Ce.memoizedState,s,a)},useTransition:function(){var s=Zp($r)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:Oc(s),a]},useSyncExternalStore:g0,useId:G0,useHostTransitionStatus:Qp,useFormState:M0,useActionState:M0,useOptimistic:function(s,a){var u=hn();return Ce!==null?E0(u,Ce,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:qp,useCacheRefresh:Z0},Su=null,Lc=0;function Ff(s){var a=Lc;return Lc+=1,Su===null&&(Su=[]),l0(Su,s,a)}function Nc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function qf(s,a){throw a.$$typeof===E?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Q0(s){var a=s._init;return a(s._payload)}function J0(s){function a(X,$){if(s){var nt=X.deletions;nt===null?(X.deletions=[$],X.flags|=16):nt.push($)}}function u(X,$){if(!s)return null;for(;$!==null;)a(X,$),$=$.sibling;return null}function d(X){for(var $=new Map;X!==null;)X.key!==null?$.set(X.key,X):$.set(X.index,X),X=X.sibling;return $}function y(X,$){return X=ms(X,$),X.index=0,X.sibling=null,X}function b(X,$,nt){return X.index=nt,s?(nt=X.alternate,nt!==null?(nt=nt.index,nt<$?(X.flags|=67108866,$):nt):(X.flags|=67108866,$)):(X.flags|=1048576,$)}function C(X){return s&&X.alternate===null&&(X.flags|=67108866),X}function M(X,$,nt,dt){return $===null||$.tag!==6?($=wc(nt,X.mode,dt),$.return=X,$):($=y($,nt),$.return=X,$)}function W(X,$,nt,dt){var Pt=nt.type;return Pt===P?ft(X,$,nt.props.children,dt,nt.key):$!==null&&($.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===O&&Q0(Pt)===$.type)?($=y($,nt.props),Nc($,nt),$.return=X,$):($=vl(nt.type,nt.key,nt.props,null,X.mode,dt),Nc($,nt),$.return=X,$)}function rt(X,$,nt,dt){return $===null||$.tag!==4||$.stateNode.containerInfo!==nt.containerInfo||$.stateNode.implementation!==nt.implementation?($=gu(nt,X.mode,dt),$.return=X,$):($=y($,nt.children||[]),$.return=X,$)}function ft(X,$,nt,dt,Pt){return $===null||$.tag!==7?($=hr(nt,X.mode,dt,Pt),$.return=X,$):($=y($,nt),$.return=X,$)}function pt(X,$,nt){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=wc(""+$,X.mode,nt),$.return=X,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return nt=vl($.type,$.key,$.props,null,X.mode,nt),Nc(nt,$),nt.return=X,nt;case R:return $=gu($,X.mode,nt),$.return=X,$;case O:var dt=$._init;return $=dt($._payload),pt(X,$,nt)}if(Dt($)||G($))return $=hr($,X.mode,nt,null),$.return=X,$;if(typeof $.then=="function")return pt(X,Ff($),nt);if($.$$typeof===Y)return pt(X,Pf(X,$),nt);qf(X,$)}return null}function at(X,$,nt,dt){var Pt=$!==null?$.key:null;if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return Pt!==null?null:M(X,$,""+nt,dt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case S:return nt.key===Pt?W(X,$,nt,dt):null;case R:return nt.key===Pt?rt(X,$,nt,dt):null;case O:return Pt=nt._init,nt=Pt(nt._payload),at(X,$,nt,dt)}if(Dt(nt)||G(nt))return Pt!==null?null:ft(X,$,nt,dt,null);if(typeof nt.then=="function")return at(X,$,Ff(nt),dt);if(nt.$$typeof===Y)return at(X,$,Pf(X,nt),dt);qf(X,nt)}return null}function ot(X,$,nt,dt,Pt){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return X=X.get(nt)||null,M($,X,""+dt,Pt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case S:return X=X.get(dt.key===null?nt:dt.key)||null,W($,X,dt,Pt);case R:return X=X.get(dt.key===null?nt:dt.key)||null,rt($,X,dt,Pt);case O:var ee=dt._init;return dt=ee(dt._payload),ot(X,$,nt,dt,Pt)}if(Dt(dt)||G(dt))return X=X.get(nt)||null,ft($,X,dt,Pt,null);if(typeof dt.then=="function")return ot(X,$,nt,Ff(dt),Pt);if(dt.$$typeof===Y)return ot(X,$,nt,Pf($,dt),Pt);qf($,dt)}return null}function Ft(X,$,nt,dt){for(var Pt=null,ee=null,kt=$,Bt=$=0,In=null;kt!==null&&Bt<nt.length;Bt++){kt.index>Bt?(In=kt,kt=null):In=kt.sibling;var me=at(X,kt,nt[Bt],dt);if(me===null){kt===null&&(kt=In);break}s&&kt&&me.alternate===null&&a(X,kt),$=b(me,$,Bt),ee===null?Pt=me:ee.sibling=me,ee=me,kt=In}if(Bt===nt.length)return u(X,kt),qt&&tt(X,Bt),Pt;if(kt===null){for(;Bt<nt.length;Bt++)kt=pt(X,nt[Bt],dt),kt!==null&&($=b(kt,$,Bt),ee===null?Pt=kt:ee.sibling=kt,ee=kt);return qt&&tt(X,Bt),Pt}for(kt=d(kt);Bt<nt.length;Bt++)In=ot(kt,X,Bt,nt[Bt],dt),In!==null&&(s&&In.alternate!==null&&kt.delete(In.key===null?Bt:In.key),$=b(In,$,Bt),ee===null?Pt=In:ee.sibling=In,ee=In);return s&&kt.forEach(function(_o){return a(X,_o)}),qt&&tt(X,Bt),Pt}function zt(X,$,nt,dt){if(nt==null)throw Error(i(151));for(var Pt=null,ee=null,kt=$,Bt=$=0,In=null,me=nt.next();kt!==null&&!me.done;Bt++,me=nt.next()){kt.index>Bt?(In=kt,kt=null):In=kt.sibling;var _o=at(X,kt,me.value,dt);if(_o===null){kt===null&&(kt=In);break}s&&kt&&_o.alternate===null&&a(X,kt),$=b(_o,$,Bt),ee===null?Pt=_o:ee.sibling=_o,ee=_o,kt=In}if(me.done)return u(X,kt),qt&&tt(X,Bt),Pt;if(kt===null){for(;!me.done;Bt++,me=nt.next())me=pt(X,me.value,dt),me!==null&&($=b(me,$,Bt),ee===null?Pt=me:ee.sibling=me,ee=me);return qt&&tt(X,Bt),Pt}for(kt=d(kt);!me.done;Bt++,me=nt.next())me=ot(kt,X,Bt,me.value,dt),me!==null&&(s&&me.alternate!==null&&kt.delete(me.key===null?Bt:me.key),$=b(me,$,Bt),ee===null?Pt=me:ee.sibling=me,ee=me);return s&&kt.forEach(function(RI){return a(X,RI)}),qt&&tt(X,Bt),Pt}function Pe(X,$,nt,dt){if(typeof nt=="object"&&nt!==null&&nt.type===P&&nt.key===null&&(nt=nt.props.children),typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case S:t:{for(var Pt=nt.key;$!==null;){if($.key===Pt){if(Pt=nt.type,Pt===P){if($.tag===7){u(X,$.sibling),dt=y($,nt.props.children),dt.return=X,X=dt;break t}}else if($.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===O&&Q0(Pt)===$.type){u(X,$.sibling),dt=y($,nt.props),Nc(dt,nt),dt.return=X,X=dt;break t}u(X,$);break}else a(X,$);$=$.sibling}nt.type===P?(dt=hr(nt.props.children,X.mode,dt,nt.key),dt.return=X,X=dt):(dt=vl(nt.type,nt.key,nt.props,null,X.mode,dt),Nc(dt,nt),dt.return=X,X=dt)}return C(X);case R:t:{for(Pt=nt.key;$!==null;){if($.key===Pt)if($.tag===4&&$.stateNode.containerInfo===nt.containerInfo&&$.stateNode.implementation===nt.implementation){u(X,$.sibling),dt=y($,nt.children||[]),dt.return=X,X=dt;break t}else{u(X,$);break}else a(X,$);$=$.sibling}dt=gu(nt,X.mode,dt),dt.return=X,X=dt}return C(X);case O:return Pt=nt._init,nt=Pt(nt._payload),Pe(X,$,nt,dt)}if(Dt(nt))return Ft(X,$,nt,dt);if(G(nt)){if(Pt=G(nt),typeof Pt!="function")throw Error(i(150));return nt=Pt.call(nt),zt(X,$,nt,dt)}if(typeof nt.then=="function")return Pe(X,$,Ff(nt),dt);if(nt.$$typeof===Y)return Pe(X,$,Pf(X,nt),dt);qf(X,nt)}return typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint"?(nt=""+nt,$!==null&&$.tag===6?(u(X,$.sibling),dt=y($,nt),dt.return=X,X=dt):(u(X,$),dt=wc(nt,X.mode,dt),dt.return=X,X=dt),C(X)):u(X,$)}return function(X,$,nt,dt){try{Lc=0;var Pt=Pe(X,$,nt,dt);return Su=null,Pt}catch(kt){if(kt===xc||kt===Of)throw kt;var ee=ci(29,kt,null,X.mode);return ee.lanes=dt,ee.return=X,ee}finally{}}}var Au=J0(!0),tb=J0(!1),gs=ct(null),dr=null;function eo(s){var a=s.alternate;yt(yn,yn.current&1),yt(gs,s),dr===null&&(a===null||bu.current!==null||a.memoizedState!==null)&&(dr=s)}function eb(s){if(s.tag===22){if(yt(yn,yn.current),yt(gs,s),dr===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(dr=s)}}else no()}function no(){yt(yn,yn.current),yt(gs,gs.current)}function Xr(s){Tt(gs),dr===s&&(dr=null),Tt(yn)}var yn=ct(0);function Gf(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Fg(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function tg(s,a,u,d){a=s.memoizedState,u=u(d,a),u=u==null?a:v({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var eg={enqueueSetState:function(s,a,u){s=s._reactInternals;var d=Wi(),y=Qa(d);y.payload=a,u!=null&&(y.callback=u),a=Ja(s,y,d),a!==null&&(Yi(a,s,d),Cc(a,s,d))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var d=Wi(),y=Qa(d);y.tag=1,y.payload=a,u!=null&&(y.callback=u),a=Ja(s,y,d),a!==null&&(Yi(a,s,d),Cc(a,s,d))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Wi(),d=Qa(u);d.tag=2,a!=null&&(d.callback=a),a=Ja(s,d,u),a!==null&&(Yi(a,s,u),Cc(a,s,u))}};function nb(s,a,u,d,y,b,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,b,C):a.prototype&&a.prototype.isPureReactComponent?!oi(u,d)||!oi(y,b):!0}function ib(s,a,u,d){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,d),a.state!==s&&eg.enqueueReplaceState(a,a.state,null)}function xl(s,a){var u=a;if("ref"in a){u={};for(var d in a)d!=="ref"&&(u[d]=a[d])}if(s=s.defaultProps){u===a&&(u=v({},u));for(var y in s)u[y]===void 0&&(u[y]=s[y])}return u}var Zf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function sb(s){Zf(s)}function rb(s){console.error(s)}function ab(s){Zf(s)}function Wf(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function ob(s,a,u){try{var d=s.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function ng(s,a,u){return u=Qa(u),u.tag=3,u.payload={element:null},u.callback=function(){Wf(s,a)},u}function lb(s){return s=Qa(s),s.tag=3,s}function ub(s,a,u,d){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var b=d.value;s.payload=function(){return y(b)},s.callback=function(){ob(a,u,d)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){ob(a,u,d),typeof y!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var M=d.stack;this.componentDidCatch(d.value,{componentStack:M!==null?M:""})})}function RC(s,a,u,d,y){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=u.alternate,a!==null&&El(a,u,y,!0),u=gs.current,u!==null){switch(u.tag){case 13:return dr===null?xg():u.alternate===null&&Je===0&&(Je=3),u.flags&=-257,u.flags|=65536,u.lanes=y,d===Mp?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([d]):a.add(d),Cg(s,d,y)),!1;case 22:return u.flags|=65536,d===Mp?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([d]):u.add(d)),Cg(s,d,y)),!1}throw Error(i(435,u.tag))}return Cg(s,d,y),xg(),!1}if(qt)return a=gs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,d!==xn&&(s=Error(i(422),{cause:d}),$a(li(s,u)))):(d!==xn&&(a=Error(i(423),{cause:d}),$a(li(a,u))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,d=li(d,u),y=ng(s.stateNode,d,y),Dp(s,y),Je!==4&&(Je=2)),!1;var b=Error(i(520),{cause:d});if(b=li(b,u),Fc===null?Fc=[b]:Fc.push(b),Je!==4&&(Je=2),a===null)return!0;d=li(d,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=y&-y,u.lanes|=s,s=ng(u.stateNode,d,s),Dp(u,s),!1;case 1:if(a=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(lo===null||!lo.has(b))))return u.flags|=65536,y&=-y,u.lanes|=y,y=lb(y),ub(y,s,u,d),Dp(u,y),!1}u=u.return}while(u!==null);return!1}var cb=Error(i(461)),Rn=!1;function Dn(s,a,u,d){a.child=s===null?tb(a,null,u,d):Au(a,s.child,u,d)}function hb(s,a,u,d,y){u=u.render;var b=a.ref;if("ref"in d){var C={};for(var M in d)M!=="ref"&&(C[M]=d[M])}else C=d;return wl(a),d=Bp(s,a,u,C,b,y),M=Up(),s!==null&&!Rn?(jp(s,a,y),Qr(s,a,y)):(qt&&M&&bt(a),a.flags|=1,Dn(s,a,d,y),a.child)}function fb(s,a,u,d,y){if(s===null){var b=u.type;return typeof b=="function"&&!pu(b)&&b.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=b,db(s,a,b,d,y)):(s=vl(u.type,null,d,a,a.mode,y),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,!cg(s,y)){var C=b.memoizedProps;if(u=u.compare,u=u!==null?u:oi,u(C,d)&&s.ref===a.ref)return Qr(s,a,y)}return a.flags|=1,s=ms(b,d),s.ref=a.ref,s.return=a,a.child=s}function db(s,a,u,d,y){if(s!==null){var b=s.memoizedProps;if(oi(b,d)&&s.ref===a.ref)if(Rn=!1,a.pendingProps=d=b,cg(s,y))(s.flags&131072)!==0&&(Rn=!0);else return a.lanes=s.lanes,Qr(s,a,y)}return ig(s,a,u,d,y)}function mb(s,a,u){var d=a.pendingProps,y=d.children,b=s!==null?s.memoizedState:null;if(d.mode==="hidden"){if((a.flags&128)!==0){if(d=b!==null?b.baseLanes|u:u,s!==null){for(y=a.child=s.child,b=0;y!==null;)b=b|y.lanes|y.childLanes,y=y.sibling;a.childLanes=b&~d}else a.childLanes=0,a.child=null;return pb(s,a,d,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Mf(a,b!==null?b.cachePool:null),b!==null?d0(a,b):Np(),eb(a);else return a.lanes=a.childLanes=536870912,pb(s,a,b!==null?b.baseLanes|u:u,u)}else b!==null?(Mf(a,b.cachePool),d0(a,b),no(),a.memoizedState=null):(s!==null&&Mf(a,null),Np(),no());return Dn(s,a,y,u),a.child}function pb(s,a,u,d){var y=Pp();return y=y===null?null:{parent:_n._currentValue,pool:y},a.memoizedState={baseLanes:u,cachePool:y},s!==null&&Mf(a,null),Np(),eb(a),s!==null&&El(s,a,d,!0),null}function Yf(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function ig(s,a,u,d,y){return wl(a),u=Bp(s,a,u,d,void 0,y),d=Up(),s!==null&&!Rn?(jp(s,a,y),Qr(s,a,y)):(qt&&d&&bt(a),a.flags|=1,Dn(s,a,u,y),a.child)}function gb(s,a,u,d,y,b){return wl(a),a.updateQueue=null,u=p0(a,d,u,y),m0(s),d=Up(),s!==null&&!Rn?(jp(s,a,b),Qr(s,a,b)):(qt&&d&&bt(a),a.flags|=1,Dn(s,a,u,b),a.child)}function _b(s,a,u,d,y){if(wl(a),a.stateNode===null){var b=Yr,C=u.contextType;typeof C=="object"&&C!==null&&(b=Kn(C)),b=new u(d,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=eg,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=d,b.state=a.memoizedState,b.refs={},Op(a),C=u.contextType,b.context=typeof C=="object"&&C!==null?Kn(C):Yr,b.state=a.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(tg(a,u,C,d),b.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(C=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),C!==b.state&&eg.enqueueReplaceState(b,b.state,null),Pc(a,d,b,y),Ic(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(s===null){b=a.stateNode;var M=a.memoizedProps,W=xl(u,M);b.props=W;var rt=b.context,ft=u.contextType;C=Yr,typeof ft=="object"&&ft!==null&&(C=Kn(ft));var pt=u.getDerivedStateFromProps;ft=typeof pt=="function"||typeof b.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,ft||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M||rt!==C)&&ib(a,b,d,C),Xa=!1;var at=a.memoizedState;b.state=at,Pc(a,d,b,y),Ic(),rt=a.memoizedState,M||at!==rt||Xa?(typeof pt=="function"&&(tg(a,u,pt,d),rt=a.memoizedState),(W=Xa||nb(a,u,W,d,at,rt,C))?(ft||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=rt),b.props=d,b.state=rt,b.context=C,d=W):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{b=a.stateNode,kp(s,a),C=a.memoizedProps,ft=xl(u,C),b.props=ft,pt=a.pendingProps,at=b.context,rt=u.contextType,W=Yr,typeof rt=="object"&&rt!==null&&(W=Kn(rt)),M=u.getDerivedStateFromProps,(rt=typeof M=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C!==pt||at!==W)&&ib(a,b,d,W),Xa=!1,at=a.memoizedState,b.state=at,Pc(a,d,b,y),Ic();var ot=a.memoizedState;C!==pt||at!==ot||Xa||s!==null&&s.dependencies!==null&&If(s.dependencies)?(typeof M=="function"&&(tg(a,u,M,d),ot=a.memoizedState),(ft=Xa||nb(a,u,ft,d,at,ot,W)||s!==null&&s.dependencies!==null&&If(s.dependencies))?(rt||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ot,W),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ot,W)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||C===s.memoizedProps&&at===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&at===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=ot),b.props=d,b.state=ot,b.context=W,d=ft):(typeof b.componentDidUpdate!="function"||C===s.memoizedProps&&at===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&at===s.memoizedState||(a.flags|=1024),d=!1)}return b=d,Yf(s,a),d=(a.flags&128)!==0,b||d?(b=a.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,s!==null&&d?(a.child=Au(a,s.child,null,y),a.child=Au(a,null,u,y)):Dn(s,a,u,y),a.memoizedState=b.state,s=a.child):s=Qr(s,a,y),s}function yb(s,a,u,d){return Ka(),a.flags|=256,Dn(s,a,u,d),a.child}var sg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rg(s){return{baseLanes:s,cachePool:r0()}}function ag(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=_s),s}function vb(s,a,u){var d=a.pendingProps,y=!1,b=(a.flags&128)!==0,C;if((C=b)||(C=s!==null&&s.memoizedState===null?!1:(yn.current&2)!==0),C&&(y=!0,a.flags&=-129),C=(a.flags&32)!==0,a.flags&=-33,s===null){if(qt){if(y?eo(a):no(),qt){var M=Mt,W;if(W=M){t:{for(W=M,M=We;W.nodeType!==8;){if(!M){M=null;break t}if(W=Hs(W.nextSibling),W===null){M=null;break t}}M=W}M!==null?(a.memoizedState={dehydrated:M,treeContext:A!==null?{id:I,overflow:Z}:null,retryLane:536870912,hydrationErrors:null},W=ci(18,null,null,0),W.stateNode=M,W.return=a,a.child=W,It=a,Mt=null,W=!0):W=!1}W||gi(a)}if(M=a.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return Fg(M)?a.lanes=32:a.lanes=536870912,null;Xr(a)}return M=d.children,d=d.fallback,y?(no(),y=a.mode,M=Kf({mode:"hidden",children:M},y),d=hr(d,y,u,null),M.return=a,d.return=a,M.sibling=d,a.child=M,y=a.child,y.memoizedState=rg(u),y.childLanes=ag(s,C,u),a.memoizedState=sg,d):(eo(a),og(a,M))}if(W=s.memoizedState,W!==null&&(M=W.dehydrated,M!==null)){if(b)a.flags&256?(eo(a),a.flags&=-257,a=lg(s,a,u)):a.memoizedState!==null?(no(),a.child=s.child,a.flags|=128,a=null):(no(),y=d.fallback,M=a.mode,d=Kf({mode:"visible",children:d.children},M),y=hr(y,M,u,null),y.flags|=2,d.return=a,y.return=a,d.sibling=y,a.child=d,Au(a,s.child,null,u),d=a.child,d.memoizedState=rg(u),d.childLanes=ag(s,C,u),a.memoizedState=sg,a=y);else if(eo(a),Fg(M)){if(C=M.nextSibling&&M.nextSibling.dataset,C)var rt=C.dgst;C=rt,d=Error(i(419)),d.stack="",d.digest=C,$a({value:d,source:null,stack:null}),a=lg(s,a,u)}else if(Rn||El(s,a,u,!1),C=(u&s.childLanes)!==0,Rn||C){if(C=ze,C!==null&&(d=u&-u,d=(d&42)!==0?1:Js(d),d=(d&(C.suspendedLanes|u))!==0?0:d,d!==0&&d!==W.retryLane))throw W.retryLane=d,Wa(s,d),Yi(C,s,d),cb;M.data==="$?"||xg(),a=lg(s,a,u)}else M.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=W.treeContext,Mt=Hs(M.nextSibling),It=a,qt=!0,Ve=null,We=!1,s!==null&&(_[T++]=I,_[T++]=Z,_[T++]=A,I=s.id,Z=s.overflow,A=a),a=og(a,d.children),a.flags|=4096);return a}return y?(no(),y=d.fallback,M=a.mode,W=s.child,rt=W.sibling,d=ms(W,{mode:"hidden",children:d.children}),d.subtreeFlags=W.subtreeFlags&65011712,rt!==null?y=ms(rt,y):(y=hr(y,M,u,null),y.flags|=2),y.return=a,d.return=a,d.sibling=y,a.child=d,d=y,y=a.child,M=s.child.memoizedState,M===null?M=rg(u):(W=M.cachePool,W!==null?(rt=_n._currentValue,W=W.parent!==rt?{parent:rt,pool:rt}:W):W=r0(),M={baseLanes:M.baseLanes|u,cachePool:W}),y.memoizedState=M,y.childLanes=ag(s,C,u),a.memoizedState=sg,d):(eo(a),u=s.child,s=u.sibling,u=ms(u,{mode:"visible",children:d.children}),u.return=a,u.sibling=null,s!==null&&(C=a.deletions,C===null?(a.deletions=[s],a.flags|=16):C.push(s)),a.child=u,a.memoizedState=null,u)}function og(s,a){return a=Kf({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Kf(s,a){return s=ci(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function lg(s,a,u){return Au(a,s.child,null,u),s=og(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function bb(s,a,u){s.lanes|=a;var d=s.alternate;d!==null&&(d.lanes|=a),Tl(s.return,a,u)}function ug(s,a,u,d,y){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:y}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=u,b.tailMode=y)}function Tb(s,a,u){var d=a.pendingProps,y=d.revealOrder,b=d.tail;if(Dn(s,a,d.children,u),d=yn.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&bb(s,u,a);else if(s.tag===19)bb(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}switch(yt(yn,d),y){case"forwards":for(u=a.child,y=null;u!==null;)s=u.alternate,s!==null&&Gf(s)===null&&(y=u),u=u.sibling;u=y,u===null?(y=a.child,a.child=null):(y=u.sibling,u.sibling=null),ug(a,!1,y,u,b);break;case"backwards":for(u=null,y=a.child,a.child=null;y!==null;){if(s=y.alternate,s!==null&&Gf(s)===null){a.child=y;break}s=y.sibling,y.sibling=u,u=y,y=s}ug(a,!0,u,null,b);break;case"together":ug(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Qr(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),oo|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(El(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=ms(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ms(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function cg(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&If(s)))}function CC(s,a,u){switch(a.tag){case 3:le(a,a.stateNode.containerInfo),fr(a,_n,s.memoizedState.cache),Ka();break;case 27:case 5:Ji(a);break;case 4:le(a,a.stateNode.containerInfo);break;case 10:fr(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(eo(a),a.flags|=128,null):(u&a.child.childLanes)!==0?vb(s,a,u):(eo(a),s=Qr(s,a,u),s!==null?s.sibling:null);eo(a);break;case 19:var y=(s.flags&128)!==0;if(d=(u&a.childLanes)!==0,d||(El(s,a,u,!1),d=(u&a.childLanes)!==0),y){if(d)return Tb(s,a,u);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),yt(yn,yn.current),d)break;return null;case 22:case 23:return a.lanes=0,mb(s,a,u);case 24:fr(a,_n,s.memoizedState.cache)}return Qr(s,a,u)}function Eb(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)Rn=!0;else{if(!cg(s,u)&&(a.flags&128)===0)return Rn=!1,CC(s,a,u);Rn=(s.flags&131072)!==0}else Rn=!1,qt&&(a.flags&1048576)!==0&&lt(a,h,a.index);switch(a.lanes=0,a.tag){case 16:t:{s=a.pendingProps;var d=a.elementType,y=d._init;if(d=y(d._payload),a.type=d,typeof d=="function")pu(d)?(s=xl(d,s),a.tag=1,a=_b(null,a,d,s,u)):(a.tag=0,a=ig(null,a,d,s,u));else{if(d!=null){if(y=d.$$typeof,y===st){a.tag=11,a=hb(null,a,d,s,u);break t}else if(y===V){a.tag=14,a=fb(null,a,d,s,u);break t}}throw a=Yt(d)||d,Error(i(306,a,""))}}return a;case 0:return ig(s,a,a.type,a.pendingProps,u);case 1:return d=a.type,y=xl(d,a.pendingProps),_b(s,a,d,y,u);case 3:t:{if(le(a,a.stateNode.containerInfo),s===null)throw Error(i(387));d=a.pendingProps;var b=a.memoizedState;y=b.element,kp(s,a),Pc(a,d,null,u);var C=a.memoizedState;if(d=C.cache,fr(a,_n,d),d!==b.cache&&_u(a,[_n],u,!0),Ic(),d=C.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:C.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=yb(s,a,d,u);break t}else if(d!==y){y=li(Error(i(424)),a),$a(y),a=yb(s,a,d,u);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Mt=Hs(s.firstChild),It=a,qt=!0,Ve=null,We=!0,u=tb(a,null,d,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ka(),d===y){a=Qr(s,a,u);break t}Dn(s,a,d,u)}a=a.child}return a;case 26:return Yf(s,a),s===null?(u=xT(a.type,null,a.pendingProps,null))?a.memoizedState=u:qt||(u=a.type,s=a.pendingProps,d=ud(Et.current).createElement(u),d[tn]=a,d[Xe]=s,Nn(d,u,s),Ze(d),a.stateNode=d):a.memoizedState=xT(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Ji(a),s===null&&qt&&(d=a.stateNode=wT(a.type,a.pendingProps,Et.current),It=a,We=!0,y=Mt,ho(a.type)?(qg=y,Mt=Hs(d.firstChild)):Mt=y),Dn(s,a,a.pendingProps.children,u),Yf(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&qt&&((y=d=Mt)&&(d=nI(d,a.type,a.pendingProps,We),d!==null?(a.stateNode=d,It=a,Mt=Hs(d.firstChild),We=!1,y=!0):y=!1),y||gi(a)),Ji(a),y=a.type,b=a.pendingProps,C=s!==null?s.memoizedProps:null,d=b.children,Ug(y,b)?d=null:C!==null&&Ug(y,C)&&(a.flags|=32),a.memoizedState!==null&&(y=Bp(s,a,bC,null,null,u),Qc._currentValue=y),Yf(s,a),Dn(s,a,d,u),a.child;case 6:return s===null&&qt&&((s=u=Mt)&&(u=iI(u,a.pendingProps,We),u!==null?(a.stateNode=u,It=a,Mt=null,s=!0):s=!1),s||gi(a)),null;case 13:return vb(s,a,u);case 4:return le(a,a.stateNode.containerInfo),d=a.pendingProps,s===null?a.child=Au(a,null,d,u):Dn(s,a,d,u),a.child;case 11:return hb(s,a,a.type,a.pendingProps,u);case 7:return Dn(s,a,a.pendingProps,u),a.child;case 8:return Dn(s,a,a.pendingProps.children,u),a.child;case 12:return Dn(s,a,a.pendingProps.children,u),a.child;case 10:return d=a.pendingProps,fr(a,a.type,d.value),Dn(s,a,d.children,u),a.child;case 9:return y=a.type._context,d=a.pendingProps.children,wl(a),y=Kn(y),d=d(y),a.flags|=1,Dn(s,a,d,u),a.child;case 14:return fb(s,a,a.type,a.pendingProps,u);case 15:return db(s,a,a.type,a.pendingProps,u);case 19:return Tb(s,a,u);case 31:return d=a.pendingProps,u=a.mode,d={mode:d.mode,children:d.children},s===null?(u=Kf(d,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=ms(s.child,d),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return mb(s,a,u);case 24:return wl(a),d=Kn(_n),s===null?(y=Pp(),y===null&&(y=ze,b=Cp(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=u),y=b),a.memoizedState={parent:d,cache:y},Op(a),fr(a,_n,y)):((s.lanes&u)!==0&&(kp(s,a),Pc(a,null,null,u),Ic()),y=s.memoizedState,b=a.memoizedState,y.parent!==d?(y={parent:d,cache:d},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),fr(a,_n,d)):(d=b.cache,fr(a,_n,d),d!==y.cache&&_u(a,[_n],u,!0))),Dn(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Jr(s){s.flags|=4}function wb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!MT(a)){if(a=gs.current,a!==null&&((ce&4194048)===ce?dr!==null:(ce&62914560)!==ce&&(ce&536870912)===0||a!==dr))throw Rc=Mp,a0;s.flags|=8192}}function $f(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?xa():536870912,s.lanes|=a,Iu|=a)}function Vc(s,a){if(!qt)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Ye(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,d=0;if(a)for(var y=s.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=d,s.childLanes=u,a}function IC(s,a,u){var d=a.pendingProps;switch(At(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(a),null;case 1:return Ye(a),null;case 3:return u=a.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Us(_n),Ri(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(bl(a)?Jr(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Cf())),Ye(a),null;case 26:return u=a.memoizedState,s===null?(Jr(a),u!==null?(Ye(a),wb(a,u)):(Ye(a),a.flags&=-16777217)):u?u!==s.memoizedState?(Jr(a),Ye(a),wb(a,u)):(Ye(a),a.flags&=-16777217):(s.memoizedProps!==d&&Jr(a),Ye(a),a.flags&=-16777217),null;case 27:Ci(a),u=Et.current;var y=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==d&&Jr(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return Ye(a),null}s=St.current,bl(a)?xf(a):(s=wT(y,d,u),a.stateNode=s,Jr(a))}return Ye(a),null;case 5:if(Ci(a),u=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&Jr(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return Ye(a),null}if(s=St.current,bl(a))xf(a);else{switch(y=ud(Et.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?s.multiple=!0:d.size&&(s.size=d.size);break;default:s=typeof d.is=="string"?y.createElement(u,{is:d.is}):y.createElement(u)}}s[tn]=a,s[Xe]=d;t:for(y=a.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===a)break t;for(;y.sibling===null;){if(y.return===null||y.return===a)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}a.stateNode=s;t:switch(Nn(s,u,d),u){case"button":case"input":case"select":case"textarea":s=!!d.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&Jr(a)}}return Ye(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==d&&Jr(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(i(166));if(s=Et.current,bl(a)){if(s=a.stateNode,u=a.memoizedProps,d=null,y=It,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}s[tn]=a,s=!!(s.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||gT(s.nodeValue,u)),s||gi(a)}else s=ud(s).createTextNode(d),s[tn]=a,a.stateNode=s}return Ye(a),null;case 13:if(d=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=bl(a),d!==null&&d.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[tn]=a}else Ka(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ye(a),y=!1}else y=Cf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(Xr(a),a):(Xr(a),null)}if(Xr(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=d!==null,s=s!==null&&s.memoizedState!==null,u){d=a.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var b=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048)}return u!==s&&u&&(a.child.flags|=8192),$f(a,a.updateQueue),Ye(a),null;case 4:return Ri(),s===null&&Lg(a.stateNode.containerInfo),Ye(a),null;case 10:return Us(a.type),Ye(a),null;case 19:if(Tt(yn),y=a.memoizedState,y===null)return Ye(a),null;if(d=(a.flags&128)!==0,b=y.rendering,b===null)if(d)Vc(y,!1);else{if(Je!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(b=Gf(s),b!==null){for(a.flags|=128,Vc(y,!1),s=b.updateQueue,a.updateQueue=s,$f(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)Ec(u,s),u=u.sibling;return yt(yn,yn.current&1|2),a.child}s=s.sibling}y.tail!==null&&Hn()>Jf&&(a.flags|=128,d=!0,Vc(y,!1),a.lanes=4194304)}else{if(!d)if(s=Gf(b),s!==null){if(a.flags|=128,d=!0,s=s.updateQueue,a.updateQueue=s,$f(a,s),Vc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!b.alternate&&!qt)return Ye(a),null}else 2*Hn()-y.renderingStartTime>Jf&&u!==536870912&&(a.flags|=128,d=!0,Vc(y,!1),a.lanes=4194304);y.isBackwards?(b.sibling=a.child,a.child=b):(s=y.last,s!==null?s.sibling=b:a.child=b,y.last=b)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=Hn(),a.sibling=null,s=yn.current,yt(yn,d?s&1|2:s&1),a):(Ye(a),null);case 22:case 23:return Xr(a),Vp(),d=a.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(u&536870912)!==0&&(a.flags&128)===0&&(Ye(a),a.subtreeFlags&6&&(a.flags|=8192)):Ye(a),u=a.updateQueue,u!==null&&$f(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==u&&(a.flags|=2048),s!==null&&Tt(Sl),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Us(_n),Ye(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function PC(s,a){switch(At(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Us(_n),Ri(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Ci(a),null;case 13:if(Xr(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ka()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Tt(yn),null;case 4:return Ri(),null;case 10:return Us(a.type),null;case 22:case 23:return Xr(a),Vp(),s!==null&&Tt(Sl),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Us(_n),null;case 25:return null;default:return null}}function Sb(s,a){switch(At(a),a.tag){case 3:Us(_n),Ri();break;case 26:case 27:case 5:Ci(a);break;case 4:Ri();break;case 13:Xr(a);break;case 19:Tt(yn);break;case 10:Us(a.type);break;case 22:case 23:Xr(a),Vp(),s!==null&&Tt(Sl);break;case 24:Us(_n)}}function zc(s,a){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var y=d.next;u=y;do{if((u.tag&s)===s){d=void 0;var b=u.create,C=u.inst;d=b(),C.destroy=d}u=u.next}while(u!==y)}}catch(M){Oe(a,a.return,M)}}function io(s,a,u){try{var d=a.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var b=y.next;d=b;do{if((d.tag&s)===s){var C=d.inst,M=C.destroy;if(M!==void 0){C.destroy=void 0,y=a;var W=u,rt=M;try{rt()}catch(ft){Oe(y,W,ft)}}}d=d.next}while(d!==b)}}catch(ft){Oe(a,a.return,ft)}}function Ab(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{f0(a,u)}catch(d){Oe(s,s.return,d)}}}function xb(s,a,u){u.props=xl(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(d){Oe(s,a,d)}}function Bc(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof u=="function"?s.refCleanup=u(d):u.current=d}}catch(y){Oe(s,a,y)}}function mr(s,a){var u=s.ref,d=s.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(y){Oe(s,a,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){Oe(s,a,y)}else u.current=null}function Rb(s){var a=s.type,u=s.memoizedProps,d=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break t;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(y){Oe(s,s.return,y)}}function hg(s,a,u){try{var d=s.stateNode;XC(d,s.type,u,a),d[Xe]=a}catch(y){Oe(s,s.return,y)}}function Cb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ho(s.type)||s.tag===4}function fg(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Cb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ho(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function dg(s,a,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=ld));else if(d!==4&&(d===27&&ho(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(dg(s,a,u),s=s.sibling;s!==null;)dg(s,a,u),s=s.sibling}function Xf(s,a,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(d!==4&&(d===27&&ho(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Xf(s,a,u),s=s.sibling;s!==null;)Xf(s,a,u),s=s.sibling}function Ib(s){var a=s.stateNode,u=s.memoizedProps;try{for(var d=s.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);Nn(a,d,u),a[tn]=s,a[Xe]=u}catch(b){Oe(s,s.return,b)}}var ta=!1,sn=!1,mg=!1,Pb=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function MC(s,a){if(s=s.containerInfo,zg=pd,s=dl(s),ml(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{u=(u=s.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var y=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break t}var C=0,M=-1,W=-1,rt=0,ft=0,pt=s,at=null;e:for(;;){for(var ot;pt!==u||y!==0&&pt.nodeType!==3||(M=C+y),pt!==b||d!==0&&pt.nodeType!==3||(W=C+d),pt.nodeType===3&&(C+=pt.nodeValue.length),(ot=pt.firstChild)!==null;)at=pt,pt=ot;for(;;){if(pt===s)break e;if(at===u&&++rt===y&&(M=C),at===b&&++ft===d&&(W=C),(ot=pt.nextSibling)!==null)break;pt=at,at=pt.parentNode}pt=ot}u=M===-1||W===-1?null:{start:M,end:W}}else u=null}u=u||{start:0,end:0}}else u=null;for(Bg={focusedElem:s,selectionRange:u},pd=!1,Cn=a;Cn!==null;)if(a=Cn,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,Cn=s;else for(;Cn!==null;){switch(a=Cn,b=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,u=a,y=b.memoizedProps,b=b.memoizedState,d=u.stateNode;try{var Ft=xl(u.type,y,u.elementType===u.type);s=d.getSnapshotBeforeUpdate(Ft,b),d.__reactInternalSnapshotBeforeUpdate=s}catch(zt){Oe(u,u.return,zt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)Hg(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Hg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Cn=s;break}Cn=a.return}}function Mb(s,a,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:so(s,u),d&4&&zc(5,u);break;case 1:if(so(s,u),d&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(C){Oe(u,u.return,C)}else{var y=xl(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(y,a,s.__reactInternalSnapshotBeforeUpdate)}catch(C){Oe(u,u.return,C)}}d&64&&Ab(u),d&512&&Bc(u,u.return);break;case 3:if(so(s,u),d&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{f0(s,a)}catch(C){Oe(u,u.return,C)}}break;case 27:a===null&&d&4&&Ib(u);case 26:case 5:so(s,u),a===null&&d&4&&Rb(u),d&512&&Bc(u,u.return);break;case 12:so(s,u);break;case 13:so(s,u),d&4&&Db(s,u),d&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=UC.bind(null,u),sI(s,u))));break;case 22:if(d=u.memoizedState!==null||ta,!d){a=a!==null&&a.memoizedState!==null||sn,y=ta;var b=sn;ta=d,(sn=a)&&!b?ro(s,u,(u.subtreeFlags&8772)!==0):so(s,u),ta=y,sn=b}break;case 30:break;default:so(s,u)}}function Ob(s){var a=s.alternate;a!==null&&(s.alternate=null,Ob(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Cs(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var qe=null,yi=!1;function ea(s,a,u){for(u=u.child;u!==null;)kb(s,a,u),u=u.sibling}function kb(s,a,u){if(fe&&typeof fe.onCommitFiberUnmount=="function")try{fe.onCommitFiberUnmount(ke,u)}catch{}switch(u.tag){case 26:sn||mr(u,a),ea(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:sn||mr(u,a);var d=qe,y=yi;ho(u.type)&&(qe=u.stateNode,yi=!1),ea(s,a,u),Yc(u.stateNode),qe=d,yi=y;break;case 5:sn||mr(u,a);case 6:if(d=qe,y=yi,qe=null,ea(s,a,u),qe=d,yi=y,qe!==null)if(yi)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(u.stateNode)}catch(b){Oe(u,a,b)}else try{qe.removeChild(u.stateNode)}catch(b){Oe(u,a,b)}break;case 18:qe!==null&&(yi?(s=qe,TT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),nh(s)):TT(qe,u.stateNode));break;case 4:d=qe,y=yi,qe=u.stateNode.containerInfo,yi=!0,ea(s,a,u),qe=d,yi=y;break;case 0:case 11:case 14:case 15:sn||io(2,u,a),sn||io(4,u,a),ea(s,a,u);break;case 1:sn||(mr(u,a),d=u.stateNode,typeof d.componentWillUnmount=="function"&&xb(u,a,d)),ea(s,a,u);break;case 21:ea(s,a,u);break;case 22:sn=(d=sn)||u.memoizedState!==null,ea(s,a,u),sn=d;break;default:ea(s,a,u)}}function Db(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{nh(s)}catch(u){Oe(a,a.return,u)}}function OC(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Pb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Pb),a;default:throw Error(i(435,s.tag))}}function pg(s,a){var u=OC(s);a.forEach(function(d){var y=jC.bind(null,s,d);u.has(d)||(u.add(d),d.then(y,y))})}function qi(s,a){var u=a.deletions;if(u!==null)for(var d=0;d<u.length;d++){var y=u[d],b=s,C=a,M=C;t:for(;M!==null;){switch(M.tag){case 27:if(ho(M.type)){qe=M.stateNode,yi=!1;break t}break;case 5:qe=M.stateNode,yi=!1;break t;case 3:case 4:qe=M.stateNode.containerInfo,yi=!0;break t}M=M.return}if(qe===null)throw Error(i(160));kb(b,C,y),qe=null,yi=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Lb(a,s),a=a.sibling}var js=null;function Lb(s,a){var u=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:qi(a,s),Gi(s),d&4&&(io(3,s,s.return),zc(3,s),io(5,s,s.return));break;case 1:qi(a,s),Gi(s),d&512&&(sn||u===null||mr(u,u.return)),d&64&&ta&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var y=js;if(qi(a,s),Gi(s),d&512&&(sn||u===null||mr(u,u.return)),d&4){var b=u!==null?u.memoizedState:null;if(d=s.memoizedState,u===null)if(d===null)if(s.stateNode===null){t:{d=s.type,u=s.memoizedProps,y=y.ownerDocument||y;e:switch(d){case"title":b=y.getElementsByTagName("title")[0],(!b||b[er]||b[tn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(d),y.head.insertBefore(b,y.querySelector("head > title"))),Nn(b,d,u),b[tn]=s,Ze(b),d=b;break t;case"link":var C=IT("link","href",y).get(d+(u.href||""));if(C){for(var M=0;M<C.length;M++)if(b=C[M],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(M,1);break e}}b=y.createElement(d),Nn(b,d,u),y.head.appendChild(b);break;case"meta":if(C=IT("meta","content",y).get(d+(u.content||""))){for(M=0;M<C.length;M++)if(b=C[M],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(M,1);break e}}b=y.createElement(d),Nn(b,d,u),y.head.appendChild(b);break;default:throw Error(i(468,d))}b[tn]=s,Ze(b),d=b}s.stateNode=d}else PT(y,s.type,s.stateNode);else s.stateNode=CT(y,d,s.memoizedProps);else b!==d?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,d===null?PT(y,s.type,s.stateNode):CT(y,d,s.memoizedProps)):d===null&&s.stateNode!==null&&hg(s,s.memoizedProps,u.memoizedProps)}break;case 27:qi(a,s),Gi(s),d&512&&(sn||u===null||mr(u,u.return)),u!==null&&d&4&&hg(s,s.memoizedProps,u.memoizedProps);break;case 5:if(qi(a,s),Gi(s),d&512&&(sn||u===null||mr(u,u.return)),s.flags&32){y=s.stateNode;try{wn(y,"")}catch(ot){Oe(s,s.return,ot)}}d&4&&s.stateNode!=null&&(y=s.memoizedProps,hg(s,y,u!==null?u.memoizedProps:y)),d&1024&&(mg=!0);break;case 6:if(qi(a,s),Gi(s),d&4){if(s.stateNode===null)throw Error(i(162));d=s.memoizedProps,u=s.stateNode;try{u.nodeValue=d}catch(ot){Oe(s,s.return,ot)}}break;case 3:if(fd=null,y=js,js=cd(a.containerInfo),qi(a,s),js=y,Gi(s),d&4&&u!==null&&u.memoizedState.isDehydrated)try{nh(a.containerInfo)}catch(ot){Oe(s,s.return,ot)}mg&&(mg=!1,Nb(s));break;case 4:d=js,js=cd(s.stateNode.containerInfo),qi(a,s),Gi(s),js=d;break;case 12:qi(a,s),Gi(s);break;case 13:qi(a,s),Gi(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Tg=Hn()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,pg(s,d)));break;case 22:y=s.memoizedState!==null;var W=u!==null&&u.memoizedState!==null,rt=ta,ft=sn;if(ta=rt||y,sn=ft||W,qi(a,s),sn=ft,ta=rt,Gi(s),d&8192)t:for(a=s.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(u===null||W||ta||sn||Rl(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){W=u=a;try{if(b=W.stateNode,y)C=b.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{M=W.stateNode;var pt=W.memoizedProps.style,at=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;M.style.display=at==null||typeof at=="boolean"?"":(""+at).trim()}}catch(ot){Oe(W,W.return,ot)}}}else if(a.tag===6){if(u===null){W=a;try{W.stateNode.nodeValue=y?"":W.memoizedProps}catch(ot){Oe(W,W.return,ot)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=s.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,pg(s,u))));break;case 19:qi(a,s),Gi(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,pg(s,d)));break;case 30:break;case 21:break;default:qi(a,s),Gi(s)}}function Gi(s){var a=s.flags;if(a&2){try{for(var u,d=s.return;d!==null;){if(Cb(d)){u=d;break}d=d.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var y=u.stateNode,b=fg(s);Xf(s,b,y);break;case 5:var C=u.stateNode;u.flags&32&&(wn(C,""),u.flags&=-33);var M=fg(s);Xf(s,M,C);break;case 3:case 4:var W=u.stateNode.containerInfo,rt=fg(s);dg(s,rt,W);break;default:throw Error(i(161))}}catch(ft){Oe(s,s.return,ft)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Nb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Nb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function so(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Mb(s,a.alternate,a),a=a.sibling}function Rl(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:io(4,a,a.return),Rl(a);break;case 1:mr(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&xb(a,a.return,u),Rl(a);break;case 27:Yc(a.stateNode);case 26:case 5:mr(a,a.return),Rl(a);break;case 22:a.memoizedState===null&&Rl(a);break;case 30:Rl(a);break;default:Rl(a)}s=s.sibling}}function ro(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,y=s,b=a,C=b.flags;switch(b.tag){case 0:case 11:case 15:ro(y,b,u),zc(4,b);break;case 1:if(ro(y,b,u),d=b,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(rt){Oe(d,d.return,rt)}if(d=b,y=d.updateQueue,y!==null){var M=d.stateNode;try{var W=y.shared.hiddenCallbacks;if(W!==null)for(y.shared.hiddenCallbacks=null,y=0;y<W.length;y++)h0(W[y],M)}catch(rt){Oe(d,d.return,rt)}}u&&C&64&&Ab(b),Bc(b,b.return);break;case 27:Ib(b);case 26:case 5:ro(y,b,u),u&&d===null&&C&4&&Rb(b),Bc(b,b.return);break;case 12:ro(y,b,u);break;case 13:ro(y,b,u),u&&C&4&&Db(y,b);break;case 22:b.memoizedState===null&&ro(y,b,u),Bc(b,b.return);break;case 30:break;default:ro(y,b,u)}a=a.sibling}}function gg(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Sc(u))}function _g(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Sc(s))}function pr(s,a,u,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Vb(s,a,u,d),a=a.sibling}function Vb(s,a,u,d){var y=a.flags;switch(a.tag){case 0:case 11:case 15:pr(s,a,u,d),y&2048&&zc(9,a);break;case 1:pr(s,a,u,d);break;case 3:pr(s,a,u,d),y&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Sc(s)));break;case 12:if(y&2048){pr(s,a,u,d),s=a.stateNode;try{var b=a.memoizedProps,C=b.id,M=b.onPostCommit;typeof M=="function"&&M(C,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(W){Oe(a,a.return,W)}}else pr(s,a,u,d);break;case 13:pr(s,a,u,d);break;case 23:break;case 22:b=a.stateNode,C=a.alternate,a.memoizedState!==null?b._visibility&2?pr(s,a,u,d):Uc(s,a):b._visibility&2?pr(s,a,u,d):(b._visibility|=2,xu(s,a,u,d,(a.subtreeFlags&10256)!==0)),y&2048&&gg(C,a);break;case 24:pr(s,a,u,d),y&2048&&_g(a.alternate,a);break;default:pr(s,a,u,d)}}function xu(s,a,u,d,y){for(y=y&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var b=s,C=a,M=u,W=d,rt=C.flags;switch(C.tag){case 0:case 11:case 15:xu(b,C,M,W,y),zc(8,C);break;case 23:break;case 22:var ft=C.stateNode;C.memoizedState!==null?ft._visibility&2?xu(b,C,M,W,y):Uc(b,C):(ft._visibility|=2,xu(b,C,M,W,y)),y&&rt&2048&&gg(C.alternate,C);break;case 24:xu(b,C,M,W,y),y&&rt&2048&&_g(C.alternate,C);break;default:xu(b,C,M,W,y)}a=a.sibling}}function Uc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,d=a,y=d.flags;switch(d.tag){case 22:Uc(u,d),y&2048&&gg(d.alternate,d);break;case 24:Uc(u,d),y&2048&&_g(d.alternate,d);break;default:Uc(u,d)}a=a.sibling}}var jc=8192;function Ru(s){if(s.subtreeFlags&jc)for(s=s.child;s!==null;)zb(s),s=s.sibling}function zb(s){switch(s.tag){case 26:Ru(s),s.flags&jc&&s.memoizedState!==null&&_I(js,s.memoizedState,s.memoizedProps);break;case 5:Ru(s);break;case 3:case 4:var a=js;js=cd(s.stateNode.containerInfo),Ru(s),js=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=jc,jc=16777216,Ru(s),jc=a):Ru(s));break;default:Ru(s)}}function Bb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Hc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];Cn=d,jb(d,s)}Bb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ub(s),s=s.sibling}function Ub(s){switch(s.tag){case 0:case 11:case 15:Hc(s),s.flags&2048&&io(9,s,s.return);break;case 3:Hc(s);break;case 12:Hc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Qf(s)):Hc(s);break;default:Hc(s)}}function Qf(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];Cn=d,jb(d,s)}Bb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:io(8,a,a.return),Qf(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Qf(a));break;default:Qf(a)}s=s.sibling}}function jb(s,a){for(;Cn!==null;){var u=Cn;switch(u.tag){case 0:case 11:case 15:io(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Sc(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,Cn=d;else t:for(u=s;Cn!==null;){d=Cn;var y=d.sibling,b=d.return;if(Ob(d),d===u){Cn=null;break t}if(y!==null){y.return=b,Cn=y;break t}Cn=b}}}var kC={getCacheForType:function(s){var a=Kn(_n),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u}},DC=typeof WeakMap=="function"?WeakMap:Map,Te=0,ze=null,ne=null,ce=0,Ee=0,Zi=null,ao=!1,Cu=!1,yg=!1,na=0,Je=0,oo=0,Cl=0,vg=0,_s=0,Iu=0,Fc=null,vi=null,bg=!1,Tg=0,Jf=1/0,td=null,lo=null,Ln=0,uo=null,Pu=null,Mu=0,Eg=0,wg=null,Hb=null,qc=0,Sg=null;function Wi(){if((Te&2)!==0&&ce!==0)return ce&-ce;if(et.T!==null){var s=yu;return s!==0?s:Mg()}return tr()}function Fb(){_s===0&&(_s=(ce&536870912)===0||qt?Jo():536870912);var s=gs.current;return s!==null&&(s.flags|=32),_s}function Yi(s,a,u){(s===ze&&(Ee===2||Ee===9)||s.cancelPendingCommit!==null)&&(Ou(s,0),co(s,ce,_s,!1)),es(s,u),((Te&2)===0||s!==ze)&&(s===ze&&((Te&2)===0&&(Cl|=u),Je===4&&co(s,ce,_s,!1)),gr(s))}function qb(s,a,u){if((Te&6)!==0)throw Error(i(327));var d=!u&&(a&124)===0&&(a&s.expiredLanes)===0||Pi(s,a),y=d?VC(s,a):Rg(s,a,!0),b=d;do{if(y===0){Cu&&!d&&co(s,a,0,!1);break}else{if(u=s.current.alternate,b&&!LC(u)){y=Rg(s,a,!1),b=!1;continue}if(y===2){if(b=a,s.errorRecoveryDisabledLanes&b)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){a=C;t:{var M=s;y=Fc;var W=M.current.memoizedState.isDehydrated;if(W&&(Ou(M,C).flags|=256),C=Rg(M,C,!1),C!==2){if(yg&&!W){M.errorRecoveryDisabledLanes|=b,Cl|=b,y=4;break t}b=vi,vi=y,b!==null&&(vi===null?vi=b:vi.push.apply(vi,b))}y=C}if(b=!1,y!==2)continue}}if(y===1){Ou(s,0),co(s,a,0,!0);break}t:{switch(d=s,b=y,b){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:co(d,a,_s,!ao);break t;case 2:vi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(y=Tg+300-Hn(),10<y)){if(co(d,a,_s,!ao),Aa(d,0,!0)!==0)break t;d.timeoutHandle=vT(Gb.bind(null,d,u,vi,td,bg,a,_s,Cl,Iu,ao,b,2,-0,0),y);break t}Gb(d,u,vi,td,bg,a,_s,Cl,Iu,ao,b,0,-0,0)}}break}while(!0);gr(s)}function Gb(s,a,u,d,y,b,C,M,W,rt,ft,pt,at,ot){if(s.timeoutHandle=-1,pt=a.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(Xc={stylesheets:null,count:0,unsuspend:gI},zb(a),pt=yI(),pt!==null)){s.cancelPendingCommit=pt(Qb.bind(null,s,a,b,u,d,y,C,M,W,ft,1,at,ot)),co(s,b,C,!rt);return}Qb(s,a,b,u,d,y,C,M,W)}function LC(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var y=u[d],b=y.getSnapshot;y=y.value;try{if(!ai(b(),y))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function co(s,a,u,d){a&=~vg,a&=~Cl,s.suspendedLanes|=a,s.pingedLanes&=~a,d&&(s.warmLanes|=a),d=s.expirationTimes;for(var y=a;0<y;){var b=31-Tn(y),C=1<<b;d[b]=-1,y&=~C}u!==0&&ns(s,u,a)}function ed(){return(Te&6)===0?(Gc(0),!1):!0}function Ag(){if(ne!==null){if(Ee===0)var s=ne.return;else s=ne,Bs=ps=null,Hp(s),Su=null,Lc=0,s=ne;for(;s!==null;)Sb(s.alternate,s),s=s.return;ne=null}}function Ou(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,JC(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Ag(),ze=s,ne=u=ms(s.current,null),ce=a,Ee=0,Zi=null,ao=!1,Cu=Pi(s,a),yg=!1,Iu=_s=vg=Cl=oo=Je=0,vi=Fc=null,bg=!1,(a&8)!==0&&(a|=a&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=a;0<d;){var y=31-Tn(d),b=1<<y;a|=s[y],d&=~b}return na=a,gl(),u}function Zb(s,a){Qt=null,et.H=Hf,a===xc||a===Of?(a=u0(),Ee=3):a===a0?(a=u0(),Ee=4):Ee=a===cb?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Zi=a,ne===null&&(Je=1,Wf(s,li(a,s.current)))}function Wb(){var s=et.H;return et.H=Hf,s===null?Hf:s}function Yb(){var s=et.A;return et.A=kC,s}function xg(){Je=4,ao||(ce&4194048)!==ce&&gs.current!==null||(Cu=!0),(oo&134217727)===0&&(Cl&134217727)===0||ze===null||co(ze,ce,_s,!1)}function Rg(s,a,u){var d=Te;Te|=2;var y=Wb(),b=Yb();(ze!==s||ce!==a)&&(td=null,Ou(s,a)),a=!1;var C=Je;t:do try{if(Ee!==0&&ne!==null){var M=ne,W=Zi;switch(Ee){case 8:Ag(),C=6;break t;case 3:case 2:case 9:case 6:gs.current===null&&(a=!0);var rt=Ee;if(Ee=0,Zi=null,ku(s,M,W,rt),u&&Cu){C=0;break t}break;default:rt=Ee,Ee=0,Zi=null,ku(s,M,W,rt)}}NC(),C=Je;break}catch(ft){Zb(s,ft)}while(!0);return a&&s.shellSuspendCounter++,Bs=ps=null,Te=d,et.H=y,et.A=b,ne===null&&(ze=null,ce=0,gl()),C}function NC(){for(;ne!==null;)Kb(ne)}function VC(s,a){var u=Te;Te|=2;var d=Wb(),y=Yb();ze!==s||ce!==a?(td=null,Jf=Hn()+500,Ou(s,a)):Cu=Pi(s,a);t:do try{if(Ee!==0&&ne!==null){a=ne;var b=Zi;e:switch(Ee){case 1:Ee=0,Zi=null,ku(s,a,b,1);break;case 2:case 9:if(o0(b)){Ee=0,Zi=null,$b(a);break}a=function(){Ee!==2&&Ee!==9||ze!==s||(Ee=7),gr(s)},b.then(a,a);break t;case 3:Ee=7;break t;case 4:Ee=5;break t;case 7:o0(b)?(Ee=0,Zi=null,$b(a)):(Ee=0,Zi=null,ku(s,a,b,7));break;case 5:var C=null;switch(ne.tag){case 26:C=ne.memoizedState;case 5:case 27:var M=ne;if(!C||MT(C)){Ee=0,Zi=null;var W=M.sibling;if(W!==null)ne=W;else{var rt=M.return;rt!==null?(ne=rt,nd(rt)):ne=null}break e}}Ee=0,Zi=null,ku(s,a,b,5);break;case 6:Ee=0,Zi=null,ku(s,a,b,6);break;case 8:Ag(),Je=6;break t;default:throw Error(i(462))}}zC();break}catch(ft){Zb(s,ft)}while(!0);return Bs=ps=null,et.H=d,et.A=y,Te=u,ne!==null?0:(ze=null,ce=0,gl(),Je)}function zC(){for(;ne!==null&&!wa();)Kb(ne)}function Kb(s){var a=Eb(s.alternate,s,na);s.memoizedProps=s.pendingProps,a===null?nd(s):ne=a}function $b(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=gb(u,a,a.pendingProps,a.type,void 0,ce);break;case 11:a=gb(u,a,a.pendingProps,a.type.render,a.ref,ce);break;case 5:Hp(a);default:Sb(u,a),a=ne=Ec(a,na),a=Eb(u,a,na)}s.memoizedProps=s.pendingProps,a===null?nd(s):ne=a}function ku(s,a,u,d){Bs=ps=null,Hp(a),Su=null,Lc=0;var y=a.return;try{if(RC(s,y,a,u,ce)){Je=1,Wf(s,li(u,s.current)),ne=null;return}}catch(b){if(y!==null)throw ne=y,b;Je=1,Wf(s,li(u,s.current)),ne=null;return}a.flags&32768?(qt||d===1?s=!0:Cu||(ce&536870912)!==0?s=!1:(ao=s=!0,(d===2||d===9||d===3||d===6)&&(d=gs.current,d!==null&&d.tag===13&&(d.flags|=16384))),Xb(a,s)):nd(a)}function nd(s){var a=s;do{if((a.flags&32768)!==0){Xb(a,ao);return}s=a.return;var u=IC(a.alternate,a,na);if(u!==null){ne=u;return}if(a=a.sibling,a!==null){ne=a;return}ne=a=s}while(a!==null);Je===0&&(Je=5)}function Xb(s,a){do{var u=PC(s.alternate,s);if(u!==null){u.flags&=32767,ne=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){ne=s;return}ne=s=u}while(s!==null);Je=6,ne=null}function Qb(s,a,u,d,y,b,C,M,W){s.cancelPendingCommit=null;do id();while(Ln!==0);if((Te&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(b=a.lanes|a.childLanes,b|=Fi,tl(s,u,b,C,M,W),s===ze&&(ne=ze=null,ce=0),Pu=a,uo=s,Mu=u,Eg=b,wg=y,Hb=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,HC(As,function(){return iT(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=et.T,et.T=null,y=vt.p,vt.p=2,C=Te,Te|=4;try{MC(s,a,u)}finally{Te=C,vt.p=y,et.T=d}}Ln=1,Jb(),tT(),eT()}}function Jb(){if(Ln===1){Ln=0;var s=uo,a=Pu,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=et.T,et.T=null;var d=vt.p;vt.p=2;var y=Te;Te|=4;try{Lb(a,s);var b=Bg,C=dl(s.containerInfo),M=b.focusedElem,W=b.selectionRange;if(C!==M&&M&&M.ownerDocument&&cu(M.ownerDocument.documentElement,M)){if(W!==null&&ml(M)){var rt=W.start,ft=W.end;if(ft===void 0&&(ft=rt),"selectionStart"in M)M.selectionStart=rt,M.selectionEnd=Math.min(ft,M.value.length);else{var pt=M.ownerDocument||document,at=pt&&pt.defaultView||window;if(at.getSelection){var ot=at.getSelection(),Ft=M.textContent.length,zt=Math.min(W.start,Ft),Pe=W.end===void 0?zt:Math.min(W.end,Ft);!ot.extend&&zt>Pe&&(C=Pe,Pe=zt,zt=C);var X=bc(M,zt),$=bc(M,Pe);if(X&&$&&(ot.rangeCount!==1||ot.anchorNode!==X.node||ot.anchorOffset!==X.offset||ot.focusNode!==$.node||ot.focusOffset!==$.offset)){var nt=pt.createRange();nt.setStart(X.node,X.offset),ot.removeAllRanges(),zt>Pe?(ot.addRange(nt),ot.extend($.node,$.offset)):(nt.setEnd($.node,$.offset),ot.addRange(nt))}}}}for(pt=[],ot=M;ot=ot.parentNode;)ot.nodeType===1&&pt.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<pt.length;M++){var dt=pt[M];dt.element.scrollLeft=dt.left,dt.element.scrollTop=dt.top}}pd=!!zg,Bg=zg=null}finally{Te=y,vt.p=d,et.T=u}}s.current=a,Ln=2}}function tT(){if(Ln===2){Ln=0;var s=uo,a=Pu,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=et.T,et.T=null;var d=vt.p;vt.p=2;var y=Te;Te|=4;try{Mb(s,a.alternate,a)}finally{Te=y,vt.p=d,et.T=u}}Ln=3}}function eT(){if(Ln===4||Ln===3){Ln=0,Yo();var s=uo,a=Pu,u=Mu,d=Hb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ln=5:(Ln=0,Pu=uo=null,nT(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(lo=null),Ra(u),a=a.stateNode,fe&&typeof fe.onCommitFiberRoot=="function")try{fe.onCommitFiberRoot(ke,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=et.T,y=vt.p,vt.p=2,et.T=null;try{for(var b=s.onRecoverableError,C=0;C<d.length;C++){var M=d[C];b(M.value,{componentStack:M.stack})}}finally{et.T=a,vt.p=y}}(Mu&3)!==0&&id(),gr(s),y=s.pendingLanes,(u&4194090)!==0&&(y&42)!==0?s===Sg?qc++:(qc=0,Sg=s):qc=0,Gc(0)}}function nT(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Sc(a)))}function id(s){return Jb(),tT(),eT(),iT()}function iT(){if(Ln!==5)return!1;var s=uo,a=Eg;Eg=0;var u=Ra(Mu),d=et.T,y=vt.p;try{vt.p=32>u?32:u,et.T=null,u=wg,wg=null;var b=uo,C=Mu;if(Ln=0,Pu=uo=null,Mu=0,(Te&6)!==0)throw Error(i(331));var M=Te;if(Te|=4,Ub(b.current),Vb(b,b.current,C,u),Te=M,Gc(0,!1),fe&&typeof fe.onPostCommitFiberRoot=="function")try{fe.onPostCommitFiberRoot(ke,b)}catch{}return!0}finally{vt.p=y,et.T=d,nT(s,a)}}function sT(s,a,u){a=li(u,a),a=ng(s.stateNode,a,2),s=Ja(s,a,2),s!==null&&(es(s,2),gr(s))}function Oe(s,a,u){if(s.tag===3)sT(s,s,u);else for(;a!==null;){if(a.tag===3){sT(a,s,u);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(lo===null||!lo.has(d))){s=li(u,s),u=lb(2),d=Ja(a,u,2),d!==null&&(ub(u,d,a,s),es(d,2),gr(d));break}}a=a.return}}function Cg(s,a,u){var d=s.pingCache;if(d===null){d=s.pingCache=new DC;var y=new Set;d.set(a,y)}else y=d.get(a),y===void 0&&(y=new Set,d.set(a,y));y.has(u)||(yg=!0,y.add(u),s=BC.bind(null,s,a,u),a.then(s,s))}function BC(s,a,u){var d=s.pingCache;d!==null&&d.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,ze===s&&(ce&u)===u&&(Je===4||Je===3&&(ce&62914560)===ce&&300>Hn()-Tg?(Te&2)===0&&Ou(s,0):vg|=u,Iu===ce&&(Iu=0)),gr(s)}function rT(s,a){a===0&&(a=xa()),s=Wa(s,a),s!==null&&(es(s,a),gr(s))}function UC(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),rT(s,u)}function jC(s,a){var u=0;switch(s.tag){case 13:var d=s.stateNode,y=s.memoizedState;y!==null&&(u=y.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(a),rT(s,u)}function HC(s,a){return Ss(s,a)}var sd=null,Du=null,Ig=!1,rd=!1,Pg=!1,Il=0;function gr(s){s!==Du&&s.next===null&&(Du===null?sd=Du=s:Du=Du.next=s),rd=!0,Ig||(Ig=!0,qC())}function Gc(s,a){if(!Pg&&rd){Pg=!0;do for(var u=!1,d=sd;d!==null;){if(s!==0){var y=d.pendingLanes;if(y===0)var b=0;else{var C=d.suspendedLanes,M=d.pingedLanes;b=(1<<31-Tn(42|s)+1)-1,b&=y&~(C&~M),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,uT(d,b))}else b=ce,b=Aa(d,d===ze?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Pi(d,b)||(u=!0,uT(d,b));d=d.next}while(u);Pg=!1}}function FC(){aT()}function aT(){rd=Ig=!1;var s=0;Il!==0&&(QC()&&(s=Il),Il=0);for(var a=Hn(),u=null,d=sd;d!==null;){var y=d.next,b=oT(d,a);b===0?(d.next=null,u===null?sd=y:u.next=y,y===null&&(Du=u)):(u=d,(s!==0||(b&3)!==0)&&(rd=!0)),d=y}Gc(s)}function oT(s,a){for(var u=s.suspendedLanes,d=s.pingedLanes,y=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var C=31-Tn(b),M=1<<C,W=y[C];W===-1?((M&u)===0||(M&d)!==0)&&(y[C]=Qo(M,a)):W<=a&&(s.expiredLanes|=M),b&=~M}if(a=ze,u=ce,u=Aa(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,u===0||s===a&&(Ee===2||Ee===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&Mr(d),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||Pi(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(d!==null&&Mr(d),Ra(u)){case 2:case 8:u=Or;break;case 32:u=As;break;case 268435456:u=kr;break;default:u=As}return d=lT.bind(null,s),u=Ss(u,d),s.callbackPriority=a,s.callbackNode=u,a}return d!==null&&d!==null&&Mr(d),s.callbackPriority=2,s.callbackNode=null,2}function lT(s,a){if(Ln!==0&&Ln!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(id()&&s.callbackNode!==u)return null;var d=ce;return d=Aa(s,s===ze?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(qb(s,d,a),oT(s,Hn()),s.callbackNode!=null&&s.callbackNode===u?lT.bind(null,s):null)}function uT(s,a){if(id())return null;qb(s,a,!0)}function qC(){tI(function(){(Te&6)!==0?Ss(Ko,FC):aT()})}function Mg(){return Il===0&&(Il=Jo()),Il}function cT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ar(""+s)}function hT(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function GC(s,a,u,d,y){if(a==="submit"&&u&&u.stateNode===y){var b=cT((y[Xe]||null).action),C=d.submitter;C&&(a=(a=C[Xe]||null)?cT(a.formAction):C.getAttribute("formAction"),a!==null&&(b=a,C=null));var M=new Ur("action","action",null,d,y);s.push({event:M,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Il!==0){var W=C?hT(y,C):new FormData(y);Xp(u,{pending:!0,data:W,method:y.method,action:b},null,W)}}else typeof b=="function"&&(M.preventDefault(),W=C?hT(y,C):new FormData(y),Xp(u,{pending:!0,data:W,method:y.method,action:b},b,W))},currentTarget:y}]})}}for(var Og=0;Og<Gr.length;Og++){var kg=Gr[Og],ZC=kg.toLowerCase(),WC=kg[0].toUpperCase()+kg.slice(1);Hi(ZC,"on"+WC)}Hi(wf,"onAnimationEnd"),Hi(ji,"onAnimationIteration"),Hi(pl,"onAnimationStart"),Hi("dblclick","onDoubleClick"),Hi("focusin","onFocus"),Hi("focusout","onBlur"),Hi(xp,"onTransitionRun"),Hi(mu,"onTransitionStart"),Hi(Rp,"onTransitionCancel"),Hi(Tc,"onTransitionEnd"),is("onMouseEnter",["mouseout","mouseover"]),is("onMouseLeave",["mouseout","mouseover"]),is("onPointerEnter",["pointerout","pointerover"]),is("onPointerLeave",["pointerout","pointerover"]),ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zc));function fT(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var d=s[u],y=d.event;d=d.listeners;t:{var b=void 0;if(a)for(var C=d.length-1;0<=C;C--){var M=d[C],W=M.instance,rt=M.currentTarget;if(M=M.listener,W!==b&&y.isPropagationStopped())break t;b=M,y.currentTarget=rt;try{b(y)}catch(ft){Zf(ft)}y.currentTarget=null,b=W}else for(C=0;C<d.length;C++){if(M=d[C],W=M.instance,rt=M.currentTarget,M=M.listener,W!==b&&y.isPropagationStopped())break t;b=M,y.currentTarget=rt;try{b(y)}catch(ft){Zf(ft)}y.currentTarget=null,b=W}}}}function ie(s,a){var u=a[qn];u===void 0&&(u=a[qn]=new Set);var d=s+"__bubble";u.has(d)||(dT(a,s,2,!1),u.add(d))}function Dg(s,a,u){var d=0;a&&(d|=4),dT(u,s,d,a)}var ad="_reactListening"+Math.random().toString(36).slice(2);function Lg(s){if(!s[ad]){s[ad]=!0,il.forEach(function(u){u!=="selectionchange"&&(YC.has(u)||Dg(u,!1,s),Dg(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[ad]||(a[ad]=!0,Dg("selectionchange",!1,a))}}function dT(s,a,u,d){switch(VT(a)){case 2:var y=TI;break;case 8:y=EI;break;default:y=Kg}u=y.bind(null,a,u,s),y=void 0,!Gn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),d?y!==void 0?s.addEventListener(a,u,{capture:!0,passive:y}):s.addEventListener(a,u,!0):y!==void 0?s.addEventListener(a,u,{passive:y}):s.addEventListener(a,u,!1)}function Ng(s,a,u,d,y){var b=d;if((a&1)===0&&(a&2)===0&&d!==null)t:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var M=d.stateNode.containerInfo;if(M===y)break;if(C===4)for(C=d.return;C!==null;){var W=C.tag;if((W===3||W===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;M!==null;){if(C=Mi(M),C===null)return;if(W=C.tag,W===5||W===6||W===26||W===27){d=b=C;continue t}M=M.parentNode}}d=d.return}ri(function(){var rt=b,ft=kn(u),pt=[];t:{var at=Sf.get(s);if(at!==void 0){var ot=Ur,Ft=s;switch(s){case"keypress":if(Re(u)===0)break t;case"keydown":case"keyup":ot=za;break;case"focusin":Ft="focus",ot=ka;break;case"focusout":Ft="blur",ot=ka;break;case"beforeblur":case"afterblur":ot=ka;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=An;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=pc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=au;break;case wf:case ji:case pl:ot=La;break;case Tc:ot=ou;break;case"scroll":case"scrollend":ot=su;break;case"wheel":ot=Fr;break;case"copy":case"cut":case"paste":ot=or;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Ba;break;case"toggle":case"beforetoggle":ot=cs}var zt=(a&4)!==0,Pe=!zt&&(s==="scroll"||s==="scrollend"),X=zt?at!==null?at+"Capture":null:at;zt=[];for(var $=rt,nt;$!==null;){var dt=$;if(nt=dt.stateNode,dt=dt.tag,dt!==5&&dt!==26&&dt!==27||nt===null||X===null||(dt=ue($,X),dt!=null&&zt.push(Wc($,dt,nt))),Pe)break;$=$.return}0<zt.length&&(at=new ot(at,Ft,null,u,ft),pt.push({event:at,listeners:zt}))}}if((a&7)===0){t:{if(at=s==="mouseover"||s==="pointerover",ot=s==="mouseout"||s==="pointerout",at&&u!==Ni&&(Ft=u.relatedTarget||u.fromElement)&&(Mi(Ft)||Ft[di]))break t;if((ot||at)&&(at=ft.window===ft?ft:(at=ft.ownerDocument)?at.defaultView||at.parentWindow:window,ot?(Ft=u.relatedTarget||u.toElement,ot=rt,Ft=Ft?Mi(Ft):null,Ft!==null&&(Pe=l(Ft),zt=Ft.tag,Ft!==Pe||zt!==5&&zt!==27&&zt!==6)&&(Ft=null)):(ot=null,Ft=rt),ot!==Ft)){if(zt=An,dt="onMouseLeave",X="onMouseEnter",$="mouse",(s==="pointerout"||s==="pointerover")&&(zt=Ba,dt="onPointerLeave",X="onPointerEnter",$="pointer"),Pe=ot==null?at:Mn(ot),nt=Ft==null?at:Mn(Ft),at=new zt(dt,$+"leave",ot,u,ft),at.target=Pe,at.relatedTarget=nt,dt=null,Mi(ft)===rt&&(zt=new zt(X,$+"enter",Ft,u,ft),zt.target=nt,zt.relatedTarget=Pe,dt=zt),Pe=dt,ot&&Ft)e:{for(zt=ot,X=Ft,$=0,nt=zt;nt;nt=Lu(nt))$++;for(nt=0,dt=X;dt;dt=Lu(dt))nt++;for(;0<$-nt;)zt=Lu(zt),$--;for(;0<nt-$;)X=Lu(X),nt--;for(;$--;){if(zt===X||X!==null&&zt===X.alternate)break e;zt=Lu(zt),X=Lu(X)}zt=null}else zt=null;ot!==null&&mT(pt,at,ot,zt,!1),Ft!==null&&Pe!==null&&mT(pt,Pe,Ft,zt,!0)}}t:{if(at=rt?Mn(rt):window,ot=at.nodeName&&at.nodeName.toLowerCase(),ot==="select"||ot==="input"&&at.type==="file")var Pt=ja;else if(Ne(at))if(_c)Pt=Ap;else{Pt=Sp;var ee=vc}else ot=at.nodeName,!ot||ot.toLowerCase()!=="input"||at.type!=="checkbox"&&at.type!=="radio"?rt&&Br(rt.elementType)&&(Pt=ja):Pt=zs;if(Pt&&(Pt=Pt(s,rt))){Ns(pt,Pt,u,ft);break t}ee&&ee(s,at,rt),s==="focusout"&&rt&&at.type==="number"&&rt.memoizedProps.value!=null&&Di(at,"number",at.value)}switch(ee=rt?Mn(rt):window,s){case"focusin":(Ne(ee)||ee.contentEditable==="true")&&(Ui=ee,qa=rt,qr=null);break;case"focusout":qr=qa=Ui=null;break;case"mousedown":fu=!0;break;case"contextmenu":case"mouseup":case"dragend":fu=!1,Tf(pt,u,ft);break;case"selectionchange":if(hu)break;case"keydown":case"keyup":Tf(pt,u,ft)}var kt;if(Yn)t:{switch(s){case"compositionstart":var Bt="onCompositionStart";break t;case"compositionend":Bt="onCompositionEnd";break t;case"compositionupdate":Bt="onCompositionUpdate";break t}Bt=void 0}else se?ut(s,u)&&(Bt="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Bt="onCompositionStart");Bt&&(x&&u.locale!=="ko"&&(se||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&se&&(kt=Os()):(pi=ft,Zn="value"in pi?pi.value:pi.textContent,se=!0)),ee=od(rt,Bt),0<ee.length&&(Bt=new Wn(Bt,s,null,u,ft),pt.push({event:Bt,listeners:ee}),kt?Bt.data=kt:(kt=wt(u),kt!==null&&(Bt.data=kt)))),(kt=w?Qe(s,u):re(s,u))&&(Bt=od(rt,"onBeforeInput"),0<Bt.length&&(ee=new Wn("onBeforeInput","beforeinput",null,u,ft),pt.push({event:ee,listeners:Bt}),ee.data=kt)),GC(pt,s,rt,u,ft)}fT(pt,a)})}function Wc(s,a,u){return{instance:s,listener:a,currentTarget:u}}function od(s,a){for(var u=a+"Capture",d=[];s!==null;){var y=s,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=ue(s,u),y!=null&&d.unshift(Wc(s,y,b)),y=ue(s,a),y!=null&&d.push(Wc(s,y,b))),s.tag===3)return d;s=s.return}return[]}function Lu(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function mT(s,a,u,d,y){for(var b=a._reactName,C=[];u!==null&&u!==d;){var M=u,W=M.alternate,rt=M.stateNode;if(M=M.tag,W!==null&&W===d)break;M!==5&&M!==26&&M!==27||rt===null||(W=rt,y?(rt=ue(u,b),rt!=null&&C.unshift(Wc(u,rt,W))):y||(rt=ue(u,b),rt!=null&&C.push(Wc(u,rt,W)))),u=u.return}C.length!==0&&s.push({event:a,listeners:C})}var KC=/\r\n?/g,$C=/\u0000|\uFFFD/g;function pT(s){return(typeof s=="string"?s:""+s).replace(KC,`
`).replace($C,"")}function gT(s,a){return a=pT(a),pT(s)===a}function ld(){}function Ie(s,a,u,d,y,b){switch(u){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||wn(s,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&wn(s,""+d);break;case"className":ss(s,"class",d);break;case"tabIndex":ss(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ss(s,u,d);break;case"style":Ps(s,d,b);break;case"data":if(a!=="object"){ss(s,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=ar(""+d),s.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(a!=="input"&&Ie(s,a,"name",y.name,y,null),Ie(s,a,"formEncType",y.formEncType,y,null),Ie(s,a,"formMethod",y.formMethod,y,null),Ie(s,a,"formTarget",y.formTarget,y,null)):(Ie(s,a,"encType",y.encType,y,null),Ie(s,a,"method",y.method,y,null),Ie(s,a,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=ar(""+d),s.setAttribute(u,d);break;case"onClick":d!=null&&(s.onclick=ld);break;case"onScroll":d!=null&&ie("scroll",s);break;case"onScrollEnd":d!=null&&ie("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}u=ar(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""+d):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":d===!0?s.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,d):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(u,d):s.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(u):s.setAttribute(u,d);break;case"popover":ie("beforetoggle",s),ie("toggle",s),nr(s,"popover",d);break;case"xlinkActuate":pn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":pn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":pn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":pn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":pn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":pn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":pn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":pn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":pn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":nr(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=rl.get(u)||u,nr(s,u,d))}}function Vg(s,a,u,d,y,b){switch(u){case"style":Ps(s,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof d=="string"?wn(s,d):(typeof d=="number"||typeof d=="bigint")&&wn(s,""+d);break;case"onScroll":d!=null&&ie("scroll",s);break;case"onScrollEnd":d!=null&&ie("scrollend",s);break;case"onClick":d!=null&&(s.onclick=ld);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ia.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),a=u.slice(2,y?u.length-7:void 0),b=s[Xe]||null,b=b!=null?b[u]:null,typeof b=="function"&&s.removeEventListener(a,b,y),typeof d=="function")){typeof b!="function"&&b!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,d,y);break t}u in s?s[u]=d:d===!0?s.setAttribute(u,""):nr(s,u,d)}}}function Nn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ie("error",s),ie("load",s);var d=!1,y=!1,b;for(b in u)if(u.hasOwnProperty(b)){var C=u[b];if(C!=null)switch(b){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Ie(s,a,b,C,u,null)}}y&&Ie(s,a,"srcSet",u.srcSet,u,null),d&&Ie(s,a,"src",u.src,u,null);return;case"input":ie("invalid",s);var M=b=C=y=null,W=null,rt=null;for(d in u)if(u.hasOwnProperty(d)){var ft=u[d];if(ft!=null)switch(d){case"name":y=ft;break;case"type":C=ft;break;case"checked":W=ft;break;case"defaultChecked":rt=ft;break;case"value":b=ft;break;case"defaultValue":M=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(i(137,a));break;default:Ie(s,a,d,ft,u,null)}}zr(s,b,M,W,rt,C,y,!1),rr(s);return;case"select":ie("invalid",s),d=C=b=null;for(y in u)if(u.hasOwnProperty(y)&&(M=u[y],M!=null))switch(y){case"value":b=M;break;case"defaultValue":C=M;break;case"multiple":d=M;default:Ie(s,a,y,M,u,null)}a=b,u=C,s.multiple=!!d,a!=null?On(s,!!d,a,!1):u!=null&&On(s,!!d,u,!0);return;case"textarea":ie("invalid",s),b=y=d=null;for(C in u)if(u.hasOwnProperty(C)&&(M=u[C],M!=null))switch(C){case"value":d=M;break;case"defaultValue":y=M;break;case"children":b=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:Ie(s,a,C,M,u,null)}si(s,d,y,b),rr(s);return;case"option":for(W in u)if(u.hasOwnProperty(W)&&(d=u[W],d!=null))switch(W){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ie(s,a,W,d,u,null)}return;case"dialog":ie("beforetoggle",s),ie("toggle",s),ie("cancel",s),ie("close",s);break;case"iframe":case"object":ie("load",s);break;case"video":case"audio":for(d=0;d<Zc.length;d++)ie(Zc[d],s);break;case"image":ie("error",s),ie("load",s);break;case"details":ie("toggle",s);break;case"embed":case"source":case"link":ie("error",s),ie("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in u)if(u.hasOwnProperty(rt)&&(d=u[rt],d!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Ie(s,a,rt,d,u,null)}return;default:if(Br(a)){for(ft in u)u.hasOwnProperty(ft)&&(d=u[ft],d!==void 0&&Vg(s,a,ft,d,u,void 0));return}}for(M in u)u.hasOwnProperty(M)&&(d=u[M],d!=null&&Ie(s,a,M,d,u,null))}function XC(s,a,u,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,C=null,M=null,W=null,rt=null,ft=null;for(ot in u){var pt=u[ot];if(u.hasOwnProperty(ot)&&pt!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":W=pt;default:d.hasOwnProperty(ot)||Ie(s,a,ot,null,d,pt)}}for(var at in d){var ot=d[at];if(pt=u[at],d.hasOwnProperty(at)&&(ot!=null||pt!=null))switch(at){case"type":b=ot;break;case"name":y=ot;break;case"checked":rt=ot;break;case"defaultChecked":ft=ot;break;case"value":C=ot;break;case"defaultValue":M=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(i(137,a));break;default:ot!==pt&&Ie(s,a,at,ot,d,pt)}}Le(s,C,M,W,rt,ft,b,y);return;case"select":ot=C=M=at=null;for(b in u)if(W=u[b],u.hasOwnProperty(b)&&W!=null)switch(b){case"value":break;case"multiple":ot=W;default:d.hasOwnProperty(b)||Ie(s,a,b,null,d,W)}for(y in d)if(b=d[y],W=u[y],d.hasOwnProperty(y)&&(b!=null||W!=null))switch(y){case"value":at=b;break;case"defaultValue":M=b;break;case"multiple":C=b;default:b!==W&&Ie(s,a,y,b,d,W)}a=M,u=C,d=ot,at!=null?On(s,!!u,at,!1):!!d!=!!u&&(a!=null?On(s,!!u,a,!0):On(s,!!u,u?[]:"",!1));return;case"textarea":ot=at=null;for(M in u)if(y=u[M],u.hasOwnProperty(M)&&y!=null&&!d.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Ie(s,a,M,null,d,y)}for(C in d)if(y=d[C],b=u[C],d.hasOwnProperty(C)&&(y!=null||b!=null))switch(C){case"value":at=y;break;case"defaultValue":ot=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==b&&Ie(s,a,C,y,d,b)}jt(s,at,ot);return;case"option":for(var Ft in u)if(at=u[Ft],u.hasOwnProperty(Ft)&&at!=null&&!d.hasOwnProperty(Ft))switch(Ft){case"selected":s.selected=!1;break;default:Ie(s,a,Ft,null,d,at)}for(W in d)if(at=d[W],ot=u[W],d.hasOwnProperty(W)&&at!==ot&&(at!=null||ot!=null))switch(W){case"selected":s.selected=at&&typeof at!="function"&&typeof at!="symbol";break;default:Ie(s,a,W,at,d,ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var zt in u)at=u[zt],u.hasOwnProperty(zt)&&at!=null&&!d.hasOwnProperty(zt)&&Ie(s,a,zt,null,d,at);for(rt in d)if(at=d[rt],ot=u[rt],d.hasOwnProperty(rt)&&at!==ot&&(at!=null||ot!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(i(137,a));break;default:Ie(s,a,rt,at,d,ot)}return;default:if(Br(a)){for(var Pe in u)at=u[Pe],u.hasOwnProperty(Pe)&&at!==void 0&&!d.hasOwnProperty(Pe)&&Vg(s,a,Pe,void 0,d,at);for(ft in d)at=d[ft],ot=u[ft],!d.hasOwnProperty(ft)||at===ot||at===void 0&&ot===void 0||Vg(s,a,ft,at,d,ot);return}}for(var X in u)at=u[X],u.hasOwnProperty(X)&&at!=null&&!d.hasOwnProperty(X)&&Ie(s,a,X,null,d,at);for(pt in d)at=d[pt],ot=u[pt],!d.hasOwnProperty(pt)||at===ot||at==null&&ot==null||Ie(s,a,pt,at,d,ot)}var zg=null,Bg=null;function ud(s){return s.nodeType===9?s:s.ownerDocument}function _T(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yT(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Ug(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var jg=null;function QC(){var s=window.event;return s&&s.type==="popstate"?s===jg?!1:(jg=s,!0):(jg=null,!1)}var vT=typeof setTimeout=="function"?setTimeout:void 0,JC=typeof clearTimeout=="function"?clearTimeout:void 0,bT=typeof Promise=="function"?Promise:void 0,tI=typeof queueMicrotask=="function"?queueMicrotask:typeof bT<"u"?function(s){return bT.resolve(null).then(s).catch(eI)}:vT;function eI(s){setTimeout(function(){throw s})}function ho(s){return s==="head"}function TT(s,a){var u=a,d=0,y=0;do{var b=u.nextSibling;if(s.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"){if(0<d&&8>d){u=d;var C=s.ownerDocument;if(u&1&&Yc(C.documentElement),u&2&&Yc(C.body),u&4)for(u=C.head,Yc(u),C=u.firstChild;C;){var M=C.nextSibling,W=C.nodeName;C[er]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&C.rel.toLowerCase()==="stylesheet"||u.removeChild(C),C=M}}if(y===0){s.removeChild(b),nh(a);return}y--}else u==="$"||u==="$?"||u==="$!"?y++:d=u.charCodeAt(0)-48;else d=0;u=b}while(u);nh(a)}function Hg(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Hg(u),Cs(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function nI(s,a,u,d){for(;s.nodeType===1;){var y=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[er])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=Hs(s.nextSibling),s===null)break}return null}function iI(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=Hs(s.nextSibling),s===null))return null;return s}function Fg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function sI(s,a){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")a();else{var d=function(){a(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function Hs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var qg=null;function ET(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}function wT(s,a,u){switch(a=ud(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Yc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Cs(s)}var ys=new Map,ST=new Set;function cd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ia=vt.d;vt.d={f:rI,r:aI,D:oI,C:lI,L:uI,m:cI,X:fI,S:hI,M:dI};function rI(){var s=ia.f(),a=ed();return s||a}function aI(s){var a=Oi(s);a!==null&&a.tag===5&&a.type==="form"?q0(a):ia.r(s)}var Nu=typeof document>"u"?null:document;function AT(s,a,u){var d=Nu;if(d&&typeof a=="string"&&a){var y=Be(a);y='link[rel="'+s+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),ST.has(y)||(ST.add(y),s={rel:s,crossOrigin:u,href:a},d.querySelector(y)===null&&(a=d.createElement("link"),Nn(a,"link",s),Ze(a),d.head.appendChild(a)))}}function oI(s){ia.D(s),AT("dns-prefetch",s,null)}function lI(s,a){ia.C(s,a),AT("preconnect",s,a)}function uI(s,a,u){ia.L(s,a,u);var d=Nu;if(d&&s&&a){var y='link[rel="preload"][as="'+Be(a)+'"]';a==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+Be(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+Be(u.imageSizes)+'"]')):y+='[href="'+Be(s)+'"]';var b=y;switch(a){case"style":b=Vu(s);break;case"script":b=zu(s)}ys.has(b)||(s=v({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),ys.set(b,s),d.querySelector(y)!==null||a==="style"&&d.querySelector(Kc(b))||a==="script"&&d.querySelector($c(b))||(a=d.createElement("link"),Nn(a,"link",s),Ze(a),d.head.appendChild(a)))}}function cI(s,a){ia.m(s,a);var u=Nu;if(u&&s){var d=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+Be(d)+'"][href="'+Be(s)+'"]',b=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=zu(s)}if(!ys.has(b)&&(s=v({rel:"modulepreload",href:s},a),ys.set(b,s),u.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector($c(b)))return}d=u.createElement("link"),Nn(d,"link",s),Ze(d),u.head.appendChild(d)}}}function hI(s,a,u){ia.S(s,a,u);var d=Nu;if(d&&s){var y=En(d).hoistableStyles,b=Vu(s);a=a||"default";var C=y.get(b);if(!C){var M={loading:0,preload:null};if(C=d.querySelector(Kc(b)))M.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":a},u),(u=ys.get(b))&&Gg(s,u);var W=C=d.createElement("link");Ze(W),Nn(W,"link",s),W._p=new Promise(function(rt,ft){W.onload=rt,W.onerror=ft}),W.addEventListener("load",function(){M.loading|=1}),W.addEventListener("error",function(){M.loading|=2}),M.loading|=4,hd(C,a,d)}C={type:"stylesheet",instance:C,count:1,state:M},y.set(b,C)}}}function fI(s,a){ia.X(s,a);var u=Nu;if(u&&s){var d=En(u).hoistableScripts,y=zu(s),b=d.get(y);b||(b=u.querySelector($c(y)),b||(s=v({src:s,async:!0},a),(a=ys.get(y))&&Zg(s,a),b=u.createElement("script"),Ze(b),Nn(b,"link",s),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function dI(s,a){ia.M(s,a);var u=Nu;if(u&&s){var d=En(u).hoistableScripts,y=zu(s),b=d.get(y);b||(b=u.querySelector($c(y)),b||(s=v({src:s,async:!0,type:"module"},a),(a=ys.get(y))&&Zg(s,a),b=u.createElement("script"),Ze(b),Nn(b,"link",s),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function xT(s,a,u,d){var y=(y=Et.current)?cd(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Vu(u.href),u=En(y).hoistableStyles,d=u.get(a),d||(d={type:"style",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Vu(u.href);var b=En(y).hoistableStyles,C=b.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,C),(b=y.querySelector(Kc(s)))&&!b._p&&(C.instance=b,C.state.loading=5),ys.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ys.set(s,u),b||mI(y,s,u,C.state))),a&&d===null)throw Error(i(528,""));return C}if(a&&d!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=zu(u),u=En(y).hoistableScripts,d=u.get(a),d||(d={type:"script",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Vu(s){return'href="'+Be(s)+'"'}function Kc(s){return'link[rel="stylesheet"]['+s+"]"}function RT(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function mI(s,a,u,d){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=s.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Nn(a,"link",u),Ze(a),s.head.appendChild(a))}function zu(s){return'[src="'+Be(s)+'"]'}function $c(s){return"script[async]"+s}function CT(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var d=s.querySelector('style[data-href~="'+Be(u.href)+'"]');if(d)return a.instance=d,Ze(d),d;var y=v({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),Ze(d),Nn(d,"style",y),hd(d,u.precedence,s),a.instance=d;case"stylesheet":y=Vu(u.href);var b=s.querySelector(Kc(y));if(b)return a.state.loading|=4,a.instance=b,Ze(b),b;d=RT(u),(y=ys.get(y))&&Gg(d,y),b=(s.ownerDocument||s).createElement("link"),Ze(b);var C=b;return C._p=new Promise(function(M,W){C.onload=M,C.onerror=W}),Nn(b,"link",d),a.state.loading|=4,hd(b,u.precedence,s),a.instance=b;case"script":return b=zu(u.src),(y=s.querySelector($c(b)))?(a.instance=y,Ze(y),y):(d=u,(y=ys.get(b))&&(d=v({},u),Zg(d,y)),s=s.ownerDocument||s,y=s.createElement("script"),Ze(y),Nn(y,"link",d),s.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,hd(d,u.precedence,s));return a.instance}function hd(s,a,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,b=y,C=0;C<d.length;C++){var M=d[C];if(M.dataset.precedence===a)b=M;else if(b!==y)break}b?b.parentNode.insertBefore(s,b.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function Gg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Zg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var fd=null;function IT(s,a,u){if(fd===null){var d=new Map,y=fd=new Map;y.set(u,d)}else y=fd,d=y.get(u),d||(d=new Map,y.set(u,d));if(d.has(s))return d;for(d.set(s,null),u=u.getElementsByTagName(s),y=0;y<u.length;y++){var b=u[y];if(!(b[er]||b[tn]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var C=b.getAttribute(a)||"";C=s+C;var M=d.get(C);M?M.push(b):d.set(C,[b])}}return d}function PT(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function pI(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function MT(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Xc=null;function gI(){}function _I(s,a,u){if(Xc===null)throw Error(i(475));var d=Xc;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Vu(u.href),b=s.querySelector(Kc(y));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(d.count++,d=dd.bind(d),s.then(d,d)),a.state.loading|=4,a.instance=b,Ze(b);return}b=s.ownerDocument||s,u=RT(u),(y=ys.get(y))&&Gg(u,y),b=b.createElement("link"),Ze(b);var C=b;C._p=new Promise(function(M,W){C.onload=M,C.onerror=W}),Nn(b,"link",u),a.instance=b}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=dd.bind(d),s.addEventListener("load",a),s.addEventListener("error",a))}}function yI(){if(Xc===null)throw Error(i(475));var s=Xc;return s.stylesheets&&s.count===0&&Wg(s,s.stylesheets),0<s.count?function(a){var u=setTimeout(function(){if(s.stylesheets&&Wg(s,s.stylesheets),s.unsuspend){var d=s.unsuspend;s.unsuspend=null,d()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(u)}}:null}function dd(){if(this.count--,this.count===0){if(this.stylesheets)Wg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var md=null;function Wg(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,md=new Map,a.forEach(vI,s),md=null,dd.call(s))}function vI(s,a){if(!(a.state.loading&4)){var u=md.get(s);if(u)var d=u.get(null);else{u=new Map,md.set(s,u);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var C=y[b];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),d=C)}d&&u.set(null,d)}y=a.instance,C=y.getAttribute("data-precedence"),b=u.get(C)||d,b===d&&u.set(null,y),u.set(C,y),this.count++,d=dd.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),b?b.parentNode.insertBefore(y,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),a.state.loading|=4}}var Qc={$$typeof:Y,Provider:null,Consumer:null,_currentValue:mt,_currentValue2:mt,_threadCount:0};function bI(s,a,u,d,y,b,C,M){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ts(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ts(0),this.hiddenUpdates=ts(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function OT(s,a,u,d,y,b,C,M,W,rt,ft,pt){return s=new bI(s,a,u,C,M,W,rt,pt),a=1,b===!0&&(a|=24),b=ci(3,null,null,a),s.current=b,b.stateNode=s,a=Cp(),a.refCount++,s.pooledCache=a,a.refCount++,b.memoizedState={element:d,isDehydrated:u,cache:a},Op(b),s}function kT(s){return s?(s=Yr,s):Yr}function DT(s,a,u,d,y,b){y=kT(y),d.context===null?d.context=y:d.pendingContext=y,d=Qa(a),d.payload={element:u},b=b===void 0?null:b,b!==null&&(d.callback=b),u=Ja(s,d,a),u!==null&&(Yi(u,s,a),Cc(u,s,a))}function LT(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Yg(s,a){LT(s,a),(s=s.alternate)&&LT(s,a)}function NT(s){if(s.tag===13){var a=Wa(s,67108864);a!==null&&Yi(a,s,67108864),Yg(s,67108864)}}var pd=!0;function TI(s,a,u,d){var y=et.T;et.T=null;var b=vt.p;try{vt.p=2,Kg(s,a,u,d)}finally{vt.p=b,et.T=y}}function EI(s,a,u,d){var y=et.T;et.T=null;var b=vt.p;try{vt.p=8,Kg(s,a,u,d)}finally{vt.p=b,et.T=y}}function Kg(s,a,u,d){if(pd){var y=$g(d);if(y===null)Ng(s,a,d,gd,u),zT(s,d);else if(SI(y,s,a,u,d))d.stopPropagation();else if(zT(s,d),a&4&&-1<wI.indexOf(s)){for(;y!==null;){var b=Oi(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var C=fi(b.pendingLanes);if(C!==0){var M=b;for(M.pendingLanes|=2,M.entangledLanes|=2;C;){var W=1<<31-Tn(C);M.entanglements[1]|=W,C&=~W}gr(b),(Te&6)===0&&(Jf=Hn()+500,Gc(0))}}break;case 13:M=Wa(b,2),M!==null&&Yi(M,b,2),ed(),Yg(b,2)}if(b=$g(d),b===null&&Ng(s,a,d,gd,u),b===y)break;y=b}y!==null&&d.stopPropagation()}else Ng(s,a,d,null,u)}}function $g(s){return s=kn(s),Xg(s)}var gd=null;function Xg(s){if(gd=null,s=Mi(s),s!==null){var a=l(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return gd=s,null}function VT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sa()){case Ko:return 2;case Or:return 8;case As:case Jl:return 32;case kr:return 268435456;default:return 32}default:return 32}}var Qg=!1,fo=null,mo=null,po=null,Jc=new Map,th=new Map,go=[],wI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zT(s,a){switch(s){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":mo=null;break;case"mouseover":case"mouseout":po=null;break;case"pointerover":case"pointerout":Jc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":th.delete(a.pointerId)}}function eh(s,a,u,d,y,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:u,eventSystemFlags:d,nativeEvent:b,targetContainers:[y]},a!==null&&(a=Oi(a),a!==null&&NT(a)),s):(s.eventSystemFlags|=d,a=s.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),s)}function SI(s,a,u,d,y){switch(a){case"focusin":return fo=eh(fo,s,a,u,d,y),!0;case"dragenter":return mo=eh(mo,s,a,u,d,y),!0;case"mouseover":return po=eh(po,s,a,u,d,y),!0;case"pointerover":var b=y.pointerId;return Jc.set(b,eh(Jc.get(b)||null,s,a,u,d,y)),!0;case"gotpointercapture":return b=y.pointerId,th.set(b,eh(th.get(b)||null,s,a,u,d,y)),!0}return!1}function BT(s){var a=Mi(s.target);if(a!==null){var u=l(a);if(u!==null){if(a=u.tag,a===13){if(a=c(u),a!==null){s.blockedOn=a,Ca(s.priority,function(){if(u.tag===13){var d=Wi();d=Js(d);var y=Wa(u,d);y!==null&&Yi(y,u,d),Yg(u,d)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function _d(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=$g(s.nativeEvent);if(u===null){u=s.nativeEvent;var d=new u.constructor(u.type,u);Ni=d,u.target.dispatchEvent(d),Ni=null}else return a=Oi(u),a!==null&&NT(a),s.blockedOn=u,!1;a.shift()}return!0}function UT(s,a,u){_d(s)&&u.delete(a)}function AI(){Qg=!1,fo!==null&&_d(fo)&&(fo=null),mo!==null&&_d(mo)&&(mo=null),po!==null&&_d(po)&&(po=null),Jc.forEach(UT),th.forEach(UT)}function yd(s,a){s.blockedOn===a&&(s.blockedOn=null,Qg||(Qg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,AI)))}var vd=null;function jT(s){vd!==s&&(vd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){vd===s&&(vd=null);for(var a=0;a<s.length;a+=3){var u=s[a],d=s[a+1],y=s[a+2];if(typeof d!="function"){if(Xg(d||u)===null)continue;break}var b=Oi(u);b!==null&&(s.splice(a,3),a-=3,Xp(b,{pending:!0,data:y,method:u.method,action:d},d,y))}}))}function nh(s){function a(W){return yd(W,s)}fo!==null&&yd(fo,s),mo!==null&&yd(mo,s),po!==null&&yd(po,s),Jc.forEach(a),th.forEach(a);for(var u=0;u<go.length;u++){var d=go[u];d.blockedOn===s&&(d.blockedOn=null)}for(;0<go.length&&(u=go[0],u.blockedOn===null);)BT(u),u.blockedOn===null&&go.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var y=u[d],b=u[d+1],C=y[Xe]||null;if(typeof b=="function")C||jT(u);else if(C){var M=null;if(b&&b.hasAttribute("formAction")){if(y=b,C=b[Xe]||null)M=C.formAction;else if(Xg(y)!==null)continue}else M=C.action;typeof M=="function"?u[d+1]=M:(u.splice(d,3),d-=3),jT(u)}}}function Jg(s){this._internalRoot=s}bd.prototype.render=Jg.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,d=Wi();DT(u,d,s,a,null,null)},bd.prototype.unmount=Jg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;DT(s.current,2,null,s,null,null),ed(),a[di]=null}};function bd(s){this._internalRoot=s}bd.prototype.unstable_scheduleHydration=function(s){if(s){var a=tr();s={blockedOn:null,target:s,priority:a};for(var u=0;u<go.length&&a!==0&&a<go[u].priority;u++);go.splice(u,0,s),u===0&&BT(s)}};var HT=t.version;if(HT!=="19.1.0")throw Error(i(527,HT,"19.1.0"));vt.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=m(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var xI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:et,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Td.isDisabled&&Td.supportsFiber)try{ke=Td.inject(xI),fe=Td}catch{}}return sh.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,d="",y=sb,b=rb,C=ab,M=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks)),a=OT(s,1,!1,null,null,u,d,y,b,C,M,null),s[di]=a.current,Lg(s),new Jg(a)},sh.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var d=!1,y="",b=sb,C=rb,M=ab,W=null,rt=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(W=u.unstable_transitionCallbacks),u.formState!==void 0&&(rt=u.formState)),a=OT(s,1,!0,a,u??null,d,y,b,C,M,W,rt),a.context=kT(null),u=a.current,d=Wi(),d=Js(d),y=Qa(d),y.callback=null,Ja(u,y,d),u=d,a.current.lanes=u,es(a,u),gr(a),s[di]=a.current,Lg(s),new bd(a)},sh.version="19.1.0",sh}var QT;function VI(){if(QT)return n_.exports;QT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),n_.exports=NI(),n_.exports}var zI=VI();const BI=Ty(zI);var rh={},JT;function UI(){if(JT)return rh;JT=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.parse=c,rh.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,l=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function c(S,R){const P=new l,k=S.length;if(k<2)return P;const D=(R==null?void 0:R.decode)||v;let U=0;do{const q=S.indexOf("=",U);if(q===-1)break;const Y=S.indexOf(";",U),st=Y===-1?k:Y;if(q>st){U=S.lastIndexOf(";",q-1)+1;continue}const Q=f(S,U,q),ht=m(S,q,Q),V=S.slice(Q,ht);if(P[V]===void 0){let O=f(S,q+1,st),z=m(S,st,O);const B=D(S.slice(O,z));P[V]=B}U=st+1}while(U<k);return P}function f(S,R,P){do{const k=S.charCodeAt(R);if(k!==32&&k!==9)return R}while(++R<P);return P}function m(S,R,P){for(;R>P;){const k=S.charCodeAt(--R);if(k!==32&&k!==9)return R+1}return P}function p(S,R,P){const k=(P==null?void 0:P.encode)||encodeURIComponent;if(!n.test(S))throw new TypeError(`argument name is invalid: ${S}`);const D=k(R);if(!t.test(D))throw new TypeError(`argument val is invalid: ${R}`);let U=S+"="+D;if(!P)return U;if(P.maxAge!==void 0){if(!Number.isInteger(P.maxAge))throw new TypeError(`option maxAge is invalid: ${P.maxAge}`);U+="; Max-Age="+P.maxAge}if(P.domain){if(!e.test(P.domain))throw new TypeError(`option domain is invalid: ${P.domain}`);U+="; Domain="+P.domain}if(P.path){if(!i.test(P.path))throw new TypeError(`option path is invalid: ${P.path}`);U+="; Path="+P.path}if(P.expires){if(!E(P.expires)||!Number.isFinite(P.expires.valueOf()))throw new TypeError(`option expires is invalid: ${P.expires}`);U+="; Expires="+P.expires.toUTCString()}if(P.httpOnly&&(U+="; HttpOnly"),P.secure&&(U+="; Secure"),P.partitioned&&(U+="; Partitioned"),P.priority)switch(typeof P.priority=="string"?P.priority.toLowerCase():void 0){case"low":U+="; Priority=Low";break;case"medium":U+="; Priority=Medium";break;case"high":U+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${P.priority}`)}if(P.sameSite)switch(typeof P.sameSite=="string"?P.sameSite.toLowerCase():P.sameSite){case!0:case"strict":U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"none":U+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${P.sameSite}`)}return U}function v(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function E(S){return r.call(S)==="[object Date]"}return rh}UI();var tE="popstate";function jI(n={}){function t(r,l){let{pathname:c="/",search:f="",hash:m=""}=Wl(r.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),M_("",{pathname:c,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function e(r,l){let c=r.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let m=r.location.href,p=m.indexOf("#");f=p===-1?m:m.slice(0,p)}return f+"#"+(typeof l=="string"?l:Vh(l))}function i(r,l){Es(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return FI(t,e,i,n)}function Ge(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Es(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function HI(){return Math.random().toString(36).substring(2,10)}function eE(n,t){return{usr:n.state,key:n.key,idx:t}}function M_(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?Wl(t):t,state:e,key:t&&t.key||i||HI()}}function Vh({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function Wl(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function FI(n,t,e,i={}){let{window:r=document.defaultView,v5Compat:l=!1}=i,c=r.history,f="POP",m=null,p=v();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function v(){return(c.state||{idx:null}).idx}function E(){f="POP";let D=v(),U=D==null?null:D-p;p=D,m&&m({action:f,location:k.location,delta:U})}function S(D,U){f="PUSH";let q=M_(k.location,D,U);e&&e(q,D),p=v()+1;let Y=eE(q,p),st=k.createHref(q);try{c.pushState(Y,"",st)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;r.location.assign(st)}l&&m&&m({action:f,location:k.location,delta:1})}function R(D,U){f="REPLACE";let q=M_(k.location,D,U);e&&e(q,D),p=v();let Y=eE(q,p),st=k.createHref(q);c.replaceState(Y,"",st),l&&m&&m({action:f,location:k.location,delta:0})}function P(D){return qI(D)}let k={get action(){return f},get location(){return n(r,c)},listen(D){if(m)throw new Error("A history only accepts one active listener");return r.addEventListener(tE,E),m=D,()=>{r.removeEventListener(tE,E),m=null}},createHref(D){return t(r,D)},createURL:P,encodeLocation(D){let U=P(D);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:S,replace:R,go(D){return c.go(D)}};return k}function qI(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Ge(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Vh(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function a1(n,t,e="/"){return GI(n,t,e,!1)}function GI(n,t,e,i){let r=typeof t=="string"?Wl(t):t,l=ma(r.pathname||"/",e);if(l==null)return null;let c=o1(n);ZI(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let p=iP(l);f=eP(c[m],p,i)}return f}function o1(n,t=[],e=[],i=""){let r=(l,c,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(Ge(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let p=fa([i,m.relativePath]),v=e.concat(m);l.children&&l.children.length>0&&(Ge(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),o1(l.children,t,v,p)),!(l.path==null&&!l.index)&&t.push({path:p,score:JI(p,l.index),routesMeta:v})};return n.forEach((l,c)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))r(l,c);else for(let m of l1(l.path))r(l,c,m)}),t}function l1(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,r=e.endsWith("?"),l=e.replace(/\?$/,"");if(i.length===0)return r?[l,""]:[l];let c=l1(i.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),r&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function ZI(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:tP(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var WI=/^:[\w-]+$/,YI=3,KI=2,$I=1,XI=10,QI=-2,nE=n=>n==="*";function JI(n,t){let e=n.split("/"),i=e.length;return e.some(nE)&&(i+=QI),t&&(i+=KI),e.filter(r=>!nE(r)).reduce((r,l)=>r+(WI.test(l)?YI:l===""?$I:XI),i)}function tP(n,t){return n.length===t.length&&n.slice(0,-1).every((i,r)=>i===t[r])?n[n.length-1]-t[t.length-1]:0}function eP(n,t,e=!1){let{routesMeta:i}=n,r={},l="/",c=[];for(let f=0;f<i.length;++f){let m=i[f],p=f===i.length-1,v=l==="/"?t:t.slice(l.length)||"/",E=sm({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},v),S=m.route;if(!E&&p&&e&&!i[i.length-1].route.index&&(E=sm({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!E)return null;Object.assign(r,E.params),c.push({params:r,pathname:fa([l,E.pathname]),pathnameBase:oP(fa([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=fa([l,E.pathnameBase]))}return c}function sm(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=nP(n.path,n.caseSensitive,n.end),r=t.match(e);if(!r)return null;let l=r[0],c=l.replace(/(.)\/+$/,"$1"),f=r.slice(1);return{params:i.reduce((p,{paramName:v,isOptional:E},S)=>{if(v==="*"){let P=f[S]||"";c=l.slice(0,l.length-P.length).replace(/(.)\/+$/,"$1")}const R=f[S];return E&&!R?p[v]=void 0:p[v]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:n}}function nP(n,t=!1,e=!0){Es(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function iP(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Es(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function ma(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function sP(n,t="/"){let{pathname:e,search:i="",hash:r=""}=typeof n=="string"?Wl(n):n;return{pathname:e?e.startsWith("/")?e:rP(e,t):t,search:lP(i),hash:uP(r)}}function rP(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function a_(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function aP(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function wy(n){let t=aP(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function Sy(n,t,e,i=!1){let r;typeof n=="string"?r=Wl(n):(r={...n},Ge(!r.pathname||!r.pathname.includes("?"),a_("?","pathname","search",r)),Ge(!r.pathname||!r.pathname.includes("#"),a_("#","pathname","hash",r)),Ge(!r.search||!r.search.includes("#"),a_("#","search","hash",r)));let l=n===""||r.pathname==="",c=l?"/":r.pathname,f;if(c==null)f=e;else{let E=t.length-1;if(!i&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;r.pathname=S.join("/")}f=E>=0?t[E]:"/"}let m=sP(r,f),p=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&e.endsWith("/");return!m.pathname.endsWith("/")&&(p||v)&&(m.pathname+="/"),m}var fa=n=>n.join("/").replace(/\/\/+/g,"/"),oP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),lP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,uP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function cP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var u1=["POST","PUT","PATCH","DELETE"];new Set(u1);var hP=["GET",...u1];new Set(hP);var rc=K.createContext(null);rc.displayName="DataRouter";var Vm=K.createContext(null);Vm.displayName="DataRouterState";var c1=K.createContext({isTransitioning:!1});c1.displayName="ViewTransition";var fP=K.createContext(new Map);fP.displayName="Fetchers";var dP=K.createContext(null);dP.displayName="Await";var Ks=K.createContext(null);Ks.displayName="Navigation";var ef=K.createContext(null);ef.displayName="Location";var $s=K.createContext({outlet:null,matches:[],isDataRoute:!1});$s.displayName="Route";var Ay=K.createContext(null);Ay.displayName="RouteError";function mP(n,{relative:t}={}){Ge(ac(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=K.useContext(Ks),{hash:r,pathname:l,search:c}=nf(n,{relative:t}),f=l;return e!=="/"&&(f=l==="/"?e:fa([e,l])),i.createHref({pathname:f,search:c,hash:r})}function ac(){return K.useContext(ef)!=null}function Pr(){return Ge(ac(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(ef).location}var h1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function f1(n){K.useContext(Ks).static||K.useLayoutEffect(n)}function Ho(){let{isDataRoute:n}=K.useContext($s);return n?CP():pP()}function pP(){Ge(ac(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(rc),{basename:t,navigator:e}=K.useContext(Ks),{matches:i}=K.useContext($s),{pathname:r}=Pr(),l=JSON.stringify(wy(i)),c=K.useRef(!1);return f1(()=>{c.current=!0}),K.useCallback((m,p={})=>{if(Es(c.current,h1),!c.current)return;if(typeof m=="number"){e.go(m);return}let v=Sy(m,JSON.parse(l),r,p.relative==="path");n==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:fa([t,v.pathname])),(p.replace?e.replace:e.push)(v,p.state,p)},[t,e,l,r,n])}K.createContext(null);function gP(){let{matches:n}=K.useContext($s),t=n[n.length-1];return t?t.params:{}}function nf(n,{relative:t}={}){let{matches:e}=K.useContext($s),{pathname:i}=Pr(),r=JSON.stringify(wy(e));return K.useMemo(()=>Sy(n,JSON.parse(r),i,t==="path"),[n,r,i,t])}function _P(n,t){return d1(n,t)}function d1(n,t,e,i){var U;Ge(ac(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=K.useContext(Ks),{matches:l}=K.useContext($s),c=l[l.length-1],f=c?c.params:{},m=c?c.pathname:"/",p=c?c.pathnameBase:"/",v=c&&c.route;{let q=v&&v.path||"";m1(m,!v||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let E=Pr(),S;if(t){let q=typeof t=="string"?Wl(t):t;Ge(p==="/"||((U=q.pathname)==null?void 0:U.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${q.pathname}" was given in the \`location\` prop.`),S=q}else S=E;let R=S.pathname||"/",P=R;if(p!=="/"){let q=p.replace(/^\//,"").split("/");P="/"+R.replace(/^\//,"").split("/").slice(q.length).join("/")}let k=a1(n,{pathname:P});Es(v||k!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Es(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=EP(k&&k.map(q=>Object.assign({},q,{params:Object.assign({},f,q.params),pathname:fa([p,r.encodeLocation?r.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?p:fa([p,r.encodeLocation?r.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),l,e,i);return t&&D?K.createElement(ef.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},D):D}function yP(){let n=RP(),t=cP(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=K.createElement(K.Fragment,null,K.createElement("p",null,"💿 Hey developer 👋"),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:l},"ErrorBoundary")," or"," ",K.createElement("code",{style:l},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},t),e?K.createElement("pre",{style:r},e):null,c)}var vP=K.createElement(yP,null),bP=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?K.createElement($s.Provider,{value:this.props.routeContext},K.createElement(Ay.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function TP({routeContext:n,match:t,children:e}){let i=K.useContext(rc);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),K.createElement($s.Provider,{value:n},e)}function EP(n,t=[],e=null,i=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let r=n,l=e==null?void 0:e.errors;if(l!=null){let m=r.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);Ge(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),r=r.slice(0,Math.min(r.length,m+1))}let c=!1,f=-1;if(e)for(let m=0;m<r.length;m++){let p=r[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=m),p.route.id){let{loaderData:v,errors:E}=e,S=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!E||E[p.route.id]===void 0);if(p.route.lazy||S){c=!0,f>=0?r=r.slice(0,f+1):r=[r[0]];break}}}return r.reduceRight((m,p,v)=>{let E,S=!1,R=null,P=null;e&&(E=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||vP,c&&(f<0&&v===0?(m1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,P=null):f===v&&(S=!0,P=p.route.hydrateFallbackElement||null)));let k=t.concat(r.slice(0,v+1)),D=()=>{let U;return E?U=R:S?U=P:p.route.Component?U=K.createElement(p.route.Component,null):p.route.element?U=p.route.element:U=m,K.createElement(TP,{match:p,routeContext:{outlet:m,matches:k,isDataRoute:e!=null},children:U})};return e&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?K.createElement(bP,{location:e.location,revalidation:e.revalidation,component:R,error:E,children:D(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):D()},null)}function xy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wP(n){let t=K.useContext(rc);return Ge(t,xy(n)),t}function SP(n){let t=K.useContext(Vm);return Ge(t,xy(n)),t}function AP(n){let t=K.useContext($s);return Ge(t,xy(n)),t}function Ry(n){let t=AP(n),e=t.matches[t.matches.length-1];return Ge(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function xP(){return Ry("useRouteId")}function RP(){var i;let n=K.useContext(Ay),t=SP("useRouteError"),e=Ry("useRouteError");return n!==void 0?n:(i=t.errors)==null?void 0:i[e]}function CP(){let{router:n}=wP("useNavigate"),t=Ry("useNavigate"),e=K.useRef(!1);return f1(()=>{e.current=!0}),K.useCallback(async(r,l={})=>{Es(e.current,h1),e.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:t,...l}))},[n,t])}var iE={};function m1(n,t,e){!t&&!iE[n]&&(iE[n]=!0,Es(!1,e))}K.memo(IP);function IP({routes:n,future:t,state:e}){return d1(n,void 0,e,t)}function PP({to:n,replace:t,state:e,relative:i}){Ge(ac(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=K.useContext(Ks);Es(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=K.useContext($s),{pathname:c}=Pr(),f=Ho(),m=Sy(n,wy(l),c,i==="path"),p=JSON.stringify(m);return K.useEffect(()=>{f(JSON.parse(p),{replace:t,state:e,relative:i})},[f,p,i,t,e]),null}function ra(n){Ge(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MP({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:r,static:l=!1}){Ge(!ac(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=K.useMemo(()=>({basename:c,navigator:r,static:l,future:{}}),[c,r,l]);typeof e=="string"&&(e=Wl(e));let{pathname:m="/",search:p="",hash:v="",state:E=null,key:S="default"}=e,R=K.useMemo(()=>{let P=ma(m,c);return P==null?null:{location:{pathname:P,search:p,hash:v,state:E,key:S},navigationType:i}},[c,m,p,v,E,S,i]);return Es(R!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:K.createElement(Ks.Provider,{value:f},K.createElement(ef.Provider,{children:t,value:R}))}function OP({children:n,location:t}){return _P(O_(n),t)}function O_(n,t=[]){let e=[];return K.Children.forEach(n,(i,r)=>{if(!K.isValidElement(i))return;let l=[...t,r];if(i.type===K.Fragment){e.push.apply(e,O_(i.props.children,l));return}Ge(i.type===ra,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ge(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=O_(i.props.children,l)),e.push(c)}),e}var Fd="get",qd="application/x-www-form-urlencoded";function zm(n){return n!=null&&typeof n.tagName=="string"}function kP(n){return zm(n)&&n.tagName.toLowerCase()==="button"}function DP(n){return zm(n)&&n.tagName.toLowerCase()==="form"}function LP(n){return zm(n)&&n.tagName.toLowerCase()==="input"}function NP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function VP(n,t){return n.button===0&&(!t||t==="_self")&&!NP(n)}var Ed=null;function zP(){if(Ed===null)try{new FormData(document.createElement("form"),0),Ed=!1}catch{Ed=!0}return Ed}var BP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function o_(n){return n!=null&&!BP.has(n)?(Es(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qd}"`),null):n}function UP(n,t){let e,i,r,l,c;if(DP(n)){let f=n.getAttribute("action");i=f?ma(f,t):null,e=n.getAttribute("method")||Fd,r=o_(n.getAttribute("enctype"))||qd,l=new FormData(n)}else if(kP(n)||LP(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?ma(m,t):null,e=n.getAttribute("formmethod")||f.getAttribute("method")||Fd,r=o_(n.getAttribute("formenctype"))||o_(f.getAttribute("enctype"))||qd,l=new FormData(f,n),!zP()){let{name:p,type:v,value:E}=n;if(v==="image"){let S=p?`${p}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else p&&l.append(p,E)}}else{if(zm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Fd,i=null,r=qd,c=n}return l&&r==="text/plain"&&(c=l,l=void 0),{action:i,method:e.toLowerCase(),encType:r,formData:l,body:c}}function Cy(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}async function jP(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HP(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function FP(n,t,e){let i=await Promise.all(n.map(async r=>{let l=t.routes[r.route.id];if(l){let c=await jP(l,e);return c.links?c.links():[]}return[]}));return WP(i.flat(1).filter(HP).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function sE(n,t,e,i,r,l){let c=(m,p)=>e[p]?m.route.id!==e[p].route.id:!0,f=(m,p)=>{var v;return e[p].pathname!==m.pathname||((v=e[p].route.path)==null?void 0:v.endsWith("*"))&&e[p].params["*"]!==m.params["*"]};return l==="assets"?t.filter((m,p)=>c(m,p)||f(m,p)):l==="data"?t.filter((m,p)=>{var E;let v=i.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(c(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((E=e[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function qP(n,t,{includeHydrateFallback:e}={}){return GP(n.map(i=>{let r=t.routes[i.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),e&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function GP(n){return[...new Set(n)]}function ZP(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function WP(n,t){let e=new Set;return new Set(t),n.reduce((i,r)=>{let l=JSON.stringify(ZP(r));return e.has(l)||(e.add(l),i.push({key:l,link:r})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var YP=new Set([100,101,204,205]);function KP(n,t){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":t&&ma(e.pathname,t)==="/"?e.pathname=`${t.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function p1(){let n=K.useContext(rc);return Cy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function $P(){let n=K.useContext(Vm);return Cy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Iy=K.createContext(void 0);Iy.displayName="FrameworkContext";function g1(){let n=K.useContext(Iy);return Cy(n,"You must render this element inside a <HydratedRouter> element"),n}function XP(n,t){let e=K.useContext(Iy),[i,r]=K.useState(!1),[l,c]=K.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:v,onTouchStart:E}=t,S=K.useRef(null);K.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let k=U=>{U.forEach(q=>{c(q.isIntersecting)})},D=new IntersectionObserver(k,{threshold:.5});return S.current&&D.observe(S.current),()=>{D.disconnect()}}},[n]),K.useEffect(()=>{if(i){let k=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(k)}}},[i]);let R=()=>{r(!0)},P=()=>{r(!1),c(!1)};return e?n!=="intent"?[l,S,{}]:[l,S,{onFocus:ah(f,R),onBlur:ah(m,P),onMouseEnter:ah(p,R),onMouseLeave:ah(v,P),onTouchStart:ah(E,R)}]:[!1,S,{}]}function ah(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function QP({page:n,...t}){let{router:e}=p1(),i=K.useMemo(()=>a1(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?K.createElement(t2,{page:n,matches:i,...t}):null}function JP(n){let{manifest:t,routeModules:e}=g1(),[i,r]=K.useState([]);return K.useEffect(()=>{let l=!1;return FP(n,t,e).then(c=>{l||r(c)}),()=>{l=!0}},[n,t,e]),i}function t2({page:n,matches:t,...e}){let i=Pr(),{manifest:r,routeModules:l}=g1(),{basename:c}=p1(),{loaderData:f,matches:m}=$P(),p=K.useMemo(()=>sE(n,t,m,r,i,"data"),[n,t,m,r,i]),v=K.useMemo(()=>sE(n,t,m,r,i,"assets"),[n,t,m,r,i]),E=K.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let P=new Set,k=!1;if(t.forEach(U=>{var Y;let q=r.routes[U.route.id];!q||!q.hasLoader||(!p.some(st=>st.route.id===U.route.id)&&U.route.id in f&&((Y=l[U.route.id])!=null&&Y.shouldRevalidate)||q.hasClientLoader?k=!0:P.add(U.route.id))}),P.size===0)return[];let D=KP(n,c);return k&&P.size>0&&D.searchParams.set("_routes",t.filter(U=>P.has(U.route.id)).map(U=>U.route.id).join(",")),[D.pathname+D.search]},[c,f,i,r,p,t,n,l]),S=K.useMemo(()=>qP(v,r),[v,r]),R=JP(v);return K.createElement(K.Fragment,null,E.map(P=>K.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...e})),S.map(P=>K.createElement("link",{key:P,rel:"modulepreload",href:P,...e})),R.map(({key:P,link:k})=>K.createElement("link",{key:P,...k})))}function e2(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var _1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_1&&(window.__reactRouterVersion="7.6.2")}catch{}function n2({basename:n,children:t,window:e}){let i=K.useRef();i.current==null&&(i.current=jI({window:e,v5Compat:!0}));let r=i.current,[l,c]=K.useState({action:r.action,location:r.location}),f=K.useCallback(m=>{K.startTransition(()=>c(m))},[c]);return K.useLayoutEffect(()=>r.listen(f),[r,f]),K.createElement(MP,{basename:n,children:t,location:l.location,navigationType:l.action,navigator:r})}var y1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ua=K.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:r,reloadDocument:l,replace:c,state:f,target:m,to:p,preventScrollReset:v,viewTransition:E,...S},R){let{basename:P}=K.useContext(Ks),k=typeof p=="string"&&y1.test(p),D,U=!1;if(typeof p=="string"&&k&&(D=p,_1))try{let z=new URL(window.location.href),B=p.startsWith("//")?new URL(z.protocol+p):new URL(p),H=ma(B.pathname,P);B.origin===z.origin&&H!=null?p=H+B.search+B.hash:U=!0}catch{Es(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=mP(p,{relative:r}),[Y,st,Q]=XP(i,S),ht=a2(p,{replace:c,state:f,target:m,preventScrollReset:v,relative:r,viewTransition:E});function V(z){t&&t(z),z.defaultPrevented||ht(z)}let O=K.createElement("a",{...S,...Q,href:D||q,onClick:U||l?t:V,ref:e2(R,st),target:m,"data-discover":!k&&e==="render"?"true":void 0});return Y&&!k?K.createElement(K.Fragment,null,O,K.createElement(QP,{page:q})):O});ua.displayName="Link";var i2=K.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:r=!1,style:l,to:c,viewTransition:f,children:m,...p},v){let E=nf(c,{relative:p.relative}),S=Pr(),R=K.useContext(Vm),{navigator:P,basename:k}=K.useContext(Ks),D=R!=null&&h2(E)&&f===!0,U=P.encodeLocation?P.encodeLocation(E).pathname:E.pathname,q=S.pathname,Y=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;e||(q=q.toLowerCase(),Y=Y?Y.toLowerCase():null,U=U.toLowerCase()),Y&&k&&(Y=ma(Y,k)||Y);const st=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let Q=q===U||!r&&q.startsWith(U)&&q.charAt(st)==="/",ht=Y!=null&&(Y===U||!r&&Y.startsWith(U)&&Y.charAt(U.length)==="/"),V={isActive:Q,isPending:ht,isTransitioning:D},O=Q?t:void 0,z;typeof i=="function"?z=i(V):z=[i,Q?"active":null,ht?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let B=typeof l=="function"?l(V):l;return K.createElement(ua,{...p,"aria-current":O,className:z,ref:v,style:B,to:c,viewTransition:f},typeof m=="function"?m(V):m)});i2.displayName="NavLink";var s2=K.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:r,state:l,method:c=Fd,action:f,onSubmit:m,relative:p,preventScrollReset:v,viewTransition:E,...S},R)=>{let P=u2(),k=c2(f,{relative:p}),D=c.toLowerCase()==="get"?"get":"post",U=typeof f=="string"&&y1.test(f),q=Y=>{if(m&&m(Y),Y.defaultPrevented)return;Y.preventDefault();let st=Y.nativeEvent.submitter,Q=(st==null?void 0:st.getAttribute("formmethod"))||c;P(st||Y.currentTarget,{fetcherKey:t,method:Q,navigate:e,replace:r,state:l,relative:p,preventScrollReset:v,viewTransition:E})};return K.createElement("form",{ref:R,method:D,action:k,onSubmit:i?m:q,...S,"data-discover":!U&&n==="render"?"true":void 0})});s2.displayName="Form";function r2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function v1(n){let t=K.useContext(rc);return Ge(t,r2(n)),t}function a2(n,{target:t,replace:e,state:i,preventScrollReset:r,relative:l,viewTransition:c}={}){let f=Ho(),m=Pr(),p=nf(n,{relative:l});return K.useCallback(v=>{if(VP(v,t)){v.preventDefault();let E=e!==void 0?e:Vh(m)===Vh(p);f(n,{replace:E,state:i,preventScrollReset:r,relative:l,viewTransition:c})}},[m,f,p,e,i,t,n,r,l,c])}var o2=0,l2=()=>`__${String(++o2)}__`;function u2(){let{router:n}=v1("useSubmit"),{basename:t}=K.useContext(Ks),e=xP();return K.useCallback(async(i,r={})=>{let{action:l,method:c,encType:f,formData:m,body:p}=UP(i,t);if(r.navigate===!1){let v=r.fetcherKey||l2();await n.fetch(v,e,r.action||l,{preventScrollReset:r.preventScrollReset,formData:m,body:p,formMethod:r.method||c,formEncType:r.encType||f,flushSync:r.flushSync})}else await n.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:m,body:p,formMethod:r.method||c,formEncType:r.encType||f,replace:r.replace,state:r.state,fromRouteId:e,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,t,e])}function c2(n,{relative:t}={}){let{basename:e}=K.useContext(Ks),i=K.useContext($s);Ge(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),l={...nf(n||".",{relative:t})},c=Pr();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(v=>v==="")){f.delete("index"),m.filter(E=>E).forEach(E=>f.append("index",E));let v=f.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:fa([e,l.pathname])),Vh(l)}function h2(n,t={}){let e=K.useContext(c1);Ge(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=v1("useViewTransitionState"),r=nf(n,{relative:t.relative});if(!e.isTransitioning)return!1;let l=ma(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=ma(e.nextLocation.pathname,i)||e.nextLocation.pathname;return sm(r.pathname,c)!=null||sm(r.pathname,l)!=null}[...YP];var f2=r1();const d2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAclBMVEX///8AAAAgICDq6urCwsJZWVny8vL6+vrV1dX39/eNjY2srKwODg6BgYF0dHRGRkbj4+O1tbWlpaW7u7s9PT3MzMzb29tUVFRnZ2dgYGAmJiY4ODiIiIivr68yMjLKyspOTk4YGBgjIyN2dnaZmZkrKyvJgXKrAAALw0lEQVR4nOVd6WKySgy1giCKirjXpdLq+7/i/dRa5SQzLCaDes9PW4HjMNknabW0EUbzST/tDTvT3Wc7jj/i7LgeLVbDTTqeeVGofn9NBMlks5x+WJGNlj0/CZp+1BqYj4ejzE7uDp+LwaTb9CNXwDztxKXJ3RCvtl7Tj14CwWRQg9wfvjf+U7+x3nb1CL1frMZPSjIcdwTonREv/abZUHR/pOj94mfWNKV7BGmBTqiF9TZqmtgvvI0CvTPavWcQrslQi98Zy3nD/LoSwtOOfZOmQFdMelrR2Dp6uu/nPYZN7Mew54zfCQPnVkC//MPFu9FqkPpfs+488YIwCrwk6X7528Nyv87KX6bvlF+3pP77Xm78xLP4gF7i95brchfbO9yOpRTg6OAH5fzbMPAPozKX3CjzuqJb7BodB35l533W2xVz/NIgBIgKvaPFNql57WRbqH6G6pbc19H+BKP0McHu9Rf2GxyVDYCD9e7xoe7q3cMr0EOpwD1MCKy/734idiPf+rYu1HRjN7Pcdij79sxtBlOsJHBSyz0V3JzEJtIO4rf7h6X5fgMdARdZNuRQ/G6B2fD40TOLA/M6joR/1cSoJJYS4tOMuVHmHEVvbDRj2vrxIrMGFry3b7pHT+4eFhhF3FjqDlvDDTq6L+gNiUkPC1E0/YRiv2AJmNxREafRQHDkNrDg7dUoGn49FZVrhcEkfthK5QlmTYTcZ7xAf5DimL3oqpnkUMC/qdtHrskTdKMjOPBm3AOJqhl7QbdBrzwm7BPVdmsS9nLNZr263CPFNRVzxJlL7aazQQknb471BAMX4BsJP28NRFysdl3nSpyTvXiGAp+Qy3ctq1+HU7CdZyD4DxzFymrxiyOo8bS1wDmNFQVqwOznlc7T1gJDMasmbRh35ZkItkLmARdVLsD4E1ORPTjr9/oiCjVkJH0Fb4BRq7FE4Me/vPuxSD1Qmz5k6TAqp+ol3PmbVSlh2Xr0IY9ll4HRhBIB7XtHTMK2ZazmQblvMopCIiMR5a4o8dIzvmu5laDfE3GX8tJLJIFEnam4zNdoCnsv8TSgwmSsB2rclEiEz+nvIuPR58XXUeSaQVbjPaWRAiGHMC/d2zIXpdJmWvQVunulomoqDBkHoUBMB+QLe6FHUWLIeLF244tms8R8eiWGVPFbJT/9d7mwkxJDJh5oWxRizVSy1+3QYkg9KUt+mGoKweySGkMaEjRrDJKqlyxdUWNITRujOUGcJhm1/As9htSRMi0iUfaiZSuKDIneN8QjyC6UjTwpMqTbi5cf5N9kK1Y1GRJhw4pTogtLupNlocmwRc4kcTqRSCThJKEqQ7I8jBcVoUCSzhKqMqTmJl0fUlIiXaumyzDCx6eqHOvWhHehNkOyyYifSFSKeDWQMkOyE1HrozCSr25UZki8hh/4O/4C8qc3tBkSmzPvCWNtnkIiTZshMTrzVWlozyicNFZniHUauVUi6UL5++szbCGJe7sGIwEaNUH6DDHudl8shbFjjZISfYZof9/5UBhDFIzO3KDPkEQWb5YbSlKVui4HDDF1fUuZYTJGpe7JAUO0a26W53f+DzpVJQ4YkgKL6+dI/aGCTSNcMEQHaW74XKcE3wVDlKZXFwp0xU7l5k4YQpLyb7+BLaBUAuyEIbj6v0lvNMqVSmSdMES9d9mIaLHq3NsNwxC4XPwLWFmtIlknDNGsuTjyoES0zoq4YQjW93m5gs/8h1pNqNwwhI14LslEHaJ1WsQNQ3QiTrodWK+1Kp3dMAzBAj0Z3xBorFESXg5uGGI8ZkM/Ujvy44gh+EmnBQP5qtbtzhFD2HTTfy9ulv9I7eSrI4YoOENMaWRqp34cMfTAyo7QOax1vKYUHDEMoY/PHFMye607u2KIcmWCoVI1ZeGMIXi7fYxP6Z1gdsUQHIkU9YdOjOYEVwxhyXqYdtNr/po3p77V7gMKcYivbYkyqCjtHNuVAfbix3f1Sxw7aYniAjhM0UHvsLgQvEI/QQUUh+NBOUxRuBaaNG4bQlIU2s0QdtphDUYRQ2MjF2cokhRQnveJEcYio61Os3VZFB2LAcO03cryHxR4+HwPArcoiHaCGRrjohQIq2bFzAXVDlTEWGZSEMNoWs6cUCBrMGSKa1jwlr7AGoI7SN7SAknzAvsQ3tIMq8CLtMXzy1KQNMcWxIOLqr2eXx+Ctli3wCUutNqaljWFNg0wHLWgU0hxau3Z7VKw2hZ4aujtfIvV/8A/hH2l16TXlY8PdRcbdPrFy7v/4IohZBBTFBx6HUxcMYQ8zBiz+HqNoFwxhFLhGTqMO7VGSa4YgkvvEUP15fMWWZ5QRJyNN8s9Zf/eSTBq3ix/eJIrTFpYBY4YMkl7Ji2sgmby+CdDHdTF94vXYoAoPW2696+nwR4vb1UT9XleL4jrv1Vd2+VcBfhPb1WbeHEk8EiQkqhxwxC4XE5cYKcBpY3ohCFGO3/DThAhVHIRnTAEfX+NPEKoRrTfxw1OGELk8Gq+4HGh9zlvca27wI34Pmdm/lxB+FzlcJ4ThrDfbgE9bLnwLmfXbn4SnrhQCSk6YIjh+JveQ3NVxaxxwBAP5905EXgOWEOa6jPEl/Q+MooySMP61meIabH7lgPIvlSj04rQZ4gkcp4u9q2TG/T3B3WGmLzNx2PQv9jLP4A6Q1ylvAeBUVOR5s95aDMkzdjg7+/fn4Z0dxG3a5QZkpZtJF+Pkz/ETwcpM0TLkx6rIMMCXrzXF3WQSAdhaVdflyFq+zazQKRTufBOVGVI1ofbZKQdGAqjB6HKkLTcY5eHNBGWtb81GRJdyOeXiLyVTUNpMiTNkg3leaQPv2h3BUWGZF7F3vCPROsrNvsVvTSZqWK0OcliS6p9PYZElZu3F52g85r9vC1FskScCjZUUmNIRj/ZvAbaV19uJK4WQ1rvajVVaAXw681GsJubxBOWiywqMaQzVSofqHizGSXUT3y1OTP7wu9QjVFx7J4JKrOC6PGPEs1z6bwnmapajXlPdBOWKlqjv8vrzOwq18aLmQ0o0QxTfu4aM/645LwKOjBIRNpIz85jVqJsDJSbfyih+GXnHzITp0vPP+TmA4pId8kZlhFziq5CoJ4ZBjx6sjmkzGTnStKLG9X6JOOOL2CGHlcrsGDG7j3RwGOWYNUhhtyU9uehyM10rjzYiBkJ/CxDj0OOYA0HgYwOOlF8hr3IzXOulw3EqSUnTKXzNTXATHOu6cUGjOL/iNXO1JSEx8xyrqDq80jYo+ny+e8q4BsC1P7ZOYGqUqdRGvwx6wdsCP70vVrzyELwR+UfigeSKVBn7LVOndgRMHr+UYK8Wvwnb5Q6Ylsxy9hnedgR4ykqdq4zgfEGRAgaeyjs1Q6bsvA4LfghFA0xtYlQmfNhAB2JK0jQfPmFK+2fcIboCWI19yaKih0Y7mFspyJ4usfYWugoOoyVvzdnpp0Qi1pXCWejntGRn9CWuzHn4lx+XOE9Ehlk2T/86Ol/j8wX/cNa/q4kP3xDT8enipjA7RUqB7INKveMgbxY9Wz9mpRE3Jet0ddQdj92La/MR6bmwQVc/OAPHTnhPaFJpTssNA1/g5V6RU/ClEsO9qZwyiZx16g2fn/f/mMkvdQstM/Q18CRbYOc0dnWFTvJ1roNThi4CIUxeRvErlfZgQz9QcHr8SFtxlhAE+EMRgc/KBdeDQP/UPBuXqDWd4VibpV1N6yXPT+xbMzQS/zNEpvVGTB1G+Wr0FswW++Xh63/1U0SL4jCwEvm3dmXnw5Wo12FVpou3dEzAotJpYBeE/kEr1CqimHoNmRyw9zo2oii02SYvVtS5DyAVbNpBPV1HDadCTrB65niDA9j09T+Q0RbLtf4KKZpM8kDA2bmeEM9/DS9/Rj4S7FW2J3xM6TTGQRjPjtUDavts+w+FoG/KWlm8hhMnmrzGeBtV3Xe17iT6sZeZdGdDBafxax+kY2G41did0WQ+L3lKLOTmy43k+QV3kwzwsibjdPNcLUYrY9Z/BHH7c/dtDPspf3JPNKXmf8B8ByKAxrnKJYAAAAASUVORK5CYII=",m2="/TapasMadrid/assets/settings-Bbu9V-Hx.png",sf=()=>it.jsx(it.Fragment,{children:it.jsxs("header",{children:[it.jsx("h1",{children:"🍻 Tapas Radar"}),it.jsx("nav",{children:it.jsxs("ul",{children:[it.jsx("li",{children:it.jsx(ua,{to:"/",children:"Inicio"})}),it.jsx("li",{children:it.jsx(ua,{to:"/mapa",children:"Mapa"})}),it.jsx("li",{children:it.jsx(ua,{to:"/settings",children:"Ajustes"})}),it.jsx("li",{children:it.jsx(ua,{to:"/about",children:"Sobre nosotros"})}),it.jsx("li",{children:it.jsx(ua,{to:"/abonnement",children:"Abonnement"})})]})})]})}),p2=()=>{const n=Ho(),t=()=>{n("/mapa")},e=()=>{n("/añadir")},i=()=>{n("/settings")};return it.jsxs("div",{className:"home",children:[it.jsx(sf,{}),it.jsx("p",{className:"description",children:"Descubre los bares con más ambiente de Madrid en tiempo real. Tapas, cerveza y buena vibra — todo en un vistazo."}),it.jsx("button",{className:"start-button",onClick:t,children:"Empezar"}),it.jsx("br",{}),it.jsx("button",{className:"start-button",onClick:e,children:it.jsx("img",{src:d2,alt:"icon +"})}),it.jsx("button",{className:"goSetting",onClick:i,children:it.jsx("img",{src:m2,alt:"settings"})})]})};function b1(n,t){const e=K.useRef(t);K.useEffect(function(){t!==e.current&&n.attributionControl!=null&&(e.current!=null&&n.attributionControl.removeAttribution(e.current),t!=null&&n.attributionControl.addAttribution(t)),e.current=t},[n,t])}const g2=1;function _2(n){return Object.freeze({__version:g2,map:n})}function y2(n,t){return Object.freeze({...n,...t})}const Py=K.createContext(null);function T1(){const n=K.use(Py);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function v2(n){function t(e,i){const{instance:r,context:l}=n(e).current;K.useImperativeHandle(i,()=>r);const{children:c}=e;return c==null?null:ge.createElement(Py,{value:l},c)}return K.forwardRef(t)}function b2(n){function t(e,i){const[r,l]=K.useState(!1),{instance:c}=n(e,l).current;K.useImperativeHandle(i,()=>c),K.useEffect(function(){r&&c.update()},[c,r,e.children]);const f=c._contentNode;return f?f2.createPortal(e.children,f):null}return K.forwardRef(t)}function T2(n){function t(e,i){const{instance:r}=n(e).current;return K.useImperativeHandle(i,()=>r),null}return K.forwardRef(t)}function E1(n,t){const e=K.useRef(void 0);K.useEffect(function(){return t!=null&&n.instance.on(t),e.current=t,function(){e.current!=null&&n.instance.off(e.current),e.current=null}},[n,t])}function My(n,t){const e=n.pane??t.pane;return e?{...n,pane:e}:n}function E2(n,t){return function(i,r){const l=T1(),c=n(My(i,l),l);return b1(l.map,i.attribution),E1(c.current,i.eventHandlers),t(c.current,l,i,r),c}}var fh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var w2=fh.exports,rE;function S2(){return rE||(rE=1,function(n,t){(function(e,i){i(t)})(w2,function(e){var i="1.9.4";function r(o){var h,_,T,A;for(_=1,T=arguments.length;_<T;_++){A=arguments[_];for(h in A)o[h]=A[h]}return o}var l=Object.create||function(){function o(){}return function(h){return o.prototype=h,new o}}();function c(o,h){var _=Array.prototype.slice;if(o.bind)return o.bind.apply(o,_.call(arguments,1));var T=_.call(arguments,2);return function(){return o.apply(h,T.length?T.concat(_.call(arguments)):arguments)}}var f=0;function m(o){return"_leaflet_id"in o||(o._leaflet_id=++f),o._leaflet_id}function p(o,h,_){var T,A,I,Z;return Z=function(){T=!1,A&&(I.apply(_,A),A=!1)},I=function(){T?A=arguments:(o.apply(_,arguments),setTimeout(Z,h),T=!0)},I}function v(o,h,_){var T=h[1],A=h[0],I=T-A;return o===T&&_?o:((o-A)%I+I)%I+A}function E(){return!1}function S(o,h){if(h===!1)return o;var _=Math.pow(10,h===void 0?6:h);return Math.round(o*_)/_}function R(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function P(o){return R(o).split(/\s+/)}function k(o,h){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?l(o.options):{});for(var _ in h)o.options[_]=h[_];return o.options}function D(o,h,_){var T=[];for(var A in o)T.push(encodeURIComponent(_?A.toUpperCase():A)+"="+encodeURIComponent(o[A]));return(!h||h.indexOf("?")===-1?"?":"&")+T.join("&")}var U=/\{ *([\w_ -]+) *\}/g;function q(o,h){return o.replace(U,function(_,T){var A=h[T];if(A===void 0)throw new Error("No value provided for variable "+_);return typeof A=="function"&&(A=A(h)),A})}var Y=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function st(o,h){for(var _=0;_<o.length;_++)if(o[_]===h)return _;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ht(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var V=0;function O(o){var h=+new Date,_=Math.max(0,16-(h-V));return V=h+_,window.setTimeout(o,_)}var z=window.requestAnimationFrame||ht("RequestAnimationFrame")||O,B=window.cancelAnimationFrame||ht("CancelAnimationFrame")||ht("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function H(o,h,_){if(_&&z===O)o.call(h);else return z.call(window,c(o,h))}function G(o){o&&B.call(window,o)}var F={__proto__:null,extend:r,create:l,bind:c,get lastId(){return f},stamp:m,throttle:p,wrapNum:v,falseFn:E,formatNum:S,trim:R,splitWords:P,setOptions:k,getParamString:D,template:q,isArray:Y,indexOf:st,emptyImageUrl:Q,requestFn:z,cancelFn:B,requestAnimFrame:H,cancelAnimFrame:G};function Yt(){}Yt.extend=function(o){var h=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=h.__super__=this.prototype,T=l(_);T.constructor=h,h.prototype=T;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(h[A]=this[A]);return o.statics&&r(h,o.statics),o.includes&&(Dt(o.includes),r.apply(null,[T].concat(o.includes))),r(T,o),delete T.statics,delete T.includes,T.options&&(T.options=_.options?l(_.options):{},r(T.options,o.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,Z=T._initHooks.length;I<Z;I++)T._initHooks[I].call(this)}},h},Yt.include=function(o){var h=this.prototype.options;return r(this.prototype,o),o.options&&(this.prototype.options=h,this.mergeOptions(o.options)),this},Yt.mergeOptions=function(o){return r(this.prototype.options,o),this},Yt.addInitHook=function(o){var h=Array.prototype.slice.call(arguments,1),_=typeof o=="function"?o:function(){this[o].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function Dt(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=Y(o)?o:[o];for(var h=0;h<o.length;h++)o[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var et={on:function(o,h,_){if(typeof o=="object")for(var T in o)this._on(T,o[T],h);else{o=P(o);for(var A=0,I=o.length;A<I;A++)this._on(o[A],h,_)}return this},off:function(o,h,_){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var T in o)this._off(T,o[T],h);else{o=P(o);for(var A=arguments.length===1,I=0,Z=o.length;I<Z;I++)A?this._off(o[I]):this._off(o[I],h,_)}return this},_on:function(o,h,_,T){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(o,h,_)===!1){_===this&&(_=void 0);var A={fn:h,ctx:_};T&&(A.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(A)}},_off:function(o,h,_){var T,A,I;if(this._events&&(T=this._events[o],!!T)){if(arguments.length===1){if(this._firingCount)for(A=0,I=T.length;A<I;A++)T[A].fn=E;delete this._events[o];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var Z=this._listens(o,h,_);if(Z!==!1){var tt=T[Z];this._firingCount&&(tt.fn=E,this._events[o]=T=T.slice()),T.splice(Z,1)}}},fire:function(o,h,_){if(!this.listens(o,_))return this;var T=r({},h,{type:o,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var A=this._events[o];if(A){this._firingCount=this._firingCount+1||1;for(var I=0,Z=A.length;I<Z;I++){var tt=A[I],lt=tt.fn;tt.once&&this.off(o,lt,tt.ctx),lt.call(tt.ctx||this,T)}this._firingCount--}}return _&&this._propagateEvent(T),this},listens:function(o,h,_,T){typeof o!="string"&&console.warn('"string" type argument expected');var A=h;typeof h!="function"&&(T=!!h,A=void 0,_=void 0);var I=this._events&&this._events[o];if(I&&I.length&&this._listens(o,A,_)!==!1)return!0;if(T){for(var Z in this._eventParents)if(this._eventParents[Z].listens(o,h,_,T))return!0}return!1},_listens:function(o,h,_){if(!this._events)return!1;var T=this._events[o]||[];if(!h)return!!T.length;_===this&&(_=void 0);for(var A=0,I=T.length;A<I;A++)if(T[A].fn===h&&T[A].ctx===_)return A;return!1},once:function(o,h,_){if(typeof o=="object")for(var T in o)this._on(T,o[T],h,!0);else{o=P(o);for(var A=0,I=o.length;A<I;A++)this._on(o[A],h,_,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[m(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[m(o)],this},_propagateEvent:function(o){for(var h in this._eventParents)this._eventParents[h].fire(o.type,r({layer:o.target,propagatedFrom:o.target},o),!0)}};et.addEventListener=et.on,et.removeEventListener=et.clearAllEventListeners=et.off,et.addOneTimeEventListener=et.once,et.fireEvent=et.fire,et.hasEventListeners=et.listens;var vt=Yt.extend(et);function mt(o,h,_){this.x=_?Math.round(o):o,this.y=_?Math.round(h):h}var Vt=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};mt.prototype={clone:function(){return new mt(this.x,this.y)},add:function(o){return this.clone()._add(j(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(j(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new mt(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new mt(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Vt(this.x),this.y=Vt(this.y),this},distanceTo:function(o){o=j(o);var h=o.x-this.x,_=o.y-this.y;return Math.sqrt(h*h+_*_)},equals:function(o){return o=j(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=j(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function j(o,h,_){return o instanceof mt?o:Y(o)?new mt(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new mt(o.x,o.y):new mt(o,h,_)}function ct(o,h){if(o)for(var _=h?[o,h]:o,T=0,A=_.length;T<A;T++)this.extend(_[T])}ct.prototype={extend:function(o){var h,_;if(!o)return this;if(o instanceof mt||typeof o[0]=="number"||"x"in o)h=_=j(o);else if(o=Tt(o),h=o.min,_=o.max,!h||!_)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=_.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(o){return j((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return j(this.min.x,this.max.y)},getTopRight:function(){return j(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var h,_;return typeof o[0]=="number"||o instanceof mt?o=j(o):o=Tt(o),o instanceof ct?(h=o.min,_=o.max):h=_=o,h.x>=this.min.x&&_.x<=this.max.x&&h.y>=this.min.y&&_.y<=this.max.y},intersects:function(o){o=Tt(o);var h=this.min,_=this.max,T=o.min,A=o.max,I=A.x>=h.x&&T.x<=_.x,Z=A.y>=h.y&&T.y<=_.y;return I&&Z},overlaps:function(o){o=Tt(o);var h=this.min,_=this.max,T=o.min,A=o.max,I=A.x>h.x&&T.x<_.x,Z=A.y>h.y&&T.y<_.y;return I&&Z},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var h=this.min,_=this.max,T=Math.abs(h.x-_.x)*o,A=Math.abs(h.y-_.y)*o;return Tt(j(h.x-T,h.y-A),j(_.x+T,_.y+A))},equals:function(o){return o?(o=Tt(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function Tt(o,h){return!o||o instanceof ct?o:new ct(o,h)}function yt(o,h){if(o)for(var _=h?[o,h]:o,T=0,A=_.length;T<A;T++)this.extend(_[T])}yt.prototype={extend:function(o){var h=this._southWest,_=this._northEast,T,A;if(o instanceof xt)T=o,A=o;else if(o instanceof yt){if(T=o._southWest,A=o._northEast,!T||!A)return this}else return o?this.extend(Et(o)||St(o)):this;return!h&&!_?(this._southWest=new xt(T.lat,T.lng),this._northEast=new xt(A.lat,A.lng)):(h.lat=Math.min(T.lat,h.lat),h.lng=Math.min(T.lng,h.lng),_.lat=Math.max(A.lat,_.lat),_.lng=Math.max(A.lng,_.lng)),this},pad:function(o){var h=this._southWest,_=this._northEast,T=Math.abs(h.lat-_.lat)*o,A=Math.abs(h.lng-_.lng)*o;return new yt(new xt(h.lat-T,h.lng-A),new xt(_.lat+T,_.lng+A))},getCenter:function(){return new xt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xt(this.getNorth(),this.getWest())},getSouthEast:function(){return new xt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof xt||"lat"in o?o=Et(o):o=St(o);var h=this._southWest,_=this._northEast,T,A;return o instanceof yt?(T=o.getSouthWest(),A=o.getNorthEast()):T=A=o,T.lat>=h.lat&&A.lat<=_.lat&&T.lng>=h.lng&&A.lng<=_.lng},intersects:function(o){o=St(o);var h=this._southWest,_=this._northEast,T=o.getSouthWest(),A=o.getNorthEast(),I=A.lat>=h.lat&&T.lat<=_.lat,Z=A.lng>=h.lng&&T.lng<=_.lng;return I&&Z},overlaps:function(o){o=St(o);var h=this._southWest,_=this._northEast,T=o.getSouthWest(),A=o.getNorthEast(),I=A.lat>h.lat&&T.lat<_.lat,Z=A.lng>h.lng&&T.lng<_.lng;return I&&Z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,h){return o?(o=St(o),this._southWest.equals(o.getSouthWest(),h)&&this._northEast.equals(o.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function St(o,h){return o instanceof yt?o:new yt(o,h)}function xt(o,h,_){if(isNaN(o)||isNaN(h))throw new Error("Invalid LatLng object: ("+o+", "+h+")");this.lat=+o,this.lng=+h,_!==void 0&&(this.alt=+_)}xt.prototype={equals:function(o,h){if(!o)return!1;o=Et(o);var _=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return _<=(h===void 0?1e-9:h)},toString:function(o){return"LatLng("+S(this.lat,o)+", "+S(this.lng,o)+")"},distanceTo:function(o){return le.distance(this,Et(o))},wrap:function(){return le.wrapLatLng(this)},toBounds:function(o){var h=180*o/40075017,_=h/Math.cos(Math.PI/180*this.lat);return St([this.lat-h,this.lng-_],[this.lat+h,this.lng+_])},clone:function(){return new xt(this.lat,this.lng,this.alt)}};function Et(o,h,_){return o instanceof xt?o:Y(o)&&typeof o[0]!="object"?o.length===3?new xt(o[0],o[1],o[2]):o.length===2?new xt(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new xt(o.lat,"lng"in o?o.lng:o.lon,o.alt):h===void 0?null:new xt(o,h,_)}var xe={latLngToPoint:function(o,h){var _=this.projection.project(o),T=this.scale(h);return this.transformation._transform(_,T)},pointToLatLng:function(o,h){var _=this.scale(h),T=this.transformation.untransform(o,_);return this.projection.unproject(T)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var h=this.projection.bounds,_=this.scale(o),T=this.transformation.transform(h.min,_),A=this.transformation.transform(h.max,_);return new ct(T,A)},infinite:!1,wrapLatLng:function(o){var h=this.wrapLng?v(o.lng,this.wrapLng,!0):o.lng,_=this.wrapLat?v(o.lat,this.wrapLat,!0):o.lat,T=o.alt;return new xt(_,h,T)},wrapLatLngBounds:function(o){var h=o.getCenter(),_=this.wrapLatLng(h),T=h.lat-_.lat,A=h.lng-_.lng;if(T===0&&A===0)return o;var I=o.getSouthWest(),Z=o.getNorthEast(),tt=new xt(I.lat-T,I.lng-A),lt=new xt(Z.lat-T,Z.lng-A);return new yt(tt,lt)}},le=r({},xe,{wrapLng:[-180,180],R:6371e3,distance:function(o,h){var _=Math.PI/180,T=o.lat*_,A=h.lat*_,I=Math.sin((h.lat-o.lat)*_/2),Z=Math.sin((h.lng-o.lng)*_/2),tt=I*I+Math.cos(T)*Math.cos(A)*Z*Z,lt=2*Math.atan2(Math.sqrt(tt),Math.sqrt(1-tt));return this.R*lt}}),Ri=6378137,Ji={R:Ri,MAX_LATITUDE:85.0511287798,project:function(o){var h=Math.PI/180,_=this.MAX_LATITUDE,T=Math.max(Math.min(_,o.lat),-_),A=Math.sin(T*h);return new mt(this.R*o.lng*h,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(o){var h=180/Math.PI;return new xt((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*h,o.x*h/this.R)},bounds:function(){var o=Ri*Math.PI;return new ct([-o,-o],[o,o])}()};function Ci(o,h,_,T){if(Y(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=h,this._c=_,this._d=T}Ci.prototype={transform:function(o,h){return this._transform(o.clone(),h)},_transform:function(o,h){return h=h||1,o.x=h*(this._a*o.x+this._b),o.y=h*(this._c*o.y+this._d),o},untransform:function(o,h){return h=h||1,new mt((o.x/h-this._b)/this._a,(o.y/h-this._d)/this._c)}};function Ii(o,h,_,T){return new Ci(o,h,_,T)}var Ss=r({},le,{code:"EPSG:3857",projection:Ji,transformation:function(){var o=.5/(Math.PI*Ji.R);return Ii(o,.5,-o,.5)}()}),Mr=r({},Ss,{code:"EPSG:900913"});function wa(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Yo(o,h){var _="",T,A,I,Z,tt,lt;for(T=0,I=o.length;T<I;T++){for(tt=o[T],A=0,Z=tt.length;A<Z;A++)lt=tt[A],_+=(A?"L":"M")+lt.x+" "+lt.y;_+=h?Ot.svg?"z":"x":""}return _||"M0 0"}var Hn=document.documentElement.style,Sa="ActiveXObject"in window,Ko=Sa&&!document.addEventListener,Or="msLaunchUri"in navigator&&!("documentMode"in document),As=qn("webkit"),Jl=qn("android"),kr=qn("android 2")||qn("android 3"),$o=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),tu=Jl&&qn("Google")&&$o<537&&!("AudioNode"in window),ke=!!window.opera,fe=!Or&&qn("chrome"),Fn=qn("gecko")&&!As&&!ke&&!Sa,Tn=!fe&&qn("safari"),Xo=qn("phantom"),eu="OTransition"in Hn,Dr=navigator.platform.indexOf("Win")===0,Qs=Sa&&"transition"in Hn,xs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!kr,fi="MozPerspective"in Hn,Aa=!window.L_DISABLE_3D&&(Qs||xs||fi)&&!eu&&!Xo,Pi=typeof orientation<"u"||qn("mobile"),Qo=Pi&&As,Jo=Pi&&xs,xa=!window.PointerEvent&&window.MSPointerEvent,ts=!!(window.PointerEvent||xa),es="ontouchstart"in window||!!window.TouchEvent,tl=!window.L_NO_TOUCH&&(es||ts),ns=Pi&&ke,el=Pi&&Fn,Js=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ra=function(){var o=!1;try{var h=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",E,h),window.removeEventListener("testPassiveEventSupport",E,h)}catch{}return o}(),tr=function(){return!!document.createElement("canvas").getContext}(),Ca=!!(document.createElementNS&&wa("svg").createSVGRect),De=!!Ca&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),tn=!Ca&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var h=o.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),Xe=navigator.platform.indexOf("Mac")===0,di=navigator.platform.indexOf("Linux")===0;function qn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ot={ie:Sa,ielt9:Ko,edge:Or,webkit:As,android:Jl,android23:kr,androidStock:tu,opera:ke,chrome:fe,gecko:Fn,safari:Tn,phantom:Xo,opera12:eu,win:Dr,ie3d:Qs,webkit3d:xs,gecko3d:fi,any3d:Aa,mobile:Pi,mobileWebkit:Qo,mobileWebkit3d:Jo,msPointer:xa,pointer:ts,touch:tl,touchNative:es,mobileOpera:ns,mobileGecko:el,retina:Js,passiveEvents:Ra,canvas:tr,svg:Ca,vml:tn,inlineSvg:De,mac:Xe,linux:di},Rs=Ot.msPointer?"MSPointerDown":"pointerdown",nl=Ot.msPointer?"MSPointerMove":"pointermove",er=Ot.msPointer?"MSPointerUp":"pointerup",Cs=Ot.msPointer?"MSPointerCancel":"pointercancel",Mi={touchstart:Rs,touchmove:nl,touchend:er,touchcancel:Cs},Oi={touchstart:Nr,touchmove:Lr,touchend:Lr,touchcancel:Lr},Mn={},En=!1;function Ze(o,h,_){return h==="touchstart"&&nu(),Oi[h]?(_=Oi[h].bind(this,_),o.addEventListener(Mi[h],_,!1),_):(console.warn("wrong event specified:",h),E)}function il(o,h,_){if(!Mi[h]){console.warn("wrong event specified:",h);return}o.removeEventListener(Mi[h],_,!1)}function Ia(o){Mn[o.pointerId]=o}function ki(o){Mn[o.pointerId]&&(Mn[o.pointerId]=o)}function is(o){delete Mn[o.pointerId]}function nu(){En||(document.addEventListener(Rs,Ia,!0),document.addEventListener(nl,ki,!0),document.addEventListener(er,is,!0),document.addEventListener(Cs,is,!0),En=!0)}function Lr(o,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var _ in Mn)h.touches.push(Mn[_]);h.changedTouches=[h],o(h)}}function Nr(o,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Re(h),Lr(o,h)}function iu(o){var h={},_,T;for(T in o)_=o[T],h[T]=_&&_.bind?_.bind(o):_;return o=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var nr=200;function ss(o,h){o.addEventListener("dblclick",h);var _=0,T;function A(I){if(I.detail!==1){T=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var Z=Oa(I);if(!(Z.some(function(lt){return lt instanceof HTMLLabelElement&&lt.attributes.for})&&!Z.some(function(lt){return lt instanceof HTMLInputElement||lt instanceof HTMLSelectElement}))){var tt=Date.now();tt-_<=nr?(T++,T===2&&h(iu(I))):T=1,_=tt}}}return o.addEventListener("click",A),{dblclick:h,simDblclick:A}}function pn(o,h){o.removeEventListener("dblclick",h.dblclick),o.removeEventListener("click",h.simDblclick)}var Is=Di(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ir=Di(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),rs=ir==="webkitTransition"||ir==="OTransition"?ir+"End":"transitionend";function Vr(o){return typeof o=="string"?document.getElementById(o):o}function as(o,h){var _=o.style[h]||o.currentStyle&&o.currentStyle[h];if((!_||_==="auto")&&document.defaultView){var T=document.defaultView.getComputedStyle(o,null);_=T?T[h]:null}return _==="auto"?null:_}function te(o,h,_){var T=document.createElement(o);return T.className=h||"",_&&_.appendChild(T),T}function _e(o){var h=o.parentNode;h&&h.removeChild(o)}function ln(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function os(o){var h=o.parentNode;h&&h.lastChild!==o&&h.appendChild(o)}function sr(o){var h=o.parentNode;h&&h.firstChild!==o&&h.insertBefore(o,h.firstChild)}function rr(o,h){if(o.classList!==void 0)return o.classList.contains(h);var _=Be(o);return _.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(_)}function Gt(o,h){if(o.classList!==void 0)for(var _=P(h),T=0,A=_.length;T<A;T++)o.classList.add(_[T]);else if(!rr(o,h)){var I=Be(o);sl(o,(I?I+" ":"")+h)}}function be(o,h){o.classList!==void 0?o.classList.remove(h):sl(o,R((" "+Be(o)+" ").replace(" "+h+" "," ")))}function sl(o,h){o.className.baseVal===void 0?o.className=h:o.className.baseVal=h}function Be(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Le(o,h){"opacity"in o.style?o.style.opacity=h:"filter"in o.style&&zr(o,h)}function zr(o,h){var _=!1,T="DXImageTransform.Microsoft.Alpha";try{_=o.filters.item(T)}catch{if(h===1)return}h=Math.round(h*100),_?(_.Enabled=h!==100,_.Opacity=h):o.style.filter+=" progid:"+T+"(opacity="+h+")"}function Di(o){for(var h=document.documentElement.style,_=0;_<o.length;_++)if(o[_]in h)return o[_];return!1}function On(o,h,_){var T=h||new mt(0,0);o.style[Is]=(Ot.ie3d?"translate("+T.x+"px,"+T.y+"px)":"translate3d("+T.x+"px,"+T.y+"px,0)")+(_?" scale("+_+")":"")}function jt(o,h){o._leaflet_pos=h,Ot.any3d?On(o,h):(o.style.left=h.x+"px",o.style.top=h.y+"px")}function si(o){return o._leaflet_pos||new mt(0,0)}var wn,Li,Pa;if("onselectstart"in document)wn=function(){Nt(window,"selectstart",Re)},Li=function(){ue(window,"selectstart",Re)};else{var Ps=Di(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);wn=function(){if(Ps){var o=document.documentElement.style;Pa=o[Ps],o[Ps]="none"}},Li=function(){Ps&&(document.documentElement.style[Ps]=Pa,Pa=void 0)}}function Br(){Nt(window,"dragstart",Re)}function rl(){ue(window,"dragstart",Re)}var Ma,ar;function Ni(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(kn(),Ma=o,ar=o.style.outlineStyle,o.style.outlineStyle="none",Nt(window,"keydown",kn))}function kn(){Ma&&(Ma.style.outlineStyle=ar,Ma=void 0,ar=void 0,ue(window,"keydown",kn))}function ls(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Vi(o){var h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}var al={__proto__:null,TRANSFORM:Is,TRANSITION:ir,TRANSITION_END:rs,get:Vr,getStyle:as,create:te,remove:_e,empty:ln,toFront:os,toBack:sr,hasClass:rr,addClass:Gt,removeClass:be,setClass:sl,getClass:Be,setOpacity:Le,testProp:Di,setTransform:On,setPosition:jt,getPosition:si,get disableTextSelection(){return wn},get enableTextSelection(){return Li},disableImageDrag:Br,enableImageDrag:rl,preventOutline:Ni,restoreOutline:kn,getSizedParentNode:ls,getScale:Vi};function Nt(o,h,_,T){if(h&&typeof h=="object")for(var A in h)Ms(o,A,h[A],_);else{h=P(h);for(var I=0,Z=h.length;I<Z;I++)Ms(o,h[I],_,T)}return this}var ri="_leaflet_events";function ue(o,h,_,T){if(arguments.length===1)mi(o),delete o[ri];else if(h&&typeof h=="object")for(var A in h)pi(o,A,h[A],_);else if(h=P(h),arguments.length===2)mi(o,function(tt){return st(h,tt)!==-1});else for(var I=0,Z=h.length;I<Z;I++)pi(o,h[I],_,T);return this}function mi(o,h){for(var _ in o[ri]){var T=_.split(/\d/)[0];(!h||h(T))&&pi(o,T,null,null,_)}}var Gn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ms(o,h,_,T){var A=h+m(_)+(T?"_"+m(T):"");if(o[ri]&&o[ri][A])return this;var I=function(tt){return _.call(T||o,tt||window.event)},Z=I;!Ot.touchNative&&Ot.pointer&&h.indexOf("touch")===0?I=Ze(o,h,I):Ot.touch&&h==="dblclick"?I=ss(o,I):"addEventListener"in o?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?o.addEventListener(Gn[h]||h,I,Ot.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(I=function(tt){tt=tt||window.event,ks(o,tt)&&Z(tt)},o.addEventListener(Gn[h],I,!1)):o.addEventListener(h,Z,!1):o.attachEvent("on"+h,I),o[ri]=o[ri]||{},o[ri][A]=I}function pi(o,h,_,T,A){A=A||h+m(_)+(T?"_"+m(T):"");var I=o[ri]&&o[ri][A];if(!I)return this;!Ot.touchNative&&Ot.pointer&&h.indexOf("touch")===0?il(o,h,I):Ot.touch&&h==="dblclick"?pn(o,I):"removeEventListener"in o?o.removeEventListener(Gn[h]||h,I,!1):o.detachEvent("on"+h,I),o[ri][A]=null}function Zn(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function zi(o){return Ms(o,"wheel",Zn),this}function Os(o){return Nt(o,"mousedown touchstart dblclick contextmenu",Zn),o._leaflet_disable_click=!0,this}function Re(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Sn(o){return Re(o),Zn(o),this}function Oa(o){if(o.composedPath)return o.composedPath();for(var h=[],_=o.target;_;)h.push(_),_=_.parentNode;return h}function en(o,h){if(!h)return new mt(o.clientX,o.clientY);var _=Vi(h),T=_.boundingClientRect;return new mt((o.clientX-T.left)/_.x-h.clientLeft,(o.clientY-T.top)/_.y-h.clientTop)}var de=Ot.linux&&Ot.chrome?window.devicePixelRatio:Ot.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ur(o){return Ot.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/de:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function ks(o,h){var _=h.relatedTarget;if(!_)return!0;try{for(;_&&_!==o;)_=_.parentNode}catch{return!1}return _!==o}var su={__proto__:null,on:Nt,off:ue,stopPropagation:Zn,disableScrollPropagation:zi,disableClickPropagation:Os,preventDefault:Re,stop:Sn,getPropagationPath:Oa,getMousePosition:en,getWheelDelta:Ur,isExternalTarget:ks,addListener:Nt,removeListener:ue},jr=vt.extend({run:function(o,h,_,T){this.stop(),this._el=o,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(T||.5,.2),this._startPos=si(o),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=H(this._animate,this),this._step()},_step:function(o){var h=+new Date-this._startTime,_=this._duration*1e3;h<_?this._runFrame(this._easeOut(h/_),o):(this._runFrame(1),this._complete())},_runFrame:function(o,h){var _=this._startPos.add(this._offset.multiplyBy(o));h&&_._round(),jt(this._el,_),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Kt=vt.extend({options:{crs:Ss,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,h){h=k(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(Et(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ir&&Ot.any3d&&!Ot.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Nt(this._proxy,rs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,h,_){if(h=h===void 0?this._zoom:this._limitZoom(h),o=this._limitCenter(Et(o),h,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=r({animate:_.animate},_.zoom),_.pan=r({animate:_.animate,duration:_.duration},_.pan));var T=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,h,_.zoom):this._tryAnimatedPan(o,_.pan);if(T)return clearTimeout(this._sizeTimer),this}return this._resetView(o,h,_.pan&&_.pan.noMoveStart),this},setZoom:function(o,h){return this._loaded?this.setView(this.getCenter(),o,{zoom:h}):(this._zoom=o,this)},zoomIn:function(o,h){return o=o||(Ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,h)},zoomOut:function(o,h){return o=o||(Ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,h)},setZoomAround:function(o,h,_){var T=this.getZoomScale(h),A=this.getSize().divideBy(2),I=o instanceof mt?o:this.latLngToContainerPoint(o),Z=I.subtract(A).multiplyBy(1-1/T),tt=this.containerPointToLatLng(A.add(Z));return this.setView(tt,h,{zoom:_})},_getBoundsCenterZoom:function(o,h){h=h||{},o=o.getBounds?o.getBounds():St(o);var _=j(h.paddingTopLeft||h.padding||[0,0]),T=j(h.paddingBottomRight||h.padding||[0,0]),A=this.getBoundsZoom(o,!1,_.add(T));if(A=typeof h.maxZoom=="number"?Math.min(h.maxZoom,A):A,A===1/0)return{center:o.getCenter(),zoom:A};var I=T.subtract(_).divideBy(2),Z=this.project(o.getSouthWest(),A),tt=this.project(o.getNorthEast(),A),lt=this.unproject(Z.add(tt).divideBy(2).add(I),A);return{center:lt,zoom:A}},fitBounds:function(o,h){if(o=St(o),!o.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(o,h);return this.setView(_.center,_.zoom,h)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,h){return this.setView(o,this._zoom,{pan:h})},panBy:function(o,h){if(o=j(o).round(),h=h||{},!o.x&&!o.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new jr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Gt(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,_,h.duration||.25,h.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,h,_){if(_=_||{},_.animate===!1||!Ot.any3d)return this.setView(o,h,_);this._stop();var T=this.project(this.getCenter()),A=this.project(o),I=this.getSize(),Z=this._zoom;o=Et(o),h=h===void 0?Z:h;var tt=Math.max(I.x,I.y),lt=tt*this.getZoomScale(Z,h),bt=A.distanceTo(T)||1,At=1.42,It=At*At;function Mt(Fe){var ps=Fe?-1:1,Bs=Fe?lt:tt,fr=lt*lt-tt*tt+ps*It*It*bt*bt,Us=2*Bs*It*bt,Tl=fr/Us,_u=Math.sqrt(Tl*Tl+1)-Tl,El=_u<1e-9?-18:Math.log(_u);return El}function qt(Fe){return(Math.exp(Fe)-Math.exp(-Fe))/2}function Ve(Fe){return(Math.exp(Fe)+Math.exp(-Fe))/2}function We(Fe){return qt(Fe)/Ve(Fe)}var xn=Mt(0);function gi(Fe){return tt*(Ve(xn)/Ve(xn+At*Fe))}function xf(Fe){return tt*(Ve(xn)*We(xn+At*Fe)-qt(xn))/It}function Rf(Fe){return 1-Math.pow(1-Fe,1.5)}var bl=Date.now(),Ka=(Mt(1)-xn)/At,Cf=_.duration?1e3*_.duration:1e3*Ka*.8;function $a(){var Fe=(Date.now()-bl)/Cf,ps=Rf(Fe)*Ka;Fe<=1?(this._flyToFrame=H($a,this),this._move(this.unproject(T.add(A.subtract(T).multiplyBy(xf(ps)/bt)),Z),this.getScaleZoom(tt/gi(ps),Z),{flyTo:!0})):this._move(o,h)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),$a.call(this),this},flyToBounds:function(o,h){var _=this._getBoundsCenterZoom(o,h);return this.flyTo(_.center,_.zoom,h)},setMaxBounds:function(o){return o=St(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var h=this.options.minZoom;return this.options.minZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var h=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,h){this._enforcingBounds=!0;var _=this.getCenter(),T=this._limitCenter(_,this._zoom,St(o));return _.equals(T)||this.panTo(T,h),this._enforcingBounds=!1,this},panInside:function(o,h){h=h||{};var _=j(h.paddingTopLeft||h.padding||[0,0]),T=j(h.paddingBottomRight||h.padding||[0,0]),A=this.project(this.getCenter()),I=this.project(o),Z=this.getPixelBounds(),tt=Tt([Z.min.add(_),Z.max.subtract(T)]),lt=tt.getSize();if(!tt.contains(I)){this._enforcingBounds=!0;var bt=I.subtract(tt.getCenter()),At=tt.extend(I).getSize().subtract(lt);A.x+=bt.x<0?-At.x:At.x,A.y+=bt.y<0?-At.y:At.y,this.panTo(this.unproject(A),h),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=r({animate:!1,pan:!0},o===!0?{animate:!0}:o);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),T=h.divideBy(2).round(),A=_.divideBy(2).round(),I=T.subtract(A);return!I.x&&!I.y?this:(o.animate&&o.pan?this.panBy(I):(o.pan&&this._rawPanBy(I),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=r({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=c(this._handleGeolocationResponse,this),_=c(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,_,o):navigator.geolocation.getCurrentPosition(h,_,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var h=o.code,_=o.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var h=o.coords.latitude,_=o.coords.longitude,T=new xt(h,_),A=T.toBounds(o.coords.accuracy*2),I=this._locateOptions;if(I.setView){var Z=this.getBoundsZoom(A);this.setView(T,I.maxZoom?Math.min(Z,I.maxZoom):Z)}var tt={latlng:T,bounds:A,timestamp:o.timestamp};for(var lt in o.coords)typeof o.coords[lt]=="number"&&(tt[lt]=o.coords[lt]);this.fire("locationfound",tt)}},addHandler:function(o,h){if(!h)return this;var _=this[o]=new h(this);return this._handlers.push(_),this.options[o]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),_e(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)_e(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,h){var _="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),T=te("div",_,h||this._mapPane);return o&&(this._panes[o]=T),T},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),h=this.unproject(o.getBottomLeft()),_=this.unproject(o.getTopRight());return new yt(h,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,h,_){o=St(o),_=j(_||[0,0]);var T=this.getZoom()||0,A=this.getMinZoom(),I=this.getMaxZoom(),Z=o.getNorthWest(),tt=o.getSouthEast(),lt=this.getSize().subtract(_),bt=Tt(this.project(tt,T),this.project(Z,T)).getSize(),At=Ot.any3d?this.options.zoomSnap:1,It=lt.x/bt.x,Mt=lt.y/bt.y,qt=h?Math.max(It,Mt):Math.min(It,Mt);return T=this.getScaleZoom(qt,T),At&&(T=Math.round(T/(At/100))*(At/100),T=h?Math.ceil(T/At)*At:Math.floor(T/At)*At),Math.max(A,Math.min(I,T))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new mt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,h){var _=this._getTopLeftPoint(o,h);return new ct(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,h){var _=this.options.crs;return h=h===void 0?this._zoom:h,_.scale(o)/_.scale(h)},getScaleZoom:function(o,h){var _=this.options.crs;h=h===void 0?this._zoom:h;var T=_.zoom(o*_.scale(h));return isNaN(T)?1/0:T},project:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(Et(o),h)},unproject:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(j(o),h)},layerPointToLatLng:function(o){var h=j(o).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(o){var h=this.project(Et(o))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(Et(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(St(o))},distance:function(o,h){return this.options.crs.distance(Et(o),Et(h))},containerPointToLayerPoint:function(o){return j(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return j(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var h=this.containerPointToLayerPoint(j(o));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Et(o)))},mouseEventToContainerPoint:function(o){return en(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var h=this._container=Vr(o);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Nt(h,"scroll",this._onScroll,this),this._containerId=m(h)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ot.any3d,Gt(o,"leaflet-container"+(Ot.touch?" leaflet-touch":"")+(Ot.retina?" leaflet-retina":"")+(Ot.ielt9?" leaflet-oldie":"")+(Ot.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=as(o,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),jt(this._mapPane,new mt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Gt(o.markerPane,"leaflet-zoom-hide"),Gt(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,h,_){jt(this._mapPane,new mt(0,0));var T=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var A=this._zoom!==h;this._moveStart(A,_)._move(o,h)._moveEnd(A),this.fire("viewreset"),T&&this.fire("load")},_moveStart:function(o,h){return o&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(o,h,_,T){h===void 0&&(h=this._zoom);var A=this._zoom!==h;return this._zoom=h,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),T?_&&_.pinch&&this.fire("zoom",_):((A||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){jt(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[m(this._container)]=this;var h=o?ue:Nt;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Ot.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=H(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,h){for(var _=[],T,A=h==="mouseout"||h==="mouseover",I=o.target||o.srcElement,Z=!1;I;){if(T=this._targets[m(I)],T&&(h==="click"||h==="preclick")&&this._draggableMoved(T)){Z=!0;break}if(T&&T.listens(h,!0)&&(A&&!ks(I,o)||(_.push(T),A))||I===this._container)break;I=I.parentNode}return!_.length&&!Z&&!A&&this.listens(h,!0)&&(_=[this]),_},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var h=o.target||o.srcElement;if(!(!this._loaded||h._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(h))){var _=o.type;_==="mousedown"&&Ni(h),this._fireDOMEvent(o,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,h,_){if(o.type==="click"){var T=r({},o);T.type="preclick",this._fireDOMEvent(T,T.type,_)}var A=this._findEventTargets(o,h);if(_){for(var I=[],Z=0;Z<_.length;Z++)_[Z].listens(h,!0)&&I.push(_[Z]);A=I.concat(A)}if(A.length){h==="contextmenu"&&Re(o);var tt=A[0],lt={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var bt=tt.getLatLng&&(!tt._radius||tt._radius<=10);lt.containerPoint=bt?this.latLngToContainerPoint(tt.getLatLng()):this.mouseEventToContainerPoint(o),lt.layerPoint=this.containerPointToLayerPoint(lt.containerPoint),lt.latlng=bt?tt.getLatLng():this.layerPointToLatLng(lt.layerPoint)}for(Z=0;Z<A.length;Z++)if(A[Z].fire(h,lt,!0),lt.originalEvent._stopped||A[Z].options.bubblingMouseEvents===!1&&st(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,h=this._handlers.length;o<h;o++)this._handlers[o].disable()},whenReady:function(o,h){return this._loaded?o.call(h||this,{target:this}):this.on("load",o,h),this},_getMapPanePos:function(){return si(this._mapPane)||new mt(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,h){var _=o&&h!==void 0?this._getNewPixelOrigin(o,h):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,h){var _=this.getSize()._divideBy(2);return this.project(o,h)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,h,_){var T=this._getNewPixelOrigin(_,h);return this.project(o,h)._subtract(T)},_latLngBoundsToNewLayerBounds:function(o,h,_){var T=this._getNewPixelOrigin(_,h);return Tt([this.project(o.getSouthWest(),h)._subtract(T),this.project(o.getNorthWest(),h)._subtract(T),this.project(o.getSouthEast(),h)._subtract(T),this.project(o.getNorthEast(),h)._subtract(T)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,h,_){if(!_)return o;var T=this.project(o,h),A=this.getSize().divideBy(2),I=new ct(T.subtract(A),T.add(A)),Z=this._getBoundsOffset(I,_,h);return Math.abs(Z.x)<=1&&Math.abs(Z.y)<=1?o:this.unproject(T.add(Z),h)},_limitOffset:function(o,h){if(!h)return o;var _=this.getPixelBounds(),T=new ct(_.min.add(o),_.max.add(o));return o.add(this._getBoundsOffset(T,h))},_getBoundsOffset:function(o,h,_){var T=Tt(this.project(h.getNorthEast(),_),this.project(h.getSouthWest(),_)),A=T.min.subtract(o.min),I=T.max.subtract(o.max),Z=this._rebound(A.x,-I.x),tt=this._rebound(A.y,-I.y);return new mt(Z,tt)},_rebound:function(o,h){return o+h>0?Math.round(o-h)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(h))},_limitZoom:function(o){var h=this.getMinZoom(),_=this.getMaxZoom(),T=Ot.any3d?this.options.zoomSnap:1;return T&&(o=Math.round(o/T)*T),Math.max(h,Math.min(_,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,h){var _=this._getCenterOffset(o)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,h),!0)},_createAnimProxy:function(){var o=this._proxy=te("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(h){var _=Is,T=this._proxy.style[_];On(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),T===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){_e(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),h=this.getZoom();On(this._proxy,this.project(o,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,h,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var T=this.getZoomScale(h),A=this._getCenterOffset(o)._divideBy(1-1/T);return _.animate!==!0&&!this.getSize().contains(A)?!1:(H(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(o,h,!0)},this),!0)},_animateZoom:function(o,h,_,T){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=h,Gt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:h,noUpdate:T}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function us(o,h){return new Kt(o,h)}var gn=Yt.extend({options:{position:"topright"},initialize:function(o){k(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var h=this._map;return h&&h.removeControl(this),this.options.position=o,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var h=this._container=this.onAdd(o),_=this.getPosition(),T=o._controlCorners[_];return Gt(h,"leaflet-control"),_.indexOf("bottom")!==-1?T.insertBefore(h,T.firstChild):T.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(_e(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),An=function(o){return new gn(o)};Kt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},h="leaflet-",_=this._controlContainer=te("div",h+"control-container",this._container);function T(A,I){var Z=h+A+" "+h+I;o[A+I]=te("div",Z,_)}T("top","left"),T("top","right"),T("bottom","left"),T("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)_e(this._controlCorners[o]);_e(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ol=gn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,h,_,T){return _<T?-1:T<_?1:0}},initialize:function(o,h,_){k(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var T in o)this._addLayer(o[T],T);for(T in h)this._addLayer(h[T],T,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return gn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,h){return this._addLayer(o,h),this._map?this._update():this},addOverlay:function(o,h){return this._addLayer(o,h,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var h=this._getLayer(m(o));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Gt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(Gt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",h=this._container=te("div",o),_=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Os(h),zi(h);var T=this._section=te("section",o+"-list");_&&(this._map.on("click",this.collapse,this),Nt(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=te("a",o+"-toggle",h);A.href="#",A.title="Layers",A.setAttribute("role","button"),Nt(A,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){Re(I),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=te("div",o+"-base",T),this._separator=te("div",o+"-separator",T),this._overlaysList=te("div",o+"-overlays",T),h.appendChild(T)},_getLayer:function(o){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&m(this._layers[h].layer)===o)return this._layers[h]},_addLayer:function(o,h,_){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:h,overlay:_}),this.options.sortLayers&&this._layers.sort(c(function(T,A){return this.options.sortFunction(T.layer,A.layer,T.name,A.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ln(this._baseLayersList),ln(this._overlaysList),this._layerControlInputs=[];var o,h,_,T,A=0;for(_=0;_<this._layers.length;_++)T=this._layers[_],this._addItem(T),h=h||T.overlay,o=o||!T.overlay,A+=T.overlay?0:1;return this.options.hideSingleBase&&(o=o&&A>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=h&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var h=this._getLayer(m(o.target)),_=h.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;_&&this._map.fire(_,h)},_createRadioElement:function(o,h){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(h?' checked="checked"':"")+"/>",T=document.createElement("div");return T.innerHTML=_,T.firstChild},_addItem:function(o){var h=document.createElement("label"),_=this._map.hasLayer(o.layer),T;o.overlay?(T=document.createElement("input"),T.type="checkbox",T.className="leaflet-control-layers-selector",T.defaultChecked=_):T=this._createRadioElement("leaflet-base-layers_"+m(this),_),this._layerControlInputs.push(T),T.layerId=m(o.layer),Nt(T,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+o.name;var I=document.createElement("span");h.appendChild(I),I.appendChild(T),I.appendChild(A);var Z=o.overlay?this._overlaysList:this._baseLayersList;return Z.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,h,_,T=[],A=[];this._handlingClick=!0;for(var I=o.length-1;I>=0;I--)h=o[I],_=this._getLayer(h.layerId).layer,h.checked?T.push(_):h.checked||A.push(_);for(I=0;I<A.length;I++)this._map.hasLayer(A[I])&&this._map.removeLayer(A[I]);for(I=0;I<T.length;I++)this._map.hasLayer(T[I])||this._map.addLayer(T[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h,_,T=this._map.getZoom(),A=o.length-1;A>=0;A--)h=o[A],_=this._getLayer(h.layerId).layer,h.disabled=_.options.minZoom!==void 0&&T<_.options.minZoom||_.options.maxZoom!==void 0&&T>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,Nt(o,"click",Re),this.expand();var h=this;setTimeout(function(){ue(o,"click",Re),h._preventClick=!1})}}),pc=function(o,h,_){return new ol(o,h,_)},Ds=gn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var h="leaflet-control-zoom",_=te("div",h+" leaflet-bar"),T=this.options;return this._zoomInButton=this._createButton(T.zoomInText,T.zoomInTitle,h+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(T.zoomOutText,T.zoomOutTitle,h+"-out",_,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,h,_,T,A){var I=te("a",_,T);return I.innerHTML=o,I.href="#",I.title=h,I.setAttribute("role","button"),I.setAttribute("aria-label",h),Os(I),Nt(I,"click",Sn),Nt(I,"click",A,this),Nt(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var o=this._map,h="leaflet-disabled";be(this._zoomInButton,h),be(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(Gt(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(Gt(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});Kt.mergeOptions({zoomControl:!0}),Kt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ds,this.addControl(this.zoomControl))});var ka=function(o){return new Ds(o)},Da=gn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var h="leaflet-control-scale",_=te("div",h),T=this.options;return this._addScales(T,h+"-line",_),o.on(T.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),_},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,h,_){o.metric&&(this._mScale=te("div",h,_)),o.imperial&&(this._iScale=te("div",h,_))},_update:function(){var o=this._map,h=o.getSize().y/2,_=o.distance(o.containerPointToLatLng([0,h]),o.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(_)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var h=this._getRoundNum(o),_=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,_,h/o)},_updateImperial:function(o){var h=o*3.2808399,_,T,A;h>5280?(_=h/5280,T=this._getRoundNum(_),this._updateScale(this._iScale,T+" mi",T/_)):(A=this._getRoundNum(h),this._updateScale(this._iScale,A+" ft",A/h))},_updateScale:function(o,h,_){o.style.width=Math.round(this.options.maxWidth*_)+"px",o.innerHTML=h},_getRoundNum:function(o){var h=Math.pow(10,(Math.floor(o)+"").length-1),_=o/h;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,h*_}}),La=function(o){return new Da(o)},ru='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',or=gn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ot.inlineSvg?ru+" ":"")+"Leaflet</a>"},initialize:function(o){k(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=te("div","leaflet-control-attribution"),Os(this._container);for(var h in o._layers)o._layers[h].getAttribution&&this.addAttribution(o._layers[h].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var h in this._attributions)this._attributions[h]&&o.push(h);var _=[];this.options.prefix&&_.push(this.options.prefix),o.length&&_.push(o.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});Kt.mergeOptions({attributionControl:!0}),Kt.addInitHook(function(){this.options.attributionControl&&new or().addTo(this)});var gc=function(o){return new or(o)};gn.Layers=ol,gn.Zoom=Ds,gn.Scale=Da,gn.Attribution=or,An.layers=pc,An.zoom=ka,An.scale=La,An.attribution=gc;var Wn=Yt.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Wn.addTo=function(o,h){return o.addHandler(h,this),this};var Hr={Events:et},ll=Ot.touch?"touchstart mousedown":"mousedown",Bi=vt.extend({options:{clickTolerance:3},initialize:function(o,h,_,T){k(this,T),this._element=o,this._dragStartTarget=h||o,this._preventOutline=_},enable:function(){this._enabled||(Nt(this._dragStartTarget,ll,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Bi._dragging===this&&this.finishDrag(!0),ue(this._dragStartTarget,ll,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!rr(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Bi._dragging===this&&this.finishDrag();return}if(!(Bi._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Bi._dragging=this,this._preventOutline&&Ni(this._element),Br(),wn(),!this._moving)){this.fire("down");var h=o.touches?o.touches[0]:o,_=ls(this._element);this._startPoint=new mt(h.clientX,h.clientY),this._startPos=si(this._element),this._parentScale=Vi(_);var T=o.type==="mousedown";Nt(document,T?"mousemove":"touchmove",this._onMove,this),Nt(document,T?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var h=o.touches&&o.touches.length===1?o.touches[0]:o,_=new mt(h.clientX,h.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,Re(o),this._moved||(this.fire("dragstart"),this._moved=!0,Gt(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Gt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),jt(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){be(document.body,"leaflet-dragging"),this._lastTarget&&(be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ue(document,"mousemove touchmove",this._onMove,this),ue(document,"mouseup touchend touchcancel",this._onUp,this),rl(),Li();var h=this._moved&&this._moving;this._moving=!1,Bi._dragging=!1,h&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Na(o,h,_){var T,A=[1,4,2,8],I,Z,tt,lt,bt,At,It,Mt;for(I=0,At=o.length;I<At;I++)o[I]._code=cs(o[I],h);for(tt=0;tt<4;tt++){for(It=A[tt],T=[],I=0,At=o.length,Z=At-1;I<At;Z=I++)lt=o[I],bt=o[Z],lt._code&It?bt._code&It||(Mt=un(bt,lt,It,h,_),Mt._code=cs(Mt,h),T.push(Mt)):(bt._code&It&&(Mt=un(bt,lt,It,h,_),Mt._code=cs(Mt,h),T.push(Mt)),T.push(lt));o=T}return o}function lr(o,h){var _,T,A,I,Z,tt,lt,bt,At;if(!o||o.length===0)throw new Error("latlngs not passed");g(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var It=Et([0,0]),Mt=St(o),qt=Mt.getNorthWest().distanceTo(Mt.getSouthWest())*Mt.getNorthEast().distanceTo(Mt.getNorthWest());qt<1700&&(It=Va(o));var Ve=o.length,We=[];for(_=0;_<Ve;_++){var xn=Et(o[_]);We.push(h.project(Et([xn.lat-It.lat,xn.lng-It.lng])))}for(tt=lt=bt=0,_=0,T=Ve-1;_<Ve;T=_++)A=We[_],I=We[T],Z=A.y*I.x-I.y*A.x,lt+=(A.x+I.x)*Z,bt+=(A.y+I.y)*Z,tt+=Z*3;tt===0?At=We[0]:At=[lt/tt,bt/tt];var gi=h.unproject(j(At));return Et([gi.lat+It.lat,gi.lng+It.lng])}function Va(o){for(var h=0,_=0,T=0,A=0;A<o.length;A++){var I=Et(o[A]);h+=I.lat,_+=I.lng,T++}return Et([h/T,_/T])}var za={__proto__:null,clipPolygon:Na,polygonCenter:lr,centroid:Va};function ul(o,h){if(!h||!o.length)return o.slice();var _=h*h;return o=ou(o,_),o=au(o,_),o}function Ba(o,h,_){return Math.sqrt(Yn(o,h,_,!0))}function Ls(o,h,_){return Yn(o,h,_)}function au(o,h){var _=o.length,T=typeof Uint8Array<"u"?Uint8Array:Array,A=new T(_);A[0]=A[_-1]=1,Ua(o,A,h,0,_-1);var I,Z=[];for(I=0;I<_;I++)A[I]&&Z.push(o[I]);return Z}function Ua(o,h,_,T,A){var I=0,Z,tt,lt;for(tt=T+1;tt<=A-1;tt++)lt=Yn(o[tt],o[T],o[A],!0),lt>I&&(Z=tt,I=lt);I>_&&(h[Z]=1,Ua(o,h,_,T,Z),Ua(o,h,_,Z,A))}function ou(o,h){for(var _=[o[0]],T=1,A=0,I=o.length;T<I;T++)lu(o[T],o[A])>h&&(_.push(o[T]),A=T);return A<I-1&&_.push(o[I-1]),_}var cl;function Fr(o,h,_,T,A){var I=T?cl:cs(o,_),Z=cs(h,_),tt,lt,bt;for(cl=Z;;){if(!(I|Z))return[o,h];if(I&Z)return!1;tt=I||Z,lt=un(o,h,tt,_,A),bt=cs(lt,_),tt===I?(o=lt,I=bt):(h=lt,Z=bt)}}function un(o,h,_,T,A){var I=h.x-o.x,Z=h.y-o.y,tt=T.min,lt=T.max,bt,At;return _&8?(bt=o.x+I*(lt.y-o.y)/Z,At=lt.y):_&4?(bt=o.x+I*(tt.y-o.y)/Z,At=tt.y):_&2?(bt=lt.x,At=o.y+Z*(lt.x-o.x)/I):_&1&&(bt=tt.x,At=o.y+Z*(tt.x-o.x)/I),new mt(bt,At,A)}function cs(o,h){var _=0;return o.x<h.min.x?_|=1:o.x>h.max.x&&(_|=2),o.y<h.min.y?_|=4:o.y>h.max.y&&(_|=8),_}function lu(o,h){var _=h.x-o.x,T=h.y-o.y;return _*_+T*T}function Yn(o,h,_,T){var A=h.x,I=h.y,Z=_.x-A,tt=_.y-I,lt=Z*Z+tt*tt,bt;return lt>0&&(bt=((o.x-A)*Z+(o.y-I)*tt)/lt,bt>1?(A=_.x,I=_.y):bt>0&&(A+=Z*bt,I+=tt*bt)),Z=o.x-A,tt=o.y-I,T?Z*Z+tt*tt:new mt(A,I)}function g(o){return!Y(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function w(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),g(o)}function x(o,h){var _,T,A,I,Z,tt,lt,bt;if(!o||o.length===0)throw new Error("latlngs not passed");g(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var At=Et([0,0]),It=St(o),Mt=It.getNorthWest().distanceTo(It.getSouthWest())*It.getNorthEast().distanceTo(It.getNorthWest());Mt<1700&&(At=Va(o));var qt=o.length,Ve=[];for(_=0;_<qt;_++){var We=Et(o[_]);Ve.push(h.project(Et([We.lat-At.lat,We.lng-At.lng])))}for(_=0,T=0;_<qt-1;_++)T+=Ve[_].distanceTo(Ve[_+1])/2;if(T===0)bt=Ve[0];else for(_=0,I=0;_<qt-1;_++)if(Z=Ve[_],tt=Ve[_+1],A=Z.distanceTo(tt),I+=A,I>T){lt=(I-T)/A,bt=[tt.x-lt*(tt.x-Z.x),tt.y-lt*(tt.y-Z.y)];break}var xn=h.unproject(j(bt));return Et([xn.lat+At.lat,xn.lng+At.lng])}var N={__proto__:null,simplify:ul,pointToSegmentDistance:Ba,closestPointOnSegment:Ls,clipSegment:Fr,_getEdgeIntersection:un,_getBitCode:cs,_sqClosestPointOnSegment:Yn,isFlat:g,_flat:w,polylineCenter:x},J={project:function(o){return new mt(o.lng,o.lat)},unproject:function(o){return new xt(o.y,o.x)},bounds:new ct([-180,-90],[180,90])},ut={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ct([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var h=Math.PI/180,_=this.R,T=o.lat*h,A=this.R_MINOR/_,I=Math.sqrt(1-A*A),Z=I*Math.sin(T),tt=Math.tan(Math.PI/4-T/2)/Math.pow((1-Z)/(1+Z),I/2);return T=-_*Math.log(Math.max(tt,1e-10)),new mt(o.lng*h*_,T)},unproject:function(o){for(var h=180/Math.PI,_=this.R,T=this.R_MINOR/_,A=Math.sqrt(1-T*T),I=Math.exp(-o.y/_),Z=Math.PI/2-2*Math.atan(I),tt=0,lt=.1,bt;tt<15&&Math.abs(lt)>1e-7;tt++)bt=A*Math.sin(Z),bt=Math.pow((1-bt)/(1+bt),A/2),lt=Math.PI/2-2*Math.atan(I*bt)-Z,Z+=lt;return new xt(Z*h,o.x*h/_)}},wt={__proto__:null,LonLat:J,Mercator:ut,SphericalMercator:Ji},se=r({},le,{code:"EPSG:3395",projection:ut,transformation:function(){var o=.5/(Math.PI*ut.R);return Ii(o,.5,-o,.5)}()}),Qe=r({},le,{code:"EPSG:4326",projection:J,transformation:Ii(1/180,1,-1/180,.5)}),re=r({},xe,{projection:J,transformation:Ii(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,h){var _=h.lng-o.lng,T=h.lat-o.lat;return Math.sqrt(_*_+T*T)},infinite:!0});xe.Earth=le,xe.EPSG3395=se,xe.EPSG3857=Ss,xe.EPSG900913=Mr,xe.EPSG4326=Qe,xe.Simple=re;var ye=vt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[m(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[m(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var h=o.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var _=this.getEvents();h.on(_,this),this.once("remove",function(){h.off(_,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});Kt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var h=m(o);return this._layers[h]?this:(this._layers[h]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var h=m(o);return this._layers[h]?(this._loaded&&o.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return m(o)in this._layers},eachLayer:function(o,h){for(var _ in this._layers)o.call(h,this._layers[_]);return this},_addLayers:function(o){o=o?Y(o)?o:[o]:[];for(var h=0,_=o.length;h<_;h++)this.addLayer(o[h])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[m(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var h=m(o);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,h=-1/0,_=this._getZoomSpan();for(var T in this._zoomBoundLayers){var A=this._zoomBoundLayers[T].options;o=A.minZoom===void 0?o:Math.min(o,A.minZoom),h=A.maxZoom===void 0?h:Math.max(h,A.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=o===1/0?void 0:o,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ne=ye.extend({initialize:function(o,h){k(this,h),this._layers={};var _,T;if(o)for(_=0,T=o.length;_<T;_++)this.addLayer(o[_])},addLayer:function(o){var h=this.getLayerId(o);return this._layers[h]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var h=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(o){var h=typeof o=="number"?o:this.getLayerId(o);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var h=Array.prototype.slice.call(arguments,1),_,T;for(_ in this._layers)T=this._layers[_],T[o]&&T[o].apply(T,h);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,h){for(var _ in this._layers)o.call(h,this._layers[_]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return m(o)}}),Ns=function(o,h){return new Ne(o,h)},Me=Ne.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Ne.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Ne.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new yt;for(var h in this._layers){var _=this._layers[h];o.extend(_.getBounds?_.getBounds():_.getLatLng())}return o}}),hs=function(o,h){return new Me(o,h)},fs=Yt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){k(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,h){var _=this._getIconUrl(o);if(!_){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var T=this._createImg(_,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(T,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),T},_setIconStyles:function(o,h){var _=this.options,T=_[h+"Size"];typeof T=="number"&&(T=[T,T]);var A=j(T),I=j(h==="shadow"&&_.shadowAnchor||_.iconAnchor||A&&A.divideBy(2,!0));o.className="leaflet-marker-"+h+" "+(_.className||""),I&&(o.style.marginLeft=-I.x+"px",o.style.marginTop=-I.y+"px"),A&&(o.style.width=A.x+"px",o.style.height=A.y+"px")},_createImg:function(o,h){return h=h||document.createElement("img"),h.src=o,h},_getIconUrl:function(o){return Ot.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function uu(o){return new fs(o)}var ja=fs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof ja.imagePath!="string"&&(ja.imagePath=this._detectIconPath()),(this.options.imagePath||ja.imagePath)+fs.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var h=function(_,T,A){var I=T.exec(_);return I&&I[A]};return o=h(o,/^url\((['"])?(.+)\1\)$/,2),o&&h(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=te("div","leaflet-default-icon-path",document.body),h=as(o,"background-image")||as(o,"backgroundImage");if(document.body.removeChild(o),h=this._stripUrl(h),h)return h;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),_c=Wn.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Bi(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Gt(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var h=this._marker,_=h._map,T=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,I=si(h._icon),Z=_.getPixelBounds(),tt=_.getPixelOrigin(),lt=Tt(Z.min._subtract(tt).add(A),Z.max._subtract(tt).subtract(A));if(!lt.contains(I)){var bt=j((Math.max(lt.max.x,I.x)-lt.max.x)/(Z.max.x-lt.max.x)-(Math.min(lt.min.x,I.x)-lt.min.x)/(Z.min.x-lt.min.x),(Math.max(lt.max.y,I.y)-lt.max.y)/(Z.max.y-lt.max.y)-(Math.min(lt.min.y,I.y)-lt.min.y)/(Z.min.y-lt.min.y)).multiplyBy(T);_.panBy(bt,{animate:!1}),this._draggable._newPos._add(bt),this._draggable._startPos._add(bt),jt(h._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=H(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=H(this._adjustPan.bind(this,o)))},_onDrag:function(o){var h=this._marker,_=h._shadow,T=si(h._icon),A=h._map.layerPointToLatLng(T);_&&jt(_,T),h._latlng=A,o.latlng=A,o.oldLatLng=this._oldLatLng,h.fire("move",o).fire("drag",o)},_onDragEnd:function(o){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Ha=ye.extend({options:{icon:new ja,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,h){k(this,h),this._latlng=Et(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var h=this._latlng;return this._latlng=Et(o),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=o.icon.createIcon(this._icon),T=!1;_!==this._icon&&(this._icon&&this._removeIcon(),T=!0,o.title&&(_.title=o.title),_.tagName==="IMG"&&(_.alt=o.alt||"")),Gt(_,h),o.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nt(_,"focus",this._panOnFocus,this);var A=o.icon.createShadow(this._shadow),I=!1;A!==this._shadow&&(this._removeShadow(),I=!0),A&&(Gt(A,h),A.alt=""),this._shadow=A,o.opacity<1&&this._updateOpacity(),T&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&I&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ue(this._icon,"focus",this._panOnFocus,this),_e(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&_e(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&jt(this._icon,o),this._shadow&&jt(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Gt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_c)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _c(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Le(this._icon,o),this._shadow&&Le(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var h=this.options.icon.options,_=h.iconSize?j(h.iconSize):j(0,0),T=h.iconAnchor?j(h.iconAnchor):j(0,0);o.panInside(this._latlng,{paddingTopLeft:T,paddingBottomRight:_.subtract(T)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yc(o,h){return new Ha(o,h)}var Vs=ye.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return k(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),hl=Vs.extend({options:{fill:!0,radius:10},initialize:function(o,h){k(this,h),this._latlng=Et(o),this._radius=this.options.radius},setLatLng:function(o){var h=this._latlng;return this._latlng=Et(o),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var h=o&&o.radius||this._radius;return Vs.prototype.setStyle.call(this,o),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,h=this._radiusY||o,_=this._clickTolerance(),T=[o+_,h+_];this._pxBounds=new ct(this._point.subtract(T),this._point.add(T))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function bf(o,h){return new hl(o,h)}var vc=hl.extend({initialize:function(o,h,_){if(typeof h=="number"&&(h=r({},_,{radius:h})),k(this,h),this._latlng=Et(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new yt(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Vs.prototype.setStyle,_project:function(){var o=this._latlng.lng,h=this._latlng.lat,_=this._map,T=_.options.crs;if(T.distance===le.distance){var A=Math.PI/180,I=this._mRadius/le.R/A,Z=_.project([h+I,o]),tt=_.project([h-I,o]),lt=Z.add(tt).divideBy(2),bt=_.unproject(lt).lat,At=Math.acos((Math.cos(I*A)-Math.sin(h*A)*Math.sin(bt*A))/(Math.cos(h*A)*Math.cos(bt*A)))/A;(isNaN(At)||At===0)&&(At=I/Math.cos(Math.PI/180*h)),this._point=lt.subtract(_.getPixelOrigin()),this._radius=isNaN(At)?0:lt.x-_.project([bt,o-At]).x,this._radiusY=lt.y-Z.y}else{var It=T.unproject(T.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(It).x}this._updateBounds()}});function Sp(o,h,_){return new vc(o,h,_)}var zs=Vs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,h){k(this,h),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var h=1/0,_=null,T=Yn,A,I,Z=0,tt=this._parts.length;Z<tt;Z++)for(var lt=this._parts[Z],bt=1,At=lt.length;bt<At;bt++){A=lt[bt-1],I=lt[bt];var It=T(o,A,I,!0);It<h&&(h=It,_=T(o,A,I))}return _&&(_.distance=Math.sqrt(h)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return x(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,h){return h=h||this._defaultShape(),o=Et(o),h.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new yt,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return g(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var h=[],_=g(o),T=0,A=o.length;T<A;T++)_?(h[T]=Et(o[T]),this._bounds.extend(h[T])):h[T]=this._convertLatLngs(o[T]);return h},_project:function(){var o=new ct;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),h=new mt(o,o);this._rawPxBounds&&(this._pxBounds=new ct([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(o,h,_){var T=o[0]instanceof xt,A=o.length,I,Z;if(T){for(Z=[],I=0;I<A;I++)Z[I]=this._map.latLngToLayerPoint(o[I]),_.extend(Z[I]);h.push(Z)}else for(I=0;I<A;I++)this._projectLatlngs(o[I],h,_)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,_,T,A,I,Z,tt,lt;for(_=0,A=0,I=this._rings.length;_<I;_++)for(lt=this._rings[_],T=0,Z=lt.length;T<Z-1;T++)tt=Fr(lt[T],lt[T+1],o,T,!0),tt&&(h[A]=h[A]||[],h[A].push(tt[0]),(tt[1]!==lt[T+1]||T===Z-2)&&(h[A].push(tt[1]),A++))}},_simplifyPoints:function(){for(var o=this._parts,h=this.options.smoothFactor,_=0,T=o.length;_<T;_++)o[_]=ul(o[_],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,h){var _,T,A,I,Z,tt,lt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(_=0,I=this._parts.length;_<I;_++)for(tt=this._parts[_],T=0,Z=tt.length,A=Z-1;T<Z;A=T++)if(!(!h&&T===0)&&Ba(o,tt[A],tt[T])<=lt)return!0;return!1}});function Ap(o,h){return new zs(o,h)}zs._flat=w;var Fa=zs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return lr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var h=zs.prototype._convertLatLngs.call(this,o),_=h.length;return _>=2&&h[0]instanceof xt&&h[0].equals(h[_-1])&&h.pop(),h},_setLatLngs:function(o){zs.prototype._setLatLngs.call(this,o),g(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return g(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,h=this.options.weight,_=new mt(h,h);if(o=new ct(o.min.subtract(_),o.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var T=0,A=this._rings.length,I;T<A;T++)I=Na(this._rings[T],o,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var h=!1,_,T,A,I,Z,tt,lt,bt;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(I=0,lt=this._parts.length;I<lt;I++)for(_=this._parts[I],Z=0,bt=_.length,tt=bt-1;Z<bt;tt=Z++)T=_[Z],A=_[tt],T.y>o.y!=A.y>o.y&&o.x<(A.x-T.x)*(o.y-T.y)/(A.y-T.y)+T.x&&(h=!h);return h||zs.prototype._containsPoint.call(this,o,!0)}});function ai(o,h){return new Fa(o,h)}var oi=Me.extend({initialize:function(o,h){k(this,h),this._layers={},o&&this.addData(o)},addData:function(o){var h=Y(o)?o:o.features,_,T,A;if(h){for(_=0,T=h.length;_<T;_++)A=h[_],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var I=this.options;if(I.filter&&!I.filter(o))return this;var Z=fl(o,I);return Z?(Z.feature=qa(o),Z.defaultOptions=Z.options,this.resetStyle(Z),I.onEachFeature&&I.onEachFeature(o,Z),this.addLayer(Z)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=r({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(h){this._setLayerStyle(h,o)},this)},_setLayerStyle:function(o,h){o.setStyle&&(typeof h=="function"&&(h=h(o.feature)),o.setStyle(h))}});function fl(o,h){var _=o.type==="Feature"?o.geometry:o,T=_?_.coordinates:null,A=[],I=h&&h.pointToLayer,Z=h&&h.coordsToLatLng||cu,tt,lt,bt,At;if(!T&&!_)return null;switch(_.type){case"Point":return tt=Z(T),bc(I,o,tt,h);case"MultiPoint":for(bt=0,At=T.length;bt<At;bt++)tt=Z(T[bt]),A.push(bc(I,o,tt,h));return new Me(A);case"LineString":case"MultiLineString":return lt=dl(T,_.type==="LineString"?0:1,Z),new zs(lt,h);case"Polygon":case"MultiPolygon":return lt=dl(T,_.type==="Polygon"?1:2,Z),new Fa(lt,h);case"GeometryCollection":for(bt=0,At=_.geometries.length;bt<At;bt++){var It=fl({geometry:_.geometries[bt],type:"Feature",properties:o.properties},h);It&&A.push(It)}return new Me(A);case"FeatureCollection":for(bt=0,At=_.features.length;bt<At;bt++){var Mt=fl(_.features[bt],h);Mt&&A.push(Mt)}return new Me(A);default:throw new Error("Invalid GeoJSON object.")}}function bc(o,h,_,T){return o?o(h,_):new Ha(_,T&&T.markersInheritOptions&&T)}function cu(o){return new xt(o[1],o[0],o[2])}function dl(o,h,_){for(var T=[],A=0,I=o.length,Z;A<I;A++)Z=h?dl(o[A],h-1,_):(_||cu)(o[A]),T.push(Z);return T}function ml(o,h){return o=Et(o),o.alt!==void 0?[S(o.lng,h),S(o.lat,h),S(o.alt,h)]:[S(o.lng,h),S(o.lat,h)]}function hu(o,h,_,T){for(var A=[],I=0,Z=o.length;I<Z;I++)A.push(h?hu(o[I],g(o[I])?0:h-1,_,T):ml(o[I],T));return!h&&_&&A.length>0&&A.push(A[0].slice()),A}function Ui(o,h){return o.feature?r({},o.feature,{geometry:h}):qa(h)}function qa(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var qr={toGeoJSON:function(o){return Ui(this,{type:"Point",coordinates:ml(this.getLatLng(),o)})}};Ha.include(qr),vc.include(qr),hl.include(qr),zs.include({toGeoJSON:function(o){var h=!g(this._latlngs),_=hu(this._latlngs,h?1:0,!1,o);return Ui(this,{type:(h?"Multi":"")+"LineString",coordinates:_})}}),Fa.include({toGeoJSON:function(o){var h=!g(this._latlngs),_=h&&!g(this._latlngs[0]),T=hu(this._latlngs,_?2:h?1:0,!0,o);return h||(T=[T]),Ui(this,{type:(_?"Multi":"")+"Polygon",coordinates:T})}}),Ne.include({toMultiPoint:function(o){var h=[];return this.eachLayer(function(_){h.push(_.toGeoJSON(o).geometry.coordinates)}),Ui(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(o){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(o);var _=h==="GeometryCollection",T=[];return this.eachLayer(function(A){if(A.toGeoJSON){var I=A.toGeoJSON(o);if(_)T.push(I.geometry);else{var Z=qa(I);Z.type==="FeatureCollection"?T.push.apply(T,Z.features):T.push(Z)}}}),_?Ui(this,{geometries:T,type:"GeometryCollection"}):{type:"FeatureCollection",features:T}}});function fu(o,h){return new oi(o,h)}var Tf=fu,ds=ye.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,h,_){this._url=o,this._bounds=St(h),k(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Gt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){_e(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&os(this._image),this},bringToBack:function(){return this._map&&sr(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=St(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",h=this._image=o?this._url:te("img");if(Gt(h,"leaflet-image-layer"),this._zoomAnimated&&Gt(h,"leaflet-zoom-animated"),this.options.className&&Gt(h,this.options.className),h.onselectstart=E,h.onmousemove=E,h.onload=c(this.fire,this,"load"),h.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(o){var h=this._map.getZoomScale(o.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;On(this._image,_,h)},_reset:function(){var o=this._image,h=new ct(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=h.getSize();jt(o,h.min),o.style.width=_.x+"px",o.style.height=_.y+"px"},_updateOpacity:function(){Le(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Ga=function(o,h,_){return new ds(o,h,_)},du=ds.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",h=this._image=o?this._url:te("video");if(Gt(h,"leaflet-image-layer"),this._zoomAnimated&&Gt(h,"leaflet-zoom-animated"),this.options.className&&Gt(h,this.options.className),h.onselectstart=E,h.onmousemove=E,h.onloadeddata=c(this.fire,this,"load"),o){for(var _=h.getElementsByTagName("source"),T=[],A=0;A<_.length;A++)T.push(_[A].src);this._url=_.length>0?T:[h.src];return}Y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var Z=te("source");Z.src=this._url[I],h.appendChild(Z)}}});function Ef(o,h,_){return new du(o,h,_)}var ur=ds.extend({_initImage:function(){var o=this._image=this._url;Gt(o,"leaflet-image-layer"),this._zoomAnimated&&Gt(o,"leaflet-zoom-animated"),this.options.className&&Gt(o,this.options.className),o.onselectstart=E,o.onmousemove=E}});function wf(o,h,_){return new ur(o,h,_)}var ji=ye.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,h){o&&(o instanceof xt||Y(o))?(this._latlng=Et(o),k(this,h)):(k(this,o),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Le(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Le(this._container,1),this.bringToFront(),this.options.interactive&&(Gt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Le(this._container,0),this._removeTimeout=setTimeout(c(_e,void 0,this._container),200)):_e(this._container),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=Et(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&os(this._container),this},bringToBack:function(){return this._map&&sr(this._container),this},_prepareOpen:function(o){var h=this._source;if(!h._map)return!1;if(h instanceof Me){h=null;var _=this._source._layers;for(var T in _)if(_[T]._map){h=_[T];break}if(!h)return!1;this._source=h}if(!o)if(h.getCenter)o=h.getCenter();else if(h.getLatLng)o=h.getLatLng();else if(h.getBounds)o=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")o.innerHTML=h;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),h=j(this.options.offset),_=this._getAnchor();this._zoomAnimated?jt(this._container,o.add(_)):h=h.add(o).add(_);var T=this._containerBottom=-h.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=T+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});Kt.include({_initOverlay:function(o,h,_,T){var A=h;return A instanceof o||(A=new o(T).setContent(h)),_&&A.setLatLng(_),A}}),ye.include({_initOverlay:function(o,h,_,T){var A=_;return A instanceof o?(k(A,T),A._source=this):(A=h&&!T?h:new o(T,this),A.setContent(_)),A}});var pl=ji.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,ji.prototype.openOn.call(this,o)},onAdd:function(o){ji.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Vs||this._source.on("preclick",Zn))},onRemove:function(o){ji.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Vs||this._source.off("preclick",Zn))},getEvents:function(){var o=ji.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",h=this._container=te("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=te("div",o+"-content-wrapper",h);if(this._contentNode=te("div",o+"-content",_),Os(h),zi(this._contentNode),Nt(h,"contextmenu",Zn),this._tipContainer=te("div",o+"-tip-container",h),this._tip=te("div",o+"-tip",this._tipContainer),this.options.closeButton){var T=this._closeButton=te("a",o+"-close-button",h);T.setAttribute("role","button"),T.setAttribute("aria-label","Close popup"),T.href="#close",T.innerHTML='<span aria-hidden="true">&#215;</span>',Nt(T,"click",function(A){Re(A),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,h=o.style;h.width="",h.whiteSpace="nowrap";var _=o.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),h.width=_+1+"px",h.whiteSpace="",h.height="";var T=o.offsetHeight,A=this.options.maxHeight,I="leaflet-popup-scrolled";A&&T>A?(h.height=A+"px",Gt(o,I)):be(o,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),_=this._getAnchor();jt(this._container,h.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,h=parseInt(as(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+h,T=this._containerWidth,A=new mt(this._containerLeft,-_-this._containerBottom);A._add(si(this._container));var I=o.layerPointToContainerPoint(A),Z=j(this.options.autoPanPadding),tt=j(this.options.autoPanPaddingTopLeft||Z),lt=j(this.options.autoPanPaddingBottomRight||Z),bt=o.getSize(),At=0,It=0;I.x+T+lt.x>bt.x&&(At=I.x+T-bt.x+lt.x),I.x-At-tt.x<0&&(At=I.x-tt.x),I.y+_+lt.y>bt.y&&(It=I.y+_-bt.y+lt.y),I.y-It-tt.y<0&&(It=I.y-tt.y),(At||It)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([At,It]))}},_getAnchor:function(){return j(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),xp=function(o,h){return new pl(o,h)};Kt.mergeOptions({closePopupOnClick:!0}),Kt.include({openPopup:function(o,h,_){return this._initOverlay(pl,o,h,_).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),ye.include({bindPopup:function(o,h){return this._popup=this._initOverlay(pl,this._popup,o,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Me||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Sn(o);var h=o.layer||o.target;if(this._popup._source===h&&!(h instanceof Vs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=h,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var mu=ji.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){ji.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){ji.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=ji.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",h=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=te("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var h,_,T=this._map,A=this._container,I=T.latLngToContainerPoint(T.getCenter()),Z=T.layerPointToContainerPoint(o),tt=this.options.direction,lt=A.offsetWidth,bt=A.offsetHeight,At=j(this.options.offset),It=this._getAnchor();tt==="top"?(h=lt/2,_=bt):tt==="bottom"?(h=lt/2,_=0):tt==="center"?(h=lt/2,_=bt/2):tt==="right"?(h=0,_=bt/2):tt==="left"?(h=lt,_=bt/2):Z.x<I.x?(tt="right",h=0,_=bt/2):(tt="left",h=lt+(At.x+It.x)*2,_=bt/2),o=o.subtract(j(h,_,!0)).add(At).add(It),be(A,"leaflet-tooltip-right"),be(A,"leaflet-tooltip-left"),be(A,"leaflet-tooltip-top"),be(A,"leaflet-tooltip-bottom"),Gt(A,"leaflet-tooltip-"+tt),jt(A,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Le(this._container,o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(h)},_getAnchor:function(){return j(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Rp=function(o,h){return new mu(o,h)};Kt.include({openTooltip:function(o,h,_){return this._initOverlay(mu,o,h,_).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),ye.include({bindTooltip:function(o,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(mu,this._tooltip,o,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var h=o?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[h](_),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Me||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&(Nt(h,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),Nt(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var h=o.latlng,_,T;this._tooltip.options.sticky&&o.originalEvent&&(_=this._map.mouseEventToContainerPoint(o.originalEvent),T=this._map.containerPointToLayerPoint(_),h=this._map.layerPointToLatLng(T)),this._tooltip.setLatLng(h)}});var Tc=fs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var h=o&&o.tagName==="DIV"?o:document.createElement("div"),_=this.options;if(_.html instanceof Element?(ln(h),h.appendChild(_.html)):h.innerHTML=_.html!==!1?_.html:"",_.bgPos){var T=j(_.bgPos);h.style.backgroundPosition=-T.x+"px "+-T.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function Sf(o){return new Tc(o)}fs.Default=ja;var Gr=ye.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ot.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){k(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),_e(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(os(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(sr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof mt?o:new mt(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var h=this.getPane().children,_=-o(-1/0,1/0),T=0,A=h.length,I;T<A;T++)I=h[T].style.zIndex,h[T]!==this._container&&I&&(_=o(_,+I));isFinite(_)&&(this.options.zIndex=_+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ot.ielt9){Le(this._container,this.options.opacity);var o=+new Date,h=!1,_=!1;for(var T in this._tiles){var A=this._tiles[T];if(!(!A.current||!A.loaded)){var I=Math.min(1,(o-A.loaded)/200);Le(A.el,I),I<1?h=!0:(A.active?_=!0:this._onOpaqueTile(A),A.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),h&&(G(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=te("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,h=this.options.maxZoom;if(o!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===o?(this._levels[_].el.style.zIndex=h-Math.abs(o-_),this._onUpdateLevel(_)):(_e(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var T=this._levels[o],A=this._map;return T||(T=this._levels[o]={},T.el=te("div","leaflet-tile-container leaflet-zoom-animated",this._container),T.el.style.zIndex=h,T.origin=A.project(A.unproject(A.getPixelOrigin()),o).round(),T.zoom=o,this._setZoomTransform(T,A.getCenter(),A.getZoom()),E(T.el.offsetWidth),this._onCreateLevel(T)),this._level=T,T}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var o,h,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)h=this._tiles[o],h.retain=h.current;for(o in this._tiles)if(h=this._tiles[o],h.current&&!h.active){var T=h.coords;this._retainParent(T.x,T.y,T.z,T.z-5)||this._retainChildren(T.x,T.y,T.z,T.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var h in this._tiles)this._tiles[h].coords.z===o&&this._removeTile(h)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)_e(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,h,_,T){var A=Math.floor(o/2),I=Math.floor(h/2),Z=_-1,tt=new mt(+A,+I);tt.z=+Z;var lt=this._tileCoordsToKey(tt),bt=this._tiles[lt];return bt&&bt.active?(bt.retain=!0,!0):(bt&&bt.loaded&&(bt.retain=!0),Z>T?this._retainParent(A,I,Z,T):!1)},_retainChildren:function(o,h,_,T){for(var A=2*o;A<2*o+2;A++)for(var I=2*h;I<2*h+2;I++){var Z=new mt(A,I);Z.z=_+1;var tt=this._tileCoordsToKey(Z),lt=this._tiles[tt];if(lt&&lt.active){lt.retain=!0;continue}else lt&&lt.loaded&&(lt.retain=!0);_+1<T&&this._retainChildren(A,I,_+1,T)}},_resetView:function(o){var h=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var h=this.options;return h.minNativeZoom!==void 0&&o<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<o?h.maxNativeZoom:o},_setView:function(o,h,_,T){var A=Math.round(h);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var I=this.options.updateWhenZooming&&A!==this._tileZoom;(!T||I)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(o),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(o,h)},_setZoomTransforms:function(o,h){for(var _ in this._levels)this._setZoomTransform(this._levels[_],o,h)},_setZoomTransform:function(o,h,_){var T=this._map.getZoomScale(_,o.zoom),A=o.origin.multiplyBy(T).subtract(this._map._getNewPixelOrigin(h,_)).round();Ot.any3d?On(o.el,A,T):jt(o.el,A)},_resetGrid:function(){var o=this._map,h=o.options.crs,_=this._tileSize=this.getTileSize(),T=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,h.wrapLng[0]],T).x/_.x),Math.ceil(o.project([0,h.wrapLng[1]],T).x/_.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([h.wrapLat[0],0],T).y/_.x),Math.ceil(o.project([h.wrapLat[1],0],T).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var h=this._map,_=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),T=h.getZoomScale(_,this._tileZoom),A=h.project(o,this._tileZoom).floor(),I=h.getSize().divideBy(T*2);return new ct(A.subtract(I),A.add(I))},_update:function(o){var h=this._map;if(h){var _=this._clampZoom(h.getZoom());if(o===void 0&&(o=h.getCenter()),this._tileZoom!==void 0){var T=this._getTiledPixelBounds(o),A=this._pxBoundsToTileRange(T),I=A.getCenter(),Z=[],tt=this.options.keepBuffer,lt=new ct(A.getBottomLeft().subtract([tt,-tt]),A.getTopRight().add([tt,-tt]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var bt in this._tiles){var At=this._tiles[bt].coords;(At.z!==this._tileZoom||!lt.contains(new mt(At.x,At.y)))&&(this._tiles[bt].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(o,_);return}for(var It=A.min.y;It<=A.max.y;It++)for(var Mt=A.min.x;Mt<=A.max.x;Mt++){var qt=new mt(Mt,It);if(qt.z=this._tileZoom,!!this._isValidTile(qt)){var Ve=this._tiles[this._tileCoordsToKey(qt)];Ve?Ve.current=!0:Z.push(qt)}}if(Z.sort(function(xn,gi){return xn.distanceTo(I)-gi.distanceTo(I)}),Z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var We=document.createDocumentFragment();for(Mt=0;Mt<Z.length;Mt++)this._addTile(Z[Mt],We);this._level.el.appendChild(We)}}}},_isValidTile:function(o){var h=this._map.options.crs;if(!h.infinite){var _=this._globalTileRange;if(!h.wrapLng&&(o.x<_.min.x||o.x>_.max.x)||!h.wrapLat&&(o.y<_.min.y||o.y>_.max.y))return!1}if(!this.options.bounds)return!0;var T=this._tileCoordsToBounds(o);return St(this.options.bounds).overlaps(T)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var h=this._map,_=this.getTileSize(),T=o.scaleBy(_),A=T.add(_),I=h.unproject(T,o.z),Z=h.unproject(A,o.z);return[I,Z]},_tileCoordsToBounds:function(o){var h=this._tileCoordsToNwSe(o),_=new yt(h[0],h[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var h=o.split(":"),_=new mt(+h[0],+h[1]);return _.z=+h[2],_},_removeTile:function(o){var h=this._tiles[o];h&&(_e(h.el),delete this._tiles[o],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){Gt(o,"leaflet-tile");var h=this.getTileSize();o.style.width=h.x+"px",o.style.height=h.y+"px",o.onselectstart=E,o.onmousemove=E,Ot.ielt9&&this.options.opacity<1&&Le(o,this.options.opacity)},_addTile:function(o,h){var _=this._getTilePos(o),T=this._tileCoordsToKey(o),A=this.createTile(this._wrapCoords(o),c(this._tileReady,this,o));this._initTile(A),this.createTile.length<2&&H(c(this._tileReady,this,o,null,A)),jt(A,_),this._tiles[T]={el:A,coords:o,current:!0},h.appendChild(A),this.fire("tileloadstart",{tile:A,coords:o})},_tileReady:function(o,h,_){h&&this.fire("tileerror",{error:h,tile:_,coords:o});var T=this._tileCoordsToKey(o);_=this._tiles[T],_&&(_.loaded=+new Date,this._map._fadeAnimated?(Le(_.el,0),G(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),h||(Gt(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ot.ielt9||!this._map._fadeAnimated?H(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var h=new mt(this._wrapX?v(o.x,this._wrapX):o.x,this._wrapY?v(o.y,this._wrapY):o.y);return h.z=o.z,h},_pxBoundsToTileRange:function(o){var h=this.getTileSize();return new ct(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function Hi(o){return new Gr(o)}var Zr=Gr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,h){this._url=o,h=k(this,h),h.detectRetina&&Ot.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,h){return this._url===o&&h===void 0&&(h=!0),this._url=o,h||this.redraw(),this},createTile:function(o,h){var _=document.createElement("img");return Nt(_,"load",c(this._tileOnLoad,this,h,_)),Nt(_,"error",c(this._tileOnError,this,h,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(o),_},getTileUrl:function(o){var h={r:Ot.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-o.y;this.options.tms&&(h.y=_),h["-y"]=_}return q(this._url,r(h,this.options))},_tileOnLoad:function(o,h){Ot.ielt9?setTimeout(c(o,this,null,h),0):o(null,h)},_tileOnError:function(o,h,_){var T=this.options.errorTileUrl;T&&h.getAttribute("src")!==T&&(h.src=T),o(_,h)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,h=this.options.maxZoom,_=this.options.zoomReverse,T=this.options.zoomOffset;return _&&(o=h-o),o+T},_getSubdomain:function(o){var h=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var o,h;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(h=this._tiles[o].el,h.onload=E,h.onerror=E,!h.complete)){h.src=Q;var _=this._tiles[o].coords;_e(h),delete this._tiles[o],this.fire("tileabort",{tile:h,coords:_})}},_removeTile:function(o){var h=this._tiles[o];if(h)return h.el.setAttribute("src",Q),Gr.prototype._removeTile.call(this,o)},_tileReady:function(o,h,_){if(!(!this._map||_&&_.getAttribute("src")===Q))return Gr.prototype._tileReady.call(this,o,h,_)}});function li(o,h){return new Zr(o,h)}var ui=Zr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,h){this._url=o;var _=r({},this.defaultWmsParams);for(var T in h)T in this.options||(_[T]=h[T]);h=k(this,h);var A=h.detectRetina&&Ot.retina?2:1,I=this.getTileSize();_.width=I.x*A,_.height=I.y*A,this.wmsParams=_},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Zr.prototype.onAdd.call(this,o)},getTileUrl:function(o){var h=this._tileCoordsToNwSe(o),_=this._crs,T=Tt(_.project(h[0]),_.project(h[1])),A=T.min,I=T.max,Z=(this._wmsVersion>=1.3&&this._crs===Qe?[A.y,A.x,I.y,I.x]:[A.x,A.y,I.x,I.y]).join(","),tt=Zr.prototype.getTileUrl.call(this,o);return tt+D(this.wmsParams,tt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Z},setParams:function(o,h){return r(this.wmsParams,o),h||this.redraw(),this}});function Za(o,h){return new ui(o,h)}Zr.WMS=ui,li.wms=Za;var Fi=ye.extend({options:{padding:.1},initialize:function(o){k(this,o),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Gt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,h){var _=this._map.getZoomScale(h,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,h),I=T.multiplyBy(-_).add(A).subtract(this._map._getNewPixelOrigin(o,h));Ot.any3d?On(this._container,I,_):jt(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,h=this._map.getSize(),_=this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();this._bounds=new ct(_,_.add(h.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),gl=Fi.extend({options:{tolerance:0},getEvents:function(){var o=Fi.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Fi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");Nt(o,"mousemove",this._onMouseMove,this),Nt(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Nt(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,_e(this._container),ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var h in this._layers)o=this._layers[h],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fi.prototype._update.call(this);var o=this._bounds,h=this._container,_=o.getSize(),T=Ot.retina?2:1;jt(h,o.min),h.width=T*_.x,h.height=T*_.y,h.style.width=_.x+"px",h.style.height=_.y+"px",Ot.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Fi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[m(o)]=o;var h=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var h=o._order,_=h.next,T=h.prev;_?_.prev=T:this._drawLast=T,T?T.next=_:this._drawFirst=_,delete o._order,delete this._layers[m(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var h=o.options.dashArray.split(/[, ]+/),_=[],T,A;for(A=0;A<h.length;A++){if(T=Number(h[A]),isNaN(T))return;_.push(T)}o.options._dashArray=_}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||H(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var h=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ct,this._redrawBounds.extend(o._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(o._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var h=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,h=this._redrawBounds;if(this._ctx.save(),h){var _=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var T=this._drawFirst;T;T=T.next)o=T.layer,(!h||o._pxBounds&&o._pxBounds.intersects(h))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,h){if(this._drawing){var _,T,A,I,Z=o._parts,tt=Z.length,lt=this._ctx;if(tt){for(lt.beginPath(),_=0;_<tt;_++){for(T=0,A=Z[_].length;T<A;T++)I=Z[_][T],lt[T?"lineTo":"moveTo"](I.x,I.y);h&&lt.closePath()}this._fillStroke(lt,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var h=o._point,_=this._ctx,T=Math.max(Math.round(o._radius),1),A=(Math.max(Math.round(o._radiusY),1)||T)/T;A!==1&&(_.save(),_.scale(1,A)),_.beginPath(),_.arc(h.x,h.y/A,T,0,Math.PI*2,!1),A!==1&&_.restore(),this._fillStroke(_,o)}},_fillStroke:function(o,h){var _=h.options;_.fill&&(o.globalAlpha=_.fillOpacity,o.fillStyle=_.fillColor||_.color,o.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(o.setLineDash&&o.setLineDash(h.options&&h.options._dashArray||[]),o.globalAlpha=_.opacity,o.lineWidth=_.weight,o.strokeStyle=_.color,o.lineCap=_.lineCap,o.lineJoin=_.lineJoin,o.stroke())},_onClick:function(o){for(var h=this._map.mouseEventToLayerPoint(o),_,T,A=this._drawFirst;A;A=A.next)_=A.layer,_.options.interactive&&_._containsPoint(h)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(_))&&(T=_);this._fireEvent(T?[T]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,h)}},_handleMouseOut:function(o){var h=this._hoveredLayer;h&&(be(this._container,"leaflet-interactive"),this._fireEvent([h],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,h){if(!this._mouseHoverThrottled){for(var _,T,A=this._drawFirst;A;A=A.next)_=A.layer,_.options.interactive&&_._containsPoint(h)&&(T=_);T!==this._hoveredLayer&&(this._handleMouseOut(o),T&&(Gt(this._container,"leaflet-interactive"),this._fireEvent([T],o,"mouseover"),this._hoveredLayer=T)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,h,_){this._map._fireDOMEvent(h,_||h.type,o)},_bringToFront:function(o){var h=o._order;if(h){var _=h.next,T=h.prev;if(_)_.prev=T;else return;T?T.next=_:_&&(this._drawFirst=_),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(o)}},_bringToBack:function(o){var h=o._order;if(h){var _=h.next,T=h.prev;if(T)T.next=_;else return;_?_.prev=T:T&&(this._drawLast=T),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(o)}}});function _l(o){return Ot.canvas?new gl(o):null}var Wr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Wa={_initContainer:function(){this._container=te("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Fi.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var h=o._container=Wr("shape");Gt(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",o._path=Wr("path"),h.appendChild(o._path),this._updateStyle(o),this._layers[m(o)]=o},_addPath:function(o){var h=o._container;this._container.appendChild(h),o.options.interactive&&o.addInteractiveTarget(h)},_removePath:function(o){var h=o._container;_e(h),o.removeInteractiveTarget(h),delete this._layers[m(o)]},_updateStyle:function(o){var h=o._stroke,_=o._fill,T=o.options,A=o._container;A.stroked=!!T.stroke,A.filled=!!T.fill,T.stroke?(h||(h=o._stroke=Wr("stroke")),A.appendChild(h),h.weight=T.weight+"px",h.color=T.color,h.opacity=T.opacity,T.dashArray?h.dashStyle=Y(T.dashArray)?T.dashArray.join(" "):T.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=T.lineCap.replace("butt","flat"),h.joinstyle=T.lineJoin):h&&(A.removeChild(h),o._stroke=null),T.fill?(_||(_=o._fill=Wr("fill")),A.appendChild(_),_.color=T.fillColor||T.color,_.opacity=T.fillOpacity):_&&(A.removeChild(_),o._fill=null)},_updateCircle:function(o){var h=o._point.round(),_=Math.round(o._radius),T=Math.round(o._radiusY||_);this._setPath(o,o._empty()?"M0 0":"AL "+h.x+","+h.y+" "+_+","+T+" 0,"+65535*360)},_setPath:function(o,h){o._path.v=h},_bringToFront:function(o){os(o._container)},_bringToBack:function(o){sr(o._container)}},yl=Ot.vml?Wr:wa,cr=Fi.extend({_initContainer:function(){this._container=yl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=yl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){_e(this._container),ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fi.prototype._update.call(this);var o=this._bounds,h=o.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,_.setAttribute("width",h.x),_.setAttribute("height",h.y)),jt(_,o.min),_.setAttribute("viewBox",[o.min.x,o.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(o){var h=o._path=yl("path");o.options.className&&Gt(h,o.options.className),o.options.interactive&&Gt(h,"leaflet-interactive"),this._updateStyle(o),this._layers[m(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){_e(o._path),o.removeInteractiveTarget(o._path),delete this._layers[m(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var h=o._path,_=o.options;h&&(_.stroke?(h.setAttribute("stroke",_.color),h.setAttribute("stroke-opacity",_.opacity),h.setAttribute("stroke-width",_.weight),h.setAttribute("stroke-linecap",_.lineCap),h.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?h.setAttribute("stroke-dasharray",_.dashArray):h.removeAttribute("stroke-dasharray"),_.dashOffset?h.setAttribute("stroke-dashoffset",_.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),_.fill?(h.setAttribute("fill",_.fillColor||_.color),h.setAttribute("fill-opacity",_.fillOpacity),h.setAttribute("fill-rule",_.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(o,h){this._setPath(o,Yo(o._parts,h))},_updateCircle:function(o){var h=o._point,_=Math.max(Math.round(o._radius),1),T=Math.max(Math.round(o._radiusY),1)||_,A="a"+_+","+T+" 0 1,0 ",I=o._empty()?"M0 0":"M"+(h.x-_)+","+h.y+A+_*2+",0 "+A+-_*2+",0 ";this._setPath(o,I)},_setPath:function(o,h){o._path.setAttribute("d",h)},_bringToFront:function(o){os(o._path)},_bringToBack:function(o){sr(o._path)}});Ot.vml&&cr.include(Wa);function Yr(o){return Ot.svg||Ot.vml?new cr(o):null}Kt.include({getRenderer:function(o){var h=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var h=this._paneRenderers[o];return h===void 0&&(h=this._createRenderer({pane:o}),this._paneRenderers[o]=h),h},_createRenderer:function(o){return this.options.preferCanvas&&_l(o)||Yr(o)}});var Af=Fa.extend({initialize:function(o,h){Fa.prototype.initialize.call(this,this._boundsToLatLngs(o),h)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=St(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function ci(o,h){return new Af(o,h)}cr.create=yl,cr.pointsToPath=Yo,oi.geometryToLayer=fl,oi.coordsToLatLng=cu,oi.coordsToLatLngs=dl,oi.latLngToCoords=ml,oi.latLngsToCoords=hu,oi.getFeature=Ui,oi.asFeature=qa,Kt.mergeOptions({boxZoom:!0});var pu=Wn.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){Nt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){_e(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),wn(),Br(),this._startPoint=this._map.mouseEventToContainerPoint(o),Nt(document,{contextmenu:Sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=te("div","leaflet-zoom-box",this._container),Gt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var h=new ct(this._point,this._startPoint),_=h.getSize();jt(this._box,h.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(_e(this._box),be(this._container,"leaflet-crosshair")),Li(),rl(),ue(document,{contextmenu:Sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var h=new yt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Kt.addInitHook("addHandler","boxZoom",pu),Kt.mergeOptions({doubleClickZoom:!0});var ms=Wn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var h=this._map,_=h.getZoom(),T=h.options.zoomDelta,A=o.originalEvent.shiftKey?_-T:_+T;h.options.doubleClickZoom==="center"?h.setZoom(A):h.setZoomAround(o.containerPoint,A)}});Kt.addInitHook("addHandler","doubleClickZoom",ms),Kt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ec=Wn.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Bi(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}Gt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){be(this._map._container,"leaflet-grab"),be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=St(this._map.options.maxBounds);this._offsetLimit=Tt(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var h=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(h),this._prunePositions(h)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,h){return o-(o-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;o.x<h.min.x&&(o.x=this._viscousLimit(o.x,h.min.x)),o.y<h.min.y&&(o.y=this._viscousLimit(o.y,h.min.y)),o.x>h.max.x&&(o.x=this._viscousLimit(o.x,h.max.x)),o.y>h.max.y&&(o.y=this._viscousLimit(o.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,h=Math.round(o/2),_=this._initialWorldOffset,T=this._draggable._newPos.x,A=(T-h+_)%o+h-_,I=(T+h+_)%o-h-_,Z=Math.abs(A+_)<Math.abs(I+_)?A:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Z},_onDragEnd:function(o){var h=this._map,_=h.options,T=!_.inertia||o.noInertia||this._times.length<2;if(h.fire("dragend",o),T)h.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,Z=_.easeLinearity,tt=A.multiplyBy(Z/I),lt=tt.distanceTo([0,0]),bt=Math.min(_.inertiaMaxSpeed,lt),At=tt.multiplyBy(bt/lt),It=bt/(_.inertiaDeceleration*Z),Mt=At.multiplyBy(-It/2).round();!Mt.x&&!Mt.y?h.fire("moveend"):(Mt=h._limitOffset(Mt,h.options.maxBounds),H(function(){h.panBy(Mt,{duration:It,easeLinearity:Z,noMoveStart:!0,animate:!0})}))}}});Kt.addInitHook("addHandler","dragging",Ec),Kt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var vl=Wn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),Nt(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,h=document.documentElement,_=o.scrollTop||h.scrollTop,T=o.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(T,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var h=this._panKeys={},_=this.keyCodes,T,A;for(T=0,A=_.left.length;T<A;T++)h[_.left[T]]=[-1*o,0];for(T=0,A=_.right.length;T<A;T++)h[_.right[T]]=[o,0];for(T=0,A=_.down.length;T<A;T++)h[_.down[T]]=[0,o];for(T=0,A=_.up.length;T<A;T++)h[_.up[T]]=[0,-1*o]},_setZoomDelta:function(o){var h=this._zoomKeys={},_=this.keyCodes,T,A;for(T=0,A=_.zoomIn.length;T<A;T++)h[_.zoomIn[T]]=o;for(T=0,A=_.zoomOut.length;T<A;T++)h[_.zoomOut[T]]=-o},_addHooks:function(){Nt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var h=o.keyCode,_=this._map,T;if(h in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(T=this._panKeys[h],o.shiftKey&&(T=j(T).multiplyBy(3)),_.options.maxBounds&&(T=_._limitOffset(j(T),_.options.maxBounds)),_.options.worldCopyJump){var A=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(T)));_.panTo(A)}else _.panBy(T)}else if(h in this._zoomKeys)_.setZoom(_.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;Sn(o)}}});Kt.addInitHook("addHandler","keyboard",vl),Kt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var hr=Wn.extend({addHooks:function(){Nt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var h=Ur(o),_=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var T=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),T),Sn(o)},_performZoom:function(){var o=this._map,h=o.getZoom(),_=this._map.options.zoomSnap||0;o._stop();var T=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(T))))/Math.LN2,I=_?Math.ceil(A/_)*_:A,Z=o._limitZoom(h+(this._delta>0?I:-I))-h;this._delta=0,this._startTime=null,Z&&(o.options.scrollWheelZoom==="center"?o.setZoom(h+Z):o.setZoomAround(this._lastMousePos,h+Z))}});Kt.addInitHook("addHandler","scrollWheelZoom",hr);var wc=600;Kt.mergeOptions({tapHold:Ot.touchNative&&Ot.safari&&Ot.mobile,tapTolerance:15});var gu=Wn.extend({addHooks:function(){Nt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var h=o.touches[0];this._startPos=this._newPos=new mt(h.clientX,h.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(Nt(document,"touchend",Re),Nt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),wc),Nt(document,"touchend touchcancel contextmenu",this._cancel,this),Nt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){ue(document,"touchend",Re),ue(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),ue(document,"touchend touchcancel contextmenu",this._cancel,this),ue(document,"touchmove",this._onMove,this)},_onMove:function(o){var h=o.touches[0];this._newPos=new mt(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,h){var _=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});_._simulated=!0,h.target.dispatchEvent(_)}});Kt.addInitHook("addHandler","tapHold",gu),Kt.mergeOptions({touchZoom:Ot.touch,bounceAtZoomLimits:!0});var Kr=Wn.extend({addHooks:function(){Gt(this._map._container,"leaflet-touch-zoom"),Nt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){be(this._map._container,"leaflet-touch-zoom"),ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var h=this._map;if(!(!o.touches||o.touches.length!==2||h._animatingZoom||this._zooming)){var _=h.mouseEventToContainerPoint(o.touches[0]),T=h.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(_.add(T)._divideBy(2))),this._startDist=_.distanceTo(T),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),Nt(document,"touchmove",this._onTouchMove,this),Nt(document,"touchend touchcancel",this._onTouchEnd,this),Re(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var h=this._map,_=h.mouseEventToContainerPoint(o.touches[0]),T=h.mouseEventToContainerPoint(o.touches[1]),A=_.distanceTo(T)/this._startDist;if(this._zoom=h.getScaleZoom(A,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&A<1||this._zoom>h.getMaxZoom()&&A>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var I=_._add(T)._divideBy(2)._subtract(this._centerPoint);if(A===1&&I.x===0&&I.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var Z=c(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=H(Z,this,!0),Re(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),ue(document,"touchmove",this._onTouchMove,this),ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Kt.addInitHook("addHandler","touchZoom",Kr),Kt.BoxZoom=pu,Kt.DoubleClickZoom=ms,Kt.Drag=Ec,Kt.Keyboard=vl,Kt.ScrollWheelZoom=hr,Kt.TapHold=gu,Kt.TouchZoom=Kr,e.Bounds=ct,e.Browser=Ot,e.CRS=xe,e.Canvas=gl,e.Circle=vc,e.CircleMarker=hl,e.Class=Yt,e.Control=gn,e.DivIcon=Tc,e.DivOverlay=ji,e.DomEvent=su,e.DomUtil=al,e.Draggable=Bi,e.Evented=vt,e.FeatureGroup=Me,e.GeoJSON=oi,e.GridLayer=Gr,e.Handler=Wn,e.Icon=fs,e.ImageOverlay=ds,e.LatLng=xt,e.LatLngBounds=yt,e.Layer=ye,e.LayerGroup=Ne,e.LineUtil=N,e.Map=Kt,e.Marker=Ha,e.Mixin=Hr,e.Path=Vs,e.Point=mt,e.PolyUtil=za,e.Polygon=Fa,e.Polyline=zs,e.Popup=pl,e.PosAnimation=jr,e.Projection=wt,e.Rectangle=Af,e.Renderer=Fi,e.SVG=cr,e.SVGOverlay=ur,e.TileLayer=Zr,e.Tooltip=mu,e.Transformation=Ci,e.Util=F,e.VideoOverlay=du,e.bind=c,e.bounds=Tt,e.canvas=_l,e.circle=Sp,e.circleMarker=bf,e.control=An,e.divIcon=Sf,e.extend=r,e.featureGroup=hs,e.geoJSON=fu,e.geoJson=Tf,e.gridLayer=Hi,e.icon=uu,e.imageOverlay=Ga,e.latLng=Et,e.latLngBounds=St,e.layerGroup=Ns,e.map=us,e.marker=yc,e.point=j,e.polygon=ai,e.polyline=Ap,e.popup=xp,e.rectangle=ci,e.setOptions=k,e.stamp=m,e.svg=Yr,e.svgOverlay=wf,e.tileLayer=li,e.tooltip=Rp,e.transformation=Ii,e.version=i,e.videoOverlay=Ef;var Ya=window.L;e.noConflict=function(){return window.L=Ya,this},window.L=e})}(fh,fh.exports)),fh.exports}var rf=S2();const w1=Ty(rf);function Oy(n,t,e){return Object.freeze({instance:n,context:t,container:e})}function ky(n,t){return t==null?function(i,r){const l=K.useRef(void 0);return l.current||(l.current=n(i,r)),l}:function(i,r){const l=K.useRef(void 0);l.current||(l.current=n(i,r));const c=K.useRef(i),{instance:f}=l.current;return K.useEffect(function(){c.current!==i&&(t(f,i,c.current),c.current=i)},[f,i,t]),l}}function A2(n,t){K.useEffect(function(){return(t.layerContainer??t.map).addLayer(n.instance),function(){var l;(l=t.layerContainer)==null||l.removeLayer(n.instance),t.map.removeLayer(n.instance)}},[t,n])}function S1(n){return function(e){const i=T1(),r=n(My(e,i),i);return b1(i.map,e.attribution),E1(r.current,e.eventHandlers),A2(r.current,i),r}}function x2(n,t){const e=ky(n,t),i=S1(e);return v2(i)}function R2(n,t){const e=ky(n),i=E2(e,t);return b2(i)}function C2(n,t){const e=ky(n,t),i=S1(e);return T2(i)}function I2(n,t,e){const{opacity:i,zIndex:r}=t;i!=null&&i!==e.opacity&&n.setOpacity(i),r!=null&&r!==e.zIndex&&n.setZIndex(r)}function P2({bounds:n,boundsOptions:t,center:e,children:i,className:r,id:l,placeholder:c,style:f,whenReady:m,zoom:p,...v},E){const[S]=K.useState({className:r,id:l,style:f}),[R,P]=K.useState(null),k=K.useRef(void 0);K.useImperativeHandle(E,()=>(R==null?void 0:R.map)??null,[R]);const D=K.useCallback(q=>{if(q!==null&&!k.current){const Y=new rf.Map(q,v);k.current=Y,e!=null&&p!=null?Y.setView(e,p):n!=null&&Y.fitBounds(n,t),m!=null&&Y.whenReady(m),P(_2(Y))}},[]);K.useEffect(()=>()=>{R==null||R.map.remove()},[R]);const U=R?ge.createElement(Py,{value:R},i):c??null;return ge.createElement("div",{...S,ref:D},U)}const M2=K.forwardRef(P2),O2=x2(function({position:t,...e},i){const r=new rf.Marker(t,e);return Oy(r,y2(i,{overlayContainer:r}))},function(t,e,i){e.position!==i.position&&t.setLatLng(e.position),e.icon!=null&&e.icon!==i.icon&&t.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==i.opacity&&t.setOpacity(e.opacity),t.dragging!=null&&e.draggable!==i.draggable&&(e.draggable===!0?t.dragging.enable():t.dragging.disable())}),k2=R2(function(t,e){const i=new rf.Popup(t,e.overlayContainer);return Oy(i,e)},function(t,e,{position:i},r){K.useEffect(function(){const{instance:c}=t;function f(p){p.popup===c&&(c.update(),r(!0))}function m(p){p.popup===c&&r(!1)}return e.map.on({popupopen:f,popupclose:m}),e.overlayContainer==null?(i!=null&&c.setLatLng(i),c.openOn(e.map)):e.overlayContainer.bindPopup(c),function(){var v;e.map.off({popupopen:f,popupclose:m}),(v=e.overlayContainer)==null||v.unbindPopup(),e.map.removeLayer(c)}},[t,e,r,i])}),D2=C2(function({url:t,...e},i){const r=new rf.TileLayer(t,My(e,i));return Oy(r,i)},function(t,e,i){I2(t,e,i);const{url:r}=e;r!=null&&r!==i.url&&t.setUrl(r)}),L2=()=>{};var aE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},N2=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[e++];t[i++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[e++],c=n[e++],f=n[e++],m=((r&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[e++],c=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return t.join("")},x1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,f=c?n[r+1]:0,m=r+2<n.length,p=m?n[r+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let S=(f&15)<<2|p>>6,R=p&63;m||(R=64,c||(S=64)),i.push(e[v],e[E],e[S],e[R])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(A1(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):N2(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const l=e[n.charAt(r++)],f=r<n.length?e[n.charAt(r)]:0;++r;const p=r<n.length?e[n.charAt(r)]:64;++r;const E=r<n.length?e[n.charAt(r)]:64;if(++r,l==null||f==null||p==null||E==null)throw new V2;const S=l<<2|f>>4;if(i.push(S),p!==64){const R=f<<4&240|p>>2;if(i.push(R),E!==64){const P=p<<6&192|E;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class V2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z2=function(n){const t=A1(n);return x1.encodeByteArray(t,!0)},rm=function(n){return z2(n).replace(/\./g,"")},R1=function(n){try{return x1.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=()=>B2().__FIREBASE_DEFAULTS__,j2=()=>{if(typeof process>"u"||typeof aE>"u")return;const n=aE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},H2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&R1(n[1]);return t&&JSON.parse(t)},Bm=()=>{try{return L2()||U2()||j2()||H2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},C1=n=>{var t,e;return(e=(t=Bm())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},F2=n=>{const t=C1(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},I1=()=>{var n;return(n=Bm())===null||n===void 0?void 0:n.config},P1=n=>{var t;return(t=Bm())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(n){return n.endsWith(".cloudworkstations.dev")}async function M1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[rm(JSON.stringify(e)),rm(JSON.stringify(c)),""].join(".")}const Ah={};function Z2(){const n={prod:[],emulator:[]};for(const t of Object.keys(Ah))Ah[t]?n.emulator.push(t):n.prod.push(t);return n}function W2(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let oE=!1;function O1(n,t){if(typeof window>"u"||typeof document>"u"||!oc(window.location.host)||Ah[n]===t||Ah[n]||oE)return;Ah[n]=t;function e(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=Z2().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{oE=!0,c()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=W2(i),R=e("text"),P=document.getElementById(R)||document.createElement("span"),k=e("learnmore"),D=document.getElementById(k)||document.createElement("a"),U=e("preprendIcon"),q=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Y=S.element;f(Y),v(D,k);const st=p();m(q,U),Y.append(q,P,D,st),document.body.appendChild(Y)}l?(P.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Y2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ii())}function K2(){var n;const t=(n=Bm())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Dy(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function X2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q2(){const n=ii();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function J2(){return!K2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ly(){try{return typeof indexedDB=="object"}catch{return!1}}function Ny(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var l;t(((l=r.error)===null||l===void 0?void 0:l.message)||"")}}catch(e){t(e)}})}function k1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM="FirebaseError";class Xs extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=tM,Object.setPrototypeOf(this,Xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yl.prototype.create)}}class Yl{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,l=this.errors[t],c=l?eM(l,i):"Error",f=`${this.serviceName}: ${c} (${r}).`;return new Xs(r,f,i)}}function eM(n,t){return n.replace(nM,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const nM=/\{\$([^}]+)}/g;function iM(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function ko(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const l=n[r],c=t[r];if(lE(l)&&lE(c)){if(!ko(l,c))return!1}else if(l!==c)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function lE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function dh(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,l]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(l)}}),t}function mh(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function sM(n,t){const e=new rM(n,t);return e.subscribe.bind(e)}class rM{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");aM(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=l_),r.error===void 0&&(r.error=l_),r.complete===void 0&&(r.complete=l_);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aM(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function l_(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=1e3,lM=2,uM=4*60*60*1e3,cM=.5;function uE(n,t=oM,e=lM){const i=t*Math.pow(e,n),r=Math.round(cM*i*(Math.random()-.5)*2);return Math.min(uM,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(n){return n&&n._delegate?n._delegate:n}class Zs{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new q2;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(dM(t))try{this.getOrInitializeService({instanceIdentifier:kl})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:r});i.resolve(l)}catch{}}}}clearInstance(t=kl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=kl){return this.instances.has(t)}getOptions(t=kl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(r)}return r}onInit(t,e){var i;const r=this.normalizeInstanceIdentifier(e),l=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;l.add(t),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&t(c,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fM(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=kl){return this.component?this.component.multipleInstances?t:kl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fM(n){return n===kl?void 0:n}function dM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new hM(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ae||(ae={}));const pM={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},gM=ae.INFO,_M={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},yM=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=_M[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Um{constructor(t){this.name=t,this._logLevel=gM,this._logHandler=yM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ae))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?pM[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...t),this._logHandler(this,ae.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...t),this._logHandler(this,ae.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...t),this._logHandler(this,ae.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...t),this._logHandler(this,ae.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...t),this._logHandler(this,ae.ERROR,...t)}}const vM=(n,t)=>t.some(e=>n instanceof e);let cE,hE;function bM(){return cE||(cE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TM(){return hE||(hE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D1=new WeakMap,k_=new WeakMap,L1=new WeakMap,u_=new WeakMap,Vy=new WeakMap;function EM(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{e(Ro(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&D1.set(e,n)}).catch(()=>{}),Vy.set(t,n),t}function wM(n){if(k_.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{e(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});k_.set(n,t)}let D_={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return k_.get(n);if(t==="objectStoreNames")return n.objectStoreNames||L1.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ro(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function SM(n){D_=n(D_)}function AM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(c_(this),t,...e);return L1.set(i,t.sort?t.sort():[t]),Ro(i)}:TM().includes(n)?function(...t){return n.apply(c_(this),t),Ro(D1.get(this))}:function(...t){return Ro(n.apply(c_(this),t))}}function xM(n){return typeof n=="function"?AM(n):(n instanceof IDBTransaction&&wM(n),vM(n,bM())?new Proxy(n,D_):n)}function Ro(n){if(n instanceof IDBRequest)return EM(n);if(u_.has(n))return u_.get(n);const t=xM(n);return t!==n&&(u_.set(n,t),Vy.set(t,n)),t}const c_=n=>Vy.get(n);function N1(n,t,{blocked:e,upgrade:i,blocking:r,terminated:l}={}){const c=indexedDB.open(n,t),f=Ro(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Ro(c.result),m.oldVersion,m.newVersion,Ro(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),r&&m.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const RM=["get","getKey","getAll","getAllKeys","count"],CM=["put","add","delete","clear"],h_=new Map;function fE(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(h_.get(t))return h_.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=CM.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||RM.includes(e)))return;const l=async function(c,...f){const m=this.transaction(c,r?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(f.shift())),(await Promise.all([p[e](...f),r&&m.done]))[0]};return h_.set(t,l),l}SM(n=>({...n,get:(t,e,i)=>fE(t,e)||n.get(t,e,i),has:(t,e)=>!!fE(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(PM(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function PM(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const L_="@firebase/app",dE="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Um("@firebase/app"),MM="@firebase/app-compat",OM="@firebase/analytics-compat",kM="@firebase/analytics",DM="@firebase/app-check-compat",LM="@firebase/app-check",NM="@firebase/auth",VM="@firebase/auth-compat",zM="@firebase/database",BM="@firebase/data-connect",UM="@firebase/database-compat",jM="@firebase/functions",HM="@firebase/functions-compat",FM="@firebase/installations",qM="@firebase/installations-compat",GM="@firebase/messaging",ZM="@firebase/messaging-compat",WM="@firebase/performance",YM="@firebase/performance-compat",KM="@firebase/remote-config",$M="@firebase/remote-config-compat",XM="@firebase/storage",QM="@firebase/storage-compat",JM="@firebase/firestore",tO="@firebase/ai",eO="@firebase/firestore-compat",nO="firebase",iO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="[DEFAULT]",sO={[L_]:"fire-core",[MM]:"fire-core-compat",[kM]:"fire-analytics",[OM]:"fire-analytics-compat",[LM]:"fire-app-check",[DM]:"fire-app-check-compat",[NM]:"fire-auth",[VM]:"fire-auth-compat",[zM]:"fire-rtdb",[BM]:"fire-data-connect",[UM]:"fire-rtdb-compat",[jM]:"fire-fn",[HM]:"fire-fn-compat",[FM]:"fire-iid",[qM]:"fire-iid-compat",[GM]:"fire-fcm",[ZM]:"fire-fcm-compat",[WM]:"fire-perf",[YM]:"fire-perf-compat",[KM]:"fire-rc",[$M]:"fire-rc-compat",[XM]:"fire-gcs",[QM]:"fire-gcs-compat",[JM]:"fire-fst",[eO]:"fire-fst-compat",[tO]:"fire-vertex","fire-js":"fire-js",[nO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=new Map,rO=new Map,V_=new Map;function mE(n,t){try{n.container.addComponent(t)}catch(e){pa.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Cr(n){const t=n.name;if(V_.has(t))return pa.debug(`There were multiple attempts to register component ${t}.`),!1;V_.set(t,n);for(const e of am.values())mE(e,n);for(const e of rO.values())mE(e,n);return!0}function Kl(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Ei(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Co=new Yl("app","Firebase",aO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Co.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=iO;function V1(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:N_,automaticDataCollectionEnabled:!0},t),r=i.name;if(typeof r!="string"||!r)throw Co.create("bad-app-name",{appName:String(r)});if(e||(e=I1()),!e)throw Co.create("no-options");const l=am.get(r);if(l){if(ko(e,l.options)&&ko(i,l.config))return l;throw Co.create("duplicate-app",{appName:r})}const c=new mM(r);for(const m of V_.values())c.addComponent(m);const f=new oO(e,i,c);return am.set(r,f),f}function zy(n=N_){const t=am.get(n);if(!t&&n===N_&&I1())return V1();if(!t)throw Co.create("no-app",{appName:n});return t}function Ts(n,t,e){var i;let r=(i=sO[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);const l=r.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const f=[`Unable to register library "${r}" with version "${t}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),pa.warn(f.join(" "));return}Cr(new Zs(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="firebase-heartbeat-database",uO=1,zh="firebase-heartbeat-store";let f_=null;function z1(){return f_||(f_=N1(lO,uO,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(zh)}catch(e){console.warn(e)}}}}).catch(n=>{throw Co.create("idb-open",{originalErrorMessage:n.message})})),f_}async function cO(n){try{const e=(await z1()).transaction(zh),i=await e.objectStore(zh).get(B1(n));return await e.done,i}catch(t){if(t instanceof Xs)pa.warn(t.message);else{const e=Co.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});pa.warn(e.message)}}}async function pE(n,t){try{const i=(await z1()).transaction(zh,"readwrite");await i.objectStore(zh).put(t,B1(n)),await i.done}catch(e){if(e instanceof Xs)pa.warn(e.message);else{const i=Co.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});pa.warn(i.message)}}}function B1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=1024,fO=30;class dO{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new pO(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=gE();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>fO){const c=gO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){pa.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=gE(),{heartbeatsToSend:i,unsentEntries:r}=mO(this._heartbeatsCache.heartbeats),l=rm(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return pa.warn(e),""}}}function gE(){return new Date().toISOString().substring(0,10)}function mO(n,t=hO){const e=[];let i=n.slice();for(const r of n){const l=e.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),_E(e)>t){l.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),_E(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class pO{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ly()?Ny().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await cO(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return pE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return pE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function _E(n){return rm(JSON.stringify({version:2,heartbeats:n})).length}function gO(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(n){Cr(new Zs("platform-logger",t=>new IM(t),"PRIVATE")),Cr(new Zs("heartbeat",t=>new dO(t),"PRIVATE")),Ts(L_,dE,n),Ts(L_,dE,"esm2017"),Ts("fire-js","")}_O("");var yE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Io,U1;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,O){function z(){}z.prototype=O.prototype,V.D=O.prototype,V.prototype=new z,V.prototype.constructor=V,V.C=function(B,H,G){for(var F=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)F[Yt-2]=arguments[Yt];return O.prototype[H].apply(B,F)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(V,O,z){z||(z=0);var B=Array(16);if(typeof O=="string")for(var H=0;16>H;++H)B[H]=O.charCodeAt(z++)|O.charCodeAt(z++)<<8|O.charCodeAt(z++)<<16|O.charCodeAt(z++)<<24;else for(H=0;16>H;++H)B[H]=O[z++]|O[z++]<<8|O[z++]<<16|O[z++]<<24;O=V.g[0],z=V.g[1],H=V.g[2];var G=V.g[3],F=O+(G^z&(H^G))+B[0]+3614090360&4294967295;O=z+(F<<7&4294967295|F>>>25),F=G+(H^O&(z^H))+B[1]+3905402710&4294967295,G=O+(F<<12&4294967295|F>>>20),F=H+(z^G&(O^z))+B[2]+606105819&4294967295,H=G+(F<<17&4294967295|F>>>15),F=z+(O^H&(G^O))+B[3]+3250441966&4294967295,z=H+(F<<22&4294967295|F>>>10),F=O+(G^z&(H^G))+B[4]+4118548399&4294967295,O=z+(F<<7&4294967295|F>>>25),F=G+(H^O&(z^H))+B[5]+1200080426&4294967295,G=O+(F<<12&4294967295|F>>>20),F=H+(z^G&(O^z))+B[6]+2821735955&4294967295,H=G+(F<<17&4294967295|F>>>15),F=z+(O^H&(G^O))+B[7]+4249261313&4294967295,z=H+(F<<22&4294967295|F>>>10),F=O+(G^z&(H^G))+B[8]+1770035416&4294967295,O=z+(F<<7&4294967295|F>>>25),F=G+(H^O&(z^H))+B[9]+2336552879&4294967295,G=O+(F<<12&4294967295|F>>>20),F=H+(z^G&(O^z))+B[10]+4294925233&4294967295,H=G+(F<<17&4294967295|F>>>15),F=z+(O^H&(G^O))+B[11]+2304563134&4294967295,z=H+(F<<22&4294967295|F>>>10),F=O+(G^z&(H^G))+B[12]+1804603682&4294967295,O=z+(F<<7&4294967295|F>>>25),F=G+(H^O&(z^H))+B[13]+4254626195&4294967295,G=O+(F<<12&4294967295|F>>>20),F=H+(z^G&(O^z))+B[14]+2792965006&4294967295,H=G+(F<<17&4294967295|F>>>15),F=z+(O^H&(G^O))+B[15]+1236535329&4294967295,z=H+(F<<22&4294967295|F>>>10),F=O+(H^G&(z^H))+B[1]+4129170786&4294967295,O=z+(F<<5&4294967295|F>>>27),F=G+(z^H&(O^z))+B[6]+3225465664&4294967295,G=O+(F<<9&4294967295|F>>>23),F=H+(O^z&(G^O))+B[11]+643717713&4294967295,H=G+(F<<14&4294967295|F>>>18),F=z+(G^O&(H^G))+B[0]+3921069994&4294967295,z=H+(F<<20&4294967295|F>>>12),F=O+(H^G&(z^H))+B[5]+3593408605&4294967295,O=z+(F<<5&4294967295|F>>>27),F=G+(z^H&(O^z))+B[10]+38016083&4294967295,G=O+(F<<9&4294967295|F>>>23),F=H+(O^z&(G^O))+B[15]+3634488961&4294967295,H=G+(F<<14&4294967295|F>>>18),F=z+(G^O&(H^G))+B[4]+3889429448&4294967295,z=H+(F<<20&4294967295|F>>>12),F=O+(H^G&(z^H))+B[9]+568446438&4294967295,O=z+(F<<5&4294967295|F>>>27),F=G+(z^H&(O^z))+B[14]+3275163606&4294967295,G=O+(F<<9&4294967295|F>>>23),F=H+(O^z&(G^O))+B[3]+4107603335&4294967295,H=G+(F<<14&4294967295|F>>>18),F=z+(G^O&(H^G))+B[8]+1163531501&4294967295,z=H+(F<<20&4294967295|F>>>12),F=O+(H^G&(z^H))+B[13]+2850285829&4294967295,O=z+(F<<5&4294967295|F>>>27),F=G+(z^H&(O^z))+B[2]+4243563512&4294967295,G=O+(F<<9&4294967295|F>>>23),F=H+(O^z&(G^O))+B[7]+1735328473&4294967295,H=G+(F<<14&4294967295|F>>>18),F=z+(G^O&(H^G))+B[12]+2368359562&4294967295,z=H+(F<<20&4294967295|F>>>12),F=O+(z^H^G)+B[5]+4294588738&4294967295,O=z+(F<<4&4294967295|F>>>28),F=G+(O^z^H)+B[8]+2272392833&4294967295,G=O+(F<<11&4294967295|F>>>21),F=H+(G^O^z)+B[11]+1839030562&4294967295,H=G+(F<<16&4294967295|F>>>16),F=z+(H^G^O)+B[14]+4259657740&4294967295,z=H+(F<<23&4294967295|F>>>9),F=O+(z^H^G)+B[1]+2763975236&4294967295,O=z+(F<<4&4294967295|F>>>28),F=G+(O^z^H)+B[4]+1272893353&4294967295,G=O+(F<<11&4294967295|F>>>21),F=H+(G^O^z)+B[7]+4139469664&4294967295,H=G+(F<<16&4294967295|F>>>16),F=z+(H^G^O)+B[10]+3200236656&4294967295,z=H+(F<<23&4294967295|F>>>9),F=O+(z^H^G)+B[13]+681279174&4294967295,O=z+(F<<4&4294967295|F>>>28),F=G+(O^z^H)+B[0]+3936430074&4294967295,G=O+(F<<11&4294967295|F>>>21),F=H+(G^O^z)+B[3]+3572445317&4294967295,H=G+(F<<16&4294967295|F>>>16),F=z+(H^G^O)+B[6]+76029189&4294967295,z=H+(F<<23&4294967295|F>>>9),F=O+(z^H^G)+B[9]+3654602809&4294967295,O=z+(F<<4&4294967295|F>>>28),F=G+(O^z^H)+B[12]+3873151461&4294967295,G=O+(F<<11&4294967295|F>>>21),F=H+(G^O^z)+B[15]+530742520&4294967295,H=G+(F<<16&4294967295|F>>>16),F=z+(H^G^O)+B[2]+3299628645&4294967295,z=H+(F<<23&4294967295|F>>>9),F=O+(H^(z|~G))+B[0]+4096336452&4294967295,O=z+(F<<6&4294967295|F>>>26),F=G+(z^(O|~H))+B[7]+1126891415&4294967295,G=O+(F<<10&4294967295|F>>>22),F=H+(O^(G|~z))+B[14]+2878612391&4294967295,H=G+(F<<15&4294967295|F>>>17),F=z+(G^(H|~O))+B[5]+4237533241&4294967295,z=H+(F<<21&4294967295|F>>>11),F=O+(H^(z|~G))+B[12]+1700485571&4294967295,O=z+(F<<6&4294967295|F>>>26),F=G+(z^(O|~H))+B[3]+2399980690&4294967295,G=O+(F<<10&4294967295|F>>>22),F=H+(O^(G|~z))+B[10]+4293915773&4294967295,H=G+(F<<15&4294967295|F>>>17),F=z+(G^(H|~O))+B[1]+2240044497&4294967295,z=H+(F<<21&4294967295|F>>>11),F=O+(H^(z|~G))+B[8]+1873313359&4294967295,O=z+(F<<6&4294967295|F>>>26),F=G+(z^(O|~H))+B[15]+4264355552&4294967295,G=O+(F<<10&4294967295|F>>>22),F=H+(O^(G|~z))+B[6]+2734768916&4294967295,H=G+(F<<15&4294967295|F>>>17),F=z+(G^(H|~O))+B[13]+1309151649&4294967295,z=H+(F<<21&4294967295|F>>>11),F=O+(H^(z|~G))+B[4]+4149444226&4294967295,O=z+(F<<6&4294967295|F>>>26),F=G+(z^(O|~H))+B[11]+3174756917&4294967295,G=O+(F<<10&4294967295|F>>>22),F=H+(O^(G|~z))+B[2]+718787259&4294967295,H=G+(F<<15&4294967295|F>>>17),F=z+(G^(H|~O))+B[9]+3951481745&4294967295,V.g[0]=V.g[0]+O&4294967295,V.g[1]=V.g[1]+(H+(F<<21&4294967295|F>>>11))&4294967295,V.g[2]=V.g[2]+H&4294967295,V.g[3]=V.g[3]+G&4294967295}i.prototype.u=function(V,O){O===void 0&&(O=V.length);for(var z=O-this.blockSize,B=this.B,H=this.h,G=0;G<O;){if(H==0)for(;G<=z;)r(this,V,G),G+=this.blockSize;if(typeof V=="string"){for(;G<O;)if(B[H++]=V.charCodeAt(G++),H==this.blockSize){r(this,B),H=0;break}}else for(;G<O;)if(B[H++]=V[G++],H==this.blockSize){r(this,B),H=0;break}}this.h=H,this.o+=O},i.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var O=1;O<V.length-8;++O)V[O]=0;var z=8*this.o;for(O=V.length-8;O<V.length;++O)V[O]=z&255,z/=256;for(this.u(V),V=Array(16),O=z=0;4>O;++O)for(var B=0;32>B;B+=8)V[z++]=this.g[O]>>>B&255;return V};function l(V,O){var z=f;return Object.prototype.hasOwnProperty.call(z,V)?z[V]:z[V]=O(V)}function c(V,O){this.h=O;for(var z=[],B=!0,H=V.length-1;0<=H;H--){var G=V[H]|0;B&&G==O||(z[H]=G,B=!1)}this.g=z}var f={};function m(V){return-128<=V&&128>V?l(V,function(O){return new c([O|0],0>O?-1:0)}):new c([V|0],0>V?-1:0)}function p(V){if(isNaN(V)||!isFinite(V))return E;if(0>V)return D(p(-V));for(var O=[],z=1,B=0;V>=z;B++)O[B]=V/z|0,z*=4294967296;return new c(O,0)}function v(V,O){if(V.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(V.charAt(0)=="-")return D(v(V.substring(1),O));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var z=p(Math.pow(O,8)),B=E,H=0;H<V.length;H+=8){var G=Math.min(8,V.length-H),F=parseInt(V.substring(H,H+G),O);8>G?(G=p(Math.pow(O,G)),B=B.j(G).add(p(F))):(B=B.j(z),B=B.add(p(F)))}return B}var E=m(0),S=m(1),R=m(16777216);n=c.prototype,n.m=function(){if(k(this))return-D(this).m();for(var V=0,O=1,z=0;z<this.g.length;z++){var B=this.i(z);V+=(0<=B?B:4294967296+B)*O,O*=4294967296}return V},n.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(P(this))return"0";if(k(this))return"-"+D(this).toString(V);for(var O=p(Math.pow(V,6)),z=this,B="";;){var H=st(z,O).g;z=U(z,H.j(O));var G=((0<z.g.length?z.g[0]:z.h)>>>0).toString(V);if(z=H,P(z))return G+B;for(;6>G.length;)G="0"+G;B=G+B}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function P(V){if(V.h!=0)return!1;for(var O=0;O<V.g.length;O++)if(V.g[O]!=0)return!1;return!0}function k(V){return V.h==-1}n.l=function(V){return V=U(this,V),k(V)?-1:P(V)?0:1};function D(V){for(var O=V.g.length,z=[],B=0;B<O;B++)z[B]=~V.g[B];return new c(z,~V.h).add(S)}n.abs=function(){return k(this)?D(this):this},n.add=function(V){for(var O=Math.max(this.g.length,V.g.length),z=[],B=0,H=0;H<=O;H++){var G=B+(this.i(H)&65535)+(V.i(H)&65535),F=(G>>>16)+(this.i(H)>>>16)+(V.i(H)>>>16);B=F>>>16,G&=65535,F&=65535,z[H]=F<<16|G}return new c(z,z[z.length-1]&-2147483648?-1:0)};function U(V,O){return V.add(D(O))}n.j=function(V){if(P(this)||P(V))return E;if(k(this))return k(V)?D(this).j(D(V)):D(D(this).j(V));if(k(V))return D(this.j(D(V)));if(0>this.l(R)&&0>V.l(R))return p(this.m()*V.m());for(var O=this.g.length+V.g.length,z=[],B=0;B<2*O;B++)z[B]=0;for(B=0;B<this.g.length;B++)for(var H=0;H<V.g.length;H++){var G=this.i(B)>>>16,F=this.i(B)&65535,Yt=V.i(H)>>>16,Dt=V.i(H)&65535;z[2*B+2*H]+=F*Dt,q(z,2*B+2*H),z[2*B+2*H+1]+=G*Dt,q(z,2*B+2*H+1),z[2*B+2*H+1]+=F*Yt,q(z,2*B+2*H+1),z[2*B+2*H+2]+=G*Yt,q(z,2*B+2*H+2)}for(B=0;B<O;B++)z[B]=z[2*B+1]<<16|z[2*B];for(B=O;B<2*O;B++)z[B]=0;return new c(z,0)};function q(V,O){for(;(V[O]&65535)!=V[O];)V[O+1]+=V[O]>>>16,V[O]&=65535,O++}function Y(V,O){this.g=V,this.h=O}function st(V,O){if(P(O))throw Error("division by zero");if(P(V))return new Y(E,E);if(k(V))return O=st(D(V),O),new Y(D(O.g),D(O.h));if(k(O))return O=st(V,D(O)),new Y(D(O.g),O.h);if(30<V.g.length){if(k(V)||k(O))throw Error("slowDivide_ only works with positive integers.");for(var z=S,B=O;0>=B.l(V);)z=Q(z),B=Q(B);var H=ht(z,1),G=ht(B,1);for(B=ht(B,2),z=ht(z,2);!P(B);){var F=G.add(B);0>=F.l(V)&&(H=H.add(z),G=F),B=ht(B,1),z=ht(z,1)}return O=U(V,H.j(O)),new Y(H,O)}for(H=E;0<=V.l(O);){for(z=Math.max(1,Math.floor(V.m()/O.m())),B=Math.ceil(Math.log(z)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),G=p(z),F=G.j(O);k(F)||0<F.l(V);)z-=B,G=p(z),F=G.j(O);P(G)&&(G=S),H=H.add(G),V=U(V,F)}return new Y(H,V)}n.A=function(V){return st(this,V).h},n.and=function(V){for(var O=Math.max(this.g.length,V.g.length),z=[],B=0;B<O;B++)z[B]=this.i(B)&V.i(B);return new c(z,this.h&V.h)},n.or=function(V){for(var O=Math.max(this.g.length,V.g.length),z=[],B=0;B<O;B++)z[B]=this.i(B)|V.i(B);return new c(z,this.h|V.h)},n.xor=function(V){for(var O=Math.max(this.g.length,V.g.length),z=[],B=0;B<O;B++)z[B]=this.i(B)^V.i(B);return new c(z,this.h^V.h)};function Q(V){for(var O=V.g.length+1,z=[],B=0;B<O;B++)z[B]=V.i(B)<<1|V.i(B-1)>>>31;return new c(z,V.h)}function ht(V,O){var z=O>>5;O%=32;for(var B=V.g.length-z,H=[],G=0;G<B;G++)H[G]=0<O?V.i(G+z)>>>O|V.i(G+z+1)<<32-O:V.i(G+z);return new c(H,V.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,U1=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,Io=c}).apply(typeof yE<"u"?yE:typeof self<"u"?self:typeof window<"u"?window:{});var wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j1,ph,H1,Gd,z_,F1,q1,G1;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,w,x){return g==Array.prototype||g==Object.prototype||(g[w]=x.value),g};function e(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof wd=="object"&&wd];for(var w=0;w<g.length;++w){var x=g[w];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=e(this);function r(g,w){if(w)t:{var x=i;g=g.split(".");for(var N=0;N<g.length-1;N++){var J=g[N];if(!(J in x))break t;x=x[J]}g=g[g.length-1],N=x[g],w=w(N),w!=N&&w!=null&&t(x,g,{configurable:!0,writable:!0,value:w})}}function l(g,w){g instanceof String&&(g+="");var x=0,N=!1,J={next:function(){if(!N&&x<g.length){var ut=x++;return{value:w(ut,g[ut]),done:!1}}return N=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}r("Array.prototype.values",function(g){return g||function(){return l(this,function(w,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function m(g){var w=typeof g;return w=w!="object"?w:g?Array.isArray(g)?"array":w:"null",w=="array"||w=="object"&&typeof g.length=="number"}function p(g){var w=typeof g;return w=="object"&&g!=null||w=="function"}function v(g,w,x){return g.call.apply(g.bind,arguments)}function E(g,w,x){if(!g)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,N),g.apply(w,J)}}return function(){return g.apply(w,arguments)}}function S(g,w,x){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function R(g,w){var x=Array.prototype.slice.call(arguments,1);return function(){var N=x.slice();return N.push.apply(N,arguments),g.apply(this,N)}}function P(g,w){function x(){}x.prototype=w.prototype,g.aa=w.prototype,g.prototype=new x,g.prototype.constructor=g,g.Qb=function(N,J,ut){for(var wt=Array(arguments.length-2),se=2;se<arguments.length;se++)wt[se-2]=arguments[se];return w.prototype[J].apply(N,wt)}}function k(g){const w=g.length;if(0<w){const x=Array(w);for(let N=0;N<w;N++)x[N]=g[N];return x}return[]}function D(g,w){for(let x=1;x<arguments.length;x++){const N=arguments[x];if(m(N)){const J=g.length||0,ut=N.length||0;g.length=J+ut;for(let wt=0;wt<ut;wt++)g[J+wt]=N[wt]}else g.push(N)}}class U{constructor(w,x){this.i=w,this.j=x,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function q(g){return/^[\s\xa0]*$/.test(g)}function Y(){var g=f.navigator;return g&&(g=g.userAgent)?g:""}function st(g){return st[" "](g),g}st[" "]=function(){};var Q=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function ht(g,w,x){for(const N in g)w.call(x,g[N],N,g)}function V(g,w){for(const x in g)w.call(void 0,g[x],x,g)}function O(g){const w={};for(const x in g)w[x]=g[x];return w}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(g,w){let x,N;for(let J=1;J<arguments.length;J++){N=arguments[J];for(x in N)g[x]=N[x];for(let ut=0;ut<z.length;ut++)x=z[ut],Object.prototype.hasOwnProperty.call(N,x)&&(g[x]=N[x])}}function H(g){var w=1;g=g.split(":");const x=[];for(;0<w&&g.length;)x.push(g.shift()),w--;return g.length&&x.push(g.join(":")),x}function G(g){f.setTimeout(()=>{throw g},0)}function F(){var g=Vt;let w=null;return g.g&&(w=g.g,g.g=g.g.next,g.g||(g.h=null),w.next=null),w}class Yt{constructor(){this.h=this.g=null}add(w,x){const N=Dt.get();N.set(w,x),this.h?this.h.next=N:this.g=N,this.h=N}}var Dt=new U(()=>new et,g=>g.reset());class et{constructor(){this.next=this.g=this.h=null}set(w,x){this.h=w,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let vt,mt=!1,Vt=new Yt,j=()=>{const g=f.Promise.resolve(void 0);vt=()=>{g.then(ct)}};var ct=()=>{for(var g;g=F();){try{g.h.call(g.g)}catch(x){G(x)}var w=Dt;w.j(g),100>w.h&&(w.h++,g.next=w.g,w.g=g)}mt=!1};function Tt(){this.s=this.s,this.C=this.C}Tt.prototype.s=!1,Tt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Tt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function yt(g,w){this.type=g,this.g=this.target=w,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var St=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var g=!1,w=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const x=()=>{};f.addEventListener("test",x,w),f.removeEventListener("test",x,w)}catch{}return g}();function xt(g,w){if(yt.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var x=this.type=g.type,N=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=w,w=g.relatedTarget){if(Q){t:{try{st(w.nodeName);var J=!0;break t}catch{}J=!1}J||(w=null)}}else x=="mouseover"?w=g.fromElement:x=="mouseout"&&(w=g.toElement);this.relatedTarget=w,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Et[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&xt.aa.h.call(this)}}P(xt,yt);var Et={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),le=0;function Ri(g,w,x,N,J){this.listener=g,this.proxy=null,this.src=w,this.type=x,this.capture=!!N,this.ha=J,this.key=++le,this.da=this.fa=!1}function Ji(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ci(g){this.src=g,this.g={},this.h=0}Ci.prototype.add=function(g,w,x,N,J){var ut=g.toString();g=this.g[ut],g||(g=this.g[ut]=[],this.h++);var wt=Ss(g,w,N,J);return-1<wt?(w=g[wt],x||(w.fa=!1)):(w=new Ri(w,this.src,ut,!!N,J),w.fa=x,g.push(w)),w};function Ii(g,w){var x=w.type;if(x in g.g){var N=g.g[x],J=Array.prototype.indexOf.call(N,w,void 0),ut;(ut=0<=J)&&Array.prototype.splice.call(N,J,1),ut&&(Ji(w),g.g[x].length==0&&(delete g.g[x],g.h--))}}function Ss(g,w,x,N){for(var J=0;J<g.length;++J){var ut=g[J];if(!ut.da&&ut.listener==w&&ut.capture==!!x&&ut.ha==N)return J}return-1}var Mr="closure_lm_"+(1e6*Math.random()|0),wa={};function Yo(g,w,x,N,J){if(Array.isArray(w)){for(var ut=0;ut<w.length;ut++)Yo(g,w[ut],x,N,J);return null}return x=tu(x),g&&g[xe]?g.K(w,x,p(N)?!!N.capture:!1,J):Hn(g,w,x,!1,N,J)}function Hn(g,w,x,N,J,ut){if(!w)throw Error("Invalid event type");var wt=p(J)?!!J.capture:!!J,se=kr(g);if(se||(g[Mr]=se=new Ci(g)),x=se.add(w,x,N,wt,ut),x.proxy)return x;if(N=Sa(),x.proxy=N,N.src=g,N.listener=x,g.addEventListener)St||(J=wt),J===void 0&&(J=!1),g.addEventListener(w.toString(),N,J);else if(g.attachEvent)g.attachEvent(As(w.toString()),N);else if(g.addListener&&g.removeListener)g.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Sa(){function g(x){return w.call(g.src,g.listener,x)}const w=Jl;return g}function Ko(g,w,x,N,J){if(Array.isArray(w))for(var ut=0;ut<w.length;ut++)Ko(g,w[ut],x,N,J);else N=p(N)?!!N.capture:!!N,x=tu(x),g&&g[xe]?(g=g.i,w=String(w).toString(),w in g.g&&(ut=g.g[w],x=Ss(ut,x,N,J),-1<x&&(Ji(ut[x]),Array.prototype.splice.call(ut,x,1),ut.length==0&&(delete g.g[w],g.h--)))):g&&(g=kr(g))&&(w=g.g[w.toString()],g=-1,w&&(g=Ss(w,x,N,J)),(x=-1<g?w[g]:null)&&Or(x))}function Or(g){if(typeof g!="number"&&g&&!g.da){var w=g.src;if(w&&w[xe])Ii(w.i,g);else{var x=g.type,N=g.proxy;w.removeEventListener?w.removeEventListener(x,N,g.capture):w.detachEvent?w.detachEvent(As(x),N):w.addListener&&w.removeListener&&w.removeListener(N),(x=kr(w))?(Ii(x,g),x.h==0&&(x.src=null,w[Mr]=null)):Ji(g)}}}function As(g){return g in wa?wa[g]:wa[g]="on"+g}function Jl(g,w){if(g.da)g=!0;else{w=new xt(w,this);var x=g.listener,N=g.ha||g.src;g.fa&&Or(g),g=x.call(N,w)}return g}function kr(g){return g=g[Mr],g instanceof Ci?g:null}var $o="__closure_events_fn_"+(1e9*Math.random()>>>0);function tu(g){return typeof g=="function"?g:(g[$o]||(g[$o]=function(w){return g.handleEvent(w)}),g[$o])}function ke(){Tt.call(this),this.i=new Ci(this),this.M=this,this.F=null}P(ke,Tt),ke.prototype[xe]=!0,ke.prototype.removeEventListener=function(g,w,x,N){Ko(this,g,w,x,N)};function fe(g,w){var x,N=g.F;if(N)for(x=[];N;N=N.F)x.push(N);if(g=g.M,N=w.type||w,typeof w=="string")w=new yt(w,g);else if(w instanceof yt)w.target=w.target||g;else{var J=w;w=new yt(N,g),B(w,J)}if(J=!0,x)for(var ut=x.length-1;0<=ut;ut--){var wt=w.g=x[ut];J=Fn(wt,N,!0,w)&&J}if(wt=w.g=g,J=Fn(wt,N,!0,w)&&J,J=Fn(wt,N,!1,w)&&J,x)for(ut=0;ut<x.length;ut++)wt=w.g=x[ut],J=Fn(wt,N,!1,w)&&J}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var g=this.i,w;for(w in g.g){for(var x=g.g[w],N=0;N<x.length;N++)Ji(x[N]);delete g.g[w],g.h--}}this.F=null},ke.prototype.K=function(g,w,x,N){return this.i.add(String(g),w,!1,x,N)},ke.prototype.L=function(g,w,x,N){return this.i.add(String(g),w,!0,x,N)};function Fn(g,w,x,N){if(w=g.i.g[String(w)],!w)return!0;w=w.concat();for(var J=!0,ut=0;ut<w.length;++ut){var wt=w[ut];if(wt&&!wt.da&&wt.capture==x){var se=wt.listener,Qe=wt.ha||wt.src;wt.fa&&Ii(g.i,wt),J=se.call(Qe,N)!==!1&&J}}return J&&!N.defaultPrevented}function Tn(g,w,x){if(typeof g=="function")x&&(g=S(g,x));else if(g&&typeof g.handleEvent=="function")g=S(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:f.setTimeout(g,w||0)}function Xo(g){g.g=Tn(()=>{g.g=null,g.i&&(g.i=!1,Xo(g))},g.l);const w=g.h;g.h=null,g.m.apply(null,w)}class eu extends Tt{constructor(w,x){super(),this.m=w,this.l=x,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Xo(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(g){Tt.call(this),this.h=g,this.g={}}P(Dr,Tt);var Qs=[];function xs(g){ht(g.g,function(w,x){this.g.hasOwnProperty(x)&&Or(w)},g),g.g={}}Dr.prototype.N=function(){Dr.aa.N.call(this),xs(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fi=f.JSON.stringify,Aa=f.JSON.parse,Pi=class{stringify(g){return f.JSON.stringify(g,void 0)}parse(g){return f.JSON.parse(g,void 0)}};function Qo(){}Qo.prototype.h=null;function Jo(g){return g.h||(g.h=g.i())}function xa(){}var ts={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function es(){yt.call(this,"d")}P(es,yt);function tl(){yt.call(this,"c")}P(tl,yt);var ns={},el=null;function Js(){return el=el||new ke}ns.La="serverreachability";function Ra(g){yt.call(this,ns.La,g)}P(Ra,yt);function tr(g){const w=Js();fe(w,new Ra(w))}ns.STAT_EVENT="statevent";function Ca(g,w){yt.call(this,ns.STAT_EVENT,g),this.stat=w}P(Ca,yt);function De(g){const w=Js();fe(w,new Ca(w,g))}ns.Ma="timingevent";function tn(g,w){yt.call(this,ns.Ma,g),this.size=w}P(tn,yt);function Xe(g,w){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){g()},w)}function di(){this.g=!0}di.prototype.xa=function(){this.g=!1};function qn(g,w,x,N,J,ut){g.info(function(){if(g.g)if(ut)for(var wt="",se=ut.split("&"),Qe=0;Qe<se.length;Qe++){var re=se[Qe].split("=");if(1<re.length){var ye=re[0];re=re[1];var Ne=ye.split("_");wt=2<=Ne.length&&Ne[1]=="type"?wt+(ye+"="+re+"&"):wt+(ye+"=redacted&")}}else wt=null;else wt=ut;return"XMLHTTP REQ ("+N+") [attempt "+J+"]: "+w+`
`+x+`
`+wt})}function Ot(g,w,x,N,J,ut,wt){g.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+J+"]: "+w+`
`+x+`
`+ut+" "+wt})}function Rs(g,w,x,N){g.info(function(){return"XMLHTTP TEXT ("+w+"): "+er(g,x)+(N?" "+N:"")})}function nl(g,w){g.info(function(){return"TIMEOUT: "+w})}di.prototype.info=function(){};function er(g,w){if(!g.g)return w;if(!w)return null;try{var x=JSON.parse(w);if(x){for(g=0;g<x.length;g++)if(Array.isArray(x[g])){var N=x[g];if(!(2>N.length)){var J=N[1];if(Array.isArray(J)&&!(1>J.length)){var ut=J[0];if(ut!="noop"&&ut!="stop"&&ut!="close")for(var wt=1;wt<J.length;wt++)J[wt]=""}}}}return fi(x)}catch{return w}}var Cs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Oi;function Mn(){}P(Mn,Qo),Mn.prototype.g=function(){return new XMLHttpRequest},Mn.prototype.i=function(){return{}},Oi=new Mn;function En(g,w,x,N){this.j=g,this.i=w,this.l=x,this.R=N||1,this.U=new Dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ze}function Ze(){this.i=null,this.g="",this.h=!1}var il={},Ia={};function ki(g,w,x){g.L=1,g.v=si(Le(w)),g.m=x,g.P=!0,is(g,null)}function is(g,w){g.F=Date.now(),Nr(g),g.A=Le(g.v);var x=g.A,N=g.R;Array.isArray(N)||(N=[String(N)]),al(x.i,"t",N),g.C=0,x=g.j.J,g.h=new Ze,g.g=ou(g.j,x?w:null,!g.m),0<g.O&&(g.M=new eu(S(g.Y,g,g.g),g.O)),w=g.U,x=g.g,N=g.ca;var J="readystatechange";Array.isArray(J)||(J&&(Qs[0]=J.toString()),J=Qs);for(var ut=0;ut<J.length;ut++){var wt=Yo(x,J[ut],N||w.handleEvent,!1,w.h||w);if(!wt)break;w.g[wt.key]=wt}w=g.H?O(g.H):{},g.m?(g.u||(g.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,w)):(g.u="GET",g.g.ea(g.A,g.u,null,w)),tr(),qn(g.i,g.u,g.A,g.l,g.R,g.m)}En.prototype.ca=function(g){g=g.target;const w=this.M;w&&An(g)==3?w.j():this.Y(g)},En.prototype.Y=function(g){try{if(g==this.g)t:{const Ne=An(this.g);var w=this.g.Ba();const Ns=this.g.Z();if(!(3>Ne)&&(Ne!=3||this.g&&(this.h.h||this.g.oa()||ol(this.g)))){this.J||Ne!=4||w==7||(w==8||0>=Ns?tr(3):tr(2)),nr(this);var x=this.g.Z();this.X=x;e:if(nu(this)){var N=ol(this.g);g="";var J=N.length,ut=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pn(this),ss(this);var wt="";break e}this.h.i=new f.TextDecoder}for(w=0;w<J;w++)this.h.h=!0,g+=this.h.i.decode(N[w],{stream:!(ut&&w==J-1)});N.length=0,this.h.g+=g,this.C=0,wt=this.h.g}else wt=this.g.oa();if(this.o=x==200,Ot(this.i,this.u,this.A,this.l,this.R,Ne,x),this.o){if(this.T&&!this.K){e:{if(this.g){var se,Qe=this.g;if((se=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(se)){var re=se;break e}}re=null}if(x=re)Rs(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Is(this,x);else{this.o=!1,this.s=3,De(12),pn(this),ss(this);break t}}if(this.P){x=!0;let Me;for(;!this.J&&this.C<wt.length;)if(Me=Lr(this,wt),Me==Ia){Ne==4&&(this.s=4,De(14),x=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(Me==il){this.s=4,De(15),Rs(this.i,this.l,wt,"[Invalid Chunk]"),x=!1;break}else Rs(this.i,this.l,Me,null),Is(this,Me);if(nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||wt.length!=0||this.h.h||(this.s=1,De(16),x=!1),this.o=this.o&&x,!x)Rs(this.i,this.l,wt,"[Invalid Chunked Response]"),pn(this),ss(this);else if(0<wt.length&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.ba&&!ye.M&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+wt.length),lr(ye),ye.M=!0,De(11))}}else Rs(this.i,this.l,wt,null),Is(this,wt);Ne==4&&pn(this),this.o&&!this.J&&(Ne==4?ul(this.j,this):(this.o=!1,Nr(this)))}else pc(this.g),x==400&&0<wt.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),pn(this),ss(this)}}}catch{}finally{}};function nu(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Lr(g,w){var x=g.C,N=w.indexOf(`
`,x);return N==-1?Ia:(x=Number(w.substring(x,N)),isNaN(x)?il:(N+=1,N+x>w.length?Ia:(w=w.slice(N,N+x),g.C=N+x,w)))}En.prototype.cancel=function(){this.J=!0,pn(this)};function Nr(g){g.S=Date.now()+g.I,iu(g,g.I)}function iu(g,w){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Xe(S(g.ba,g),w)}function nr(g){g.B&&(f.clearTimeout(g.B),g.B=null)}En.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(nl(this.i,this.A),this.L!=2&&(tr(),De(17)),pn(this),this.s=2,ss(this)):iu(this,this.S-g)};function ss(g){g.j.G==0||g.J||ul(g.j,g)}function pn(g){nr(g);var w=g.M;w&&typeof w.ma=="function"&&w.ma(),g.M=null,xs(g.U),g.g&&(w=g.g,g.g=null,w.abort(),w.ma())}function Is(g,w){try{var x=g.j;if(x.G!=0&&(x.g==g||te(x.h,g))){if(!g.K&&te(x.h,g)&&x.G==3){try{var N=x.Da.g.parse(w)}catch{N=null}if(Array.isArray(N)&&N.length==3){var J=N;if(J[0]==0){t:if(!x.u){if(x.g)if(x.g.F+3e3<g.F)za(x),La(x);else break t;Na(x),De(18)}}else x.za=J[1],0<x.za-x.T&&37500>J[2]&&x.F&&x.v==0&&!x.C&&(x.C=Xe(S(x.Za,x),6e3));if(1>=as(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Ls(x,11)}else if((g.K||x.g==g)&&za(x),!q(w))for(J=x.Da.g.parse(w),w=0;w<J.length;w++){let re=J[w];if(x.T=re[0],re=re[1],x.G==2)if(re[0]=="c"){x.K=re[1],x.ia=re[2];const ye=re[3];ye!=null&&(x.la=ye,x.j.info("VER="+x.la));const Ne=re[4];Ne!=null&&(x.Aa=Ne,x.j.info("SVER="+x.Aa));const Ns=re[5];Ns!=null&&typeof Ns=="number"&&0<Ns&&(N=1.5*Ns,x.L=N,x.j.info("backChannelRequestTimeoutMs_="+N)),N=x;const Me=g.g;if(Me){const hs=Me.g?Me.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hs){var ut=N.h;ut.g||hs.indexOf("spdy")==-1&&hs.indexOf("quic")==-1&&hs.indexOf("h2")==-1||(ut.j=ut.l,ut.g=new Set,ut.h&&(_e(ut,ut.h),ut.h=null))}if(N.D){const fs=Me.g?Me.g.getResponseHeader("X-HTTP-Session-Id"):null;fs&&(N.ya=fs,jt(N.I,N.D,fs))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-g.F,x.j.info("Handshake RTT: "+x.R+"ms")),N=x;var wt=g;if(N.qa=Ua(N,N.J?N.ia:null,N.W),wt.K){ln(N.h,wt);var se=wt,Qe=N.L;Qe&&(se.I=Qe),se.B&&(nr(se),Nr(se)),N.g=wt}else Bi(N);0<x.i.length&&or(x)}else re[0]!="stop"&&re[0]!="close"||Ls(x,7);else x.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?Ls(x,7):Da(x):re[0]!="noop"&&x.l&&x.l.ta(re),x.v=0)}}tr(4)}catch{}}var ir=class{constructor(g,w){this.g=g,this.map=w}};function rs(g){this.l=g||10,f.PerformanceNavigationTiming?(g=f.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vr(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function as(g){return g.h?1:g.g?g.g.size:0}function te(g,w){return g.h?g.h==w:g.g?g.g.has(w):!1}function _e(g,w){g.g?g.g.add(w):g.h=w}function ln(g,w){g.h&&g.h==w?g.h=null:g.g&&g.g.has(w)&&g.g.delete(w)}rs.prototype.cancel=function(){if(this.i=os(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function os(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let w=g.i;for(const x of g.g.values())w=w.concat(x.D);return w}return k(g.i)}function sr(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(m(g)){for(var w=[],x=g.length,N=0;N<x;N++)w.push(g[N]);return w}w=[],x=0;for(N in g)w[x++]=g[N];return w}function rr(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(m(g)||typeof g=="string"){var w=[];g=g.length;for(var x=0;x<g;x++)w.push(x);return w}w=[],x=0;for(const N in g)w[x++]=N;return w}}}function Gt(g,w){if(g.forEach&&typeof g.forEach=="function")g.forEach(w,void 0);else if(m(g)||typeof g=="string")Array.prototype.forEach.call(g,w,void 0);else for(var x=rr(g),N=sr(g),J=N.length,ut=0;ut<J;ut++)w.call(void 0,N[ut],x&&x[ut],g)}var be=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sl(g,w){if(g){g=g.split("&");for(var x=0;x<g.length;x++){var N=g[x].indexOf("="),J=null;if(0<=N){var ut=g[x].substring(0,N);J=g[x].substring(N+1)}else ut=g[x];w(ut,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Be(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Be){this.h=g.h,zr(this,g.j),this.o=g.o,this.g=g.g,Di(this,g.s),this.l=g.l;var w=g.i,x=new Ni;x.i=w.i,w.g&&(x.g=new Map(w.g),x.h=w.h),On(this,x),this.m=g.m}else g&&(w=String(g).match(be))?(this.h=!1,zr(this,w[1]||"",!0),this.o=wn(w[2]||""),this.g=wn(w[3]||"",!0),Di(this,w[4]),this.l=wn(w[5]||"",!0),On(this,w[6]||"",!0),this.m=wn(w[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}Be.prototype.toString=function(){var g=[],w=this.j;w&&g.push(Li(w,Ps,!0),":");var x=this.g;return(x||w=="file")&&(g.push("//"),(w=this.o)&&g.push(Li(w,Ps,!0),"@"),g.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&g.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&g.push("/"),g.push(Li(x,x.charAt(0)=="/"?rl:Br,!0))),(x=this.i.toString())&&g.push("?",x),(x=this.m)&&g.push("#",Li(x,ar)),g.join("")};function Le(g){return new Be(g)}function zr(g,w,x){g.j=x?wn(w,!0):w,g.j&&(g.j=g.j.replace(/:$/,""))}function Di(g,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);g.s=w}else g.s=null}function On(g,w,x){w instanceof Ni?(g.i=w,ri(g.i,g.h)):(x||(w=Li(w,Ma)),g.i=new Ni(w,g.h))}function jt(g,w,x){g.i.set(w,x)}function si(g){return jt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function wn(g,w){return g?w?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Li(g,w,x){return typeof g=="string"?(g=encodeURI(g).replace(w,Pa),x&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Pa(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ps=/[#\/\?@]/g,Br=/[#\?:]/g,rl=/[#\?]/g,Ma=/[#\?@]/g,ar=/#/g;function Ni(g,w){this.h=this.g=null,this.i=g||null,this.j=!!w}function kn(g){g.g||(g.g=new Map,g.h=0,g.i&&sl(g.i,function(w,x){g.add(decodeURIComponent(w.replace(/\+/g," ")),x)}))}n=Ni.prototype,n.add=function(g,w){kn(this),this.i=null,g=Nt(this,g);var x=this.g.get(g);return x||this.g.set(g,x=[]),x.push(w),this.h+=1,this};function ls(g,w){kn(g),w=Nt(g,w),g.g.has(w)&&(g.i=null,g.h-=g.g.get(w).length,g.g.delete(w))}function Vi(g,w){return kn(g),w=Nt(g,w),g.g.has(w)}n.forEach=function(g,w){kn(this),this.g.forEach(function(x,N){x.forEach(function(J){g.call(w,J,N,this)},this)},this)},n.na=function(){kn(this);const g=Array.from(this.g.values()),w=Array.from(this.g.keys()),x=[];for(let N=0;N<w.length;N++){const J=g[N];for(let ut=0;ut<J.length;ut++)x.push(w[N])}return x},n.V=function(g){kn(this);let w=[];if(typeof g=="string")Vi(this,g)&&(w=w.concat(this.g.get(Nt(this,g))));else{g=Array.from(this.g.values());for(let x=0;x<g.length;x++)w=w.concat(g[x])}return w},n.set=function(g,w){return kn(this),this.i=null,g=Nt(this,g),Vi(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[w]),this.h+=1,this},n.get=function(g,w){return g?(g=this.V(g),0<g.length?String(g[0]):w):w};function al(g,w,x){ls(g,w),0<x.length&&(g.i=null,g.g.set(Nt(g,w),k(x)),g.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],w=Array.from(this.g.keys());for(var x=0;x<w.length;x++){var N=w[x];const ut=encodeURIComponent(String(N)),wt=this.V(N);for(N=0;N<wt.length;N++){var J=ut;wt[N]!==""&&(J+="="+encodeURIComponent(String(wt[N]))),g.push(J)}}return this.i=g.join("&")};function Nt(g,w){return w=String(w),g.j&&(w=w.toLowerCase()),w}function ri(g,w){w&&!g.j&&(kn(g),g.i=null,g.g.forEach(function(x,N){var J=N.toLowerCase();N!=J&&(ls(this,N),al(this,J,x))},g)),g.j=w}function ue(g,w){const x=new di;if(f.Image){const N=new Image;N.onload=R(Gn,x,"TestLoadImage: loaded",!0,w,N),N.onerror=R(Gn,x,"TestLoadImage: error",!1,w,N),N.onabort=R(Gn,x,"TestLoadImage: abort",!1,w,N),N.ontimeout=R(Gn,x,"TestLoadImage: timeout",!1,w,N),f.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=g}else w(!1)}function mi(g,w){const x=new di,N=new AbortController,J=setTimeout(()=>{N.abort(),Gn(x,"TestPingServer: timeout",!1,w)},1e4);fetch(g,{signal:N.signal}).then(ut=>{clearTimeout(J),ut.ok?Gn(x,"TestPingServer: ok",!0,w):Gn(x,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(J),Gn(x,"TestPingServer: error",!1,w)})}function Gn(g,w,x,N,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),N(x)}catch{}}function Ms(){this.g=new Pi}function pi(g,w,x){const N=x||"";try{Gt(g,function(J,ut){let wt=J;p(J)&&(wt=fi(J)),w.push(N+ut+"="+encodeURIComponent(wt))})}catch(J){throw w.push(N+"type="+encodeURIComponent("_badmap")),J}}function Zn(g){this.l=g.Ub||null,this.j=g.eb||!1}P(Zn,Qo),Zn.prototype.g=function(){return new zi(this.l,this.j)},Zn.prototype.i=function(g){return function(){return g}}({});function zi(g,w){ke.call(this),this.D=g,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(zi,ke),n=zi.prototype,n.open=function(g,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=w,this.readyState=1,Sn(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(w.body=g),(this.D||f).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Re(this)),this.readyState=0},n.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Sn(this)),this.g&&(this.readyState=3,Sn(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Os(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Os(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}n.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var w=g.value?g.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!g.done}))&&(this.response=this.responseText+=w)}g.done?Re(this):Sn(this),this.readyState==3&&Os(this)}},n.Ra=function(g){this.g&&(this.response=this.responseText=g,Re(this))},n.Qa=function(g){this.g&&(this.response=g,Re(this))},n.ga=function(){this.g&&Re(this)};function Re(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Sn(g)}n.setRequestHeader=function(g,w){this.u.append(g,w)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],w=this.h.entries();for(var x=w.next();!x.done;)x=x.value,g.push(x[0]+": "+x[1]),x=w.next();return g.join(`\r
`)};function Sn(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Oa(g){let w="";return ht(g,function(x,N){w+=N,w+=":",w+=x,w+=`\r
`}),w}function en(g,w,x){t:{for(N in x){var N=!1;break t}N=!0}N||(x=Oa(x),typeof g=="string"?x!=null&&encodeURIComponent(String(x)):jt(g,w,x))}function de(g){ke.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(de,ke);var Ur=/^https?$/i,ks=["POST","PUT"];n=de.prototype,n.Ha=function(g){this.J=g},n.ea=function(g,w,x,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);w=w?w.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oi.g(),this.v=this.o?Jo(this.o):Jo(Oi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(w,String(g),!0),this.B=!1}catch(ut){su(this,ut);return}if(g=x||"",x=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var J in N)x.set(J,N[J]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ut of N.keys())x.set(ut,N.get(ut));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(x.keys()).find(ut=>ut.toLowerCase()=="content-type"),J=f.FormData&&g instanceof f.FormData,!(0<=Array.prototype.indexOf.call(ks,w,void 0))||N||J||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ut,wt]of x)this.g.setRequestHeader(ut,wt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gn(this),this.u=!0,this.g.send(g),this.u=!1}catch(ut){su(this,ut)}};function su(g,w){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=w,g.m=5,jr(g),us(g)}function jr(g){g.A||(g.A=!0,fe(g,"complete"),fe(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,fe(this,"complete"),fe(this,"abort"),us(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),us(this,!0)),de.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Kt(this):this.bb())},n.bb=function(){Kt(this)};function Kt(g){if(g.h&&typeof c<"u"&&(!g.v[1]||An(g)!=4||g.Z()!=2)){if(g.u&&An(g)==4)Tn(g.Ea,0,g);else if(fe(g,"readystatechange"),An(g)==4){g.h=!1;try{const wt=g.Z();t:switch(wt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break t;default:w=!1}var x;if(!(x=w)){var N;if(N=wt===0){var J=String(g.D).match(be)[1]||null;!J&&f.self&&f.self.location&&(J=f.self.location.protocol.slice(0,-1)),N=!Ur.test(J?J.toLowerCase():"")}x=N}if(x)fe(g,"complete"),fe(g,"success");else{g.m=6;try{var ut=2<An(g)?g.g.statusText:""}catch{ut=""}g.l=ut+" ["+g.Z()+"]",jr(g)}}finally{us(g)}}}}function us(g,w){if(g.g){gn(g);const x=g.g,N=g.v[0]?()=>{}:null;g.g=null,g.v=null,w||fe(g,"ready");try{x.onreadystatechange=N}catch{}}}function gn(g){g.I&&(f.clearTimeout(g.I),g.I=null)}n.isActive=function(){return!!this.g};function An(g){return g.g?g.g.readyState:0}n.Z=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(g){if(this.g){var w=this.g.responseText;return g&&w.indexOf(g)==0&&(w=w.substring(g.length)),Aa(w)}};function ol(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function pc(g){const w={};g=(g.g&&2<=An(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<g.length;N++){if(q(g[N]))continue;var x=H(g[N]);const J=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const ut=w[J]||[];w[J]=ut,ut.push(x)}V(w,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ds(g,w,x){return x&&x.internalChannelParams&&x.internalChannelParams[g]||w}function ka(g){this.Aa=0,this.i=[],this.j=new di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ds("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ds("baseRetryDelayMs",5e3,g),this.cb=Ds("retryDelaySeedMs",1e4,g),this.Wa=Ds("forwardChannelMaxRetries",2,g),this.wa=Ds("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new rs(g&&g.concurrentRequestLimit),this.Da=new Ms,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ka.prototype,n.la=8,n.G=1,n.connect=function(g,w,x,N){De(0),this.W=g,this.H=w||{},x&&N!==void 0&&(this.H.OSID=x,this.H.OAID=N),this.F=this.X,this.I=Ua(this,null,this.W),or(this)};function Da(g){if(ru(g),g.G==3){var w=g.U++,x=Le(g.I);if(jt(x,"SID",g.K),jt(x,"RID",w),jt(x,"TYPE","terminate"),Hr(g,x),w=new En(g,g.j,w),w.L=2,w.v=si(Le(x)),x=!1,f.navigator&&f.navigator.sendBeacon)try{x=f.navigator.sendBeacon(w.v.toString(),"")}catch{}!x&&f.Image&&(new Image().src=w.v,x=!0),x||(w.g=ou(w.j,null),w.g.ea(w.v)),w.F=Date.now(),Nr(w)}au(g)}function La(g){g.g&&(lr(g),g.g.cancel(),g.g=null)}function ru(g){La(g),g.u&&(f.clearTimeout(g.u),g.u=null),za(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&f.clearTimeout(g.s),g.s=null)}function or(g){if(!Vr(g.h)&&!g.s){g.s=!0;var w=g.Ga;vt||j(),mt||(vt(),mt=!0),Vt.add(w,g),g.B=0}}function gc(g,w){return as(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=w.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Xe(S(g.Ga,g,w),Ba(g,g.B)),g.B++,!0)}n.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const J=new En(this,this.j,g);let ut=this.o;if(this.S&&(ut?(ut=O(ut),B(ut,this.S)):ut=this.S),this.m!==null||this.O||(J.H=ut,ut=null),this.P)t:{for(var w=0,x=0;x<this.i.length;x++){e:{var N=this.i[x];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break e}N=void 0}if(N===void 0)break;if(w+=N,4096<w){w=x;break t}if(w===4096||x===this.i.length-1){w=x+1;break t}}w=1e3}else w=1e3;w=ll(this,J,w),x=Le(this.I),jt(x,"RID",g),jt(x,"CVER",22),this.D&&jt(x,"X-HTTP-Session-Id",this.D),Hr(this,x),ut&&(this.O?w="headers="+encodeURIComponent(String(Oa(ut)))+"&"+w:this.m&&en(x,this.m,ut)),_e(this.h,J),this.Ua&&jt(x,"TYPE","init"),this.P?(jt(x,"$req",w),jt(x,"SID","null"),J.T=!0,ki(J,x,null)):ki(J,x,w),this.G=2}}else this.G==3&&(g?Wn(this,g):this.i.length==0||Vr(this.h)||Wn(this))};function Wn(g,w){var x;w?x=w.l:x=g.U++;const N=Le(g.I);jt(N,"SID",g.K),jt(N,"RID",x),jt(N,"AID",g.T),Hr(g,N),g.m&&g.o&&en(N,g.m,g.o),x=new En(g,g.j,x,g.B+1),g.m===null&&(x.H=g.o),w&&(g.i=w.D.concat(g.i)),w=ll(g,x,1e3),x.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),_e(g.h,x),ki(x,N,w)}function Hr(g,w){g.H&&ht(g.H,function(x,N){jt(w,N,x)}),g.l&&Gt({},function(x,N){jt(w,N,x)})}function ll(g,w,x){x=Math.min(g.i.length,x);var N=g.l?S(g.l.Na,g.l,g):null;t:{var J=g.i;let ut=-1;for(;;){const wt=["count="+x];ut==-1?0<x?(ut=J[0].g,wt.push("ofs="+ut)):ut=0:wt.push("ofs="+ut);let se=!0;for(let Qe=0;Qe<x;Qe++){let re=J[Qe].g;const ye=J[Qe].map;if(re-=ut,0>re)ut=Math.max(0,J[Qe].g-100),se=!1;else try{pi(ye,wt,"req"+re+"_")}catch{N&&N(ye)}}if(se){N=wt.join("&");break t}}}return g=g.i.splice(0,x),w.D=g,N}function Bi(g){if(!g.g&&!g.u){g.Y=1;var w=g.Fa;vt||j(),mt||(vt(),mt=!0),Vt.add(w,g),g.v=0}}function Na(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Xe(S(g.Fa,g),Ba(g,g.v)),g.v++,!0)}n.Fa=function(){if(this.u=null,Va(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Xe(S(this.ab,this),g)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,De(10),La(this),Va(this))};function lr(g){g.A!=null&&(f.clearTimeout(g.A),g.A=null)}function Va(g){g.g=new En(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var w=Le(g.qa);jt(w,"RID","rpc"),jt(w,"SID",g.K),jt(w,"AID",g.T),jt(w,"CI",g.F?"0":"1"),!g.F&&g.ja&&jt(w,"TO",g.ja),jt(w,"TYPE","xmlhttp"),Hr(g,w),g.m&&g.o&&en(w,g.m,g.o),g.L&&(g.g.I=g.L);var x=g.g;g=g.ia,x.L=1,x.v=si(Le(w)),x.m=null,x.P=!0,is(x,g)}n.Za=function(){this.C!=null&&(this.C=null,La(this),Na(this),De(19))};function za(g){g.C!=null&&(f.clearTimeout(g.C),g.C=null)}function ul(g,w){var x=null;if(g.g==w){za(g),lr(g),g.g=null;var N=2}else if(te(g.h,w))x=w.D,ln(g.h,w),N=1;else return;if(g.G!=0){if(w.o)if(N==1){x=w.m?w.m.length:0,w=Date.now()-w.F;var J=g.B;N=Js(),fe(N,new tn(N,x)),or(g)}else Bi(g);else if(J=w.s,J==3||J==0&&0<w.X||!(N==1&&gc(g,w)||N==2&&Na(g)))switch(x&&0<x.length&&(w=g.h,w.i=w.i.concat(x)),J){case 1:Ls(g,5);break;case 4:Ls(g,10);break;case 3:Ls(g,6);break;default:Ls(g,2)}}}function Ba(g,w){let x=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(x*=2),x*w}function Ls(g,w){if(g.j.info("Error code "+w),w==2){var x=S(g.fb,g),N=g.Xa;const J=!N;N=new Be(N||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||zr(N,"https"),si(N),J?ue(N.toString(),x):mi(N.toString(),x)}else De(2);g.G=0,g.l&&g.l.sa(w),au(g),ru(g)}n.fb=function(g){g?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function au(g){if(g.G=0,g.ka=[],g.l){const w=os(g.h);(w.length!=0||g.i.length!=0)&&(D(g.ka,w),D(g.ka,g.i),g.h.i.length=0,k(g.i),g.i.length=0),g.l.ra()}}function Ua(g,w,x){var N=x instanceof Be?Le(x):new Be(x);if(N.g!="")w&&(N.g=w+"."+N.g),Di(N,N.s);else{var J=f.location;N=J.protocol,w=w?w+"."+J.hostname:J.hostname,J=+J.port;var ut=new Be(null);N&&zr(ut,N),w&&(ut.g=w),J&&Di(ut,J),x&&(ut.l=x),N=ut}return x=g.D,w=g.ya,x&&w&&jt(N,x,w),jt(N,"VER",g.la),Hr(g,N),N}function ou(g,w,x){if(w&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=g.Ca&&!g.pa?new de(new Zn({eb:x})):new de(g.pa),w.Ha(g.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function cl(){}n=cl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Fr(){}Fr.prototype.g=function(g,w){return new un(g,w)};function un(g,w){ke.call(this),this.g=new ka(w),this.l=g,this.h=w&&w.messageUrlParams||null,g=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(g?g["X-WebChannel-Content-Type"]=w.messageContentType:g={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(g?g["X-WebChannel-Client-Profile"]=w.va:g={"X-WebChannel-Client-Profile":w.va}),this.g.S=g,(g=w&&w.Sb)&&!q(g)&&(this.g.m=g),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!q(w)&&(this.g.D=w,g=this.h,g!==null&&w in g&&(g=this.h,w in g&&delete g[w])),this.j=new Yn(this)}P(un,ke),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Da(this.g)},un.prototype.o=function(g){var w=this.g;if(typeof g=="string"){var x={};x.__data__=g,g=x}else this.u&&(x={},x.__data__=fi(g),g=x);w.i.push(new ir(w.Ya++,g)),w.G==3&&or(w)},un.prototype.N=function(){this.g.l=null,delete this.j,Da(this.g),delete this.g,un.aa.N.call(this)};function cs(g){es.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var w=g.__sm__;if(w){t:{for(const x in w){g=x;break t}g=void 0}(this.i=g)&&(g=this.i,w=w!==null&&g in w?w[g]:void 0),this.data=w}else this.data=g}P(cs,es);function lu(){tl.call(this),this.status=1}P(lu,tl);function Yn(g){this.g=g}P(Yn,cl),Yn.prototype.ua=function(){fe(this.g,"a")},Yn.prototype.ta=function(g){fe(this.g,new cs(g))},Yn.prototype.sa=function(g){fe(this.g,new lu)},Yn.prototype.ra=function(){fe(this.g,"b")},Fr.prototype.createWebChannel=Fr.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,G1=function(){return new Fr},q1=function(){return Js()},F1=ns,z_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cs.NO_ERROR=0,Cs.TIMEOUT=8,Cs.HTTP_ERROR=6,Gd=Cs,Mi.COMPLETE="complete",H1=Mi,xa.EventType=ts,ts.OPEN="a",ts.CLOSE="b",ts.ERROR="c",ts.MESSAGE="d",ke.prototype.listen=ke.prototype.K,ph=xa,de.prototype.listenOnce=de.prototype.L,de.prototype.getLastError=de.prototype.Ka,de.prototype.getLastErrorCode=de.prototype.Ba,de.prototype.getStatus=de.prototype.Z,de.prototype.getResponseJson=de.prototype.Oa,de.prototype.getResponseText=de.prototype.oa,de.prototype.send=de.prototype.ea,de.prototype.setWithCredentials=de.prototype.Ha,j1=de}).apply(typeof wd<"u"?wd:typeof self<"u"?self:typeof window<"u"?window:{});const vE="@firebase/firestore",bE="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=new Um("@firebase/firestore");function ju(){return Ul.logLevel}function Rt(n,...t){if(Ul.logLevel<=ae.DEBUG){const e=t.map(By);Ul.debug(`Firestore (${uc}): ${n}`,...e)}}function ga(n,...t){if(Ul.logLevel<=ae.ERROR){const e=t.map(By);Ul.error(`Firestore (${uc}): ${n}`,...e)}}function $u(n,...t){if(Ul.logLevel<=ae.WARN){const e=t.map(By);Ul.warn(`Firestore (${uc}): ${n}`,...e)}}function By(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,Z1(n,i,e)}function Z1(n,t,e){let i=`FIRESTORE (${uc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw ga(i),new Error(i)}function ve(n,t,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,n||Z1(t,r,i)}function Wt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends Xs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class yO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Jn.UNAUTHENTICATED))}shutdown(){}}class vO{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class bO{constructor(t){this.t=t,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ve(this.o===void 0,42304);let i=this.i;const r=m=>this.i!==i?(i=this.i,e(m)):Promise.resolve();let l=new da;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new da,t.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const m=l;t.enqueueRetryable(async()=>{await m.promise,await r(this.currentUser)})},f=m=>{Rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new da)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ve(typeof i.accessToken=="string",31837,{l:i}),new W1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ve(t===null||typeof t=="string",2055,{h:t}),new Jn(t)}}class TO{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EO{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new TO(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wO{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ei(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){ve(this.o===void 0,3512);const i=l=>{l.error!=null&&Rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Rt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>i(l))};const r=l=>{Rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>r(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):Rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new TE(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ve(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new TE(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=SO(40);for(let l=0;l<r.length;++l)i.length<20&&r[l]<e&&(i+=t.charAt(r[l]%62))}return i}}function Jt(n,t){return n<t?-1:n>t?1:0}function B_(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),r=t.codePointAt(e);if(i!==r){if(i<128&&r<128)return Jt(i,r);{const l=Y1(),c=AO(l.encode(EE(n,e)),l.encode(EE(t,e)));return c!==0?c:Jt(i,r)}}e+=i>65535?2:1}return Jt(n.length,t.length)}function EE(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function AO(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Jt(n[e],t[e]);return Jt(n.length,t.length)}function Xu(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=-62135596800,SE=1e6;class on{static now(){return on.fromMillis(Date.now())}static fromDate(t){return on.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*SE);return new on(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ct(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ct(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<wE)throw new Ct(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ct(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/SE}_compareTo(t){return this.seconds===t.seconds?Jt(this.nanoseconds,t.nanoseconds):Jt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-wE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{static fromTimestamp(t){return new Zt(t)}static min(){return new Zt(new on(0,0))}static max(){return new Zt(new on(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="__name__";class br{constructor(t,e,i){e===void 0?e=0:e>t.length&&Ht(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&Ht(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return br.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof br?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const l=br.compareSegments(t.get(r),e.get(r));if(l!==0)return l}return Jt(t.length,e.length)}static compareSegments(t,e){const i=br.isNumericId(t),r=br.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?br.extractNumericId(t).compare(br.extractNumericId(e)):B_(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Io.fromString(t.substring(4,t.length-2))}}class je extends br{construct(t,e,i){return new je(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ct(gt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new je(e)}static emptyPath(){return new je([])}}const xO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends br{construct(t,e,i){return new zn(t,e,i)}static isValidIdentifier(t){return xO.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===AE}static keyField(){return new zn([AE])}static fromServerFormat(t){const e=[];let i="",r=0;const l=()=>{if(i.length===0)throw new Ct(gt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const f=t[r];if(f==="\\"){if(r+1===t.length)throw new Ct(gt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[r+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ct(gt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,r+=2}else f==="`"?(c=!c,r++):f!=="."||c?(i+=f,r++):(l(),r++)}if(l(),c)throw new Ct(gt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new zn(e)}static emptyPath(){return new zn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t){this.path=t}static fromPath(t){return new Lt(je.fromString(t))}static fromName(t){return new Lt(je.fromString(t).popFirst(5))}static empty(){return new Lt(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&je.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return je.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Lt(new je(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=-1;function RO(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Zt.fromTimestamp(i===1e9?new on(e+1,0):new on(e,i));return new Do(r,Lt.empty(),t)}function CO(n){return new Do(n.readTime,n.key,Bh)}class Do{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Do(Zt.min(),Lt.empty(),Bh)}static max(){return new Do(Zt.max(),Lt.empty(),Bh)}}function IO(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Lt.comparator(n.documentKey,t.documentKey),e!==0?e:Jt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(n){if(n.code!==gt.FAILED_PRECONDITION||n.message!==PO)throw n;Rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ht(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new _t((i,r)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(i,r)},this.catchCallback=l=>{this.wrapFailure(e,l).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof _t?e:_t.resolve(e)}catch(e){return _t.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):_t.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):_t.reject(e)}static resolve(t){return new _t((e,i)=>{e(t)})}static reject(t){return new _t((e,i)=>{i(t)})}static waitFor(t){return new _t((e,i)=>{let r=0,l=0,c=!1;t.forEach(f=>{++r,f.next(()=>{++l,c&&l===r&&e()},m=>i(m))}),c=!0,l===r&&e()})}static or(t){let e=_t.resolve(!1);for(const i of t)e=e.next(r=>r?_t.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,l)=>{i.push(e.call(this,r,l))}),this.waitFor(i)}static mapArray(t,e){return new _t((i,r)=>{const l=t.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const p=m;e(t[p]).next(v=>{c[p]=v,++f,f===l&&i(c)},v=>r(v))}})}static doWhile(t,e){return new _t((i,r)=>{const l=()=>{t()===!0?e().next(()=>{l()},r):i()};l()})}}function OO(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function hc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>e.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}jm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=-1;function Hm(n){return n==null}function om(n){return n===0&&1/n==-1/0}function kO(n){return typeof n=="number"&&Number.isInteger(n)&&!om(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="";function DO(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=xE(t)),t=LO(n.get(e),t);return xE(t)}function LO(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const l=n.charAt(r);switch(l){case"\0":e+="";break;case $1:e+="";break;default:e+=l}}return e}function xE(n){return n+$1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Fo(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function X1(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t,e){this.comparator=t,this.root=e||Vn.EMPTY}insert(t,e){return new $e(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(t){return new $e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Sd(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Sd(this.root,t,this.comparator,!1)}getReverseIterator(){return new Sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Sd(this.root,t,this.comparator,!0)}}class Sd{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,e&&r&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Vn{constructor(t,e,i,r,l){this.key=t,this.value=e,this.color=i??Vn.RED,this.left=r??Vn.EMPTY,this.right=l??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,l){return new Vn(t??this.key,e??this.value,i??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const l=i(t,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(t,e,i),null):l===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Vn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ht(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ht(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ht(27949);return t+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ht(57766)}get value(){throw Ht(16141)}get color(){throw Ht(16727)}get left(){throw Ht(29726)}get right(){throw Ht(36894)}copy(t,e,i,r,l){return this}insert(t,e,i){return new Vn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(t){this.comparator=t,this.data=new $e(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new CE(this.data.getIterator())}getIteratorFrom(t){return new CE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof bn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,l=i.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new bn(this.comparator);return e.data=t,e}}class CE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t){this.fields=t,t.sort(zn.comparator)}static empty(){return new $i([])}unionWith(t){let e=new bn(zn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new $i(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Xu(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Q1("Invalid base64 string: "+l):l}}(t);return new jn(e)}static fromUint8Array(t){const e=function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l}(t);return new jn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Jt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}jn.EMPTY_BYTE_STRING=new jn("");const NO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lo(n){if(ve(!!n,39018),typeof n=="string"){let t=0;const e=NO.exec(n);if(ve(!!e,46558,{timestamp:n}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:rn(n.seconds),nanos:rn(n.nanos)}}function rn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function No(n){return typeof n=="string"?jn.fromBase64String(n):jn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="server_timestamp",tA="__type__",eA="__previous_value__",nA="__local_write_time__";function jy(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[tA])===null||e===void 0?void 0:e.stringValue)===J1}function Fm(n){const t=n.mapValue.fields[eA];return jy(t)?Fm(t):t}function Uh(n){const t=Lo(n.mapValue.fields[nA].timestampValue);return new on(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(t,e,i,r,l,c,f,m,p,v){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=v}}const lm="(default)";class jh{constructor(t,e){this.projectId=t,this.database=e||lm}static empty(){return new jh("","")}get isDefaultDatabase(){return this.database===lm}isEqual(t){return t instanceof jh&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="__type__",zO="__max__",Ad={mapValue:{}},sA="__vector__",um="value";function Vo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jy(n)?4:UO(n)?9007199254740991:BO(n)?10:11:Ht(28295,{value:n})}function Ir(n,t){if(n===t)return!0;const e=Vo(n);if(e!==Vo(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Uh(n).isEqual(Uh(t));case 3:return function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=Lo(r.timestampValue),f=Lo(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,l){return No(r.bytesValue).isEqual(No(l.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,l){return rn(r.geoPointValue.latitude)===rn(l.geoPointValue.latitude)&&rn(r.geoPointValue.longitude)===rn(l.geoPointValue.longitude)}(n,t);case 2:return function(r,l){if("integerValue"in r&&"integerValue"in l)return rn(r.integerValue)===rn(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=rn(r.doubleValue),f=rn(l.doubleValue);return c===f?om(c)===om(f):isNaN(c)&&isNaN(f)}return!1}(n,t);case 9:return Xu(n.arrayValue.values||[],t.arrayValue.values||[],Ir);case 10:case 11:return function(r,l){const c=r.mapValue.fields||{},f=l.mapValue.fields||{};if(RE(c)!==RE(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Ir(c[m],f[m])))return!1;return!0}(n,t);default:return Ht(52216,{left:n})}}function Hh(n,t){return(n.values||[]).find(e=>Ir(e,t))!==void 0}function Qu(n,t){if(n===t)return 0;const e=Vo(n),i=Vo(t);if(e!==i)return Jt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Jt(n.booleanValue,t.booleanValue);case 2:return function(l,c){const f=rn(l.integerValue||l.doubleValue),m=rn(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(n,t);case 3:return IE(n.timestampValue,t.timestampValue);case 4:return IE(Uh(n),Uh(t));case 5:return B_(n.stringValue,t.stringValue);case 6:return function(l,c){const f=No(l),m=No(c);return f.compareTo(m)}(n.bytesValue,t.bytesValue);case 7:return function(l,c){const f=l.split("/"),m=c.split("/");for(let p=0;p<f.length&&p<m.length;p++){const v=Jt(f[p],m[p]);if(v!==0)return v}return Jt(f.length,m.length)}(n.referenceValue,t.referenceValue);case 8:return function(l,c){const f=Jt(rn(l.latitude),rn(c.latitude));return f!==0?f:Jt(rn(l.longitude),rn(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return PE(n.arrayValue,t.arrayValue);case 10:return function(l,c){var f,m,p,v;const E=l.fields||{},S=c.fields||{},R=(f=E[um])===null||f===void 0?void 0:f.arrayValue,P=(m=S[um])===null||m===void 0?void 0:m.arrayValue,k=Jt(((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0,((v=P==null?void 0:P.values)===null||v===void 0?void 0:v.length)||0);return k!==0?k:PE(R,P)}(n.mapValue,t.mapValue);case 11:return function(l,c){if(l===Ad.mapValue&&c===Ad.mapValue)return 0;if(l===Ad.mapValue)return 1;if(c===Ad.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),p=c.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const S=B_(m[E],v[E]);if(S!==0)return S;const R=Qu(f[m[E]],p[v[E]]);if(R!==0)return R}return Jt(m.length,v.length)}(n.mapValue,t.mapValue);default:throw Ht(23264,{Pe:e})}}function IE(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Jt(n,t);const e=Lo(n),i=Lo(t),r=Jt(e.seconds,i.seconds);return r!==0?r:Jt(e.nanos,i.nanos)}function PE(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const l=Qu(e[r],i[r]);if(l)return l}return Jt(e.length,i.length)}function Ju(n){return U_(n)}function U_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=Lo(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return No(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Lt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const l of e.values||[])r?r=!1:i+=",",i+=U_(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",l=!0;for(const c of i)l?l=!1:r+=",",r+=`${c}:${U_(e.fields[c])}`;return r+"}"}(n.mapValue):Ht(61005,{value:n})}function Zd(n){switch(Vo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Fm(n);return t?16+Zd(t):16;case 5:return 2*n.stringValue.length;case 6:return No(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,l)=>r+Zd(l),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return Fo(i.fields,(l,c)=>{r+=l.length+Zd(c)}),r}(n.mapValue);default:throw Ht(13486,{value:n})}}function ME(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function j_(n){return!!n&&"integerValue"in n}function Hy(n){return!!n&&"arrayValue"in n}function OE(n){return!!n&&"nullValue"in n}function kE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wd(n){return!!n&&"mapValue"in n}function BO(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[iA])===null||e===void 0?void 0:e.stringValue)===sA}function xh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Fo(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=xh(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=xh(n.arrayValue.values[e]);return t}return Object.assign({},n)}function UO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===zO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(t){this.value=t}static empty(){return new wi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Wd(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=xh(e)}setAll(t){let e=zn.emptyPath(),i={},r=[];t.forEach((c,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,i,r),i={},r=[],e=f.popLast()}c?i[f.lastSegment()]=xh(c):r.push(f.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,i,r)}delete(t){const e=this.field(t.popLast());Wd(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ir(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Wd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Fo(e,(r,l)=>t[r]=l);for(const r of i)delete t[r]}clone(){return new wi(xh(this.value))}}function rA(n){const t=[];return Fo(n.fields,(e,i)=>{const r=new zn([e]);if(Wd(i)){const l=rA(i.mapValue).fields;if(l.length===0)t.push(r);else for(const c of l)t.push(r.child(c))}else t.push(r)}),new $i(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t,e,i,r,l,c,f){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(t){return new ti(t,0,Zt.min(),Zt.min(),Zt.min(),wi.empty(),0)}static newFoundDocument(t,e,i,r){return new ti(t,1,e,Zt.min(),i,r,0)}static newNoDocument(t,e){return new ti(t,2,e,Zt.min(),Zt.min(),wi.empty(),0)}static newUnknownDocument(t,e){return new ti(t,3,e,Zt.min(),Zt.min(),wi.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=wi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ti&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ti(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(t,e){this.position=t,this.inclusive=e}}function DE(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const l=t[r],c=n.position[r];if(l.field.isKeyField()?i=Lt.comparator(Lt.fromName(c.referenceValue),e.key):i=Qu(c,e.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function LE(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ir(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(t,e="asc"){this.field=t,this.dir=e}}function jO(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{}class dn extends aA{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new FO(t,e,i):e==="array-contains"?new ZO(t,i):e==="in"?new WO(t,i):e==="not-in"?new YO(t,i):e==="array-contains-any"?new KO(t,i):new dn(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new qO(t,i):new GO(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Qu(e,this.value)):e!==null&&Vo(this.value)===Vo(e)&&this.matchesComparison(Qu(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ht(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ws extends aA{constructor(t,e){super(),this.filters=t,this.op=e,this.Te=null}static create(t,e){return new Ws(t,e)}matches(t){return oA(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function oA(n){return n.op==="and"}function lA(n){return HO(n)&&oA(n)}function HO(n){for(const t of n.filters)if(t instanceof Ws)return!1;return!0}function H_(n){if(n instanceof dn)return n.field.canonicalString()+n.op.toString()+Ju(n.value);if(lA(n))return n.filters.map(t=>H_(t)).join(",");{const t=n.filters.map(e=>H_(e)).join(",");return`${n.op}(${t})`}}function uA(n,t){return n instanceof dn?function(i,r){return r instanceof dn&&i.op===r.op&&i.field.isEqual(r.field)&&Ir(i.value,r.value)}(n,t):n instanceof Ws?function(i,r){return r instanceof Ws&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((l,c,f)=>l&&uA(c,r.filters[f]),!0):!1}(n,t):void Ht(19439)}function cA(n){return n instanceof dn?function(e){return`${e.field.canonicalString()} ${e.op} ${Ju(e.value)}`}(n):n instanceof Ws?function(e){return e.op.toString()+" {"+e.getFilters().map(cA).join(" ,")+"}"}(n):"Filter"}class FO extends dn{constructor(t,e,i){super(t,e,i),this.key=Lt.fromName(i.referenceValue)}matches(t){const e=Lt.comparator(t.key,this.key);return this.matchesComparison(e)}}class qO extends dn{constructor(t,e){super(t,"in",e),this.keys=hA("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class GO extends dn{constructor(t,e){super(t,"not-in",e),this.keys=hA("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function hA(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>Lt.fromName(i.referenceValue))}class ZO extends dn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Hy(e)&&Hh(e.arrayValue,this.value)}}class WO extends dn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Hh(this.value.arrayValue,e)}}class YO extends dn{constructor(t,e){super(t,"not-in",e)}matches(t){if(Hh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Hh(this.value.arrayValue,e)}}class KO extends dn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Hy(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Hh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(t,e=null,i=[],r=[],l=null,c=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=l,this.startAt=c,this.endAt=f,this.Ie=null}}function NE(n,t=null,e=[],i=[],r=null,l=null,c=null){return new $O(n,t,e,i,r,l,c)}function Fy(n){const t=Wt(n);if(t.Ie===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>H_(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Hm(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Ju(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Ju(i)).join(",")),t.Ie=e}return t.Ie}function qy(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!jO(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!uA(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!LE(n.startAt,t.startAt)&&LE(n.endAt,t.endAt)}function F_(n){return Lt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(t,e=null,i=[],r=[],l=null,c="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function XO(n,t,e,i,r,l,c,f){return new fc(n,t,e,i,r,l,c,f)}function qm(n){return new fc(n)}function VE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fA(n){return n.collectionGroup!==null}function Rh(n){const t=Wt(n);if(t.Ee===null){t.Ee=[];const e=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),e.add(l.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new bn(zn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(f=f.add(p.field))})}),f})(t).forEach(l=>{e.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new Fh(l,i))}),e.has(zn.keyField().canonicalString())||t.Ee.push(new Fh(zn.keyField(),i))}return t.Ee}function wr(n){const t=Wt(n);return t.de||(t.de=QO(t,Rh(n))),t.de}function QO(n,t){if(n.limitType==="F")return NE(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const l=r.dir==="desc"?"asc":"desc";return new Fh(r.field,l)});const e=n.endAt?new cm(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new cm(n.startAt.position,n.startAt.inclusive):null;return NE(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function q_(n,t){const e=n.filters.concat([t]);return new fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function G_(n,t,e){return new fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Gm(n,t){return qy(wr(n),wr(t))&&n.limitType===t.limitType}function dA(n){return`${Fy(wr(n))}|lt:${n.limitType}`}function Hu(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>cA(r)).join(", ")}]`),Hm(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Ju(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Ju(r)).join(",")),`Target(${i})`}(wr(n))}; limitType=${n.limitType})`}function Zm(n,t){return t.isFoundDocument()&&function(i,r){const l=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Lt.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,t)&&function(i,r){for(const l of Rh(i))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0}(n,t)&&function(i,r){for(const l of i.filters)if(!l.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(c,f,m){const p=DE(c,f,m);return c.inclusive?p<=0:p<0}(i.startAt,Rh(i),r)||i.endAt&&!function(c,f,m){const p=DE(c,f,m);return c.inclusive?p>=0:p>0}(i.endAt,Rh(i),r))}(n,t)}function JO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mA(n){return(t,e)=>{let i=!1;for(const r of Rh(n)){const l=tk(r,t,e);if(l!==0)return l;i=i||r.field.isKeyField()}return 0}}function tk(n,t,e){const i=n.field.isKeyField()?Lt.comparator(t.key,e.key):function(l,c,f){const m=c.data.field(l),p=f.data.field(l);return m!==null&&p!==null?Qu(m,p):Ht(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ht(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,l]of i)if(this.equalsFn(r,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return void(r[l]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Fo(this.inner,(e,i)=>{for(const[r,l]of i)t(r,l)})}isEmpty(){return X1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=new $e(Lt.comparator);function _a(){return ek}const pA=new $e(Lt.comparator);function gh(...n){let t=pA;for(const e of n)t=t.insert(e.key,e);return t}function gA(n){let t=pA;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Ll(){return Ch()}function _A(){return Ch()}function Ch(){return new $l(n=>n.toString(),(n,t)=>n.isEqual(t))}const nk=new $e(Lt.comparator),ik=new bn(Lt.comparator);function oe(...n){let t=ik;for(const e of n)t=t.add(e);return t}const sk=new bn(Jt);function rk(){return sk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:om(t)?"-0":t}}function yA(n){return{integerValue:""+n}}function ak(n,t){return kO(t)?yA(t):Gy(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this._=void 0}}function ok(n,t,e){return n instanceof qh?function(r,l){const c={fields:{[tA]:{stringValue:J1},[nA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&jy(l)&&(l=Fm(l)),l&&(c.fields[eA]=l),{mapValue:c}}(e,t):n instanceof Gh?bA(n,t):n instanceof Zh?TA(n,t):function(r,l){const c=vA(r,l),f=zE(c)+zE(r.Re);return j_(c)&&j_(r.Re)?yA(f):Gy(r.serializer,f)}(n,t)}function lk(n,t,e){return n instanceof Gh?bA(n,t):n instanceof Zh?TA(n,t):e}function vA(n,t){return n instanceof hm?function(i){return j_(i)||function(l){return!!l&&"doubleValue"in l}(i)}(t)?t:{integerValue:0}:null}class qh extends Wm{}class Gh extends Wm{constructor(t){super(),this.elements=t}}function bA(n,t){const e=EA(t);for(const i of n.elements)e.some(r=>Ir(r,i))||e.push(i);return{arrayValue:{values:e}}}class Zh extends Wm{constructor(t){super(),this.elements=t}}function TA(n,t){let e=EA(t);for(const i of n.elements)e=e.filter(r=>!Ir(r,i));return{arrayValue:{values:e}}}class hm extends Wm{constructor(t,e){super(),this.serializer=t,this.Re=e}}function zE(n){return rn(n.integerValue||n.doubleValue)}function EA(n){return Hy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(t,e){this.field=t,this.transform=e}}function ck(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Gh&&r instanceof Gh||i instanceof Zh&&r instanceof Zh?Xu(i.elements,r.elements,Ir):i instanceof hm&&r instanceof hm?Ir(i.Re,r.Re):i instanceof qh&&r instanceof qh}(n.transform,t.transform)}class hk{constructor(t,e){this.version=t,this.transformResults=e}}class qs{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new qs}static exists(t){return new qs(void 0,t)}static updateTime(t){return new qs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Yd(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Ym{}function wA(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new AA(n.key,qs.none()):new of(n.key,n.data,qs.none());{const e=n.data,i=wi.empty();let r=new bn(zn.comparator);for(let l of t.fields)if(!r.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?i.delete(l):i.set(l,c),r=r.add(l)}return new qo(n.key,i,new $i(r.toArray()),qs.none())}}function fk(n,t,e){n instanceof of?function(r,l,c){const f=r.value.clone(),m=UE(r.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,t,e):n instanceof qo?function(r,l,c){if(!Yd(r.precondition,l))return void l.convertToUnknownDocument(c.version);const f=UE(r.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(SA(r)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,t,e):function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function Ih(n,t,e,i){return n instanceof of?function(l,c,f,m){if(!Yd(l.precondition,c))return f;const p=l.value.clone(),v=jE(l.fieldTransforms,m,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof qo?function(l,c,f,m){if(!Yd(l.precondition,c))return f;const p=jE(l.fieldTransforms,m,c),v=c.data;return v.setAll(SA(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(n,t,e,i):function(l,c,f){return Yd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(n,t,e)}function dk(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),l=vA(i.transform,r||null);l!=null&&(e===null&&(e=wi.empty()),e.set(i.field,l))}return e||null}function BE(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Xu(i,r,(l,c)=>ck(l,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class of extends Ym{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class qo extends Ym{constructor(t,e,i,r,l=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function SA(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function UE(n,t,e){const i=new Map;ve(n.length===e.length,32656,{Ve:e.length,me:n.length});for(let r=0;r<e.length;r++){const l=n[r],c=l.transform,f=t.data.field(l.field);i.set(l.field,lk(c,f,e[r]))}return i}function jE(n,t,e){const i=new Map;for(const r of n){const l=r.transform,c=e.data.field(r.field);i.set(r.field,ok(l,c,t))}return i}class AA extends Ym{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mk extends Ym{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(t.key)&&fk(l,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Ih(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Ih(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=_A();return this.mutations.forEach(r=>{const l=t.get(r.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=e.has(r.key)?null:f;const m=wA(c,f);m!==null&&i.set(r.key,m),c.isValidDocument()||c.convertToNoDocument(Zt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),oe())}isEqual(t){return this.batchId===t.batchId&&Xu(this.mutations,t.mutations,(e,i)=>BE(e,i))&&Xu(this.baseMutations,t.baseMutations,(e,i)=>BE(e,i))}}class Zy{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){ve(t.mutations.length===i.length,58842,{fe:t.mutations.length,ge:i.length});let r=function(){return nk}();const l=t.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,i[c].version);return new Zy(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fn,he;function yk(n){switch(n){case gt.OK:return Ht(64938);case gt.CANCELLED:case gt.UNKNOWN:case gt.DEADLINE_EXCEEDED:case gt.RESOURCE_EXHAUSTED:case gt.INTERNAL:case gt.UNAVAILABLE:case gt.UNAUTHENTICATED:return!1;case gt.INVALID_ARGUMENT:case gt.NOT_FOUND:case gt.ALREADY_EXISTS:case gt.PERMISSION_DENIED:case gt.FAILED_PRECONDITION:case gt.ABORTED:case gt.OUT_OF_RANGE:case gt.UNIMPLEMENTED:case gt.DATA_LOSS:return!0;default:return Ht(15467,{code:n})}}function xA(n){if(n===void 0)return ga("GRPC error has no .code"),gt.UNKNOWN;switch(n){case fn.OK:return gt.OK;case fn.CANCELLED:return gt.CANCELLED;case fn.UNKNOWN:return gt.UNKNOWN;case fn.DEADLINE_EXCEEDED:return gt.DEADLINE_EXCEEDED;case fn.RESOURCE_EXHAUSTED:return gt.RESOURCE_EXHAUSTED;case fn.INTERNAL:return gt.INTERNAL;case fn.UNAVAILABLE:return gt.UNAVAILABLE;case fn.UNAUTHENTICATED:return gt.UNAUTHENTICATED;case fn.INVALID_ARGUMENT:return gt.INVALID_ARGUMENT;case fn.NOT_FOUND:return gt.NOT_FOUND;case fn.ALREADY_EXISTS:return gt.ALREADY_EXISTS;case fn.PERMISSION_DENIED:return gt.PERMISSION_DENIED;case fn.FAILED_PRECONDITION:return gt.FAILED_PRECONDITION;case fn.ABORTED:return gt.ABORTED;case fn.OUT_OF_RANGE:return gt.OUT_OF_RANGE;case fn.UNIMPLEMENTED:return gt.UNIMPLEMENTED;case fn.DATA_LOSS:return gt.DATA_LOSS;default:return Ht(39323,{code:n})}}(he=fn||(fn={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new Io([4294967295,4294967295],0);function HE(n){const t=Y1().encode(n),e=new U1;return e.update(t),new Uint8Array(e.digest())}function FE(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Io([e,i],0),new Io([r,l],0)]}class Wy{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new _h(`Invalid padding: ${e}`);if(i<0)throw new _h(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new _h(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new _h(`Invalid padding when bitmap length is 0: ${e}`);this.pe=8*t.length-e,this.ye=Io.fromNumber(this.pe)}we(t,e,i){let r=t.add(e.multiply(Io.fromNumber(i)));return r.compare(vk)===1&&(r=new Io([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const e=HE(t),[i,r]=FE(e);for(let l=0;l<this.hashCount;l++){const c=this.we(i,r,l);if(!this.be(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new Wy(l,r,e);return i.forEach(f=>c.insert(f)),c}insert(t){if(this.pe===0)return;const e=HE(t),[i,r]=FE(e);for(let l=0;l<this.hashCount;l++){const c=this.we(i,r,l);this.Se(c)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class _h extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(t,e,i,r,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,lf.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Km(Zt.min(),r,new $e(Jt),_a(),oe())}}class lf{constructor(t,e,i,r,l){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new lf(i,e,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(t,e,i,r){this.De=t,this.removedTargetIds=e,this.key=i,this.ve=r}}class RA{constructor(t,e){this.targetId=t,this.Ce=e}}class CA{constructor(t,e,i=jn.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class qE{constructor(){this.Fe=0,this.Me=GE(),this.xe=jn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=oe(),e=oe(),i=oe();return this.Me.forEach((r,l)=>{switch(l){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Ht(38017,{changeType:l})}}),new lf(this.xe,this.Oe,t,e,i)}Qe(){this.Ne=!1,this.Me=GE()}$e(t,e){this.Ne=!0,this.Me=this.Me.insert(t,e)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,ve(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class bk{constructor(t){this.ze=t,this.je=new Map,this.He=_a(),this.Je=xd(),this.Ye=xd(),this.Ze=new $e(Jt)}Xe(t){for(const e of t.De)t.ve&&t.ve.isFoundDocument()?this.et(e,t.ve):this.tt(e,t.key,t.ve);for(const e of t.removedTargetIds)this.tt(e,t.key,t.ve)}nt(t){this.forEachTarget(t,e=>{const i=this.rt(e);switch(t.state){case 0:this.it(e)&&i.ke(t.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(t.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(e);break;case 3:this.it(e)&&(i.Ge(),i.ke(t.resumeToken));break;case 4:this.it(e)&&(this.st(e),i.ke(t.resumeToken));break;default:Ht(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.je.forEach((i,r)=>{this.it(r)&&e(r)})}ot(t){const e=t.targetId,i=t.Ce.count,r=this._t(e);if(r){const l=r.target;if(F_(l))if(i===0){const c=new Lt(l.path);this.tt(e,c,ti.newNoDocument(c,Zt.min()))}else ve(i===1,20013,{expectedCount:i});else{const c=this.ut(e);if(c!==i){const f=this.ct(t),m=f?this.lt(f,t,c):1;if(m!==0){this.st(e);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,p)}}}}}ct(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:l=0}=e;let c,f;try{c=No(i).toUint8Array()}catch(m){if(m instanceof Q1)return $u("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Wy(c,r,l)}catch(m){return $u(m instanceof _h?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.pe===0?null:f}lt(t,e,i){return e.Ce.count===i-this.Tt(t,e.targetId)?0:2}Tt(t,e){const i=this.ze.getRemoteKeysForTarget(e);let r=0;return i.forEach(l=>{const c=this.ze.Pt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(f)||(this.tt(e,l,null),r++)}),r}It(t){const e=new Map;this.je.forEach((l,c)=>{const f=this._t(c);if(f){if(l.current&&F_(f.target)){const m=new Lt(f.target.path);this.Et(m).has(c)||this.dt(c,m)||this.tt(c,m,ti.newNoDocument(m,t))}l.Le&&(e.set(c,l.qe()),l.Qe())}});let i=oe();this.Ye.forEach((l,c)=>{let f=!0;c.forEachWhile(m=>{const p=this._t(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.He.forEach((l,c)=>c.setReadTime(t));const r=new Km(t,e,this.Ze,this.He,i);return this.He=_a(),this.Je=xd(),this.Ye=xd(),this.Ze=new $e(Jt),r}et(t,e){if(!this.it(t))return;const i=this.dt(t,e.key)?2:0;this.rt(t).$e(e.key,i),this.He=this.He.insert(e.key,e),this.Je=this.Je.insert(e.key,this.Et(e.key).add(t)),this.Ye=this.Ye.insert(e.key,this.At(e.key).add(t))}tt(t,e,i){if(!this.it(t))return;const r=this.rt(t);this.dt(t,e)?r.$e(e,1):r.Ue(e),this.Ye=this.Ye.insert(e,this.At(e).delete(t)),this.Ye=this.Ye.insert(e,this.At(e).add(t)),i&&(this.He=this.He.insert(e,i))}removeTarget(t){this.je.delete(t)}ut(t){const e=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let e=this.je.get(t);return e||(e=new qE,this.je.set(t,e)),e}At(t){let e=this.Ye.get(t);return e||(e=new bn(Jt),this.Ye=this.Ye.insert(t,e)),e}Et(t){let e=this.Je.get(t);return e||(e=new bn(Jt),this.Je=this.Je.insert(t,e)),e}it(t){const e=this._t(t)!==null;return e||Rt("WatchChangeAggregator","Detected inactive target",t),e}_t(t){const e=this.je.get(t);return e&&e.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new qE),this.ze.getRemoteKeysForTarget(t).forEach(e=>{this.tt(t,e,null)})}dt(t,e){return this.ze.getRemoteKeysForTarget(t).has(e)}}function xd(){return new $e(Lt.comparator)}function GE(){return new $e(Lt.comparator)}const Tk={asc:"ASCENDING",desc:"DESCENDING"},Ek={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wk={and:"AND",or:"OR"};class Sk{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Z_(n,t){return n.useProto3Json||Hm(t)?t:{value:t}}function fm(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function IA(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Ak(n,t){return fm(n,t.toTimestamp())}function Sr(n){return ve(!!n,49232),Zt.fromTimestamp(function(e){const i=Lo(e);return new on(i.seconds,i.nanos)}(n))}function Yy(n,t){return W_(n,t).canonicalString()}function W_(n,t){const e=function(r){return new je(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function PA(n){const t=je.fromString(n);return ve(LA(t),10190,{key:t.toString()}),t}function Y_(n,t){return Yy(n.databaseId,t.path)}function d_(n,t){const e=PA(t);if(e.get(1)!==n.databaseId.projectId)throw new Ct(gt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ct(gt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Lt(OA(e))}function MA(n,t){return Yy(n.databaseId,t)}function xk(n){const t=PA(n);return t.length===4?je.emptyPath():OA(t)}function K_(n){return new je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OA(n){return ve(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ZE(n,t,e){return{name:Y_(n,t),fields:e.value.mapValue.fields}}function Rk(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ht(39313,{state:p})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],l=function(p,v){return p.useProto3Json?(ve(v===void 0||typeof v=="string",58123),jn.fromBase64String(v||"")):(ve(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),jn.fromUint8Array(v||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,f=c&&function(p){const v=p.code===void 0?gt.UNKNOWN:xA(p.code);return new Ct(v,p.message||"")}(c);e=new CA(i,r,l,f||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=d_(n,i.document.name),l=Sr(i.document.updateTime),c=i.document.createTime?Sr(i.document.createTime):Zt.min(),f=new wi({mapValue:{fields:i.document.fields}}),m=ti.newFoundDocument(r,l,c,f),p=i.targetIds||[],v=i.removedTargetIds||[];e=new Kd(p,v,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=d_(n,i.document),l=i.readTime?Sr(i.readTime):Zt.min(),c=ti.newNoDocument(r,l),f=i.removedTargetIds||[];e=new Kd([],f,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=d_(n,i.document),l=i.removedTargetIds||[];e=new Kd([],l,r,null)}else{if(!("filter"in t))return Ht(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:l}=i,c=new _k(r,l),f=i.targetId;e=new RA(f,c)}}return e}function Ck(n,t){let e;if(t instanceof of)e={update:ZE(n,t.key,t.value)};else if(t instanceof AA)e={delete:Y_(n,t.key)};else if(t instanceof qo)e={update:ZE(n,t.key,t.data),updateMask:Vk(t.fieldMask)};else{if(!(t instanceof mk))return Ht(16599,{ft:t.type});e={verify:Y_(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(l,c){const f=c.transform;if(f instanceof qh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Gh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Zh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof hm)return{fieldPath:c.field.canonicalString(),increment:f.Re};throw Ht(20930,{transform:c.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,l){return l.updateTime!==void 0?{updateTime:Ak(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ht(27497)}(n,t.precondition)),e}function Ik(n,t){return n&&n.length>0?(ve(t!==void 0,14353),n.map(e=>function(r,l){let c=r.updateTime?Sr(r.updateTime):Sr(l);return c.isEqual(Zt.min())&&(c=Sr(l)),new hk(c,r.transformResults||[])}(e,t))):[]}function Pk(n,t){return{documents:[MA(n,t.path)]}}function Mk(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=MA(n,r);const l=function(p){if(p.length!==0)return DA(Ws.create(p,"and"))}(t.filters);l&&(e.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(v=>function(S){return{field:Fu(S.field),direction:Dk(S.dir)}}(v))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const f=Z_(n,t.limit);return f!==null&&(e.structuredQuery.limit=f),t.startAt&&(e.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{gt:e,parent:r}}function Ok(n){let t=xk(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){ve(i===1,65062);const v=e.from[0];v.allDescendants?r=v.collectionId:t=t.child(v.collectionId)}let l=[];e.where&&(l=function(E){const S=kA(E);return S instanceof Ws&&lA(S)?S.getFilters():[S]}(e.where));let c=[];e.orderBy&&(c=function(E){return E.map(S=>function(P){return new Fh(qu(P.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(S))}(e.orderBy));let f=null;e.limit&&(f=function(E){let S;return S=typeof E=="object"?E.value:E,Hm(S)?null:S}(e.limit));let m=null;e.startAt&&(m=function(E){const S=!!E.before,R=E.values||[];return new cm(R,S)}(e.startAt));let p=null;return e.endAt&&(p=function(E){const S=!E.before,R=E.values||[];return new cm(R,S)}(e.endAt)),XO(t,r,c,l,f,"F",m,p)}function kk(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ht(28987,{purpose:r})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function kA(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=qu(e.unaryFilter.field);return dn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=qu(e.unaryFilter.field);return dn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qu(e.unaryFilter.field);return dn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=qu(e.unaryFilter.field);return dn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ht(61313);default:return Ht(60726)}}(n):n.fieldFilter!==void 0?function(e){return dn.create(qu(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ht(58110);default:return Ht(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Ws.create(e.compositeFilter.filters.map(i=>kA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ht(1026)}}(e.compositeFilter.op))}(n):Ht(30097,{filter:n})}function Dk(n){return Tk[n]}function Lk(n){return Ek[n]}function Nk(n){return wk[n]}function Fu(n){return{fieldPath:n.canonicalString()}}function qu(n){return zn.fromServerFormat(n.fieldPath)}function DA(n){return n instanceof dn?function(e){if(e.op==="=="){if(kE(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NAN"}};if(OE(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(kE(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NOT_NAN"}};if(OE(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fu(e.field),op:Lk(e.op),value:e.value}}}(n):n instanceof Ws?function(e){const i=e.getFilters().map(r=>DA(r));return i.length===1?i[0]:{compositeFilter:{op:Nk(e.op),filters:i}}}(n):Ht(54877,{filter:n})}function Vk(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function LA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(t,e,i,r,l=Zt.min(),c=Zt.min(),f=jn.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(t){return new wo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(t){this.wt=t}}function Bk(n){const t=Ok({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?G_(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this.Cn=new jk}addToCollectionParentIndex(t,e){return this.Cn.add(e),_t.resolve()}getCollectionParents(t,e){return _t.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return _t.resolve()}deleteFieldIndex(t,e){return _t.resolve()}deleteAllFieldIndexes(t){return _t.resolve()}createTargetIndexes(t,e){return _t.resolve()}getDocumentsMatchingTarget(t,e){return _t.resolve(null)}getIndexType(t,e){return _t.resolve(0)}getFieldIndexes(t,e){return _t.resolve([])}getNextCollectionGroupToUpdate(t){return _t.resolve(null)}getMinOffset(t,e){return _t.resolve(Do.min())}getMinOffsetFromCollectionGroup(t,e){return _t.resolve(Do.min())}updateCollectionGroup(t,e,i){return _t.resolve()}updateIndexEntries(t,e){return _t.resolve()}}class jk{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new bn(je.comparator),l=!r.has(i);return this.index[e]=r.add(i),l}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new bn(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NA=41943040;class Ti{static withCacheSize(t){return new Ti(t,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti.DEFAULT_COLLECTION_PERCENTILE=10,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ti.DEFAULT=new Ti(NA,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ti.DISABLED=new Ti(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new tc(0)}static lr(){return new tc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="LruGarbageCollector",Hk=1048576;function KE([n,t],[e,i]){const r=Jt(n,e);return r===0?Jt(t,i):r}class Fk{constructor(t){this.Er=t,this.buffer=new bn(KE),this.dr=0}Ar(){return++this.dr}Rr(t){const e=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();KE(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class qk{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){Rt(YE,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){hc(e)?Rt(YE,"Ignoring IndexedDB error during garbage collection: ",e):await cc(e)}await this.mr(3e5)})}}class Gk{constructor(t,e){this.gr=t,this.params=e}calculateTargetCount(t,e){return this.gr.pr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return _t.resolve(jm.le);const i=new Fk(e);return this.gr.forEachTarget(t,r=>i.Rr(r.sequenceNumber)).next(()=>this.gr.yr(t,r=>i.Rr(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.gr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.gr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Rt("LruGarbageCollector","Garbage collection skipped; disabled"),_t.resolve(WE)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WE):this.wr(t,e))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,e){let i,r,l,c,f,m,p;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,c=Date.now(),this.nthSequenceNumber(t,r))).next(E=>(i=E,f=Date.now(),this.removeTargets(t,i,e))).next(E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(t,i))).next(E=>(p=Date.now(),ju()<=ae.DEBUG&&Rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${r} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(p-m)+`ms
Total Duration: ${p-v}ms`),_t.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:E})))}}function Zk(n,t){return new Gk(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.changes=new $l(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ti.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?_t.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&Ih(i.mutation,r,$i.empty(),on.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,oe()).next(()=>i))}getLocalViewOfDocuments(t,e,i=oe()){const r=Ll();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(l=>{let c=gh();return l.forEach((f,m)=>{c=c.insert(f,m.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=Ll();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,oe()))}populateOverlays(t,e,i){const r=[];return i.forEach(l=>{e.has(l)||r.push(l)}),this.documentOverlayCache.getOverlays(t,r).next(l=>{l.forEach((c,f)=>{e.set(c,f)})})}computeViews(t,e,i,r){let l=_a();const c=Ch(),f=function(){return Ch()}();return e.forEach((m,p)=>{const v=i.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof qo)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Ih(v.mutation,p,v.mutation.getFieldMask(),on.now())):c.set(p.key,$i.empty())}),this.recalculateAndSaveOverlays(t,l).next(m=>(m.forEach((p,v)=>c.set(p,v)),e.forEach((p,v)=>{var E;return f.set(p,new Yk(v,(E=c.get(p))!==null&&E!==void 0?E:null))}),f))}recalculateAndSaveOverlays(t,e){const i=Ch();let r=new $e((c,f)=>c-f),l=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const f of c)f.keys().forEach(m=>{const p=e.get(m);if(p===null)return;let v=i.get(m)||$i.empty();v=f.applyToLocalView(p,v),i.set(m,v);const E=(r.get(f.batchId)||oe()).add(m);r=r.insert(f.batchId,E)})}).next(()=>{const c=[],f=r.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,v=m.value,E=_A();v.forEach(S=>{if(!l.has(S)){const R=wA(e.get(S),i.get(S));R!==null&&E.set(S,R),l=l.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(t,p,E))}return _t.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(c){return Lt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):fA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-l.size):_t.resolve(Ll());let f=Bh,m=l;return c.next(p=>_t.forEach(p,(v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?_t.resolve():this.remoteDocumentCache.getEntry(t,v).next(S=>{m=m.insert(v,S)}))).next(()=>this.populateOverlays(t,p,l)).next(()=>this.computeViews(t,m,p,oe())).next(v=>({batchId:f,changes:gA(v)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Lt(e)).next(i=>{let r=gh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const l=e.collectionGroup;let c=gh();return this.indexManager.getCollectionParents(t,l).next(f=>_t.forEach(f,m=>{const p=function(E,S){return new fc(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(e,m.child(l));return this.getDocumentsMatchingCollectionQuery(t,p,i,r).next(v=>{v.forEach((E,S)=>{c=c.insert(E,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,r){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,l,r))).next(c=>{l.forEach((m,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,ti.newInvalidDocument(v)))});let f=gh();return c.forEach((m,p)=>{const v=l.get(m);v!==void 0&&Ih(v.mutation,p,$i.empty(),on.now()),Zm(e,p)&&(f=f.insert(m,p))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,e){return _t.resolve(this.kr.get(e))}saveBundleMetadata(t,e){return this.kr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Sr(r.createTime)}}(e)),_t.resolve()}getNamedQuery(t,e){return _t.resolve(this.qr.get(e))}saveNamedQuery(t,e){return this.qr.set(e.name,function(r){return{name:r.name,query:Bk(r.bundledQuery),readTime:Sr(r.readTime)}}(e)),_t.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(){this.overlays=new $e(Lt.comparator),this.Qr=new Map}getOverlay(t,e){return _t.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Ll();return _t.forEach(e,r=>this.getOverlay(t,r).next(l=>{l!==null&&i.set(r,l)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,l)=>{this.St(t,e,l)}),_t.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Qr.get(i);return r!==void 0&&(r.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(i)),_t.resolve()}getOverlaysForCollection(t,e,i){const r=Ll(),l=e.length+1,c=new Lt(e.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&r.set(m.getKey(),m)}return _t.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let l=new $e((p,v)=>p-v);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>i){let v=l.get(p.largestBatchId);v===null&&(v=Ll(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const f=Ll(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,v)=>f.set(p,v)),!(f.size()>=r)););return _t.resolve(f)}St(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.Qr.get(r.largestBatchId).delete(i.key);this.Qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new gk(e,i));let l=this.Qr.get(e);l===void 0&&(l=oe(),this.Qr.set(e,l)),this.Qr.set(e,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.sessionToken=jn.EMPTY_BYTE_STRING}getSessionToken(t){return _t.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,_t.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this.$r=new bn(Pn.Ur),this.Kr=new bn(Pn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,e){const i=new Pn(t,e);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.zr(new Pn(t,e))}jr(t,e){t.forEach(i=>this.removeReference(i,e))}Hr(t){const e=new Lt(new je([])),i=new Pn(e,t),r=new Pn(e,t+1),l=[];return this.Kr.forEachInRange([i,r],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const e=new Lt(new je([])),i=new Pn(e,t),r=new Pn(e,t+1);let l=oe();return this.Kr.forEachInRange([i,r],c=>{l=l.add(c.key)}),l}containsKey(t){const e=new Pn(t,0),i=this.$r.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Pn{constructor(t,e){this.key=t,this.Zr=e}static Ur(t,e){return Lt.comparator(t.key,e.key)||Jt(t.Zr,e.Zr)}static Wr(t,e){return Jt(t.Zr,e.Zr)||Lt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nr=1,this.Xr=new bn(Pn.Ur)}checkEmpty(t){return _t.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new pk(l,e,i,r);this.mutationQueue.push(c);for(const f of r)this.Xr=this.Xr.add(new Pn(f.key,l)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return _t.resolve(c)}lookupMutationBatch(t,e){return _t.resolve(this.ei(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.ti(i),l=r<0?0:r;return _t.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return _t.resolve(this.mutationQueue.length===0?Uy:this.nr-1)}getAllMutationBatches(t){return _t.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Pn(e,0),r=new Pn(e,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([i,r],c=>{const f=this.ei(c.Zr);l.push(f)}),_t.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new bn(Jt);return e.forEach(r=>{const l=new Pn(r,0),c=new Pn(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],f=>{i=i.add(f.Zr)})}),_t.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let l=i;Lt.isDocumentKey(l)||(l=l.child(""));const c=new Pn(new Lt(l),0);let f=new bn(Jt);return this.Xr.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(f=f.add(m.Zr)),!0)},c),_t.resolve(this.ni(f))}ni(t){const e=[];return t.forEach(i=>{const r=this.ei(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){ve(this.ri(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return _t.forEach(e.mutations,r=>{const l=new Pn(r.key,e.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Xr=i})}sr(t){}containsKey(t,e){const i=new Pn(e,0),r=this.Xr.firstAfterOrEqual(i);return _t.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,_t.resolve()}ri(t,e){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const e=this.ti(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(t){this.ii=t,this.docs=function(){return new $e(Lt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),l=r?r.size:0,c=this.ii(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return _t.resolve(i?i.document.mutableCopy():ti.newInvalidDocument(e))}getEntries(t,e){let i=_a();return e.forEach(r=>{const l=this.docs.get(r);i=i.insert(r,l?l.document.mutableCopy():ti.newInvalidDocument(r))}),_t.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let l=_a();const c=e.path,f=new Lt(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||IO(CO(v),i)<=0||(r.has(v.key)||Zm(e,v))&&(l=l.insert(v.key,v.mutableCopy()))}return _t.resolve(l)}getAllFromCollectionGroup(t,e,i,r){Ht(9500)}si(t,e){return _t.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new eD(this)}getSize(t){return _t.resolve(this.size)}}class eD extends Wk{constructor(t){super(),this.Br=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Br.addEntry(t,r)):this.Br.removeEntry(i)}),_t.waitFor(e)}getFromCache(t,e){return this.Br.getEntry(t,e)}getAllFromCache(t,e){return this.Br.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(t){this.persistence=t,this.oi=new $l(e=>Fy(e),qy),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this._i=0,this.ai=new Ky,this.targetCount=0,this.ui=tc.cr()}forEachTarget(t,e){return this.oi.forEach((i,r)=>e(r)),_t.resolve()}getLastRemoteSnapshotVersion(t){return _t.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return _t.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),_t.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this._i&&(this._i=e),_t.resolve()}Tr(t){this.oi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ui=new tc(e),this.highestTargetId=e),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,e){return this.Tr(e),this.targetCount+=1,_t.resolve()}updateTargetData(t,e){return this.Tr(e),_t.resolve()}removeTargetData(t,e){return this.oi.delete(e.target),this.ai.Hr(e.targetId),this.targetCount-=1,_t.resolve()}removeTargets(t,e,i){let r=0;const l=[];return this.oi.forEach((c,f)=>{f.sequenceNumber<=e&&i.get(f.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(t,f.targetId)),r++)}),_t.waitFor(l).next(()=>r)}getTargetCount(t){return _t.resolve(this.targetCount)}getTargetData(t,e){const i=this.oi.get(e)||null;return _t.resolve(i)}addMatchingKeys(t,e,i){return this.ai.Gr(e,i),_t.resolve()}removeMatchingKeys(t,e,i){this.ai.jr(e,i);const r=this.persistence.referenceDelegate,l=[];return r&&e.forEach(c=>{l.push(r.markPotentiallyOrphaned(t,c))}),_t.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.ai.Hr(e),_t.resolve()}getMatchingKeysForTargetId(t,e){const i=this.ai.Yr(e);return _t.resolve(i)}containsKey(t,e){return _t.resolve(this.ai.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(t,e){this.ci={},this.overlays={},this.li=new jm(0),this.hi=!1,this.hi=!0,this.Pi=new Qk,this.referenceDelegate=t(this),this.Ti=new nD(this),this.indexManager=new Uk,this.remoteDocumentCache=function(r){return new tD(r)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new zk(e),this.Ei=new $k(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Xk,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ci[t.toKey()];return i||(i=new Jk(e,this.referenceDelegate),this.ci[t.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,e,i){Rt("MemoryPersistence","Starting transaction:",t);const r=new iD(this.li.next());return this.referenceDelegate.di(),i(r).next(l=>this.referenceDelegate.Ai(r).next(()=>l)).toPromise().then(l=>(r.raiseOnCommittedEvent(),l))}Ri(t,e){return _t.or(Object.values(this.ci).map(i=>()=>i.containsKey(t,e)))}}class iD extends MO{constructor(t){super(),this.currentSequenceNumber=t}}class $y{constructor(t){this.persistence=t,this.Vi=new Ky,this.mi=null}static fi(t){return new $y(t)}get gi(){if(this.mi)return this.mi;throw Ht(60996)}addReference(t,e,i){return this.Vi.addReference(i,e),this.gi.delete(i.toString()),_t.resolve()}removeReference(t,e,i){return this.Vi.removeReference(i,e),this.gi.add(i.toString()),_t.resolve()}markPotentiallyOrphaned(t,e){return this.gi.add(e.toString()),_t.resolve()}removeTarget(t,e){this.Vi.Hr(e.targetId).forEach(r=>this.gi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(l=>this.gi.add(l.toString()))}).next(()=>i.removeTargetData(t,e))}di(){this.mi=new Set}Ai(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _t.forEach(this.gi,i=>{const r=Lt.fromPath(i);return this.pi(t,r).next(l=>{l||e.removeEntry(r,Zt.min())})}).next(()=>(this.mi=null,e.apply(t)))}updateLimboDocument(t,e){return this.pi(t,e).next(i=>{i?this.gi.delete(e.toString()):this.gi.add(e.toString())})}Ii(t){return 0}pi(t,e){return _t.or([()=>_t.resolve(this.Vi.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ri(t,e)])}}class dm{constructor(t,e){this.persistence=t,this.yi=new $l(i=>DO(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=Zk(this,e)}static fi(t,e){return new dm(t,e)}di(){}Ai(t){return _t.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}pr(t){const e=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}br(t){let e=0;return this.yr(t,i=>{e++}).next(()=>e)}yr(t,e){return _t.forEach(this.yi,(i,r)=>this.Dr(t,i,r).next(l=>l?_t.resolve():e(r)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.si(t,c=>this.Dr(t,c,e).next(f=>{f||(i++,l.removeEntry(c,Zt.min()))})).next(()=>l.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.yi.set(e,t.currentSequenceNumber),_t.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.yi.set(i,t.currentSequenceNumber),_t.resolve()}removeReference(t,e,i){return this.yi.set(i,t.currentSequenceNumber),_t.resolve()}updateLimboDocument(t,e){return this.yi.set(e,t.currentSequenceNumber),_t.resolve()}Ii(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Zd(t.data.value)),e}Dr(t,e,i){return _t.or([()=>this.persistence.Ri(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.yi.get(e);return _t.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.ds=i,this.As=r}static Rs(t,e){let i=oe(),r=oe();for(const l of e.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Xy(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return J2()?8:OO(ii())>0?6:4}()}initialize(t,e){this.ys=t,this.indexManager=e,this.Vs=!0}getDocumentsMatchingQuery(t,e,i,r){const l={result:null};return this.ws(t,e).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(t,e,r,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new sD;return this.Ss(t,e,c).next(f=>{if(l.result=f,this.fs)return this.Ds(t,e,c,f.size)})}).next(()=>l.result)}Ds(t,e,i,r){return i.documentReadCount<this.gs?(ju()<=ae.DEBUG&&Rt("QueryEngine","SDK will not create cache indexes for query:",Hu(e),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),_t.resolve()):(ju()<=ae.DEBUG&&Rt("QueryEngine","Query:",Hu(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ps*r?(ju()<=ae.DEBUG&&Rt("QueryEngine","The SDK decides to create cache indexes for query:",Hu(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,wr(e))):_t.resolve())}ws(t,e){if(VE(e))return _t.resolve(null);let i=wr(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=G_(e,null,"F"),i=wr(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(l=>{const c=oe(...l);return this.ys.getDocuments(t,c).next(f=>this.indexManager.getMinOffset(t,i).next(m=>{const p=this.vs(e,f);return this.Cs(e,p,c,m.readTime)?this.ws(t,G_(e,null,"F")):this.Fs(t,p,e,m)}))})))}bs(t,e,i,r){return VE(e)||r.isEqual(Zt.min())?_t.resolve(null):this.ys.getDocuments(t,i).next(l=>{const c=this.vs(e,l);return this.Cs(e,c,i,r)?_t.resolve(null):(ju()<=ae.DEBUG&&Rt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hu(e)),this.Fs(t,c,e,RO(r,Bh)).next(f=>f))})}vs(t,e){let i=new bn(mA(t));return e.forEach((r,l)=>{Zm(t,l)&&(i=i.add(l))}),i}Cs(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(t,e,i){return ju()<=ae.DEBUG&&Rt("QueryEngine","Using full collection scan to execute query:",Hu(e)),this.ys.getDocumentsMatchingQuery(t,e,Do.min(),i)}Fs(t,e,i,r){return this.ys.getDocumentsMatchingQuery(t,i,r).next(l=>(e.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="LocalStore",aD=3e8;class oD{constructor(t,e,i,r){this.persistence=t,this.Ms=e,this.serializer=r,this.xs=new $e(Jt),this.Os=new $l(l=>Fy(l),qy),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(i)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Kk(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.xs))}}function lD(n,t,e,i){return new oD(n,t,e,i)}async function zA(n,t){const e=Wt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(l=>(r=l,e.Ls(t),e.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],f=[];let m=oe();for(const p of r){c.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of l){f.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return e.localDocuments.getDocuments(i,m).next(p=>({ks:p,removedBatchIds:c,addedBatchIds:f}))})})}function uD(n,t){const e=Wt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),l=e.Bs.newChangeBuffer({trackRemovals:!0});return function(f,m,p,v){const E=p.batch,S=E.keys();let R=_t.resolve();return S.forEach(P=>{R=R.next(()=>v.getEntry(m,P)).next(k=>{const D=p.docVersions.get(P);ve(D!==null,48541),k.version.compareTo(D)<0&&(E.applyToRemoteDocument(k,p),k.isValidDocument()&&(k.setReadTime(p.commitVersion),v.addEntry(k)))})}),R.next(()=>f.mutationQueue.removeMutationBatch(m,E))}(e,i,t,l).next(()=>l.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let m=oe();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function BA(n){const t=Wt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ti.getLastRemoteSnapshotVersion(e))}function cD(n,t){const e=Wt(n),i=t.snapshotVersion;let r=e.xs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=e.Bs.newChangeBuffer({trackRemovals:!0});r=e.xs;const f=[];t.targetChanges.forEach((v,E)=>{const S=r.get(E);if(!S)return;f.push(e.Ti.removeMatchingKeys(l,v.removedDocuments,E).next(()=>e.Ti.addMatchingKeys(l,v.addedDocuments,E)));let R=S.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(E)!==null?R=R.withResumeToken(jn.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,i)),r=r.insert(E,R),function(k,D,U){return k.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=aD?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(S,R,v)&&f.push(e.Ti.updateTargetData(l,R))});let m=_a(),p=oe();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(l,v))}),f.push(hD(l,c,t.documentUpdates).next(v=>{m=v.qs,p=v.Qs})),!i.isEqual(Zt.min())){const v=e.Ti.getLastRemoteSnapshotVersion(l).next(E=>e.Ti.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(v)}return _t.waitFor(f).next(()=>c.apply(l)).next(()=>e.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(e.xs=r,l))}function hD(n,t,e){let i=oe(),r=oe();return e.forEach(l=>i=i.add(l)),t.getEntries(n,i).next(l=>{let c=_a();return e.forEach((f,m)=>{const p=l.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(f)),m.isNoDocument()&&m.version.isEqual(Zt.min())?(t.removeEntry(f,m.readTime),c=c.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(m),c=c.insert(f,m)):Rt(Qy,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)}),{qs:c,Qs:r}})}function fD(n,t){const e=Wt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Uy),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function dD(n,t){const e=Wt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Ti.getTargetData(i,t).next(l=>l?(r=l,_t.resolve(r)):e.Ti.allocateTargetId(i).next(c=>(r=new wo(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Ti.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.xs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.xs=e.xs.insert(i.targetId,i),e.Os.set(t,i.targetId)),i})}async function $_(n,t,e){const i=Wt(n),r=i.xs.get(t),l=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!hc(c))throw c;Rt(Qy,`Failed to update sequence numbers for target ${t}: ${c}`)}i.xs=i.xs.remove(t),i.Os.delete(r.target)}function $E(n,t,e){const i=Wt(n);let r=Zt.min(),l=oe();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,v){const E=Wt(m),S=E.Os.get(v);return S!==void 0?_t.resolve(E.xs.get(S)):E.Ti.getTargetData(p,v)}(i,c,wr(t)).next(f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(c,f.targetId).next(m=>{l=m})}).next(()=>i.Ms.getDocumentsMatchingQuery(c,t,e?r:Zt.min(),e?l:oe())).next(f=>(mD(i,JO(t),f),{documents:f,$s:l})))}function mD(n,t,e){let i=n.Ns.get(t)||Zt.min();e.forEach((r,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.Ns.set(t,i)}class XE{constructor(){this.activeTargetIds=rk()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class pD{constructor(){this.xo=new XE,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,e,i){this.Oo[t]=e}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new XE,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="ConnectivityMonitor";class JE{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Rt(QE,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){Rt(QE,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd=null;function X_(){return Rd===null?Rd=function(){return 268435456+Math.round(2147483648*Math.random())}():Rd++,"0x"+Rd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="RestConnection",_D={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yD{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=e+"://"+t.host,this.Wo=`projects/${i}/databases/${r}`,this.Go=this.databaseId.database===lm?`project_id=${i}`:`project_id=${i}&database_id=${r}`}zo(t,e,i,r,l){const c=X_(),f=this.jo(t,e.toUriEncodedString());Rt(m_,`Sending RPC '${t}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(m,r,l);const{host:p}=new URL(f),v=oc(p);return this.Jo(t,f,m,i,v).then(E=>(Rt(m_,`Received RPC '${t}' ${c}: `,E),E),E=>{throw $u(m_,`RPC '${t}' ${c} failed with error: `,E,"url: ",f,"request:",i),E})}Yo(t,e,i,r,l,c){return this.zo(t,e,i,r,l)}Ho(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+uc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,l)=>t[l]=r),i&&i.headers.forEach((r,l)=>t[l]=r)}jo(t,e){const i=_D[t];return`${this.Ko}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="WebChannelConnection";class bD extends yD{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,r,l){const c=X_();return new Promise((f,m)=>{const p=new j1;p.setWithCredentials(!0),p.listenOnce(H1.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Gd.NO_ERROR:const E=p.getResponseJson();Rt(Xn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(E)),f(E);break;case Gd.TIMEOUT:Rt(Xn,`RPC '${t}' ${c} timed out`),m(new Ct(gt.DEADLINE_EXCEEDED,"Request time out"));break;case Gd.HTTP_ERROR:const S=p.getStatus();if(Rt(Xn,`RPC '${t}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const P=R==null?void 0:R.error;if(P&&P.status&&P.message){const k=function(U){const q=U.toLowerCase().replace(/_/g,"-");return Object.values(gt).indexOf(q)>=0?q:gt.UNKNOWN}(P.status);m(new Ct(k,P.message))}else m(new Ct(gt.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new Ct(gt.UNAVAILABLE,"Connection failed."));break;default:Ht(9055,{h_:t,streamId:c,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{Rt(Xn,`RPC '${t}' ${c} completed.`)}});const v=JSON.stringify(r);Rt(Xn,`RPC '${t}' ${c} sending request:`,r),p.send(e,"POST",v,i,15)})}I_(t,e,i){const r=X_(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=G1(),f=q1(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Ho(m.initMessageHeaders,e,i),m.encodeInitMessageHeaders=!0;const v=l.join("");Rt(Xn,`Creating RPC '${t}' stream ${r}: ${v}`,m);const E=c.createWebChannel(v,m);this.E_(E);let S=!1,R=!1;const P=new vD({Zo:D=>{R?Rt(Xn,`Not sending because RPC '${t}' stream ${r} is closed:`,D):(S||(Rt(Xn,`Opening RPC '${t}' stream ${r} transport.`),E.open(),S=!0),Rt(Xn,`RPC '${t}' stream ${r} sending:`,D),E.send(D))},Xo:()=>E.close()}),k=(D,U,q)=>{D.listen(U,Y=>{try{q(Y)}catch(st){setTimeout(()=>{throw st},0)}})};return k(E,ph.EventType.OPEN,()=>{R||(Rt(Xn,`RPC '${t}' stream ${r} transport opened.`),P.__())}),k(E,ph.EventType.CLOSE,()=>{R||(R=!0,Rt(Xn,`RPC '${t}' stream ${r} transport closed`),P.u_(),this.d_(E))}),k(E,ph.EventType.ERROR,D=>{R||(R=!0,$u(Xn,`RPC '${t}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),P.u_(new Ct(gt.UNAVAILABLE,"The operation could not be completed")))}),k(E,ph.EventType.MESSAGE,D=>{var U;if(!R){const q=D.data[0];ve(!!q,16349);const Y=q,st=(Y==null?void 0:Y.error)||((U=Y[0])===null||U===void 0?void 0:U.error);if(st){Rt(Xn,`RPC '${t}' stream ${r} received error:`,st);const Q=st.status;let ht=function(z){const B=fn[z];if(B!==void 0)return xA(B)}(Q),V=st.message;ht===void 0&&(ht=gt.INTERNAL,V="Unknown error status: "+Q+" with message "+st.message),R=!0,P.u_(new Ct(ht,V)),E.close()}else Rt(Xn,`RPC '${t}' stream ${r} received:`,q),P.c_(q)}}),k(f,F1.STAT_EVENT,D=>{D.stat===z_.PROXY?Rt(Xn,`RPC '${t}' stream ${r} detected buffering proxy`):D.stat===z_.NOPROXY&&Rt(Xn,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{P.a_()},0),P}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(e=>e===t)}}function p_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(n){return new Sk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(t,e,i=1e3,r=1.5,l=6e4){this.xi=t,this.timerId=e,this.A_=i,this.R_=r,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const e=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),r=Math.max(0,e-i);r>0&&Rt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="PersistentStream";class jA{constructor(t,e,i,r,l,c,f,m){this.xi=t,this.S_=i,this.D_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new UA(t,e)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,e){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():e&&e.code===gt.RESOURCE_EXHAUSTED?(ga(e.toString()),ga("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):e&&e.code===gt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(e)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),e=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.v_===e&&this.z_(i,r)},i=>{t(()=>{const r=new Ct(gt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(r)})})}z_(t,e){const i=this.G_(this.v_);this.stream=this.H_(t,e),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{i(()=>this.j_(r))}),this.stream.onMessage(r=>{i(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return Rt(tw,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return e=>{this.xi.enqueueAndForget(()=>this.v_===t?e():(Rt(tw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TD extends jA{constructor(t,e,i,r,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=l}H_(t,e){return this.connection.I_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const e=Rk(this.serializer,t),i=function(l){if(!("targetChange"in l))return Zt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Zt.min():c.readTime?Sr(c.readTime):Zt.min()}(t);return this.listener.Y_(e,i)}Z_(t){const e={};e.database=K_(this.serializer),e.addTarget=function(l,c){let f;const m=c.target;if(f=F_(m)?{documents:Pk(l,m)}:{query:Mk(l,m).gt},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=IA(l,c.resumeToken);const p=Z_(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(Zt.min())>0){f.readTime=fm(l,c.snapshotVersion.toTimestamp());const p=Z_(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f}(this.serializer,t);const i=kk(this.serializer,t);i&&(e.labels=i),this.Q_(e)}X_(t){const e={};e.database=K_(this.serializer),e.removeTarget=t,this.Q_(e)}}class ED extends jA{constructor(t,e,i,r,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,e){return this.connection.I_("Write",t,e)}J_(t){return ve(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ve(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){ve(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const e=Ik(t.writeResults,t.commitTime),i=Sr(t.commitTime);return this.listener.ra(i,e)}ia(){const t={};t.database=K_(this.serializer),this.Q_(t)}ta(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>Ck(this.serializer,i))};this.Q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{}class SD extends wD{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new Ct(gt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,e,i,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(t,W_(e,i),r,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ct(gt.UNKNOWN,l.toString())})}Yo(t,e,i,r,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Yo(t,W_(e,i),r,c,f,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ct(gt.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class AD{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ga(e),this.ua=!1):Rt("OnlineStateTracker",e)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl="RemoteStore";class xD{constructor(t,e,i,r,l){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{i.enqueueAndForget(async()=>{Xl(this)&&(Rt(jl,"Restarting streams for network reachability change."),await async function(m){const p=Wt(m);p.da.add(4),await uf(p),p.Va.set("Unknown"),p.da.delete(4),await Xm(p)}(this))})}),this.Va=new AD(i,r)}}async function Xm(n){if(Xl(n))for(const t of n.Aa)await t(!0)}async function uf(n){for(const t of n.Aa)await t(!1)}function HA(n,t){const e=Wt(n);e.Ea.has(t.targetId)||(e.Ea.set(t.targetId,t),nv(e)?ev(e):dc(e).N_()&&tv(e,t))}function Jy(n,t){const e=Wt(n),i=dc(e);e.Ea.delete(t),i.N_()&&FA(e,t),e.Ea.size===0&&(i.N_()?i.k_():Xl(e)&&e.Va.set("Unknown"))}function tv(n,t){if(n.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}dc(n).Z_(t)}function FA(n,t){n.ma.Ke(t),dc(n).X_(t)}function ev(n){n.ma=new bk({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>n.Ea.get(t)||null,Pt:()=>n.datastore.serializer.databaseId}),dc(n).start(),n.Va.ca()}function nv(n){return Xl(n)&&!dc(n).O_()&&n.Ea.size>0}function Xl(n){return Wt(n).da.size===0}function qA(n){n.ma=void 0}async function RD(n){n.Va.set("Online")}async function CD(n){n.Ea.forEach((t,e)=>{tv(n,t)})}async function ID(n,t){qA(n),nv(n)?(n.Va.Pa(t),ev(n)):n.Va.set("Unknown")}async function PD(n,t,e){if(n.Va.set("Online"),t instanceof CA&&t.state===2&&t.cause)try{await async function(r,l){const c=l.cause;for(const f of l.targetIds)r.Ea.has(f)&&(await r.remoteSyncer.rejectListen(f,c),r.Ea.delete(f),r.ma.removeTarget(f))}(n,t)}catch(i){Rt(jl,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await mm(n,i)}else if(t instanceof Kd?n.ma.Xe(t):t instanceof RA?n.ma.ot(t):n.ma.nt(t),!e.isEqual(Zt.min()))try{const i=await BA(n.localStore);e.compareTo(i)>=0&&await function(l,c){const f=l.ma.It(c);return f.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ea.get(p);v&&l.Ea.set(p,v.withResumeToken(m.resumeToken,c))}}),f.targetMismatches.forEach((m,p)=>{const v=l.Ea.get(m);if(!v)return;l.Ea.set(m,v.withResumeToken(jn.EMPTY_BYTE_STRING,v.snapshotVersion)),FA(l,m);const E=new wo(v.target,m,p,v.sequenceNumber);tv(l,E)}),l.remoteSyncer.applyRemoteEvent(f)}(n,e)}catch(i){Rt(jl,"Failed to raise snapshot:",i),await mm(n,i)}}async function mm(n,t,e){if(!hc(t))throw t;n.da.add(1),await uf(n),n.Va.set("Offline"),e||(e=()=>BA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Rt(jl,"Retrying IndexedDB access"),await e(),n.da.delete(1),await Xm(n)})}function GA(n,t){return t().catch(e=>mm(n,e,t))}async function Qm(n){const t=Wt(n),e=zo(t);let i=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:Uy;for(;MD(t);)try{const r=await fD(t.localStore,i);if(r===null){t.Ia.length===0&&e.k_();break}i=r.batchId,OD(t,r)}catch(r){await mm(t,r)}ZA(t)&&WA(t)}function MD(n){return Xl(n)&&n.Ia.length<10}function OD(n,t){n.Ia.push(t);const e=zo(n);e.N_()&&e.ea&&e.ta(t.mutations)}function ZA(n){return Xl(n)&&!zo(n).O_()&&n.Ia.length>0}function WA(n){zo(n).start()}async function kD(n){zo(n).ia()}async function DD(n){const t=zo(n);for(const e of n.Ia)t.ta(e.mutations)}async function LD(n,t,e){const i=n.Ia.shift(),r=Zy.from(i,t,e);await GA(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await Qm(n)}async function ND(n,t){t&&zo(n).ea&&await async function(i,r){if(function(c){return yk(c)&&c!==gt.ABORTED}(r.code)){const l=i.Ia.shift();zo(i).L_(),await GA(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),await Qm(i)}}(n,t),ZA(n)&&WA(n)}async function ew(n,t){const e=Wt(n);e.asyncQueue.verifyOperationInProgress(),Rt(jl,"RemoteStore received new credentials");const i=Xl(e);e.da.add(3),await uf(e),i&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.da.delete(3),await Xm(e)}async function VD(n,t){const e=Wt(n);t?(e.da.delete(2),await Xm(e)):t||(e.da.add(2),await uf(e),e.Va.set("Unknown"))}function dc(n){return n.fa||(n.fa=function(e,i,r){const l=Wt(e);return l.oa(),new TD(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)}(n.datastore,n.asyncQueue,{e_:RD.bind(null,n),n_:CD.bind(null,n),i_:ID.bind(null,n),Y_:PD.bind(null,n)}),n.Aa.push(async t=>{t?(n.fa.L_(),nv(n)?ev(n):n.Va.set("Unknown")):(await n.fa.stop(),qA(n))})),n.fa}function zo(n){return n.ga||(n.ga=function(e,i,r){const l=Wt(e);return l.oa(),new ED(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:kD.bind(null,n),i_:ND.bind(null,n),na:DD.bind(null,n),ra:LD.bind(null,n)}),n.Aa.push(async t=>{t?(n.ga.L_(),await Qm(n)):(await n.ga.stop(),n.Ia.length>0&&(Rt(jl,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t,e,i,r,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=l,this.deferred=new da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,l){const c=Date.now()+i,f=new iv(t,e,c,r,l);return f.start(i),f}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(gt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sv(n,t){if(ga("AsyncQueue",`${t}: ${n}`),hc(n))return new Ct(gt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{static emptySet(t){return new Gu(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||Lt.comparator(e.key,i.key):(e,i)=>Lt.comparator(e.key,i.key),this.keyedMap=gh(),this.sortedSet=new $e(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Gu)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,l=i.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Gu;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this.pa=new $e(Lt.comparator)}track(t){const e=t.doc.key,i=this.pa.get(e);i?t.type!==0&&i.type===3?this.pa=this.pa.insert(e,t):t.type===3&&i.type!==1?this.pa=this.pa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.pa=this.pa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.pa=this.pa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.pa=this.pa.remove(e):t.type===1&&i.type===2?this.pa=this.pa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.pa=this.pa.insert(e,{type:2,doc:t.doc}):Ht(63341,{Vt:t,ya:i}):this.pa=this.pa.insert(e,t)}wa(){const t=[];return this.pa.inorderTraversal((e,i)=>{t.push(i)}),t}}class ec{constructor(t,e,i,r,l,c,f,m,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(t,e,i,r,l){const c=[];return e.forEach(f=>{c.push({type:0,doc:f})}),new ec(t,e,Gu.emptySet(e),c,i,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Gm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class BD{constructor(){this.queries=iw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const r=Wt(e),l=r.queries;r.queries=iw(),l.forEach((c,f)=>{for(const m of f.Sa)m.onError(i)})})(this,new Ct(gt.ABORTED,"Firestore shutting down"))}}function iw(){return new $l(n=>dA(n),Gm)}async function rv(n,t){const e=Wt(n);let i=3;const r=t.query;let l=e.queries.get(r);l?!l.Da()&&t.va()&&(i=2):(l=new zD,i=t.va()?0:1);try{switch(i){case 0:l.ba=await e.onListen(r,!0);break;case 1:l.ba=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const f=sv(c,`Initialization of query '${Hu(t.query)}' failed`);return void t.onError(f)}e.queries.set(r,l),l.Sa.push(t),t.Fa(e.onlineState),l.ba&&t.Ma(l.ba)&&ov(e)}async function av(n,t){const e=Wt(n),i=t.query;let r=3;const l=e.queries.get(i);if(l){const c=l.Sa.indexOf(t);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?r=t.va()?0:1:!l.Da()&&t.va()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function UD(n,t){const e=Wt(n);let i=!1;for(const r of t){const l=r.query,c=e.queries.get(l);if(c){for(const f of c.Sa)f.Ma(r)&&(i=!0);c.ba=r}}i&&ov(e)}function jD(n,t,e){const i=Wt(n),r=i.queries.get(t);if(r)for(const l of r.Sa)l.onError(e);i.queries.delete(t)}function ov(n){n.Ca.forEach(t=>{t.next()})}var Q_,sw;(sw=Q_||(Q_={})).xa="default",sw.Cache="cache";class lv{constructor(t,e,i){this.query=t,this.Oa=e,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new ec(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Na?this.La(t)&&(this.Oa.next(t),e=!0):this.ka(t,this.onlineState)&&(this.qa(t),e=!0),this.Ba=t,e}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let e=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),e=!0),e}ka(t,e){if(!t.fromCache||!this.va())return!0;const i=e!=="Offline";return(!this.options.Qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}La(t){if(t.docChanges.length>0)return!0;const e=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}qa(t){t=ec.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==Q_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(t){this.key=t}}class KA{constructor(t){this.key=t}}class HD{constructor(t,e){this.query=t,this.Ha=e,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=oe(),this.mutatedKeys=oe(),this.Za=mA(t),this.Xa=new Gu(this.Za)}get eu(){return this.Ha}tu(t,e){const i=e?e.nu:new nw,r=e?e.Xa:this.Xa;let l=e?e.mutatedKeys:this.mutatedKeys,c=r,f=!1;const m=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((v,E)=>{const S=r.get(v),R=Zm(this.query,E)?E:null,P=!!S&&this.mutatedKeys.has(S.key),k=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let D=!1;S&&R?S.data.isEqual(R.data)?P!==k&&(i.track({type:3,doc:R}),D=!0):this.ru(S,R)||(i.track({type:2,doc:R}),D=!0,(m&&this.Za(R,m)>0||p&&this.Za(R,p)<0)&&(f=!0)):!S&&R?(i.track({type:0,doc:R}),D=!0):S&&!R&&(i.track({type:1,doc:S}),D=!0,(m||p)&&(f=!0)),D&&(R?(c=c.add(R),l=k?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{Xa:c,nu:i,Cs:f,mutatedKeys:l}}ru(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const c=t.nu.wa();c.sort((v,E)=>function(R,P){const k=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ht(20277,{Vt:D})}};return k(R)-k(P)}(v.type,E.type)||this.Za(v.doc,E.doc)),this.iu(i),r=r!=null&&r;const f=e&&!r?this.su():[],m=this.Ya.size===0&&this.current&&!r?1:0,p=m!==this.Ja;return this.Ja=m,c.length!==0||p?{snapshot:new ec(this.query,t.Xa,l,c,t.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:f}:{ou:f}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new nw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=oe(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const e=[];return t.forEach(i=>{this.Ya.has(i)||e.push(new KA(i))}),this.Ya.forEach(i=>{t.has(i)||e.push(new YA(i))}),e}au(t){this.Ha=t.$s,this.Ya=oe();const e=this.tu(t.documents);return this.applyChanges(e,!0)}uu(){return ec.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const uv="SyncEngine";class FD{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class qD{constructor(t){this.key=t,this.cu=!1}}class GD{constructor(t,e,i,r,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new $l(f=>dA(f),Gm),this.Pu=new Map,this.Tu=new Set,this.Iu=new $e(Lt.comparator),this.Eu=new Map,this.du=new Ky,this.Au={},this.Ru=new Map,this.Vu=tc.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function ZD(n,t,e=!0){const i=ex(n);let r;const l=i.hu.get(t);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.uu()):r=await $A(i,t,e,!0),r}async function WD(n,t){const e=ex(n);await $A(e,t,!0,!1)}async function $A(n,t,e,i){const r=await dD(n.localStore,wr(t)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,e);let f;return i&&(f=await YD(n,t,l,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&HA(n.remoteStore,r),f}async function YD(n,t,e,i,r){n.fu=(E,S,R)=>async function(k,D,U,q){let Y=D.view.tu(U);Y.Cs&&(Y=await $E(k.localStore,D.query,!1).then(({documents:V})=>D.view.tu(V,Y)));const st=q&&q.targetChanges.get(D.targetId),Q=q&&q.targetMismatches.get(D.targetId)!=null,ht=D.view.applyChanges(Y,k.isPrimaryClient,st,Q);return aw(k,D.targetId,ht.ou),ht.snapshot}(n,E,S,R);const l=await $E(n.localStore,t,!0),c=new HD(t,l.$s),f=c.tu(l.documents),m=lf.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),p=c.applyChanges(f,n.isPrimaryClient,m);aw(n,e,p.ou);const v=new FD(t,e,c);return n.hu.set(t,v),n.Pu.has(e)?n.Pu.get(e).push(t):n.Pu.set(e,[t]),p.snapshot}async function KD(n,t,e){const i=Wt(n),r=i.hu.get(t),l=i.Pu.get(r.targetId);if(l.length>1)return i.Pu.set(r.targetId,l.filter(c=>!Gm(c,t))),void i.hu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await $_(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Jy(i.remoteStore,r.targetId),J_(i,r.targetId)}).catch(cc)):(J_(i,r.targetId),await $_(i.localStore,r.targetId,!0))}async function $D(n,t){const e=Wt(n),i=e.hu.get(t),r=e.Pu.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Jy(e.remoteStore,i.targetId))}async function XD(n,t,e){const i=sL(n);try{const r=await function(c,f){const m=Wt(c),p=on.now(),v=f.reduce((R,P)=>R.add(P.key),oe());let E,S;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>{let P=_a(),k=oe();return m.Bs.getEntries(R,v).next(D=>{P=D,P.forEach((U,q)=>{q.isValidDocument()||(k=k.add(U))})}).next(()=>m.localDocuments.getOverlayedDocuments(R,P)).next(D=>{E=D;const U=[];for(const q of f){const Y=dk(q,E.get(q.key).overlayedDocument);Y!=null&&U.push(new qo(q.key,Y,rA(Y.value.mapValue),qs.exists(!0)))}return m.mutationQueue.addMutationBatch(R,p,U,f)}).next(D=>{S=D;const U=D.applyToLocalDocumentSet(E,k);return m.documentOverlayCache.saveOverlays(R,D.batchId,U)})}).then(()=>({batchId:S.batchId,changes:gA(E)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(c,f,m){let p=c.Au[c.currentUser.toKey()];p||(p=new $e(Jt)),p=p.insert(f,m),c.Au[c.currentUser.toKey()]=p}(i,r.batchId,e),await cf(i,r.changes),await Qm(i.remoteStore)}catch(r){const l=sv(r,"Failed to persist write");e.reject(l)}}async function XA(n,t){const e=Wt(n);try{const i=await cD(e.localStore,t);t.targetChanges.forEach((r,l)=>{const c=e.Eu.get(l);c&&(ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.cu=!0:r.modifiedDocuments.size>0?ve(c.cu,14607):r.removedDocuments.size>0&&(ve(c.cu,42227),c.cu=!1))}),await cf(e,i,t)}catch(i){await cc(i)}}function rw(n,t,e){const i=Wt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.hu.forEach((l,c)=>{const f=c.view.Fa(t);f.snapshot&&r.push(f.snapshot)}),function(c,f){const m=Wt(c);m.onlineState=f;let p=!1;m.queries.forEach((v,E)=>{for(const S of E.Sa)S.Fa(f)&&(p=!0)}),p&&ov(m)}(i.eventManager,t),r.length&&i.lu.Y_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function QD(n,t,e){const i=Wt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Eu.get(t),l=r&&r.key;if(l){let c=new $e(Lt.comparator);c=c.insert(l,ti.newNoDocument(l,Zt.min()));const f=oe().add(l),m=new Km(Zt.min(),new Map,new $e(Jt),c,f);await XA(i,m),i.Iu=i.Iu.remove(l),i.Eu.delete(t),cv(i)}else await $_(i.localStore,t,!1).then(()=>J_(i,t,e)).catch(cc)}async function JD(n,t){const e=Wt(n),i=t.batch.batchId;try{const r=await uD(e.localStore,t);JA(e,i,null),QA(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await cf(e,r)}catch(r){await cc(r)}}async function tL(n,t,e){const i=Wt(n);try{const r=await function(c,f){const m=Wt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return m.mutationQueue.lookupMutationBatch(p,f).next(E=>(ve(E!==null,37113),v=E.keys(),m.mutationQueue.removeMutationBatch(p,E))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>m.localDocuments.getDocuments(p,v))})}(i.localStore,t);JA(i,t,e),QA(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await cf(i,r)}catch(r){await cc(r)}}function QA(n,t){(n.Ru.get(t)||[]).forEach(e=>{e.resolve()}),n.Ru.delete(t)}function JA(n,t,e){const i=Wt(n);let r=i.Au[i.currentUser.toKey()];if(r){const l=r.get(t);l&&(e?l.reject(e):l.resolve(),r=r.remove(t)),i.Au[i.currentUser.toKey()]=r}}function J_(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Pu.get(t))n.hu.delete(i),e&&n.lu.gu(i,e);n.Pu.delete(t),n.isPrimaryClient&&n.du.Hr(t).forEach(i=>{n.du.containsKey(i)||tx(n,i)})}function tx(n,t){n.Tu.delete(t.path.canonicalString());const e=n.Iu.get(t);e!==null&&(Jy(n.remoteStore,e),n.Iu=n.Iu.remove(t),n.Eu.delete(e),cv(n))}function aw(n,t,e){for(const i of e)i instanceof YA?(n.du.addReference(i.key,t),eL(n,i)):i instanceof KA?(Rt(uv,"Document no longer in limbo: "+i.key),n.du.removeReference(i.key,t),n.du.containsKey(i.key)||tx(n,i.key)):Ht(19791,{pu:i})}function eL(n,t){const e=t.key,i=e.path.canonicalString();n.Iu.get(e)||n.Tu.has(i)||(Rt(uv,"New document in limbo: "+e),n.Tu.add(i),cv(n))}function cv(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const t=n.Tu.values().next().value;n.Tu.delete(t);const e=new Lt(je.fromString(t)),i=n.Vu.next();n.Eu.set(i,new qD(e)),n.Iu=n.Iu.insert(e,i),HA(n.remoteStore,new wo(wr(qm(e.path)),i,"TargetPurposeLimboResolution",jm.le))}}async function cf(n,t,e){const i=Wt(n),r=[],l=[],c=[];i.hu.isEmpty()||(i.hu.forEach((f,m)=>{c.push(i.fu(m,t,e).then(p=>{var v;if((p||e)&&i.isPrimaryClient){const E=p?!p.fromCache:(v=e==null?void 0:e.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(p){r.push(p);const E=Xy.Rs(m.targetId,p);l.push(E)}}))}),await Promise.all(c),i.lu.Y_(r),await async function(m,p){const v=Wt(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>_t.forEach(p,S=>_t.forEach(S.ds,R=>v.persistence.referenceDelegate.addReference(E,S.targetId,R)).next(()=>_t.forEach(S.As,R=>v.persistence.referenceDelegate.removeReference(E,S.targetId,R)))))}catch(E){if(!hc(E))throw E;Rt(Qy,"Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const R=v.xs.get(S),P=R.snapshotVersion,k=R.withLastLimboFreeSnapshotVersion(P);v.xs=v.xs.insert(S,k)}}}(i.localStore,l))}async function nL(n,t){const e=Wt(n);if(!e.currentUser.isEqual(t)){Rt(uv,"User change. New user:",t.toKey());const i=await zA(e.localStore,t);e.currentUser=t,function(l,c){l.Ru.forEach(f=>{f.forEach(m=>{m.reject(new Ct(gt.CANCELLED,c))})}),l.Ru.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await cf(e,i.ks)}}function iL(n,t){const e=Wt(n),i=e.Eu.get(t);if(i&&i.cu)return oe().add(i.key);{let r=oe();const l=e.Pu.get(t);if(!l)return r;for(const c of l){const f=e.hu.get(c);r=r.unionWith(f.view.eu)}return r}}function ex(n){const t=Wt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=XA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iL.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=QD.bind(null,t),t.lu.Y_=UD.bind(null,t.eventManager),t.lu.gu=jD.bind(null,t.eventManager),t}function sL(n){const t=Wt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=JD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tL.bind(null,t),t}class pm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=$m(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,e){return null}Cu(t,e){return null}Du(t){return lD(this.persistence,new rD,t.initialUser,this.serializer)}Su(t){return new VA($y.fi,this.serializer)}bu(t){return new pD}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pm.provider={build:()=>new pm};class rL extends pm{constructor(t){super(),this.cacheSizeBytes=t}vu(t,e){ve(this.persistence.referenceDelegate instanceof dm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new qk(i,t.asyncQueue,e)}Su(t){const e=this.cacheSizeBytes!==void 0?Ti.withCacheSize(this.cacheSizeBytes):Ti.DEFAULT;return new VA(i=>dm.fi(i,e),this.serializer)}}class ty{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nL.bind(null,this.syncEngine),await VD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new BD}()}createDatastore(t){const e=$m(t.databaseInfo.databaseId),i=function(l){return new bD(l)}(t.databaseInfo);return function(l,c,f,m){return new SD(l,c,f,m)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,l,c,f){return new xD(i,r,l,c,f)}(this.localStore,this.datastore,t.asyncQueue,e=>rw(this.syncEngine,e,0),function(){return JE.C()?new JE:new gD}())}createSyncEngine(t,e){return function(r,l,c,f,m,p,v){const E=new GD(r,l,c,f,m,p);return v&&(E.mu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const l=Wt(r);Rt(jl,"RemoteStore shutting down."),l.da.add(5),await uf(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}ty.provider={build:()=>new ty};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):ga("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="FirestoreClient";class aL{constructor(t,e,i,r,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Jn.UNAUTHENTICATED,this.clientId=K1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{Rt(Bo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(Rt(Bo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=sv(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function g_(n,t){n.asyncQueue.verifyOperationInProgress(),Rt(Bo,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await zA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function ow(n,t){n.asyncQueue.verifyOperationInProgress();const e=await oL(n);Rt(Bo,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>ew(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>ew(t.remoteStore,r)),n._onlineComponents=t}async function oL(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Rt(Bo,"Using user provided OfflineComponentProvider");try{await g_(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===gt.FAILED_PRECONDITION||r.code===gt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;$u("Error using user provided cache. Falling back to memory cache: "+e),await g_(n,new pm)}}else Rt(Bo,"Using default OfflineComponentProvider"),await g_(n,new rL(void 0));return n._offlineComponents}async function nx(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Rt(Bo,"Using user provided OnlineComponentProvider"),await ow(n,n._uninitializedComponentsProvider._online)):(Rt(Bo,"Using default OnlineComponentProvider"),await ow(n,new ty))),n._onlineComponents}function lL(n){return nx(n).then(t=>t.syncEngine)}async function gm(n){const t=await nx(n),e=t.eventManager;return e.onListen=ZD.bind(null,t.syncEngine),e.onUnlisten=KD.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=WD.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=$D.bind(null,t.syncEngine),e}function uL(n,t,e={}){const i=new da;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,p){const v=new hv({next:S=>{v.xu(),c.enqueueAndForget(()=>av(l,E));const R=S.docs.has(f);!R&&S.fromCache?p.reject(new Ct(gt.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&m&&m.source==="server"?p.reject(new Ct(gt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new lv(qm(f.path),v,{includeMetadataChanges:!0,Qa:!0});return rv(l,E)}(await gm(n),n.asyncQueue,t,e,i)),i.promise}function cL(n,t,e={}){const i=new da;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,p){const v=new hv({next:S=>{v.xu(),c.enqueueAndForget(()=>av(l,E)),S.fromCache&&m.source==="server"?p.reject(new Ct(gt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new lv(f,v,{includeMetadataChanges:!0,Qa:!0});return rv(l,E)}(await gm(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(n,t,e){if(!e)throw new Ct(gt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function hL(n,t,e,i){if(t===!0&&i===!0)throw new Ct(gt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function uw(n){if(!Lt.isDocumentKey(n))throw new Ct(gt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cw(n){if(Lt.isDocumentKey(n))throw new Ct(gt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Ht(12329,{type:typeof n})}function Xi(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ct(gt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Jm(n);throw new Ct(gt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="firestore.googleapis.com",hw=!0;class fw{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Ct(gt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rx,this.ssl=hw}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:hw;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=NA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Hk)throw new Ct(gt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}hL("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ix((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ct(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ct(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ct(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class tp{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(gt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ct(gt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fw(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new yO;switch(i.type){case"firstParty":return new EO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ct(gt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=lw.get(e);i&&(Rt("ComponentProvider","Removing Datastore"),lw.delete(e),i.terminate())}(this),Promise.resolve()}}function fL(n,t,e,i={}){var r;n=Xi(n,tp);const l=oc(t),c=n._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),m=`${t}:${e}`;l&&(M1(`https://${m}`),O1("Firestore",!0)),c.host!==rx&&c.host!==m&&$u("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:i});if(!ko(p,f)&&(n._setSettings(p),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=Jn.MOCK_USER;else{v=G2(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new Ct(gt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Jn(S)}n._authCredentials=new vO(new W1(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Go(this.firestore,t,this._query)}}class ei{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Po(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ei(this.firestore,t,this._key)}}class Po extends Go{constructor(t,e,i){super(t,e,qm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ei(this.firestore,null,new Lt(t))}withConverter(t){return new Po(this.firestore,t,this._path)}}function Mo(n,t,...e){if(n=Ke(n),sx("collection","path",t),n instanceof tp){const i=je.fromString(t,...e);return cw(i),new Po(n,null,i)}{if(!(n instanceof ei||n instanceof Po))throw new Ct(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(je.fromString(t,...e));return cw(i),new Po(n.firestore,null,i)}}function Ar(n,t,...e){if(n=Ke(n),arguments.length===1&&(t=K1.newId()),sx("doc","path",t),n instanceof tp){const i=je.fromString(t,...e);return uw(i),new ei(n,null,new Lt(i))}{if(!(n instanceof ei||n instanceof Po))throw new Ct(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(je.fromString(t,...e));return uw(i),new ei(n.firestore,n instanceof Po?n.converter:null,new Lt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="AsyncQueue";class mw{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new UA(this,"async_queue_retry"),this.rc=()=>{const i=p_();i&&Rt(dw,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=t;const e=p_();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const e=p_();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const e=new da;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!hc(t))throw t;Rt(dw,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const e=this.sc.then(()=>(this.ec=!0,t().catch(i=>{throw this.Xu=i,this.ec=!1,ga("INTERNAL UNHANDLED ERROR: ",pw(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=e,e}enqueueAfterDelay(t,e,i){this.oc(),this.nc.indexOf(t)>-1&&(e=0);const r=iv.createAndSchedule(this,t,e,i,l=>this.uc(l));return this.Zu.push(r),r}oc(){this.Xu&&Ht(47125,{cc:pw(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const e of this.Zu)if(e.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Zu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const e=this.Zu.indexOf(t);this.Zu.splice(e,1)}}function pw(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const r=e;for(const l of i)if(l in r&&typeof r[l]=="function")return!0;return!1}(n,["next","error","complete"])}class Uo extends tp{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new mw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new mw(t),this._firestoreClient=void 0,await t}}}function dL(n,t){const e=typeof n=="object"?n:zy(),i=typeof n=="string"?n:lm,r=Kl(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const l=F2("firestore");l&&fL(r,...l)}return r}function ep(n){if(n._terminated)throw new Ct(gt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mL(n),n._firestoreClient}function mL(n){var t,e,i;const r=n._freezeSettings(),l=function(f,m,p,v){return new VO(f,m,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,ix(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new aL(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new nc(jn.fromBase64String(t))}catch(e){throw new Ct(gt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new nc(jn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Ct(gt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ct(gt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ct(gt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Jt(this._lat,t._lat)||Jt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==r[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=/^__.*__$/;class gL{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new qo(t,this.data,this.fieldMask,e,this.fieldTransforms):new of(t,this.data,e,this.fieldTransforms)}}class ax{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new qo(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function ox(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ht(40011,{Ic:n})}}class mv{constructor(t,e,i,r,l,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new mv(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.dc({path:i,Rc:!1});return r.Vc(t),r}mc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.dc({path:i,Rc:!1});return r.Ec(),r}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return _m(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(ox(this.Ic)&&pL.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class _L{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||$m(t)}bc(t,e,i,r=!1){return new mv({Ic:t,methodName:e,wc:i,path:zn.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sp(n){const t=n._freezeSettings(),e=$m(n._databaseId);return new _L(n._databaseId,!!t.ignoreUndefinedProperties,e)}function lx(n,t,e,i,r,l={}){const c=n.bc(l.merge||l.mergeFields?2:0,t,e,r);gv("Data must be an object, but it was:",c,i);const f=ux(i,c);let m,p;if(l.merge)m=new $i(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=ey(t,E,e);if(!c.contains(S))throw new Ct(gt.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);hx(v,S)||v.push(S)}m=new $i(v),p=c.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,p=c.fieldTransforms;return new gL(new wi(f),m,p)}class rp extends ip{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof rp}}class pv extends ip{_toFieldTransform(t){return new uk(t.path,new qh)}isEqual(t){return t instanceof pv}}function yL(n,t,e,i){const r=n.bc(1,t,e);gv("Data must be an object, but it was:",r,i);const l=[],c=wi.empty();Fo(i,(m,p)=>{const v=_v(t,m,e);p=Ke(p);const E=r.mc(v);if(p instanceof rp)l.push(v);else{const S=hf(p,E);S!=null&&(l.push(v),c.set(v,S))}});const f=new $i(l);return new ax(c,f,r.fieldTransforms)}function vL(n,t,e,i,r,l){const c=n.bc(1,t,e),f=[ey(t,i,e)],m=[r];if(l.length%2!=0)throw new Ct(gt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(ey(t,l[S])),m.push(l[S+1]);const p=[],v=wi.empty();for(let S=f.length-1;S>=0;--S)if(!hx(p,f[S])){const R=f[S];let P=m[S];P=Ke(P);const k=c.mc(R);if(P instanceof rp)p.push(R);else{const D=hf(P,k);D!=null&&(p.push(R),v.set(R,D))}}const E=new $i(p);return new ax(v,E,c.fieldTransforms)}function bL(n,t,e,i=!1){return hf(e,n.bc(i?4:3,t))}function hf(n,t){if(cx(n=Ke(n)))return gv("Unsupported field value:",t,n),ux(n,t);if(n instanceof ip)return function(i,r){if(!ox(r.Ic))throw r.gc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(r);l&&r.fieldTransforms.push(l)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(i,r){const l=[];let c=0;for(const f of i){let m=hf(f,r.fc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(n,t)}return function(i,r){if((i=Ke(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ak(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=on.fromDate(i);return{timestampValue:fm(r.serializer,l)}}if(i instanceof on){const l=new on(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:fm(r.serializer,l)}}if(i instanceof fv)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof nc)return{bytesValue:IA(r.serializer,i._byteString)};if(i instanceof ei){const l=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw r.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Yy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof dv)return function(c,f){return{mapValue:{fields:{[iA]:{stringValue:sA},[um]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw f.gc("VectorValues must only contain numeric values.");return Gy(f.serializer,p)})}}}}}}(i,r);throw r.gc(`Unsupported field value: ${Jm(i)}`)}(n,t)}function ux(n,t){const e={};return X1(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fo(n,(i,r)=>{const l=hf(r,t.Ac(i));l!=null&&(e[i]=l)}),{mapValue:{fields:e}}}function cx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof on||n instanceof fv||n instanceof nc||n instanceof ei||n instanceof ip||n instanceof dv)}function gv(n,t,e){if(!cx(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const i=Jm(e);throw i==="an object"?t.gc(n+" a custom object"):t.gc(n+" "+i)}}function ey(n,t,e){if((t=Ke(t))instanceof np)return t._internalPath;if(typeof t=="string")return _v(n,t);throw _m("Field path arguments must be of type string or ",n,!1,void 0,e)}const TL=new RegExp("[~\\*/\\[\\]]");function _v(n,t,e){if(t.search(TL)>=0)throw _m(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new np(...t.split("."))._internalPath}catch{throw _m(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function _m(n,t,e,i,r){const l=i&&!i.isEmpty(),c=r!==void 0;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${r}`),m+=")"),new Ct(gt.INVALID_ARGUMENT,f+n+m)}function hx(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(t,e,i,r,l){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ei(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new EL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(ap("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class EL extends fx{data(){return super.data()}}function ap(n,t){return typeof t=="string"?_v(n,t):t instanceof np?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ct(gt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yv{}class mx extends yv{}function ym(n,t,...e){let i=[];t instanceof yv&&i.push(t),i=i.concat(e),function(l){const c=l.filter(m=>m instanceof vv).length,f=l.filter(m=>m instanceof op).length;if(c>1||c>0&&f>0)throw new Ct(gt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class op extends mx{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new op(t,e,i)}_apply(t){const e=this._parse(t);return px(t._query,e),new Go(t.firestore,t.converter,q_(t._query,e))}_parse(t){const e=sp(t.firestore);return function(l,c,f,m,p,v,E){let S;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ct(gt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){vw(E,v);const P=[];for(const k of E)P.push(yw(m,l,k));S={arrayValue:{values:P}}}else S=yw(m,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||vw(E,v),S=bL(f,c,E,v==="in"||v==="not-in");return dn.create(p,v,S)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function _w(n,t,e){const i=t,r=ap("where",n);return op._create(r,i,e)}class vv extends yv{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new vv(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:Ws.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(r,l){let c=r;const f=l.getFlattenedFilters();for(const m of f)px(c,m),c=q_(c,m)}(t._query,e),new Go(t.firestore,t.converter,q_(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bv extends mx{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new bv(t,e)}_apply(t){const e=function(r,l,c){if(r.startAt!==null)throw new Ct(gt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Ct(gt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fh(l,c)}(t._query,this._field,this._direction);return new Go(t.firestore,t.converter,function(r,l){const c=r.explicitOrderBy.concat([l]);return new fc(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}function wL(n,t="asc"){const e=t,i=ap("orderBy",n);return bv._create(i,e)}function yw(n,t,e){if(typeof(e=Ke(e))=="string"){if(e==="")throw new Ct(gt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fA(t)&&e.indexOf("/")!==-1)throw new Ct(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(je.fromString(e));if(!Lt.isDocumentKey(i))throw new Ct(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ME(n,new Lt(i))}if(e instanceof ei)return ME(n,e._key);throw new Ct(gt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jm(e)}.`)}function vw(n,t){if(!Array.isArray(n)||n.length===0)throw new Ct(gt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function px(n,t){const e=function(r,l){for(const c of r)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new Ct(gt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ct(gt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class SL{convertValue(t,e="none"){switch(Vo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return rn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(No(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Ht(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Fo(t,(r,l)=>{i[r]=this.convertValue(l,e)}),i}convertVectorValue(t){var e,i,r;const l=(r=(i=(e=t.fields)===null||e===void 0?void 0:e[um].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(c=>rn(c.doubleValue));return new dv(l)}convertGeoPoint(t){return new fv(rn(t.latitude),rn(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Fm(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Uh(t));default:return null}}convertTimestamp(t){const e=Lo(t);return new on(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=je.fromString(t);ve(LA(i),9688,{name:t});const r=new jh(i.get(1),i.get(3)),l=new Lt(i.popFirst(5));return r.isEqual(e)||ga(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(n,t,e){let i;return i=n?n.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _x extends fx{constructor(t,e,i,r,l,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new $d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(ap("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class $d extends _x{data(t={}){return super.data(t)}}class yx{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new yh(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new $d(this._firestore,this._userDataWriter,i.key,i,new yh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ct(gt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(f=>{const m=new $d(r._firestore,r._userDataWriter,f.doc.key,f.doc,new yh(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const m=new $d(r._firestore,r._userDataWriter,f.doc.key,f.doc,new yh(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:AL(f.type),doc:m,oldIndex:p,newIndex:v}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function AL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ht(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(n){n=Xi(n,ei);const t=Xi(n.firestore,Uo);return uL(ep(t),n._key).then(e=>vx(t,n,e))}class Tv extends SL{constructor(t){super(),this.firestore=t}convertBytes(t){return new nc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ei(this.firestore,null,e)}}function ny(n){n=Xi(n,Go);const t=Xi(n.firestore,Uo),e=ep(t),i=new Tv(t);return dx(n._query),cL(e,n._query).then(r=>new yx(t,i,n,r))}function xL(n,t,e){n=Xi(n,ei);const i=Xi(n.firestore,Uo),r=gx(n.converter,t);return wv(i,[lx(sp(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,qs.none())])}function Xd(n,t,e,...i){n=Xi(n,ei);const r=Xi(n.firestore,Uo),l=sp(r);let c;return c=typeof(t=Ke(t))=="string"||t instanceof np?vL(l,"updateDoc",n._key,t,e,i):yL(l,"updateDoc",n._key,t),wv(r,[c.toMutation(n._key,qs.exists(!0))])}function Ev(n,t){const e=Xi(n.firestore,Uo),i=Ar(n),r=gx(n.converter,t);return wv(e,[lx(sp(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,qs.exists(!1))]).then(()=>i)}function iy(n,...t){var e,i,r;n=Ke(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof t[c]!="object"||gw(t[c])||(l=t[c],c++);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(gw(t[c])){const E=t[c];t[c]=(e=E.next)===null||e===void 0?void 0:e.bind(E),t[c+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),t[c+2]=(r=E.complete)===null||r===void 0?void 0:r.bind(E)}let m,p,v;if(n instanceof ei)p=Xi(n.firestore,Uo),v=qm(n._key.path),m={next:E=>{t[c]&&t[c](vx(p,n,E))},error:t[c+1],complete:t[c+2]};else{const E=Xi(n,Go);p=Xi(E.firestore,Uo),v=E._query;const S=new Tv(p);m={next:R=>{t[c]&&t[c](new yx(p,S,E,R))},error:t[c+1],complete:t[c+2]},dx(n._query)}return function(S,R,P,k){const D=new hv(k),U=new lv(R,D,P);return S.asyncQueue.enqueueAndForget(async()=>rv(await gm(S),U)),()=>{D.xu(),S.asyncQueue.enqueueAndForget(async()=>av(await gm(S),U))}}(ep(p),v,f,m)}function wv(n,t){return function(i,r){const l=new da;return i.asyncQueue.enqueueAndForget(async()=>XD(await lL(i),r,l)),l.promise}(ep(n),t)}function vx(n,t,e){const i=e.docs.get(t._key),r=new Tv(n);return new _x(n,r,t._key,i,new yh(e.hasPendingWrites,e.fromCache),t.converter)}function RL(){return new pv("serverTimestamp")}(function(t,e=!0){(function(r){uc=r})(lc),Cr(new Zs("firestore",(i,{instanceIdentifier:r,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new Uo(new bO(i.getProvider("auth-internal")),new wO(c,i.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ct(gt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jh(p.options.projectId,v)}(c,r),c);return l=Object.assign({useFetchStreams:e},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),Ts(vE,bE,t),Ts(vE,bE,"esm2017")})();var CL="firebase",IL="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ts(CL,IL,"app");const bx="@firebase/installations",Sv="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=1e4,Ex=`w:${Sv}`,wx="FIS_v2",PL="https://firebaseinstallations.googleapis.com/v1",ML=60*60*1e3,OL="installations",kL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Hl=new Yl(OL,kL,DL);function Sx(n){return n instanceof Xs&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax({projectId:n}){return`${PL}/projects/${n}/installations`}function xx(n){return{token:n.token,requestStatus:2,expiresIn:NL(n.expiresIn),creationTime:Date.now()}}async function Rx(n,t){const i=(await t.json()).error;return Hl.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Cx({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function LL(n,{refreshToken:t}){const e=Cx(n);return e.append("Authorization",VL(t)),e}async function Ix(n){const t=await n();return t.status>=500&&t.status<600?n():t}function NL(n){return Number(n.replace("s","000"))}function VL(n){return`${wx} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zL({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const i=Ax(n),r=Cx(n),l=t.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const c={fid:e,authVersion:wx,appId:n.appId,sdkVersion:Ex},f={method:"POST",headers:r,body:JSON.stringify(c)},m=await Ix(()=>fetch(i,f));if(m.ok){const p=await m.json();return{fid:p.fid||e,registrationStatus:2,refreshToken:p.refreshToken,authToken:xx(p.authToken)}}else throw await Rx("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=/^[cdef][\w-]{21}$/,sy="";function jL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=HL(n);return UL.test(e)?e:sy}catch{return sy}}function HL(n){return BL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=new Map;function Ox(n,t){const e=lp(n);kx(e,t),FL(e,t)}function kx(n,t){const e=Mx.get(n);if(e)for(const i of e)i(t)}function FL(n,t){const e=qL();e&&e.postMessage({key:n,fid:t}),GL()}let Nl=null;function qL(){return!Nl&&"BroadcastChannel"in self&&(Nl=new BroadcastChannel("[Firebase] FID Change"),Nl.onmessage=n=>{kx(n.data.key,n.data.fid)}),Nl}function GL(){Mx.size===0&&Nl&&(Nl.close(),Nl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL="firebase-installations-database",WL=1,Fl="firebase-installations-store";let __=null;function Av(){return __||(__=N1(ZL,WL,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(Fl)}}})),__}async function vm(n,t){const e=lp(n),r=(await Av()).transaction(Fl,"readwrite"),l=r.objectStore(Fl),c=await l.get(e);return await l.put(t,e),await r.done,(!c||c.fid!==t.fid)&&Ox(n,t.fid),t}async function Dx(n){const t=lp(n),i=(await Av()).transaction(Fl,"readwrite");await i.objectStore(Fl).delete(t),await i.done}async function up(n,t){const e=lp(n),r=(await Av()).transaction(Fl,"readwrite"),l=r.objectStore(Fl),c=await l.get(e),f=t(c);return f===void 0?await l.delete(e):await l.put(f,e),await r.done,f&&(!c||c.fid!==f.fid)&&Ox(n,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xv(n){let t;const e=await up(n.appConfig,i=>{const r=YL(i),l=KL(n,r);return t=l.registrationPromise,l.installationEntry});return e.fid===sy?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function YL(n){const t=n||{fid:jL(),registrationStatus:0};return Lx(t)}function KL(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Hl.create("app-offline"));return{installationEntry:t,registrationPromise:r}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=$L(n,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:XL(n)}:{installationEntry:t}}async function $L(n,t){try{const e=await zL(n,t);return vm(n.appConfig,e)}catch(e){throw Sx(e)&&e.customData.serverCode===409?await Dx(n.appConfig):await vm(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function XL(n){let t=await bw(n.appConfig);for(;t.registrationStatus===1;)await Px(100),t=await bw(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:i}=await xv(n);return i||e}return t}function bw(n){return up(n,t=>{if(!t)throw Hl.create("installation-not-found");return Lx(t)})}function Lx(n){return QL(n)?{fid:n.fid,registrationStatus:0}:n}function QL(n){return n.registrationStatus===1&&n.registrationTime+Tx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JL({appConfig:n,heartbeatServiceProvider:t},e){const i=tN(n,e),r=LL(n,e),l=t.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const c={installation:{sdkVersion:Ex,appId:n.appId}},f={method:"POST",headers:r,body:JSON.stringify(c)},m=await Ix(()=>fetch(i,f));if(m.ok){const p=await m.json();return xx(p)}else throw await Rx("Generate Auth Token",m)}function tN(n,{fid:t}){return`${Ax(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rv(n,t=!1){let e;const i=await up(n.appConfig,l=>{if(!Nx(l))throw Hl.create("not-registered");const c=l.authToken;if(!t&&iN(c))return l;if(c.requestStatus===1)return e=eN(n,t),l;{if(!navigator.onLine)throw Hl.create("app-offline");const f=rN(l);return e=nN(n,f),f}});return e?await e:i.authToken}async function eN(n,t){let e=await Tw(n.appConfig);for(;e.authToken.requestStatus===1;)await Px(100),e=await Tw(n.appConfig);const i=e.authToken;return i.requestStatus===0?Rv(n,t):i}function Tw(n){return up(n,t=>{if(!Nx(t))throw Hl.create("not-registered");const e=t.authToken;return aN(e)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function nN(n,t){try{const e=await JL(n,t),i=Object.assign(Object.assign({},t),{authToken:e});return await vm(n.appConfig,i),e}catch(e){if(Sx(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await Dx(n.appConfig);else{const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await vm(n.appConfig,i)}throw e}}function Nx(n){return n!==void 0&&n.registrationStatus===2}function iN(n){return n.requestStatus===2&&!sN(n)}function sN(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+ML}function rN(n){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:t})}function aN(n){return n.requestStatus===1&&n.requestTime+Tx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(n){const t=n,{installationEntry:e,registrationPromise:i}=await xv(t);return i?i.catch(console.error):Rv(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(n,t=!1){const e=n;return await uN(e),(await Rv(e,t)).token}async function uN(n){const{registrationPromise:t}=await xv(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(n){if(!n||!n.options)throw y_("App Configuration");if(!n.name)throw y_("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw y_(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function y_(n){return Hl.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="installations",hN="installations-internal",fN=n=>{const t=n.getProvider("app").getImmediate(),e=cN(t),i=Kl(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},dN=n=>{const t=n.getProvider("app").getImmediate(),e=Kl(t,Vx).getImmediate();return{getId:()=>oN(e),getToken:r=>lN(e,r)}};function mN(){Cr(new Zs(Vx,fN,"PUBLIC")),Cr(new Zs(hN,dN,"PRIVATE"))}mN();Ts(bx,Sv);Ts(bx,Sv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="analytics",pN="firebase_id",gN="origin",_N=60*1e3,yN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new Um("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qi=new Yl("analytics","Analytics",vN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(n){if(!n.startsWith(Cv)){const t=Qi.create("invalid-gtag-resource",{gtagURL:n});return xi.warn(t.message),""}return n}function zx(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function TN(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function EN(n,t){const e=TN("firebase-js-sdk-policy",{createScriptURL:bN}),i=document.createElement("script"),r=`${Cv}?l=${n}&id=${t}`;i.src=e?e==null?void 0:e.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function wN(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function SN(n,t,e,i,r,l){const c=i[r];try{if(c)await t[c];else{const m=(await zx(e)).find(p=>p.measurementId===r);m&&await t[m.appId]}}catch(f){xi.error(f)}n("config",r,l)}async function AN(n,t,e,i,r){try{let l=[];if(r&&r.send_to){let c=r.send_to;Array.isArray(c)||(c=[c]);const f=await zx(e);for(const m of c){const p=f.find(E=>E.measurementId===m),v=p&&t[p.appId];if(v)l.push(v);else{l=[];break}}}l.length===0&&(l=Object.values(t)),await Promise.all(l),n("event",i,r||{})}catch(l){xi.error(l)}}function xN(n,t,e,i){async function r(l,...c){try{if(l==="event"){const[f,m]=c;await AN(n,t,e,f,m)}else if(l==="config"){const[f,m]=c;await SN(n,t,e,i,f,m)}else if(l==="consent"){const[f,m]=c;n("consent",f,m)}else if(l==="get"){const[f,m,p]=c;n("get",f,m,p)}else if(l==="set"){const[f]=c;n("set",f)}else n(l,...c)}catch(f){xi.error(f)}}return r}function RN(n,t,e,i,r){let l=function(...c){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(l=window[r]),window[r]=xN(l,n,t,e),{gtagCore:l,wrappedGtag:window[r]}}function CN(n){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(Cv)&&e.src.includes(n))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=30,PN=1e3;class MN{constructor(t={},e=PN){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Bx=new MN;function ON(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function kN(n){var t;const{appId:e,apiKey:i}=n,r={method:"GET",headers:ON(i)},l=yN.replace("{app-id}",e),c=await fetch(l,r);if(c.status!==200&&c.status!==304){let f="";try{const m=await c.json();!((t=m.error)===null||t===void 0)&&t.message&&(f=m.error.message)}catch{}throw Qi.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function DN(n,t=Bx,e){const{appId:i,apiKey:r,measurementId:l}=n.options;if(!i)throw Qi.create("no-app-id");if(!r){if(l)return{measurementId:l,appId:i};throw Qi.create("no-api-key")}const c=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new VN;return setTimeout(async()=>{f.abort()},_N),Ux({appId:i,apiKey:r,measurementId:l},c,f,t)}async function Ux(n,{throttleEndTimeMillis:t,backoffCount:e},i,r=Bx){var l;const{appId:c,measurementId:f}=n;try{await LN(i,t)}catch(m){if(f)return xi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:c,measurementId:f};throw m}try{const m=await kN(n);return r.deleteThrottleMetadata(c),m}catch(m){const p=m;if(!NN(p)){if(r.deleteThrottleMetadata(c),f)return xi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:c,measurementId:f};throw m}const v=Number((l=p==null?void 0:p.customData)===null||l===void 0?void 0:l.httpStatus)===503?uE(e,r.intervalMillis,IN):uE(e,r.intervalMillis),E={throttleEndTimeMillis:Date.now()+v,backoffCount:e+1};return r.setThrottleMetadata(c,E),xi.debug(`Calling attemptFetch again in ${v} millis`),Ux(n,E,i,r)}}function LN(n,t){return new Promise((e,i)=>{const r=Math.max(t-Date.now(),0),l=setTimeout(e,r);n.addEventListener(()=>{clearTimeout(l),i(Qi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function NN(n){if(!(n instanceof Xs)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class VN{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function zN(n,t,e,i,r){if(r&&r.global){n("event",e,i);return}else{const l=await t,c=Object.assign(Object.assign({},i),{send_to:l});n("event",e,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(){if(Ly())try{await Ny()}catch(n){return xi.warn(Qi.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return xi.warn(Qi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function UN(n,t,e,i,r,l,c){var f;const m=DN(n);m.then(R=>{e[R.measurementId]=R.appId,n.options.measurementId&&R.measurementId!==n.options.measurementId&&xi.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>xi.error(R)),t.push(m);const p=BN().then(R=>{if(R)return i.getId()}),[v,E]=await Promise.all([m,p]);CN(l)||EN(l,v.measurementId),r("js",new Date);const S=(f=c==null?void 0:c.config)!==null&&f!==void 0?f:{};return S[gN]="firebase",S.update=!0,E!=null&&(S[pN]=E),r("config",v.measurementId,S),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(t){this.app=t}_delete(){return delete Ph[this.app.options.appId],Promise.resolve()}}let Ph={},Ew=[];const ww={};let v_="dataLayer",HN="gtag",Sw,jx,Aw=!1;function FN(){const n=[];if(Dy()&&n.push("This is a browser extension environment."),k1()||n.push("Cookies are not available."),n.length>0){const t=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),e=Qi.create("invalid-analytics-context",{errorInfo:t});xi.warn(e.message)}}function qN(n,t,e){FN();const i=n.options.appId;if(!i)throw Qi.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)xi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qi.create("no-api-key");if(Ph[i]!=null)throw Qi.create("already-exists",{id:i});if(!Aw){wN(v_);const{wrappedGtag:l,gtagCore:c}=RN(Ph,Ew,ww,v_,HN);jx=l,Sw=c,Aw=!0}return Ph[i]=UN(n,Ew,ww,t,Sw,v_,e),new jN(n)}function GN(n=zy()){n=Ke(n);const t=Kl(n,bm);return t.isInitialized()?t.getImmediate():ZN(n)}function ZN(n,t={}){const e=Kl(n,bm);if(e.isInitialized()){const r=e.getImmediate();if(ko(t,e.getOptions()))return r;throw Qi.create("already-initialized")}return e.initialize({options:t})}async function WN(){if(Dy()||!k1()||!Ly())return!1;try{return await Ny()}catch{return!1}}function YN(n,t,e,i){n=Ke(n),zN(jx,Ph[n.app.options.appId],t,e,i).catch(r=>xi.error(r))}const xw="@firebase/analytics",Rw="0.10.16";function KN(){Cr(new Zs(bm,(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return qN(i,r,e)},"PUBLIC")),Cr(new Zs("analytics-internal",n,"PRIVATE")),Ts(xw,Rw),Ts(xw,Rw,"esm2017");function n(t){try{const e=t.getProvider(bm).getImmediate();return{logEvent:(i,r,l)=>YN(e,i,r,l)}}catch(e){throw Qi.create("interop-component-reg-failed",{reason:e})}}}KN();function Iv(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e}function Hx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $N=Hx,Fx=new Yl("auth","Firebase",Hx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=new Um("@firebase/auth");function XN(n,...t){Tm.logLevel<=ae.WARN&&Tm.warn(`Auth (${lc}): ${n}`,...t)}function Qd(n,...t){Tm.logLevel<=ae.ERROR&&Tm.error(`Auth (${lc}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(n,...t){throw Mv(n,...t)}function Gs(n,...t){return Mv(n,...t)}function Pv(n,t,e){const i=Object.assign(Object.assign({},$N()),{[t]:e});return new Yl("auth","Firebase",i).create(t,{appName:n.name})}function xr(n){return Pv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qx(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&ws(n,"argument-error"),Pv(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mv(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return Fx.create(n,...t)}function Ut(n,t,...e){if(!n)throw Mv(t,...e)}function ca(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Qd(t),new Error(t)}function ya(n,t){n||ca(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function QN(){return Cw()==="http:"||Cw()==="https:"}function Cw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QN()||Dy()||"connection"in navigator)?navigator.onLine:!0}function tV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(t,e){this.shortDelay=t,this.longDelay=e,ya(e>t,"Short delay should be less than long delay!"),this.isMobile=Y2()||X2()}get(){return JN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(n,t){ya(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ca("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ca("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ca("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iV=new ff(3e4,6e4);function Zo(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function Wo(n,t,e,i,r={}){return Zx(n,r,async()=>{let l={},c={};i&&(t==="GET"?c=i:l={body:JSON.stringify(i)});const f=af(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:t,headers:m},l);return $2()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&oc(n.emulatorConfig.host)&&(p.credentials="include"),Gx.fetch()(await Wx(n,n.config.apiHost,e,f),p)})}async function Zx(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},eV),t);try{const r=new rV(n),l=await Promise.race([e(),r.promise]);r.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Cd(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cd(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Cd(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Cd(n,"user-disabled",c);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Pv(n,v,p);ws(n,v)}}catch(r){if(r instanceof Xs)throw r;ws(n,"network-request-failed",{message:String(r)})}}async function df(n,t,e,i,r={}){const l=await Wo(n,t,e,i,r);return"mfaPendingCredential"in l&&ws(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Wx(n,t,e,i){const r=`${t}${e}?${i}`,l=n,c=l.config.emulator?Ov(n.config,r):`${n.config.apiScheme}://${r}`;return nV.includes(e)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function sV(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Gs(this.auth,"network-request-failed")),iV.get())})}}function Cd(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=Gs(n,t,i);return r.customData._tokenResponse=e,r}function Iw(n){return n!==void 0&&n.enterprise!==void 0}class aV{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return sV(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oV(n,t){return Wo(n,"GET","/v2/recaptchaConfig",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lV(n,t){return Wo(n,"POST","/v1/accounts:delete",t)}async function Em(n,t){return Wo(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function uV(n,t=!1){const e=Ke(n),i=await e.getIdToken(t),r=kv(i);Ut(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const l=typeof r.firebase=="object"?r.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:r,token:i,authTime:Mh(b_(r.auth_time)),issuedAtTime:Mh(b_(r.iat)),expirationTime:Mh(b_(r.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function b_(n){return Number(n)*1e3}function kv(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Qd("JWT malformed, contained fewer than 3 sections"),null;try{const r=R1(e);return r?JSON.parse(r):(Qd("Failed to decode base64 JWT payload"),null)}catch(r){return Qd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Pw(n){const t=kv(n);return Ut(t,"internal-error"),Ut(typeof t.exp<"u","internal-error"),Ut(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wh(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Xs&&cV(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function cV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mh(this.lastLoginAt),this.creationTime=Mh(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yh(n){var t;const e=n.auth,i=await n.getIdToken(),r=await Wh(n,Em(e,{idToken:i}));Ut(r==null?void 0:r.users.length,e,"internal-error");const l=r.users[0];n._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?Yx(l.providerUserInfo):[],f=dV(n.providerData,c),m=n.isAnonymous,p=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),v=m?p:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new ay(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function fV(n){const t=Ke(n);await Yh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function dV(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function Yx(n){return n.map(t=>{var{providerId:e}=t,i=Iv(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(n,t){const e=await Zx(n,{},async()=>{const i=af({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:l}=n.config,c=await Wx(n,r,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&oc(n.emulatorConfig.host)&&(m.credentials="include"),Gx.fetch()(c,m)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function pV(n,t){return Wo(n,"POST","/v2/accounts:revokeToken",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ut(t.idToken,"internal-error"),Ut(typeof t.idToken<"u","internal-error"),Ut(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Pw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Ut(t.length!==0,"internal-error");const e=Pw(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Ut(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:l}=await mV(t,e);this.updateTokensAndExpiration(i,r,Number(l))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:l}=e,c=new Zu;return i&&(Ut(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),r&&(Ut(typeof r=="string","internal-error",{appName:t}),c.accessToken=r),l&&(Ut(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Zu,this.toJSON())}_performRefresh(){return ca("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(n,t){Ut(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Fs{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,l=Iv(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new ay(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const e=await Wh(this,this.stsTokenManager.getToken(this.auth,t));return Ut(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return uV(this,t)}reload(){return fV(this)}_assign(t){this!==t&&(Ut(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Fs(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Yh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ei(this.auth.app))return Promise.reject(xr(this.auth));const t=await this.getIdToken();return await Wh(this,lV(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,l,c,f,m,p,v;const E=(i=e.displayName)!==null&&i!==void 0?i:void 0,S=(r=e.email)!==null&&r!==void 0?r:void 0,R=(l=e.phoneNumber)!==null&&l!==void 0?l:void 0,P=(c=e.photoURL)!==null&&c!==void 0?c:void 0,k=(f=e.tenantId)!==null&&f!==void 0?f:void 0,D=(m=e._redirectEventId)!==null&&m!==void 0?m:void 0,U=(p=e.createdAt)!==null&&p!==void 0?p:void 0,q=(v=e.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:Y,emailVerified:st,isAnonymous:Q,providerData:ht,stsTokenManager:V}=e;Ut(Y&&V,t,"internal-error");const O=Zu.fromJSON(this.name,V);Ut(typeof Y=="string",t,"internal-error"),yo(E,t.name),yo(S,t.name),Ut(typeof st=="boolean",t,"internal-error"),Ut(typeof Q=="boolean",t,"internal-error"),yo(R,t.name),yo(P,t.name),yo(k,t.name),yo(D,t.name),yo(U,t.name),yo(q,t.name);const z=new Fs({uid:Y,auth:t,email:S,emailVerified:st,displayName:E,isAnonymous:Q,photoURL:P,phoneNumber:R,tenantId:k,stsTokenManager:O,createdAt:U,lastLoginAt:q});return ht&&Array.isArray(ht)&&(z.providerData=ht.map(B=>Object.assign({},B))),D&&(z._redirectEventId=D),z}static async _fromIdTokenResponse(t,e,i=!1){const r=new Zu;r.updateFromServerResponse(e);const l=new Fs({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Yh(l),l}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];Ut(r.localId!==void 0,"internal-error");const l=r.providerUserInfo!==void 0?Yx(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!(l!=null&&l.length),f=new Zu;f.updateFromIdToken(i);const m=new Fs({uid:r.localId,auth:t,stsTokenManager:f,isAnonymous:c}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new ay(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=new Map;function ha(n){ya(n instanceof Function,"Expected a class definition");let t=Mw.get(n);return t?(ya(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,Mw.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Kx.type="NONE";const Ow=Kx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(n,t,e){return`firebase:${n}:${t}:${e}`}class Wu{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:l}=this.auth;this.fullUserKey=Jd(this.userKey,r.apiKey,l),this.fullPersistenceKey=Jd("persistence",r.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Em(this.auth,{idToken:t}).catch(()=>{});return e?Fs._fromGetAccountInfoResponse(this.auth,e,t):null}return Fs._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Wu(ha(Ow),t,i);const r=(await Promise.all(e.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=r[0]||ha(Ow);const c=Jd(i,t.config.apiKey,t.name);let f=null;for(const p of e)try{const v=await p._get(c);if(v){let E;if(typeof v=="string"){const S=await Em(t,{idToken:v}).catch(()=>{});if(!S)break;E=await Fs._fromGetAccountInfoResponse(t,S,v)}else E=Fs._fromJSON(t,v);p!==l&&(f=E),l=p;break}}catch{}const m=r.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Wu(l,t,i):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(e.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Wu(l,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Jx(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($x(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(eR(t))return"Blackberry";if(nR(t))return"Webos";if(Xx(t))return"Safari";if((t.includes("chrome/")||Qx(t))&&!t.includes("edge/"))return"Chrome";if(tR(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function $x(n=ii()){return/firefox\//i.test(n)}function Xx(n=ii()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Qx(n=ii()){return/crios\//i.test(n)}function Jx(n=ii()){return/iemobile/i.test(n)}function tR(n=ii()){return/android/i.test(n)}function eR(n=ii()){return/blackberry/i.test(n)}function nR(n=ii()){return/webos/i.test(n)}function Dv(n=ii()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function gV(n=ii()){var t;return Dv(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function _V(){return Q2()&&document.documentMode===10}function iR(n=ii()){return Dv(n)||tR(n)||nR(n)||eR(n)||/windows phone/i.test(n)||Jx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(n,t=[]){let e;switch(n){case"Browser":e=kw(ii());break;case"Worker":e=`${kw(ii())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${lc}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=l=>new Promise((c,f)=>{try{const m=t(l);c(m)}catch(m){f(m)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(n,t={}){return Wo(n,"GET","/v2/passwordPolicy",Zo(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=6;class TV{constructor(t){var e,i,r,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=c.minPasswordLength)!==null&&e!==void 0?e:bV,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,l,c,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(e=m.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(r=m.containsLowercaseLetter)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dw(this),this.idTokenSubscription=new Dw(this),this.beforeStateQueue=new yV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ha(e)),this._initializationPromise=this.queue(async()=>{var i,r,l;if(!this._deleted&&(this.persistenceManager=await Wu.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Em(this,{idToken:t}),i=await Fs._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(Ei(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,f=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(t);(!c||c===f)&&(m!=null&&m.user)&&(r=m.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Yh(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=tV()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ei(this.app))return Promise.reject(xr(this));const e=t?Ke(t):null;return e&&Ut(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Ut(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ei(this.app)?Promise.reject(xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ei(this.app)?Promise.reject(xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ha(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await vV(this),e=new TV(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Yl("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await pV(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ha(t)||this._popupRedirectResolver;Ut(e,this,"argument-error"),this.redirectPersistenceManager=await Wu.create(this,[ha(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ut(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof e=="function"){const m=t.addObserver(e,i,r);return()=>{c=!0,m()}}else{const m=t.addObserver(e);return()=>{c=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=sR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&XN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ea(n){return Ke(n)}class Dw{constructor(t){this.auth=t,this.observer=null,this.addObserver=sM(e=>this.observer=e)}get next(){return Ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wV(n){cp=n}function rR(n){return cp.loadJS(n)}function SV(){return cp.recaptchaEnterpriseScript}function AV(){return cp.gapiScript}function xV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class RV{constructor(){this.enterprise=new CV}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class CV{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const IV="recaptcha-enterprise",aR="NO_RECAPTCHA";class PV{constructor(t){this.type=IV,this.auth=Ea(t)}async verify(t="verify",e=!1){async function i(l){if(!e){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{oV(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new aV(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(m=>{f(m)})})}function r(l,c,f){const m=window.grecaptcha;Iw(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:t}).then(p=>{c(p)}).catch(()=>{c(aR)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RV().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(f=>{if(!e&&Iw(window.grecaptcha))r(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=SV();m.length!==0&&(m+=f),rR(m).then(()=>{r(f,l,c)}).catch(p=>{c(p)})}}).catch(f=>{c(f)})})}}async function Lw(n,t,e,i=!1,r=!1){const l=new PV(n);let c;if(r)c=aR;else try{c=await l.verify(e)}catch{c=await l.verify(e,!0)}const f=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function oy(n,t,e,i,r){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Lw(n,t,e,e==="getOobCode");return i(n,c)}else return i(n,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Lw(n,t,e,e==="getOobCode");return i(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(n,t){const e=Kl(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),l=e.getOptions();if(ko(l,t??{}))return r;ws(r,"already-initialized")}return e.initialize({options:t})}function OV(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(ha);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function kV(n,t,e){const i=Ea(n);Ut(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,l=oR(t),{host:c,port:f}=DV(t),m=f===null?"":`:${f}`,p={url:`${l}//${c}${m}/`},v=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Ut(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ut(ko(p,i.config.emulator)&&ko(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,oc(c)?(M1(`${l}//${c}${m}`),O1("Auth",!0)):LV()}function oR(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function DV(n){const t=oR(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const l=r[1];return{host:l,port:Nw(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Nw(c)}}}function Nw(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function LV(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return ca("not implemented")}_getIdTokenResponse(t){return ca("not implemented")}_linkToIdToken(t,e){return ca("not implemented")}_getReauthenticationResolver(t){return ca("not implemented")}}async function NV(n,t){return Wo(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VV(n,t){return df(n,"POST","/v1/accounts:signInWithPassword",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(n,t){return df(n,"POST","/v1/accounts:signInWithEmailLink",Zo(n,t))}async function BV(n,t){return df(n,"POST","/v1/accounts:signInWithEmailLink",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends Lv{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new Kh(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Kh(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return oy(t,e,"signInWithPassword",VV);case"emailLink":return zV(t,{email:this._email,oobCode:this._password});default:ws(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return oy(t,i,"signUpPassword",NV);case"emailLink":return BV(t,{idToken:e,email:this._email,oobCode:this._password});default:ws(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yu(n,t){return df(n,"POST","/v1/accounts:signInWithIdp",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV="http://localhost";class ql extends Lv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ql(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ws("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r}=e,l=Iv(e,["providerId","signInMethod"]);if(!i||!r)return null;const c=new ql(i,r);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Yu(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Yu(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Yu(t,e)}buildRequest(){const t={requestUri:UV,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=af(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function HV(n){const t=dh(mh(n)).link,e=t?dh(mh(t)).deep_link_id:null,i=dh(mh(n)).deep_link_id;return(i?dh(mh(i)).link:null)||i||e||t||n}class Nv{constructor(t){var e,i,r,l,c,f;const m=dh(mh(t)),p=(e=m.apiKey)!==null&&e!==void 0?e:null,v=(i=m.oobCode)!==null&&i!==void 0?i:null,E=jV((r=m.mode)!==null&&r!==void 0?r:null);Ut(p&&v&&E,"argument-error"),this.apiKey=p,this.operation=E,this.code=v,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(t){const e=HV(t);try{return new Nv(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(){this.providerId=Ql.PROVIDER_ID}static credential(t,e){return Kh._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=Nv.parseLink(e);return Ut(i,"argument-error"),Kh._fromEmailAndCode(t,i.code,i.tenantId)}}Ql.PROVIDER_ID="password";Ql.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ql.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends hp{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends mf{constructor(){super("facebook.com")}static credential(t){return ql._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bo.credentialFromTaggedObject(t)}static credentialFromError(t){return bo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bo.credential(t.oauthAccessToken)}catch{return null}}}bo.FACEBOOK_SIGN_IN_METHOD="facebook.com";bo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends mf{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ql._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Er.credentialFromTaggedObject(t)}static credentialFromError(t){return Er.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Er.credential(e,i)}catch{return null}}}Er.GOOGLE_SIGN_IN_METHOD="google.com";Er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends mf{constructor(){super("github.com")}static credential(t){return ql._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return To.credentialFromTaggedObject(t)}static credentialFromError(t){return To.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return To.credential(t.oauthAccessToken)}catch{return null}}}To.GITHUB_SIGN_IN_METHOD="github.com";To.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends mf{constructor(){super("twitter.com")}static credential(t,e){return ql._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Eo.credentialFromTaggedObject(t)}static credentialFromError(t){return Eo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Eo.credential(e,i)}catch{return null}}}Eo.TWITTER_SIGN_IN_METHOD="twitter.com";Eo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(n,t){return df(n,"POST","/v1/accounts:signUp",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const l=await Fs._fromIdTokenResponse(t,i,r),c=Vw(i);return new va({user:l,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=Vw(i);return new va({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function Vw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(n){var t;if(Ei(n.app))return Promise.reject(xr(n));const e=Ea(n);if(await e._initializationPromise,!((t=e.currentUser)===null||t===void 0)&&t.isAnonymous)return new va({user:e.currentUser,providerId:null,operationType:"signIn"});const i=await lR(e,{returnSecureToken:!0}),r=await va._fromIdTokenResponse(e,"signIn",i,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm extends Xs{constructor(t,e,i,r){var l;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,wm.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new wm(t,e,i,r)}}function cR(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?wm._fromErrorAndOperation(n,l,t,i):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(n){return new Set(n.map(({providerId:t})=>t).filter(t=>!!t))}async function hR(n,t,e=!1){const i=await Wh(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return va._forOperation(n,"link",i)}async function qV(n,t,e){await Yh(t);const i=FV(t.providerData);Ut(i.has(e)===n,t.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(n,t,e=!1){const{auth:i}=n;if(Ei(i.app))return Promise.reject(xr(i));const r="reauthenticate";try{const l=await Wh(n,cR(i,r,t,n),e);Ut(l.idToken,i,"internal-error");const c=kv(l.idToken);Ut(c,i,"internal-error");const{sub:f}=c;return Ut(n.uid===f,i,"user-mismatch"),va._forOperation(n,r,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ws(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(n,t,e=!1){if(Ei(n.app))return Promise.reject(xr(n));const i="signIn",r=await cR(n,i,t),l=await va._fromIdTokenResponse(n,i,r);return e||await n._updateCurrentUser(l.user),l}async function ZV(n,t){return fR(Ea(n),t)}async function WV(n,t){const e=Ke(n);return await qV(!1,e,t.providerId),hR(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(n){const t=Ea(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function YV(n,t,e){if(Ei(n.app))return Promise.reject(xr(n));const i=Ea(n),c=await oy(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lR).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&dR(n),m}),f=await va._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(f.user),f}function zw(n,t,e){return Ei(n.app)?Promise.reject(xr(n)):ZV(Ke(n),Ql.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dR(n),i})}function KV(n,t,e,i){return Ke(n).onIdTokenChanged(t,e,i)}function $V(n,t,e){return Ke(n).beforeAuthStateChanged(t,e)}function Vv(n,t,e,i){return Ke(n).onAuthStateChanged(t,e,i)}function mR(n){return Ke(n).signOut()}const Sm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Sm,"1"),this.storage.removeItem(Sm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=1e3,QV=10;class gR extends pR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);_V()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,QV):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},XV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}gR.type="LOCAL";const JV=gR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R extends pR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}_R.type="SESSION";const yR=_R;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new fp(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:l}=e.data,c=this.handlersMap[r];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const f=Array.from(c).map(async p=>p(e.origin,l)),m=await t4(f);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:m})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const p=zv("",20);r.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:e},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}function n4(n){Rr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function i4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function s4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function r4(){return vR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="firebaseLocalStorageDb",a4=1,Am="firebaseLocalStorage",TR="fbase_key";class pf{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function dp(n,t){return n.transaction([Am],t?"readwrite":"readonly").objectStore(Am)}function o4(){const n=indexedDB.deleteDatabase(bR);return new pf(n).toPromise()}function ly(){const n=indexedDB.open(bR,a4);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Am,{keyPath:TR})}catch(r){e(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Am)?t(i):(i.close(),await o4(),t(await ly()))})})}async function Bw(n,t,e){const i=dp(n,!0).put({[TR]:t,value:e});return new pf(i).toPromise()}async function l4(n,t){const e=dp(n,!1).get(t),i=await new pf(e).toPromise();return i===void 0?null:i.value}function Uw(n,t){const e=dp(n,!0).delete(t);return new pf(e).toPromise()}const u4=800,c4=3;class ER{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ly(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>c4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fp._getInstance(r4()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await i4(),!this.activeServiceWorker)return;this.sender=new e4(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||s4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ly();return await Bw(t,Sm,"1"),await Uw(t,Sm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>Bw(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>l4(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Uw(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const l=dp(r,!1).getAll();return new pf(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:l}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(l)&&(this.notifyListeners(r,l),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ER.type="LOCAL";const h4=ER;new ff(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(n,t){return t?ha(t):(Ut(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv extends Lv{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Yu(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Yu(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Yu(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function f4(n){return fR(n.auth,new Uv(n),n.bypassAuthState)}function d4(n){const{auth:t,user:e}=n;return Ut(e,t,"internal-error"),GV(e,new Uv(n),n.bypassAuthState)}async function m4(n){const{auth:t,user:e}=n;return Ut(e,t,"internal-error"),hR(e,new Uv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(t,e,i,r,l=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:l,error:c,type:f}=t;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:e,sessionId:i,tenantId:l||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return f4;case"linkViaPopup":case"linkViaRedirect":return m4;case"reauthViaPopup":case"reauthViaRedirect":return d4;default:ws(this.auth,"internal-error")}}resolve(t){ya(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ya(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=new ff(2e3,1e4);async function jw(n,t,e){if(Ei(n.app))return Promise.reject(Gs(n,"operation-not-supported-in-this-environment"));const i=Ea(n);qx(n,t,hp);const r=Bv(i,e);return new So(i,"signInViaPopup",t,r).executeNotNull()}async function g4(n,t,e){const i=Ke(n);qx(i.auth,t,hp);const r=Bv(i.auth,e);return new So(i.auth,"linkViaPopup",t,r,i).executeNotNull()}class So extends wR{constructor(t,e,i,r,l){super(t,e,r,l),this.provider=i,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ut(t,this.auth,"internal-error"),t}async onExecution(){ya(this.filter.length===1,"Popup operations only handle one event");const t=zv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Gs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Gs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,p4.get())};t()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="pendingRedirect",tm=new Map;class y4 extends wR{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=tm.get(this.auth._key());if(!t){try{const i=await v4(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}tm.set(this.auth._key(),t)}return this.bypassAuthState||tm.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function v4(n,t){const e=E4(t),i=T4(n);if(!await i._isAvailable())return!1;const r=await i._get(e)==="true";return await i._remove(e),r}function b4(n,t){tm.set(n._key(),t)}function T4(n){return ha(n._redirectPersistence)}function E4(n){return Jd(_4,n.config.apiKey,n.name)}async function w4(n,t,e=!1){if(Ei(n.app))return Promise.reject(xr(n));const i=Ea(n),r=Bv(i,t),c=await new y4(i,r,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=10*60*1e3;class A4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!x4(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!SR(t)){const r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(Gs(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=S4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hw(t))}saveEventToCache(t){this.cachedEventUids.add(Hw(t)),this.lastProcessedEventTime=Date.now()}}function Hw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function SR({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function x4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4(n,t={}){return Wo(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I4=/^https?/;async function P4(n){if(n.config.emulator)return;const{authorizedDomains:t}=await R4(n);for(const e of t)try{if(M4(e))return}catch{}ws(n,"unauthorized-domain")}function M4(n){const t=ry(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!I4.test(e))return!1;if(C4.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=new ff(3e4,6e4);function Fw(){const n=Rr().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function k4(n){return new Promise((t,e)=>{var i,r,l;function c(){Fw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Fw(),e(Gs(n,"network-request-failed"))},timeout:O4.get()})}if(!((r=(i=Rr().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((l=Rr().gapi)===null||l===void 0)&&l.load)c();else{const f=xV("iframefcb");return Rr()[f]=()=>{gapi.load?c():e(Gs(n,"network-request-failed"))},rR(`${AV()}?onload=${f}`).catch(m=>e(m))}}).catch(t=>{throw em=null,t})}let em=null;function D4(n){return em=em||k4(n),em}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=new ff(5e3,15e3),N4="__/auth/iframe",V4="emulator/auth/iframe",z4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U4(n){const t=n.config;Ut(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Ov(t,V4):`https://${n.config.authDomain}/${N4}`,i={apiKey:t.apiKey,appName:n.name,v:lc},r=B4.get(n.config.apiHost);r&&(i.eid=r);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${e}?${af(i).slice(1)}`}async function j4(n){const t=await D4(n),e=Rr().gapi;return Ut(e,n,"internal-error"),t.open({where:document.body,url:U4(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z4,dontclear:!0},i=>new Promise(async(r,l)=>{await i.restyle({setHideOnLeave:!1});const c=Gs(n,"network-request-failed"),f=Rr().setTimeout(()=>{l(c)},L4.get());function m(){Rr().clearTimeout(f),r(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F4=500,q4=600,G4="_blank",Z4="http://localhost";class qw{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function W4(n,t,e,i=F4,r=q4){const l=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m=Object.assign(Object.assign({},H4),{width:i.toString(),height:r.toString(),top:l,left:c}),p=ii().toLowerCase();e&&(f=Qx(p)?G4:e),$x(p)&&(t=t||Z4,m.scrollbars="yes");const v=Object.entries(m).reduce((S,[R,P])=>`${S}${R}=${P},`,"");if(gV(p)&&f!=="_self")return Y4(t||"",f),new qw(null);const E=window.open(t||"",f,v);Ut(E,n,"popup-blocked");try{E.focus()}catch{}return new qw(E)}function Y4(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4="__/auth/handler",$4="emulator/auth/handler",X4=encodeURIComponent("fac");async function Gw(n,t,e,i,r,l){Ut(n.config.authDomain,n,"auth-domain-config-required"),Ut(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:lc,eventId:r};if(t instanceof hp){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",iM(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(t instanceof mf){const v=t.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const m=await n._getAppCheckToken(),p=m?`#${X4}=${encodeURIComponent(m)}`:"";return`${Q4(n)}?${af(f).slice(1)}${p}`}function Q4({config:n}){return n.emulator?Ov(n,$4):`https://${n.authDomain}/${K4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="webStorageSupport";class J4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yR,this._completeRedirectFn=w4,this._overrideRedirectResult=b4}async _openPopup(t,e,i,r){var l;ya((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Gw(t,e,i,ry(),r);return W4(t,c,zv())}async _openRedirect(t,e,i,r){await this._originValidation(t);const l=await Gw(t,e,i,ry(),r);return n4(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:l}=this.eventManagers[e];return r?Promise.resolve(r):(ya(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await j4(t),i=new A4(t);return e.register("authEvent",r=>(Ut(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(T_,{type:T_},r=>{var l;const c=(l=r==null?void 0:r[0])===null||l===void 0?void 0:l[T_];c!==void 0&&e(!!c),ws(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=P4(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return iR()||Xx()||Dv()}}const t3=J4;var Zw="@firebase/auth",Ww="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i3(n){Cr(new Zs("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Ut(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sR(n)},p=new EV(i,r,l,m);return OV(p,e),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Cr(new Zs("auth-internal",t=>{const e=Ea(t.getProvider("auth").getImmediate());return(i=>new e3(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ts(Zw,Ww,n3(n)),Ts(Zw,Ww,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=5*60,r3=P1("authIdTokenMaxAge")||s3;let Yw=null;const a3=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>r3)return;const r=e==null?void 0:e.token;Yw!==r&&(Yw=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function mp(n=zy()){const t=Kl(n,"auth");if(t.isInitialized())return t.getImmediate();const e=MV(n,{popupRedirectResolver:t3,persistence:[h4,JV,yR]}),i=P1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=a3(l.toString());$V(e,c,()=>c(e.currentUser)),KV(e,f=>c(f))}}const r=C1("auth");return r&&kV(e,`http://${r}`),e}function o3(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}wV({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const l=Gs("internal-error");l.customData=r,e(l)},i.type="text/javascript",i.charset="UTF-8",o3().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i3("Browser");const l3={apiKey:"AIzaSyB34vwxqdgDvGctHQfEfrBJSk04a1rzQgg",authDomain:"tapasradar.firebaseapp.com",projectId:"tapasradar",storageBucket:"tapasradar.appspot.com",messagingSenderId:"164963298374",appId:"1:164963298374:web:5e29f30e084ede3ecdae47",measurementId:"G-0GS8PM4XGB"},jv=V1(l3);WN().then(n=>{n&&GN(jv)});const Kw=mp(jv),Bn=dL(jv);delete w1.Icon.Default.prototype._getIconUrl;w1.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png"});const u3=()=>{const[n,t]=K.useState([]),e=[40.4168,-3.7038];return K.useEffect(()=>{(async()=>{const r=await ny(Mo(Bn,"bars")),l=[];for(const c of r.docs){const f=c.data(),p=(await ny(Mo(Bn,`bars/${c.id}/comments`))).docs.map(E=>E.data()),v=p.length>0?p.reduce((E,S)=>E+S.rating,0)/p.length:null;l.push({id:c.id,nom:f.nom,lat:f.lat,lng:f.lng,note:v??null})}t(l)})()},[]),it.jsxs("div",{className:"container",children:[it.jsx(sf,{}),it.jsx("h2",{className:"title",children:"Mapa de bares en Madrid"}),it.jsx("div",{className:"map",children:it.jsxs(M2,{center:e,zoom:13,style:{height:"100%",width:"100%"},children:[it.jsx(D2,{attribution:'© <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map(i=>it.jsx(O2,{position:[i.lat,i.lng],children:it.jsxs(k2,{children:[it.jsx("strong",{children:i.nom}),it.jsx("br",{}),i.note!==null?`⭐ ${i.note.toFixed(1)} / 5`:"Sin valoraciones",it.jsx("br",{}),it.jsx(ua,{to:`/bar/${i.id}`,children:"Ver ficha"})]})},i.id))]})}),it.jsx(ua,{to:"/",className:"back-link",children:"Volver al inicio"})]})},c3=()=>{const[n,t]=K.useState([]),[e,i]=K.useState(!0);return K.useEffect(()=>{const l=ym(Mo(Bn,"bars")),c=iy(l,f=>{const m=f.docs.map(p=>({id:p.id,...p.data()}));console.log("Bars récupérés :",m),t(m),i(!1)});return()=>c()},[]),{bars:n,ajouterBar:async l=>{await Ev(Mo(Bn,"bars"),l)},loading:e}};function AR(n){var t,e,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(t=0;t<r;t++)n[t]&&(e=AR(n[t]))&&(i&&(i+=" "),i+=e)}else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function zl(){for(var n,t,e=0,i="",r=arguments.length;e<r;e++)(n=arguments[e])&&(t=AR(n))&&(i&&(i+=" "),i+=t);return i}function h3(n){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e),e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}h3(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var gf=n=>typeof n=="number"&&!isNaN(n),Gl=n=>typeof n=="string",ba=n=>typeof n=="function",f3=n=>Gl(n)||gf(n),uy=n=>Gl(n)||ba(n)?n:null,d3=(n,t)=>n===!1||gf(n)&&n>0?n:t,cy=n=>K.isValidElement(n)||Gl(n)||ba(n)||gf(n);function m3(n,t,e=300){let{scrollHeight:i,style:r}=n;requestAnimationFrame(()=>{r.minHeight="initial",r.height=i+"px",r.transition=`all ${e}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,e)})})}function p3({enter:n,exit:t,appendPosition:e=!1,collapse:i=!0,collapseDuration:r=300}){return function({children:l,position:c,preventExitTransition:f,done:m,nodeRef:p,isIn:v,playToast:E}){let S=e?`${n}--${c}`:n,R=e?`${t}--${c}`:t,P=K.useRef(0);return K.useLayoutEffect(()=>{let k=p.current,D=S.split(" "),U=q=>{q.target===p.current&&(E(),k.removeEventListener("animationend",U),k.removeEventListener("animationcancel",U),P.current===0&&q.type!=="animationcancel"&&k.classList.remove(...D))};k.classList.add(...D),k.addEventListener("animationend",U),k.addEventListener("animationcancel",U)},[]),K.useEffect(()=>{let k=p.current,D=()=>{k.removeEventListener("animationend",D),i?m3(k,m,r):m()};v||(f?D():(P.current=1,k.className+=` ${R}`,k.addEventListener("animationend",D)))},[v]),ge.createElement(ge.Fragment,null,l)}}function $w(n,t){return{content:xR(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:t}}function xR(n,t,e=!1){return K.isValidElement(n)&&!Gl(n.type)?K.cloneElement(n,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:e}):ba(n)?n({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:e}):n}function g3({closeToast:n,theme:t,ariaLabel:e="close"}){return ge.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:i=>{i.stopPropagation(),n(!0)},"aria-label":e},ge.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ge.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function _3({delay:n,isRunning:t,closeToast:e,type:i="default",hide:r,className:l,controlledProgress:c,progress:f,rtl:m,isIn:p,theme:v}){let E=r||c&&f===0,S={animationDuration:`${n}ms`,animationPlayState:t?"running":"paused"};c&&(S.transform=`scaleX(${f})`);let R=zl("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${v}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":m}),P=ba(l)?l({rtl:m,type:i,defaultClassName:R}):zl(R,l),k={[c&&f>=1?"onTransitionEnd":"onAnimationEnd"]:c&&f<1?null:()=>{p&&e()}};return ge.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":E},ge.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${v} Toastify__progress-bar--${i}`}),ge.createElement("div",{role:"progressbar","aria-hidden":E?"true":"false","aria-label":"notification timer",className:P,style:S,...k}))}var y3=1,RR=()=>`${y3++}`;function v3(n,t,e){let i=1,r=0,l=[],c=[],f=t,m=new Map,p=new Set,v=q=>(p.add(q),()=>p.delete(q)),E=()=>{c=Array.from(m.values()),p.forEach(q=>q())},S=({containerId:q,toastId:Y,updateId:st})=>{let Q=q?q!==n:n!==1,ht=m.has(Y)&&st==null;return Q||ht},R=(q,Y)=>{m.forEach(st=>{var Q;(Y==null||Y===st.props.toastId)&&((Q=st.toggle)==null||Q.call(st,q))})},P=q=>{var Y,st;(st=(Y=q.props)==null?void 0:Y.onClose)==null||st.call(Y,q.removalReason),q.isActive=!1},k=q=>{if(q==null)m.forEach(P);else{let Y=m.get(q);Y&&P(Y)}E()},D=()=>{r-=l.length,l=[]},U=q=>{var Y,st;let{toastId:Q,updateId:ht}=q.props,V=ht==null;q.staleId&&m.delete(q.staleId),q.isActive=!0,m.set(Q,q),E(),e($w(q,V?"added":"updated")),V&&((st=(Y=q.props).onOpen)==null||st.call(Y))};return{id:n,props:f,observe:v,toggle:R,removeToast:k,toasts:m,clearQueue:D,buildToast:(q,Y)=>{if(S(Y))return;let{toastId:st,updateId:Q,data:ht,staleId:V,delay:O}=Y,z=Q==null;z&&r++;let B={...f,style:f.toastStyle,key:i++,...Object.fromEntries(Object.entries(Y).filter(([G,F])=>F!=null)),toastId:st,updateId:Q,data:ht,isIn:!1,className:uy(Y.className||f.toastClassName),progressClassName:uy(Y.progressClassName||f.progressClassName),autoClose:Y.isLoading?!1:d3(Y.autoClose,f.autoClose),closeToast(G){m.get(st).removalReason=G,k(st)},deleteToast(){let G=m.get(st);if(G!=null){if(e($w(G,"removed")),m.delete(st),r--,r<0&&(r=0),l.length>0){U(l.shift());return}E()}}};B.closeButton=f.closeButton,Y.closeButton===!1||cy(Y.closeButton)?B.closeButton=Y.closeButton:Y.closeButton===!0&&(B.closeButton=cy(f.closeButton)?f.closeButton:!0);let H={content:q,props:B,staleId:V};f.limit&&f.limit>0&&r>f.limit&&z?l.push(H):gf(O)?setTimeout(()=>{U(H)},O):U(H)},setProps(q){f=q},setToggle:(q,Y)=>{let st=m.get(q);st&&(st.toggle=Y)},isToastActive:q=>{var Y;return(Y=m.get(q))==null?void 0:Y.isActive},getSnapshot:()=>c}}var hi=new Map,$h=[],hy=new Set,b3=n=>hy.forEach(t=>t(n)),CR=()=>hi.size>0;function T3(){$h.forEach(n=>PR(n.content,n.options)),$h=[]}var E3=(n,{containerId:t})=>{var e;return(e=hi.get(t||1))==null?void 0:e.toasts.get(n)};function IR(n,t){var e;if(t)return!!((e=hi.get(t))!=null&&e.isToastActive(n));let i=!1;return hi.forEach(r=>{r.isToastActive(n)&&(i=!0)}),i}function w3(n){if(!CR()){$h=$h.filter(t=>n!=null&&t.options.toastId!==n);return}if(n==null||f3(n))hi.forEach(t=>{t.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let t=hi.get(n.containerId);t?t.removeToast(n.id):hi.forEach(e=>{e.removeToast(n.id)})}}var S3=(n={})=>{hi.forEach(t=>{t.props.limit&&(!n.containerId||t.id===n.containerId)&&t.clearQueue()})};function PR(n,t){cy(n)&&(CR()||$h.push({content:n,options:t}),hi.forEach(e=>{e.buildToast(n,t)}))}function A3(n){var t;(t=hi.get(n.containerId||1))==null||t.setToggle(n.id,n.fn)}function MR(n,t){hi.forEach(e=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===e.id)&&e.toggle(n,t==null?void 0:t.id)})}function x3(n){let t=n.containerId||1;return{subscribe(e){let i=v3(t,n,b3);hi.set(t,i);let r=i.observe(e);return T3(),()=>{r(),hi.delete(t)}},setProps(e){var i;(i=hi.get(t))==null||i.setProps(e)},getSnapshot(){var e;return(e=hi.get(t))==null?void 0:e.getSnapshot()}}}function R3(n){return hy.add(n),()=>{hy.delete(n)}}function C3(n){return n&&(Gl(n.toastId)||gf(n.toastId))?n.toastId:RR()}function _f(n,t){return PR(n,t),t.toastId}function pp(n,t){return{...t,type:t&&t.type||n,toastId:C3(t)}}function gp(n){return(t,e)=>_f(t,pp(n,e))}function Ae(n,t){return _f(n,pp("default",t))}Ae.loading=(n,t)=>_f(n,pp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function I3(n,{pending:t,error:e,success:i},r){let l;t&&(l=Gl(t)?Ae.loading(t,r):Ae.loading(t.render,{...r,...t}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},f=(p,v,E)=>{if(v==null){Ae.dismiss(l);return}let S={type:p,...c,...r,data:E},R=Gl(v)?{render:v}:v;return l?Ae.update(l,{...S,...R}):Ae(R.render,{...S,...R}),E},m=ba(n)?n():n;return m.then(p=>f("success",i,p)).catch(p=>f("error",e,p)),m}Ae.promise=I3;Ae.success=gp("success");Ae.info=gp("info");Ae.error=gp("error");Ae.warning=gp("warning");Ae.warn=Ae.warning;Ae.dark=(n,t)=>_f(n,pp("default",{theme:"dark",...t}));function P3(n){w3(n)}Ae.dismiss=P3;Ae.clearWaitingQueue=S3;Ae.isActive=IR;Ae.update=(n,t={})=>{let e=E3(n,t);if(e){let{props:i,content:r}=e,l={delay:100,...i,...t,toastId:t.toastId||n,updateId:RR()};l.toastId!==n&&(l.staleId=n);let c=l.render||r;delete l.render,_f(c,l)}};Ae.done=n=>{Ae.update(n,{progress:1})};Ae.onChange=R3;Ae.play=n=>MR(!0,n);Ae.pause=n=>MR(!1,n);function M3(n){var t;let{subscribe:e,getSnapshot:i,setProps:r}=K.useRef(x3(n)).current;r(n);let l=(t=K.useSyncExternalStore(e,i,i))==null?void 0:t.slice();function c(f){if(!l)return[];let m=new Map;return n.newestOnTop&&l.reverse(),l.forEach(p=>{let{position:v}=p.props;m.has(v)||m.set(v,[]),m.get(v).push(p)}),Array.from(m,p=>f(p[0],p[1]))}return{getToastToRender:c,isToastActive:IR,count:l==null?void 0:l.length}}function O3(n){let[t,e]=K.useState(!1),[i,r]=K.useState(!1),l=K.useRef(null),c=K.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:f,pauseOnHover:m,closeToast:p,onClick:v,closeOnClick:E}=n;A3({id:n.toastId,containerId:n.containerId,fn:e}),K.useEffect(()=>{if(n.pauseOnFocusLoss)return S(),()=>{R()}},[n.pauseOnFocusLoss]);function S(){document.hasFocus()||U(),window.addEventListener("focus",D),window.addEventListener("blur",U)}function R(){window.removeEventListener("focus",D),window.removeEventListener("blur",U)}function P(V){if(n.draggable===!0||n.draggable===V.pointerType){q();let O=l.current;c.canCloseOnClick=!0,c.canDrag=!0,O.style.transition="none",n.draggableDirection==="x"?(c.start=V.clientX,c.removalDistance=O.offsetWidth*(n.draggablePercent/100)):(c.start=V.clientY,c.removalDistance=O.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function k(V){let{top:O,bottom:z,left:B,right:H}=l.current.getBoundingClientRect();V.nativeEvent.type!=="touchend"&&n.pauseOnHover&&V.clientX>=B&&V.clientX<=H&&V.clientY>=O&&V.clientY<=z?U():D()}function D(){e(!0)}function U(){e(!1)}function q(){c.didMove=!1,document.addEventListener("pointermove",st),document.addEventListener("pointerup",Q)}function Y(){document.removeEventListener("pointermove",st),document.removeEventListener("pointerup",Q)}function st(V){let O=l.current;if(c.canDrag&&O){c.didMove=!0,t&&U(),n.draggableDirection==="x"?c.delta=V.clientX-c.start:c.delta=V.clientY-c.start,c.start!==V.clientX&&(c.canCloseOnClick=!1);let z=n.draggableDirection==="x"?`${c.delta}px, var(--y)`:`0, calc(${c.delta}px + var(--y))`;O.style.transform=`translate3d(${z},0)`,O.style.opacity=`${1-Math.abs(c.delta/c.removalDistance)}`}}function Q(){Y();let V=l.current;if(c.canDrag&&c.didMove&&V){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance){r(!0),n.closeToast(!0),n.collapseAll();return}V.style.transition="transform 0.2s, opacity 0.2s",V.style.removeProperty("transform"),V.style.removeProperty("opacity")}}let ht={onPointerDown:P,onPointerUp:k};return f&&m&&(ht.onMouseEnter=U,n.stacked||(ht.onMouseLeave=D)),E&&(ht.onClick=V=>{v&&v(V),c.canCloseOnClick&&p(!0)}),{playToast:D,pauseToast:U,isRunning:t,preventExitTransition:i,toastRef:l,eventHandlers:ht}}var k3=typeof window<"u"?K.useLayoutEffect:K.useEffect,_p=({theme:n,type:t,isLoading:e,...i})=>ge.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...i});function D3(n){return ge.createElement(_p,{...n},ge.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function L3(n){return ge.createElement(_p,{...n},ge.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function N3(n){return ge.createElement(_p,{...n},ge.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function V3(n){return ge.createElement(_p,{...n},ge.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function z3(){return ge.createElement("div",{className:"Toastify__spinner"})}var fy={info:L3,warning:D3,success:N3,error:V3,spinner:z3},B3=n=>n in fy;function U3({theme:n,type:t,isLoading:e,icon:i}){let r=null,l={theme:n,type:t};return i===!1||(ba(i)?r=i({...l,isLoading:e}):K.isValidElement(i)?r=K.cloneElement(i,l):e?r=fy.spinner():B3(t)&&(r=fy[t](l))),r}var j3=n=>{let{isRunning:t,preventExitTransition:e,toastRef:i,eventHandlers:r,playToast:l}=O3(n),{closeButton:c,children:f,autoClose:m,onClick:p,type:v,hideProgressBar:E,closeToast:S,transition:R,position:P,className:k,style:D,progressClassName:U,updateId:q,role:Y,progress:st,rtl:Q,toastId:ht,deleteToast:V,isIn:O,isLoading:z,closeOnClick:B,theme:H,ariaLabel:G}=n,F=zl("Toastify__toast",`Toastify__toast-theme--${H}`,`Toastify__toast--${v}`,{"Toastify__toast--rtl":Q},{"Toastify__toast--close-on-click":B}),Yt=ba(k)?k({rtl:Q,position:P,type:v,defaultClassName:F}):zl(F,k),Dt=U3(n),et=!!st||!m,vt={closeToast:S,type:v,theme:H},mt=null;return c===!1||(ba(c)?mt=c(vt):K.isValidElement(c)?mt=K.cloneElement(c,vt):mt=g3(vt)),ge.createElement(R,{isIn:O,done:V,position:P,preventExitTransition:e,nodeRef:i,playToast:l},ge.createElement("div",{id:ht,tabIndex:0,onClick:p,"data-in":O,className:Yt,...r,style:D,ref:i,...O&&{role:Y,"aria-label":G}},Dt!=null&&ge.createElement("div",{className:zl("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!z})},Dt),xR(f,n,!t),mt,!n.customProgressBar&&ge.createElement(_3,{...q&&!et?{key:`p-${q}`}:{},rtl:Q,theme:H,delay:m,isRunning:t,isIn:O,closeToast:S,hide:E,type:v,className:U,controlledProgress:et,progress:st||0})))},H3=(n,t=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:t}),F3=p3(H3("bounce",!0)),q3={position:"top-right",transition:F3,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function G3(n){let t={...q3,...n},e=n.stacked,[i,r]=K.useState(!0),l=K.useRef(null),{getToastToRender:c,isToastActive:f,count:m}=M3(t),{className:p,style:v,rtl:E,containerId:S,hotKeys:R}=t;function P(D){let U=zl("Toastify__toast-container",`Toastify__toast-container--${D}`,{"Toastify__toast-container--rtl":E});return ba(p)?p({position:D,rtl:E,defaultClassName:U}):zl(U,uy(p))}function k(){e&&(r(!0),Ae.play())}return k3(()=>{var D;if(e){let U=l.current.querySelectorAll('[data-in="true"]'),q=12,Y=(D=t.position)==null?void 0:D.includes("top"),st=0,Q=0;Array.from(U).reverse().forEach((ht,V)=>{let O=ht;O.classList.add("Toastify__toast--stacked"),V>0&&(O.dataset.collapsed=`${i}`),O.dataset.pos||(O.dataset.pos=Y?"top":"bot");let z=st*(i?.2:1)+(i?0:q*V);O.style.setProperty("--y",`${Y?z:z*-1}px`),O.style.setProperty("--g",`${q}`),O.style.setProperty("--s",`${1-(i?Q:0)}`),st+=O.offsetHeight,Q+=.025})}},[i,m,e]),K.useEffect(()=>{function D(U){var q;let Y=l.current;R(U)&&((q=Y.querySelector('[tabIndex="0"]'))==null||q.focus(),r(!1),Ae.pause()),U.key==="Escape"&&(document.activeElement===Y||Y!=null&&Y.contains(document.activeElement))&&(r(!0),Ae.play())}return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[R]),ge.createElement("section",{ref:l,className:"Toastify",id:S,onMouseEnter:()=>{e&&(r(!1),Ae.pause())},onMouseLeave:k,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},c((D,U)=>{let q=U.length?{...v}:{...v,pointerEvents:"none"};return ge.createElement("div",{tabIndex:-1,className:P(D),"data-stacked":e,style:q,key:`c-${D}`},U.map(({content:Y,props:st})=>ge.createElement(j3,{...st,stacked:e,collapseAll:k,isIn:f(st.toastId,st.containerId),key:`t-${st.key}`},Y)))}))}const Z3=()=>{const[n,t]=K.useState(""),[e,i]=K.useState(""),[r,l]=K.useState(""),[c,f]=K.useState(!1),{ajouterBar:m}=c3(),p=Ho(),v=()=>{p("/")},E=async R=>{if(R.preventDefault(),!n||!e||!r)return alert("Por favor, completa todos los campos.");try{await m({nom:n,lat:parseFloat(e),lng:parseFloat(r)}),p("/mapa"),Ae.success("Formulario enviado correctamente ✅")}catch(P){console.error("Error al añadir bar:",P),alert("Hubo un error al guardar el bar.")}},S=()=>{window.confirm("¿Estás seguro de que quieres borrar el formulario?")&&(f(!0),setTimeout(()=>{t(""),i(""),l(""),f(!1),Ae.info("Formulario limpiado correctamente ✅")},300))};return it.jsx("div",{className:"form-container",children:it.jsxs("form",{onSubmit:E,children:[it.jsx("input",{type:"text",placeholder:"Nombre del bar",value:n,onChange:R=>t(R.target.value),className:c?"resetting":""}),it.jsx("input",{type:"number",placeholder:"Latitud",value:e,onChange:R=>i(R.target.value),className:c?"resetting":""}),it.jsx("input",{type:"number",placeholder:"Longitud",value:r,onChange:R=>l(R.target.value),className:c?"resetting":""}),it.jsx("button",{type:"submit",children:"Guardar"}),it.jsx("button",{type:"button",onClick:S,children:"Resetear"}),it.jsx("button",{type:"button",onClick:v,children:"Ir a inicio"})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function yf(n){return n+.5|0}const Ao=(n,t,e)=>Math.max(Math.min(n,e),t);function vh(n){return Ao(yf(n*2.55),0,255)}function Oo(n){return Ao(yf(n*255),0,255)}function la(n){return Ao(yf(n/2.55)/100,0,1)}function Xw(n){return Ao(yf(n*100),0,100)}const vs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},dy=[..."0123456789ABCDEF"],W3=n=>dy[n&15],Y3=n=>dy[(n&240)>>4]+dy[n&15],Id=n=>(n&240)>>4===(n&15),K3=n=>Id(n.r)&&Id(n.g)&&Id(n.b)&&Id(n.a);function $3(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&vs[n[1]]*17,g:255&vs[n[2]]*17,b:255&vs[n[3]]*17,a:t===5?vs[n[4]]*17:255}:(t===7||t===9)&&(e={r:vs[n[1]]<<4|vs[n[2]],g:vs[n[3]]<<4|vs[n[4]],b:vs[n[5]]<<4|vs[n[6]],a:t===9?vs[n[7]]<<4|vs[n[8]]:255})),e}const X3=(n,t)=>n<255?t(n):"";function Q3(n){var t=K3(n)?W3:Y3;return n?"#"+t(n.r)+t(n.g)+t(n.b)+X3(n.a,t):void 0}const J3=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function OR(n,t,e){const i=t*Math.min(e,1-e),r=(l,c=(l+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[r(0),r(8),r(4)]}function tz(n,t,e){const i=(r,l=(r+n/60)%6)=>e-e*t*Math.max(Math.min(l,4-l,1),0);return[i(5),i(3),i(1)]}function ez(n,t,e){const i=OR(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function nz(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function Hv(n){const e=n.r/255,i=n.g/255,r=n.b/255,l=Math.max(e,i,r),c=Math.min(e,i,r),f=(l+c)/2;let m,p,v;return l!==c&&(v=l-c,p=f>.5?v/(2-l-c):v/(l+c),m=nz(e,i,r,v,l),m=m*60+.5),[m|0,p||0,f]}function Fv(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Oo)}function qv(n,t,e){return Fv(OR,n,t,e)}function iz(n,t,e){return Fv(ez,n,t,e)}function sz(n,t,e){return Fv(tz,n,t,e)}function kR(n){return(n%360+360)%360}function rz(n){const t=J3.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?vh(+t[5]):Oo(+t[5]));const r=kR(+t[2]),l=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=iz(r,l,c):t[1]==="hsv"?i=sz(r,l,c):i=qv(r,l,c),{r:i[0],g:i[1],b:i[2],a:e}}function az(n,t){var e=Hv(n);e[0]=kR(e[0]+t),e=qv(e),n.r=e[0],n.g=e[1],n.b=e[2]}function oz(n){if(!n)return;const t=Hv(n),e=t[0],i=Xw(t[1]),r=Xw(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${la(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const Qw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Jw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function lz(){const n={},t=Object.keys(Jw),e=Object.keys(Qw);let i,r,l,c,f;for(i=0;i<t.length;i++){for(c=f=t[i],r=0;r<e.length;r++)l=e[r],f=f.replace(l,Qw[l]);l=parseInt(Jw[c],16),n[f]=[l>>16&255,l>>8&255,l&255]}return n}let Pd;function uz(n){Pd||(Pd=lz(),Pd.transparent=[0,0,0,0]);const t=Pd[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const cz=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function hz(n){const t=cz.exec(n);let e=255,i,r,l;if(t){if(t[7]!==i){const c=+t[7];e=t[8]?vh(c):Ao(c*255,0,255)}return i=+t[1],r=+t[3],l=+t[5],i=255&(t[2]?vh(i):Ao(i,0,255)),r=255&(t[4]?vh(r):Ao(r,0,255)),l=255&(t[6]?vh(l):Ao(l,0,255)),{r:i,g:r,b:l,a:e}}}function fz(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${la(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const E_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Bu=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function dz(n,t,e){const i=Bu(la(n.r)),r=Bu(la(n.g)),l=Bu(la(n.b));return{r:Oo(E_(i+e*(Bu(la(t.r))-i))),g:Oo(E_(r+e*(Bu(la(t.g))-r))),b:Oo(E_(l+e*(Bu(la(t.b))-l))),a:n.a+e*(t.a-n.a)}}function Md(n,t,e){if(n){let i=Hv(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=qv(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function DR(n,t){return n&&Object.assign(t||{},n)}function tS(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Oo(n[3]))):(t=DR(n,{r:0,g:0,b:0,a:1}),t.a=Oo(t.a)),t}function mz(n){return n.charAt(0)==="r"?hz(n):rz(n)}class Xh{constructor(t){if(t instanceof Xh)return t;const e=typeof t;let i;e==="object"?i=tS(t):e==="string"&&(i=$3(t)||uz(t)||mz(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=DR(this._rgb);return t&&(t.a=la(t.a)),t}set rgb(t){this._rgb=tS(t)}rgbString(){return this._valid?fz(this._rgb):void 0}hexString(){return this._valid?Q3(this._rgb):void 0}hslString(){return this._valid?oz(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let l;const c=e===l?.5:e,f=2*c-1,m=i.a-r.a,p=((f*m===-1?f:(f+m)/(1+f*m))+1)/2;l=1-p,i.r=255&p*i.r+l*r.r+.5,i.g=255&p*i.g+l*r.g+.5,i.b=255&p*i.b+l*r.b+.5,i.a=c*i.a+(1-c)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=dz(this._rgb,t._rgb,e)),this}clone(){return new Xh(this.rgb)}alpha(t){return this._rgb.a=Oo(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=yf(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Md(this._rgb,2,t),this}darken(t){return Md(this._rgb,2,-t),this}saturate(t){return Md(this._rgb,1,t),this}desaturate(t){return Md(this._rgb,1,-t),this}rotate(t){return az(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function sa(){}const pz=(()=>{let n=0;return()=>n++})();function ni(n){return n==null}function Un(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function pe(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ta(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function _r(n,t){return Ta(n)?n:t}function Se(n,t){return typeof n>"u"?t:n}const gz=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,LR=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Ue(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function we(n,t,e,i){let r,l,c;if(Un(n))for(l=n.length,r=0;r<l;r++)t.call(e,n[r],r);else if(pe(n))for(c=Object.keys(n),l=c.length,r=0;r<l;r++)t.call(e,n[c[r]],c[r])}function xm(n,t){let e,i,r,l;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],l=t[e],r.datasetIndex!==l.datasetIndex||r.index!==l.index)return!1;return!0}function Rm(n){if(Un(n))return n.map(Rm);if(pe(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=Rm(n[e[r]]);return t}return n}function NR(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function _z(n,t,e,i){if(!NR(n))return;const r=t[n],l=e[n];pe(r)&&pe(l)?Qh(r,l,i):t[n]=Rm(l)}function Qh(n,t,e){const i=Un(t)?t:[t],r=i.length;if(!pe(n))return n;e=e||{};const l=e.merger||_z;let c;for(let f=0;f<r;++f){if(c=i[f],!pe(c))continue;const m=Object.keys(c);for(let p=0,v=m.length;p<v;++p)l(m[p],n,c,e)}return n}function Oh(n,t){return Qh(n,t,{merger:yz})}function yz(n,t,e){if(!NR(n))return;const i=t[n],r=e[n];pe(i)&&pe(r)?Oh(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Rm(r))}const eS={"":n=>n,x:n=>n.x,y:n=>n.y};function vz(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function bz(n){const t=vz(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Jh(n,t){return(eS[t]||(eS[t]=bz(t)))(n)}function Gv(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Cm=n=>typeof n<"u",jo=n=>typeof n=="function",nS=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function Tz(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const He=Math.PI,mn=2*He,Im=Number.POSITIVE_INFINITY,Ez=He/180,vn=He/2,Pl=He/4,iS=He*2/3,sS=Math.sign;function wz(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,l)=>r-l).pop(),t}function Sz(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Pm(n){return!Sz(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Vl(n){return n*(He/180)}function Az(n){return n*(180/He)}function VR(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let l=Math.atan2(i,e);return l<-.5*He&&(l+=mn),{angle:l,distance:r}}function xz(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Tr(n){return(n%mn+mn)%mn}function Mm(n,t,e,i){const r=Tr(n),l=Tr(t),c=Tr(e),f=Tr(l-r),m=Tr(c-r),p=Tr(r-l),v=Tr(r-c);return r===l||r===c||i&&l===c||f>m&&p<v}function bs(n,t,e){return Math.max(t,Math.min(e,n))}function Rz(n){return bs(n,-32768,32767)}function bh(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Zv(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,r=0,l;for(;i-r>1;)l=r+i>>1,e(l)?r=l:i=l;return{lo:r,hi:i}}const my=(n,t,e,i)=>Zv(n,e,i?r=>{const l=n[r][t];return l<e||l===e&&n[r+1][t]===e}:r=>n[r][t]<e),Cz=(n,t,e)=>Zv(n,e,i=>n[i][t]>=e);function Iz(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const zR=["push","pop","shift","splice","unshift"];function Pz(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),zR.forEach(e=>{const i="_onData"+Gv(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...l){const c=r.apply(this,l);return n._chartjs.listeners.forEach(f=>{typeof f[i]=="function"&&f[i](...l)}),c}})})}function rS(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(zR.forEach(l=>{delete n[l]}),delete n._chartjs)}function Mz(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const BR=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function UR(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,BR.call(window,()=>{i=!1,n.apply(t,e)}))}}function Oz(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const jR=n=>n==="start"?"left":n==="end"?"right":"center",Ki=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,kz=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,Od=n=>n===0||n===1,aS=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*mn/e)),oS=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*mn/e)+1,kh={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*vn)+1,easeOutSine:n=>Math.sin(n*vn),easeInOutSine:n=>-.5*(Math.cos(He*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Od(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Od(n)?n:aS(n,.075,.3),easeOutElastic:n=>Od(n)?n:oS(n,.075,.3),easeInOutElastic(n){return Od(n)?n:n<.5?.5*aS(n*2,.1125,.45):.5+.5*oS(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-kh.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?kh.easeInBounce(n*2)*.5:kh.easeOutBounce(n*2-1)*.5+.5};function HR(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function lS(n){return HR(n)?n:new Xh(n)}function w_(n){return HR(n)?n:new Xh(n).saturate(.5).darken(.1).hexString()}const Dz=["x","y","borderWidth","radius","tension"],Lz=["color","borderColor","backgroundColor"];function Nz(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Lz},numbers:{type:"number",properties:Dz}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Vz(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const uS=new Map;function zz(n,t){t=t||{};const e=n+JSON.stringify(t);let i=uS.get(e);return i||(i=new Intl.NumberFormat(n,t),uS.set(e,i)),i}function Bz(n,t,e){return zz(t,e).format(n)}const Uz={values(n){return Un(n)?n:""+n}};var jz={formatters:Uz};function Hz(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:jz.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Zl=Object.create(null),py=Object.create(null);function Dh(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const l=e[i];n=n[l]||(n[l]=Object.create(null))}return n}function S_(n,t,e){return typeof t=="string"?Qh(Dh(n,t),e):Qh(Dh(n,""),t)}class Fz{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>w_(r.backgroundColor),this.hoverBorderColor=(i,r)=>w_(r.borderColor),this.hoverColor=(i,r)=>w_(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return S_(this,t,e)}get(t){return Dh(this,t)}describe(t,e){return S_(py,t,e)}override(t,e){return S_(Zl,t,e)}route(t,e,i,r){const l=Dh(this,t),c=Dh(this,i),f="_"+e;Object.defineProperties(l,{[f]:{value:l[e],writable:!0},[e]:{enumerable:!0,get(){const m=this[f],p=c[r];return pe(m)?Object.assign({},p,m):Se(m,p)},set(m){this[f]=m}}})}apply(t){t.forEach(e=>e(this))}}var an=new Fz({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Nz,Vz,Hz]);function qz(n){return!n||ni(n.size)||ni(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function cS(n,t,e,i,r){let l=t[r];return l||(l=t[r]=n.measureText(r).width,e.push(r)),l>i&&(i=l),i}function Ml(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function hS(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function fS(n,t,e,i){FR(n,t,e,i,null)}function FR(n,t,e,i,r){let l,c,f,m,p,v,E,S;const R=t.pointStyle,P=t.rotation,k=t.radius;let D=(P||0)*Ez;if(R&&typeof R=="object"&&(l=R.toString(),l==="[object HTMLImageElement]"||l==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(D),n.drawImage(R,-R.width/2,-R.height/2,R.width,R.height),n.restore();return}if(!(isNaN(k)||k<=0)){switch(n.beginPath(),R){default:r?n.ellipse(e,i,r/2,k,0,0,mn):n.arc(e,i,k,0,mn),n.closePath();break;case"triangle":v=r?r/2:k,n.moveTo(e+Math.sin(D)*v,i-Math.cos(D)*k),D+=iS,n.lineTo(e+Math.sin(D)*v,i-Math.cos(D)*k),D+=iS,n.lineTo(e+Math.sin(D)*v,i-Math.cos(D)*k),n.closePath();break;case"rectRounded":p=k*.516,m=k-p,c=Math.cos(D+Pl)*m,E=Math.cos(D+Pl)*(r?r/2-p:m),f=Math.sin(D+Pl)*m,S=Math.sin(D+Pl)*(r?r/2-p:m),n.arc(e-E,i-f,p,D-He,D-vn),n.arc(e+S,i-c,p,D-vn,D),n.arc(e+E,i+f,p,D,D+vn),n.arc(e-S,i+c,p,D+vn,D+He),n.closePath();break;case"rect":if(!P){m=Math.SQRT1_2*k,v=r?r/2:m,n.rect(e-v,i-m,2*v,2*m);break}D+=Pl;case"rectRot":E=Math.cos(D)*(r?r/2:k),c=Math.cos(D)*k,f=Math.sin(D)*k,S=Math.sin(D)*(r?r/2:k),n.moveTo(e-E,i-f),n.lineTo(e+S,i-c),n.lineTo(e+E,i+f),n.lineTo(e-S,i+c),n.closePath();break;case"crossRot":D+=Pl;case"cross":E=Math.cos(D)*(r?r/2:k),c=Math.cos(D)*k,f=Math.sin(D)*k,S=Math.sin(D)*(r?r/2:k),n.moveTo(e-E,i-f),n.lineTo(e+E,i+f),n.moveTo(e+S,i-c),n.lineTo(e-S,i+c);break;case"star":E=Math.cos(D)*(r?r/2:k),c=Math.cos(D)*k,f=Math.sin(D)*k,S=Math.sin(D)*(r?r/2:k),n.moveTo(e-E,i-f),n.lineTo(e+E,i+f),n.moveTo(e+S,i-c),n.lineTo(e-S,i+c),D+=Pl,E=Math.cos(D)*(r?r/2:k),c=Math.cos(D)*k,f=Math.sin(D)*k,S=Math.sin(D)*(r?r/2:k),n.moveTo(e-E,i-f),n.lineTo(e+E,i+f),n.moveTo(e+S,i-c),n.lineTo(e-S,i+c);break;case"line":c=r?r/2:Math.cos(D)*k,f=Math.sin(D)*k,n.moveTo(e-c,i-f),n.lineTo(e+c,i+f);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(D)*(r?r/2:k),i+Math.sin(D)*k);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function qR(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Wv(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Yv(n){n.restore()}function Gz(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ni(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function Zz(n,t,e,i,r){if(r.strikethrough||r.underline){const l=n.measureText(i),c=t-l.actualBoundingBoxLeft,f=t+l.actualBoundingBoxRight,m=e-l.actualBoundingBoxAscent,p=e+l.actualBoundingBoxDescent,v=r.strikethrough?(m+p)/2:p;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(c,v),n.lineTo(f,v),n.stroke()}}function Wz(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Om(n,t,e,i,r,l={}){const c=Un(t)?t:[t],f=l.strokeWidth>0&&l.strokeColor!=="";let m,p;for(n.save(),n.font=r.string,Gz(n,l),m=0;m<c.length;++m)p=c[m],l.backdrop&&Wz(n,l.backdrop),f&&(l.strokeColor&&(n.strokeStyle=l.strokeColor),ni(l.strokeWidth)||(n.lineWidth=l.strokeWidth),n.strokeText(p,e,i,l.maxWidth)),n.fillText(p,e,i,l.maxWidth),Zz(n,e,i,p,l),i+=Number(r.lineHeight);n.restore()}function gy(n,t){const{x:e,y:i,w:r,h:l,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,1.5*He,He,!0),n.lineTo(e,i+l-c.bottomLeft),n.arc(e+c.bottomLeft,i+l-c.bottomLeft,c.bottomLeft,He,vn,!0),n.lineTo(e+r-c.bottomRight,i+l),n.arc(e+r-c.bottomRight,i+l-c.bottomRight,c.bottomRight,vn,0,!0),n.lineTo(e+r,i+c.topRight),n.arc(e+r-c.topRight,i+c.topRight,c.topRight,0,-vn,!0),n.lineTo(e+c.topLeft,i)}const Yz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Kz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function $z(n,t){const e=(""+n).match(Yz);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const Xz=n=>+n||0;function Kv(n,t){const e={},i=pe(t),r=i?Object.keys(t):t,l=pe(n)?i?c=>Se(n[c],n[t[c]]):c=>n[c]:()=>n;for(const c of r)e[c]=Xz(l(c));return e}function Qz(n){return Kv(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Lh(n){return Kv(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ys(n){const t=Qz(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ai(n,t){n=n||{},t=t||an.font;let e=Se(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Se(n.style,t.style);i&&!(""+i).match(Kz)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Se(n.family,t.family),lineHeight:$z(Se(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Se(n.weight,t.weight),string:""};return r.string=qz(r),r}function kd(n,t,e,i){let r,l,c;for(r=0,l=n.length;r<l;++r)if(c=n[r],c!==void 0&&c!==void 0)return c}function Jz(n,t,e){const{min:i,max:r}=n,l=LR(t,(r-i)/2),c=(f,m)=>e&&f===0?0:f+m;return{min:c(i,-Math.abs(l)),max:c(r,l)}}function mc(n,t){return Object.assign(Object.create(n),t)}function $v(n,t=[""],e,i,r=()=>n[0]){const l=e||n;typeof i>"u"&&(i=YR("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:l,_fallback:i,_getTarget:r,override:f=>$v([f,...n],t,l,i)};return new Proxy(c,{deleteProperty(f,m){return delete f[m],delete f._keys,delete n[0][m],!0},get(f,m){return ZR(f,m,()=>o6(m,t,n,f))},getOwnPropertyDescriptor(f,m){return Reflect.getOwnPropertyDescriptor(f._scopes[0],m)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(f,m){return mS(f).includes(m)},ownKeys(f){return mS(f)},set(f,m,p){const v=f._storage||(f._storage=r());return f[m]=v[m]=p,delete f._keys,!0}})}function sc(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:GR(n,i),setContext:l=>sc(n,l,e,i),override:l=>sc(n.override(l),t,e,i)};return new Proxy(r,{deleteProperty(l,c){return delete l[c],delete n[c],!0},get(l,c,f){return ZR(l,c,()=>e6(l,c,f))},getOwnPropertyDescriptor(l,c){return l._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(l,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(l,c,f){return n[c]=f,delete l[c],!0}})}function GR(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:jo(e)?e:()=>e,isIndexable:jo(i)?i:()=>i}}const t6=(n,t)=>n?n+Gv(t):t,Xv=(n,t)=>pe(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function ZR(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function e6(n,t,e){const{_proxy:i,_context:r,_subProxy:l,_descriptors:c}=n;let f=i[t];return jo(f)&&c.isScriptable(t)&&(f=n6(t,f,n,e)),Un(f)&&f.length&&(f=i6(t,f,n,c.isIndexable)),Xv(t,f)&&(f=sc(f,r,l&&l[t],c)),f}function n6(n,t,e,i){const{_proxy:r,_context:l,_subProxy:c,_stack:f}=e;if(f.has(n))throw new Error("Recursion detected: "+Array.from(f).join("->")+"->"+n);f.add(n);let m=t(l,c||i);return f.delete(n),Xv(n,m)&&(m=Qv(r._scopes,r,n,m)),m}function i6(n,t,e,i){const{_proxy:r,_context:l,_subProxy:c,_descriptors:f}=e;if(typeof l.index<"u"&&i(n))return t[l.index%t.length];if(pe(t[0])){const m=t,p=r._scopes.filter(v=>v!==m);t=[];for(const v of m){const E=Qv(p,r,n,v);t.push(sc(E,l,c&&c[n],f))}}return t}function WR(n,t,e){return jo(n)?n(t,e):n}const s6=(n,t)=>n===!0?t:typeof n=="string"?Jh(t,n):void 0;function r6(n,t,e,i,r){for(const l of t){const c=s6(e,l);if(c){n.add(c);const f=WR(c._fallback,e,r);if(typeof f<"u"&&f!==e&&f!==i)return f}else if(c===!1&&typeof i<"u"&&e!==i)return null}return!1}function Qv(n,t,e,i){const r=t._rootScopes,l=WR(t._fallback,e,i),c=[...n,...r],f=new Set;f.add(i);let m=dS(f,c,e,l||e,i);return m===null||typeof l<"u"&&l!==e&&(m=dS(f,c,l,m,i),m===null)?!1:$v(Array.from(f),[""],r,l,()=>a6(t,e,i))}function dS(n,t,e,i,r){for(;e;)e=r6(n,t,e,i,r);return e}function a6(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return Un(r)&&pe(e)?e:r||{}}function o6(n,t,e,i){let r;for(const l of t)if(r=YR(t6(l,n),e),typeof r<"u")return Xv(n,r)?Qv(e,i,n,r):r}function YR(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function mS(n){let t=n._keys;return t||(t=n._keys=l6(n._scopes)),t}function l6(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function Jv(){return typeof window<"u"&&typeof document<"u"}function t0(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function km(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const yp=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function u6(n,t){return yp(n).getPropertyValue(t)}const c6=["top","right","bottom","left"];function Bl(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const l=c6[r];i[l]=parseFloat(n[t+"-"+l+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const h6=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function f6(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:l}=i;let c=!1,f,m;if(h6(r,l,n.target))f=r,m=l;else{const p=t.getBoundingClientRect();f=i.clientX-p.left,m=i.clientY-p.top,c=!0}return{x:f,y:m,box:c}}function Dl(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=yp(e),l=r.boxSizing==="border-box",c=Bl(r,"padding"),f=Bl(r,"border","width"),{x:m,y:p,box:v}=f6(n,e),E=c.left+(v&&f.left),S=c.top+(v&&f.top);let{width:R,height:P}=t;return l&&(R-=c.width+f.width,P-=c.height+f.height),{x:Math.round((m-E)/R*e.width/i),y:Math.round((p-S)/P*e.height/i)}}function d6(n,t,e){let i,r;if(t===void 0||e===void 0){const l=n&&t0(n);if(!l)t=n.clientWidth,e=n.clientHeight;else{const c=l.getBoundingClientRect(),f=yp(l),m=Bl(f,"border","width"),p=Bl(f,"padding");t=c.width-p.width-m.width,e=c.height-p.height-m.height,i=km(f.maxWidth,l,"clientWidth"),r=km(f.maxHeight,l,"clientHeight")}}return{width:t,height:e,maxWidth:i||Im,maxHeight:r||Im}}const Dd=n=>Math.round(n*10)/10;function m6(n,t,e,i){const r=yp(n),l=Bl(r,"margin"),c=km(r.maxWidth,n,"clientWidth")||Im,f=km(r.maxHeight,n,"clientHeight")||Im,m=d6(n,t,e);let{width:p,height:v}=m;if(r.boxSizing==="content-box"){const S=Bl(r,"border","width"),R=Bl(r,"padding");p-=R.width+S.width,v-=R.height+S.height}return p=Math.max(0,p-l.width),v=Math.max(0,i?p/i:v-l.height),p=Dd(Math.min(p,c,m.maxWidth)),v=Dd(Math.min(v,f,m.maxHeight)),p&&!v&&(v=Dd(p/2)),(t!==void 0||e!==void 0)&&i&&m.height&&v>m.height&&(v=m.height,p=Dd(Math.floor(v*i))),{width:p,height:v}}function pS(n,t,e){const i=t||1,r=Math.floor(n.height*i),l=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==r||c.width!==l?(n.currentDevicePixelRatio=i,c.height=r,c.width=l,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const p6=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Jv()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function gS(n,t){const e=u6(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const g6=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},_6=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Ku(n,t,e){return n?g6(t,e):_6()}function KR(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function $R(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Ld(n,t,e){return n.options.clip?n[e]:t[e]}function y6(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Ld(e,t,"left"),right:Ld(e,t,"right"),top:Ld(i,t,"top"),bottom:Ld(i,t,"bottom")}:t}function v6(n,t){const e=t._clip;if(e.disabled)return!1;const i=y6(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class b6{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const l=e.listeners[r],c=e.duration;l.forEach(f=>f({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=BR.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const l=i.items;let c=l.length-1,f=!1,m;for(;c>=0;--c)m=l[c],m._active?(m._total>i.duration&&(i.duration=m._total),m.tick(t),f=!0):(l[c]=l[l.length-1],l.pop());f&&(r.draw(),this._notify(r,i,t,"progress")),l.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=l.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var aa=new b6;const _S="transparent",T6={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=lS(n||_S),r=i.valid&&lS(t||_S);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class E6{constructor(t,e,i,r){const l=e[i];r=kd([t.to,r,l,t.from]);const c=kd([t.from,l,r]);this._active=!0,this._fn=t.fn||T6[t.type||typeof c],this._easing=kh[t.easing]||kh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],l=i-this._start,c=this._duration-l;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=l,this._loop=!!t.loop,this._to=kd([t.to,e,r,t.from]),this._from=kd([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,l=this._from,c=this._loop,f=this._to;let m;if(this._active=l!==f&&(c||e<i),!this._active){this._target[r]=f,this._notify(!0);return}if(e<0){this._target[r]=l;return}m=e/i%2,m=c&&m>1?2-m:m,m=this._easing(Math.min(1,Math.max(0,m))),this._target[r]=this._fn(l,f,m)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class XR{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!pe(t))return;const e=Object.keys(an.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const l=t[r];if(!pe(l))return;const c={};for(const f of e)c[f]=l[f];(Un(l.properties)&&l.properties||[r]).forEach(f=>{(f===r||!i.has(f))&&i.set(f,c)})})}_animateOptions(t,e){const i=e.options,r=S6(t,i);if(!r)return[];const l=this._createAnimations(r,i);return i.$shared&&w6(t.options.$animations,i).then(()=>{t.options=i},()=>{}),l}_createAnimations(t,e){const i=this._properties,r=[],l=t.$animations||(t.$animations={}),c=Object.keys(e),f=Date.now();let m;for(m=c.length-1;m>=0;--m){const p=c[m];if(p.charAt(0)==="$")continue;if(p==="options"){r.push(...this._animateOptions(t,e));continue}const v=e[p];let E=l[p];const S=i.get(p);if(E)if(S&&E.active()){E.update(S,v,f);continue}else E.cancel();if(!S||!S.duration){t[p]=v;continue}l[p]=E=new E6(S,t,p,v),r.push(E)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return aa.add(this._chart,i),!0}}function w6(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const l=n[i[r]];l&&l.active()&&e.push(l.wait())}return Promise.all(e)}function S6(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function yS(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,l=e.max===void 0?t:0;return{start:i?l:r,end:i?r:l}}function A6(n,t,e){if(e===!1)return!1;const i=yS(n,e),r=yS(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function x6(n){let t,e,i,r;return pe(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function QR(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,l;for(r=0,l=i.length;r<l;++r)e.push(i[r].index);return e}function vS(n,t,e,i={}){const r=n.keys,l=i.mode==="single";let c,f,m,p;if(t===null)return;let v=!1;for(c=0,f=r.length;c<f;++c){if(m=+r[c],m===e){if(v=!0,i.all)continue;break}p=n.values[m],Ta(p)&&(l||t===0||sS(t)===sS(p))&&(t+=p)}return!v&&!i.all?0:t}function R6(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",l=i.axis==="x"?"x":"y",c=Object.keys(n),f=new Array(c.length);let m,p,v;for(m=0,p=c.length;m<p;++m)v=c[m],f[m]={[r]:v,[l]:n[v]};return f}function A_(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function C6(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function I6(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function P6(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function bS(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const l=n[r.index];if(e&&l>0||!e&&l<0)return r.index}return null}function TS(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:l,vScale:c,index:f}=i,m=l.axis,p=c.axis,v=C6(l,c,i),E=t.length;let S;for(let R=0;R<E;++R){const P=t[R],{[m]:k,[p]:D}=P,U=P._stacks||(P._stacks={});S=U[p]=P6(r,v,k),S[f]=D,S._top=bS(S,c,!0,i.type),S._bottom=bS(S,c,!1,i.type);const q=S._visualValues||(S._visualValues={});q[f]=D}}function x_(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function M6(n,t){return mc(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function O6(n,t,e){return mc(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function oh(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const l=r._stacks;if(!l||l[i]===void 0||l[i][e]===void 0)return;delete l[i][e],l[i]._visualValues!==void 0&&l[i]._visualValues[e]!==void 0&&delete l[i]._visualValues[e]}}}const R_=n=>n==="reset"||n==="none",ES=(n,t)=>t?n:Object.assign({},n),k6=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:QR(e,!0),values:null};class Nh{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=A_(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&oh(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(E,S,R,P)=>E==="x"?S:E==="r"?P:R,l=e.xAxisID=Se(i.xAxisID,x_(t,"x")),c=e.yAxisID=Se(i.yAxisID,x_(t,"y")),f=e.rAxisID=Se(i.rAxisID,x_(t,"r")),m=e.indexAxis,p=e.iAxisID=r(m,l,c,f),v=e.vAxisID=r(m,c,l,f);e.xScale=this.getScaleForId(l),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(f),e.iScale=this.getScaleForId(p),e.vScale=this.getScaleForId(v)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&rS(this._data,this),t._stacked&&oh(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(pe(e)){const r=this._cachedMeta;this._data=R6(e,r)}else if(i!==e){if(i){rS(i,this);const r=this._cachedMeta;oh(r),r._parsed=[]}e&&Object.isExtensible(e)&&Pz(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const l=e._stacked;e._stacked=A_(e.vScale,e),e.stack!==i.stack&&(r=!0,oh(e),e.stack=i.stack),this._resyncElements(t),(r||l!==e._stacked)&&(TS(this,e._parsed),e._stacked=A_(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:l,_stacked:c}=i,f=l.axis;let m=t===0&&e===r.length?!0:i._sorted,p=t>0&&i._parsed[t-1],v,E,S;if(this._parsing===!1)i._parsed=r,i._sorted=!0,S=r;else{Un(r[t])?S=this.parseArrayData(i,r,t,e):pe(r[t])?S=this.parseObjectData(i,r,t,e):S=this.parsePrimitiveData(i,r,t,e);const R=()=>E[f]===null||p&&E[f]<p[f];for(v=0;v<e;++v)i._parsed[v+t]=E=S[v],m&&(R()&&(m=!1),p=E);i._sorted=m}c&&TS(this,S)}parsePrimitiveData(t,e,i,r){const{iScale:l,vScale:c}=t,f=l.axis,m=c.axis,p=l.getLabels(),v=l===c,E=new Array(r);let S,R,P;for(S=0,R=r;S<R;++S)P=S+i,E[S]={[f]:v||l.parse(p[P],P),[m]:c.parse(e[P],P)};return E}parseArrayData(t,e,i,r){const{xScale:l,yScale:c}=t,f=new Array(r);let m,p,v,E;for(m=0,p=r;m<p;++m)v=m+i,E=e[v],f[m]={x:l.parse(E[0],v),y:c.parse(E[1],v)};return f}parseObjectData(t,e,i,r){const{xScale:l,yScale:c}=t,{xAxisKey:f="x",yAxisKey:m="y"}=this._parsing,p=new Array(r);let v,E,S,R;for(v=0,E=r;v<E;++v)S=v+i,R=e[S],p[v]={x:l.parse(Jh(R,f),S),y:c.parse(Jh(R,m),S)};return p}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,l=this._cachedMeta,c=e[t.axis],f={keys:QR(r,!0),values:e._stacks[t.axis]._visualValues};return vS(f,c,l.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const l=i[e.axis];let c=l===null?NaN:l;const f=r&&i._stacks[e.axis];r&&f&&(r.values=f,c=vS(r,l,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,l=i._sorted&&t===i.iScale,c=r.length,f=this._getOtherScale(t),m=k6(e,i,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:v,max:E}=I6(f);let S,R;function P(){R=r[S];const k=R[f.axis];return!Ta(R[t.axis])||v>k||E<k}for(S=0;S<c&&!(!P()&&(this.updateRangeFromParsed(p,t,R,m),l));++S);if(l){for(S=c-1;S>=0;--S)if(!P()){this.updateRangeFromParsed(p,t,R,m);break}}return p}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,l,c;for(r=0,l=e.length;r<l;++r)c=e[r][t.axis],Ta(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,l=this.getParsed(t);return{label:i?""+i.getLabelForValue(l[i.axis]):"",value:r?""+r.getLabelForValue(l[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=x6(Se(this.options.clip,A6(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],l=e.chartArea,c=[],f=this._drawStart||0,m=this._drawCount||r.length-f,p=this.options.drawActiveElementsOnTop;let v;for(i.dataset&&i.dataset.draw(t,l,f,m),v=f;v<f+m;++v){const E=r[v];E.hidden||(E.active&&p?c.push(E):E.draw(t,l))}for(v=0;v<c.length;++v)c[v].draw(t,l)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let l;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];l=c.$context||(c.$context=O6(this.getContext(),t,c)),l.parsed=this.getParsed(t),l.raw=r.data[t],l.index=l.dataIndex=t}else l=this.$context||(this.$context=M6(this.chart.getContext(),this.index)),l.dataset=r,l.index=l.datasetIndex=this.index;return l.active=!!e,l.mode=i,l}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",l=this._cachedDataOpts,c=t+"-"+e,f=l[c],m=this.enableOptionSharing&&Cm(i);if(f)return ES(f,m);const p=this.chart.config,v=p.datasetElementScopeKeys(this._type,t),E=r?[`${t}Hover`,"hover",t,""]:[t,""],S=p.getOptionScopes(this.getDataset(),v),R=Object.keys(an.elements[t]),P=()=>this.getContext(i,r,e),k=p.resolveNamedOptions(S,R,P,E);return k.$shared&&(k.$shared=m,l[c]=Object.freeze(ES(k,m))),k}_resolveAnimations(t,e,i){const r=this.chart,l=this._cachedDataOpts,c=`animation-${e}`,f=l[c];if(f)return f;let m;if(r.options.animation!==!1){const v=this.chart.config,E=v.datasetAnimationScopeKeys(this._type,e),S=v.getOptionScopes(this.getDataset(),E);m=v.createResolver(S,this.getContext(t,i,e))}const p=new XR(r,m&&m.animations);return m&&m._cacheable&&(l[c]=Object.freeze(p)),p}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||R_(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,l=this.getSharedOptions(i),c=this.includeOptions(e,l)||l!==r;return this.updateSharedOptions(l,e,i),{sharedOptions:l,includeOptions:c}}updateElement(t,e,i,r){R_(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!R_(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const l=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(l)||l})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[f,m,p]of this._syncList)this[f](m,p);this._syncList=[];const r=i.length,l=e.length,c=Math.min(l,r);c&&this.parse(0,c),l>r?this._insertElements(r,l-r,t):l<r&&this._removeElements(l,r-l)}_insertElements(t,e,i=!0){const r=this._cachedMeta,l=r.data,c=t+e;let f;const m=p=>{for(p.length+=e,f=p.length-1;f>=c;f--)p[f]=p[f-e]};for(m(l),f=t;f<c;++f)l[f]=new this.dataElementType;this._parsing&&m(r._parsed),this.parse(t,e),i&&this.updateElements(l,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&oh(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Xt(Nh,"defaults",{}),Xt(Nh,"datasetElementType",null),Xt(Nh,"dataElementType",null);function D6(n,t,e){let i=1,r=1,l=0,c=0;if(t<mn){const f=n,m=f+t,p=Math.cos(f),v=Math.sin(f),E=Math.cos(m),S=Math.sin(m),R=(Y,st,Q)=>Mm(Y,f,m,!0)?1:Math.max(st,st*e,Q,Q*e),P=(Y,st,Q)=>Mm(Y,f,m,!0)?-1:Math.min(st,st*e,Q,Q*e),k=R(0,p,E),D=R(vn,v,S),U=P(He,p,E),q=P(He+vn,v,S);i=(k-U)/2,r=(D-q)/2,l=-(k+U)/2,c=-(D+q)/2}return{ratioX:i,ratioY:r,offsetX:l,offsetY:c}}class Th extends Nh{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let l=m=>+i[m];if(pe(i[t])){const{key:m="value"}=this._parsing;l=p=>+Jh(i[p],m)}let c,f;for(c=t,f=t+e;c<f;++c)r._parsed[c]=l(c)}}_getRotation(){return Vl(this.options.rotation-90)}_getCircumference(){return Vl(this.options.circumference)}_getRotationExtents(){let t=mn,e=-mn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,l=r._getRotation(),c=r._getCircumference();t=Math.min(t,l),e=Math.max(e,l+c)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,r=this._cachedMeta,l=r.data,c=this.getMaxBorderWidth()+this.getMaxOffset(l)+this.options.spacing,f=Math.max((Math.min(i.width,i.height)-c)/2,0),m=Math.min(gz(this.options.cutout,f),1),p=this._getRingWeight(this.index),{circumference:v,rotation:E}=this._getRotationExtents(),{ratioX:S,ratioY:R,offsetX:P,offsetY:k}=D6(E,v,m),D=(i.width-c)/S,U=(i.height-c)/R,q=Math.max(Math.min(D,U)/2,0),Y=LR(this.options.radius,q),st=Math.max(Y*m,0),Q=(Y-st)/this._getVisibleDatasetWeightTotal();this.offsetX=P*Y,this.offsetY=k*Y,r.total=this.calculateTotal(),this.outerRadius=Y-Q*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Q*p,0),this.updateElements(l,0,l.length,t)}_circumference(t,e){const i=this.options,r=this._cachedMeta,l=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*l/mn)}updateElements(t,e,i,r){const l=r==="reset",c=this.chart,f=c.chartArea,p=c.options.animation,v=(f.left+f.right)/2,E=(f.top+f.bottom)/2,S=l&&p.animateScale,R=S?0:this.innerRadius,P=S?0:this.outerRadius,{sharedOptions:k,includeOptions:D}=this._getSharedOptions(e,r);let U=this._getRotation(),q;for(q=0;q<e;++q)U+=this._circumference(q,l);for(q=e;q<e+i;++q){const Y=this._circumference(q,l),st=t[q],Q={x:v+this.offsetX,y:E+this.offsetY,startAngle:U,endAngle:U+Y,circumference:Y,outerRadius:P,innerRadius:R};D&&(Q.options=k||this.resolveDataElementOptions(q,st.active?"active":r)),U+=Y,this.updateElement(st,q,Q,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,r;for(r=0;r<e.length;r++){const l=t._parsed[r];l!==null&&!isNaN(l)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(i+=Math.abs(l))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?mn*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],l=Bz(e._parsed[t],i.options.locale);return{label:r[t]||"",value:l}}getMaxBorderWidth(t){let e=0;const i=this.chart;let r,l,c,f,m;if(!t){for(r=0,l=i.data.datasets.length;r<l;++r)if(i.isDatasetVisible(r)){c=i.getDatasetMeta(r),t=c.data,f=c.controller;break}}if(!t)return 0;for(r=0,l=t.length;r<l;++r)m=f.resolveDataElementOptions(r),m.borderAlign!=="inner"&&(e=Math.max(e,m.borderWidth||0,m.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){const l=this.resolveDataElementOptions(i);e=Math.max(e,l.offset||0,l.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(Se(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Xt(Th,"id","doughnut"),Xt(Th,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Xt(Th,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),Xt(Th,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((l,c)=>{const m=t.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,fontColor:r,lineWidth:m.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class _y extends Th{}Xt(_y,"id","pie"),Xt(_y,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Ol(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class e0{constructor(t){Xt(this,"options");this.options=t||{}}static override(t){Object.assign(e0.prototype,t)}init(){}formats(){return Ol()}parse(){return Ol()}format(){return Ol()}add(){return Ol()}diff(){return Ol()}startOf(){return Ol()}endOf(){return Ol()}}var L6={_date:e0};function N6(n,t,e,i){const{controller:r,data:l,_sorted:c}=n,f=r._cachedMeta.iScale,m=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(f&&t===f.axis&&t!=="r"&&c&&l.length){const p=f._reversePixels?Cz:my;if(i){if(r._sharedOptions){const v=l[0],E=typeof v.getRange=="function"&&v.getRange(t);if(E){const S=p(l,t,e-E),R=p(l,t,e+E);return{lo:S.lo,hi:R.hi}}}}else{const v=p(l,t,e);if(m){const{vScale:E}=r._cachedMeta,{_parsed:S}=n,R=S.slice(0,v.lo+1).reverse().findIndex(k=>!ni(k[E.axis]));v.lo-=Math.max(0,R);const P=S.slice(v.hi).findIndex(k=>!ni(k[E.axis]));v.hi+=Math.max(0,P)}return v}}return{lo:0,hi:l.length-1}}function vp(n,t,e,i,r){const l=n.getSortedVisibleDatasetMetas(),c=e[t];for(let f=0,m=l.length;f<m;++f){const{index:p,data:v}=l[f],{lo:E,hi:S}=N6(l[f],t,c,r);for(let R=E;R<=S;++R){const P=v[R];P.skip||i(P,p,R)}}}function V6(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const l=t?Math.abs(i.x-r.x):0,c=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(c,2))}}function C_(n,t,e,i,r){const l=[];return!r&&!n.isPointInArea(t)||vp(n,e,t,function(f,m,p){!r&&!qR(f,n.chartArea,0)||f.inRange(t.x,t.y,i)&&l.push({element:f,datasetIndex:m,index:p})},!0),l}function z6(n,t,e,i){let r=[];function l(c,f,m){const{startAngle:p,endAngle:v}=c.getProps(["startAngle","endAngle"],i),{angle:E}=VR(c,{x:t.x,y:t.y});Mm(E,p,v)&&r.push({element:c,datasetIndex:f,index:m})}return vp(n,e,t,l),r}function B6(n,t,e,i,r,l){let c=[];const f=V6(e);let m=Number.POSITIVE_INFINITY;function p(v,E,S){const R=v.inRange(t.x,t.y,r);if(i&&!R)return;const P=v.getCenterPoint(r);if(!(!!l||n.isPointInArea(P))&&!R)return;const D=f(t,P);D<m?(c=[{element:v,datasetIndex:E,index:S}],m=D):D===m&&c.push({element:v,datasetIndex:E,index:S})}return vp(n,e,t,p),c}function I_(n,t,e,i,r,l){return!l&&!n.isPointInArea(t)?[]:e==="r"&&!i?z6(n,t,e,r):B6(n,t,e,i,r,l)}function wS(n,t,e,i,r){const l=[],c=e==="x"?"inXRange":"inYRange";let f=!1;return vp(n,e,t,(m,p,v)=>{m[c]&&m[c](t[e],r)&&(l.push({element:m,datasetIndex:p,index:v}),f=f||m.inRange(t.x,t.y,r))}),i&&!f?[]:l}var U6={modes:{index(n,t,e,i){const r=Dl(t,n),l=e.axis||"x",c=e.includeInvisible||!1,f=e.intersect?C_(n,r,l,i,c):I_(n,r,l,!1,i,c),m=[];return f.length?(n.getSortedVisibleDatasetMetas().forEach(p=>{const v=f[0].index,E=p.data[v];E&&!E.skip&&m.push({element:E,datasetIndex:p.index,index:v})}),m):[]},dataset(n,t,e,i){const r=Dl(t,n),l=e.axis||"xy",c=e.includeInvisible||!1;let f=e.intersect?C_(n,r,l,i,c):I_(n,r,l,!1,i,c);if(f.length>0){const m=f[0].datasetIndex,p=n.getDatasetMeta(m).data;f=[];for(let v=0;v<p.length;++v)f.push({element:p[v],datasetIndex:m,index:v})}return f},point(n,t,e,i){const r=Dl(t,n),l=e.axis||"xy",c=e.includeInvisible||!1;return C_(n,r,l,i,c)},nearest(n,t,e,i){const r=Dl(t,n),l=e.axis||"xy",c=e.includeInvisible||!1;return I_(n,r,l,e.intersect,i,c)},x(n,t,e,i){const r=Dl(t,n);return wS(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=Dl(t,n);return wS(n,r,"y",e.intersect,i)}}};const JR=["left","top","right","bottom"];function lh(n,t){return n.filter(e=>e.pos===t)}function SS(n,t){return n.filter(e=>JR.indexOf(e.pos)===-1&&e.box.axis===t)}function uh(n,t){return n.sort((e,i)=>{const r=t?i:e,l=t?e:i;return r.weight===l.weight?r.index-l.index:r.weight-l.weight})}function j6(n){const t=[];let e,i,r,l,c,f;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:l,options:{stack:c,stackWeight:f=1}}=r,t.push({index:e,box:r,pos:l,horizontal:r.isHorizontal(),weight:r.weight,stack:c&&l+c,stackWeight:f});return t}function H6(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:l}=e;if(!i||!JR.includes(r))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=l}return t}function F6(n,t){const e=H6(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let l,c,f;for(l=0,c=n.length;l<c;++l){f=n[l];const{fullSize:m}=f.box,p=e[f.stack],v=p&&f.stackWeight/p.weight;f.horizontal?(f.width=v?v*i:m&&t.availableWidth,f.height=r):(f.width=i,f.height=v?v*r:m&&t.availableHeight)}return e}function q6(n){const t=j6(n),e=uh(t.filter(p=>p.box.fullSize),!0),i=uh(lh(t,"left"),!0),r=uh(lh(t,"right")),l=uh(lh(t,"top"),!0),c=uh(lh(t,"bottom")),f=SS(t,"x"),m=SS(t,"y");return{fullSize:e,leftAndTop:i.concat(l),rightAndBottom:r.concat(m).concat(c).concat(f),chartArea:lh(t,"chartArea"),vertical:i.concat(r).concat(m),horizontal:l.concat(c).concat(f)}}function AS(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function tC(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function G6(n,t,e,i){const{pos:r,box:l}=e,c=n.maxPadding;if(!pe(r)){e.size&&(n[r]-=e.size);const E=i[e.stack]||{size:0,count:1};E.size=Math.max(E.size,e.horizontal?l.height:l.width),e.size=E.size/E.count,n[r]+=e.size}l.getPadding&&tC(c,l.getPadding());const f=Math.max(0,t.outerWidth-AS(c,n,"left","right")),m=Math.max(0,t.outerHeight-AS(c,n,"top","bottom")),p=f!==n.w,v=m!==n.h;return n.w=f,n.h=m,e.horizontal?{same:p,other:v}:{same:v,other:p}}function Z6(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function W6(n,t){const e=t.maxPadding;function i(r){const l={left:0,top:0,right:0,bottom:0};return r.forEach(c=>{l[c]=Math.max(t[c],e[c])}),l}return i(n?["left","right"]:["top","bottom"])}function Eh(n,t,e,i){const r=[];let l,c,f,m,p,v;for(l=0,c=n.length,p=0;l<c;++l){f=n[l],m=f.box,m.update(f.width||t.w,f.height||t.h,W6(f.horizontal,t));const{same:E,other:S}=G6(t,e,f,i);p|=E&&r.length,v=v||S,m.fullSize||r.push(f)}return p&&Eh(r,t,e,i)||v}function Nd(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function xS(n,t,e,i){const r=e.padding;let{x:l,y:c}=t;for(const f of n){const m=f.box,p=i[f.stack]||{placed:0,weight:1},v=f.stackWeight/p.weight||1;if(f.horizontal){const E=t.w*v,S=p.size||m.height;Cm(p.start)&&(c=p.start),m.fullSize?Nd(m,r.left,c,e.outerWidth-r.right-r.left,S):Nd(m,t.left+p.placed,c,E,S),p.start=c,p.placed+=E,c=m.bottom}else{const E=t.h*v,S=p.size||m.width;Cm(p.start)&&(l=p.start),m.fullSize?Nd(m,l,r.top,S,e.outerHeight-r.bottom-r.top):Nd(m,l,t.top+p.placed,S,E),p.start=l,p.placed+=E,l=m.right}}t.x=l,t.y=c}var xo={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=Ys(n.options.layout.padding),l=Math.max(t-r.width,0),c=Math.max(e-r.height,0),f=q6(n.boxes),m=f.vertical,p=f.horizontal;we(n.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const v=m.reduce((k,D)=>D.box.options&&D.box.options.display===!1?k:k+1,0)||1,E=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:l,availableHeight:c,vBoxMaxWidth:l/2/v,hBoxMaxHeight:c/2}),S=Object.assign({},r);tC(S,Ys(i));const R=Object.assign({maxPadding:S,w:l,h:c,x:r.left,y:r.top},r),P=F6(m.concat(p),E);Eh(f.fullSize,R,E,P),Eh(m,R,E,P),Eh(p,R,E,P)&&Eh(m,R,E,P),Z6(R),xS(f.leftAndTop,R,E,P),R.x+=R.w,R.y+=R.h,xS(f.rightAndBottom,R,E,P),n.chartArea={left:R.left,top:R.top,right:R.left+R.w,bottom:R.top+R.h,height:R.h,width:R.w},we(f.chartArea,k=>{const D=k.box;Object.assign(D,n.chartArea),D.update(R.w,R.h,{left:0,top:0,right:0,bottom:0})})}};class eC{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class Y6 extends eC{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const nm="$chartjs",K6={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},RS=n=>n===null||n==="";function $6(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[nm]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",RS(r)){const l=gS(n,"width");l!==void 0&&(n.width=l)}if(RS(i))if(n.style.height==="")n.height=n.width/(t||2);else{const l=gS(n,"height");l!==void 0&&(n.height=l)}return n}const nC=p6?{passive:!0}:!1;function X6(n,t,e){n&&n.addEventListener(t,e,nC)}function Q6(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,nC)}function J6(n,t){const e=K6[n.type]||n.type,{x:i,y:r}=Dl(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Dm(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function tB(n,t,e){const i=n.canvas,r=new MutationObserver(l=>{let c=!1;for(const f of l)c=c||Dm(f.addedNodes,i),c=c&&!Dm(f.removedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function eB(n,t,e){const i=n.canvas,r=new MutationObserver(l=>{let c=!1;for(const f of l)c=c||Dm(f.removedNodes,i),c=c&&!Dm(f.addedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const tf=new Map;let CS=0;function iC(){const n=window.devicePixelRatio;n!==CS&&(CS=n,tf.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function nB(n,t){tf.size||window.addEventListener("resize",iC),tf.set(n,t)}function iB(n){tf.delete(n),tf.size||window.removeEventListener("resize",iC)}function sB(n,t,e){const i=n.canvas,r=i&&t0(i);if(!r)return;const l=UR((f,m)=>{const p=r.clientWidth;e(f,m),p<r.clientWidth&&e()},window),c=new ResizeObserver(f=>{const m=f[0],p=m.contentRect.width,v=m.contentRect.height;p===0&&v===0||l(p,v)});return c.observe(r),nB(n,l),c}function P_(n,t,e){e&&e.disconnect(),t==="resize"&&iB(n)}function rB(n,t,e){const i=n.canvas,r=UR(l=>{n.ctx!==null&&e(J6(l,n))},n);return X6(i,t,r),r}class aB extends eC{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?($6(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[nm])return!1;const i=e[nm].initial;["height","width"].forEach(l=>{const c=i[l];ni(c)?e.removeAttribute(l):e.setAttribute(l,c)});const r=i.style||{};return Object.keys(r).forEach(l=>{e.style[l]=r[l]}),e.width=e.width,delete e[nm],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),c={attach:tB,detach:eB,resize:sB}[e]||rB;r[e]=c(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:P_,detach:P_,resize:P_}[e]||Q6)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return m6(t,e,i,r)}isAttached(t){const e=t&&t0(t);return!!(e&&e.isConnected)}}function oB(n){return!Jv()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Y6:aB}var Hd;let vf=(Hd=class{constructor(){Xt(this,"x");Xt(this,"y");Xt(this,"active",!1);Xt(this,"options");Xt(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Pm(this.x)&&Pm(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(l=>{r[l]=i[l]&&i[l].active()?i[l]._to:this[l]}),r}},Xt(Hd,"defaults",{}),Xt(Hd,"defaultRoutes"),Hd);function lB(n,t){const e=n.options.ticks,i=uB(n),r=Math.min(e.maxTicksLimit||i,i),l=e.major.enabled?hB(t):[],c=l.length,f=l[0],m=l[c-1],p=[];if(c>r)return fB(t,p,l,c/r),p;const v=cB(l,t,r);if(c>0){let E,S;const R=c>1?Math.round((m-f)/(c-1)):null;for(Vd(t,p,v,ni(R)?0:f-R,f),E=0,S=c-1;E<S;E++)Vd(t,p,v,l[E],l[E+1]);return Vd(t,p,v,m,ni(R)?t.length:m+R),p}return Vd(t,p,v),p}function uB(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function cB(n,t,e){const i=dB(n),r=t.length/e;if(!i)return Math.max(r,1);const l=wz(i);for(let c=0,f=l.length-1;c<f;c++){const m=l[c];if(m>r)return m}return Math.max(r,1)}function hB(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function fB(n,t,e,i){let r=0,l=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===l&&(t.push(n[c]),r++,l=e[r*i])}function Vd(n,t,e,i,r){const l=Se(i,0),c=Math.min(Se(r,n.length),n.length);let f=0,m,p,v;for(e=Math.ceil(e),r&&(m=r-i,e=m/Math.floor(m/e)),v=l;v<0;)f++,v=Math.round(l+f*e);for(p=Math.max(l,0);p<c;p++)p===v&&(t.push(n[p]),f++,v=Math.round(l+f*e))}function dB(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const mB=n=>n==="left"?"right":n==="right"?"left":n,IS=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,PS=(n,t)=>Math.min(t||n,n);function MS(n,t){const e=[],i=n.length/t,r=n.length;let l=0;for(;l<r;l+=i)e.push(n[Math.floor(l)]);return e}function pB(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),l=n._startPixel,c=n._endPixel,f=1e-6;let m=n.getPixelForTick(r),p;if(!(e&&(i===1?p=Math.max(m-l,c-m):t===0?p=(n.getPixelForTick(1)-m)/2:p=(m-n.getPixelForTick(r-1))/2,m+=r<t?p:-p,m<l-f||m>c+f)))return m}function gB(n,t){we(n,e=>{const i=e.gc,r=i.length/2;let l;if(r>t){for(l=0;l<r;++l)delete e.data[i[l]];i.splice(0,r)}})}function ch(n){return n.drawTicks?n.tickLength:0}function OS(n,t){if(!n.display)return 0;const e=Ai(n.font,t),i=Ys(n.padding);return(Un(n.text)?n.text.length:1)*e.lineHeight+i.height}function _B(n,t){return mc(n,{scale:t,type:"scale"})}function yB(n,t,e){return mc(n,{tick:e,index:t,type:"tick"})}function vB(n,t,e){let i=jR(n);return(e&&t!=="right"||!e&&t==="right")&&(i=mB(i)),i}function bB(n,t,e,i){const{top:r,left:l,bottom:c,right:f,chart:m}=n,{chartArea:p,scales:v}=m;let E=0,S,R,P;const k=c-r,D=f-l;if(n.isHorizontal()){if(R=Ki(i,l,f),pe(e)){const U=Object.keys(e)[0],q=e[U];P=v[U].getPixelForValue(q)+k-t}else e==="center"?P=(p.bottom+p.top)/2+k-t:P=IS(n,e,t);S=f-l}else{if(pe(e)){const U=Object.keys(e)[0],q=e[U];R=v[U].getPixelForValue(q)-D+t}else e==="center"?R=(p.left+p.right)/2-D+t:R=IS(n,e,t);P=Ki(i,c,r),E=e==="left"?-vn:vn}return{titleX:R,titleY:P,maxWidth:S,rotation:E}}class bp extends vf{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=_r(t,Number.POSITIVE_INFINITY),e=_r(e,Number.NEGATIVE_INFINITY),i=_r(i,Number.POSITIVE_INFINITY),r=_r(r,Number.NEGATIVE_INFINITY),{min:_r(t,i),max:_r(e,r),minDefined:Ta(t),maxDefined:Ta(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:l}=this.getUserBounds(),c;if(r&&l)return{min:e,max:i};const f=this.getMatchingVisibleMetas();for(let m=0,p=f.length;m<p;++m)c=f[m].controller.getMinMax(this,t),r||(e=Math.min(e,c.min)),l||(i=Math.max(i,c.max));return e=l&&e>i?i:e,i=r&&e>i?e:i,{min:_r(e,_r(i,e)),max:_r(i,_r(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ue(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:l,ticks:c}=this.options,f=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Jz(this,l,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const m=f<this.ticks.length;this._convertTicksToLabels(m?MS(this.ticks,f):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=lB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),m&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ue(this.options.afterUpdate,[this])}beforeSetDimensions(){Ue(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ue(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ue(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ue(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,l;for(i=0,r=t.length;i<r;i++)l=t[i],l.label=Ue(e.callback,[l.value,i,t],this)}afterTickToLabelConversion(){Ue(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ue(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=PS(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,l=e.maxRotation;let c=r,f,m,p;if(!this._isVisible()||!e.display||r>=l||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const v=this._getLabelSizes(),E=v.widest.width,S=v.highest.height,R=bs(this.chart.width-E,0,this.maxWidth);f=t.offset?this.maxWidth/i:R/(i-1),E+6>f&&(f=R/(i-(t.offset?.5:1)),m=this.maxHeight-ch(t.grid)-e.padding-OS(t.title,this.chart.options.font),p=Math.sqrt(E*E+S*S),c=Az(Math.min(Math.asin(bs((v.highest.height+6)/f,-1,1)),Math.asin(bs(m/p,-1,1))-Math.asin(bs(S/p,-1,1)))),c=Math.max(r,Math.min(l,c))),this.labelRotation=c}afterCalculateLabelRotation(){Ue(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ue(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:l}}=this,c=this._isVisible(),f=this.isHorizontal();if(c){const m=OS(r,e.options.font);if(f?(t.width=this.maxWidth,t.height=ch(l)+m):(t.height=this.maxHeight,t.width=ch(l)+m),i.display&&this.ticks.length){const{first:p,last:v,widest:E,highest:S}=this._getLabelSizes(),R=i.padding*2,P=Vl(this.labelRotation),k=Math.cos(P),D=Math.sin(P);if(f){const U=i.mirror?0:D*E.width+k*S.height;t.height=Math.min(this.maxHeight,t.height+U+R)}else{const U=i.mirror?0:k*E.width+D*S.height;t.width=Math.min(this.maxWidth,t.width+U+R)}this._calculatePadding(p,v,D,k)}}this._handleMargins(),f?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:l,padding:c},position:f}=this.options,m=this.labelRotation!==0,p=f!=="top"&&this.axis==="x";if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,E=this.right-this.getPixelForTick(this.ticks.length-1);let S=0,R=0;m?p?(S=r*t.width,R=i*e.height):(S=i*t.height,R=r*e.width):l==="start"?R=e.width:l==="end"?S=t.width:l!=="inner"&&(S=t.width/2,R=e.width/2),this.paddingLeft=Math.max((S-v+c)*this.width/(this.width-v),0),this.paddingRight=Math.max((R-E+c)*this.width/(this.width-E),0)}else{let v=e.height/2,E=t.height/2;l==="start"?(v=0,E=t.height):l==="end"&&(v=e.height,E=0),this.paddingTop=v+c,this.paddingBottom=E+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ue(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)ni(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=MS(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:l}=this,c=[],f=[],m=Math.floor(e/PS(e,i));let p=0,v=0,E,S,R,P,k,D,U,q,Y,st,Q;for(E=0;E<e;E+=m){if(P=t[E].label,k=this._resolveTickFontOptions(E),r.font=D=k.string,U=l[D]=l[D]||{data:{},gc:[]},q=k.lineHeight,Y=st=0,!ni(P)&&!Un(P))Y=cS(r,U.data,U.gc,Y,P),st=q;else if(Un(P))for(S=0,R=P.length;S<R;++S)Q=P[S],!ni(Q)&&!Un(Q)&&(Y=cS(r,U.data,U.gc,Y,Q),st+=q);c.push(Y),f.push(st),p=Math.max(Y,p),v=Math.max(st,v)}gB(l,e);const ht=c.indexOf(p),V=f.indexOf(v),O=z=>({width:c[z]||0,height:f[z]||0});return{first:O(0),last:O(e-1),widest:O(ht),highest:O(V),widths:c,heights:f}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Rz(this._alignToPixels?Ml(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=yB(this.getContext(),t,i))}return this.$context||(this.$context=_B(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Vl(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),l=this._getLabelSizes(),c=t.autoSkipPadding||0,f=l?l.widest.width+c:0,m=l?l.highest.height+c:0;return this.isHorizontal()?m*i>f*r?f/i:m/r:m*r<f*i?m/i:f/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:l,position:c,border:f}=r,m=l.offset,p=this.isHorizontal(),E=this.ticks.length+(m?1:0),S=ch(l),R=[],P=f.setContext(this.getContext()),k=P.display?P.width:0,D=k/2,U=function(et){return Ml(i,et,k)};let q,Y,st,Q,ht,V,O,z,B,H,G,F;if(c==="top")q=U(this.bottom),V=this.bottom-S,z=q-D,H=U(t.top)+D,F=t.bottom;else if(c==="bottom")q=U(this.top),H=t.top,F=U(t.bottom)-D,V=q+D,z=this.top+S;else if(c==="left")q=U(this.right),ht=this.right-S,O=q-D,B=U(t.left)+D,G=t.right;else if(c==="right")q=U(this.left),B=t.left,G=U(t.right)-D,ht=q+D,O=this.left+S;else if(e==="x"){if(c==="center")q=U((t.top+t.bottom)/2+.5);else if(pe(c)){const et=Object.keys(c)[0],vt=c[et];q=U(this.chart.scales[et].getPixelForValue(vt))}H=t.top,F=t.bottom,V=q+D,z=V+S}else if(e==="y"){if(c==="center")q=U((t.left+t.right)/2);else if(pe(c)){const et=Object.keys(c)[0],vt=c[et];q=U(this.chart.scales[et].getPixelForValue(vt))}ht=q-D,O=ht-S,B=t.left,G=t.right}const Yt=Se(r.ticks.maxTicksLimit,E),Dt=Math.max(1,Math.ceil(E/Yt));for(Y=0;Y<E;Y+=Dt){const et=this.getContext(Y),vt=l.setContext(et),mt=f.setContext(et),Vt=vt.lineWidth,j=vt.color,ct=mt.dash||[],Tt=mt.dashOffset,yt=vt.tickWidth,St=vt.tickColor,xt=vt.tickBorderDash||[],Et=vt.tickBorderDashOffset;st=pB(this,Y,m),st!==void 0&&(Q=Ml(i,st,Vt),p?ht=O=B=G=Q:V=z=H=F=Q,R.push({tx1:ht,ty1:V,tx2:O,ty2:z,x1:B,y1:H,x2:G,y2:F,width:Vt,color:j,borderDash:ct,borderDashOffset:Tt,tickWidth:yt,tickColor:St,tickBorderDash:xt,tickBorderDashOffset:Et}))}return this._ticksLength=E,this._borderValue=q,R}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:l}=i,c=this.isHorizontal(),f=this.ticks,{align:m,crossAlign:p,padding:v,mirror:E}=l,S=ch(i.grid),R=S+v,P=E?-v:R,k=-Vl(this.labelRotation),D=[];let U,q,Y,st,Q,ht,V,O,z,B,H,G,F="middle";if(r==="top")ht=this.bottom-P,V=this._getXAxisLabelAlignment();else if(r==="bottom")ht=this.top+P,V=this._getXAxisLabelAlignment();else if(r==="left"){const Dt=this._getYAxisLabelAlignment(S);V=Dt.textAlign,Q=Dt.x}else if(r==="right"){const Dt=this._getYAxisLabelAlignment(S);V=Dt.textAlign,Q=Dt.x}else if(e==="x"){if(r==="center")ht=(t.top+t.bottom)/2+R;else if(pe(r)){const Dt=Object.keys(r)[0],et=r[Dt];ht=this.chart.scales[Dt].getPixelForValue(et)+R}V=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")Q=(t.left+t.right)/2-R;else if(pe(r)){const Dt=Object.keys(r)[0],et=r[Dt];Q=this.chart.scales[Dt].getPixelForValue(et)}V=this._getYAxisLabelAlignment(S).textAlign}e==="y"&&(m==="start"?F="top":m==="end"&&(F="bottom"));const Yt=this._getLabelSizes();for(U=0,q=f.length;U<q;++U){Y=f[U],st=Y.label;const Dt=l.setContext(this.getContext(U));O=this.getPixelForTick(U)+l.labelOffset,z=this._resolveTickFontOptions(U),B=z.lineHeight,H=Un(st)?st.length:1;const et=H/2,vt=Dt.color,mt=Dt.textStrokeColor,Vt=Dt.textStrokeWidth;let j=V;c?(Q=O,V==="inner"&&(U===q-1?j=this.options.reverse?"left":"right":U===0?j=this.options.reverse?"right":"left":j="center"),r==="top"?p==="near"||k!==0?G=-H*B+B/2:p==="center"?G=-Yt.highest.height/2-et*B+B:G=-Yt.highest.height+B/2:p==="near"||k!==0?G=B/2:p==="center"?G=Yt.highest.height/2-et*B:G=Yt.highest.height-H*B,E&&(G*=-1),k!==0&&!Dt.showLabelBackdrop&&(Q+=B/2*Math.sin(k))):(ht=O,G=(1-H)*B/2);let ct;if(Dt.showLabelBackdrop){const Tt=Ys(Dt.backdropPadding),yt=Yt.heights[U],St=Yt.widths[U];let xt=G-Tt.top,Et=0-Tt.left;switch(F){case"middle":xt-=yt/2;break;case"bottom":xt-=yt;break}switch(V){case"center":Et-=St/2;break;case"right":Et-=St;break;case"inner":U===q-1?Et-=St:U>0&&(Et-=St/2);break}ct={left:Et,top:xt,width:St+Tt.width,height:yt+Tt.height,color:Dt.backdropColor}}D.push({label:st,font:z,textOffset:G,options:{rotation:k,color:vt,strokeColor:mt,strokeWidth:Vt,textAlign:j,textBaseline:F,translation:[Q,ht],backdrop:ct}})}return D}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Vl(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:l}}=this.options,c=this._getLabelSizes(),f=t+l,m=c.widest.width;let p,v;return e==="left"?r?(v=this.right+l,i==="near"?p="left":i==="center"?(p="center",v+=m/2):(p="right",v+=m)):(v=this.right-f,i==="near"?p="right":i==="center"?(p="center",v-=m/2):(p="left",v=this.left)):e==="right"?r?(v=this.left+l,i==="near"?p="right":i==="center"?(p="center",v-=m/2):(p="left",v-=m)):(v=this.left+f,i==="near"?p="left":i==="center"?(p="center",v+=m/2):(p="right",v=this.right)):p="right",{textAlign:p,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:l,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,l,c),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(l=>l.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let l,c;const f=(m,p,v)=>{!v.width||!v.color||(i.save(),i.lineWidth=v.width,i.strokeStyle=v.color,i.setLineDash(v.borderDash||[]),i.lineDashOffset=v.borderDashOffset,i.beginPath(),i.moveTo(m.x,m.y),i.lineTo(p.x,p.y),i.stroke(),i.restore())};if(e.display)for(l=0,c=r.length;l<c;++l){const m=r[l];e.drawOnChartArea&&f({x:m.x1,y:m.y1},{x:m.x2,y:m.y2},m),e.drawTicks&&f({x:m.tx1,y:m.ty1},{x:m.tx2,y:m.ty2},{color:m.tickColor,width:m.tickWidth,borderDash:m.tickBorderDash,borderDashOffset:m.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,l=i.setContext(this.getContext()),c=i.display?l.width:0;if(!c)return;const f=r.setContext(this.getContext(0)).lineWidth,m=this._borderValue;let p,v,E,S;this.isHorizontal()?(p=Ml(t,this.left,c)-c/2,v=Ml(t,this.right,f)+f/2,E=S=m):(E=Ml(t,this.top,c)-c/2,S=Ml(t,this.bottom,f)+f/2,p=v=m),e.save(),e.lineWidth=l.width,e.strokeStyle=l.color,e.beginPath(),e.moveTo(p,E),e.lineTo(v,S),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Wv(i,r);const l=this.getLabelItems(t);for(const c of l){const f=c.options,m=c.font,p=c.label,v=c.textOffset;Om(i,p,0,v,m,f)}r&&Yv(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const l=Ai(i.font),c=Ys(i.padding),f=i.align;let m=l.lineHeight/2;e==="bottom"||e==="center"||pe(e)?(m+=c.bottom,Un(i.text)&&(m+=l.lineHeight*(i.text.length-1))):m+=c.top;const{titleX:p,titleY:v,maxWidth:E,rotation:S}=bB(this,m,e,f);Om(t,i.text,0,0,l,{color:i.color,maxWidth:E,rotation:S,textAlign:vB(f,e,r),textBaseline:"middle",translation:[p,v]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Se(t.grid&&t.grid.z,-1),r=Se(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==bp.prototype.draw?[{z:e,draw:l=>{this.draw(l)}}]:[{z:i,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let l,c;for(l=0,c=e.length;l<c;++l){const f=e[l];f[i]===this.id&&(!t||f.type===t)&&r.push(f)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Ai(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class zd{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;wB(e)&&(i=this.register(e));const r=this.items,l=t.id,c=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+t);return l in r||(r[l]=t,TB(t,c,i),this.override&&an.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in an[r]&&(delete an[r][i],this.override&&delete Zl[i])}}function TB(n,t,e){const i=Qh(Object.create(null),[e?an.get(e):{},an.get(t),n.defaults]);an.set(t,i),n.defaultRoutes&&EB(t,n.defaultRoutes),n.descriptors&&an.describe(t,n.descriptors)}function EB(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),l=[n].concat(i).join("."),c=t[e].split("."),f=c.pop(),m=c.join(".");an.route(l,r,m,f)})}function wB(n){return"id"in n&&"defaults"in n}class SB{constructor(){this.controllers=new zd(Nh,"datasets",!0),this.elements=new zd(vf,"elements"),this.plugins=new zd(Object,"plugins"),this.scales=new zd(bp,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const l=i||this._getRegistryForType(r);i||l.isForType(r)||l===this.plugins&&r.id?this._exec(t,l,r):we(r,c=>{const f=i||this._getRegistryForType(c);this._exec(t,f,c)})})}_exec(t,e,i){const r=Gv(t);Ue(i["before"+r],[],i),e[t](i),Ue(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var vr=new SB;class AB{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const l=r?this._descriptors(t).filter(r):this._descriptors(t),c=this._notify(l,t,e,i);return e==="afterDestroy"&&(this._notify(l,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,e,i,r){r=r||{};for(const l of t){const c=l.plugin,f=c[i],m=[e,r,l.options];if(Ue(f,m,c)===!1&&r.cancelable)return!1}return!0}invalidate(){ni(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Se(i.options&&i.options.plugins,{}),l=xB(i);return r===!1&&!e?[]:CB(t,l,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(l,c)=>l.filter(f=>!c.some(m=>f.plugin.id===m.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function xB(n){const t={},e=[],i=Object.keys(vr.plugins.items);for(let l=0;l<i.length;l++)e.push(vr.getPlugin(i[l]));const r=n.plugins||[];for(let l=0;l<r.length;l++){const c=r[l];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function RB(n,t){return!t&&n===!1?null:n===!0?{}:n}function CB(n,{plugins:t,localIds:e},i,r){const l=[],c=n.getContext();for(const f of t){const m=f.id,p=RB(i[m],r);p!==null&&l.push({plugin:f,options:IB(n.config,{plugin:f,local:e[m]},p,c)})}return l}function IB(n,{plugin:t,local:e},i,r){const l=n.pluginScopeKeys(t),c=n.getOptionScopes(i,l);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function yy(n,t){const e=an.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function PB(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function MB(n,t){return n===t?"_index_":"_value_"}function kS(n){if(n==="x"||n==="y"||n==="r")return n}function OB(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function vy(n,...t){if(kS(n))return n;for(const e of t){const i=e.axis||OB(e.position)||n.length>1&&kS(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function DS(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function kB(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return DS(n,"x",e[0])||DS(n,"y",e[0])}return{}}function DB(n,t){const e=Zl[n.type]||{scales:{}},i=t.scales||{},r=yy(n.type,t),l=Object.create(null);return Object.keys(i).forEach(c=>{const f=i[c];if(!pe(f))return console.error(`Invalid scale configuration for scale: ${c}`);if(f._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const m=vy(c,f,kB(c,n),an.scales[f.type]),p=MB(m,r),v=e.scales||{};l[c]=Oh(Object.create(null),[{axis:m},f,v[m],v[p]])}),n.data.datasets.forEach(c=>{const f=c.type||n.type,m=c.indexAxis||yy(f,t),v=(Zl[f]||{}).scales||{};Object.keys(v).forEach(E=>{const S=PB(E,m),R=c[S+"AxisID"]||S;l[R]=l[R]||Object.create(null),Oh(l[R],[{axis:S},i[R],v[E]])})}),Object.keys(l).forEach(c=>{const f=l[c];Oh(f,[an.scales[f.type],an.scale])}),l}function sC(n){const t=n.options||(n.options={});t.plugins=Se(t.plugins,{}),t.scales=DB(n,t)}function rC(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function LB(n){return n=n||{},n.data=rC(n.data),sC(n),n}const LS=new Map,aC=new Set;function Bd(n,t){let e=LS.get(n);return e||(e=t(),LS.set(n,e),aC.add(e)),e}const hh=(n,t,e)=>{const i=Jh(t,e);i!==void 0&&n.add(i)};class NB{constructor(t){this._config=LB(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=rC(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),sC(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Bd(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Bd(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Bd(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Bd(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:l}=this,c=this._cachedScopes(t,i),f=c.get(e);if(f)return f;const m=new Set;e.forEach(v=>{t&&(m.add(t),v.forEach(E=>hh(m,t,E))),v.forEach(E=>hh(m,r,E)),v.forEach(E=>hh(m,Zl[l]||{},E)),v.forEach(E=>hh(m,an,E)),v.forEach(E=>hh(m,py,E))});const p=Array.from(m);return p.length===0&&p.push(Object.create(null)),aC.has(e)&&c.set(e,p),p}chartOptionScopes(){const{options:t,type:e}=this;return[t,Zl[e]||{},an.datasets[e]||{},{type:e},an,py]}resolveNamedOptions(t,e,i,r=[""]){const l={$shared:!0},{resolver:c,subPrefixes:f}=NS(this._resolverCache,t,r);let m=c;if(zB(c,e)){l.$shared=!1,i=jo(i)?i():i;const p=this.createResolver(t,i,f);m=sc(c,i,p)}for(const p of e)l[p]=m[p];return l}createResolver(t,e,i=[""],r){const{resolver:l}=NS(this._resolverCache,t,i);return pe(e)?sc(l,e,void 0,r):l}}function NS(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let l=i.get(r);return l||(l={resolver:$v(t,e),subPrefixes:e.filter(f=>!f.toLowerCase().includes("hover"))},i.set(r,l)),l}const VB=n=>pe(n)&&Object.getOwnPropertyNames(n).some(t=>jo(n[t]));function zB(n,t){const{isScriptable:e,isIndexable:i}=GR(n);for(const r of t){const l=e(r),c=i(r),f=(c||l)&&n[r];if(l&&(jo(f)||VB(f))||c&&Un(f))return!0}return!1}var BB="4.5.0";const UB=["top","bottom","left","right","chartArea"];function VS(n,t){return n==="top"||n==="bottom"||UB.indexOf(n)===-1&&t==="x"}function zS(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function BS(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Ue(e&&e.onComplete,[n],t)}function jB(n){const t=n.chart,e=t.options.animation;Ue(e&&e.onProgress,[n],t)}function oC(n){return Jv()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const im={},US=n=>{const t=oC(n);return Object.values(im).filter(e=>e.canvas===t).pop()};function HB(n,t,e){const i=Object.keys(n);for(const r of i){const l=+r;if(l>=t){const c=n[r];delete n[r],(e>0||l>t)&&(n[l+e]=c)}}}function FB(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}var vo;let Tp=(vo=class{static register(...t){vr.add(...t),jS()}static unregister(...t){vr.remove(...t),jS()}constructor(t,e){const i=this.config=new NB(e),r=oC(t),l=US(r);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||oB(r)),this.platform.updateConfig(i);const f=this.platform.acquireContext(r,c.aspectRatio),m=f&&f.canvas,p=m&&m.height,v=m&&m.width;if(this.id=pz(),this.ctx=f,this.canvas=m,this.width=v,this.height=p,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new AB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Oz(E=>this.update(E),c.resizeDelay||0),this._dataChanges=[],im[this.id]=this,!f||!m){console.error("Failed to create chart: can't acquire context from the given item");return}aa.listen(this,"complete",BS),aa.listen(this,"progress",jB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:l}=this;return ni(t)?e&&l?l:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return vr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():pS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return hS(this.canvas,this.ctx),this}stop(){return aa.stop(this),this}resize(t,e){aa.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,l=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(r,t,e,l),f=i.devicePixelRatio||this.platform.getDevicePixelRatio(),m=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,pS(this,f,!0)&&(this.notifyPlugins("resize",{size:c}),Ue(i.onResize,[this,c],this),this.attached&&this._doResize(m)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};we(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((c,f)=>(c[f]=!1,c),{});let l=[];e&&(l=l.concat(Object.keys(e).map(c=>{const f=e[c],m=vy(c,f),p=m==="r",v=m==="x";return{options:f,dposition:p?"chartArea":v?"bottom":"left",dtype:p?"radialLinear":v?"category":"linear"}}))),we(l,c=>{const f=c.options,m=f.id,p=vy(m,f),v=Se(f.type,c.dtype);(f.position===void 0||VS(f.position,p)!==VS(c.dposition))&&(f.position=c.dposition),r[m]=!0;let E=null;if(m in i&&i[m].type===v)E=i[m];else{const S=vr.getScale(v);E=new S({id:m,type:v,ctx:this.ctx,chart:this}),i[E.id]=E}E.init(f,t)}),we(r,(c,f)=>{c||delete i[f]}),we(i,c=>{xo.configure(this,c,c.options),xo.addBox(this,c)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,l)=>r.index-l.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(zS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(l=>l===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const l=e[i];let c=this.getDatasetMeta(i);const f=l.type||this.config.type;if(c.type&&c.type!==f&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=f,c.indexAxis=l.indexAxis||yy(f,this.options),c.order=l.order||0,c.index=i,c.label=""+l.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const m=vr.getController(f),{datasetElementType:p,dataElementType:v}=an.datasets[f];Object.assign(m,{dataElementType:vr.getElement(v),datasetElementType:p&&vr.getElement(p)}),c.controller=new m(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){we(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let p=0,v=this.data.datasets.length;p<v;p++){const{controller:E}=this.getDatasetMeta(p),S=!r&&l.indexOf(E)===-1;E.buildOrUpdateElements(S),c=Math.max(+E.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),r||we(l,p=>{p.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(zS("z","_idx"));const{_active:f,_lastEvent:m}=this;m?this._eventHandler(m,!0):f.length&&this._updateHoverStyles(f,f,!0),this.render()}_updateScales(){we(this.scales,t=>{xo.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!nS(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:l}of e){const c=i==="_removeElements"?-l:l;HB(t,r,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=l=>new Set(t.filter(c=>c[0]===l).map((c,f)=>f+","+c.splice(1).join(","))),r=i(0);for(let l=1;l<e;l++)if(!nS(r,i(l)))return;return Array.from(r).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;xo.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],we(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,l)=>{r._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,jo(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(aa.has(this)?this.attached&&!aa.running(this)&&aa.start(this):(this.draw(),BS({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,l;for(r=0,l=e.length;r<l;++r){const c=e[r];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=v6(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Wv(e,r),t.controller.draw(),r&&Yv(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return qR(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const l=U6.modes[e];return typeof l=="function"?l(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(l=>l&&l._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=mc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",l=this.getDatasetMeta(t),c=l.controller._resolveAnimations(void 0,r);Cm(e)?(l.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(l,{visible:i}),this.update(f=>f.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),aa.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),hS(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete im[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},r=(l,c,f)=>{l.offsetX=c,l.offsetY=f,this._eventHandler(l)};we(this.options.events,l=>i(l,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(m,p)=>{e.addEventListener(this,m,p),t[m]=p},r=(m,p)=>{t[m]&&(e.removeEventListener(this,m,p),delete t[m])},l=(m,p)=>{this.canvas&&this.resize(m,p)};let c;const f=()=>{r("attach",f),this.attached=!0,this.resize(),i("resize",l),i("detach",c)};c=()=>{this.attached=!1,r("resize",l),this._stop(),this._resize(0,0),i("attach",f)},e.isAttached(this.canvas)?f():c()}unbindEvents(){we(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},we(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let l,c,f,m;for(e==="dataset"&&(l=this.getDatasetMeta(t[0].datasetIndex),l.controller["_"+r+"DatasetHoverStyle"]()),f=0,m=t.length;f<m;++f){c=t[f];const p=c&&this.getDatasetMeta(c.datasetIndex).controller;p&&p[r+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:l,index:c})=>{const f=this.getDatasetMeta(l);if(!f)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:f.data[c],index:c}});!xm(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,l=(m,p)=>m.filter(v=>!p.some(E=>v.datasetIndex===E.datasetIndex&&v.index===E.index)),c=l(e,t),f=i?t:l(t,e);c.length&&this.updateHoverStyle(c,r.mode,!1),f.length&&r.mode&&this.updateHoverStyle(f,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const l=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(l||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:l}=this,c=e,f=this._getActiveElements(t,r,i,c),m=Tz(t),p=FB(t,this._lastEvent,i,m);i&&(this._lastEvent=null,Ue(l.onHover,[t,f,this],this),m&&Ue(l.onClick,[t,f,this],this));const v=!xm(f,r);return(v||e)&&(this._active=f,this._updateHoverStyles(f,r,e)),this._lastEvent=p,v}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const l=this.options.hover;return this.getElementsAtEventForMode(t,l.mode,l,r)}},Xt(vo,"defaults",an),Xt(vo,"instances",im),Xt(vo,"overrides",Zl),Xt(vo,"registry",vr),Xt(vo,"version",BB),Xt(vo,"getChart",US),vo);function jS(){return we(Tp.instances,n=>n._plugins.invalidate())}function qB(n,t,e){const{startAngle:i,x:r,y:l,outerRadius:c,innerRadius:f,options:m}=t,{borderWidth:p,borderJoinStyle:v}=m,E=Math.min(p/c,Tr(i-e));if(n.beginPath(),n.arc(r,l,c-p/2,i+E/2,e-E/2),f>0){const S=Math.min(p/f,Tr(i-e));n.arc(r,l,f+p/2,e-S/2,i+S/2,!0)}else{const S=Math.min(p/2,c*Tr(i-e));if(v==="round")n.arc(r,l,S,e-He/2,i+He/2,!0);else if(v==="bevel"){const R=2*S*S,P=-R*Math.cos(e+He/2)+r,k=-R*Math.sin(e+He/2)+l,D=R*Math.cos(i+He/2)+r,U=R*Math.sin(i+He/2)+l;n.lineTo(P,k),n.lineTo(D,U)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function GB(n,t,e){const{startAngle:i,pixelMargin:r,x:l,y:c,outerRadius:f,innerRadius:m}=t;let p=r/f;n.beginPath(),n.arc(l,c,f,i-p,e+p),m>r?(p=r/m,n.arc(l,c,m,e+p,i-p,!0)):n.arc(l,c,r,e+vn,i-vn),n.closePath(),n.clip()}function ZB(n){return Kv(n,["outerStart","outerEnd","innerStart","innerEnd"])}function WB(n,t,e,i){const r=ZB(n.options.borderRadius),l=(e-t)/2,c=Math.min(l,i*t/2),f=m=>{const p=(e-Math.min(l,m))*i/2;return bs(m,0,Math.min(l,p))};return{outerStart:f(r.outerStart),outerEnd:f(r.outerEnd),innerStart:bs(r.innerStart,0,c),innerEnd:bs(r.innerEnd,0,c)}}function Uu(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Lm(n,t,e,i,r,l){const{x:c,y:f,startAngle:m,pixelMargin:p,innerRadius:v}=t,E=Math.max(t.outerRadius+i+e-p,0),S=v>0?v+i+e+p:0;let R=0;const P=r-m;if(i){const Dt=v>0?v-i:0,et=E>0?E-i:0,vt=(Dt+et)/2,mt=vt!==0?P*vt/(vt+i):P;R=(P-mt)/2}const k=Math.max(.001,P*E-e/He)/E,D=(P-k)/2,U=m+D+R,q=r-D-R,{outerStart:Y,outerEnd:st,innerStart:Q,innerEnd:ht}=WB(t,S,E,q-U),V=E-Y,O=E-st,z=U+Y/V,B=q-st/O,H=S+Q,G=S+ht,F=U+Q/H,Yt=q-ht/G;if(n.beginPath(),l){const Dt=(z+B)/2;if(n.arc(c,f,E,z,Dt),n.arc(c,f,E,Dt,B),st>0){const Vt=Uu(O,B,c,f);n.arc(Vt.x,Vt.y,st,B,q+vn)}const et=Uu(G,q,c,f);if(n.lineTo(et.x,et.y),ht>0){const Vt=Uu(G,Yt,c,f);n.arc(Vt.x,Vt.y,ht,q+vn,Yt+Math.PI)}const vt=(q-ht/S+(U+Q/S))/2;if(n.arc(c,f,S,q-ht/S,vt,!0),n.arc(c,f,S,vt,U+Q/S,!0),Q>0){const Vt=Uu(H,F,c,f);n.arc(Vt.x,Vt.y,Q,F+Math.PI,U-vn)}const mt=Uu(V,U,c,f);if(n.lineTo(mt.x,mt.y),Y>0){const Vt=Uu(V,z,c,f);n.arc(Vt.x,Vt.y,Y,U-vn,z)}}else{n.moveTo(c,f);const Dt=Math.cos(z)*E+c,et=Math.sin(z)*E+f;n.lineTo(Dt,et);const vt=Math.cos(B)*E+c,mt=Math.sin(B)*E+f;n.lineTo(vt,mt)}n.closePath()}function YB(n,t,e,i,r){const{fullCircles:l,startAngle:c,circumference:f}=t;let m=t.endAngle;if(l){Lm(n,t,e,i,m,r);for(let p=0;p<l;++p)n.fill();isNaN(f)||(m=c+(f%mn||mn))}return Lm(n,t,e,i,m,r),n.fill(),m}function KB(n,t,e,i,r){const{fullCircles:l,startAngle:c,circumference:f,options:m}=t,{borderWidth:p,borderJoinStyle:v,borderDash:E,borderDashOffset:S,borderRadius:R}=m,P=m.borderAlign==="inner";if(!p)return;n.setLineDash(E||[]),n.lineDashOffset=S,P?(n.lineWidth=p*2,n.lineJoin=v||"round"):(n.lineWidth=p,n.lineJoin=v||"bevel");let k=t.endAngle;if(l){Lm(n,t,e,i,k,r);for(let D=0;D<l;++D)n.stroke();isNaN(f)||(k=c+(f%mn||mn))}P&&GB(n,t,k),m.selfJoin&&k-c>=He&&R===0&&v!=="miter"&&qB(n,t,k),l||(Lm(n,t,e,i,k,r),n.stroke())}class wh extends vf{constructor(e){super();Xt(this,"circumference");Xt(this,"endAngle");Xt(this,"fullCircles");Xt(this,"innerRadius");Xt(this,"outerRadius");Xt(this,"pixelMargin");Xt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,r){const l=this.getProps(["x","y"],r),{angle:c,distance:f}=VR(l,{x:e,y:i}),{startAngle:m,endAngle:p,innerRadius:v,outerRadius:E,circumference:S}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),R=(this.options.spacing+this.options.borderWidth)/2,P=Se(S,p-m),k=Mm(c,m,p)&&m!==p,D=P>=mn||k,U=bh(f,v+R,E+R);return D&&U}getCenterPoint(e){const{x:i,y:r,startAngle:l,endAngle:c,innerRadius:f,outerRadius:m}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:p,spacing:v}=this.options,E=(l+c)/2,S=(f+m+v+p)/2;return{x:i+Math.cos(E)*S,y:r+Math.sin(E)*S}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:r}=this,l=(i.offset||0)/4,c=(i.spacing||0)/2,f=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>mn?Math.floor(r/mn):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const m=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(m)*l,Math.sin(m)*l);const p=1-Math.sin(Math.min(He,r||0)),v=l*p;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,YB(e,this,v,c,f),KB(e,this,v,c,f),e.restore()}}Xt(wh,"id","arc"),Xt(wh,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Xt(wh,"defaultRoutes",{backgroundColor:"backgroundColor"}),Xt(wh,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});const HS=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},$B=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class FS extends vf{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Ue(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=Ai(i.font),l=r.size,c=this._computeTitleHeight(),{boxWidth:f,itemHeight:m}=HS(i,l);let p,v;e.font=r.string,this.isHorizontal()?(p=this.maxWidth,v=this._fitRows(c,l,f,m)+10):(v=this.maxHeight,p=this._fitCols(c,r,f,m)+10),this.width=Math.min(p,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:l,maxWidth:c,options:{labels:{padding:f}}}=this,m=this.legendHitBoxes=[],p=this.lineWidths=[0],v=r+f;let E=t;l.textAlign="left",l.textBaseline="middle";let S=-1,R=-v;return this.legendItems.forEach((P,k)=>{const D=i+e/2+l.measureText(P.text).width;(k===0||p[p.length-1]+D+2*f>c)&&(E+=v,p[p.length-(k>0?0:1)]=0,R+=v,S++),m[k]={left:0,top:R,row:S,width:D,height:r},p[p.length-1]+=D+f}),E}_fitCols(t,e,i,r){const{ctx:l,maxHeight:c,options:{labels:{padding:f}}}=this,m=this.legendHitBoxes=[],p=this.columnSizes=[],v=c-t;let E=f,S=0,R=0,P=0,k=0;return this.legendItems.forEach((D,U)=>{const{itemWidth:q,itemHeight:Y}=XB(i,e,l,D,r);U>0&&R+Y+2*f>v&&(E+=S+f,p.push({width:S,height:R}),P+=S+f,k++,S=R=0),m[U]={left:P,top:R,col:k,width:q,height:Y},S=Math.max(S,q),R+=Y+f}),E+=S,p.push({width:S,height:R}),E}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:l}}=this,c=Ku(l,this.left,this.width);if(this.isHorizontal()){let f=0,m=Ki(i,this.left+r,this.right-this.lineWidths[f]);for(const p of e)f!==p.row&&(f=p.row,m=Ki(i,this.left+r,this.right-this.lineWidths[f])),p.top+=this.top+t+r,p.left=c.leftForLtr(c.x(m),p.width),m+=p.width+r}else{let f=0,m=Ki(i,this.top+t+r,this.bottom-this.columnSizes[f].height);for(const p of e)p.col!==f&&(f=p.col,m=Ki(i,this.top+t+r,this.bottom-this.columnSizes[f].height)),p.top=m,p.left+=this.left+r,p.left=c.leftForLtr(c.x(p.left),p.width),m+=p.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Wv(t,this),this._draw(),Yv(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:l,labels:c}=t,f=an.color,m=Ku(t.rtl,this.left,this.width),p=Ai(c.font),{padding:v}=c,E=p.size,S=E/2;let R;this.drawTitle(),r.textAlign=m.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=p.string;const{boxWidth:P,boxHeight:k,itemHeight:D}=HS(c,E),U=function(ht,V,O){if(isNaN(P)||P<=0||isNaN(k)||k<0)return;r.save();const z=Se(O.lineWidth,1);if(r.fillStyle=Se(O.fillStyle,f),r.lineCap=Se(O.lineCap,"butt"),r.lineDashOffset=Se(O.lineDashOffset,0),r.lineJoin=Se(O.lineJoin,"miter"),r.lineWidth=z,r.strokeStyle=Se(O.strokeStyle,f),r.setLineDash(Se(O.lineDash,[])),c.usePointStyle){const B={radius:k*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:z},H=m.xPlus(ht,P/2),G=V+S;FR(r,B,H,G,c.pointStyleWidth&&P)}else{const B=V+Math.max((E-k)/2,0),H=m.leftForLtr(ht,P),G=Lh(O.borderRadius);r.beginPath(),Object.values(G).some(F=>F!==0)?gy(r,{x:H,y:B,w:P,h:k,radius:G}):r.rect(H,B,P,k),r.fill(),z!==0&&r.stroke()}r.restore()},q=function(ht,V,O){Om(r,O.text,ht,V+D/2,p,{strikethrough:O.hidden,textAlign:m.textAlign(O.textAlign)})},Y=this.isHorizontal(),st=this._computeTitleHeight();Y?R={x:Ki(l,this.left+v,this.right-i[0]),y:this.top+v+st,line:0}:R={x:this.left+v,y:Ki(l,this.top+st+v,this.bottom-e[0].height),line:0},KR(this.ctx,t.textDirection);const Q=D+v;this.legendItems.forEach((ht,V)=>{r.strokeStyle=ht.fontColor,r.fillStyle=ht.fontColor;const O=r.measureText(ht.text).width,z=m.textAlign(ht.textAlign||(ht.textAlign=c.textAlign)),B=P+S+O;let H=R.x,G=R.y;m.setWidth(this.width),Y?V>0&&H+B+v>this.right&&(G=R.y+=Q,R.line++,H=R.x=Ki(l,this.left+v,this.right-i[R.line])):V>0&&G+Q>this.bottom&&(H=R.x=H+e[R.line].width+v,R.line++,G=R.y=Ki(l,this.top+st+v,this.bottom-e[R.line].height));const F=m.x(H);if(U(F,G,ht),H=kz(z,H+P+S,Y?H+B:this.right,t.rtl),q(m.x(H),G,ht),Y)R.x+=B+v;else if(typeof ht.text!="string"){const Yt=p.lineHeight;R.y+=lC(ht,Yt)+v}else R.y+=Q}),$R(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Ai(e.font),r=Ys(e.padding);if(!e.display)return;const l=Ku(t.rtl,this.left,this.width),c=this.ctx,f=e.position,m=i.size/2,p=r.top+m;let v,E=this.left,S=this.width;if(this.isHorizontal())S=Math.max(...this.lineWidths),v=this.top+p,E=Ki(t.align,E,this.right-S);else{const P=this.columnSizes.reduce((k,D)=>Math.max(k,D.height),0);v=p+Ki(t.align,this.top,this.bottom-P-t.labels.padding-this._computeTitleHeight())}const R=Ki(f,E,E+S);c.textAlign=l.textAlign(jR(f)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,Om(c,e.text,R,v,i)}_computeTitleHeight(){const t=this.options.title,e=Ai(t.font),i=Ys(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,l;if(bh(t,this.left,this.right)&&bh(e,this.top,this.bottom)){for(l=this.legendHitBoxes,i=0;i<l.length;++i)if(r=l[i],bh(t,r.left,r.left+r.width)&&bh(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!t5(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,l=$B(r,i);r&&!l&&Ue(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!l&&Ue(e.onHover,[t,i,this],this)}else i&&Ue(e.onClick,[t,i,this],this)}}function XB(n,t,e,i,r){const l=QB(i,n,t,e),c=JB(r,i,t.lineHeight);return{itemWidth:l,itemHeight:c}}function QB(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((l,c)=>l.length>c.length?l:c)),t+e.size/2+i.measureText(r).width}function JB(n,t,e){let i=n;return typeof t.text!="string"&&(i=lC(t,e)),i}function lC(n,t){const e=n.text?n.text.length:0;return t*e}function t5(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var e5={id:"legend",_element:FS,start(n,t,e){const i=n.legend=new FS({ctx:n.ctx,options:e,chart:n});xo.configure(n,i,e),xo.addBox(n,i)},stop(n){xo.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;xo.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:l,useBorderRadius:c,borderRadius:f}}=n.legend.options;return n._getSortedDatasetMetas().map(m=>{const p=m.controller.getStyle(e?0:void 0),v=Ys(p.borderWidth);return{text:t[m.index].label,fillStyle:p.backgroundColor,fontColor:l,hidden:!m.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(v.width+v.height)/4,strokeStyle:p.borderColor,pointStyle:i||p.pointStyle,rotation:p.rotation,textAlign:r||p.textAlign,borderRadius:c&&(f||p.borderRadius),datasetIndex:m.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const Sh={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,l=0;for(t=0,e=n.length;t<e;++t){const f=n[t].element;if(f&&f.hasValue()){const m=f.tooltipPosition();i.add(m.x),r+=m.y,++l}}return l===0||i.size===0?!1:{x:[...i].reduce((f,m)=>f+m)/i.size,y:r/l}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,l,c,f;for(l=0,c=n.length;l<c;++l){const m=n[l].element;if(m&&m.hasValue()){const p=m.getCenterPoint(),v=xz(t,p);v<r&&(r=v,f=m)}}if(f){const m=f.tooltipPosition();e=m.x,i=m.y}return{x:e,y:i}}};function yr(n,t){return t&&(Un(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function oa(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function n5(n,t){const{element:e,datasetIndex:i,index:r}=t,l=n.getDatasetMeta(i).controller,{label:c,value:f}=l.getLabelAndValue(r);return{chart:n,label:c,parsed:l.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:f,dataset:l.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function qS(n,t){const e=n.chart.ctx,{body:i,footer:r,title:l}=n,{boxWidth:c,boxHeight:f}=t,m=Ai(t.bodyFont),p=Ai(t.titleFont),v=Ai(t.footerFont),E=l.length,S=r.length,R=i.length,P=Ys(t.padding);let k=P.height,D=0,U=i.reduce((st,Q)=>st+Q.before.length+Q.lines.length+Q.after.length,0);if(U+=n.beforeBody.length+n.afterBody.length,E&&(k+=E*p.lineHeight+(E-1)*t.titleSpacing+t.titleMarginBottom),U){const st=t.displayColors?Math.max(f,m.lineHeight):m.lineHeight;k+=R*st+(U-R)*m.lineHeight+(U-1)*t.bodySpacing}S&&(k+=t.footerMarginTop+S*v.lineHeight+(S-1)*t.footerSpacing);let q=0;const Y=function(st){D=Math.max(D,e.measureText(st).width+q)};return e.save(),e.font=p.string,we(n.title,Y),e.font=m.string,we(n.beforeBody.concat(n.afterBody),Y),q=t.displayColors?c+2+t.boxPadding:0,we(i,st=>{we(st.before,Y),we(st.lines,Y),we(st.after,Y)}),q=0,e.font=v.string,we(n.footer,Y),e.restore(),D+=P.width,{width:D,height:k}}function i5(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function s5(n,t,e,i){const{x:r,width:l}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&r+l+c>t.width||n==="right"&&r-l-c<0)return!0}function r5(n,t,e,i){const{x:r,width:l}=e,{width:c,chartArea:{left:f,right:m}}=n;let p="center";return i==="center"?p=r<=(f+m)/2?"left":"right":r<=l/2?p="left":r>=c-l/2&&(p="right"),s5(p,n,t,e)&&(p="center"),p}function GS(n,t,e){const i=e.yAlign||t.yAlign||i5(n,e);return{xAlign:e.xAlign||t.xAlign||r5(n,t,e,i),yAlign:i}}function a5(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function o5(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function ZS(n,t,e,i){const{caretSize:r,caretPadding:l,cornerRadius:c}=n,{xAlign:f,yAlign:m}=e,p=r+l,{topLeft:v,topRight:E,bottomLeft:S,bottomRight:R}=Lh(c);let P=a5(t,f);const k=o5(t,m,p);return m==="center"?f==="left"?P+=p:f==="right"&&(P-=p):f==="left"?P-=Math.max(v,S)+r:f==="right"&&(P+=Math.max(E,R)+r),{x:bs(P,0,i.width-t.width),y:bs(k,0,i.height-t.height)}}function Ud(n,t,e){const i=Ys(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function WS(n){return yr([],oa(n))}function l5(n,t,e){return mc(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function YS(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const uC={beforeTitle:sa,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:sa,beforeBody:sa,beforeLabel:sa,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return ni(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:sa,afterBody:sa,beforeFooter:sa,footer:sa,afterFooter:sa};function bi(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?uC[t].call(e,i):r}class by extends vf{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,l=new XR(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=l5(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=bi(i,"beforeTitle",this,t),l=bi(i,"title",this,t),c=bi(i,"afterTitle",this,t);let f=[];return f=yr(f,oa(r)),f=yr(f,oa(l)),f=yr(f,oa(c)),f}getBeforeBody(t,e){return WS(bi(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return we(t,l=>{const c={before:[],lines:[],after:[]},f=YS(i,l);yr(c.before,oa(bi(f,"beforeLabel",this,l))),yr(c.lines,bi(f,"label",this,l)),yr(c.after,oa(bi(f,"afterLabel",this,l))),r.push(c)}),r}getAfterBody(t,e){return WS(bi(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=bi(i,"beforeFooter",this,t),l=bi(i,"footer",this,t),c=bi(i,"afterFooter",this,t);let f=[];return f=yr(f,oa(r)),f=yr(f,oa(l)),f=yr(f,oa(c)),f}_createItems(t){const e=this._active,i=this.chart.data,r=[],l=[],c=[];let f=[],m,p;for(m=0,p=e.length;m<p;++m)f.push(n5(this.chart,e[m]));return t.filter&&(f=f.filter((v,E,S)=>t.filter(v,E,S,i))),t.itemSort&&(f=f.sort((v,E)=>t.itemSort(v,E,i))),we(f,v=>{const E=YS(t.callbacks,v);r.push(bi(E,"labelColor",this,v)),l.push(bi(E,"labelPointStyle",this,v)),c.push(bi(E,"labelTextColor",this,v))}),this.labelColors=r,this.labelPointStyles=l,this.labelTextColors=c,this.dataPoints=f,f}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let l,c=[];if(!r.length)this.opacity!==0&&(l={opacity:0});else{const f=Sh[i.position].call(this,r,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const m=this._size=qS(this,i),p=Object.assign({},f,m),v=GS(this.chart,i,p),E=ZS(i,p,v,this.chart);this.xAlign=v.xAlign,this.yAlign=v.yAlign,l={opacity:1,x:E.x,y:E.y,width:m.width,height:m.height,caretX:f.x,caretY:f.y}}this._tooltipItems=c,this.$context=void 0,l&&this._resolveAnimations().update(this,l),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const l=this.getCaretPosition(t,i,r);e.lineTo(l.x1,l.y1),e.lineTo(l.x2,l.y2),e.lineTo(l.x3,l.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:l}=this,{caretSize:c,cornerRadius:f}=i,{topLeft:m,topRight:p,bottomLeft:v,bottomRight:E}=Lh(f),{x:S,y:R}=t,{width:P,height:k}=e;let D,U,q,Y,st,Q;return l==="center"?(st=R+k/2,r==="left"?(D=S,U=D-c,Y=st+c,Q=st-c):(D=S+P,U=D+c,Y=st-c,Q=st+c),q=D):(r==="left"?U=S+Math.max(m,v)+c:r==="right"?U=S+P-Math.max(p,E)-c:U=this.caretX,l==="top"?(Y=R,st=Y-c,D=U-c,q=U+c):(Y=R+k,st=Y+c,D=U+c,q=U-c),Q=Y),{x1:D,x2:U,x3:q,y1:Y,y2:st,y3:Q}}drawTitle(t,e,i){const r=this.title,l=r.length;let c,f,m;if(l){const p=Ku(i.rtl,this.x,this.width);for(t.x=Ud(this,i.titleAlign,i),e.textAlign=p.textAlign(i.titleAlign),e.textBaseline="middle",c=Ai(i.titleFont),f=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,m=0;m<l;++m)e.fillText(r[m],p.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+f,m+1===l&&(t.y+=i.titleMarginBottom-f)}}_drawColorBox(t,e,i,r,l){const c=this.labelColors[i],f=this.labelPointStyles[i],{boxHeight:m,boxWidth:p}=l,v=Ai(l.bodyFont),E=Ud(this,"left",l),S=r.x(E),R=m<v.lineHeight?(v.lineHeight-m)/2:0,P=e.y+R;if(l.usePointStyle){const k={radius:Math.min(p,m)/2,pointStyle:f.pointStyle,rotation:f.rotation,borderWidth:1},D=r.leftForLtr(S,p)+p/2,U=P+m/2;t.strokeStyle=l.multiKeyBackground,t.fillStyle=l.multiKeyBackground,fS(t,k,D,U),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,fS(t,k,D,U)}else{t.lineWidth=pe(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const k=r.leftForLtr(S,p),D=r.leftForLtr(r.xPlus(S,1),p-2),U=Lh(c.borderRadius);Object.values(U).some(q=>q!==0)?(t.beginPath(),t.fillStyle=l.multiKeyBackground,gy(t,{x:k,y:P,w:p,h:m,radius:U}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),gy(t,{x:D,y:P+1,w:p-2,h:m-2,radius:U}),t.fill()):(t.fillStyle=l.multiKeyBackground,t.fillRect(k,P,p,m),t.strokeRect(k,P,p,m),t.fillStyle=c.backgroundColor,t.fillRect(D,P+1,p-2,m-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:l,bodyAlign:c,displayColors:f,boxHeight:m,boxWidth:p,boxPadding:v}=i,E=Ai(i.bodyFont);let S=E.lineHeight,R=0;const P=Ku(i.rtl,this.x,this.width),k=function(O){e.fillText(O,P.x(t.x+R),t.y+S/2),t.y+=S+l},D=P.textAlign(c);let U,q,Y,st,Q,ht,V;for(e.textAlign=c,e.textBaseline="middle",e.font=E.string,t.x=Ud(this,D,i),e.fillStyle=i.bodyColor,we(this.beforeBody,k),R=f&&D!=="right"?c==="center"?p/2+v:p+2+v:0,st=0,ht=r.length;st<ht;++st){for(U=r[st],q=this.labelTextColors[st],e.fillStyle=q,we(U.before,k),Y=U.lines,f&&Y.length&&(this._drawColorBox(e,t,st,P,i),S=Math.max(E.lineHeight,m)),Q=0,V=Y.length;Q<V;++Q)k(Y[Q]),S=E.lineHeight;we(U.after,k)}R=0,S=E.lineHeight,we(this.afterBody,k),t.y-=l}drawFooter(t,e,i){const r=this.footer,l=r.length;let c,f;if(l){const m=Ku(i.rtl,this.x,this.width);for(t.x=Ud(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=m.textAlign(i.footerAlign),e.textBaseline="middle",c=Ai(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,f=0;f<l;++f)e.fillText(r[f],m.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:l,yAlign:c}=this,{x:f,y:m}=t,{width:p,height:v}=i,{topLeft:E,topRight:S,bottomLeft:R,bottomRight:P}=Lh(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(f+E,m),c==="top"&&this.drawCaret(t,e,i,r),e.lineTo(f+p-S,m),e.quadraticCurveTo(f+p,m,f+p,m+S),c==="center"&&l==="right"&&this.drawCaret(t,e,i,r),e.lineTo(f+p,m+v-P),e.quadraticCurveTo(f+p,m+v,f+p-P,m+v),c==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(f+R,m+v),e.quadraticCurveTo(f,m+v,f,m+v-R),c==="center"&&l==="left"&&this.drawCaret(t,e,i,r),e.lineTo(f,m+E),e.quadraticCurveTo(f,m,f+E,m),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,l=i&&i.y;if(r||l){const c=Sh[t.position].call(this,this._active,this._eventPosition);if(!c)return;const f=this._size=qS(this,t),m=Object.assign({},c,this._size),p=GS(e,t,m),v=ZS(t,m,p,e);(r._to!==v.x||l._to!==v.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=f.width,this.height=f.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,v))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},l={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=Ys(e.padding),f=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&f&&(t.save(),t.globalAlpha=i,this.drawBackground(l,t,r,e),KR(t,e.textDirection),l.y+=c.top,this.drawTitle(l,t,e),this.drawBody(l,t,e),this.drawFooter(l,t,e),$R(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:f,index:m})=>{const p=this.chart.getDatasetMeta(f);if(!p)throw new Error("Cannot find a dataset at index "+f);return{datasetIndex:f,element:p.data[m],index:m}}),l=!xm(i,r),c=this._positionChanged(r,e);(l||c)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,l=this._active||[],c=this._getActiveElements(t,l,e,i),f=this._positionChanged(c,t),m=e||!xm(c,l)||f;return m&&(this._active=c,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),m}_getActiveElements(t,e,i,r){const l=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(f=>this.chart.data.datasets[f.datasetIndex]&&this.chart.getDatasetMeta(f.datasetIndex).controller.getParsed(f.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,l.mode,l,i);return l.reverse&&c.reverse(),c}_positionChanged(t,e){const{caretX:i,caretY:r,options:l}=this,c=Sh[l.position].call(this,t,e);return c!==!1&&(i!==c.x||r!==c.y)}}Xt(by,"positioners",Sh);var u5={id:"tooltip",_element:by,positioners:Sh,afterInit(n,t,e){e&&(n.tooltip=new by({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:uC},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Ep={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Si=Object.keys(Ep);function KS(n,t){return n-t}function $S(n,t){if(ni(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:l}=n._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),Ta(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(r&&(c=r==="week"&&(Pm(l)||l===!0)?e.startOf(c,"isoWeek",l):e.startOf(c,r)),+c)}function XS(n,t,e,i){const r=Si.length;for(let l=Si.indexOf(n);l<r-1;++l){const c=Ep[Si[l]],f=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(f*c.size))<=i)return Si[l]}return Si[r-1]}function c5(n,t,e,i,r){for(let l=Si.length-1;l>=Si.indexOf(e);l--){const c=Si[l];if(Ep[c].common&&n._adapter.diff(r,i,c)>=t-1)return c}return Si[e?Si.indexOf(e):0]}function h5(n){for(let t=Si.indexOf(n)+1,e=Si.length;t<e;++t)if(Ep[Si[t]].common)return Si[t]}function QS(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=Zv(e,t),l=e[i]>=t?e[i]:e[r];n[l]=!0}}function f5(n,t,e,i){const r=n._adapter,l=+r.startOf(t[0].value,i),c=t[t.length-1].value;let f,m;for(f=l;f<=c;f=+r.add(f,1,i))m=e[f],m>=0&&(t[m].major=!0);return t}function JS(n,t,e){const i=[],r={},l=t.length;let c,f;for(c=0;c<l;++c)f=t[c],r[f]=c,i.push({value:f,major:!1});return l===0||!e?i:f5(n,i,r,e)}class Nm extends bp{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new L6._date(t.adapters.date);r.init(e),Oh(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:$S(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:l,minDefined:c,maxDefined:f}=this.getUserBounds();function m(p){!c&&!isNaN(p.min)&&(r=Math.min(r,p.min)),!f&&!isNaN(p.max)&&(l=Math.max(l,p.max))}(!c||!f)&&(m(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&m(this.getMinMax(!1))),r=Ta(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),l=Ta(l)&&!isNaN(l)?l:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,l-1),this.max=Math.max(r+1,l)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const l=this.min,c=this.max,f=Iz(r,l,c);return this._unit=e.unit||(i.autoSkip?XS(e.minUnit,this.min,this.max,this._getLabelCapacity(l)):c5(this,f.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:h5(this._unit),this.initOffsets(r),t.reverse&&f.reverse(),JS(this,f,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,l;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,l=this.getDecimalForValue(t[t.length-1]),t.length===1?i=l:i=(l-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;e=bs(e,0,c),i=bs(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,l=r.time,c=l.unit||XS(l.minUnit,e,i,this._getLabelCapacity(e)),f=Se(r.ticks.stepSize,1),m=c==="week"?l.isoWeekday:!1,p=Pm(m)||m===!0,v={};let E=e,S,R;if(p&&(E=+t.startOf(E,"isoWeek",m)),E=+t.startOf(E,p?"day":c),t.diff(i,e,c)>1e5*f)throw new Error(e+" and "+i+" are too far apart with stepSize of "+f+" "+c);const P=r.ticks.source==="data"&&this.getDataTimestamps();for(S=E,R=0;S<i;S=+t.add(S,f,c),R++)QS(v,S,P);return(S===i||r.bounds==="ticks"||R===1)&&QS(v,S,P),Object.keys(v).sort(KS).map(k=>+k)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,l=this._unit,c=e||r[l];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,r){const l=this.options,c=l.ticks.callback;if(c)return Ue(c,[t,e,i],this);const f=l.time.displayFormats,m=this._unit,p=this._majorUnit,v=m&&f[m],E=p&&f[p],S=i[e],R=p&&E&&S&&S.major;return this._adapter.format(t,r||(R?E:v))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=Vl(this.isHorizontal()?e.maxRotation:e.minRotation),l=Math.cos(r),c=Math.sin(r),f=this._resolveTickFontOptions(0).size;return{w:i*l+f*c,h:i*c+f*l}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,l=this._tickFormatFunction(t,0,JS(this,[t],this._majorUnit),r),c=this._getLabelSize(l),f=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return f>0?f:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push($S(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Mz(t.sort(KS))}}Xt(Nm,"id","time"),Xt(Nm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function jd(n,t,e){let i=0,r=n.length-1,l,c,f,m;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=my(n,"pos",t)),{pos:l,time:f}=n[i],{pos:c,time:m}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=my(n,"time",t)),{time:l,pos:f}=n[i],{time:c,pos:m}=n[r]);const p=c-l;return p?f+(m-f)*(t-l)/p:f}class t1 extends Nm{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=jd(e,this.min),this._tableRange=jd(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],l=[];let c,f,m,p,v;for(c=0,f=t.length;c<f;++c)p=t[c],p>=e&&p<=i&&r.push(p);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,f=r.length;c<f;++c)v=r[c+1],m=r[c-1],p=r[c],Math.round((v+m)/2)!==p&&l.push({time:p,pos:c/(f-1)});return l}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,l)=>r-l)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(jd(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return jd(this._table,i*this._tableRange+this._minPos,!0)}}Xt(t1,"id","timeseries"),Xt(t1,"defaults",Nm.defaults);const cC="label";function e1(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function d5(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function hC(n,t){n.labels=t}function fC(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cC;const i=[];n.datasets=t.map(r=>{const l=n.datasets.find(c=>c[e]===r[e]);return!l||!r.data||i.includes(l)?{...r}:(i.push(l),Object.assign(l,r),l)})}function m5(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cC;const e={labels:[],datasets:[]};return hC(e,n.labels),fC(e,n.datasets,t),e}function p5(n,t){const{height:e=150,width:i=300,redraw:r=!1,datasetIdKey:l,type:c,data:f,options:m,plugins:p=[],fallbackContent:v,updateMode:E,...S}=n,R=K.useRef(null),P=K.useRef(null),k=()=>{R.current&&(P.current=new Tp(R.current,{type:c,data:m5(f,l),options:m&&{...m},plugins:p}),e1(t,P.current))},D=()=>{e1(t,null),P.current&&(P.current.destroy(),P.current=null)};return K.useEffect(()=>{!r&&P.current&&m&&d5(P.current,m)},[r,m]),K.useEffect(()=>{!r&&P.current&&hC(P.current.config.data,f.labels)},[r,f.labels]),K.useEffect(()=>{!r&&P.current&&f.datasets&&fC(P.current.config.data,f.datasets,l)},[r,f.datasets]),K.useEffect(()=>{P.current&&(r?(D(),setTimeout(k)):P.current.update(E))},[r,m,f.labels,f.datasets,E]),K.useEffect(()=>{P.current&&(D(),setTimeout(k))},[c]),K.useEffect(()=>(k(),()=>D()),[]),ge.createElement("canvas",{ref:R,role:"img",height:e,width:i,...S},v)}const g5=K.forwardRef(p5);function _5(n,t){return Tp.register(t),K.forwardRef((e,i)=>ge.createElement(g5,{...e,ref:i,type:n}))}const y5=_5("pie",_y);Tp.register(wh,u5,e5);const v5={calma:"😴",musicá:"🎶",ambiante:"🍻",fiesta:"🎉",lleno:"🕺"},b5=n=>n.charAt(0).toUpperCase()+n.slice(1),T5=({votes:n})=>{const t=Object.keys(n),e=Object.values(n);if(t.length===0)return it.jsx("p",{style:{textAlign:"center"},children:"Aucun vote pour le moment."});const i={labels:t.map(r=>`${v5[r]||""} ${b5(r)}`),datasets:[{label:"Votes",data:e,backgroundColor:["#8884d8","#82ca9d","#ffc658","#ff8042","#ff4d4f"],borderWidth:1}]};return it.jsx("div",{className:"chart-container",children:it.jsx(y5,{data:i})})};function wp(){const[n,t]=K.useState(null),[e,i]=K.useState(!0);return K.useEffect(()=>{const r=Vv(Kw,l=>{l?(t({uid:l.uid,isAnonymous:l.isAnonymous}),i(!1)):uR(Kw).then(c=>{t({uid:c.user.uid,isAnonymous:!0}),i(!1)}).catch(c=>{console.error("Erreur lors de la connexion anonyme",c),t(null),i(!1)})});return()=>r()},[]),{user:n,loading:e}}const E5=(n,t)=>{const[e,i]=K.useState(null),[r,l]=K.useState(!1);return{vote:async f=>{l(!0),i(null);try{const m=Mo(Bn,`bars/${n}/ambianceVotes`),p=on.fromDate(new Date(Date.now()-30*60*1e3)),v=ym(m,_w("uid","==",t),_w("timestamp",">",p));return(await ny(v)).empty?(await Ev(m,{uid:t,type:f,timestamp:on.now()}),!0):(i("Ya has votado en los últimos 30 minutos."),!1)}catch(m){return console.error("Error al guardar el voto:",m),i("Hubo un error al enviar tu voto."),!1}finally{l(!1)}},loading:r,error:e}},n1={calma:"😴",musica:"🎶",ambiente:"🍻",fiesta:"🎉",lleno:"🕺"},i1=n=>n.charAt(0).toUpperCase()+n.slice(1),w5=()=>{const{id:n}=gP(),{user:t}=wp(),e=Ho(),[i,r]=K.useState(""),[l,c]=K.useState([]),[f,m]=K.useState(""),[p,v]=K.useState(0),[E,S]=K.useState(null),[R,P]=K.useState({}),{vote:k,error:D,loading:U}=E5(n,(t==null?void 0:t.uid)||"anon");K.useEffect(()=>{const V=async()=>{const B=Ar(Bn,"bars",n),H=await ic(B);H.exists()&&r(H.data().nom)},O=ym(Mo(Bn,`bars/${n}/comments`),wL("timestamp","desc")),z=iy(O,B=>{const H=B.docs.map(G=>G.data());c(H)});return V(),()=>z()},[n]),K.useEffect(()=>{const V=ym(Mo(Bn,`bars/${n}/ambianceVotes`));return iy(V,O=>{var H;const z={};O.docs.forEach(G=>{const F=G.data().type;z[F]=(z[F]||0)+1}),P(z);const B=(H=Object.entries(z).sort((G,F)=>F[1]-G[1])[0])==null?void 0:H[0];S(B||null)})},[n]);const q=l.length?(l.reduce((V,O)=>V+O.rating,0)/l.length).toFixed(1):"Sin valoraciones",Y=async V=>{if(V.preventDefault(),!f||p===0){alert("Por favor completa todos los campos.");return}try{let O="Anónimo";if(t!=null&&t.uid){const z=Ar(Bn,"users",t.uid),B=await ic(z);B.exists()&&(O=B.data().pseudo||"Anónimo")}await Ev(Mo(Bn,`bars/${n}/comments`),{uid:(t==null?void 0:t.uid)||"anon",nom:O,message:f,rating:p,timestamp:RL()}),m(""),v(0)}catch(O){console.error("Error al enviar comentario:",O),alert("Hubo un problema al enviar el comentario.")}},st=async V=>{await k(V)?alert("¡Gracias por tu voto!"):D&&alert(D)},Q=()=>{e("/mapa")},ht=V=>{const O=Math.floor(V),z=V-O>=.5,B=5-O-(z?1:0),H=[];for(let G=0;G<O;G++)H.push(it.jsx("span",{className:"star active",children:"★"},`full-${G}`));z&&H.push(it.jsx("span",{className:"star half",children:"★"},"half"));for(let G=0;G<B;G++)H.push(it.jsx("span",{className:"star",children:"★"},`empty-${G}`));return H};return it.jsxs("div",{className:"bar-page",children:[it.jsx(sf,{}),it.jsx("h2",{children:i}),Object.keys(R).length>0&&it.jsxs(it.Fragment,{children:[it.jsx("h3",{style:{textAlign:"center"},children:"Distribución de votos de ambiente:"}),it.jsx(T5,{votes:R})]}),E&&it.jsxs("div",{className:"dominant-ambiance",children:["Ambiente dominante: ",it.jsxs("span",{className:`tag tag-${E}`,children:[n1[E]," ",i1(E)]})]}),it.jsxs("div",{className:"rating",children:[it.jsx("span",{className:"label",children:"Calificación promedio:"}),typeof q=="string"?it.jsxs("span",{children:[" ",q]}):it.jsxs(it.Fragment,{children:[ht(parseFloat(q)),it.jsxs("span",{style:{marginLeft:"0.5rem"},children:["(",q," / 5)"]}),it.jsxs("span",{style:{marginLeft:"0.5rem",fontSize:"1rem"},children:["• ",l.length," ",l.length===1?"comentario":"comentarios"]})]})]}),it.jsx("h3",{children:"Comentarios:"}),it.jsx("ul",{children:l.map((V,O)=>it.jsxs("li",{children:[it.jsx("strong",{children:V.nom})," – ⭐ ",V.rating,it.jsx("br",{}),V.message]},O))}),it.jsx("h3",{children:"Añadir comentario:"}),it.jsxs("form",{onSubmit:Y,className:"comment-form",children:[it.jsx("textarea",{placeholder:"Escribe tu comentario...",value:f,onChange:V=>m(V.target.value),required:!0}),it.jsx("div",{className:"stars",children:[1,2,3,4,5].map(V=>it.jsx("span",{onClick:()=>v(V),className:V<=p?"star active":"star",children:"★"},V))}),it.jsx("button",{type:"submit",children:"Enviar"})]}),it.jsx("h3",{children:"Ambiente actual:"}),it.jsx("div",{className:"ambiance-buttons",children:["calma","musica","ambiente","fiesta","lleno"].map(V=>it.jsxs("button",{onClick:()=>st(V),disabled:U,children:[n1[V]," ",i1(V)]},V))}),it.jsx("button",{onClick:Q,children:" Ver 🗺️"})]})},S5="Mael Develop",dC=2;let A5=new Date().getFullYear();function x5(){return"Stable"}const R5=` ${A5}, ${S5} in version ${dC} ${x5()}`,C5=()=>it.jsx("div",{className:"footer",children:it.jsxs("p",{className:"credits",children:["© ",R5]})}),I5=()=>{const n=Ho(),t=mp(),[e,i]=K.useState(()=>localStorage.getItem("darkMode")==="true"),[r,l]=K.useState(""),[c,f]=K.useState(!1),m=()=>{n("/")},p=()=>{const R=!e;i(R),localStorage.setItem("darkMode",String(R)),document.documentElement.classList.toggle("dark-mode",R)},v=()=>{window.confirm("¿Estás seguro de que quieres borrar los datos locales?")&&(localStorage.clear(),alert("Datos locales eliminados."))},E=async()=>{try{await mR(t),n("/login")}catch(R){alert("Error al cerrar sesión: "+R.message)}},S=async()=>{if(!t.currentUser||!r.trim())return;const R=Ar(Bn,"users",t.currentUser.uid);await Xd(R,{pseudo:r}),f(!0),setTimeout(()=>f(!1),2e3)};return K.useEffect(()=>{document.documentElement.classList.toggle("dark-mode",e)},[e]),K.useEffect(()=>{(async()=>{if(!t.currentUser)return;const P=Ar(Bn,"users",t.currentUser.uid),k=await ic(P);k.exists()&&l(k.data().pseudo||"")})()},[t.currentUser]),it.jsxs("div",{className:"settings-page",children:[it.jsx(sf,{}),it.jsx("h2",{children:"⚙️ Ajustes"}),it.jsx("div",{className:"setting",children:it.jsxs("label",{children:[it.jsx("input",{type:"checkbox",checked:e,onChange:p}),"Modo oscuro"]})}),it.jsxs("div",{className:"setting",children:[it.jsxs("label",{children:["Nombre público:",it.jsx("input",{type:"text",value:r,onChange:R=>l(R.target.value),style:{marginLeft:8}})]}),it.jsx("button",{onClick:S,style:{marginLeft:8},children:"Guardar"}),c&&it.jsx("span",{style:{color:"green",marginLeft:10},children:"✔️ Guardado"})]}),it.jsx("div",{className:"setting",children:it.jsx("button",{onClick:v,children:"🧹 Borrar datos locales"})}),it.jsx("div",{className:"setting",children:it.jsx("button",{onClick:E,style:{backgroundColor:"#e53e3e",color:"white"},children:"🔒 Cerrar sesión"})}),it.jsx("button",{onClick:m,children:"Ir a inicio"}),it.jsx("div",{className:"setting small",children:it.jsxs("p",{children:["Versión: ",dC]})})]})},P5=()=>it.jsxs("div",{className:"about-page",children:[it.jsx(sf,{}),it.jsx("h1",{children:"Sobre nosotros"}),it.jsx("p",{children:"Tapas Radar es una aplicación que te permite encontrar los mejores bares de Madrid."}),it.jsxs("p",{children:["By: ",it.jsx("a",{href:"https://github.com/maeldevelop7",children:"Mael Gruand"})]})]}),M5=()=>{const{user:n,loading:t}=wp(),e=Ho(),[i,r]=K.useState("free"),[l,c]=K.useState(null),[f,m]=K.useState(null),[p,v]=K.useState(!0),[E,S]=K.useState(!1);K.useEffect(()=>{!t&&n&&(async()=>{try{v(!0);const D=Ar(Bn,"users",n.uid),U=await ic(D);if(U.exists()){const q=U.data();if(q.subscriptionEnd&&q.subscriptionEnd.toDate){const Y=q.subscriptionEnd.toDate();c(Y),Y>new Date?r(q.subscriptionStatus||"free"):(await Xd(D,{subscriptionStatus:"free",subscriptionEnd:null,subscriptionStart:null}),r("free"),c(null))}else r(q.subscriptionStatus||"free"),c(null)}else r("free"),c(null)}catch(D){m("Error al recuperar la suscripción"),console.error(D)}finally{v(!1)}})()},[t,n]);const R=async()=>{if(n){S(!0);try{const k=Ar(Bn,"users",n.uid),D=new Date,U=new Date(D.getTime()+30*24*60*60*1e3);await Xd(k,{subscriptionStatus:"premium",subscriptionStart:D,subscriptionEnd:U}),r("premium"),c(U),m(null)}catch(k){m("Error al actualizar la suscripción"),console.error(k)}finally{S(!1)}}},P=async()=>{if(n){S(!0);try{const k=Ar(Bn,"users",n.uid);await Xd(k,{subscriptionStatus:"free",subscriptionStart:null,subscriptionEnd:null}),r("free"),c(null),m(null)}catch(k){m("Error al actualizar la suscripción"),console.error(k)}finally{S(!1)}}};return t||p?it.jsx("div",{children:"Cargando..."}):n?it.jsxs("div",{style:{padding:20},children:[it.jsx("h1",{children:"Suscripción del usuario"}),it.jsxs("p",{children:["UID: ",n.uid]}),it.jsxs("p",{children:["Estado: ",it.jsx("strong",{children:i.toUpperCase()})]}),i==="premium"&&l&&it.jsxs("p",{children:["Fecha de expiración: ",l.toLocaleDateString()]}),f&&it.jsx("p",{style:{color:"red"},children:f}),i==="free"&&it.jsx("button",{onClick:R,disabled:E,children:E?"Procesando...":"Pasar a Premium (30 días)"}),i==="premium"&&it.jsx("button",{onClick:P,disabled:E,style:{marginTop:10},children:E?"Procesando...":"Volver a estado Free"}),it.jsx("button",{onClick:()=>e("/"),style:{marginTop:20,display:"block"},children:"Volver al inicio"})]}):it.jsx("div",{children:"Usuario no conectado."})},O5=({children:n})=>{const{user:t,loading:e}=wp(),i=Pr();return e?it.jsx("div",{children:"Chargement..."}):!t||t.isAnonymous?it.jsx(PP,{to:"/login",replace:!0,state:{from:i}}):n},Qn=mp(),k5=()=>{var Y,st;const n=Ho(),t=Pr(),[e,i]=K.useState(!0),[r,l]=K.useState(""),[c,f]=K.useState(""),[m,p]=K.useState(null),[v,E]=K.useState(null),S=((st=(Y=t.state)==null?void 0:Y.from)==null?void 0:st.pathname)||"/",R=async Q=>{const ht=Ar(Bn,"users",Q.uid);(await ic(ht)).exists()||await xL(ht,{email:Q.email||null,subscriptionStatus:"free",subscriptionStart:null,subscriptionEnd:null,createdAt:new Date,pseudo:Q.email?Q.email.split("@")[0]:"anónimo"})};async function P(Q){var V;const ht=new Er;try{return(await g4(Q,ht)).user}catch(O){if(O.code==="auth/credential-already-in-use"){const z=await jw(Qn,ht);try{(V=Qn.currentUser)!=null&&V.isAnonymous&&await Qn.currentUser.delete()}catch(B){console.warn("Erreur lors de la suppression de l’utilisateur anonyme",B)}return z.user}throw O}}async function k(Q,ht,V){var z;const O=Ql.credential(ht,V);try{return(await WV(Q,O)).user}catch(B){if(B.code==="auth/email-already-in-use"){const H=await zw(Qn,ht,V);try{(z=Qn.currentUser)!=null&&z.isAnonymous&&await Qn.currentUser.delete()}catch(G){console.warn("Erreur lors de la suppression de l’utilisateur anonyme",G)}return H.user}throw B}}K.useEffect(()=>{const Q=Vv(Qn,async ht=>{if(ht)E(ht),await R(ht),i(!1);else try{await uR(Qn)}catch{p("Error en la conexión anónima"),i(!1)}});return()=>Q()},[]);const D=async()=>{p(null),i(!0);try{const Q=Qn.currentUser;if(Q&&Q.isAnonymous){const ht=await P(Q);await R(ht),E(ht)}else{const ht=await jw(Qn,new Er);await R(ht.user),E(ht.user)}n(S)}catch(Q){p(Q.message)}finally{i(!1)}},U=async()=>{p(null),i(!0);try{const Q=Qn.currentUser;if(Q&&Q.isAnonymous){const ht=await k(Q,r,c);await R(ht),E(ht)}else await zw(Qn,r,c),Qn.currentUser&&(await R(Qn.currentUser),E(Qn.currentUser));n(S)}catch(Q){p(Q.message)}finally{i(!1)}},q=async()=>{p(null),i(!0);try{const Q=await YV(Qn,r,c);await R(Q.user),E(Q.user),n(S)}catch(Q){p(Q.message)}finally{i(!1)}};return e?it.jsx("div",{children:"Cargando..."}):it.jsxs("div",{style:{maxWidth:400,margin:"auto",padding:20},children:[it.jsx("h1",{children:"Acceder a TapasMadrid"}),m&&it.jsx("p",{style:{color:"red"},children:m}),it.jsx("button",{onClick:D,style:{width:"100%",marginBottom:10},children:"Iniciar sesión con Google"}),it.jsx("hr",{}),it.jsx("input",{type:"email",placeholder:"Correo electrónico",value:r,onChange:Q=>l(Q.target.value),style:{width:"100%",marginTop:10,padding:8}}),it.jsx("input",{type:"password",placeholder:"Contraseña",value:c,onChange:Q=>f(Q.target.value),style:{width:"100%",marginTop:10,padding:8}}),it.jsx("button",{onClick:U,style:{width:"100%",marginTop:10},children:"Iniciar sesión"}),it.jsx("button",{onClick:q,style:{width:"100%",marginTop:10},children:"Crear cuenta"})]})},D5=()=>{const{user:n,loading:t}=wp();return t?it.jsx("p",{children:"Cargando..."}):n?(console.log(`Conectado anónimamente con UID ${n.uid}`),it.jsx(it.Fragment,{children:it.jsxs(n2,{children:[it.jsxs(OP,{children:[it.jsx(ra,{path:"/",element:it.jsx(p2,{})}),it.jsx(ra,{path:"/mapa",element:it.jsx(u3,{})}),it.jsx(ra,{path:"/añadir",element:it.jsx(Z3,{})}),it.jsx(ra,{path:"/bar/:id",element:it.jsx(w5,{})})," ",it.jsx(ra,{path:"/settings",element:it.jsx(I5,{})}),it.jsx(ra,{path:"/about",element:it.jsx(P5,{})}),it.jsx(ra,{path:"/abonnement",element:it.jsx(O5,{children:it.jsx(M5,{})})}),it.jsx(ra,{path:"/login",element:it.jsx(k5,{})})]}),it.jsx(C5,{}),it.jsx(G3,{})]})})):it.jsx("p",{children:"Problema de authentificación"})},L5="modulepreload",N5=function(n){return"/TapasMadrid/"+n},s1={},V5=function(t,e,i){let r=Promise.resolve();if(e&&e.length>0){let c=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));r=c(e.map(p=>{if(p=N5(p),p in s1)return;s1[p]=!0;const v=p.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${E}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":L5,v||(S.as="script"),S.crossOrigin="",S.href=p,m&&S.setAttribute("nonce",m),document.head.appendChild(S),v)return new Promise((R,P)=>{S.addEventListener("load",R),S.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return r.then(c=>{for(const f of c||[])f.status==="rejected"&&l(f.reason);return t().catch(l)})};function z5(n={}){const{immediate:t=!1,onNeedRefresh:e,onOfflineReady:i,onRegistered:r,onRegisteredSW:l,onRegisterError:c}=n;let f,m;const p=async(E=!0)=>{await m};async function v(){if("serviceWorker"in navigator){if(f=await V5(async()=>{const{Workbox:E}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:E}},[]).then(({Workbox:E})=>new E("/TapasMadrid/sw.js",{scope:"/TapasMadrid/",type:"classic"})).catch(E=>{c==null||c(E)}),!f)return;f.addEventListener("activated",E=>{(E.isUpdate||E.isExternal)&&window.location.reload()}),f.addEventListener("installed",E=>{E.isUpdate||i==null||i()}),f.register({immediate:t}).then(E=>{l?l("/TapasMadrid/sw.js",E):r==null||r(E)}).catch(E=>{c==null||c(E)})}}return m=v(),p}const B5=K.createContext({user:null,userData:null,loading:!0,logout:async()=>{}}),U5=({children:n})=>{const t=mp(),[e,i]=K.useState(null),[r,l]=K.useState(null),[c,f]=K.useState(!0);K.useEffect(()=>{const p=Vv(t,async v=>{if(i(v),v){const E=Ar(Bn,"users",v.uid),S=await ic(E);if(S.exists()){const R=S.data();l({uid:v.uid,email:v.email,subscriptionStatus:R.subscriptionStatus??"free",subscriptionStart:R.subscriptionStart?R.subscriptionStart.toDate():null,subscriptionEnd:R.subscriptionEnd?R.subscriptionEnd.toDate():null})}else l(null)}else l(null);f(!1)});return()=>p()},[t]);const m=async()=>{f(!0),await mR(t),i(null),l(null),f(!1)};return it.jsx(B5.Provider,{value:{user:e,userData:r,loading:c,logout:m},children:n})};BI.createRoot(document.getElementById("root")).render(it.jsx(ge.StrictMode,{children:it.jsx(U5,{children:it.jsx(D5,{})})}));z5({onNeedRefresh(){confirm("Nueva versión disponible. ¿Recargar la página?")&&window.location.reload()},onOfflineReady(){console.log("TapasRadar está disponible sin conexión.")}});
